var Ao=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function l3(Z){return Z&&Z.__esModule&&Object.prototype.hasOwnProperty.call(Z,"default")?Z.default:Z}function $p(Z){throw new Error('Could not dynamically require "'+Z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kv={exports:{}},Ki={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e1=Object.getOwnPropertySymbols,u3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable;function c3(Z){if(Z==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Z)}function h3(){try{if(!Object.assign)return!1;var Z=new String("abc");if(Z[5]="de",Object.getOwnPropertyNames(Z)[0]==="5")return!1;for(var le={},t=0;t<10;t++)le["_"+String.fromCharCode(t)]=t;var B=Object.getOwnPropertyNames(le).map(function(d){return le[d]});if(B.join("")!=="0123456789")return!1;var H={};return"abcdefghijklmnopqrst".split("").forEach(function(d){H[d]=d}),Object.keys(Object.assign({},H)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var t1=h3()?Object.assign:function(Z,le){for(var t,B=c3(Z),H,d=1;d<arguments.length;d++){t=Object(arguments[d]);for(var l in t)u3.call(t,l)&&(B[l]=t[l]);if(e1){H=e1(t);for(var b=0;b<H.length;b++)f3.call(t,H[b])&&(B[H[b]]=t[H[b]])}}return B};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=t1,Ch=60103,r1=60106;Ki.Fragment=60107;Ki.StrictMode=60108;Ki.Profiler=60114;var n1=60109,a1=60110,i1=60112;Ki.Suspense=60113;var o1=60115,s1=60116;if(typeof Symbol=="function"&&Symbol.for){var sf=Symbol.for;Ch=sf("react.element"),r1=sf("react.portal"),Ki.Fragment=sf("react.fragment"),Ki.StrictMode=sf("react.strict_mode"),Ki.Profiler=sf("react.profiler"),n1=sf("react.provider"),a1=sf("react.context"),i1=sf("react.forward_ref"),Ki.Suspense=sf("react.suspense"),o1=sf("react.memo"),s1=sf("react.lazy")}var l1=typeof Symbol=="function"&&Symbol.iterator;function v3(Z){return Z===null||typeof Z!="object"?null:(Z=l1&&Z[l1]||Z["@@iterator"],typeof Z=="function"?Z:null)}function Ev(Z){for(var le="https://reactjs.org/docs/error-decoder.html?invariant="+Z,t=1;t<arguments.length;t++)le+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+Z+"; visit "+le+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f1={};function Lh(Z,le,t){this.props=Z,this.context=le,this.refs=f1,this.updater=t||u1}Lh.prototype.isReactComponent={};Lh.prototype.setState=function(Z,le){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error(Ev(85));this.updater.enqueueSetState(this,Z,le,"setState")};Lh.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function c1(){}c1.prototype=Lh.prototype;function O0(Z,le,t){this.props=Z,this.context=le,this.refs=f1,this.updater=t||u1}var N0=O0.prototype=new c1;N0.constructor=O0;F0(N0,Lh.prototype);N0.isPureReactComponent=!0;var B0={current:null},h1=Object.prototype.hasOwnProperty,v1={key:!0,ref:!0,__self:!0,__source:!0};function p1(Z,le,t){var B,H={},d=null,l=null;if(le!=null)for(B in le.ref!==void 0&&(l=le.ref),le.key!==void 0&&(d=""+le.key),le)h1.call(le,B)&&!v1.hasOwnProperty(B)&&(H[B]=le[B]);var b=arguments.length-2;if(b===1)H.children=t;else if(1<b){for(var w=Array(b),e=0;e<b;e++)w[e]=arguments[e+2];H.children=w}if(Z&&Z.defaultProps)for(B in b=Z.defaultProps,b)H[B]===void 0&&(H[B]=b[B]);return{$$typeof:Ch,type:Z,key:d,ref:l,props:H,_owner:B0.current}}function p3(Z,le){return{$$typeof:Ch,type:Z.type,key:le,ref:Z.ref,props:Z.props,_owner:Z._owner}}function U0(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===Ch}function d3(Z){var le={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(t){return le[t]})}var d1=/\/+/g;function V0(Z,le){return typeof Z=="object"&&Z!==null&&Z.key!=null?d3(""+Z.key):le.toString(36)}function qp(Z,le,t,B,H){var d=typeof Z;(d==="undefined"||d==="boolean")&&(Z=null);var l=!1;if(Z===null)l=!0;else switch(d){case"string":case"number":l=!0;break;case"object":switch(Z.$$typeof){case Ch:case r1:l=!0}}if(l)return l=Z,H=H(l),Z=B===""?"."+V0(l,0):B,Array.isArray(H)?(t="",Z!=null&&(t=Z.replace(d1,"$&/")+"/"),qp(H,le,t,"",function(e){return e})):H!=null&&(U0(H)&&(H=p3(H,t+(!H.key||l&&l.key===H.key?"":(""+H.key).replace(d1,"$&/")+"/")+Z)),le.push(H)),1;if(l=0,B=B===""?".":B+":",Array.isArray(Z))for(var b=0;b<Z.length;b++){d=Z[b];var w=B+V0(d,b);l+=qp(d,le,t,w,H)}else if(w=v3(Z),typeof w=="function")for(Z=w.call(Z),b=0;!(d=Z.next()).done;)d=d.value,w=B+V0(d,b++),l+=qp(d,le,t,w,H);else if(d==="object")throw le=""+Z,Error(Ev(31,le==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":le));return l}function ed(Z,le,t){if(Z==null)return Z;var B=[],H=0;return qp(Z,B,"","",function(d){return le.call(t,d,H++)}),B}function g3(Z){if(Z._status===-1){var le=Z._result;le=le(),Z._status=0,Z._result=le,le.then(function(t){Z._status===0&&(t=t.default,Z._status=1,Z._result=t)},function(t){Z._status===0&&(Z._status=2,Z._result=t)})}if(Z._status===1)return Z._result;throw Z._result}var g1={current:null};function Gf(){var Z=g1.current;if(Z===null)throw Error(Ev(321));return Z}var y3={ReactCurrentDispatcher:g1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:B0,IsSomeRendererActing:{current:!1},assign:F0};Ki.Children={map:ed,forEach:function(Z,le,t){ed(Z,function(){le.apply(this,arguments)},t)},count:function(Z){var le=0;return ed(Z,function(){le++}),le},toArray:function(Z){return ed(Z,function(le){return le})||[]},only:function(Z){if(!U0(Z))throw Error(Ev(143));return Z}};Ki.Component=Lh;Ki.PureComponent=O0;Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y3;Ki.cloneElement=function(Z,le,t){if(Z==null)throw Error(Ev(267,Z));var B=F0({},Z.props),H=Z.key,d=Z.ref,l=Z._owner;if(le!=null){if(le.ref!==void 0&&(d=le.ref,l=B0.current),le.key!==void 0&&(H=""+le.key),Z.type&&Z.type.defaultProps)var b=Z.type.defaultProps;for(w in le)h1.call(le,w)&&!v1.hasOwnProperty(w)&&(B[w]=le[w]===void 0&&b!==void 0?b[w]:le[w])}var w=arguments.length-2;if(w===1)B.children=t;else if(1<w){b=Array(w);for(var e=0;e<w;e++)b[e]=arguments[e+2];B.children=b}return{$$typeof:Ch,type:Z.type,key:H,ref:d,props:B,_owner:l}};Ki.createContext=function(Z,le){return le===void 0&&(le=null),Z={$$typeof:a1,_calculateChangedBits:le,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider={$$typeof:n1,_context:Z},Z.Consumer=Z};Ki.createElement=p1;Ki.createFactory=function(Z){var le=p1.bind(null,Z);return le.type=Z,le};Ki.createRef=function(){return{current:null}};Ki.forwardRef=function(Z){return{$$typeof:i1,render:Z}};Ki.isValidElement=U0;Ki.lazy=function(Z){return{$$typeof:s1,_payload:{_status:-1,_result:Z},_init:g3}};Ki.memo=function(Z,le){return{$$typeof:o1,type:Z,compare:le===void 0?null:le}};Ki.useCallback=function(Z,le){return Gf().useCallback(Z,le)};Ki.useContext=function(Z,le){return Gf().useContext(Z,le)};Ki.useDebugValue=function(){};Ki.useEffect=function(Z,le){return Gf().useEffect(Z,le)};Ki.useImperativeHandle=function(Z,le,t){return Gf().useImperativeHandle(Z,le,t)};Ki.useLayoutEffect=function(Z,le){return Gf().useLayoutEffect(Z,le)};Ki.useMemo=function(Z,le){return Gf().useMemo(Z,le)};Ki.useReducer=function(Z,le,t){return Gf().useReducer(Z,le,t)};Ki.useRef=function(Z){return Gf().useRef(Z)};Ki.useState=function(Z){return Gf().useState(Z)};Ki.version="17.0.2";kv.exports=Ki;var _5=kv.exports,y1={exports:{}},Ru={},m1={exports:{}},x1={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(Z){var le,t,B,H;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;Z.unstable_now=function(){return d.now()}}else{var l=Date,b=l.now();Z.unstable_now=function(){return l.now()-b}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var w=null,e=null,o=function(){if(w!==null)try{var D=Z.unstable_now();w(!0,D),w=null}catch(O){throw setTimeout(o,0),O}};le=function(D){w!==null?setTimeout(le,0,D):(w=D,setTimeout(o,0))},t=function(D,O){e=setTimeout(D,O)},B=function(){clearTimeout(e)},Z.unstable_shouldYield=function(){return!1},H=Z.unstable_forceFrameRate=function(){}}else{var a=window.setTimeout,n=window.clearTimeout;if(typeof console!="undefined"){var r=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof r!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var u=!1,s=null,i=-1,f=5,h=0;Z.unstable_shouldYield=function(){return Z.unstable_now()>=h},H=function(){},Z.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):f=0<D?Math.floor(1e3/D):5};var p=new MessageChannel,v=p.port2;p.port1.onmessage=function(){if(s!==null){var D=Z.unstable_now();h=D+f;try{s(!0,D)?v.postMessage(null):(u=!1,s=null)}catch(O){throw v.postMessage(null),O}}else u=!1},le=function(D){s=D,u||(u=!0,v.postMessage(null))},t=function(D,O){i=a(function(){D(Z.unstable_now())},O)},B=function(){n(i),i=-1}}function y(D,O){var F=D.length;D.push(O);e:for(;;){var Y=F-1>>>1,X=D[Y];if(X!==void 0&&0<m(X,O))D[Y]=O,D[F]=X,F=Y;else break e}}function g(D){return D=D[0],D===void 0?null:D}function A(D){var O=D[0];if(O!==void 0){var F=D.pop();if(F!==O){D[0]=F;e:for(var Y=0,X=D.length;Y<X;){var q=2*(Y+1)-1,$=D[q],V=q+1,K=D[V];if($!==void 0&&0>m($,F))K!==void 0&&0>m(K,$)?(D[Y]=K,D[V]=F,Y=V):(D[Y]=$,D[q]=F,Y=q);else if(K!==void 0&&0>m(K,F))D[Y]=K,D[V]=F,Y=V;else break e}}return O}return null}function m(D,O){var F=D.sortIndex-O.sortIndex;return F!==0?F:D.id-O.id}var M=[],_=[],T=1,x=null,c=3,L=!1,S=!1,k=!1;function P(D){for(var O=g(_);O!==null;){if(O.callback===null)A(_);else if(O.startTime<=D)A(_),O.sortIndex=O.expirationTime,y(M,O);else break;O=g(_)}}function z(D){if(k=!1,P(D),!S)if(g(M)!==null)S=!0,le(I);else{var O=g(_);O!==null&&t(z,O.startTime-D)}}function I(D,O){S=!1,k&&(k=!1,B()),L=!0;var F=c;try{for(P(O),x=g(M);x!==null&&(!(x.expirationTime>O)||D&&!Z.unstable_shouldYield());){var Y=x.callback;if(typeof Y=="function"){x.callback=null,c=x.priorityLevel;var X=Y(x.expirationTime<=O);O=Z.unstable_now(),typeof X=="function"?x.callback=X:x===g(M)&&A(M),P(O)}else A(M);x=g(M)}if(x!==null)var q=!0;else{var $=g(_);$!==null&&t(z,$.startTime-O),q=!1}return q}finally{x=null,c=F,L=!1}}var R=H;Z.unstable_IdlePriority=5,Z.unstable_ImmediatePriority=1,Z.unstable_LowPriority=4,Z.unstable_NormalPriority=3,Z.unstable_Profiling=null,Z.unstable_UserBlockingPriority=2,Z.unstable_cancelCallback=function(D){D.callback=null},Z.unstable_continueExecution=function(){S||L||(S=!0,le(I))},Z.unstable_getCurrentPriorityLevel=function(){return c},Z.unstable_getFirstCallbackNode=function(){return g(M)},Z.unstable_next=function(D){switch(c){case 1:case 2:case 3:var O=3;break;default:O=c}var F=c;c=O;try{return D()}finally{c=F}},Z.unstable_pauseExecution=function(){},Z.unstable_requestPaint=R,Z.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=c;c=D;try{return O()}finally{c=F}},Z.unstable_scheduleCallback=function(D,O,F){var Y=Z.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,D){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=F+X,D={id:T++,callback:O,priorityLevel:D,startTime:F,expirationTime:X,sortIndex:-1},F>Y?(D.sortIndex=F,y(_,D),g(M)===null&&D===g(_)&&(k?B():k=!0,t(z,F-Y))):(D.sortIndex=X,y(M,D),S||L||(S=!0,le(I))),D},Z.unstable_wrapCallback=function(D){var O=c;return function(){var F=c;c=O;try{return D.apply(this,arguments)}finally{c=F}}}})(x1);m1.exports=x1;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td=kv.exports,Oo=t1,Hs=m1.exports;function Ca(Z){for(var le="https://reactjs.org/docs/error-decoder.html?invariant="+Z,t=1;t<arguments.length;t++)le+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+Z+"; visit "+le+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!td)throw Error(Ca(227));var b1=new Set,Cv={};function Hc(Z,le){Ph(Z,le),Ph(Z+"Capture",le)}function Ph(Z,le){for(Cv[Z]=le,Z=0;Z<le.length;Z++)b1.add(le[Z])}var Yf=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),m3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_1=Object.prototype.hasOwnProperty,w1={},T1={};function x3(Z){return _1.call(T1,Z)?!0:_1.call(w1,Z)?!1:m3.test(Z)?T1[Z]=!0:(w1[Z]=!0,!1)}function b3(Z,le,t,B){if(t!==null&&t.type===0)return!1;switch(typeof le){case"function":case"symbol":return!0;case"boolean":return B?!1:t!==null?!t.acceptsBooleans:(Z=Z.toLowerCase().slice(0,5),Z!=="data-"&&Z!=="aria-");default:return!1}}function _3(Z,le,t,B){if(le===null||typeof le=="undefined"||b3(Z,le,t,B))return!0;if(B)return!1;if(t!==null)switch(t.type){case 3:return!le;case 4:return le===!1;case 5:return isNaN(le);case 6:return isNaN(le)||1>le}return!1}function Fl(Z,le,t,B,H,d,l){this.acceptsBooleans=le===2||le===3||le===4,this.attributeName=B,this.attributeNamespace=H,this.mustUseProperty=t,this.propertyName=Z,this.type=le,this.sanitizeURL=d,this.removeEmptyString=l}var rl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Z){rl[Z]=new Fl(Z,0,!1,Z,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Z){var le=Z[0];rl[le]=new Fl(le,1,!1,Z[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Z){rl[Z]=new Fl(Z,2,!1,Z.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Z){rl[Z]=new Fl(Z,2,!1,Z,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Z){rl[Z]=new Fl(Z,3,!1,Z.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Z){rl[Z]=new Fl(Z,3,!0,Z,null,!1,!1)});["capture","download"].forEach(function(Z){rl[Z]=new Fl(Z,4,!1,Z,null,!1,!1)});["cols","rows","size","span"].forEach(function(Z){rl[Z]=new Fl(Z,6,!1,Z,null,!1,!1)});["rowSpan","start"].forEach(function(Z){rl[Z]=new Fl(Z,5,!1,Z.toLowerCase(),null,!1,!1)});var H0=/[\-:]([a-z])/g;function G0(Z){return Z[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Z){var le=Z.replace(H0,G0);rl[le]=new Fl(le,1,!1,Z,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Z){var le=Z.replace(H0,G0);rl[le]=new Fl(le,1,!1,Z,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Z){var le=Z.replace(H0,G0);rl[le]=new Fl(le,1,!1,Z,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Z){rl[Z]=new Fl(Z,1,!1,Z.toLowerCase(),null,!1,!1)});rl.xlinkHref=new Fl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Z){rl[Z]=new Fl(Z,1,!1,Z.toLowerCase(),null,!0,!0)});function Y0(Z,le,t,B){var H=rl.hasOwnProperty(le)?rl[le]:null,d=H!==null?H.type===0:B?!1:!(!(2<le.length)||le[0]!=="o"&&le[0]!=="O"||le[1]!=="n"&&le[1]!=="N");d||(_3(le,t,H,B)&&(t=null),B||H===null?x3(le)&&(t===null?Z.removeAttribute(le):Z.setAttribute(le,""+t)):H.mustUseProperty?Z[H.propertyName]=t===null?H.type===3?!1:"":t:(le=H.attributeName,B=H.attributeNamespace,t===null?Z.removeAttribute(le):(H=H.type,t=H===3||H===4&&t===!0?"":""+t,B?Z.setAttributeNS(B,le,t):Z.setAttribute(le,t))))}var Gc=td.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lv=60103,Yc=60106,fc=60107,W0=60108,Pv=60114,X0=60109,j0=60110,rd=60112,Dv=60113,nd=60120,ad=60115,Z0=60116,K0=60121,J0=60128,A1=60129,Q0=60130,$0=60131;if(typeof Symbol=="function"&&Symbol.for){var Gs=Symbol.for;Lv=Gs("react.element"),Yc=Gs("react.portal"),fc=Gs("react.fragment"),W0=Gs("react.strict_mode"),Pv=Gs("react.profiler"),X0=Gs("react.provider"),j0=Gs("react.context"),rd=Gs("react.forward_ref"),Dv=Gs("react.suspense"),nd=Gs("react.suspense_list"),ad=Gs("react.memo"),Z0=Gs("react.lazy"),K0=Gs("react.block"),Gs("react.scope"),J0=Gs("react.opaque.id"),A1=Gs("react.debug_trace_mode"),Q0=Gs("react.offscreen"),$0=Gs("react.legacy_hidden")}var M1=typeof Symbol=="function"&&Symbol.iterator;function Rv(Z){return Z===null||typeof Z!="object"?null:(Z=M1&&Z[M1]||Z["@@iterator"],typeof Z=="function"?Z:null)}var q0;function Iv(Z){if(q0===void 0)try{throw Error()}catch(t){var le=t.stack.trim().match(/\n( *(at )?)/);q0=le&&le[1]||""}return`
`+q0+Z}var eg=!1;function id(Z,le){if(!Z||eg)return"";eg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(le)if(le=function(){throw Error()},Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(w){var B=w}Reflect.construct(Z,[],le)}else{try{le.call()}catch(w){B=w}Z.call(le.prototype)}else{try{throw Error()}catch(w){B=w}Z()}}catch(w){if(w&&B&&typeof w.stack=="string"){for(var H=w.stack.split(`
`),d=B.stack.split(`
`),l=H.length-1,b=d.length-1;1<=l&&0<=b&&H[l]!==d[b];)b--;for(;1<=l&&0<=b;l--,b--)if(H[l]!==d[b]){if(l!==1||b!==1)do if(l--,b--,0>b||H[l]!==d[b])return`
`+H[l].replace(" at new "," at ");while(1<=l&&0<=b);break}}}finally{eg=!1,Error.prepareStackTrace=t}return(Z=Z?Z.displayName||Z.name:"")?Iv(Z):""}function w3(Z){switch(Z.tag){case 5:return Iv(Z.type);case 16:return Iv("Lazy");case 13:return Iv("Suspense");case 19:return Iv("SuspenseList");case 0:case 2:case 15:return Z=id(Z.type,!1),Z;case 11:return Z=id(Z.type.render,!1),Z;case 22:return Z=id(Z.type._render,!1),Z;case 1:return Z=id(Z.type,!0),Z;default:return""}}function Dh(Z){if(Z==null)return null;if(typeof Z=="function")return Z.displayName||Z.name||null;if(typeof Z=="string")return Z;switch(Z){case fc:return"Fragment";case Yc:return"Portal";case Pv:return"Profiler";case W0:return"StrictMode";case Dv:return"Suspense";case nd:return"SuspenseList"}if(typeof Z=="object")switch(Z.$$typeof){case j0:return(Z.displayName||"Context")+".Consumer";case X0:return(Z._context.displayName||"Context")+".Provider";case rd:var le=Z.render;return le=le.displayName||le.name||"",Z.displayName||(le!==""?"ForwardRef("+le+")":"ForwardRef");case ad:return Dh(Z.type);case K0:return Dh(Z._render);case Z0:le=Z._payload,Z=Z._init;try{return Dh(Z(le))}catch{}}return null}function cc(Z){switch(typeof Z){case"boolean":case"number":case"object":case"string":case"undefined":return Z;default:return""}}function S1(Z){var le=Z.type;return(Z=Z.nodeName)&&Z.toLowerCase()==="input"&&(le==="checkbox"||le==="radio")}function T3(Z){var le=S1(Z)?"checked":"value",t=Object.getOwnPropertyDescriptor(Z.constructor.prototype,le),B=""+Z[le];if(!Z.hasOwnProperty(le)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var H=t.get,d=t.set;return Object.defineProperty(Z,le,{configurable:!0,get:function(){return H.call(this)},set:function(l){B=""+l,d.call(this,l)}}),Object.defineProperty(Z,le,{enumerable:t.enumerable}),{getValue:function(){return B},setValue:function(l){B=""+l},stopTracking:function(){Z._valueTracker=null,delete Z[le]}}}}function od(Z){Z._valueTracker||(Z._valueTracker=T3(Z))}function k1(Z){if(!Z)return!1;var le=Z._valueTracker;if(!le)return!0;var t=le.getValue(),B="";return Z&&(B=S1(Z)?Z.checked?"true":"false":Z.value),Z=B,Z!==t?(le.setValue(Z),!0):!1}function sd(Z){if(Z=Z||(typeof document!="undefined"?document:void 0),typeof Z=="undefined")return null;try{return Z.activeElement||Z.body}catch{return Z.body}}function tg(Z,le){var t=le.checked;return Oo({},le,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:Z._wrapperState.initialChecked})}function E1(Z,le){var t=le.defaultValue==null?"":le.defaultValue,B=le.checked!=null?le.checked:le.defaultChecked;t=cc(le.value!=null?le.value:t),Z._wrapperState={initialChecked:B,initialValue:t,controlled:le.type==="checkbox"||le.type==="radio"?le.checked!=null:le.value!=null}}function C1(Z,le){le=le.checked,le!=null&&Y0(Z,"checked",le,!1)}function rg(Z,le){C1(Z,le);var t=cc(le.value),B=le.type;if(t!=null)B==="number"?(t===0&&Z.value===""||Z.value!=t)&&(Z.value=""+t):Z.value!==""+t&&(Z.value=""+t);else if(B==="submit"||B==="reset"){Z.removeAttribute("value");return}le.hasOwnProperty("value")?ng(Z,le.type,t):le.hasOwnProperty("defaultValue")&&ng(Z,le.type,cc(le.defaultValue)),le.checked==null&&le.defaultChecked!=null&&(Z.defaultChecked=!!le.defaultChecked)}function L1(Z,le,t){if(le.hasOwnProperty("value")||le.hasOwnProperty("defaultValue")){var B=le.type;if(!(B!=="submit"&&B!=="reset"||le.value!==void 0&&le.value!==null))return;le=""+Z._wrapperState.initialValue,t||le===Z.value||(Z.value=le),Z.defaultValue=le}t=Z.name,t!==""&&(Z.name=""),Z.defaultChecked=!!Z._wrapperState.initialChecked,t!==""&&(Z.name=t)}function ng(Z,le,t){(le!=="number"||sd(Z.ownerDocument)!==Z)&&(t==null?Z.defaultValue=""+Z._wrapperState.initialValue:Z.defaultValue!==""+t&&(Z.defaultValue=""+t))}function A3(Z){var le="";return td.Children.forEach(Z,function(t){t!=null&&(le+=t)}),le}function ag(Z,le){return Z=Oo({children:void 0},le),(le=A3(le.children))&&(Z.children=le),Z}function Rh(Z,le,t,B){if(Z=Z.options,le){le={};for(var H=0;H<t.length;H++)le["$"+t[H]]=!0;for(t=0;t<Z.length;t++)H=le.hasOwnProperty("$"+Z[t].value),Z[t].selected!==H&&(Z[t].selected=H),H&&B&&(Z[t].defaultSelected=!0)}else{for(t=""+cc(t),le=null,H=0;H<Z.length;H++){if(Z[H].value===t){Z[H].selected=!0,B&&(Z[H].defaultSelected=!0);return}le!==null||Z[H].disabled||(le=Z[H])}le!==null&&(le.selected=!0)}}function ig(Z,le){if(le.dangerouslySetInnerHTML!=null)throw Error(Ca(91));return Oo({},le,{value:void 0,defaultValue:void 0,children:""+Z._wrapperState.initialValue})}function P1(Z,le){var t=le.value;if(t==null){if(t=le.children,le=le.defaultValue,t!=null){if(le!=null)throw Error(Ca(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Ca(93));t=t[0]}le=t}le==null&&(le=""),t=le}Z._wrapperState={initialValue:cc(t)}}function D1(Z,le){var t=cc(le.value),B=cc(le.defaultValue);t!=null&&(t=""+t,t!==Z.value&&(Z.value=t),le.defaultValue==null&&Z.defaultValue!==t&&(Z.defaultValue=t)),B!=null&&(Z.defaultValue=""+B)}function R1(Z){var le=Z.textContent;le===Z._wrapperState.initialValue&&le!==""&&le!==null&&(Z.value=le)}var og={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function I1(Z){switch(Z){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sg(Z,le){return Z==null||Z==="http://www.w3.org/1999/xhtml"?I1(le):Z==="http://www.w3.org/2000/svg"&&le==="foreignObject"?"http://www.w3.org/1999/xhtml":Z}var ld,z1=function(Z){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(le,t,B,H){MSApp.execUnsafeLocalFunction(function(){return Z(le,t,B,H)})}:Z}(function(Z,le){if(Z.namespaceURI!==og.svg||"innerHTML"in Z)Z.innerHTML=le;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+le.valueOf().toString()+"</svg>",le=ld.firstChild;Z.firstChild;)Z.removeChild(Z.firstChild);for(;le.firstChild;)Z.appendChild(le.firstChild)}});function zv(Z,le){if(le){var t=Z.firstChild;if(t&&t===Z.lastChild&&t.nodeType===3){t.nodeValue=le;return}}Z.textContent=le}var Fv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M3=["Webkit","ms","Moz","O"];Object.keys(Fv).forEach(function(Z){M3.forEach(function(le){le=le+Z.charAt(0).toUpperCase()+Z.substring(1),Fv[le]=Fv[Z]})});function F1(Z,le,t){return le==null||typeof le=="boolean"||le===""?"":t||typeof le!="number"||le===0||Fv.hasOwnProperty(Z)&&Fv[Z]?(""+le).trim():le+"px"}function O1(Z,le){Z=Z.style;for(var t in le)if(le.hasOwnProperty(t)){var B=t.indexOf("--")===0,H=F1(t,le[t],B);t==="float"&&(t="cssFloat"),B?Z.setProperty(t,H):Z[t]=H}}var S3=Oo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lg(Z,le){if(le){if(S3[Z]&&(le.children!=null||le.dangerouslySetInnerHTML!=null))throw Error(Ca(137,Z));if(le.dangerouslySetInnerHTML!=null){if(le.children!=null)throw Error(Ca(60));if(!(typeof le.dangerouslySetInnerHTML=="object"&&"__html"in le.dangerouslySetInnerHTML))throw Error(Ca(61))}if(le.style!=null&&typeof le.style!="object")throw Error(Ca(62))}}function ug(Z,le){if(Z.indexOf("-")===-1)return typeof le.is=="string";switch(Z){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fg(Z){return Z=Z.target||Z.srcElement||window,Z.correspondingUseElement&&(Z=Z.correspondingUseElement),Z.nodeType===3?Z.parentNode:Z}var cg=null,Ih=null,zh=null;function N1(Z){if(Z=tp(Z)){if(typeof cg!="function")throw Error(Ca(280));var le=Z.stateNode;le&&(le=Sd(le),cg(Z.stateNode,Z.type,le))}}function B1(Z){Ih?zh?zh.push(Z):zh=[Z]:Ih=Z}function U1(){if(Ih){var Z=Ih,le=zh;if(zh=Ih=null,N1(Z),le)for(Z=0;Z<le.length;Z++)N1(le[Z])}}function hg(Z,le){return Z(le)}function V1(Z,le,t,B,H){return Z(le,t,B,H)}function vg(){}var H1=hg,Wc=!1,pg=!1;function dg(){(Ih!==null||zh!==null)&&(vg(),U1())}function k3(Z,le,t){if(pg)return Z(le,t);pg=!0;try{return H1(Z,le,t)}finally{pg=!1,dg()}}function Ov(Z,le){var t=Z.stateNode;if(t===null)return null;var B=Sd(t);if(B===null)return null;t=B[le];e:switch(le){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(Z=Z.type,B=!(Z==="button"||Z==="input"||Z==="select"||Z==="textarea")),Z=!B;break e;default:Z=!1}if(Z)return null;if(t&&typeof t!="function")throw Error(Ca(231,le,typeof t));return t}var gg=!1;if(Yf)try{var Nv={};Object.defineProperty(Nv,"passive",{get:function(){gg=!0}}),window.addEventListener("test",Nv,Nv),window.removeEventListener("test",Nv,Nv)}catch{gg=!1}function E3(Z,le,t,B,H,d,l,b,w){var e=Array.prototype.slice.call(arguments,3);try{le.apply(t,e)}catch(o){this.onError(o)}}var Bv=!1,ud=null,fd=!1,yg=null,C3={onError:function(Z){Bv=!0,ud=Z}};function L3(Z,le,t,B,H,d,l,b,w){Bv=!1,ud=null,E3.apply(C3,arguments)}function P3(Z,le,t,B,H,d,l,b,w){if(L3.apply(this,arguments),Bv){if(Bv){var e=ud;Bv=!1,ud=null}else throw Error(Ca(198));fd||(fd=!0,yg=e)}}function Xc(Z){var le=Z,t=Z;if(Z.alternate)for(;le.return;)le=le.return;else{Z=le;do le=Z,(le.flags&1026)!=0&&(t=le.return),Z=le.return;while(Z)}return le.tag===3?t:null}function G1(Z){if(Z.tag===13){var le=Z.memoizedState;if(le===null&&(Z=Z.alternate,Z!==null&&(le=Z.memoizedState)),le!==null)return le.dehydrated}return null}function Y1(Z){if(Xc(Z)!==Z)throw Error(Ca(188))}function D3(Z){var le=Z.alternate;if(!le){if(le=Xc(Z),le===null)throw Error(Ca(188));return le!==Z?null:Z}for(var t=Z,B=le;;){var H=t.return;if(H===null)break;var d=H.alternate;if(d===null){if(B=H.return,B!==null){t=B;continue}break}if(H.child===d.child){for(d=H.child;d;){if(d===t)return Y1(H),Z;if(d===B)return Y1(H),le;d=d.sibling}throw Error(Ca(188))}if(t.return!==B.return)t=H,B=d;else{for(var l=!1,b=H.child;b;){if(b===t){l=!0,t=H,B=d;break}if(b===B){l=!0,B=H,t=d;break}b=b.sibling}if(!l){for(b=d.child;b;){if(b===t){l=!0,t=d,B=H;break}if(b===B){l=!0,B=d,t=H;break}b=b.sibling}if(!l)throw Error(Ca(189))}}if(t.alternate!==B)throw Error(Ca(190))}if(t.tag!==3)throw Error(Ca(188));return t.stateNode.current===t?Z:le}function W1(Z){if(Z=D3(Z),!Z)return null;for(var le=Z;;){if(le.tag===5||le.tag===6)return le;if(le.child)le.child.return=le,le=le.child;else{if(le===Z)break;for(;!le.sibling;){if(!le.return||le.return===Z)return null;le=le.return}le.sibling.return=le.return,le=le.sibling}}return null}function X1(Z,le){for(var t=Z.alternate;le!==null;){if(le===Z||le===t)return!0;le=le.return}return!1}var j1,mg,Z1,K1,xg=!1,Cf=[],hc=null,vc=null,pc=null,Uv=new Map,Vv=new Map,Hv=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(Z,le,t,B,H){return{blockedOn:Z,domEventName:le,eventSystemFlags:t|16,nativeEvent:H,targetContainers:[B]}}function Q1(Z,le){switch(Z){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":vc=null;break;case"mouseover":case"mouseout":pc=null;break;case"pointerover":case"pointerout":Uv.delete(le.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vv.delete(le.pointerId)}}function Gv(Z,le,t,B,H,d){return Z===null||Z.nativeEvent!==d?(Z=bg(le,t,B,H,d),le!==null&&(le=tp(le),le!==null&&mg(le)),Z):(Z.eventSystemFlags|=B,le=Z.targetContainers,H!==null&&le.indexOf(H)===-1&&le.push(H),Z)}function R3(Z,le,t,B,H){switch(le){case"focusin":return hc=Gv(hc,Z,le,t,B,H),!0;case"dragenter":return vc=Gv(vc,Z,le,t,B,H),!0;case"mouseover":return pc=Gv(pc,Z,le,t,B,H),!0;case"pointerover":var d=H.pointerId;return Uv.set(d,Gv(Uv.get(d)||null,Z,le,t,B,H)),!0;case"gotpointercapture":return d=H.pointerId,Vv.set(d,Gv(Vv.get(d)||null,Z,le,t,B,H)),!0}return!1}function I3(Z){var le=jc(Z.target);if(le!==null){var t=Xc(le);if(t!==null){if(le=t.tag,le===13){if(le=G1(t),le!==null){Z.blockedOn=le,K1(Z.lanePriority,function(){Hs.unstable_runWithPriority(Z.priority,function(){Z1(t)})});return}}else if(le===3&&t.stateNode.hydrate){Z.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}Z.blockedOn=null}function cd(Z){if(Z.blockedOn!==null)return!1;for(var le=Z.targetContainers;0<le.length;){var t=Sg(Z.domEventName,Z.eventSystemFlags,le[0],Z.nativeEvent);if(t!==null)return le=tp(t),le!==null&&mg(le),Z.blockedOn=t,!1;le.shift()}return!0}function $1(Z,le,t){cd(Z)&&t.delete(le)}function z3(){for(xg=!1;0<Cf.length;){var Z=Cf[0];if(Z.blockedOn!==null){Z=tp(Z.blockedOn),Z!==null&&j1(Z);break}for(var le=Z.targetContainers;0<le.length;){var t=Sg(Z.domEventName,Z.eventSystemFlags,le[0],Z.nativeEvent);if(t!==null){Z.blockedOn=t;break}le.shift()}Z.blockedOn===null&&Cf.shift()}hc!==null&&cd(hc)&&(hc=null),vc!==null&&cd(vc)&&(vc=null),pc!==null&&cd(pc)&&(pc=null),Uv.forEach($1),Vv.forEach($1)}function Yv(Z,le){Z.blockedOn===le&&(Z.blockedOn=null,xg||(xg=!0,Hs.unstable_scheduleCallback(Hs.unstable_NormalPriority,z3)))}function q1(Z){function le(H){return Yv(H,Z)}if(0<Cf.length){Yv(Cf[0],Z);for(var t=1;t<Cf.length;t++){var B=Cf[t];B.blockedOn===Z&&(B.blockedOn=null)}}for(hc!==null&&Yv(hc,Z),vc!==null&&Yv(vc,Z),pc!==null&&Yv(pc,Z),Uv.forEach(le),Vv.forEach(le),t=0;t<Hv.length;t++)B=Hv[t],B.blockedOn===Z&&(B.blockedOn=null);for(;0<Hv.length&&(t=Hv[0],t.blockedOn===null);)I3(t),t.blockedOn===null&&Hv.shift()}function hd(Z,le){var t={};return t[Z.toLowerCase()]=le.toLowerCase(),t["Webkit"+Z]="webkit"+le,t["Moz"+Z]="moz"+le,t}var Fh={animationend:hd("Animation","AnimationEnd"),animationiteration:hd("Animation","AnimationIteration"),animationstart:hd("Animation","AnimationStart"),transitionend:hd("Transition","TransitionEnd")},_g={},ex={};Yf&&(ex=document.createElement("div").style,"AnimationEvent"in window||(delete Fh.animationend.animation,delete Fh.animationiteration.animation,delete Fh.animationstart.animation),"TransitionEvent"in window||delete Fh.transitionend.transition);function vd(Z){if(_g[Z])return _g[Z];if(!Fh[Z])return Z;var le=Fh[Z],t;for(t in le)if(le.hasOwnProperty(t)&&t in ex)return _g[Z]=le[t];return Z}var tx=vd("animationend"),rx=vd("animationiteration"),nx=vd("animationstart"),ax=vd("transitionend"),ix=new Map,wg=new Map,F3=["abort","abort",tx,"animationEnd",rx,"animationIteration",nx,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ax,"transitionEnd","waiting","waiting"];function Tg(Z,le){for(var t=0;t<Z.length;t+=2){var B=Z[t],H=Z[t+1];H="on"+(H[0].toUpperCase()+H.slice(1)),wg.set(B,le),ix.set(B,H),Hc(H,[B])}}var O3=Hs.unstable_now;O3();var Mo=8;function Oh(Z){if((1&Z)!=0)return Mo=15,1;if((2&Z)!=0)return Mo=14,2;if((4&Z)!=0)return Mo=13,4;var le=24&Z;return le!==0?(Mo=12,le):(Z&32)!=0?(Mo=11,32):(le=192&Z,le!==0?(Mo=10,le):(Z&256)!=0?(Mo=9,256):(le=3584&Z,le!==0?(Mo=8,le):(Z&4096)!=0?(Mo=7,4096):(le=4186112&Z,le!==0?(Mo=6,le):(le=62914560&Z,le!==0?(Mo=5,le):Z&67108864?(Mo=4,67108864):(Z&134217728)!=0?(Mo=3,134217728):(le=805306368&Z,le!==0?(Mo=2,le):(1073741824&Z)!=0?(Mo=1,1073741824):(Mo=8,Z))))))}function N3(Z){switch(Z){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function B3(Z){switch(Z){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ca(358,Z))}}function Wv(Z,le){var t=Z.pendingLanes;if(t===0)return Mo=0;var B=0,H=0,d=Z.expiredLanes,l=Z.suspendedLanes,b=Z.pingedLanes;if(d!==0)B=d,H=Mo=15;else if(d=t&134217727,d!==0){var w=d&~l;w!==0?(B=Oh(w),H=Mo):(b&=d,b!==0&&(B=Oh(b),H=Mo))}else d=t&~l,d!==0?(B=Oh(d),H=Mo):b!==0&&(B=Oh(b),H=Mo);if(B===0)return 0;if(B=31-dc(B),B=t&((0>B?0:1<<B)<<1)-1,le!==0&&le!==B&&(le&l)==0){if(Oh(le),H<=Mo)return le;Mo=H}if(le=Z.entangledLanes,le!==0)for(Z=Z.entanglements,le&=B;0<le;)t=31-dc(le),H=1<<t,B|=Z[t],le&=~H;return B}function ox(Z){return Z=Z.pendingLanes&-1073741825,Z!==0?Z:Z&1073741824?1073741824:0}function pd(Z,le){switch(Z){case 15:return 1;case 14:return 2;case 12:return Z=Nh(24&~le),Z===0?pd(10,le):Z;case 10:return Z=Nh(192&~le),Z===0?pd(8,le):Z;case 8:return Z=Nh(3584&~le),Z===0&&(Z=Nh(4186112&~le),Z===0&&(Z=512)),Z;case 2:return le=Nh(805306368&~le),le===0&&(le=268435456),le}throw Error(Ca(358,Z))}function Nh(Z){return Z&-Z}function Ag(Z){for(var le=[],t=0;31>t;t++)le.push(Z);return le}function dd(Z,le,t){Z.pendingLanes|=le;var B=le-1;Z.suspendedLanes&=B,Z.pingedLanes&=B,Z=Z.eventTimes,le=31-dc(le),Z[le]=t}var dc=Math.clz32?Math.clz32:H3,U3=Math.log,V3=Math.LN2;function H3(Z){return Z===0?32:31-(U3(Z)/V3|0)|0}var G3=Hs.unstable_UserBlockingPriority,Y3=Hs.unstable_runWithPriority,gd=!0;function W3(Z,le,t,B){Wc||vg();var H=Mg,d=Wc;Wc=!0;try{V1(H,Z,le,t,B)}finally{(Wc=d)||dg()}}function X3(Z,le,t,B){Y3(G3,Mg.bind(null,Z,le,t,B))}function Mg(Z,le,t,B){if(gd){var H;if((H=(le&4)==0)&&0<Cf.length&&-1<J1.indexOf(Z))Z=bg(null,Z,le,t,B),Cf.push(Z);else{var d=Sg(Z,le,t,B);if(d===null)H&&Q1(Z,B);else{if(H){if(-1<J1.indexOf(Z)){Z=bg(d,Z,le,t,B),Cf.push(Z);return}if(R3(d,Z,le,t,B))return;Q1(Z,B)}Fx(Z,le,B,null,t)}}}}function Sg(Z,le,t,B){var H=fg(B);if(H=jc(H),H!==null){var d=Xc(H);if(d===null)H=null;else{var l=d.tag;if(l===13){if(H=G1(d),H!==null)return H;H=null}else if(l===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;H=null}else d!==H&&(H=null)}}return Fx(Z,le,B,H,t),null}var gc=null,kg=null,yd=null;function sx(){if(yd)return yd;var Z,le=kg,t=le.length,B,H="value"in gc?gc.value:gc.textContent,d=H.length;for(Z=0;Z<t&&le[Z]===H[Z];Z++);var l=t-Z;for(B=1;B<=l&&le[t-B]===H[d-B];B++);return yd=H.slice(Z,1<B?1-B:void 0)}function md(Z){var le=Z.keyCode;return"charCode"in Z?(Z=Z.charCode,Z===0&&le===13&&(Z=13)):Z=le,Z===10&&(Z=13),32<=Z||Z===13?Z:0}function xd(){return!0}function lx(){return!1}function yu(Z){function le(t,B,H,d,l){this._reactName=t,this._targetInst=H,this.type=B,this.nativeEvent=d,this.target=l,this.currentTarget=null;for(var b in Z)Z.hasOwnProperty(b)&&(t=Z[b],this[b]=t?t(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xd:lx,this.isPropagationStopped=lx,this}return Oo(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xd)},persist:function(){},isPersistent:xd}),le}var Bh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Z){return Z.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eg=yu(Bh),Xv=Oo({},Bh,{view:0,detail:0}),j3=yu(Xv),Cg,Lg,jv,bd=Oo({},Xv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dg,button:0,buttons:0,relatedTarget:function(Z){return Z.relatedTarget===void 0?Z.fromElement===Z.srcElement?Z.toElement:Z.fromElement:Z.relatedTarget},movementX:function(Z){return"movementX"in Z?Z.movementX:(Z!==jv&&(jv&&Z.type==="mousemove"?(Cg=Z.screenX-jv.screenX,Lg=Z.screenY-jv.screenY):Lg=Cg=0,jv=Z),Cg)},movementY:function(Z){return"movementY"in Z?Z.movementY:Lg}}),ux=yu(bd),Z3=Oo({},bd,{dataTransfer:0}),K3=yu(Z3),J3=Oo({},Xv,{relatedTarget:0}),Pg=yu(J3),Q3=Oo({},Bh,{animationName:0,elapsedTime:0,pseudoElement:0}),$3=yu(Q3),q3=Oo({},Bh,{clipboardData:function(Z){return"clipboardData"in Z?Z.clipboardData:window.clipboardData}}),eT=yu(q3),tT=Oo({},Bh,{data:0}),fx=yu(tT),rT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iT(Z){var le=this.nativeEvent;return le.getModifierState?le.getModifierState(Z):(Z=aT[Z])?!!le[Z]:!1}function Dg(){return iT}var oT=Oo({},Xv,{key:function(Z){if(Z.key){var le=rT[Z.key]||Z.key;if(le!=="Unidentified")return le}return Z.type==="keypress"?(Z=md(Z),Z===13?"Enter":String.fromCharCode(Z)):Z.type==="keydown"||Z.type==="keyup"?nT[Z.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dg,charCode:function(Z){return Z.type==="keypress"?md(Z):0},keyCode:function(Z){return Z.type==="keydown"||Z.type==="keyup"?Z.keyCode:0},which:function(Z){return Z.type==="keypress"?md(Z):Z.type==="keydown"||Z.type==="keyup"?Z.keyCode:0}}),sT=yu(oT),lT=Oo({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cx=yu(lT),uT=Oo({},Xv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dg}),fT=yu(uT),cT=Oo({},Bh,{propertyName:0,elapsedTime:0,pseudoElement:0}),hT=yu(cT),vT=Oo({},bd,{deltaX:function(Z){return"deltaX"in Z?Z.deltaX:"wheelDeltaX"in Z?-Z.wheelDeltaX:0},deltaY:function(Z){return"deltaY"in Z?Z.deltaY:"wheelDeltaY"in Z?-Z.wheelDeltaY:"wheelDelta"in Z?-Z.wheelDelta:0},deltaZ:0,deltaMode:0}),pT=yu(vT),dT=[9,13,27,32],Rg=Yf&&"CompositionEvent"in window,Zv=null;Yf&&"documentMode"in document&&(Zv=document.documentMode);var gT=Yf&&"TextEvent"in window&&!Zv,hx=Yf&&(!Rg||Zv&&8<Zv&&11>=Zv),vx=String.fromCharCode(32),px=!1;function dx(Z,le){switch(Z){case"keyup":return dT.indexOf(le.keyCode)!==-1;case"keydown":return le.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gx(Z){return Z=Z.detail,typeof Z=="object"&&"data"in Z?Z.data:null}var Uh=!1;function yT(Z,le){switch(Z){case"compositionend":return gx(le);case"keypress":return le.which!==32?null:(px=!0,vx);case"textInput":return Z=le.data,Z===vx&&px?null:Z;default:return null}}function mT(Z,le){if(Uh)return Z==="compositionend"||!Rg&&dx(Z,le)?(Z=sx(),yd=kg=gc=null,Uh=!1,Z):null;switch(Z){case"paste":return null;case"keypress":if(!(le.ctrlKey||le.altKey||le.metaKey)||le.ctrlKey&&le.altKey){if(le.char&&1<le.char.length)return le.char;if(le.which)return String.fromCharCode(le.which)}return null;case"compositionend":return hx&&le.locale!=="ko"?null:le.data;default:return null}}var xT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yx(Z){var le=Z&&Z.nodeName&&Z.nodeName.toLowerCase();return le==="input"?!!xT[Z.type]:le==="textarea"}function mx(Z,le,t,B){B1(B),le=wd(le,"onChange"),0<le.length&&(t=new Eg("onChange","change",null,t,B),Z.push({event:t,listeners:le}))}var Kv=null,Jv=null;function bT(Z){Px(Z,0)}function _d(Z){var le=Wh(Z);if(k1(le))return Z}function _T(Z,le){if(Z==="change")return le}var xx=!1;if(Yf){var Ig;if(Yf){var zg="oninput"in document;if(!zg){var bx=document.createElement("div");bx.setAttribute("oninput","return;"),zg=typeof bx.oninput=="function"}Ig=zg}else Ig=!1;xx=Ig&&(!document.documentMode||9<document.documentMode)}function _x(){Kv&&(Kv.detachEvent("onpropertychange",wx),Jv=Kv=null)}function wx(Z){if(Z.propertyName==="value"&&_d(Jv)){var le=[];if(mx(le,Jv,Z,fg(Z)),Z=bT,Wc)Z(le);else{Wc=!0;try{hg(Z,le)}finally{Wc=!1,dg()}}}}function wT(Z,le,t){Z==="focusin"?(_x(),Kv=le,Jv=t,Kv.attachEvent("onpropertychange",wx)):Z==="focusout"&&_x()}function TT(Z){if(Z==="selectionchange"||Z==="keyup"||Z==="keydown")return _d(Jv)}function AT(Z,le){if(Z==="click")return _d(le)}function MT(Z,le){if(Z==="input"||Z==="change")return _d(le)}function ST(Z,le){return Z===le&&(Z!==0||1/Z==1/le)||Z!==Z&&le!==le}var Iu=typeof Object.is=="function"?Object.is:ST,kT=Object.prototype.hasOwnProperty;function Qv(Z,le){if(Iu(Z,le))return!0;if(typeof Z!="object"||Z===null||typeof le!="object"||le===null)return!1;var t=Object.keys(Z),B=Object.keys(le);if(t.length!==B.length)return!1;for(B=0;B<t.length;B++)if(!kT.call(le,t[B])||!Iu(Z[t[B]],le[t[B]]))return!1;return!0}function Tx(Z){for(;Z&&Z.firstChild;)Z=Z.firstChild;return Z}function Ax(Z,le){var t=Tx(Z);Z=0;for(var B;t;){if(t.nodeType===3){if(B=Z+t.textContent.length,Z<=le&&B>=le)return{node:t,offset:le-Z};Z=B}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Tx(t)}}function Mx(Z,le){return Z&&le?Z===le?!0:Z&&Z.nodeType===3?!1:le&&le.nodeType===3?Mx(Z,le.parentNode):"contains"in Z?Z.contains(le):Z.compareDocumentPosition?!!(Z.compareDocumentPosition(le)&16):!1:!1}function Sx(){for(var Z=window,le=sd();le instanceof Z.HTMLIFrameElement;){try{var t=typeof le.contentWindow.location.href=="string"}catch{t=!1}if(t)Z=le.contentWindow;else break;le=sd(Z.document)}return le}function Fg(Z){var le=Z&&Z.nodeName&&Z.nodeName.toLowerCase();return le&&(le==="input"&&(Z.type==="text"||Z.type==="search"||Z.type==="tel"||Z.type==="url"||Z.type==="password")||le==="textarea"||Z.contentEditable==="true")}var ET=Yf&&"documentMode"in document&&11>=document.documentMode,Vh=null,Og=null,$v=null,Ng=!1;function kx(Z,le,t){var B=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ng||Vh==null||Vh!==sd(B)||(B=Vh,"selectionStart"in B&&Fg(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),$v&&Qv($v,B)||($v=B,B=wd(Og,"onSelect"),0<B.length&&(le=new Eg("onSelect","select",null,le,t),Z.push({event:le,listeners:B}),le.target=Vh)))}Tg("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Tg("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Tg(F3,2);for(var Ex="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Bg=0;Bg<Ex.length;Bg++)wg.set(Ex[Bg],0);Ph("onMouseEnter",["mouseout","mouseover"]);Ph("onMouseLeave",["mouseout","mouseover"]);Ph("onPointerEnter",["pointerout","pointerover"]);Ph("onPointerLeave",["pointerout","pointerover"]);Hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(qv));function Lx(Z,le,t){var B=Z.type||"unknown-event";Z.currentTarget=t,P3(B,le,void 0,Z),Z.currentTarget=null}function Px(Z,le){le=(le&4)!=0;for(var t=0;t<Z.length;t++){var B=Z[t],H=B.event;B=B.listeners;e:{var d=void 0;if(le)for(var l=B.length-1;0<=l;l--){var b=B[l],w=b.instance,e=b.currentTarget;if(b=b.listener,w!==d&&H.isPropagationStopped())break e;Lx(H,b,e),d=w}else for(l=0;l<B.length;l++){if(b=B[l],w=b.instance,e=b.currentTarget,b=b.listener,w!==d&&H.isPropagationStopped())break e;Lx(H,b,e),d=w}}}if(fd)throw Z=yg,fd=!1,yg=null,Z}function Do(Z,le){var t=Hx(le),B=Z+"__bubble";t.has(B)||(zx(le,Z,2,!1),t.add(B))}var Dx="_reactListening"+Math.random().toString(36).slice(2);function Rx(Z){Z[Dx]||(Z[Dx]=!0,b1.forEach(function(le){Cx.has(le)||Ix(le,!1,Z,null),Ix(le,!0,Z,null)}))}function Ix(Z,le,t,B){var H=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=t;if(Z==="selectionchange"&&t.nodeType!==9&&(d=t.ownerDocument),B!==null&&!le&&Cx.has(Z)){if(Z!=="scroll")return;H|=2,d=B}var l=Hx(d),b=Z+"__"+(le?"capture":"bubble");l.has(b)||(le&&(H|=4),zx(d,Z,H,le),l.add(b))}function zx(Z,le,t,B){var H=wg.get(le);switch(H===void 0?2:H){case 0:H=W3;break;case 1:H=X3;break;default:H=Mg}t=H.bind(null,le,t,Z),H=void 0,!gg||le!=="touchstart"&&le!=="touchmove"&&le!=="wheel"||(H=!0),B?H!==void 0?Z.addEventListener(le,t,{capture:!0,passive:H}):Z.addEventListener(le,t,!0):H!==void 0?Z.addEventListener(le,t,{passive:H}):Z.addEventListener(le,t,!1)}function Fx(Z,le,t,B,H){var d=B;if((le&1)==0&&(le&2)==0&&B!==null)e:for(;;){if(B===null)return;var l=B.tag;if(l===3||l===4){var b=B.stateNode.containerInfo;if(b===H||b.nodeType===8&&b.parentNode===H)break;if(l===4)for(l=B.return;l!==null;){var w=l.tag;if((w===3||w===4)&&(w=l.stateNode.containerInfo,w===H||w.nodeType===8&&w.parentNode===H))return;l=l.return}for(;b!==null;){if(l=jc(b),l===null)return;if(w=l.tag,w===5||w===6){B=d=l;continue e}b=b.parentNode}}B=B.return}k3(function(){var e=d,o=fg(t),a=[];e:{var n=ix.get(Z);if(n!==void 0){var r=Eg,u=Z;switch(Z){case"keypress":if(md(t)===0)break e;case"keydown":case"keyup":r=sT;break;case"focusin":u="focus",r=Pg;break;case"focusout":u="blur",r=Pg;break;case"beforeblur":case"afterblur":r=Pg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":r=ux;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":r=K3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":r=fT;break;case tx:case rx:case nx:r=$3;break;case ax:r=hT;break;case"scroll":r=j3;break;case"wheel":r=pT;break;case"copy":case"cut":case"paste":r=eT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":r=cx}var s=(le&4)!=0,i=!s&&Z==="scroll",f=s?n!==null?n+"Capture":null:n;s=[];for(var h=e,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,f!==null&&(v=Ov(h,f),v!=null&&s.push(ep(h,v,p)))),i)break;h=h.return}0<s.length&&(n=new r(n,u,null,t,o),a.push({event:n,listeners:s}))}}if((le&7)==0){e:{if(n=Z==="mouseover"||Z==="pointerover",r=Z==="mouseout"||Z==="pointerout",n&&(le&16)==0&&(u=t.relatedTarget||t.fromElement)&&(jc(u)||u[Yh]))break e;if((r||n)&&(n=o.window===o?o:(n=o.ownerDocument)?n.defaultView||n.parentWindow:window,r?(u=t.relatedTarget||t.toElement,r=e,u=u?jc(u):null,u!==null&&(i=Xc(u),u!==i||u.tag!==5&&u.tag!==6)&&(u=null)):(r=null,u=e),r!==u)){if(s=ux,v="onMouseLeave",f="onMouseEnter",h="mouse",(Z==="pointerout"||Z==="pointerover")&&(s=cx,v="onPointerLeave",f="onPointerEnter",h="pointer"),i=r==null?n:Wh(r),p=u==null?n:Wh(u),n=new s(v,h+"leave",r,t,o),n.target=i,n.relatedTarget=p,v=null,jc(o)===e&&(s=new s(f,h+"enter",u,t,o),s.target=p,s.relatedTarget=i,v=s),i=v,r&&u)t:{for(s=r,f=u,h=0,p=s;p;p=Hh(p))h++;for(p=0,v=f;v;v=Hh(v))p++;for(;0<h-p;)s=Hh(s),h--;for(;0<p-h;)f=Hh(f),p--;for(;h--;){if(s===f||f!==null&&s===f.alternate)break t;s=Hh(s),f=Hh(f)}s=null}else s=null;r!==null&&Ox(a,n,r,s,!1),u!==null&&i!==null&&Ox(a,i,u,s,!0)}}e:{if(n=e?Wh(e):window,r=n.nodeName&&n.nodeName.toLowerCase(),r==="select"||r==="input"&&n.type==="file")var y=_T;else if(yx(n))if(xx)y=MT;else{y=TT;var g=wT}else(r=n.nodeName)&&r.toLowerCase()==="input"&&(n.type==="checkbox"||n.type==="radio")&&(y=AT);if(y&&(y=y(Z,e))){mx(a,y,t,o);break e}g&&g(Z,n,e),Z==="focusout"&&(g=n._wrapperState)&&g.controlled&&n.type==="number"&&ng(n,"number",n.value)}switch(g=e?Wh(e):window,Z){case"focusin":(yx(g)||g.contentEditable==="true")&&(Vh=g,Og=e,$v=null);break;case"focusout":$v=Og=Vh=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,kx(a,t,o);break;case"selectionchange":if(ET)break;case"keydown":case"keyup":kx(a,t,o)}var A;if(Rg)e:{switch(Z){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Uh?dx(Z,t)&&(m="onCompositionEnd"):Z==="keydown"&&t.keyCode===229&&(m="onCompositionStart");m&&(hx&&t.locale!=="ko"&&(Uh||m!=="onCompositionStart"?m==="onCompositionEnd"&&Uh&&(A=sx()):(gc=o,kg="value"in gc?gc.value:gc.textContent,Uh=!0)),g=wd(e,m),0<g.length&&(m=new fx(m,Z,null,t,o),a.push({event:m,listeners:g}),A?m.data=A:(A=gx(t),A!==null&&(m.data=A)))),(A=gT?yT(Z,t):mT(Z,t))&&(e=wd(e,"onBeforeInput"),0<e.length&&(o=new fx("onBeforeInput","beforeinput",null,t,o),a.push({event:o,listeners:e}),o.data=A))}Px(a,le)})}function ep(Z,le,t){return{instance:Z,listener:le,currentTarget:t}}function wd(Z,le){for(var t=le+"Capture",B=[];Z!==null;){var H=Z,d=H.stateNode;H.tag===5&&d!==null&&(H=d,d=Ov(Z,t),d!=null&&B.unshift(ep(Z,d,H)),d=Ov(Z,le),d!=null&&B.push(ep(Z,d,H))),Z=Z.return}return B}function Hh(Z){if(Z===null)return null;do Z=Z.return;while(Z&&Z.tag!==5);return Z||null}function Ox(Z,le,t,B,H){for(var d=le._reactName,l=[];t!==null&&t!==B;){var b=t,w=b.alternate,e=b.stateNode;if(w!==null&&w===B)break;b.tag===5&&e!==null&&(b=e,H?(w=Ov(t,d),w!=null&&l.unshift(ep(t,w,b))):H||(w=Ov(t,d),w!=null&&l.push(ep(t,w,b)))),t=t.return}l.length!==0&&Z.push({event:le,listeners:l})}function Td(){}var Ug=null,Vg=null;function Nx(Z,le){switch(Z){case"button":case"input":case"select":case"textarea":return!!le.autoFocus}return!1}function Hg(Z,le){return Z==="textarea"||Z==="option"||Z==="noscript"||typeof le.children=="string"||typeof le.children=="number"||typeof le.dangerouslySetInnerHTML=="object"&&le.dangerouslySetInnerHTML!==null&&le.dangerouslySetInnerHTML.__html!=null}var Bx=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0;function Gg(Z){Z.nodeType===1?Z.textContent="":Z.nodeType===9&&(Z=Z.body,Z!=null&&(Z.textContent=""))}function Gh(Z){for(;Z!=null;Z=Z.nextSibling){var le=Z.nodeType;if(le===1||le===3)break}return Z}function Ux(Z){Z=Z.previousSibling;for(var le=0;Z;){if(Z.nodeType===8){var t=Z.data;if(t==="$"||t==="$!"||t==="$?"){if(le===0)return Z;le--}else t==="/$"&&le++}Z=Z.previousSibling}return null}var Yg=0;function LT(Z){return{$$typeof:J0,toString:Z,valueOf:Z}}var Ad=Math.random().toString(36).slice(2),yc="__reactFiber$"+Ad,Md="__reactProps$"+Ad,Yh="__reactContainer$"+Ad,Vx="__reactEvents$"+Ad;function jc(Z){var le=Z[yc];if(le)return le;for(var t=Z.parentNode;t;){if(le=t[Yh]||t[yc]){if(t=le.alternate,le.child!==null||t!==null&&t.child!==null)for(Z=Ux(Z);Z!==null;){if(t=Z[yc])return t;Z=Ux(Z)}return le}Z=t,t=Z.parentNode}return null}function tp(Z){return Z=Z[yc]||Z[Yh],!Z||Z.tag!==5&&Z.tag!==6&&Z.tag!==13&&Z.tag!==3?null:Z}function Wh(Z){if(Z.tag===5||Z.tag===6)return Z.stateNode;throw Error(Ca(33))}function Sd(Z){return Z[Md]||null}function Hx(Z){var le=Z[Vx];return le===void 0&&(le=Z[Vx]=new Set),le}var Wg=[],Xh=-1;function mc(Z){return{current:Z}}function Ro(Z){0>Xh||(Z.current=Wg[Xh],Wg[Xh]=null,Xh--)}function $o(Z,le){Xh++,Wg[Xh]=Z.current,Z.current=le}var xc={},_l=mc(xc),ql=mc(!1),Zc=xc;function jh(Z,le){var t=Z.type.contextTypes;if(!t)return xc;var B=Z.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===le)return B.__reactInternalMemoizedMaskedChildContext;var H={},d;for(d in t)H[d]=le[d];return B&&(Z=Z.stateNode,Z.__reactInternalMemoizedUnmaskedChildContext=le,Z.__reactInternalMemoizedMaskedChildContext=H),H}function eu(Z){return Z=Z.childContextTypes,Z!=null}function kd(){Ro(ql),Ro(_l)}function Gx(Z,le,t){if(_l.current!==xc)throw Error(Ca(168));$o(_l,le),$o(ql,t)}function Yx(Z,le,t){var B=Z.stateNode;if(Z=le.childContextTypes,typeof B.getChildContext!="function")return t;B=B.getChildContext();for(var H in B)if(!(H in Z))throw Error(Ca(108,Dh(le)||"Unknown",H));return Oo({},t,B)}function Ed(Z){return Z=(Z=Z.stateNode)&&Z.__reactInternalMemoizedMergedChildContext||xc,Zc=_l.current,$o(_l,Z),$o(ql,ql.current),!0}function Wx(Z,le,t){var B=Z.stateNode;if(!B)throw Error(Ca(169));t?(Z=Yx(Z,le,Zc),B.__reactInternalMemoizedMergedChildContext=Z,Ro(ql),Ro(_l),$o(_l,Z)):Ro(ql),$o(ql,t)}var Xg=null,Kc=null,PT=Hs.unstable_runWithPriority,jg=Hs.unstable_scheduleCallback,Zg=Hs.unstable_cancelCallback,DT=Hs.unstable_shouldYield,Xx=Hs.unstable_requestPaint,Kg=Hs.unstable_now,RT=Hs.unstable_getCurrentPriorityLevel,Cd=Hs.unstable_ImmediatePriority,jx=Hs.unstable_UserBlockingPriority,Zx=Hs.unstable_NormalPriority,Kx=Hs.unstable_LowPriority,Jx=Hs.unstable_IdlePriority,Jg={},IT=Xx!==void 0?Xx:function(){},Wf=null,Ld=null,Qg=!1,Qx=Kg(),wl=1e4>Qx?Kg:function(){return Kg()-Qx};function Zh(){switch(RT()){case Cd:return 99;case jx:return 98;case Zx:return 97;case Kx:return 96;case Jx:return 95;default:throw Error(Ca(332))}}function $x(Z){switch(Z){case 99:return Cd;case 98:return jx;case 97:return Zx;case 96:return Kx;case 95:return Jx;default:throw Error(Ca(332))}}function Jc(Z,le){return Z=$x(Z),PT(Z,le)}function rp(Z,le,t){return Z=$x(Z),jg(Z,le,t)}function Lf(){if(Ld!==null){var Z=Ld;Ld=null,Zg(Z)}qx()}function qx(){if(!Qg&&Wf!==null){Qg=!0;var Z=0;try{var le=Wf;Jc(99,function(){for(;Z<le.length;Z++){var t=le[Z];do t=t(!0);while(t!==null)}}),Wf=null}catch(t){throw Wf!==null&&(Wf=Wf.slice(Z+1)),jg(Cd,Lf),t}finally{Qg=!1}}}var zT=Gc.ReactCurrentBatchConfig;function lf(Z,le){if(Z&&Z.defaultProps){le=Oo({},le),Z=Z.defaultProps;for(var t in Z)le[t]===void 0&&(le[t]=Z[t]);return le}return le}var Pd=mc(null),Dd=null,Kh=null,Rd=null;function $g(){Rd=Kh=Dd=null}function qg(Z){var le=Pd.current;Ro(Pd),Z.type._context._currentValue=le}function eb(Z,le){for(;Z!==null;){var t=Z.alternate;if((Z.childLanes&le)===le){if(t===null||(t.childLanes&le)===le)break;t.childLanes|=le}else Z.childLanes|=le,t!==null&&(t.childLanes|=le);Z=Z.return}}function Jh(Z,le){Dd=Z,Rd=Kh=null,Z=Z.dependencies,Z!==null&&Z.firstContext!==null&&((Z.lanes&le)!=0&&(uf=!0),Z.firstContext=null)}function zu(Z,le){if(Rd!==Z&&le!==!1&&le!==0)if((typeof le!="number"||le===1073741823)&&(Rd=Z,le=1073741823),le={context:Z,observedBits:le,next:null},Kh===null){if(Dd===null)throw Error(Ca(308));Kh=le,Dd.dependencies={lanes:0,firstContext:le,responders:null}}else Kh=Kh.next=le;return Z._currentValue}var bc=!1;function ey(Z){Z.updateQueue={baseState:Z.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function tb(Z,le){Z=Z.updateQueue,le.updateQueue===Z&&(le.updateQueue={baseState:Z.baseState,firstBaseUpdate:Z.firstBaseUpdate,lastBaseUpdate:Z.lastBaseUpdate,shared:Z.shared,effects:Z.effects})}function _c(Z,le){return{eventTime:Z,lane:le,tag:0,payload:null,callback:null,next:null}}function wc(Z,le){if(Z=Z.updateQueue,Z!==null){Z=Z.shared;var t=Z.pending;t===null?le.next=le:(le.next=t.next,t.next=le),Z.pending=le}}function rb(Z,le){var t=Z.updateQueue,B=Z.alternate;if(B!==null&&(B=B.updateQueue,t===B)){var H=null,d=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};d===null?H=d=l:d=d.next=l,t=t.next}while(t!==null);d===null?H=d=le:d=d.next=le}else H=d=le;t={baseState:B.baseState,firstBaseUpdate:H,lastBaseUpdate:d,shared:B.shared,effects:B.effects},Z.updateQueue=t;return}Z=t.lastBaseUpdate,Z===null?t.firstBaseUpdate=le:Z.next=le,t.lastBaseUpdate=le}function np(Z,le,t,B){var H=Z.updateQueue;bc=!1;var d=H.firstBaseUpdate,l=H.lastBaseUpdate,b=H.shared.pending;if(b!==null){H.shared.pending=null;var w=b,e=w.next;w.next=null,l===null?d=e:l.next=e,l=w;var o=Z.alternate;if(o!==null){o=o.updateQueue;var a=o.lastBaseUpdate;a!==l&&(a===null?o.firstBaseUpdate=e:a.next=e,o.lastBaseUpdate=w)}}if(d!==null){a=H.baseState,l=0,o=e=w=null;do{b=d.lane;var n=d.eventTime;if((B&b)===b){o!==null&&(o=o.next={eventTime:n,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var r=Z,u=d;switch(b=le,n=t,u.tag){case 1:if(r=u.payload,typeof r=="function"){a=r.call(n,a,b);break e}a=r;break e;case 3:r.flags=r.flags&-4097|64;case 0:if(r=u.payload,b=typeof r=="function"?r.call(n,a,b):r,b==null)break e;a=Oo({},a,b);break e;case 2:bc=!0}}d.callback!==null&&(Z.flags|=32,b=H.effects,b===null?H.effects=[d]:b.push(d))}else n={eventTime:n,lane:b,tag:d.tag,payload:d.payload,callback:d.callback,next:null},o===null?(e=o=n,w=a):o=o.next=n,l|=b;if(d=d.next,d===null){if(b=H.shared.pending,b===null)break;d=b.next,b.next=null,H.lastBaseUpdate=b,H.shared.pending=null}}while(1);o===null&&(w=a),H.baseState=w,H.firstBaseUpdate=e,H.lastBaseUpdate=o,dp|=l,Z.lanes=l,Z.memoizedState=a}}function nb(Z,le,t){if(Z=le.effects,le.effects=null,Z!==null)for(le=0;le<Z.length;le++){var B=Z[le],H=B.callback;if(H!==null){if(B.callback=null,B=t,typeof H!="function")throw Error(Ca(191,H));H.call(B)}}}var ab=new td.Component().refs;function Id(Z,le,t,B){le=Z.memoizedState,t=t(B,le),t=t==null?le:Oo({},le,t),Z.memoizedState=t,Z.lanes===0&&(Z.updateQueue.baseState=t)}var zd={isMounted:function(Z){return(Z=Z._reactInternals)?Xc(Z)===Z:!1},enqueueSetState:function(Z,le,t){Z=Z._reactInternals;var B=mu(),H=Mc(Z),d=_c(B,H);d.payload=le,t!=null&&(d.callback=t),wc(Z,d),Sc(Z,H,B)},enqueueReplaceState:function(Z,le,t){Z=Z._reactInternals;var B=mu(),H=Mc(Z),d=_c(B,H);d.tag=1,d.payload=le,t!=null&&(d.callback=t),wc(Z,d),Sc(Z,H,B)},enqueueForceUpdate:function(Z,le){Z=Z._reactInternals;var t=mu(),B=Mc(Z),H=_c(t,B);H.tag=2,le!=null&&(H.callback=le),wc(Z,H),Sc(Z,B,t)}};function ib(Z,le,t,B,H,d,l){return Z=Z.stateNode,typeof Z.shouldComponentUpdate=="function"?Z.shouldComponentUpdate(B,d,l):le.prototype&&le.prototype.isPureReactComponent?!Qv(t,B)||!Qv(H,d):!0}function ob(Z,le,t){var B=!1,H=xc,d=le.contextType;return typeof d=="object"&&d!==null?d=zu(d):(H=eu(le)?Zc:_l.current,B=le.contextTypes,d=(B=B!=null)?jh(Z,H):xc),le=new le(t,d),Z.memoizedState=le.state!==null&&le.state!==void 0?le.state:null,le.updater=zd,Z.stateNode=le,le._reactInternals=Z,B&&(Z=Z.stateNode,Z.__reactInternalMemoizedUnmaskedChildContext=H,Z.__reactInternalMemoizedMaskedChildContext=d),le}function sb(Z,le,t,B){Z=le.state,typeof le.componentWillReceiveProps=="function"&&le.componentWillReceiveProps(t,B),typeof le.UNSAFE_componentWillReceiveProps=="function"&&le.UNSAFE_componentWillReceiveProps(t,B),le.state!==Z&&zd.enqueueReplaceState(le,le.state,null)}function ty(Z,le,t,B){var H=Z.stateNode;H.props=t,H.state=Z.memoizedState,H.refs=ab,ey(Z);var d=le.contextType;typeof d=="object"&&d!==null?H.context=zu(d):(d=eu(le)?Zc:_l.current,H.context=jh(Z,d)),np(Z,t,H,B),H.state=Z.memoizedState,d=le.getDerivedStateFromProps,typeof d=="function"&&(Id(Z,le,d,t),H.state=Z.memoizedState),typeof le.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(le=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),le!==H.state&&zd.enqueueReplaceState(H,H.state,null),np(Z,t,H,B),H.state=Z.memoizedState),typeof H.componentDidMount=="function"&&(Z.flags|=4)}var Fd=Array.isArray;function ap(Z,le,t){if(Z=t.ref,Z!==null&&typeof Z!="function"&&typeof Z!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ca(309));var B=t.stateNode}if(!B)throw Error(Ca(147,Z));var H=""+Z;return le!==null&&le.ref!==null&&typeof le.ref=="function"&&le.ref._stringRef===H?le.ref:(le=function(d){var l=B.refs;l===ab&&(l=B.refs={}),d===null?delete l[H]:l[H]=d},le._stringRef=H,le)}if(typeof Z!="string")throw Error(Ca(284));if(!t._owner)throw Error(Ca(290,Z))}return Z}function Od(Z,le){if(Z.type!=="textarea")throw Error(Ca(31,Object.prototype.toString.call(le)==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":le))}function lb(Z){function le(i,f){if(Z){var h=i.lastEffect;h!==null?(h.nextEffect=f,i.lastEffect=f):i.firstEffect=i.lastEffect=f,f.nextEffect=null,f.flags=8}}function t(i,f){if(!Z)return null;for(;f!==null;)le(i,f),f=f.sibling;return null}function B(i,f){for(i=new Map;f!==null;)f.key!==null?i.set(f.key,f):i.set(f.index,f),f=f.sibling;return i}function H(i,f){return i=Cc(i,f),i.index=0,i.sibling=null,i}function d(i,f,h){return i.index=h,Z?(h=i.alternate,h!==null?(h=h.index,h<f?(i.flags=2,f):h):(i.flags=2,f)):f}function l(i){return Z&&i.alternate===null&&(i.flags=2),i}function b(i,f,h,p){return f===null||f.tag!==6?(f=Oy(h,i.mode,p),f.return=i,f):(f=H(f,h),f.return=i,f)}function w(i,f,h,p){return f!==null&&f.elementType===h.type?(p=H(f,h.props),p.ref=ap(i,f,h),p.return=i,p):(p=t0(h.type,h.key,h.props,null,i.mode,p),p.ref=ap(i,f,h),p.return=i,p)}function e(i,f,h,p){return f===null||f.tag!==4||f.stateNode.containerInfo!==h.containerInfo||f.stateNode.implementation!==h.implementation?(f=Ny(h,i.mode,p),f.return=i,f):(f=H(f,h.children||[]),f.return=i,f)}function o(i,f,h,p,v){return f===null||f.tag!==7?(f=av(h,i.mode,p,v),f.return=i,f):(f=H(f,h),f.return=i,f)}function a(i,f,h){if(typeof f=="string"||typeof f=="number")return f=Oy(""+f,i.mode,h),f.return=i,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Lv:return h=t0(f.type,f.key,f.props,null,i.mode,h),h.ref=ap(i,null,f),h.return=i,h;case Yc:return f=Ny(f,i.mode,h),f.return=i,f}if(Fd(f)||Rv(f))return f=av(f,i.mode,h,null),f.return=i,f;Od(i,f)}return null}function n(i,f,h,p){var v=f!==null?f.key:null;if(typeof h=="string"||typeof h=="number")return v!==null?null:b(i,f,""+h,p);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Lv:return h.key===v?h.type===fc?o(i,f,h.props.children,p,v):w(i,f,h,p):null;case Yc:return h.key===v?e(i,f,h,p):null}if(Fd(h)||Rv(h))return v!==null?null:o(i,f,h,p,null);Od(i,h)}return null}function r(i,f,h,p,v){if(typeof p=="string"||typeof p=="number")return i=i.get(h)||null,b(f,i,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Lv:return i=i.get(p.key===null?h:p.key)||null,p.type===fc?o(f,i,p.props.children,v,p.key):w(f,i,p,v);case Yc:return i=i.get(p.key===null?h:p.key)||null,e(f,i,p,v)}if(Fd(p)||Rv(p))return i=i.get(h)||null,o(f,i,p,v,null);Od(f,p)}return null}function u(i,f,h,p){for(var v=null,y=null,g=f,A=f=0,m=null;g!==null&&A<h.length;A++){g.index>A?(m=g,g=null):m=g.sibling;var M=n(i,g,h[A],p);if(M===null){g===null&&(g=m);break}Z&&g&&M.alternate===null&&le(i,g),f=d(M,f,A),y===null?v=M:y.sibling=M,y=M,g=m}if(A===h.length)return t(i,g),v;if(g===null){for(;A<h.length;A++)g=a(i,h[A],p),g!==null&&(f=d(g,f,A),y===null?v=g:y.sibling=g,y=g);return v}for(g=B(i,g);A<h.length;A++)m=r(g,i,A,h[A],p),m!==null&&(Z&&m.alternate!==null&&g.delete(m.key===null?A:m.key),f=d(m,f,A),y===null?v=m:y.sibling=m,y=m);return Z&&g.forEach(function(_){return le(i,_)}),v}function s(i,f,h,p){var v=Rv(h);if(typeof v!="function")throw Error(Ca(150));if(h=v.call(h),h==null)throw Error(Ca(151));for(var y=v=null,g=f,A=f=0,m=null,M=h.next();g!==null&&!M.done;A++,M=h.next()){g.index>A?(m=g,g=null):m=g.sibling;var _=n(i,g,M.value,p);if(_===null){g===null&&(g=m);break}Z&&g&&_.alternate===null&&le(i,g),f=d(_,f,A),y===null?v=_:y.sibling=_,y=_,g=m}if(M.done)return t(i,g),v;if(g===null){for(;!M.done;A++,M=h.next())M=a(i,M.value,p),M!==null&&(f=d(M,f,A),y===null?v=M:y.sibling=M,y=M);return v}for(g=B(i,g);!M.done;A++,M=h.next())M=r(g,i,A,M.value,p),M!==null&&(Z&&M.alternate!==null&&g.delete(M.key===null?A:M.key),f=d(M,f,A),y===null?v=M:y.sibling=M,y=M);return Z&&g.forEach(function(T){return le(i,T)}),v}return function(i,f,h,p){var v=typeof h=="object"&&h!==null&&h.type===fc&&h.key===null;v&&(h=h.props.children);var y=typeof h=="object"&&h!==null;if(y)switch(h.$$typeof){case Lv:e:{for(y=h.key,v=f;v!==null;){if(v.key===y){switch(v.tag){case 7:if(h.type===fc){t(i,v.sibling),f=H(v,h.props.children),f.return=i,i=f;break e}break;default:if(v.elementType===h.type){t(i,v.sibling),f=H(v,h.props),f.ref=ap(i,v,h),f.return=i,i=f;break e}}t(i,v);break}else le(i,v);v=v.sibling}h.type===fc?(f=av(h.props.children,i.mode,p,h.key),f.return=i,i=f):(p=t0(h.type,h.key,h.props,null,i.mode,p),p.ref=ap(i,f,h),p.return=i,i=p)}return l(i);case Yc:e:{for(v=h.key;f!==null;){if(f.key===v)if(f.tag===4&&f.stateNode.containerInfo===h.containerInfo&&f.stateNode.implementation===h.implementation){t(i,f.sibling),f=H(f,h.children||[]),f.return=i,i=f;break e}else{t(i,f);break}else le(i,f);f=f.sibling}f=Ny(h,i.mode,p),f.return=i,i=f}return l(i)}if(typeof h=="string"||typeof h=="number")return h=""+h,f!==null&&f.tag===6?(t(i,f.sibling),f=H(f,h),f.return=i,i=f):(t(i,f),f=Oy(h,i.mode,p),f.return=i,i=f),l(i);if(Fd(h))return u(i,f,h,p);if(Rv(h))return s(i,f,h,p);if(y&&Od(i,h),typeof h=="undefined"&&!v)switch(i.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ca(152,Dh(i.type)||"Component"))}return t(i,f)}}var Nd=lb(!0),ub=lb(!1),ip={},Pf=mc(ip),op=mc(ip),sp=mc(ip);function Qc(Z){if(Z===ip)throw Error(Ca(174));return Z}function ry(Z,le){switch($o(sp,le),$o(op,Z),$o(Pf,ip),Z=le.nodeType,Z){case 9:case 11:le=(le=le.documentElement)?le.namespaceURI:sg(null,"");break;default:Z=Z===8?le.parentNode:le,le=Z.namespaceURI||null,Z=Z.tagName,le=sg(le,Z)}Ro(Pf),$o(Pf,le)}function Qh(){Ro(Pf),Ro(op),Ro(sp)}function fb(Z){Qc(sp.current);var le=Qc(Pf.current),t=sg(le,Z.type);le!==t&&($o(op,Z),$o(Pf,t))}function ny(Z){op.current===Z&&(Ro(Pf),Ro(op))}var qo=mc(0);function Bd(Z){for(var le=Z;le!==null;){if(le.tag===13){var t=le.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return le}else if(le.tag===19&&le.memoizedProps.revealOrder!==void 0){if((le.flags&64)!=0)return le}else if(le.child!==null){le.child.return=le,le=le.child;continue}if(le===Z)break;for(;le.sibling===null;){if(le.return===null||le.return===Z)return null;le=le.return}le.sibling.return=le.return,le=le.sibling}return null}var Xf=null,Tc=null,Df=!1;function cb(Z,le){var t=Nu(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=le,t.return=Z,t.flags=8,Z.lastEffect!==null?(Z.lastEffect.nextEffect=t,Z.lastEffect=t):Z.firstEffect=Z.lastEffect=t}function hb(Z,le){switch(Z.tag){case 5:var t=Z.type;return le=le.nodeType!==1||t.toLowerCase()!==le.nodeName.toLowerCase()?null:le,le!==null?(Z.stateNode=le,!0):!1;case 6:return le=Z.pendingProps===""||le.nodeType!==3?null:le,le!==null?(Z.stateNode=le,!0):!1;case 13:return!1;default:return!1}}function ay(Z){if(Df){var le=Tc;if(le){var t=le;if(!hb(Z,le)){if(le=Gh(t.nextSibling),!le||!hb(Z,le)){Z.flags=Z.flags&-1025|2,Df=!1,Xf=Z;return}cb(Xf,t)}Xf=Z,Tc=Gh(le.firstChild)}else Z.flags=Z.flags&-1025|2,Df=!1,Xf=Z}}function vb(Z){for(Z=Z.return;Z!==null&&Z.tag!==5&&Z.tag!==3&&Z.tag!==13;)Z=Z.return;Xf=Z}function Ud(Z){if(Z!==Xf)return!1;if(!Df)return vb(Z),Df=!0,!1;var le=Z.type;if(Z.tag!==5||le!=="head"&&le!=="body"&&!Hg(le,Z.memoizedProps))for(le=Tc;le;)cb(Z,le),le=Gh(le.nextSibling);if(vb(Z),Z.tag===13){if(Z=Z.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(Ca(317));e:{for(Z=Z.nextSibling,le=0;Z;){if(Z.nodeType===8){var t=Z.data;if(t==="/$"){if(le===0){Tc=Gh(Z.nextSibling);break e}le--}else t!=="$"&&t!=="$!"&&t!=="$?"||le++}Z=Z.nextSibling}Tc=null}}else Tc=Xf?Gh(Z.stateNode.nextSibling):null;return!0}function iy(){Tc=Xf=null,Df=!1}var $h=[];function oy(){for(var Z=0;Z<$h.length;Z++)$h[Z]._workInProgressVersionPrimary=null;$h.length=0}var lp=Gc.ReactCurrentDispatcher,Fu=Gc.ReactCurrentBatchConfig,up=0,ls=null,Tl=null,nl=null,Vd=!1,fp=!1;function tu(){throw Error(Ca(321))}function sy(Z,le){if(le===null)return!1;for(var t=0;t<le.length&&t<Z.length;t++)if(!Iu(Z[t],le[t]))return!1;return!0}function ly(Z,le,t,B,H,d){if(up=d,ls=le,le.memoizedState=null,le.updateQueue=null,le.lanes=0,lp.current=Z===null||Z.memoizedState===null?OT:NT,Z=t(B,H),fp){d=0;do{if(fp=!1,!(25>d))throw Error(Ca(301));d+=1,nl=Tl=null,le.updateQueue=null,lp.current=BT,Z=t(B,H)}while(fp)}if(lp.current=Wd,le=Tl!==null&&Tl.next!==null,up=0,nl=Tl=ls=null,Vd=!1,le)throw Error(Ca(300));return Z}function $c(){var Z={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nl===null?ls.memoizedState=nl=Z:nl=nl.next=Z,nl}function qc(){if(Tl===null){var Z=ls.alternate;Z=Z!==null?Z.memoizedState:null}else Z=Tl.next;var le=nl===null?ls.memoizedState:nl.next;if(le!==null)nl=le,Tl=Z;else{if(Z===null)throw Error(Ca(310));Tl=Z,Z={memoizedState:Tl.memoizedState,baseState:Tl.baseState,baseQueue:Tl.baseQueue,queue:Tl.queue,next:null},nl===null?ls.memoizedState=nl=Z:nl=nl.next=Z}return nl}function Rf(Z,le){return typeof le=="function"?le(Z):le}function cp(Z){var le=qc(),t=le.queue;if(t===null)throw Error(Ca(311));t.lastRenderedReducer=Z;var B=Tl,H=B.baseQueue,d=t.pending;if(d!==null){if(H!==null){var l=H.next;H.next=d.next,d.next=l}B.baseQueue=H=d,t.pending=null}if(H!==null){H=H.next,B=B.baseState;var b=l=d=null,w=H;do{var e=w.lane;if((up&e)===e)b!==null&&(b=b.next={lane:0,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null}),B=w.eagerReducer===Z?w.eagerState:Z(B,w.action);else{var o={lane:e,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null};b===null?(l=b=o,d=B):b=b.next=o,ls.lanes|=e,dp|=e}w=w.next}while(w!==null&&w!==H);b===null?d=B:b.next=l,Iu(B,le.memoizedState)||(uf=!0),le.memoizedState=B,le.baseState=d,le.baseQueue=b,t.lastRenderedState=B}return[le.memoizedState,t.dispatch]}function hp(Z){var le=qc(),t=le.queue;if(t===null)throw Error(Ca(311));t.lastRenderedReducer=Z;var B=t.dispatch,H=t.pending,d=le.memoizedState;if(H!==null){t.pending=null;var l=H=H.next;do d=Z(d,l.action),l=l.next;while(l!==H);Iu(d,le.memoizedState)||(uf=!0),le.memoizedState=d,le.baseQueue===null&&(le.baseState=d),t.lastRenderedState=d}return[d,B]}function pb(Z,le,t){var B=le._getVersion;B=B(le._source);var H=le._workInProgressVersionPrimary;if(H!==null?Z=H===B:(Z=Z.mutableReadLanes,(Z=(up&Z)===Z)&&(le._workInProgressVersionPrimary=B,$h.push(le))),Z)return t(le._source);throw $h.push(le),Error(Ca(350))}function db(Z,le,t,B){var H=Ol;if(H===null)throw Error(Ca(349));var d=le._getVersion,l=d(le._source),b=lp.current,w=b.useState(function(){return pb(H,le,t)}),e=w[1],o=w[0];w=nl;var a=Z.memoizedState,n=a.refs,r=n.getSnapshot,u=a.source;a=a.subscribe;var s=ls;return Z.memoizedState={refs:n,source:le,subscribe:B},b.useEffect(function(){n.getSnapshot=t,n.setSnapshot=e;var i=d(le._source);if(!Iu(l,i)){i=t(le._source),Iu(o,i)||(e(i),i=Mc(s),H.mutableReadLanes|=i&H.pendingLanes),i=H.mutableReadLanes,H.entangledLanes|=i;for(var f=H.entanglements,h=i;0<h;){var p=31-dc(h),v=1<<p;f[p]|=i,h&=~v}}},[t,le,B]),b.useEffect(function(){return B(le._source,function(){var i=n.getSnapshot,f=n.setSnapshot;try{f(i(le._source));var h=Mc(s);H.mutableReadLanes|=h&H.pendingLanes}catch(p){f(function(){throw p})}})},[le,B]),Iu(r,t)&&Iu(u,le)&&Iu(a,B)||(Z={pending:null,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:o},Z.dispatch=e=hy.bind(null,ls,Z),w.queue=Z,w.baseQueue=null,o=pb(H,le,t),w.memoizedState=w.baseState=o),o}function gb(Z,le,t){var B=qc();return db(B,Z,le,t)}function vp(Z){var le=$c();return typeof Z=="function"&&(Z=Z()),le.memoizedState=le.baseState=Z,Z=le.queue={pending:null,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:Z},Z=Z.dispatch=hy.bind(null,ls,Z),[le.memoizedState,Z]}function Hd(Z,le,t,B){return Z={tag:Z,create:le,destroy:t,deps:B,next:null},le=ls.updateQueue,le===null?(le={lastEffect:null},ls.updateQueue=le,le.lastEffect=Z.next=Z):(t=le.lastEffect,t===null?le.lastEffect=Z.next=Z:(B=t.next,t.next=Z,Z.next=B,le.lastEffect=Z)),Z}function yb(Z){var le=$c();return Z={current:Z},le.memoizedState=Z}function Gd(){return qc().memoizedState}function uy(Z,le,t,B){var H=$c();ls.flags|=Z,H.memoizedState=Hd(1|le,t,void 0,B===void 0?null:B)}function fy(Z,le,t,B){var H=qc();B=B===void 0?null:B;var d=void 0;if(Tl!==null){var l=Tl.memoizedState;if(d=l.destroy,B!==null&&sy(B,l.deps)){Hd(le,t,d,B);return}}ls.flags|=Z,H.memoizedState=Hd(1|le,t,d,B)}function mb(Z,le){return uy(516,4,Z,le)}function Yd(Z,le){return fy(516,4,Z,le)}function xb(Z,le){return fy(4,2,Z,le)}function bb(Z,le){if(typeof le=="function")return Z=Z(),le(Z),function(){le(null)};if(le!=null)return Z=Z(),le.current=Z,function(){le.current=null}}function _b(Z,le,t){return t=t!=null?t.concat([Z]):null,fy(4,2,bb.bind(null,le,Z),t)}function cy(){}function wb(Z,le){var t=qc();le=le===void 0?null:le;var B=t.memoizedState;return B!==null&&le!==null&&sy(le,B[1])?B[0]:(t.memoizedState=[Z,le],Z)}function Tb(Z,le){var t=qc();le=le===void 0?null:le;var B=t.memoizedState;return B!==null&&le!==null&&sy(le,B[1])?B[0]:(Z=Z(),t.memoizedState=[Z,le],Z)}function FT(Z,le){var t=Zh();Jc(98>t?98:t,function(){Z(!0)}),Jc(97<t?97:t,function(){var B=Fu.transition;Fu.transition=1;try{Z(!1),le()}finally{Fu.transition=B}})}function hy(Z,le,t){var B=mu(),H=Mc(Z),d={lane:H,action:t,eagerReducer:null,eagerState:null,next:null},l=le.pending;if(l===null?d.next=d:(d.next=l.next,l.next=d),le.pending=d,l=Z.alternate,Z===ls||l!==null&&l===ls)fp=Vd=!0;else{if(Z.lanes===0&&(l===null||l.lanes===0)&&(l=le.lastRenderedReducer,l!==null))try{var b=le.lastRenderedState,w=l(b,t);if(d.eagerReducer=l,d.eagerState=w,Iu(w,b))return}catch{}finally{}Sc(Z,H,B)}}var Wd={readContext:zu,useCallback:tu,useContext:tu,useEffect:tu,useImperativeHandle:tu,useLayoutEffect:tu,useMemo:tu,useReducer:tu,useRef:tu,useState:tu,useDebugValue:tu,useDeferredValue:tu,useTransition:tu,useMutableSource:tu,useOpaqueIdentifier:tu,unstable_isNewReconciler:!1},OT={readContext:zu,useCallback:function(Z,le){return $c().memoizedState=[Z,le===void 0?null:le],Z},useContext:zu,useEffect:mb,useImperativeHandle:function(Z,le,t){return t=t!=null?t.concat([Z]):null,uy(4,2,bb.bind(null,le,Z),t)},useLayoutEffect:function(Z,le){return uy(4,2,Z,le)},useMemo:function(Z,le){var t=$c();return le=le===void 0?null:le,Z=Z(),t.memoizedState=[Z,le],Z},useReducer:function(Z,le,t){var B=$c();return le=t!==void 0?t(le):le,B.memoizedState=B.baseState=le,Z=B.queue={pending:null,dispatch:null,lastRenderedReducer:Z,lastRenderedState:le},Z=Z.dispatch=hy.bind(null,ls,Z),[B.memoizedState,Z]},useRef:yb,useState:vp,useDebugValue:cy,useDeferredValue:function(Z){var le=vp(Z),t=le[0],B=le[1];return mb(function(){var H=Fu.transition;Fu.transition=1;try{B(Z)}finally{Fu.transition=H}},[Z]),t},useTransition:function(){var Z=vp(!1),le=Z[0];return Z=FT.bind(null,Z[1]),yb(Z),[Z,le]},useMutableSource:function(Z,le,t){var B=$c();return B.memoizedState={refs:{getSnapshot:le,setSnapshot:null},source:Z,subscribe:t},db(B,Z,le,t)},useOpaqueIdentifier:function(){if(Df){var Z=!1,le=LT(function(){throw Z||(Z=!0,t("r:"+(Yg++).toString(36))),Error(Ca(355))}),t=vp(le)[1];return(ls.mode&2)==0&&(ls.flags|=516,Hd(5,function(){t("r:"+(Yg++).toString(36))},void 0,null)),le}return le="r:"+(Yg++).toString(36),vp(le),le},unstable_isNewReconciler:!1},NT={readContext:zu,useCallback:wb,useContext:zu,useEffect:Yd,useImperativeHandle:_b,useLayoutEffect:xb,useMemo:Tb,useReducer:cp,useRef:Gd,useState:function(){return cp(Rf)},useDebugValue:cy,useDeferredValue:function(Z){var le=cp(Rf),t=le[0],B=le[1];return Yd(function(){var H=Fu.transition;Fu.transition=1;try{B(Z)}finally{Fu.transition=H}},[Z]),t},useTransition:function(){var Z=cp(Rf)[0];return[Gd().current,Z]},useMutableSource:gb,useOpaqueIdentifier:function(){return cp(Rf)[0]},unstable_isNewReconciler:!1},BT={readContext:zu,useCallback:wb,useContext:zu,useEffect:Yd,useImperativeHandle:_b,useLayoutEffect:xb,useMemo:Tb,useReducer:hp,useRef:Gd,useState:function(){return hp(Rf)},useDebugValue:cy,useDeferredValue:function(Z){var le=hp(Rf),t=le[0],B=le[1];return Yd(function(){var H=Fu.transition;Fu.transition=1;try{B(Z)}finally{Fu.transition=H}},[Z]),t},useTransition:function(){var Z=hp(Rf)[0];return[Gd().current,Z]},useMutableSource:gb,useOpaqueIdentifier:function(){return hp(Rf)[0]},unstable_isNewReconciler:!1},UT=Gc.ReactCurrentOwner,uf=!1;function ru(Z,le,t,B){le.child=Z===null?ub(le,null,t,B):Nd(le,Z.child,t,B)}function Ab(Z,le,t,B,H){t=t.render;var d=le.ref;return Jh(le,H),B=ly(Z,le,t,B,d,H),Z!==null&&!uf?(le.updateQueue=Z.updateQueue,le.flags&=-517,Z.lanes&=~H,jf(Z,le,H)):(le.flags|=1,ru(Z,le,B,H),le.child)}function Mb(Z,le,t,B,H,d){if(Z===null){var l=t.type;return typeof l=="function"&&!zy(l)&&l.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(le.tag=15,le.type=l,Sb(Z,le,l,B,H,d)):(Z=t0(t.type,null,B,le,le.mode,d),Z.ref=le.ref,Z.return=le,le.child=Z)}return l=Z.child,(H&d)==0&&(H=l.memoizedProps,t=t.compare,t=t!==null?t:Qv,t(H,B)&&Z.ref===le.ref)?jf(Z,le,d):(le.flags|=1,Z=Cc(l,B),Z.ref=le.ref,Z.return=le,le.child=Z)}function Sb(Z,le,t,B,H,d){if(Z!==null&&Qv(Z.memoizedProps,B)&&Z.ref===le.ref)if(uf=!1,(d&H)!=0)(Z.flags&16384)!=0&&(uf=!0);else return le.lanes=Z.lanes,jf(Z,le,d);return py(Z,le,t,B,d)}function vy(Z,le,t){var B=le.pendingProps,H=B.children,d=Z!==null?Z.memoizedState:null;if(B.mode==="hidden"||B.mode==="unstable-defer-without-hiding")if((le.mode&4)==0)le.memoizedState={baseLanes:0},e0(le,t);else if((t&1073741824)!=0)le.memoizedState={baseLanes:0},e0(le,d!==null?d.baseLanes:t);else return Z=d!==null?d.baseLanes|t:t,le.lanes=le.childLanes=1073741824,le.memoizedState={baseLanes:Z},e0(le,Z),null;else d!==null?(B=d.baseLanes|t,le.memoizedState=null):B=t,e0(le,B);return ru(Z,le,H,t),le.child}function kb(Z,le){var t=le.ref;(Z===null&&t!==null||Z!==null&&Z.ref!==t)&&(le.flags|=128)}function py(Z,le,t,B,H){var d=eu(t)?Zc:_l.current;return d=jh(le,d),Jh(le,H),t=ly(Z,le,t,B,d,H),Z!==null&&!uf?(le.updateQueue=Z.updateQueue,le.flags&=-517,Z.lanes&=~H,jf(Z,le,H)):(le.flags|=1,ru(Z,le,t,H),le.child)}function Eb(Z,le,t,B,H){if(eu(t)){var d=!0;Ed(le)}else d=!1;if(Jh(le,H),le.stateNode===null)Z!==null&&(Z.alternate=null,le.alternate=null,le.flags|=2),ob(le,t,B),ty(le,t,B,H),B=!0;else if(Z===null){var l=le.stateNode,b=le.memoizedProps;l.props=b;var w=l.context,e=t.contextType;typeof e=="object"&&e!==null?e=zu(e):(e=eu(t)?Zc:_l.current,e=jh(le,e));var o=t.getDerivedStateFromProps,a=typeof o=="function"||typeof l.getSnapshotBeforeUpdate=="function";a||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(b!==B||w!==e)&&sb(le,l,B,e),bc=!1;var n=le.memoizedState;l.state=n,np(le,B,l,H),w=le.memoizedState,b!==B||n!==w||ql.current||bc?(typeof o=="function"&&(Id(le,t,o,B),w=le.memoizedState),(b=bc||ib(le,t,b,B,n,w,e))?(a||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(le.flags|=4)):(typeof l.componentDidMount=="function"&&(le.flags|=4),le.memoizedProps=B,le.memoizedState=w),l.props=B,l.state=w,l.context=e,B=b):(typeof l.componentDidMount=="function"&&(le.flags|=4),B=!1)}else{l=le.stateNode,tb(Z,le),b=le.memoizedProps,e=le.type===le.elementType?b:lf(le.type,b),l.props=e,a=le.pendingProps,n=l.context,w=t.contextType,typeof w=="object"&&w!==null?w=zu(w):(w=eu(t)?Zc:_l.current,w=jh(le,w));var r=t.getDerivedStateFromProps;(o=typeof r=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(b!==a||n!==w)&&sb(le,l,B,w),bc=!1,n=le.memoizedState,l.state=n,np(le,B,l,H);var u=le.memoizedState;b!==a||n!==u||ql.current||bc?(typeof r=="function"&&(Id(le,t,r,B),u=le.memoizedState),(e=bc||ib(le,t,e,B,n,u,w))?(o||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(B,u,w),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(B,u,w)),typeof l.componentDidUpdate=="function"&&(le.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(le.flags|=256)):(typeof l.componentDidUpdate!="function"||b===Z.memoizedProps&&n===Z.memoizedState||(le.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||b===Z.memoizedProps&&n===Z.memoizedState||(le.flags|=256),le.memoizedProps=B,le.memoizedState=u),l.props=B,l.state=u,l.context=w,B=e):(typeof l.componentDidUpdate!="function"||b===Z.memoizedProps&&n===Z.memoizedState||(le.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||b===Z.memoizedProps&&n===Z.memoizedState||(le.flags|=256),B=!1)}return dy(Z,le,t,B,d,H)}function dy(Z,le,t,B,H,d){kb(Z,le);var l=(le.flags&64)!=0;if(!B&&!l)return H&&Wx(le,t,!1),jf(Z,le,d);B=le.stateNode,UT.current=le;var b=l&&typeof t.getDerivedStateFromError!="function"?null:B.render();return le.flags|=1,Z!==null&&l?(le.child=Nd(le,Z.child,null,d),le.child=Nd(le,null,b,d)):ru(Z,le,b,d),le.memoizedState=B.state,H&&Wx(le,t,!0),le.child}function Cb(Z){var le=Z.stateNode;le.pendingContext?Gx(Z,le.pendingContext,le.pendingContext!==le.context):le.context&&Gx(Z,le.context,!1),ry(Z,le.containerInfo)}var Xd={dehydrated:null,retryLane:0};function Lb(Z,le,t){var B=le.pendingProps,H=qo.current,d=!1,l;return(l=(le.flags&64)!=0)||(l=Z!==null&&Z.memoizedState===null?!1:(H&2)!=0),l?(d=!0,le.flags&=-65):Z!==null&&Z.memoizedState===null||B.fallback===void 0||B.unstable_avoidThisFallback===!0||(H|=1),$o(qo,H&1),Z===null?(B.fallback!==void 0&&ay(le),Z=B.children,H=B.fallback,d?(Z=Pb(le,Z,H,t),le.child.memoizedState={baseLanes:t},le.memoizedState=Xd,Z):typeof B.unstable_expectedLoadTime=="number"?(Z=Pb(le,Z,H,t),le.child.memoizedState={baseLanes:t},le.memoizedState=Xd,le.lanes=33554432,Z):(t=Fy({mode:"visible",children:Z},le.mode,t,null),t.return=le,le.child=t)):Z.memoizedState!==null?d?(B=Rb(Z,le,B.children,B.fallback,t),d=le.child,H=Z.child.memoizedState,d.memoizedState=H===null?{baseLanes:t}:{baseLanes:H.baseLanes|t},d.childLanes=Z.childLanes&~t,le.memoizedState=Xd,B):(t=Db(Z,le,B.children,t),le.memoizedState=null,t):d?(B=Rb(Z,le,B.children,B.fallback,t),d=le.child,H=Z.child.memoizedState,d.memoizedState=H===null?{baseLanes:t}:{baseLanes:H.baseLanes|t},d.childLanes=Z.childLanes&~t,le.memoizedState=Xd,B):(t=Db(Z,le,B.children,t),le.memoizedState=null,t)}function Pb(Z,le,t,B){var H=Z.mode,d=Z.child;return le={mode:"hidden",children:le},(H&2)==0&&d!==null?(d.childLanes=0,d.pendingProps=le):d=Fy(le,H,0,null),t=av(t,H,B,null),d.return=Z,t.return=Z,d.sibling=t,Z.child=d,t}function Db(Z,le,t,B){var H=Z.child;return Z=H.sibling,t=Cc(H,{mode:"visible",children:t}),(le.mode&2)==0&&(t.lanes=B),t.return=le,t.sibling=null,Z!==null&&(Z.nextEffect=null,Z.flags=8,le.firstEffect=le.lastEffect=Z),le.child=t}function Rb(Z,le,t,B,H){var d=le.mode,l=Z.child;Z=l.sibling;var b={mode:"hidden",children:t};return(d&2)==0&&le.child!==l?(t=le.child,t.childLanes=0,t.pendingProps=b,l=t.lastEffect,l!==null?(le.firstEffect=t.firstEffect,le.lastEffect=l,l.nextEffect=null):le.firstEffect=le.lastEffect=null):t=Cc(l,b),Z!==null?B=Cc(Z,B):(B=av(B,d,H,null),B.flags|=2),B.return=le,t.return=le,t.sibling=B,le.child=t,B}function Ib(Z,le){Z.lanes|=le;var t=Z.alternate;t!==null&&(t.lanes|=le),eb(Z.return,le)}function gy(Z,le,t,B,H,d){var l=Z.memoizedState;l===null?Z.memoizedState={isBackwards:le,rendering:null,renderingStartTime:0,last:B,tail:t,tailMode:H,lastEffect:d}:(l.isBackwards=le,l.rendering=null,l.renderingStartTime=0,l.last=B,l.tail=t,l.tailMode=H,l.lastEffect=d)}function zb(Z,le,t){var B=le.pendingProps,H=B.revealOrder,d=B.tail;if(ru(Z,le,B.children,t),B=qo.current,(B&2)!=0)B=B&1|2,le.flags|=64;else{if(Z!==null&&(Z.flags&64)!=0)e:for(Z=le.child;Z!==null;){if(Z.tag===13)Z.memoizedState!==null&&Ib(Z,t);else if(Z.tag===19)Ib(Z,t);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===le)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===le)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}B&=1}if($o(qo,B),(le.mode&2)==0)le.memoizedState=null;else switch(H){case"forwards":for(t=le.child,H=null;t!==null;)Z=t.alternate,Z!==null&&Bd(Z)===null&&(H=t),t=t.sibling;t=H,t===null?(H=le.child,le.child=null):(H=t.sibling,t.sibling=null),gy(le,!1,H,t,d,le.lastEffect);break;case"backwards":for(t=null,H=le.child,le.child=null;H!==null;){if(Z=H.alternate,Z!==null&&Bd(Z)===null){le.child=H;break}Z=H.sibling,H.sibling=t,t=H,H=Z}gy(le,!0,t,null,d,le.lastEffect);break;case"together":gy(le,!1,null,null,void 0,le.lastEffect);break;default:le.memoizedState=null}return le.child}function jf(Z,le,t){if(Z!==null&&(le.dependencies=Z.dependencies),dp|=le.lanes,(t&le.childLanes)!=0){if(Z!==null&&le.child!==Z.child)throw Error(Ca(153));if(le.child!==null){for(Z=le.child,t=Cc(Z,Z.pendingProps),le.child=t,t.return=le;Z.sibling!==null;)Z=Z.sibling,t=t.sibling=Cc(Z,Z.pendingProps),t.return=le;t.sibling=null}return le.child}return null}var Fb,yy,Ob,Nb;Fb=function(Z,le){for(var t=le.child;t!==null;){if(t.tag===5||t.tag===6)Z.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===le)break;for(;t.sibling===null;){if(t.return===null||t.return===le)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};yy=function(){};Ob=function(Z,le,t,B){var H=Z.memoizedProps;if(H!==B){Z=le.stateNode,Qc(Pf.current);var d=null;switch(t){case"input":H=tg(Z,H),B=tg(Z,B),d=[];break;case"option":H=ag(Z,H),B=ag(Z,B),d=[];break;case"select":H=Oo({},H,{value:void 0}),B=Oo({},B,{value:void 0}),d=[];break;case"textarea":H=ig(Z,H),B=ig(Z,B),d=[];break;default:typeof H.onClick!="function"&&typeof B.onClick=="function"&&(Z.onclick=Td)}lg(t,B);var l;t=null;for(e in H)if(!B.hasOwnProperty(e)&&H.hasOwnProperty(e)&&H[e]!=null)if(e==="style"){var b=H[e];for(l in b)b.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else e!=="dangerouslySetInnerHTML"&&e!=="children"&&e!=="suppressContentEditableWarning"&&e!=="suppressHydrationWarning"&&e!=="autoFocus"&&(Cv.hasOwnProperty(e)?d||(d=[]):(d=d||[]).push(e,null));for(e in B){var w=B[e];if(b=H!=null?H[e]:void 0,B.hasOwnProperty(e)&&w!==b&&(w!=null||b!=null))if(e==="style")if(b){for(l in b)!b.hasOwnProperty(l)||w&&w.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in w)w.hasOwnProperty(l)&&b[l]!==w[l]&&(t||(t={}),t[l]=w[l])}else t||(d||(d=[]),d.push(e,t)),t=w;else e==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,b=b?b.__html:void 0,w!=null&&b!==w&&(d=d||[]).push(e,w)):e==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(e,""+w):e!=="suppressContentEditableWarning"&&e!=="suppressHydrationWarning"&&(Cv.hasOwnProperty(e)?(w!=null&&e==="onScroll"&&Do("scroll",Z),d||b===w||(d=[])):typeof w=="object"&&w!==null&&w.$$typeof===J0?w.toString():(d=d||[]).push(e,w))}t&&(d=d||[]).push("style",t);var e=d;(le.updateQueue=e)&&(le.flags|=4)}};Nb=function(Z,le,t,B){t!==B&&(le.flags|=4)};function pp(Z,le){if(!Df)switch(Z.tailMode){case"hidden":le=Z.tail;for(var t=null;le!==null;)le.alternate!==null&&(t=le),le=le.sibling;t===null?Z.tail=null:t.sibling=null;break;case"collapsed":t=Z.tail;for(var B=null;t!==null;)t.alternate!==null&&(B=t),t=t.sibling;B===null?le||Z.tail===null?Z.tail=null:Z.tail.sibling=null:B.sibling=null}}function VT(Z,le,t){var B=le.pendingProps;switch(le.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return eu(le.type)&&kd(),null;case 3:return Qh(),Ro(ql),Ro(_l),oy(),B=le.stateNode,B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(Z===null||Z.child===null)&&(Ud(le)?le.flags|=4:B.hydrate||(le.flags|=256)),yy(le),null;case 5:ny(le);var H=Qc(sp.current);if(t=le.type,Z!==null&&le.stateNode!=null)Ob(Z,le,t,B,H),Z.ref!==le.ref&&(le.flags|=128);else{if(!B){if(le.stateNode===null)throw Error(Ca(166));return null}if(Z=Qc(Pf.current),Ud(le)){B=le.stateNode,t=le.type;var d=le.memoizedProps;switch(B[yc]=le,B[Md]=d,t){case"dialog":Do("cancel",B),Do("close",B);break;case"iframe":case"object":case"embed":Do("load",B);break;case"video":case"audio":for(Z=0;Z<qv.length;Z++)Do(qv[Z],B);break;case"source":Do("error",B);break;case"img":case"image":case"link":Do("error",B),Do("load",B);break;case"details":Do("toggle",B);break;case"input":E1(B,d),Do("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!d.multiple},Do("invalid",B);break;case"textarea":P1(B,d),Do("invalid",B)}lg(t,d),Z=null;for(var l in d)d.hasOwnProperty(l)&&(H=d[l],l==="children"?typeof H=="string"?B.textContent!==H&&(Z=["children",H]):typeof H=="number"&&B.textContent!==""+H&&(Z=["children",""+H]):Cv.hasOwnProperty(l)&&H!=null&&l==="onScroll"&&Do("scroll",B));switch(t){case"input":od(B),L1(B,d,!0);break;case"textarea":od(B),R1(B);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(B.onclick=Td)}B=Z,le.updateQueue=B,B!==null&&(le.flags|=4)}else{switch(l=H.nodeType===9?H:H.ownerDocument,Z===og.html&&(Z=I1(t)),Z===og.html?t==="script"?(Z=l.createElement("div"),Z.innerHTML="<script><\/script>",Z=Z.removeChild(Z.firstChild)):typeof B.is=="string"?Z=l.createElement(t,{is:B.is}):(Z=l.createElement(t),t==="select"&&(l=Z,B.multiple?l.multiple=!0:B.size&&(l.size=B.size))):Z=l.createElementNS(Z,t),Z[yc]=le,Z[Md]=B,Fb(Z,le,!1,!1),le.stateNode=Z,l=ug(t,B),t){case"dialog":Do("cancel",Z),Do("close",Z),H=B;break;case"iframe":case"object":case"embed":Do("load",Z),H=B;break;case"video":case"audio":for(H=0;H<qv.length;H++)Do(qv[H],Z);H=B;break;case"source":Do("error",Z),H=B;break;case"img":case"image":case"link":Do("error",Z),Do("load",Z),H=B;break;case"details":Do("toggle",Z),H=B;break;case"input":E1(Z,B),H=tg(Z,B),Do("invalid",Z);break;case"option":H=ag(Z,B);break;case"select":Z._wrapperState={wasMultiple:!!B.multiple},H=Oo({},B,{value:void 0}),Do("invalid",Z);break;case"textarea":P1(Z,B),H=ig(Z,B),Do("invalid",Z);break;default:H=B}lg(t,H);var b=H;for(d in b)if(b.hasOwnProperty(d)){var w=b[d];d==="style"?O1(Z,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&z1(Z,w)):d==="children"?typeof w=="string"?(t!=="textarea"||w!=="")&&zv(Z,w):typeof w=="number"&&zv(Z,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Cv.hasOwnProperty(d)?w!=null&&d==="onScroll"&&Do("scroll",Z):w!=null&&Y0(Z,d,w,l))}switch(t){case"input":od(Z),L1(Z,B,!1);break;case"textarea":od(Z),R1(Z);break;case"option":B.value!=null&&Z.setAttribute("value",""+cc(B.value));break;case"select":Z.multiple=!!B.multiple,d=B.value,d!=null?Rh(Z,!!B.multiple,d,!1):B.defaultValue!=null&&Rh(Z,!!B.multiple,B.defaultValue,!0);break;default:typeof H.onClick=="function"&&(Z.onclick=Td)}Nx(t,B)&&(le.flags|=4)}le.ref!==null&&(le.flags|=128)}return null;case 6:if(Z&&le.stateNode!=null)Nb(Z,le,Z.memoizedProps,B);else{if(typeof B!="string"&&le.stateNode===null)throw Error(Ca(166));t=Qc(sp.current),Qc(Pf.current),Ud(le)?(B=le.stateNode,t=le.memoizedProps,B[yc]=le,B.nodeValue!==t&&(le.flags|=4)):(B=(t.nodeType===9?t:t.ownerDocument).createTextNode(B),B[yc]=le,le.stateNode=B)}return null;case 13:return Ro(qo),B=le.memoizedState,(le.flags&64)!=0?(le.lanes=t,le):(B=B!==null,t=!1,Z===null?le.memoizedProps.fallback!==void 0&&Ud(le):t=Z.memoizedState!==null,B&&!t&&(le.mode&2)!=0&&(Z===null&&le.memoizedProps.unstable_avoidThisFallback!==!0||(qo.current&1)!=0?al===0&&(al=3):((al===0||al===3)&&(al=4),Ol===null||(dp&134217727)==0&&(ev&134217727)==0||rv(Ol,Al))),(B||t)&&(le.flags|=4),null);case 4:return Qh(),yy(le),Z===null&&Rx(le.stateNode.containerInfo),null;case 10:return qg(le),null;case 17:return eu(le.type)&&kd(),null;case 19:if(Ro(qo),B=le.memoizedState,B===null)return null;if(d=(le.flags&64)!=0,l=B.rendering,l===null)if(d)pp(B,!1);else{if(al!==0||Z!==null&&(Z.flags&64)!=0)for(Z=le.child;Z!==null;){if(l=Bd(Z),l!==null){for(le.flags|=64,pp(B,!1),d=l.updateQueue,d!==null&&(le.updateQueue=d,le.flags|=4),B.lastEffect===null&&(le.firstEffect=null),le.lastEffect=B.lastEffect,B=t,t=le.child;t!==null;)d=t,Z=B,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,l=d.alternate,l===null?(d.childLanes=0,d.lanes=Z,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,d.type=l.type,Z=l.dependencies,d.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext}),t=t.sibling;return $o(qo,qo.current&1|2),le.child}Z=Z.sibling}B.tail!==null&&wl()>Ey&&(le.flags|=64,d=!0,pp(B,!1),le.lanes=33554432)}else{if(!d)if(Z=Bd(l),Z!==null){if(le.flags|=64,d=!0,t=Z.updateQueue,t!==null&&(le.updateQueue=t,le.flags|=4),pp(B,!0),B.tail===null&&B.tailMode==="hidden"&&!l.alternate&&!Df)return le=le.lastEffect=B.lastEffect,le!==null&&(le.nextEffect=null),null}else 2*wl()-B.renderingStartTime>Ey&&t!==1073741824&&(le.flags|=64,d=!0,pp(B,!1),le.lanes=33554432);B.isBackwards?(l.sibling=le.child,le.child=l):(t=B.last,t!==null?t.sibling=l:le.child=l,B.last=l)}return B.tail!==null?(t=B.tail,B.rendering=t,B.tail=t.sibling,B.lastEffect=le.lastEffect,B.renderingStartTime=wl(),t.sibling=null,le=qo.current,$o(qo,d?le&1|2:le&1),t):null;case 23:case 24:return Iy(),Z!==null&&Z.memoizedState!==null!=(le.memoizedState!==null)&&B.mode!=="unstable-defer-without-hiding"&&(le.flags|=4),null}throw Error(Ca(156,le.tag))}function HT(Z){switch(Z.tag){case 1:eu(Z.type)&&kd();var le=Z.flags;return le&4096?(Z.flags=le&-4097|64,Z):null;case 3:if(Qh(),Ro(ql),Ro(_l),oy(),le=Z.flags,(le&64)!=0)throw Error(Ca(285));return Z.flags=le&-4097|64,Z;case 5:return ny(Z),null;case 13:return Ro(qo),le=Z.flags,le&4096?(Z.flags=le&-4097|64,Z):null;case 19:return Ro(qo),null;case 4:return Qh(),null;case 10:return qg(Z),null;case 23:case 24:return Iy(),null;default:return null}}function my(Z,le){try{var t="",B=le;do t+=w3(B),B=B.return;while(B);var H=t}catch(d){H=`
Error generating stack: `+d.message+`
`+d.stack}return{value:Z,source:le,stack:H}}function xy(Z,le){try{console.error(le.value)}catch(t){setTimeout(function(){throw t})}}var GT=typeof WeakMap=="function"?WeakMap:Map;function Bb(Z,le,t){t=_c(-1,t),t.tag=3,t.payload={element:null};var B=le.value;return t.callback=function(){Kd||(Kd=!0,Cy=B),xy(Z,le)},t}function Ub(Z,le,t){t=_c(-1,t),t.tag=3;var B=Z.type.getDerivedStateFromError;if(typeof B=="function"){var H=le.value;t.payload=function(){return xy(Z,le),B(H)}}var d=Z.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(t.callback=function(){typeof B!="function"&&(If===null?If=new Set([this]):If.add(this),xy(Z,le));var l=le.stack;this.componentDidCatch(le.value,{componentStack:l!==null?l:""})}),t}var YT=typeof WeakSet=="function"?WeakSet:Set;function Vb(Z){var le=Z.ref;if(le!==null)if(typeof le=="function")try{le(null)}catch(t){Ec(Z,t)}else le.current=null}function WT(Z,le){switch(le.tag){case 0:case 11:case 15:case 22:return;case 1:if(le.flags&256&&Z!==null){var t=Z.memoizedProps,B=Z.memoizedState;Z=le.stateNode,le=Z.getSnapshotBeforeUpdate(le.elementType===le.type?t:lf(le.type,t),B),Z.__reactInternalSnapshotBeforeUpdate=le}return;case 3:le.flags&256&&Gg(le.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ca(163))}function XT(Z,le,t){switch(t.tag){case 0:case 11:case 15:case 22:if(le=t.updateQueue,le=le!==null?le.lastEffect:null,le!==null){Z=le=le.next;do{if((Z.tag&3)==3){var B=Z.create;Z.destroy=B()}Z=Z.next}while(Z!==le)}if(le=t.updateQueue,le=le!==null?le.lastEffect:null,le!==null){Z=le=le.next;do{var H=Z;B=H.next,H=H.tag,(H&4)!=0&&(H&1)!=0&&(r2(t,Z),e5(t,Z)),Z=B}while(Z!==le)}return;case 1:Z=t.stateNode,t.flags&4&&(le===null?Z.componentDidMount():(B=t.elementType===t.type?le.memoizedProps:lf(t.type,le.memoizedProps),Z.componentDidUpdate(B,le.memoizedState,Z.__reactInternalSnapshotBeforeUpdate))),le=t.updateQueue,le!==null&&nb(t,le,Z);return;case 3:if(le=t.updateQueue,le!==null){if(Z=null,t.child!==null)switch(t.child.tag){case 5:Z=t.child.stateNode;break;case 1:Z=t.child.stateNode}nb(t,le,Z)}return;case 5:Z=t.stateNode,le===null&&t.flags&4&&Nx(t.type,t.memoizedProps)&&Z.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&q1(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ca(163))}function Hb(Z,le){for(var t=Z;;){if(t.tag===5){var B=t.stateNode;if(le)B=B.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{B=t.stateNode;var H=t.memoizedProps.style;H=H!=null&&H.hasOwnProperty("display")?H.display:null,B.style.display=F1("display",H)}}else if(t.tag===6)t.stateNode.nodeValue=le?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===Z)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===Z)break;for(;t.sibling===null;){if(t.return===null||t.return===Z)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function Gb(Z,le){if(Kc&&typeof Kc.onCommitFiberUnmount=="function")try{Kc.onCommitFiberUnmount(Xg,le)}catch{}switch(le.tag){case 0:case 11:case 14:case 15:case 22:if(Z=le.updateQueue,Z!==null&&(Z=Z.lastEffect,Z!==null)){var t=Z=Z.next;do{var B=t,H=B.destroy;if(B=B.tag,H!==void 0)if((B&4)!=0)r2(le,t);else{B=le;try{H()}catch(d){Ec(B,d)}}t=t.next}while(t!==Z)}break;case 1:if(Vb(le),Z=le.stateNode,typeof Z.componentWillUnmount=="function")try{Z.props=le.memoizedProps,Z.state=le.memoizedState,Z.componentWillUnmount()}catch(d){Ec(le,d)}break;case 5:Vb(le);break;case 4:jb(Z,le)}}function Yb(Z){Z.alternate=null,Z.child=null,Z.dependencies=null,Z.firstEffect=null,Z.lastEffect=null,Z.memoizedProps=null,Z.memoizedState=null,Z.pendingProps=null,Z.return=null,Z.updateQueue=null}function Wb(Z){return Z.tag===5||Z.tag===3||Z.tag===4}function Xb(Z){e:{for(var le=Z.return;le!==null;){if(Wb(le))break e;le=le.return}throw Error(Ca(160))}var t=le;switch(le=t.stateNode,t.tag){case 5:var B=!1;break;case 3:le=le.containerInfo,B=!0;break;case 4:le=le.containerInfo,B=!0;break;default:throw Error(Ca(161))}t.flags&16&&(zv(le,""),t.flags&=-17);e:t:for(t=Z;;){for(;t.sibling===null;){if(t.return===null||Wb(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}B?by(Z,t,le):_y(Z,t,le)}function by(Z,le,t){var B=Z.tag,H=B===5||B===6;if(H)Z=H?Z.stateNode:Z.stateNode.instance,le?t.nodeType===8?t.parentNode.insertBefore(Z,le):t.insertBefore(Z,le):(t.nodeType===8?(le=t.parentNode,le.insertBefore(Z,t)):(le=t,le.appendChild(Z)),t=t._reactRootContainer,t!=null||le.onclick!==null||(le.onclick=Td));else if(B!==4&&(Z=Z.child,Z!==null))for(by(Z,le,t),Z=Z.sibling;Z!==null;)by(Z,le,t),Z=Z.sibling}function _y(Z,le,t){var B=Z.tag,H=B===5||B===6;if(H)Z=H?Z.stateNode:Z.stateNode.instance,le?t.insertBefore(Z,le):t.appendChild(Z);else if(B!==4&&(Z=Z.child,Z!==null))for(_y(Z,le,t),Z=Z.sibling;Z!==null;)_y(Z,le,t),Z=Z.sibling}function jb(Z,le){for(var t=le,B=!1,H,d;;){if(!B){B=t.return;e:for(;;){if(B===null)throw Error(Ca(160));switch(H=B.stateNode,B.tag){case 5:d=!1;break e;case 3:H=H.containerInfo,d=!0;break e;case 4:H=H.containerInfo,d=!0;break e}B=B.return}B=!0}if(t.tag===5||t.tag===6){e:for(var l=Z,b=t,w=b;;)if(Gb(l,w),w.child!==null&&w.tag!==4)w.child.return=w,w=w.child;else{if(w===b)break e;for(;w.sibling===null;){if(w.return===null||w.return===b)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}d?(l=H,b=t.stateNode,l.nodeType===8?l.parentNode.removeChild(b):l.removeChild(b)):H.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){H=t.stateNode.containerInfo,d=!0,t.child.return=t,t=t.child;continue}}else if(Gb(Z,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===le)break;for(;t.sibling===null;){if(t.return===null||t.return===le)return;t=t.return,t.tag===4&&(B=!1)}t.sibling.return=t.return,t=t.sibling}}function wy(Z,le){switch(le.tag){case 0:case 11:case 14:case 15:case 22:var t=le.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var B=t=t.next;do(B.tag&3)==3&&(Z=B.destroy,B.destroy=void 0,Z!==void 0&&Z()),B=B.next;while(B!==t)}return;case 1:return;case 5:if(t=le.stateNode,t!=null){B=le.memoizedProps;var H=Z!==null?Z.memoizedProps:B;Z=le.type;var d=le.updateQueue;if(le.updateQueue=null,d!==null){for(t[Md]=B,Z==="input"&&B.type==="radio"&&B.name!=null&&C1(t,B),ug(Z,H),le=ug(Z,B),H=0;H<d.length;H+=2){var l=d[H],b=d[H+1];l==="style"?O1(t,b):l==="dangerouslySetInnerHTML"?z1(t,b):l==="children"?zv(t,b):Y0(t,l,b,le)}switch(Z){case"input":rg(t,B);break;case"textarea":D1(t,B);break;case"select":Z=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!B.multiple,d=B.value,d!=null?Rh(t,!!B.multiple,d,!1):Z!==!!B.multiple&&(B.defaultValue!=null?Rh(t,!!B.multiple,B.defaultValue,!0):Rh(t,!!B.multiple,B.multiple?[]:"",!1))}}}return;case 6:if(le.stateNode===null)throw Error(Ca(162));le.stateNode.nodeValue=le.memoizedProps;return;case 3:t=le.stateNode,t.hydrate&&(t.hydrate=!1,q1(t.containerInfo));return;case 12:return;case 13:le.memoizedState!==null&&(ky=wl(),Hb(le.child,!0)),Zb(le);return;case 19:Zb(le);return;case 17:return;case 23:case 24:Hb(le,le.memoizedState!==null);return}throw Error(Ca(163))}function Zb(Z){var le=Z.updateQueue;if(le!==null){Z.updateQueue=null;var t=Z.stateNode;t===null&&(t=Z.stateNode=new YT),le.forEach(function(B){var H=n5.bind(null,Z,B);t.has(B)||(t.add(B),B.then(H,H))})}}function jT(Z,le){return Z!==null&&(Z=Z.memoizedState,Z===null||Z.dehydrated!==null)?(le=le.memoizedState,le!==null&&le.dehydrated===null):!1}var ZT=Math.ceil,jd=Gc.ReactCurrentDispatcher,Ty=Gc.ReactCurrentOwner,ci=0,Ol=null,Cs=null,Al=0,eh=0,Ay=mc(0),al=0,Zd=null,qh=0,dp=0,ev=0,My=0,Sy=null,ky=0,Ey=1/0;function tv(){Ey=wl()+500}var Ja=null,Kd=!1,Cy=null,If=null,Ac=!1,gp=null,yp=90,Ly=[],Py=[],Zf=null,mp=0,Dy=null,Jd=-1,Kf=0,Qd=0,xp=null,$d=!1;function mu(){return(ci&48)!=0?wl():Jd!==-1?Jd:Jd=wl()}function Mc(Z){if(Z=Z.mode,(Z&2)==0)return 1;if((Z&4)==0)return Zh()===99?1:2;if(Kf===0&&(Kf=qh),zT.transition!==0){Qd!==0&&(Qd=Sy!==null?Sy.pendingLanes:0),Z=Kf;var le=4186112&~Qd;return le&=-le,le===0&&(Z=4186112&~Z,le=Z&-Z,le===0&&(le=8192)),le}return Z=Zh(),(ci&4)!=0&&Z===98?Z=pd(12,Kf):(Z=N3(Z),Z=pd(Z,Kf)),Z}function Sc(Z,le,t){if(50<mp)throw mp=0,Dy=null,Error(Ca(185));if(Z=qd(Z,le),Z===null)return null;dd(Z,le,t),Z===Ol&&(ev|=le,al===4&&rv(Z,Al));var B=Zh();le===1?(ci&8)!=0&&(ci&48)==0?Ry(Z):(Ou(Z,t),ci===0&&(tv(),Lf())):((ci&4)==0||B!==98&&B!==99||(Zf===null?Zf=new Set([Z]):Zf.add(Z)),Ou(Z,t)),Sy=Z}function qd(Z,le){Z.lanes|=le;var t=Z.alternate;for(t!==null&&(t.lanes|=le),t=Z,Z=Z.return;Z!==null;)Z.childLanes|=le,t=Z.alternate,t!==null&&(t.childLanes|=le),t=Z,Z=Z.return;return t.tag===3?t.stateNode:null}function Ou(Z,le){for(var t=Z.callbackNode,B=Z.suspendedLanes,H=Z.pingedLanes,d=Z.expirationTimes,l=Z.pendingLanes;0<l;){var b=31-dc(l),w=1<<b,e=d[b];if(e===-1){if((w&B)==0||(w&H)!=0){e=le,Oh(w);var o=Mo;d[b]=10<=o?e+250:6<=o?e+5e3:-1}}else e<=le&&(Z.expiredLanes|=w);l&=~w}if(B=Wv(Z,Z===Ol?Al:0),le=Mo,B===0)t!==null&&(t!==Jg&&Zg(t),Z.callbackNode=null,Z.callbackPriority=0);else{if(t!==null){if(Z.callbackPriority===le)return;t!==Jg&&Zg(t)}le===15?(t=Ry.bind(null,Z),Wf===null?(Wf=[t],Ld=jg(Cd,qx)):Wf.push(t),t=Jg):le===14?t=rp(99,Ry.bind(null,Z)):(t=B3(le),t=rp(t,Kb.bind(null,Z))),Z.callbackPriority=le,Z.callbackNode=t}}function Kb(Z){if(Jd=-1,Qd=Kf=0,(ci&48)!=0)throw Error(Ca(327));var le=Z.callbackNode;if(kc()&&Z.callbackNode!==le)return null;var t=Wv(Z,Z===Ol?Al:0);if(t===0)return null;var B=t,H=ci;ci|=16;var d=qb();(Ol!==Z||Al!==B)&&(tv(),nv(Z,B));do try{QT();break}catch(b){$b(Z,b)}while(1);if($g(),jd.current=d,ci=H,Cs!==null?B=0:(Ol=null,Al=0,B=al),(qh&ev)!=0)nv(Z,0);else if(B!==0){if(B===2&&(ci|=64,Z.hydrate&&(Z.hydrate=!1,Gg(Z.containerInfo)),t=ox(Z),t!==0&&(B=bp(Z,t))),B===1)throw le=Zd,nv(Z,0),rv(Z,t),Ou(Z,wl()),le;switch(Z.finishedWork=Z.current.alternate,Z.finishedLanes=t,B){case 0:case 1:throw Error(Ca(345));case 2:th(Z);break;case 3:if(rv(Z,t),(t&62914560)===t&&(B=ky+500-wl(),10<B)){if(Wv(Z,0)!==0)break;if(H=Z.suspendedLanes,(H&t)!==t){mu(),Z.pingedLanes|=Z.suspendedLanes&H;break}Z.timeoutHandle=Bx(th.bind(null,Z),B);break}th(Z);break;case 4:if(rv(Z,t),(t&4186112)===t)break;for(B=Z.eventTimes,H=-1;0<t;){var l=31-dc(t);d=1<<l,l=B[l],l>H&&(H=l),t&=~d}if(t=H,t=wl()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*ZT(t/1960))-t,10<t){Z.timeoutHandle=Bx(th.bind(null,Z),t);break}th(Z);break;case 5:th(Z);break;default:throw Error(Ca(329))}}return Ou(Z,wl()),Z.callbackNode===le?Kb.bind(null,Z):null}function rv(Z,le){for(le&=~My,le&=~ev,Z.suspendedLanes|=le,Z.pingedLanes&=~le,Z=Z.expirationTimes;0<le;){var t=31-dc(le),B=1<<t;Z[t]=-1,le&=~B}}function Ry(Z){if((ci&48)!=0)throw Error(Ca(327));if(kc(),Z===Ol&&(Z.expiredLanes&Al)!=0){var le=Al,t=bp(Z,le);(qh&ev)!=0&&(le=Wv(Z,le),t=bp(Z,le))}else le=Wv(Z,0),t=bp(Z,le);if(Z.tag!==0&&t===2&&(ci|=64,Z.hydrate&&(Z.hydrate=!1,Gg(Z.containerInfo)),le=ox(Z),le!==0&&(t=bp(Z,le))),t===1)throw t=Zd,nv(Z,0),rv(Z,le),Ou(Z,wl()),t;return Z.finishedWork=Z.current.alternate,Z.finishedLanes=le,th(Z),Ou(Z,wl()),null}function KT(){if(Zf!==null){var Z=Zf;Zf=null,Z.forEach(function(le){le.expiredLanes|=24&le.pendingLanes,Ou(le,wl())})}Lf()}function Jb(Z,le){var t=ci;ci|=1;try{return Z(le)}finally{ci=t,ci===0&&(tv(),Lf())}}function Qb(Z,le){var t=ci;ci&=-2,ci|=8;try{return Z(le)}finally{ci=t,ci===0&&(tv(),Lf())}}function e0(Z,le){$o(Ay,eh),eh|=le,qh|=le}function Iy(){eh=Ay.current,Ro(Ay)}function nv(Z,le){Z.finishedWork=null,Z.finishedLanes=0;var t=Z.timeoutHandle;if(t!==-1&&(Z.timeoutHandle=-1,CT(t)),Cs!==null)for(t=Cs.return;t!==null;){var B=t;switch(B.tag){case 1:B=B.type.childContextTypes,B!=null&&kd();break;case 3:Qh(),Ro(ql),Ro(_l),oy();break;case 5:ny(B);break;case 4:Qh();break;case 13:Ro(qo);break;case 19:Ro(qo);break;case 10:qg(B);break;case 23:case 24:Iy()}t=t.return}Ol=Z,Cs=Cc(Z.current,null),Al=eh=qh=le,al=0,Zd=null,My=ev=dp=0}function $b(Z,le){do{var t=Cs;try{if($g(),lp.current=Wd,Vd){for(var B=ls.memoizedState;B!==null;){var H=B.queue;H!==null&&(H.pending=null),B=B.next}Vd=!1}if(up=0,nl=Tl=ls=null,fp=!1,Ty.current=null,t===null||t.return===null){al=1,Zd=le,Cs=null;break}e:{var d=Z,l=t.return,b=t,w=le;if(le=Al,b.flags|=2048,b.firstEffect=b.lastEffect=null,w!==null&&typeof w=="object"&&typeof w.then=="function"){var e=w;if((b.mode&2)==0){var o=b.alternate;o?(b.updateQueue=o.updateQueue,b.memoizedState=o.memoizedState,b.lanes=o.lanes):(b.updateQueue=null,b.memoizedState=null)}var a=(qo.current&1)!=0,n=l;do{var r;if(r=n.tag===13){var u=n.memoizedState;if(u!==null)r=u.dehydrated!==null;else{var s=n.memoizedProps;r=s.fallback===void 0?!1:s.unstable_avoidThisFallback!==!0?!0:!a}}if(r){var i=n.updateQueue;if(i===null){var f=new Set;f.add(e),n.updateQueue=f}else i.add(e);if((n.mode&2)==0){if(n.flags|=64,b.flags|=16384,b.flags&=-2981,b.tag===1)if(b.alternate===null)b.tag=17;else{var h=_c(-1,1);h.tag=2,wc(b,h)}b.lanes|=1;break e}w=void 0,b=le;var p=d.pingCache;if(p===null?(p=d.pingCache=new GT,w=new Set,p.set(e,w)):(w=p.get(e),w===void 0&&(w=new Set,p.set(e,w))),!w.has(b)){w.add(b);var v=r5.bind(null,d,e,b);e.then(v,v)}n.flags|=4096,n.lanes=le;break e}n=n.return}while(n!==null);w=Error((Dh(b.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}al!==5&&(al=2),w=my(w,b),n=l;do{switch(n.tag){case 3:d=w,n.flags|=4096,le&=-le,n.lanes|=le;var y=Bb(n,d,le);rb(n,y);break e;case 1:d=w;var g=n.type,A=n.stateNode;if((n.flags&64)==0&&(typeof g.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(If===null||!If.has(A)))){n.flags|=4096,le&=-le,n.lanes|=le;var m=Ub(n,d,le);rb(n,m);break e}}n=n.return}while(n!==null)}t2(t)}catch(M){le=M,Cs===t&&t!==null&&(Cs=t=t.return);continue}break}while(1)}function qb(){var Z=jd.current;return jd.current=Wd,Z===null?Wd:Z}function bp(Z,le){var t=ci;ci|=16;var B=qb();Ol===Z&&Al===le||nv(Z,le);do try{JT();break}catch(H){$b(Z,H)}while(1);if($g(),ci=t,jd.current=B,Cs!==null)throw Error(Ca(261));return Ol=null,Al=0,al}function JT(){for(;Cs!==null;)e2(Cs)}function QT(){for(;Cs!==null&&!DT();)e2(Cs)}function e2(Z){var le=a2(Z.alternate,Z,eh);Z.memoizedProps=Z.pendingProps,le===null?t2(Z):Cs=le,Ty.current=null}function t2(Z){var le=Z;do{var t=le.alternate;if(Z=le.return,(le.flags&2048)==0){if(t=VT(t,le,eh),t!==null){Cs=t;return}if(t=le,t.tag!==24&&t.tag!==23||t.memoizedState===null||(eh&1073741824)!=0||(t.mode&4)==0){for(var B=0,H=t.child;H!==null;)B|=H.lanes|H.childLanes,H=H.sibling;t.childLanes=B}Z!==null&&(Z.flags&2048)==0&&(Z.firstEffect===null&&(Z.firstEffect=le.firstEffect),le.lastEffect!==null&&(Z.lastEffect!==null&&(Z.lastEffect.nextEffect=le.firstEffect),Z.lastEffect=le.lastEffect),1<le.flags&&(Z.lastEffect!==null?Z.lastEffect.nextEffect=le:Z.firstEffect=le,Z.lastEffect=le))}else{if(t=HT(le),t!==null){t.flags&=2047,Cs=t;return}Z!==null&&(Z.firstEffect=Z.lastEffect=null,Z.flags|=2048)}if(le=le.sibling,le!==null){Cs=le;return}Cs=le=Z}while(le!==null);al===0&&(al=5)}function th(Z){var le=Zh();return Jc(99,$T.bind(null,Z,le)),null}function $T(Z,le){do kc();while(gp!==null);if((ci&48)!=0)throw Error(Ca(327));var t=Z.finishedWork;if(t===null)return null;if(Z.finishedWork=null,Z.finishedLanes=0,t===Z.current)throw Error(Ca(177));Z.callbackNode=null;var B=t.lanes|t.childLanes,H=B,d=Z.pendingLanes&~H;Z.pendingLanes=H,Z.suspendedLanes=0,Z.pingedLanes=0,Z.expiredLanes&=H,Z.mutableReadLanes&=H,Z.entangledLanes&=H,H=Z.entanglements;for(var l=Z.eventTimes,b=Z.expirationTimes;0<d;){var w=31-dc(d),e=1<<w;H[w]=0,l[w]=-1,b[w]=-1,d&=~e}if(Zf!==null&&(B&24)==0&&Zf.has(Z)&&Zf.delete(Z),Z===Ol&&(Cs=Ol=null,Al=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,B=t.firstEffect):B=t:B=t.firstEffect,B!==null){if(H=ci,ci|=32,Ty.current=null,Ug=gd,l=Sx(),Fg(l)){if("selectionStart"in l)b={start:l.selectionStart,end:l.selectionEnd};else e:if(b=(b=l.ownerDocument)&&b.defaultView||window,(e=b.getSelection&&b.getSelection())&&e.rangeCount!==0){b=e.anchorNode,d=e.anchorOffset,w=e.focusNode,e=e.focusOffset;try{b.nodeType,w.nodeType}catch{b=null;break e}var o=0,a=-1,n=-1,r=0,u=0,s=l,i=null;t:for(;;){for(var f;s!==b||d!==0&&s.nodeType!==3||(a=o+d),s!==w||e!==0&&s.nodeType!==3||(n=o+e),s.nodeType===3&&(o+=s.nodeValue.length),(f=s.firstChild)!==null;)i=s,s=f;for(;;){if(s===l)break t;if(i===b&&++r===d&&(a=o),i===w&&++u===e&&(n=o),(f=s.nextSibling)!==null)break;s=i,i=s.parentNode}s=f}b=a===-1||n===-1?null:{start:a,end:n}}else b=null;b=b||{start:0,end:0}}else b=null;Vg={focusedElem:l,selectionRange:b},gd=!1,xp=null,$d=!1,Ja=B;do try{qT()}catch(M){if(Ja===null)throw Error(Ca(330));Ec(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);xp=null,Ja=B;do try{for(l=Z;Ja!==null;){var h=Ja.flags;if(h&16&&zv(Ja.stateNode,""),h&128){var p=Ja.alternate;if(p!==null){var v=p.ref;v!==null&&(typeof v=="function"?v(null):v.current=null)}}switch(h&1038){case 2:Xb(Ja),Ja.flags&=-3;break;case 6:Xb(Ja),Ja.flags&=-3,wy(Ja.alternate,Ja);break;case 1024:Ja.flags&=-1025;break;case 1028:Ja.flags&=-1025,wy(Ja.alternate,Ja);break;case 4:wy(Ja.alternate,Ja);break;case 8:b=Ja,jb(l,b);var y=b.alternate;Yb(b),y!==null&&Yb(y)}Ja=Ja.nextEffect}}catch(M){if(Ja===null)throw Error(Ca(330));Ec(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);if(v=Vg,p=Sx(),h=v.focusedElem,l=v.selectionRange,p!==h&&h&&h.ownerDocument&&Mx(h.ownerDocument.documentElement,h)){for(l!==null&&Fg(h)&&(p=l.start,v=l.end,v===void 0&&(v=p),"selectionStart"in h?(h.selectionStart=p,h.selectionEnd=Math.min(v,h.value.length)):(v=(p=h.ownerDocument||document)&&p.defaultView||window,v.getSelection&&(v=v.getSelection(),b=h.textContent.length,y=Math.min(l.start,b),l=l.end===void 0?y:Math.min(l.end,b),!v.extend&&y>l&&(b=l,l=y,y=b),b=Ax(h,y),d=Ax(h,l),b&&d&&(v.rangeCount!==1||v.anchorNode!==b.node||v.anchorOffset!==b.offset||v.focusNode!==d.node||v.focusOffset!==d.offset)&&(p=p.createRange(),p.setStart(b.node,b.offset),v.removeAllRanges(),y>l?(v.addRange(p),v.extend(d.node,d.offset)):(p.setEnd(d.node,d.offset),v.addRange(p)))))),p=[],v=h;v=v.parentNode;)v.nodeType===1&&p.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<p.length;h++)v=p[h],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}gd=!!Ug,Vg=Ug=null,Z.current=t,Ja=B;do try{for(h=Z;Ja!==null;){var g=Ja.flags;if(g&36&&XT(h,Ja.alternate,Ja),g&128){p=void 0;var A=Ja.ref;if(A!==null){var m=Ja.stateNode;switch(Ja.tag){case 5:p=m;break;default:p=m}typeof A=="function"?A(p):A.current=p}}Ja=Ja.nextEffect}}catch(M){if(Ja===null)throw Error(Ca(330));Ec(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);Ja=null,IT(),ci=H}else Z.current=t;if(Ac)Ac=!1,gp=Z,yp=le;else for(Ja=B;Ja!==null;)le=Ja.nextEffect,Ja.nextEffect=null,Ja.flags&8&&(g=Ja,g.sibling=null,g.stateNode=null),Ja=le;if(B=Z.pendingLanes,B===0&&(If=null),B===1?Z===Dy?mp++:(mp=0,Dy=Z):mp=0,t=t.stateNode,Kc&&typeof Kc.onCommitFiberRoot=="function")try{Kc.onCommitFiberRoot(Xg,t,void 0,(t.current.flags&64)==64)}catch{}if(Ou(Z,wl()),Kd)throw Kd=!1,Z=Cy,Cy=null,Z;return(ci&8)!=0||Lf(),null}function qT(){for(;Ja!==null;){var Z=Ja.alternate;$d||xp===null||((Ja.flags&8)!=0?X1(Ja,xp)&&($d=!0):Ja.tag===13&&jT(Z,Ja)&&X1(Ja,xp)&&($d=!0));var le=Ja.flags;(le&256)!=0&&WT(Z,Ja),(le&512)==0||Ac||(Ac=!0,rp(97,function(){return kc(),null})),Ja=Ja.nextEffect}}function kc(){if(yp!==90){var Z=97<yp?97:yp;return yp=90,Jc(Z,t5)}return!1}function e5(Z,le){Ly.push(le,Z),Ac||(Ac=!0,rp(97,function(){return kc(),null}))}function r2(Z,le){Py.push(le,Z),Ac||(Ac=!0,rp(97,function(){return kc(),null}))}function t5(){if(gp===null)return!1;var Z=gp;if(gp=null,(ci&48)!=0)throw Error(Ca(331));var le=ci;ci|=32;var t=Py;Py=[];for(var B=0;B<t.length;B+=2){var H=t[B],d=t[B+1],l=H.destroy;if(H.destroy=void 0,typeof l=="function")try{l()}catch(w){if(d===null)throw Error(Ca(330));Ec(d,w)}}for(t=Ly,Ly=[],B=0;B<t.length;B+=2){H=t[B],d=t[B+1];try{var b=H.create;H.destroy=b()}catch(w){if(d===null)throw Error(Ca(330));Ec(d,w)}}for(b=Z.current.firstEffect;b!==null;)Z=b.nextEffect,b.nextEffect=null,b.flags&8&&(b.sibling=null,b.stateNode=null),b=Z;return ci=le,Lf(),!0}function n2(Z,le,t){le=my(t,le),le=Bb(Z,le,1),wc(Z,le),le=mu(),Z=qd(Z,1),Z!==null&&(dd(Z,1,le),Ou(Z,le))}function Ec(Z,le){if(Z.tag===3)n2(Z,Z,le);else for(var t=Z.return;t!==null;){if(t.tag===3){n2(t,Z,le);break}else if(t.tag===1){var B=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(If===null||!If.has(B))){Z=my(le,Z);var H=Ub(t,Z,1);if(wc(t,H),H=mu(),t=qd(t,1),t!==null)dd(t,1,H),Ou(t,H);else if(typeof B.componentDidCatch=="function"&&(If===null||!If.has(B)))try{B.componentDidCatch(le,Z)}catch{}break}}t=t.return}}function r5(Z,le,t){var B=Z.pingCache;B!==null&&B.delete(le),le=mu(),Z.pingedLanes|=Z.suspendedLanes&t,Ol===Z&&(Al&t)===t&&(al===4||al===3&&(Al&62914560)===Al&&500>wl()-ky?nv(Z,0):My|=t),Ou(Z,le)}function n5(Z,le){var t=Z.stateNode;t!==null&&t.delete(le),le=0,le===0&&(le=Z.mode,(le&2)==0?le=1:(le&4)==0?le=Zh()===99?1:2:(Kf===0&&(Kf=qh),le=Nh(62914560&~Kf),le===0&&(le=4194304))),t=mu(),Z=qd(Z,le),Z!==null&&(dd(Z,le,t),Ou(Z,t))}var a2;a2=function(Z,le,t){var B=le.lanes;if(Z!==null)if(Z.memoizedProps!==le.pendingProps||ql.current)uf=!0;else if((t&B)!=0)uf=(Z.flags&16384)!=0;else{switch(uf=!1,le.tag){case 3:Cb(le),iy();break;case 5:fb(le);break;case 1:eu(le.type)&&Ed(le);break;case 4:ry(le,le.stateNode.containerInfo);break;case 10:B=le.memoizedProps.value;var H=le.type._context;$o(Pd,H._currentValue),H._currentValue=B;break;case 13:if(le.memoizedState!==null)return(t&le.child.childLanes)!=0?Lb(Z,le,t):($o(qo,qo.current&1),le=jf(Z,le,t),le!==null?le.sibling:null);$o(qo,qo.current&1);break;case 19:if(B=(t&le.childLanes)!=0,(Z.flags&64)!=0){if(B)return zb(Z,le,t);le.flags|=64}if(H=le.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),$o(qo,qo.current),B)break;return null;case 23:case 24:return le.lanes=0,vy(Z,le,t)}return jf(Z,le,t)}else uf=!1;switch(le.lanes=0,le.tag){case 2:if(B=le.type,Z!==null&&(Z.alternate=null,le.alternate=null,le.flags|=2),Z=le.pendingProps,H=jh(le,_l.current),Jh(le,t),H=ly(null,le,B,Z,H,t),le.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0){if(le.tag=1,le.memoizedState=null,le.updateQueue=null,eu(B)){var d=!0;Ed(le)}else d=!1;le.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,ey(le);var l=B.getDerivedStateFromProps;typeof l=="function"&&Id(le,B,l,Z),H.updater=zd,le.stateNode=H,H._reactInternals=le,ty(le,B,Z,t),le=dy(null,le,B,!0,d,t)}else le.tag=0,ru(null,le,H,t),le=le.child;return le;case 16:H=le.elementType;e:{switch(Z!==null&&(Z.alternate=null,le.alternate=null,le.flags|=2),Z=le.pendingProps,d=H._init,H=d(H._payload),le.type=H,d=le.tag=i5(H),Z=lf(H,Z),d){case 0:le=py(null,le,H,Z,t);break e;case 1:le=Eb(null,le,H,Z,t);break e;case 11:le=Ab(null,le,H,Z,t);break e;case 14:le=Mb(null,le,H,lf(H.type,Z),B,t);break e}throw Error(Ca(306,H,""))}return le;case 0:return B=le.type,H=le.pendingProps,H=le.elementType===B?H:lf(B,H),py(Z,le,B,H,t);case 1:return B=le.type,H=le.pendingProps,H=le.elementType===B?H:lf(B,H),Eb(Z,le,B,H,t);case 3:if(Cb(le),B=le.updateQueue,Z===null||B===null)throw Error(Ca(282));if(B=le.pendingProps,H=le.memoizedState,H=H!==null?H.element:null,tb(Z,le),np(le,B,null,t),B=le.memoizedState.element,B===H)iy(),le=jf(Z,le,t);else{if(H=le.stateNode,(d=H.hydrate)&&(Tc=Gh(le.stateNode.containerInfo.firstChild),Xf=le,d=Df=!0),d){if(Z=H.mutableSourceEagerHydrationData,Z!=null)for(H=0;H<Z.length;H+=2)d=Z[H],d._workInProgressVersionPrimary=Z[H+1],$h.push(d);for(t=ub(le,null,B,t),le.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else ru(Z,le,B,t),iy();le=le.child}return le;case 5:return fb(le),Z===null&&ay(le),B=le.type,H=le.pendingProps,d=Z!==null?Z.memoizedProps:null,l=H.children,Hg(B,H)?l=null:d!==null&&Hg(B,d)&&(le.flags|=16),kb(Z,le),ru(Z,le,l,t),le.child;case 6:return Z===null&&ay(le),null;case 13:return Lb(Z,le,t);case 4:return ry(le,le.stateNode.containerInfo),B=le.pendingProps,Z===null?le.child=Nd(le,null,B,t):ru(Z,le,B,t),le.child;case 11:return B=le.type,H=le.pendingProps,H=le.elementType===B?H:lf(B,H),Ab(Z,le,B,H,t);case 7:return ru(Z,le,le.pendingProps,t),le.child;case 8:return ru(Z,le,le.pendingProps.children,t),le.child;case 12:return ru(Z,le,le.pendingProps.children,t),le.child;case 10:e:{B=le.type._context,H=le.pendingProps,l=le.memoizedProps,d=H.value;var b=le.type._context;if($o(Pd,b._currentValue),b._currentValue=d,l!==null)if(b=l.value,d=Iu(b,d)?0:(typeof B._calculateChangedBits=="function"?B._calculateChangedBits(b,d):1073741823)|0,d===0){if(l.children===H.children&&!ql.current){le=jf(Z,le,t);break e}}else for(b=le.child,b!==null&&(b.return=le);b!==null;){var w=b.dependencies;if(w!==null){l=b.child;for(var e=w.firstContext;e!==null;){if(e.context===B&&(e.observedBits&d)!=0){b.tag===1&&(e=_c(-1,t&-t),e.tag=2,wc(b,e)),b.lanes|=t,e=b.alternate,e!==null&&(e.lanes|=t),eb(b.return,t),w.lanes|=t;break}e=e.next}}else l=b.tag===10&&b.type===le.type?null:b.child;if(l!==null)l.return=b;else for(l=b;l!==null;){if(l===le){l=null;break}if(b=l.sibling,b!==null){b.return=l.return,l=b;break}l=l.return}b=l}ru(Z,le,H.children,t),le=le.child}return le;case 9:return H=le.type,d=le.pendingProps,B=d.children,Jh(le,t),H=zu(H,d.unstable_observedBits),B=B(H),le.flags|=1,ru(Z,le,B,t),le.child;case 14:return H=le.type,d=lf(H,le.pendingProps),d=lf(H.type,d),Mb(Z,le,H,d,B,t);case 15:return Sb(Z,le,le.type,le.pendingProps,B,t);case 17:return B=le.type,H=le.pendingProps,H=le.elementType===B?H:lf(B,H),Z!==null&&(Z.alternate=null,le.alternate=null,le.flags|=2),le.tag=1,eu(B)?(Z=!0,Ed(le)):Z=!1,Jh(le,t),ob(le,B,H),ty(le,B,H,t),dy(null,le,B,!0,Z,t);case 19:return zb(Z,le,t);case 23:return vy(Z,le,t);case 24:return vy(Z,le,t)}throw Error(Ca(156,le.tag))};function a5(Z,le,t,B){this.tag=Z,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=le,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(Z,le,t,B){return new a5(Z,le,t,B)}function zy(Z){return Z=Z.prototype,!(!Z||!Z.isReactComponent)}function i5(Z){if(typeof Z=="function")return zy(Z)?1:0;if(Z!=null){if(Z=Z.$$typeof,Z===rd)return 11;if(Z===ad)return 14}return 2}function Cc(Z,le){var t=Z.alternate;return t===null?(t=Nu(Z.tag,le,Z.key,Z.mode),t.elementType=Z.elementType,t.type=Z.type,t.stateNode=Z.stateNode,t.alternate=Z,Z.alternate=t):(t.pendingProps=le,t.type=Z.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=Z.childLanes,t.lanes=Z.lanes,t.child=Z.child,t.memoizedProps=Z.memoizedProps,t.memoizedState=Z.memoizedState,t.updateQueue=Z.updateQueue,le=Z.dependencies,t.dependencies=le===null?null:{lanes:le.lanes,firstContext:le.firstContext},t.sibling=Z.sibling,t.index=Z.index,t.ref=Z.ref,t}function t0(Z,le,t,B,H,d){var l=2;if(B=Z,typeof Z=="function")zy(Z)&&(l=1);else if(typeof Z=="string")l=5;else e:switch(Z){case fc:return av(t.children,H,d,le);case A1:l=8,H|=16;break;case W0:l=8,H|=1;break;case Pv:return Z=Nu(12,t,le,H|8),Z.elementType=Pv,Z.type=Pv,Z.lanes=d,Z;case Dv:return Z=Nu(13,t,le,H),Z.type=Dv,Z.elementType=Dv,Z.lanes=d,Z;case nd:return Z=Nu(19,t,le,H),Z.elementType=nd,Z.lanes=d,Z;case Q0:return Fy(t,H,d,le);case $0:return Z=Nu(24,t,le,H),Z.elementType=$0,Z.lanes=d,Z;default:if(typeof Z=="object"&&Z!==null)switch(Z.$$typeof){case X0:l=10;break e;case j0:l=9;break e;case rd:l=11;break e;case ad:l=14;break e;case Z0:l=16,B=null;break e;case K0:l=22;break e}throw Error(Ca(130,Z==null?Z:typeof Z,""))}return le=Nu(l,t,le,H),le.elementType=Z,le.type=B,le.lanes=d,le}function av(Z,le,t,B){return Z=Nu(7,Z,B,le),Z.lanes=t,Z}function Fy(Z,le,t,B){return Z=Nu(23,Z,B,le),Z.elementType=Q0,Z.lanes=t,Z}function Oy(Z,le,t){return Z=Nu(6,Z,null,le),Z.lanes=t,Z}function Ny(Z,le,t){return le=Nu(4,Z.children!==null?Z.children:[],Z.key,le),le.lanes=t,le.stateNode={containerInfo:Z.containerInfo,pendingChildren:null,implementation:Z.implementation},le}function o5(Z,le,t){this.tag=le,this.containerInfo=Z,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ag(0),this.expirationTimes=Ag(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ag(0),this.mutableSourceEagerHydrationData=null}function s5(Z,le,t){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:B==null?null:""+B,children:Z,containerInfo:le,implementation:t}}function r0(Z,le,t,B){var H=le.current,d=mu(),l=Mc(H);e:if(t){t=t._reactInternals;t:{if(Xc(t)!==t||t.tag!==1)throw Error(Ca(170));var b=t;do{switch(b.tag){case 3:b=b.stateNode.context;break t;case 1:if(eu(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break t}}b=b.return}while(b!==null);throw Error(Ca(171))}if(t.tag===1){var w=t.type;if(eu(w)){t=Yx(t,w,b);break e}}t=b}else t=xc;return le.context===null?le.context=t:le.pendingContext=t,le=_c(d,l),le.payload={element:Z},B=B===void 0?null:B,B!==null&&(le.callback=B),wc(H,le),Sc(H,l,d),l}function By(Z){if(Z=Z.current,!Z.child)return null;switch(Z.child.tag){case 5:return Z.child.stateNode;default:return Z.child.stateNode}}function i2(Z,le){if(Z=Z.memoizedState,Z!==null&&Z.dehydrated!==null){var t=Z.retryLane;Z.retryLane=t!==0&&t<le?t:le}}function Uy(Z,le){i2(Z,le),(Z=Z.alternate)&&i2(Z,le)}function l5(){return null}function Vy(Z,le,t){var B=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new o5(Z,le,t!=null&&t.hydrate===!0),le=Nu(3,null,null,le===2?7:le===1?3:0),t.current=le,le.stateNode=t,ey(le),Z[Yh]=t.current,Rx(Z.nodeType===8?Z.parentNode:Z),B)for(Z=0;Z<B.length;Z++){le=B[Z];var H=le._getVersion;H=H(le._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[le,H]:t.mutableSourceEagerHydrationData.push(le,H)}this._internalRoot=t}Vy.prototype.render=function(Z){r0(Z,this._internalRoot,null,null)};Vy.prototype.unmount=function(){var Z=this._internalRoot,le=Z.containerInfo;r0(null,Z,null,function(){le[Yh]=null})};function _p(Z){return!(!Z||Z.nodeType!==1&&Z.nodeType!==9&&Z.nodeType!==11&&(Z.nodeType!==8||Z.nodeValue!==" react-mount-point-unstable "))}function u5(Z,le){if(le||(le=Z?Z.nodeType===9?Z.documentElement:Z.firstChild:null,le=!(!le||le.nodeType!==1||!le.hasAttribute("data-reactroot"))),!le)for(var t;t=Z.lastChild;)Z.removeChild(t);return new Vy(Z,0,le?{hydrate:!0}:void 0)}function n0(Z,le,t,B,H){var d=t._reactRootContainer;if(d){var l=d._internalRoot;if(typeof H=="function"){var b=H;H=function(){var e=By(l);b.call(e)}}r0(le,l,Z,H)}else{if(d=t._reactRootContainer=u5(t,B),l=d._internalRoot,typeof H=="function"){var w=H;H=function(){var e=By(l);w.call(e)}}Qb(function(){r0(le,l,Z,H)})}return By(l)}j1=function(Z){if(Z.tag===13){var le=mu();Sc(Z,4,le),Uy(Z,4)}};mg=function(Z){if(Z.tag===13){var le=mu();Sc(Z,67108864,le),Uy(Z,67108864)}};Z1=function(Z){if(Z.tag===13){var le=mu(),t=Mc(Z);Sc(Z,t,le),Uy(Z,t)}};K1=function(Z,le){return le()};cg=function(Z,le,t){switch(le){case"input":if(rg(Z,t),le=t.name,t.type==="radio"&&le!=null){for(t=Z;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+le)+'][type="radio"]'),le=0;le<t.length;le++){var B=t[le];if(B!==Z&&B.form===Z.form){var H=Sd(B);if(!H)throw Error(Ca(90));k1(B),rg(B,H)}}}break;case"textarea":D1(Z,t);break;case"select":le=t.value,le!=null&&Rh(Z,!!t.multiple,le,!1)}};hg=Jb;V1=function(Z,le,t,B,H){var d=ci;ci|=4;try{return Jc(98,Z.bind(null,le,t,B,H))}finally{ci=d,ci===0&&(tv(),Lf())}};vg=function(){(ci&49)==0&&(KT(),kc())};H1=function(Z,le){var t=ci;ci|=2;try{return Z(le)}finally{ci=t,ci===0&&(tv(),Lf())}};function o2(Z,le){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(le))throw Error(Ca(200));return s5(Z,le,null,t)}var f5={Events:[tp,Wh,Sd,B1,U1,kc,{current:!1}]},wp={findFiberByHostInstance:jc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},c5={bundleType:wp.bundleType,version:wp.version,rendererPackageName:wp.rendererPackageName,rendererConfig:wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gc.ReactCurrentDispatcher,findHostInstanceByFiber:function(Z){return Z=W1(Z),Z===null?null:Z.stateNode},findFiberByHostInstance:wp.findFiberByHostInstance||l5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{Xg=a0.inject(c5),Kc=a0}catch{}}Ru.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;Ru.createPortal=o2;Ru.findDOMNode=function(Z){if(Z==null)return null;if(Z.nodeType===1)return Z;var le=Z._reactInternals;if(le===void 0)throw typeof Z.render=="function"?Error(Ca(188)):Error(Ca(268,Object.keys(Z)));return Z=W1(le),Z=Z===null?null:Z.stateNode,Z};Ru.flushSync=function(Z,le){var t=ci;if((t&48)!=0)return Z(le);ci|=1;try{if(Z)return Jc(99,Z.bind(null,le))}finally{ci=t,Lf()}};Ru.hydrate=function(Z,le,t){if(!_p(le))throw Error(Ca(200));return n0(null,Z,le,!0,t)};Ru.render=function(Z,le,t){if(!_p(le))throw Error(Ca(200));return n0(null,Z,le,!1,t)};Ru.unmountComponentAtNode=function(Z){if(!_p(Z))throw Error(Ca(40));return Z._reactRootContainer?(Qb(function(){n0(null,null,Z,!1,function(){Z._reactRootContainer=null,Z[Yh]=null})}),!0):!1};Ru.unstable_batchedUpdates=Jb;Ru.unstable_createPortal=function(Z,le){return o2(Z,le,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ru.unstable_renderSubtreeIntoContainer=function(Z,le,t,B){if(!_p(t))throw Error(Ca(200));if(Z==null||Z._reactInternals===void 0)throw Error(Ca(38));return n0(Z,le,t,!1,B)};Ru.version="17.0.2";function s2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s2)}catch(Z){console.error(Z)}}s2(),y1.exports=Ru;var w5=y1.exports,h5={exports:{}},Tp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5=kv.exports,l2=60103;Tp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var u2=Symbol.for;l2=u2("react.element"),Tp.Fragment=u2("react.fragment")}var p5=v5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d5=Object.prototype.hasOwnProperty,g5={key:!0,ref:!0,__self:!0,__source:!0};function f2(Z,le,t){var B,H={},d=null,l=null;t!==void 0&&(d=""+t),le.key!==void 0&&(d=""+le.key),le.ref!==void 0&&(l=le.ref);for(B in le)d5.call(le,B)&&!g5.hasOwnProperty(B)&&(H[B]=le[B]);if(Z&&Z.defaultProps)for(B in le=Z.defaultProps,le)H[B]===void 0&&(H[B]=le[B]);return{$$typeof:l2,type:Z,key:d,ref:l,props:H,_owner:p5.current}}Tp.jsx=f2;Tp.jsxs=f2;h5.exports=Tp;var Hy={exports:{}},y5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",m5=y5,x5=m5;function c2(){}function h2(){}h2.resetWarningCache=c2;var b5=function(){function Z(B,H,d,l,b,w){if(w!==x5){var e=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw e.name="Invariant Violation",e}}Z.isRequired=Z;function le(){return Z}var t={array:Z,bool:Z,func:Z,number:Z,object:Z,string:Z,symbol:Z,any:Z,arrayOf:le,element:Z,elementType:Z,instanceOf:le,node:Z,objectOf:le,oneOf:le,oneOfType:le,shape:le,exact:le,checkPropTypes:h2,resetWarningCache:c2};return t.PropTypes=t,t};Hy.exports=b5();var T5=Hy.exports,v2={},p2={};(function(Z){function le(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?le=function(A){return typeof A}:le=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},le(y)}Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=v;var t=l(kv.exports),B=H(Hy.exports);function H(y){return y&&y.__esModule?y:{default:y}}function d(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return d=function(){return y},y}function l(y){if(y&&y.__esModule)return y;if(y===null||le(y)!=="object"&&typeof y!="function")return{default:y};var g=d();if(g&&g.has(y))return g.get(y);var A={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in y)if(Object.prototype.hasOwnProperty.call(y,M)){var _=m?Object.getOwnPropertyDescriptor(y,M):null;_&&(_.get||_.set)?Object.defineProperty(A,M,_):A[M]=y[M]}return A.default=y,g&&g.set(y,A),A}function b(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function w(y,g){for(var A=0;A<g.length;A++){var m=g[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}function e(y,g,A){return g&&w(y.prototype,g),A&&w(y,A),y}function o(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&a(y,g)}function a(y,g){return a=Object.setPrototypeOf||function(m,M){return m.__proto__=M,m},a(y,g)}function n(y){var g=s();return function(){var m=i(y),M;if(g){var _=i(this).constructor;M=Reflect.construct(m,arguments,_)}else M=m.apply(this,arguments);return r(this,M)}}function r(y,g){return g&&(le(g)==="object"||typeof g=="function")?g:u(y)}function u(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function s(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},i(y)}var f=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover"],h=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],p=typeof window!="undefined";function v(y){var g=function(A){o(M,A);var m=n(M);function M(_){var T;return b(this,M),T=m.call(this,_),T.p=Promise.resolve(),T.resizeHandler=null,T.handlers={},T.syncWindowResize=T.syncWindowResize.bind(u(T)),T.syncEventHandlers=T.syncEventHandlers.bind(u(T)),T.attachUpdateEvents=T.attachUpdateEvents.bind(u(T)),T.getRef=T.getRef.bind(u(T)),T.handleUpdate=T.handleUpdate.bind(u(T)),T.figureCallback=T.figureCallback.bind(u(T)),T.updatePlotly=T.updatePlotly.bind(u(T)),T}return e(M,[{key:"updatePlotly",value:function(T,x,c){var L=this;this.p=this.p.then(function(){if(!L.unmounting){if(!L.el)throw new Error("Missing element reference");return y.react(L.el,{data:L.props.data,layout:L.props.layout,config:L.props.config,frames:L.props.frames})}}).then(function(){L.unmounting||(L.syncWindowResize(T),L.syncEventHandlers(),L.figureCallback(x),c&&L.attachUpdateEvents())}).catch(function(S){L.props.onError&&L.props.onError(S)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(T){this.unmounting=!1;var x=T.frames&&T.frames.length?T.frames.length:0,c=this.props.frames&&this.props.frames.length?this.props.frames.length:0,L=!(T.layout===this.props.layout&&T.data===this.props.data&&T.config===this.props.config&&c===x),S=T.revision!==void 0,k=T.revision!==this.props.revision;!L&&(!S||S&&!k)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&p&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),y.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||h.forEach(function(x){T.el.on(x,T.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||h.forEach(function(x){T.el.removeListener(x,T.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(T){if(typeof T=="function"){var x=this.el,c=x.data,L=x.layout,S=this.el._transitionData?this.el._transitionData._frames:null,k={data:c,layout:L,frames:S};T(k,this.el)}}},{key:"syncWindowResize",value:function(T){var x=this;!p||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return y.Plots.resize(x.el)},window.addEventListener("resize",this.resizeHandler),T&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(T){this.el=T,this.props.debug&&p&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var T=this;f.forEach(function(x){var c=T.props["on"+x],L=T.handlers[x],S=Boolean(L);c&&!S?T.addEventHandler(x,c):!c&&S?T.removeEventHandler(x):c&&S&&c!==L&&(T.removeEventHandler(x),T.addEventHandler(x,c))})}},{key:"addEventHandler",value:function(T,x){this.handlers[T]=x,this.el.on(this.getPlotlyEventName(T),this.handlers[T])}},{key:"removeEventHandler",value:function(T){this.el.removeListener(this.getPlotlyEventName(T),this.handlers[T]),delete this.handlers[T]}},{key:"getPlotlyEventName",value:function(T){return"plotly_"+T.toLowerCase()}},{key:"render",value:function(){return t.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),M}(t.Component);return g.propTypes={data:B.default.arrayOf(B.default.object),config:B.default.object,layout:B.default.object,frames:B.default.arrayOf(B.default.object),revision:B.default.number,onInitialized:B.default.func,onPurge:B.default.func,onError:B.default.func,onUpdate:B.default.func,debug:B.default.bool,style:B.default.object,className:B.default.string,useResizeHandler:B.default.bool,divId:B.default.string},f.forEach(function(A){g.propTypes["on"+A]=B.default.func}),g.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},g}})(p2);var d2={exports:{}};(function(Z,le){(function(t){Z.exports=t()})(function(){return function(){function t(B,H,d){function l(e,o){if(!H[e]){if(!B[e]){var a=typeof $p=="function"&&$p;if(!o&&a)return a(e,!0);if(b)return b(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=H[e]={exports:{}};B[e][0].call(r.exports,function(u){var s=B[e][1][u];return l(s||u)},r,r.exports,t,B,H,d)}return H[e].exports}for(var b=typeof $p=="function"&&$p,w=0;w<d.length;w++)l(d[w]);return l}return t}()({1:[function(t,B,H){var d=t("../src/lib"),l={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in l){var w=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(w,l[b])}},{"../src/lib":503}],2:[function(t,B,H){B.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(t,B,H){B.exports=t("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(t,B,H){B.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(t,B,H){B.exports=t("../src/traces/box")},{"../src/traces/box":679}],6:[function(t,B,H){B.exports=t("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(t,B,H){B.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(t,B,H){B.exports=t("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(t,B,H){B.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(t,B,H){B.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(t,B,H){B.exports=t("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(t,B,H){B.exports=t("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(t,B,H){B.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(t,B,H){B.exports=t("../src/core")},{"../src/core":481}],15:[function(t,B,H){B.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(t,B,H){B.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(t,B,H){B.exports=t("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(t,B,H){B.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(t,B,H){B.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(t,B,H){B.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(t,B,H){B.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(t,B,H){B.exports=t("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(t,B,H){B.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(t,B,H){B.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(t,B,H){B.exports=t("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(t,B,H){B.exports=t("../src/traces/image")},{"../src/traces/image":852}],27:[function(t,B,H){var d=t("./core");d.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),B.exports=d},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,B,H){B.exports=t("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(t,B,H){B.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(t,B,H){B.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(t,B,H){B.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(t,B,H){B.exports=t("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(t,B,H){B.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(t,B,H){B.exports=t("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(t,B,H){B.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(t,B,H){B.exports=t("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(t,B,H){B.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(t,B,H){B.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(t,B,H){B.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(t,B,H){B.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(t,B,H){B.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(t,B,H){B.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(t,B,H){B.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(t,B,H){B.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(t,B,H){B.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(t,B,H){B.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(t,B,H){B.exports=t("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(t,B,H){B.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(t,B,H){B.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(t,B,H){B.exports=t("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(t,B,H){B.exports=t("../src/traces/table")},{"../src/traces/table":1069}],52:[function(t,B,H){B.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(t,B,H){B.exports=t("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(t,B,H){B.exports=t("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(t,B,H){B.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3,null)})(this,function(d,l,b,w,e){e=e&&e.hasOwnProperty("default")?e.default:e;function o(ce){return ce.target.depth}function a(ce){return ce.depth}function n(ce,ye){return ye-1-ce.height}function r(ce,ye){return ce.sourceLinks.length?ce.depth:ye-1}function u(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?l.min(ce.sourceLinks,o)-1:0}function s(ce){return function(){return ce}}var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function f(ce,ye){return p(ce.source,ye.source)||ce.index-ye.index}function h(ce,ye){return p(ce.target,ye.target)||ce.index-ye.index}function p(ce,ye){return ce.partOfCycle===ye.partOfCycle?ce.y0-ye.y0:ce.circularLinkType==="top"||ye.circularLinkType==="bottom"?-1:1}function v(ce){return ce.value}function y(ce){return(ce.y0+ce.y1)/2}function g(ce){return y(ce.source)}function A(ce){return y(ce.target)}function m(ce){return ce.index}function M(ce){return ce.nodes}function _(ce){return ce.links}function T(ce,ye){var xe=ce.get(ye);if(!xe)throw new Error("missing: "+ye);return xe}function x(ce,ye){return ye(ce)}var c=25,L=10,S=.3;function k(){var ce=0,ye=0,xe=1,ke=1,Ae=24,Oe,He=m,Ge=r,_e=M,Ie=_,Ye=32,qe=2,Ue,Re=null;function Ve(){var Mt={nodes:_e.apply(null,arguments),links:Ie.apply(null,arguments)};dt(Mt),P(Mt,He,Re),Dt(Mt),zt(Mt),z(Mt,He),Bt(Mt,Ye,He),Lt(Mt);for(var it=4,ht=0;ht<it;ht++)Q(Mt,ke,He),ne(Mt,ke,He),re(Mt,ye,ke,He),Q(Mt,ke,He),ne(Mt,ke,He);return me(Mt,ye,ke),Y(Mt,qe,ke,He),Mt}Ve.nodeId=function(Mt){return arguments.length?(He=typeof Mt=="function"?Mt:s(Mt),Ve):He},Ve.nodeAlign=function(Mt){return arguments.length?(Ge=typeof Mt=="function"?Mt:s(Mt),Ve):Ge},Ve.nodeWidth=function(Mt){return arguments.length?(Ae=+Mt,Ve):Ae},Ve.nodePadding=function(Mt){return arguments.length?(Oe=+Mt,Ve):Oe},Ve.nodes=function(Mt){return arguments.length?(_e=typeof Mt=="function"?Mt:s(Mt),Ve):_e},Ve.links=function(Mt){return arguments.length?(Ie=typeof Mt=="function"?Mt:s(Mt),Ve):Ie},Ve.size=function(Mt){return arguments.length?(ce=ye=0,xe=+Mt[0],ke=+Mt[1],Ve):[xe-ce,ke-ye]},Ve.extent=function(Mt){return arguments.length?(ce=+Mt[0][0],xe=+Mt[1][0],ye=+Mt[0][1],ke=+Mt[1][1],Ve):[[ce,ye],[xe,ke]]},Ve.iterations=function(Mt){return arguments.length?(Ye=+Mt,Ve):Ye},Ve.circularLinkGap=function(Mt){return arguments.length?(qe=+Mt,Ve):qe},Ve.nodePaddingRatio=function(Mt){return arguments.length?(Ue=+Mt,Ve):Ue},Ve.sortNodes=function(Mt){return arguments.length?(Re=Mt,Ve):Re},Ve.update=function(Mt){return z(Mt,He),Lt(Mt),Mt.links.forEach(function(it){it.circular&&(it.circularLinkType=it.y0+it.y1<ke?"top":"bottom",it.source.circularLinkType=it.circularLinkType,it.target.circularLinkType=it.circularLinkType)}),Q(Mt,ke,He,!1),ne(Mt,ke,He),Y(Mt,qe,ke,He),Mt};function dt(Mt){Mt.nodes.forEach(function(ht,Qe){ht.index=Qe,ht.sourceLinks=[],ht.targetLinks=[]});var it=b.map(Mt.nodes,He);return Mt.links.forEach(function(ht,Qe){ht.index=Qe;var Ce=ht.source,je=ht.target;(typeof Ce=="undefined"?"undefined":i(Ce))!=="object"&&(Ce=ht.source=T(it,Ce)),(typeof je=="undefined"?"undefined":i(je))!=="object"&&(je=ht.target=T(it,je)),Ce.sourceLinks.push(ht),je.targetLinks.push(ht)}),Mt}function Dt(Mt){Mt.nodes.forEach(function(it){it.partOfCycle=!1,it.value=Math.max(l.sum(it.sourceLinks,v),l.sum(it.targetLinks,v)),it.sourceLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)}),it.targetLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)})})}function Gt(Mt){var it=0,ht=0,Qe=0,Ce=0,je=l.max(Mt.nodes,function(rt){return rt.column});return Mt.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=="top"?it=it+rt.width:ht=ht+rt.width,rt.target.column==0&&(Ce=Ce+rt.width),rt.source.column==je&&(Qe=Qe+rt.width))}),it=it>0?it+c+L:it,ht=ht>0?ht+c+L:ht,Qe=Qe>0?Qe+c+L:Qe,Ce=Ce>0?Ce+c+L:Ce,{top:it,bottom:ht,left:Ce,right:Qe}}function kt(Mt,it){var ht=l.max(Mt.nodes,function(St){return St.column}),Qe=xe-ce,Ce=ke-ye,je=Qe+it.right+it.left,rt=Ce+it.top+it.bottom,ut=Qe/je,Pt=Ce/rt;return ce=ce*ut+it.left,xe=it.right==0?xe:xe*ut,ye=ye*Pt+it.top,ke=ke*Pt,Mt.nodes.forEach(function(St){St.x0=ce+St.column*((xe-ce-Ae)/ht),St.x1=St.x0+Ae}),Pt}function zt(Mt){var it,ht,Qe;for(it=Mt.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.depth=Qe,Ce.sourceLinks.forEach(function(je){ht.indexOf(je.target)<0&&!je.circular&&ht.push(je.target)})});for(it=Mt.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.height=Qe,Ce.targetLinks.forEach(function(je){ht.indexOf(je.source)<0&&!je.circular&&ht.push(je.source)})});Mt.nodes.forEach(function(Ce){Ce.column=Math.floor(Ge.call(null,Ce,Qe))})}function Bt(Mt,it,ht){var Qe=b.nest().key(function(St){return St.column}).sortKeys(l.ascending).entries(Mt.nodes).map(function(St){return St.values});rt(ht),Pt();for(var Ce=1,je=it;je>0;--je)ut(Ce*=.99,ht),Pt();function rt(St){if(Ue){var Nt=1/0;Qe.forEach(function(Je){var gt=ke*Ue/(Je.length+1);Nt=gt<Nt?gt:Nt}),Oe=Nt}var Xt=l.min(Qe,function(Je){return(ke-ye-(Je.length-1)*Oe)/l.sum(Je,v)});Xt=Xt*S,Mt.links.forEach(function(Je){Je.width=Je.value*Xt});var Ot=Gt(Mt),Kt=kt(Mt,Ot);Xt=Xt*Kt,Mt.links.forEach(function(Je){Je.width=Je.value*Xt}),Qe.forEach(function(Je){var gt=Je.length;Je.forEach(function(Et,rr){Et.depth==Qe.length-1&&gt==1||Et.depth==0&&gt==1?(Et.y0=ke/2-Et.value*Xt,Et.y1=Et.y0+Et.value*Xt):Et.partOfCycle?D(Et,St)==0?(Et.y0=ke/2+rr,Et.y1=Et.y0+Et.value*Xt):Et.circularLinkType=="top"?(Et.y0=ye+rr,Et.y1=Et.y0+Et.value*Xt):(Et.y0=ke-Et.value*Xt-rr,Et.y1=Et.y0+Et.value*Xt):Ot.top==0||Ot.bottom==0?(Et.y0=(ke-ye)/gt*rr,Et.y1=Et.y0+Et.value*Xt):(Et.y0=(ke-ye)/2-gt/2+rr,Et.y1=Et.y0+Et.value*Xt)})})}function ut(St,Nt){var Xt=Qe.length;Qe.forEach(function(Ot){var Kt=Ot.length,Je=Ot[0].depth;Ot.forEach(function(gt){var Et;if((gt.sourceLinks.length||gt.targetLinks.length)&&!(gt.partOfCycle&&D(gt,Nt)>0))if(Je==0&&Kt==1)Et=gt.y1-gt.y0,gt.y0=ke/2-Et/2,gt.y1=ke/2+Et/2;else if(Je==Xt-1&&Kt==1)Et=gt.y1-gt.y0,gt.y0=ke/2-Et/2,gt.y1=ke/2+Et/2;else{var rr=0,vr=l.mean(gt.sourceLinks,A),or=l.mean(gt.targetLinks,g);vr&&or?rr=(vr+or)/2:rr=vr||or;var dr=(rr-y(gt))*St;gt.y0+=dr,gt.y1+=dr}})})}function Pt(){Qe.forEach(function(St){var Nt,Xt,Ot=ye,Kt=St.length,Je;for(St.sort(p),Je=0;Je<Kt;++Je)Nt=St[Je],Xt=Ot-Nt.y0,Xt>0&&(Nt.y0+=Xt,Nt.y1+=Xt),Ot=Nt.y1+Oe;if(Xt=Ot-Oe-ke,Xt>0)for(Ot=Nt.y0-=Xt,Nt.y1-=Xt,Je=Kt-2;Je>=0;--Je)Nt=St[Je],Xt=Nt.y1+Oe-Ot,Xt>0&&(Nt.y0-=Xt,Nt.y1-=Xt),Ot=Nt.y0})}}function Lt(Mt){Mt.nodes.forEach(function(it){it.sourceLinks.sort(h),it.targetLinks.sort(f)}),Mt.nodes.forEach(function(it){var ht=it.y0,Qe=ht,Ce=it.y1,je=Ce;it.sourceLinks.forEach(function(rt){rt.circular?(rt.y0=Ce-rt.width/2,Ce=Ce-rt.width):(rt.y0=ht+rt.width/2,ht+=rt.width)}),it.targetLinks.forEach(function(rt){rt.circular?(rt.y1=je-rt.width/2,je=je-rt.width):(rt.y1=Qe+rt.width/2,Qe+=rt.width)})})}return Ve}function P(ce,ye,xe){var ke=0;if(xe===null){for(var Ae=[],Oe=0;Oe<ce.links.length;Oe++){var He=ce.links[Oe],Ge=He.source.index,_e=He.target.index;Ae[Ge]||(Ae[Ge]=[]),Ae[_e]||(Ae[_e]=[]),Ae[Ge].indexOf(_e)===-1&&Ae[Ge].push(_e)}var Ie=e(Ae);Ie.sort(function(Re,Ve){return Re.length-Ve.length});var Ye={};for(Oe=0;Oe<Ie.length;Oe++){var qe=Ie[Oe],Ue=qe.slice(-2);Ye[Ue[0]]||(Ye[Ue[0]]={}),Ye[Ue[0]][Ue[1]]=!0}ce.links.forEach(function(Re){var Ve=Re.target.index,dt=Re.source.index;Ve===dt||Ye[dt]&&Ye[dt][Ve]?(Re.circular=!0,Re.circularLinkID=ke,ke=ke+1):Re.circular=!1})}else ce.links.forEach(function(Re){Re.source[xe]<Re.target[xe]?Re.circular=!1:(Re.circular=!0,Re.circularLinkID=ke,ke=ke+1)})}function z(ce,ye){var xe=0,ke=0;ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=xe<ke?"top":"bottom",Ae.circularLinkType=="top"?xe=xe+1:ke=ke+1,ce.nodes.forEach(function(Oe){(x(Oe,ye)==x(Ae.source,ye)||x(Oe,ye)==x(Ae.target,ye))&&(Oe.circularLinkType=Ae.circularLinkType)}))}),ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),fe(Ae,ye)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function I(ce){var ye=Math.abs(ce.y1-ce.y0),xe=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(xe/ye)}function R(ce,ye){return ce.source.column<ye.target.column?!1:!(ce.target.column>ye.source.column)}function D(ce,ye){var xe=0;ce.sourceLinks.forEach(function(Ae){xe=Ae.circular&&!fe(Ae,ye)?xe+1:xe});var ke=0;return ce.targetLinks.forEach(function(Ae){ke=Ae.circular&&!fe(Ae,ye)?ke+1:ke}),xe+ke}function O(ce){var ye=ce.source.sourceLinks,xe=0;ye.forEach(function(Oe){xe=Oe.circular?xe+1:xe});var ke=ce.target.targetLinks,Ae=0;return ke.forEach(function(Oe){Ae=Oe.circular?Ae+1:Ae}),!(xe>1||Ae>1)}function F(ce,ye,xe){return ce.sort(q),ce.forEach(function(ke,Ae){var Oe=0;if(fe(ke,xe)&&O(ke))ke.circularPathData.verticalBuffer=Oe+ke.width/2;else{var He=0;for(He;He<Ae;He++)if(R(ce[Ae],ce[He])){var Ge=ce[He].circularPathData.verticalBuffer+ce[He].width/2+ye;Oe=Ge>Oe?Ge:Oe}ke.circularPathData.verticalBuffer=Oe+ke.width/2}}),ce}function Y(ce,ye,xe,ke){var Ae=5,Oe=l.min(ce.links,function(_e){return _e.source.y0});ce.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var He=ce.links.filter(function(_e){return _e.circularLinkType=="top"});F(He,ye,ke);var Ge=ce.links.filter(function(_e){return _e.circularLinkType=="bottom"});F(Ge,ye,ke),ce.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+L,_e.circularPathData.leftNodeBuffer=Ae,_e.circularPathData.rightNodeBuffer=Ae,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,fe(_e,ke)&&O(_e))_e.circularPathData.leftSmallArcRadius=L+_e.width/2,_e.circularPathData.leftLargeArcRadius=L+_e.width/2,_e.circularPathData.rightSmallArcRadius=L+_e.width/2,_e.circularPathData.rightLargeArcRadius=L+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+c+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-c-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var Ie=_e.source.column,Ye=_e.circularLinkType,qe=ce.links.filter(function(Ve){return Ve.source.column==Ie&&Ve.circularLinkType==Ye});_e.circularLinkType=="bottom"?qe.sort(V):qe.sort($);var Ue=0;qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.leftLargeArcRadius=L+_e.width/2+dt*ye+Ue),Ue=Ue+Ve.width}),Ie=_e.target.column,qe=ce.links.filter(function(Ve){return Ve.target.column==Ie&&Ve.circularLinkType==Ye}),_e.circularLinkType=="bottom"?qe.sort(se):qe.sort(K),Ue=0,qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.rightLargeArcRadius=L+_e.width/2+dt*ye+Ue),Ue=Ue+Ve.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(xe,_e.source.y1,_e.target.y1)+c+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Oe-c-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=X(_e);else{var Re=w.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Dt=Ve.y0;return[dt,Dt]}).target(function(Ve){var dt=Ve.target.x0,Dt=Ve.y1;return[dt,Dt]});_e.path=Re(_e)}})}function X(ce){var ye="";return ce.circularLinkType=="top"?ye="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:ye="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,ye}function q(ce,ye){return ue(ce)==ue(ye)?ce.circularLinkType=="bottom"?V(ce,ye):$(ce,ye):ue(ye)-ue(ce)}function $(ce,ye){return ce.y0-ye.y0}function V(ce,ye){return ye.y0-ce.y0}function K(ce,ye){return ce.y1-ye.y1}function se(ce,ye){return ye.y1-ce.y1}function ue(ce){return ce.target.column-ce.source.column}function oe(ce){return ce.target.x0-ce.source.x1}function U(ce,ye){var xe=I(ce),ke=oe(ye)/Math.tan(xe),Ae=ie(ce)=="up"?ce.y1+ke:ce.y1-ke;return Ae}function G(ce,ye){var xe=I(ce),ke=oe(ye)/Math.tan(xe),Ae=ie(ce)=="up"?ce.y1-ke:ce.y1+ke;return Ae}function re(ce,ye,xe,ke){ce.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Oe=Ae.source.column+1,He=Ae.target.column-1,Ge=1,_e=He-Oe+1;for(Ge=1;Oe<=He;Oe++,Ge++)ce.nodes.forEach(function(Ie){if(Ie.column==Oe){var Ye=Ge/(_e+1),qe=Math.pow(1-Ye,3),Ue=3*Ye*Math.pow(1-Ye,2),Re=3*Math.pow(Ye,2)*(1-Ye),Ve=Math.pow(Ye,3),dt=qe*Ae.y0+Ue*Ae.y0+Re*Ae.y1+Ve*Ae.y1,Dt=dt-Ae.width/2,Gt=dt+Ae.width/2,kt;Dt>Ie.y0&&Dt<Ie.y1?(kt=Ie.y1-Dt+10,kt=Ie.circularLinkType=="bottom"?kt:-kt,Ie=j(Ie,kt,ye,xe),ce.nodes.forEach(function(zt){x(zt,ke)==x(Ie,ke)||zt.column!=Ie.column||ee(Ie,zt)&&j(zt,kt,ye,xe)})):Gt>Ie.y0&&Gt<Ie.y1?(kt=Gt-Ie.y0+10,Ie=j(Ie,kt,ye,xe),ce.nodes.forEach(function(zt){x(zt,ke)==x(Ie,ke)||zt.column!=Ie.column||zt.y0<Ie.y1&&zt.y1>Ie.y1&&j(zt,kt,ye,xe)})):Dt<Ie.y0&&Gt>Ie.y1&&(kt=Gt-Ie.y0+10,Ie=j(Ie,kt,ye,xe),ce.nodes.forEach(function(zt){x(zt,ke)==x(Ie,ke)||zt.column!=Ie.column||zt.y0<Ie.y1&&zt.y1>Ie.y1&&j(zt,kt,ye,xe)}))}})}})}function ee(ce,ye){return ce.y0>ye.y0&&ce.y0<ye.y1||ce.y1>ye.y0&&ce.y1<ye.y1?!0:ce.y0<ye.y0&&ce.y1>ye.y1}function j(ce,ye,xe,ke){return ce.y0+ye>=xe&&ce.y1+ye<=ke&&(ce.y0=ce.y0+ye,ce.y1=ce.y1+ye,ce.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+ye}),ce.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+ye})),ce}function Q(ce,ye,xe,ke){ce.nodes.forEach(function(Ae){ke&&Ae.y+(Ae.y1-Ae.y0)>ye&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-ye));var Oe=ce.links.filter(function(_e){return x(_e.source,xe)==x(Ae,xe)}),He=Oe.length;He>1&&Oe.sort(function(_e,Ie){if(!_e.circular&&!Ie.circular){if(_e.target.column==Ie.target.column)return _e.y1-Ie.y1;if(ae(_e,Ie)){if(_e.target.column>Ie.target.column){var Ye=G(Ie,_e);return _e.y1-Ye}if(Ie.target.column>_e.target.column){var qe=G(_e,Ie);return qe-Ie.y1}}else return _e.y1-Ie.y1}if(_e.circular&&!Ie.circular)return _e.circularLinkType=="top"?-1:1;if(Ie.circular&&!_e.circular)return Ie.circularLinkType=="top"?1:-1;if(_e.circular&&Ie.circular)return _e.circularLinkType===Ie.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===Ie.target.column?_e.target.y1-Ie.target.y1:Ie.target.column-_e.target.column:_e.circularLinkType===Ie.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===Ie.target.column?Ie.target.y1-_e.target.y1:_e.target.column-Ie.target.column:_e.circularLinkType=="top"?-1:1});var Ge=Ae.y0;Oe.forEach(function(_e){_e.y0=Ge+_e.width/2,Ge=Ge+_e.width}),Oe.forEach(function(_e,Ie){if(_e.circularLinkType=="bottom"){var Ye=Ie+1,qe=0;for(Ye;Ye<He;Ye++)qe=qe+Oe[Ye].width;_e.y0=Ae.y1-qe-_e.width/2}})})}function ne(ce,ye,xe){ce.nodes.forEach(function(ke){var Ae=ce.links.filter(function(Ge){return x(Ge.target,xe)==x(ke,xe)}),Oe=Ae.length;Oe>1&&Ae.sort(function(Ge,_e){if(!Ge.circular&&!_e.circular){if(Ge.source.column==_e.source.column)return Ge.y0-_e.y0;if(ae(Ge,_e)){if(_e.source.column<Ge.source.column){var Ie=U(_e,Ge);return Ge.y0-Ie}if(Ge.source.column<_e.source.column){var Ye=U(Ge,_e);return Ye-_e.y0}}else return Ge.y0-_e.y0}if(Ge.circular&&!_e.circular)return Ge.circularLinkType=="top"?-1:1;if(_e.circular&&!Ge.circular)return _e.circularLinkType=="top"?1:-1;if(Ge.circular&&_e.circular)return Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="top"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:Ge.source.column-_e.source.column:Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="bottom"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:_e.source.column-Ge.source.column:Ge.circularLinkType=="top"?-1:1});var He=ke.y0;Ae.forEach(function(Ge){Ge.y1=He+Ge.width/2,He=He+Ge.width}),Ae.forEach(function(Ge,_e){if(Ge.circularLinkType=="bottom"){var Ie=_e+1,Ye=0;for(Ie;Ie<Oe;Ie++)Ye=Ye+Ae[Ie].width;Ge.y1=ke.y1-Ye-Ge.width/2}})})}function ae(ce,ye){return ie(ce)==ie(ye)}function ie(ce){return ce.y0-ce.y1>0?"up":"down"}function fe(ce,ye){return x(ce.source,ye)==x(ce.target,ye)}function me(ce,ye,xe){var ke=ce.nodes,Ae=ce.links,Oe=!1,He=!1;if(Ae.forEach(function(Ue){Ue.circularLinkType=="top"?Oe=!0:Ue.circularLinkType=="bottom"&&(He=!0)}),Oe==!1||He==!1){var Ge=l.min(ke,function(Ue){return Ue.y0}),_e=l.max(ke,function(Ue){return Ue.y1}),Ie=_e-Ge,Ye=xe-ye,qe=Ye/Ie;ke.forEach(function(Ue){var Re=(Ue.y1-Ue.y0)*qe;Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=Ue.y0+Re}),Ae.forEach(function(Ue){Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=(Ue.y1-Ge)*qe,Ue.width=Ue.width*qe})}}d.sankeyCircular=k,d.sankeyCenter=u,d.sankeyLeft=a,d.sankeyRight=n,d.sankeyJustify=r,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array"),t("d3-collection"),t("d3-shape")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3)})(this,function(d,l,b,w){function e(L){return L.target.depth}function o(L){return L.depth}function a(L,S){return S-1-L.height}function n(L,S){return L.sourceLinks.length?L.depth:S-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?l.min(L.sourceLinks,e)-1:0}function u(L){return function(){return L}}function s(L,S){return f(L.source,S.source)||L.index-S.index}function i(L,S){return f(L.target,S.target)||L.index-S.index}function f(L,S){return L.y0-S.y0}function h(L){return L.value}function p(L){return(L.y0+L.y1)/2}function v(L){return p(L.source)*L.value}function y(L){return p(L.target)*L.value}function g(L){return L.index}function A(L){return L.nodes}function m(L){return L.links}function M(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var _=function(){var L=0,S=0,k=1,P=1,z=24,I=8,R=g,D=n,O=A,F=m,Y=32,X=2/3;function q(){var oe={nodes:O.apply(null,arguments),links:F.apply(null,arguments)};return $(oe),V(oe),K(oe),se(oe),ue(oe),oe}q.update=function(oe){return ue(oe),oe},q.nodeId=function(oe){return arguments.length?(R=typeof oe=="function"?oe:u(oe),q):R},q.nodeAlign=function(oe){return arguments.length?(D=typeof oe=="function"?oe:u(oe),q):D},q.nodeWidth=function(oe){return arguments.length?(z=+oe,q):z},q.nodePadding=function(oe){return arguments.length?(I=+oe,q):I},q.nodes=function(oe){return arguments.length?(O=typeof oe=="function"?oe:u(oe),q):O},q.links=function(oe){return arguments.length?(F=typeof oe=="function"?oe:u(oe),q):F},q.size=function(oe){return arguments.length?(L=S=0,k=+oe[0],P=+oe[1],q):[k-L,P-S]},q.extent=function(oe){return arguments.length?(L=+oe[0][0],k=+oe[1][0],S=+oe[0][1],P=+oe[1][1],q):[[L,S],[k,P]]},q.iterations=function(oe){return arguments.length?(Y=+oe,q):Y};function $(oe){oe.nodes.forEach(function(G,re){G.index=re,G.sourceLinks=[],G.targetLinks=[]});var U=b.map(oe.nodes,R);oe.links.forEach(function(G,re){G.index=re;var ee=G.source,j=G.target;typeof ee!="object"&&(ee=G.source=M(U,ee)),typeof j!="object"&&(j=G.target=M(U,j)),ee.sourceLinks.push(G),j.targetLinks.push(G)})}function V(oe){oe.nodes.forEach(function(U){U.value=Math.max(l.sum(U.sourceLinks,h),l.sum(U.targetLinks,h))})}function K(oe){var U,G,re;for(U=oe.nodes,G=[],re=0;U.length;++re,U=G,G=[])U.forEach(function(j){j.depth=re,j.sourceLinks.forEach(function(Q){G.indexOf(Q.target)<0&&G.push(Q.target)})});for(U=oe.nodes,G=[],re=0;U.length;++re,U=G,G=[])U.forEach(function(j){j.height=re,j.targetLinks.forEach(function(Q){G.indexOf(Q.source)<0&&G.push(Q.source)})});var ee=(k-L-z)/(re-1);oe.nodes.forEach(function(j){j.x1=(j.x0=L+Math.max(0,Math.min(re-1,Math.floor(D.call(null,j,re))))*ee)+z})}function se(oe){var U=b.nest().key(function(ae){return ae.x0}).sortKeys(l.ascending).entries(oe.nodes).map(function(ae){return ae.values});ee(),ne();for(var G=1,re=Y;re>0;--re)Q(G*=.99),ne(),j(G),ne();function ee(){var ae=l.max(U,function(me){return me.length}),ie=X*(P-S)/(ae-1);I>ie&&(I=ie);var fe=l.min(U,function(me){return(P-S-(me.length-1)*I)/l.sum(me,h)});U.forEach(function(me){me.forEach(function(ce,ye){ce.y1=(ce.y0=ye)+ce.value*fe})}),oe.links.forEach(function(me){me.width=me.value*fe})}function j(ae){U.forEach(function(ie){ie.forEach(function(fe){if(fe.targetLinks.length){var me=(l.sum(fe.targetLinks,v)/l.sum(fe.targetLinks,h)-p(fe))*ae;fe.y0+=me,fe.y1+=me}})})}function Q(ae){U.slice().reverse().forEach(function(ie){ie.forEach(function(fe){if(fe.sourceLinks.length){var me=(l.sum(fe.sourceLinks,y)/l.sum(fe.sourceLinks,h)-p(fe))*ae;fe.y0+=me,fe.y1+=me}})})}function ne(){U.forEach(function(ae){var ie,fe,me=S,ce=ae.length,ye;for(ae.sort(f),ye=0;ye<ce;++ye)ie=ae[ye],fe=me-ie.y0,fe>0&&(ie.y0+=fe,ie.y1+=fe),me=ie.y1+I;if(fe=me-I-P,fe>0)for(me=ie.y0-=fe,ie.y1-=fe,ye=ce-2;ye>=0;--ye)ie=ae[ye],fe=ie.y1+I-me,fe>0&&(ie.y0-=fe,ie.y1-=fe),me=ie.y0})}}function ue(oe){oe.nodes.forEach(function(U){U.sourceLinks.sort(i),U.targetLinks.sort(s)}),oe.nodes.forEach(function(U){var G=U.y0,re=G;U.sourceLinks.forEach(function(ee){ee.y0=G+ee.width/2,G+=ee.width}),U.targetLinks.forEach(function(ee){ee.y1=re+ee.width/2,re+=ee.width})})}return q};function T(L){return[L.source.x1,L.y0]}function x(L){return[L.target.x0,L.y1]}var c=function(){return w.linkHorizontal().source(T).target(x)};d.sankey=_,d.sankeyCenter=r,d.sankeyLeft=o,d.sankeyRight=a,d.sankeyJustify=n,d.sankeyLinkHorizontal=c,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,B,H){(function(){var d={version:"3.8.0"},l=[].slice,b=function(he){return l.call(he)},w=self.document;function e(he){return he&&(he.ownerDocument||he.document||he).documentElement}function o(he){return he&&(he.ownerDocument&&he.ownerDocument.defaultView||he.document&&he||he.defaultView)}if(w)try{b(w.documentElement.childNodes)[0].nodeType}catch{b=function(Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=Te[Le];return Be}}if(Date.now||(Date.now=function(){return+new Date}),w)try{w.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,n=a.setAttribute,r=a.setAttributeNS,u=this.CSSStyleDeclaration.prototype,s=u.setProperty;a.setAttribute=function(Te,Le){n.call(this,Te,Le+"")},a.setAttributeNS=function(Te,Le,Be){r.call(this,Te,Le,Be+"")},u.setProperty=function(Te,Le,Be){s.call(this,Te,Le+"",Be)}}d.ascending=i;function i(he,Te){return he<Te?-1:he>Te?1:he>=Te?0:NaN}d.descending=function(he,Te){return Te<he?-1:Te>he?1:Te>=he?0:NaN},d.min=function(he,Te){var Le=-1,Be=he.length,Ne,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&Ne>Ke&&(Ne=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&Ne>Ke&&(Ne=Ke)}return Ne},d.max=function(he,Te){var Le=-1,Be=he.length,Ne,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&Ke>Ne&&(Ne=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&Ke>Ne&&(Ne=Ke)}return Ne},d.extent=function(he,Te){var Le=-1,Be=he.length,Ne,Ke,mt;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=mt=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&(Ne>Ke&&(Ne=Ke),mt<Ke&&(mt=Ke))}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=mt=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&(Ne>Ke&&(Ne=Ke),mt<Ke&&(mt=Ke))}return[Ne,mt]};function f(he){return he===null?NaN:+he}function h(he){return!isNaN(he)}d.sum=function(he,Te){var Le=0,Be=he.length,Ne,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)h(Ne=+he[Ke])&&(Le+=Ne);else for(;++Ke<Be;)h(Ne=+Te.call(he,he[Ke],Ke))&&(Le+=Ne);return Le},d.mean=function(he,Te){var Le=0,Be=he.length,Ne,Ke=-1,mt=Be;if(arguments.length===1)for(;++Ke<Be;)h(Ne=f(he[Ke]))?Le+=Ne:--mt;else for(;++Ke<Be;)h(Ne=f(Te.call(he,he[Ke],Ke)))?Le+=Ne:--mt;if(mt)return Le/mt},d.quantile=function(he,Te){var Le=(he.length-1)*Te+1,Be=Math.floor(Le),Ne=+he[Be-1],Ke=Le-Be;return Ke?Ne+Ke*(he[Be]-Ne):Ne},d.median=function(he,Te){var Le=[],Be=he.length,Ne,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)h(Ne=f(he[Ke]))&&Le.push(Ne);else for(;++Ke<Be;)h(Ne=f(Te.call(he,he[Ke],Ke)))&&Le.push(Ne);if(Le.length)return d.quantile(Le.sort(i),.5)},d.variance=function(he,Te){var Le=he.length,Be=0,Ne,Ke,mt=0,vt=-1,Ct=0;if(arguments.length===1)for(;++vt<Le;)h(Ne=f(he[vt]))&&(Ke=Ne-Be,Be+=Ke/++Ct,mt+=Ke*(Ne-Be));else for(;++vt<Le;)h(Ne=f(Te.call(he,he[vt],vt)))&&(Ke=Ne-Be,Be+=Ke/++Ct,mt+=Ke*(Ne-Be));if(Ct>1)return mt/(Ct-1)},d.deviation=function(){var he=d.variance.apply(this,arguments);return he&&Math.sqrt(he)};function p(he){return{left:function(Te,Le,Be,Ne){for(arguments.length<3&&(Be=0),arguments.length<4&&(Ne=Te.length);Be<Ne;){var Ke=Be+Ne>>>1;he(Te[Ke],Le)<0?Be=Ke+1:Ne=Ke}return Be},right:function(Te,Le,Be,Ne){for(arguments.length<3&&(Be=0),arguments.length<4&&(Ne=Te.length);Be<Ne;){var Ke=Be+Ne>>>1;he(Te[Ke],Le)>0?Ne=Ke:Be=Ke+1}return Be}}}var v=p(i);d.bisectLeft=v.left,d.bisect=d.bisectRight=v.right,d.bisector=function(he){return p(he.length===1?function(Te,Le){return i(he(Te),Le)}:he)},d.shuffle=function(he,Te,Le){(Be=arguments.length)<3&&(Le=he.length,Be<2&&(Te=0));for(var Be=Le-Te,Ne,Ke;Be;)Ke=Math.random()*Be--|0,Ne=he[Be+Te],he[Be+Te]=he[Ke+Te],he[Ke+Te]=Ne;return he},d.permute=function(he,Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=he[Te[Le]];return Be},d.pairs=function(he){for(var Te=0,Le=he.length-1,Be=he[0],Ne=new Array(Le<0?0:Le);Te<Le;)Ne[Te]=[Be,Be=he[++Te]];return Ne},d.transpose=function(he){if(!(Ke=he.length))return[];for(var Te=-1,Le=d.min(he,y),Be=new Array(Le);++Te<Le;)for(var Ne=-1,Ke,mt=Be[Te]=new Array(Ke);++Ne<Ke;)mt[Ne]=he[Ne][Te];return Be};function y(he){return he.length}d.zip=function(){return d.transpose(arguments)},d.keys=function(he){var Te=[];for(var Le in he)Te.push(Le);return Te},d.values=function(he){var Te=[];for(var Le in he)Te.push(he[Le]);return Te},d.entries=function(he){var Te=[];for(var Le in he)Te.push({key:Le,value:he[Le]});return Te},d.merge=function(he){for(var Te=he.length,Le,Be=-1,Ne=0,Ke,mt;++Be<Te;)Ne+=he[Be].length;for(Ke=new Array(Ne);--Te>=0;)for(mt=he[Te],Le=mt.length;--Le>=0;)Ke[--Ne]=mt[Le];return Ke};var g=Math.abs;d.range=function(he,Te,Le){if(arguments.length<3&&(Le=1,arguments.length<2&&(Te=he,he=0)),(Te-he)/Le==1/0)throw new Error("infinite range");var Be=[],Ne=A(g(Le)),Ke=-1,mt;if(he*=Ne,Te*=Ne,Le*=Ne,Le<0)for(;(mt=he+Le*++Ke)>Te;)Be.push(mt/Ne);else for(;(mt=he+Le*++Ke)<Te;)Be.push(mt/Ne);return Be};function A(he){for(var Te=1;he*Te%1;)Te*=10;return Te}function m(he,Te){for(var Le in Te)Object.defineProperty(he.prototype,Le,{value:Te[Le],enumerable:!1})}d.map=function(he,Te){var Le=new M;if(he instanceof M)he.forEach(function(vt,Ct){Le.set(vt,Ct)});else if(Array.isArray(he)){var Be=-1,Ne=he.length,Ke;if(arguments.length===1)for(;++Be<Ne;)Le.set(Be,he[Be]);else for(;++Be<Ne;)Le.set(Te.call(he,Ke=he[Be],Be),Ke)}else for(var mt in he)Le.set(mt,he[mt]);return Le};function M(){this._=Object.create(null)}var _="__proto__",T="\0";m(M,{has:L,get:function(he){return this._[x(he)]},set:function(he,Te){return this._[x(he)]=Te},remove:S,keys:k,values:function(){var he=[];for(var Te in this._)he.push(this._[Te]);return he},entries:function(){var he=[];for(var Te in this._)he.push({key:c(Te),value:this._[Te]});return he},size:P,empty:z,forEach:function(he){for(var Te in this._)he.call(this,c(Te),this._[Te])}});function x(he){return(he+="")===_||he[0]===T?T+he:he}function c(he){return(he+="")[0]===T?he.slice(1):he}function L(he){return x(he)in this._}function S(he){return(he=x(he))in this._&&delete this._[he]}function k(){var he=[];for(var Te in this._)he.push(c(Te));return he}function P(){var he=0;for(var Te in this._)++he;return he}function z(){for(var he in this._)return!1;return!0}d.nest=function(){var he={},Te=[],Le=[],Be,Ne;function Ke(vt,Ct,Ut){if(Ut>=Te.length)return Ne?Ne.call(he,Ct):Be?Ct.sort(Be):Ct;for(var Wt=-1,jt=Ct.length,_r=Te[Ut++],Qr,cn,Mr,Ur=new M,Wr;++Wt<jt;)(Wr=Ur.get(Qr=_r(cn=Ct[Wt])))?Wr.push(cn):Ur.set(Qr,[cn]);return vt?(cn=vt(),Mr=function(sn,un){cn.set(sn,Ke(vt,un,Ut))}):(cn={},Mr=function(sn,un){cn[sn]=Ke(vt,un,Ut)}),Ur.forEach(Mr),cn}function mt(vt,Ct){if(Ct>=Te.length)return vt;var Ut=[],Wt=Le[Ct++];return vt.forEach(function(jt,_r){Ut.push({key:jt,values:mt(_r,Ct)})}),Wt?Ut.sort(function(jt,_r){return Wt(jt.key,_r.key)}):Ut}return he.map=function(vt,Ct){return Ke(Ct,vt,0)},he.entries=function(vt){return mt(Ke(d.map,vt,0),0)},he.key=function(vt){return Te.push(vt),he},he.sortKeys=function(vt){return Le[Te.length-1]=vt,he},he.sortValues=function(vt){return Be=vt,he},he.rollup=function(vt){return Ne=vt,he},he},d.set=function(he){var Te=new I;if(he)for(var Le=0,Be=he.length;Le<Be;++Le)Te.add(he[Le]);return Te};function I(){this._=Object.create(null)}m(I,{has:L,add:function(he){return this._[x(he+="")]=!0,he},remove:S,values:k,size:P,empty:z,forEach:function(he){for(var Te in this._)he.call(this,c(Te))}}),d.behavior={};function R(he){return he}d.rebind=function(he,Te){for(var Le=1,Be=arguments.length,Ne;++Le<Be;)he[Ne=arguments[Le]]=D(he,Te,Te[Ne]);return he};function D(he,Te,Le){return function(){var Be=Le.apply(Te,arguments);return Be===Te?he:Be}}function O(he,Te){if(Te in he)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Le=0,Be=F.length;Le<Be;++Le){var Ne=F[Le]+Te;if(Ne in he)return Ne}}var F=["webkit","ms","moz","Moz","o","O"];function Y(){}d.dispatch=function(){for(var he=new X,Te=-1,Le=arguments.length;++Te<Le;)he[arguments[Te]]=q(he);return he};function X(){}X.prototype.on=function(he,Te){var Le=he.indexOf("."),Be="";if(Le>=0&&(Be=he.slice(Le+1),he=he.slice(0,Le)),he)return arguments.length<2?this[he].on(Be):this[he].on(Be,Te);if(arguments.length===2){if(Te==null)for(he in this)this.hasOwnProperty(he)&&this[he].on(Be,null);return this}};function q(he){var Te=[],Le=new M;function Be(){for(var Ne=Te,Ke=-1,mt=Ne.length,vt;++Ke<mt;)(vt=Ne[Ke].on)&&vt.apply(this,arguments);return he}return Be.on=function(Ne,Ke){var mt=Le.get(Ne),vt;return arguments.length<2?mt&&mt.on:(mt&&(mt.on=null,Te=Te.slice(0,vt=Te.indexOf(mt)).concat(Te.slice(vt+1)),Le.remove(Ne)),Ke&&Te.push(Le.set(Ne,{on:Ke})),he)},Be}d.event=null;function $(){d.event.preventDefault()}function V(){for(var he=d.event,Te;Te=he.sourceEvent;)he=Te;return he}function K(he){for(var Te=new X,Le=0,Be=arguments.length;++Le<Be;)Te[arguments[Le]]=q(Te);return Te.of=function(Ne,Ke){return function(mt){try{var vt=mt.sourceEvent=d.event;mt.target=he,d.event=mt,Te[mt.type].apply(Ne,Ke)}finally{d.event=vt}}},Te}d.requote=function(he){return he.replace(se,"\\$&")};var se=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ue=function(he,Te){for(var Le in Te)he[Le]=Te[Le]};function oe(he){return ue(he,ee),he}var U=function(he,Te){return Te.querySelector(he)},G=function(he,Te){return Te.querySelectorAll(he)},re=function(he,Te){var Le=he.matches||he[O(he,"matchesSelector")];return re=function(Be,Ne){return Le.call(Be,Ne)},re(he,Te)};typeof Sizzle=="function"&&(U=function(he,Te){return Sizzle(he,Te)[0]||null},G=Sizzle,re=Sizzle.matchesSelector),d.selection=function(){return d.select(w.documentElement)};var ee=d.selection.prototype=[];ee.select=function(he){var Te=[],Le,Be,Ne,Ke;he=j(he);for(var mt=-1,vt=this.length;++mt<vt;){Te.push(Le=[]),Le.parentNode=(Ne=this[mt]).parentNode;for(var Ct=-1,Ut=Ne.length;++Ct<Ut;)(Ke=Ne[Ct])?(Le.push(Be=he.call(Ke,Ke.__data__,Ct,mt)),Be&&"__data__"in Ke&&(Be.__data__=Ke.__data__)):Le.push(null)}return oe(Te)};function j(he){return typeof he=="function"?he:function(){return U(he,this)}}ee.selectAll=function(he){var Te=[],Le,Be;he=Q(he);for(var Ne=-1,Ke=this.length;++Ne<Ke;)for(var mt=this[Ne],vt=-1,Ct=mt.length;++vt<Ct;)(Be=mt[vt])&&(Te.push(Le=b(he.call(Be,Be.__data__,vt,Ne))),Le.parentNode=Be);return oe(Te)};function Q(he){return typeof he=="function"?he:function(){return G(he,this)}}var ne="http://www.w3.org/1999/xhtml",ae={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d.ns={prefix:ae,qualify:function(he){var Te=he.indexOf(":"),Le=he;return Te>=0&&(Le=he.slice(0,Te))!=="xmlns"&&(he=he.slice(Te+1)),ae.hasOwnProperty(Le)?{space:ae[Le],local:he}:he}},ee.attr=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node();return he=d.ns.qualify(he),he.local?Le.getAttributeNS(he.space,he.local):Le.getAttribute(he)}for(Te in he)this.each(ie(Te,he[Te]));return this}return this.each(ie(he,Te))};function ie(he,Te){he=d.ns.qualify(he);function Le(){this.removeAttribute(he)}function Be(){this.removeAttributeNS(he.space,he.local)}function Ne(){this.setAttribute(he,Te)}function Ke(){this.setAttributeNS(he.space,he.local,Te)}function mt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttribute(he):this.setAttribute(he,Ct)}function vt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttributeNS(he.space,he.local):this.setAttributeNS(he.space,he.local,Ct)}return Te==null?he.local?Be:Le:typeof Te=="function"?he.local?vt:mt:he.local?Ke:Ne}function fe(he){return he.trim().replace(/\s+/g," ")}ee.classed=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node(),Be=(he=ce(he)).length,Ne=-1;if(Te=Le.classList){for(;++Ne<Be;)if(!Te.contains(he[Ne]))return!1}else for(Te=Le.getAttribute("class");++Ne<Be;)if(!me(he[Ne]).test(Te))return!1;return!0}for(Te in he)this.each(ye(Te,he[Te]));return this}return this.each(ye(he,Te))};function me(he){return new RegExp("(?:^|\\s+)"+d.requote(he)+"(?:\\s+|$)","g")}function ce(he){return(he+"").trim().split(/^|\s+/)}function ye(he,Te){he=ce(he).map(xe);var Le=he.length;function Be(){for(var Ke=-1;++Ke<Le;)he[Ke](this,Te)}function Ne(){for(var Ke=-1,mt=Te.apply(this,arguments);++Ke<Le;)he[Ke](this,mt)}return typeof Te=="function"?Ne:Be}function xe(he){var Te=me(he);return function(Le,Be){if(Ne=Le.classList)return Be?Ne.add(he):Ne.remove(he);var Ne=Le.getAttribute("class")||"";Be?(Te.lastIndex=0,Te.test(Ne)||Le.setAttribute("class",fe(Ne+" "+he))):Le.setAttribute("class",fe(Ne.replace(Te," ")))}}ee.style=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te="");for(Le in he)this.each(ke(Le,he[Le],Te));return this}if(Be<2){var Ne=this.node();return o(Ne).getComputedStyle(Ne,null).getPropertyValue(he)}Le=""}return this.each(ke(he,Te,Le))};function ke(he,Te,Le){function Be(){this.style.removeProperty(he)}function Ne(){this.style.setProperty(he,Te,Le)}function Ke(){var mt=Te.apply(this,arguments);mt==null?this.style.removeProperty(he):this.style.setProperty(he,mt,Le)}return Te==null?Be:typeof Te=="function"?Ke:Ne}ee.property=function(he,Te){if(arguments.length<2){if(typeof he=="string")return this.node()[he];for(Te in he)this.each(Ae(Te,he[Te]));return this}return this.each(Ae(he,Te))};function Ae(he,Te){function Le(){delete this[he]}function Be(){this[he]=Te}function Ne(){var Ke=Te.apply(this,arguments);Ke==null?delete this[he]:this[he]=Ke}return Te==null?Le:typeof Te=="function"?Ne:Be}ee.text=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.textContent=Te==null?"":Te}:he==null?function(){this.textContent=""}:function(){this.textContent=he}):this.node().textContent},ee.html=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.innerHTML=Te==null?"":Te}:he==null?function(){this.innerHTML=""}:function(){this.innerHTML=he}):this.node().innerHTML},ee.append=function(he){return he=Oe(he),this.select(function(){return this.appendChild(he.apply(this,arguments))})};function Oe(he){function Te(){var Be=this.ownerDocument,Ne=this.namespaceURI;return Ne===ne&&Be.documentElement.namespaceURI===ne?Be.createElement(he):Be.createElementNS(Ne,he)}function Le(){return this.ownerDocument.createElementNS(he.space,he.local)}return typeof he=="function"?he:(he=d.ns.qualify(he)).local?Le:Te}ee.insert=function(he,Te){return he=Oe(he),Te=j(Te),this.select(function(){return this.insertBefore(he.apply(this,arguments),Te.apply(this,arguments)||null)})},ee.remove=function(){return this.each(He)};function He(){var he=this.parentNode;he&&he.removeChild(this)}ee.data=function(he,Te){var Le=-1,Be=this.length,Ne,Ke;if(!arguments.length){for(he=new Array(Be=(Ne=this[0]).length);++Le<Be;)(Ke=Ne[Le])&&(he[Le]=Ke.__data__);return he}function mt(Wt,jt){var _r,Qr=Wt.length,cn=jt.length,Mr=Math.min(Qr,cn),Ur=new Array(cn),Wr=new Array(cn),sn=new Array(Qr),un,Zr;if(Te){var Gn=new M,na=new Array(Qr),wa;for(_r=-1;++_r<Qr;)(un=Wt[_r])&&(Gn.has(wa=Te.call(un,un.__data__,_r))?sn[_r]=un:Gn.set(wa,un),na[_r]=wa);for(_r=-1;++_r<cn;)(un=Gn.get(wa=Te.call(jt,Zr=jt[_r],_r)))?un!==!0&&(Ur[_r]=un,un.__data__=Zr):Wr[_r]=Ge(Zr),Gn.set(wa,!0);for(_r=-1;++_r<Qr;)_r in na&&Gn.get(na[_r])!==!0&&(sn[_r]=Wt[_r])}else{for(_r=-1;++_r<Mr;)un=Wt[_r],Zr=jt[_r],un?(un.__data__=Zr,Ur[_r]=un):Wr[_r]=Ge(Zr);for(;_r<cn;++_r)Wr[_r]=Ge(jt[_r]);for(;_r<Qr;++_r)sn[_r]=Wt[_r]}Wr.update=Ur,Wr.parentNode=Ur.parentNode=sn.parentNode=Wt.parentNode,vt.push(Wr),Ct.push(Ur),Ut.push(sn)}var vt=qe([]),Ct=oe([]),Ut=oe([]);if(typeof he=="function")for(;++Le<Be;)mt(Ne=this[Le],he.call(Ne,Ne.parentNode.__data__,Le));else for(;++Le<Be;)mt(Ne=this[Le],he);return Ct.enter=function(){return vt},Ct.exit=function(){return Ut},Ct};function Ge(he){return{__data__:he}}ee.datum=function(he){return arguments.length?this.property("__data__",he):this.property("__data__")},ee.filter=function(he){var Te=[],Le,Be,Ne;typeof he!="function"&&(he=_e(he));for(var Ke=0,mt=this.length;Ke<mt;Ke++){Te.push(Le=[]),Le.parentNode=(Be=this[Ke]).parentNode;for(var vt=0,Ct=Be.length;vt<Ct;vt++)(Ne=Be[vt])&&he.call(Ne,Ne.__data__,vt,Ke)&&Le.push(Ne)}return oe(Te)};function _e(he){return function(){return re(this,he)}}ee.order=function(){for(var he=-1,Te=this.length;++he<Te;)for(var Le=this[he],Be=Le.length-1,Ne=Le[Be],Ke;--Be>=0;)(Ke=Le[Be])&&(Ne&&Ne!==Ke.nextSibling&&Ne.parentNode.insertBefore(Ke,Ne),Ne=Ke);return this},ee.sort=function(he){he=Ie.apply(this,arguments);for(var Te=-1,Le=this.length;++Te<Le;)this[Te].sort(he);return this.order()};function Ie(he){return arguments.length||(he=i),function(Te,Le){return Te&&Le?he(Te.__data__,Le.__data__):!Te-!Le}}ee.each=function(he){return Ye(this,function(Te,Le,Be){he.call(Te,Te.__data__,Le,Be)})};function Ye(he,Te){for(var Le=0,Be=he.length;Le<Be;Le++)for(var Ne=he[Le],Ke=0,mt=Ne.length,vt;Ke<mt;Ke++)(vt=Ne[Ke])&&Te(vt,Ke,Le);return he}ee.call=function(he){var Te=b(arguments);return he.apply(Te[0]=this,Te),this},ee.empty=function(){return!this.node()},ee.node=function(){for(var he=0,Te=this.length;he<Te;he++)for(var Le=this[he],Be=0,Ne=Le.length;Be<Ne;Be++){var Ke=Le[Be];if(Ke)return Ke}return null},ee.size=function(){var he=0;return Ye(this,function(){++he}),he};function qe(he){return ue(he,Ue),he}var Ue=[];d.selection.enter=qe,d.selection.enter.prototype=Ue,Ue.append=ee.append,Ue.empty=ee.empty,Ue.node=ee.node,Ue.call=ee.call,Ue.size=ee.size,Ue.select=function(he){for(var Te=[],Le,Be,Ne,Ke,mt,vt=-1,Ct=this.length;++vt<Ct;){Ne=(Ke=this[vt]).update,Te.push(Le=[]),Le.parentNode=Ke.parentNode;for(var Ut=-1,Wt=Ke.length;++Ut<Wt;)(mt=Ke[Ut])?(Le.push(Ne[Ut]=Be=he.call(Ke.parentNode,mt.__data__,Ut,vt)),Be.__data__=mt.__data__):Le.push(null)}return oe(Te)},Ue.insert=function(he,Te){return arguments.length<2&&(Te=Re(this)),ee.insert.call(this,he,Te)};function Re(he){var Te,Le;return function(Be,Ne,Ke){var mt=he[Ke].update,vt=mt.length,Ct;for(Ke!=Le&&(Le=Ke,Te=0),Ne>=Te&&(Te=Ne+1);!(Ct=mt[Te])&&++Te<vt;);return Ct}}d.select=function(he){var Te;return typeof he=="string"?(Te=[U(he,w)],Te.parentNode=w.documentElement):(Te=[he],Te.parentNode=e(he)),oe([Te])},d.selectAll=function(he){var Te;return typeof he=="string"?(Te=b(G(he,w)),Te.parentNode=w.documentElement):(Te=b(he),Te.parentNode=null),oe([Te])},ee.on=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te=!1);for(Le in he)this.each(Ve(Le,he[Le],Te));return this}if(Be<2)return(Be=this.node()["__on"+he])&&Be._;Le=!1}return this.each(Ve(he,Te,Le))};function Ve(he,Te,Le){var Be="__on"+he,Ne=he.indexOf("."),Ke=Dt;Ne>0&&(he=he.slice(0,Ne));var mt=dt.get(he);mt&&(he=mt,Ke=Gt);function vt(){var Wt=this[Be];Wt&&(this.removeEventListener(he,Wt,Wt.$),delete this[Be])}function Ct(){var Wt=Ke(Te,b(arguments));vt.call(this),this.addEventListener(he,this[Be]=Wt,Wt.$=Le),Wt._=Te}function Ut(){var Wt=new RegExp("^__on([^.]+)"+d.requote(he)+"$"),jt;for(var _r in this)if(jt=_r.match(Wt)){var Qr=this[_r];this.removeEventListener(jt[1],Qr,Qr.$),delete this[_r]}}return Ne?Te?Ct:vt:Te?Y:Ut}var dt=d.map({mouseenter:"mouseover",mouseleave:"mouseout"});w&&dt.forEach(function(he){"on"+he in w&&dt.remove(he)});function Dt(he,Te){return function(Le){var Be=d.event;d.event=Le,Te[0]=this.__data__;try{he.apply(this,Te)}finally{d.event=Be}}}function Gt(he,Te){var Le=Dt(he,Te);return function(Be){var Ne=this,Ke=Be.relatedTarget;(!Ke||Ke!==Ne&&!(Ke.compareDocumentPosition(Ne)&8))&&Le.call(Ne,Be)}}var kt,zt=0;function Bt(he){var Te=".dragsuppress-"+ ++zt,Le="click"+Te,Be=d.select(o(he)).on("touchmove"+Te,$).on("dragstart"+Te,$).on("selectstart"+Te,$);if(kt==null&&(kt="onselectstart"in he?!1:O(he.style,"userSelect")),kt){var Ne=e(he).style,Ke=Ne[kt];Ne[kt]="none"}return function(mt){if(Be.on(Te,null),kt&&(Ne[kt]=Ke),mt){var vt=function(){Be.on(Le,null)};Be.on(Le,function(){$(),vt()},!0),setTimeout(vt,0)}}}d.mouse=function(he){return Mt(he,V())};var Lt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mt(he,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Le=he.ownerSVGElement||he;if(Le.createSVGPoint){var Be=Le.createSVGPoint();if(Lt<0){var Ne=o(he);if(Ne.scrollX||Ne.scrollY){Le=d.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ke=Le[0][0].getScreenCTM();Lt=!(Ke.f||Ke.e),Le.remove()}}return Lt?(Be.x=Te.pageX,Be.y=Te.pageY):(Be.x=Te.clientX,Be.y=Te.clientY),Be=Be.matrixTransform(he.getScreenCTM().inverse()),[Be.x,Be.y]}var mt=he.getBoundingClientRect();return[Te.clientX-mt.left-he.clientLeft,Te.clientY-mt.top-he.clientTop]}d.touch=function(he,Te,Le){if(arguments.length<3&&(Le=Te,Te=V().changedTouches),Te){for(var Be=0,Ne=Te.length,Ke;Be<Ne;++Be)if((Ke=Te[Be]).identifier===Le)return Mt(he,Ke)}},d.behavior.drag=function(){var he=K(Ne,"drag","dragstart","dragend"),Te=null,Le=Ke(Y,d.mouse,o,"mousemove","mouseup"),Be=Ke(it,d.touch,R,"touchmove","touchend");function Ne(){this.on("mousedown.drag",Le).on("touchstart.drag",Be)}function Ke(mt,vt,Ct,Ut,Wt){return function(){var jt=this,_r=d.event.target.correspondingElement||d.event.target,Qr=jt.parentNode,cn=he.of(jt,arguments),Mr=0,Ur=mt(),Wr=".drag"+(Ur==null?"":"-"+Ur),sn,un=d.select(Ct(_r)).on(Ut+Wr,na).on(Wt+Wr,wa),Zr=Bt(_r),Gn=vt(Qr,Ur);Te?(sn=Te.apply(jt,arguments),sn=[sn.x-Gn[0],sn.y-Gn[1]]):sn=[0,0],cn({type:"dragstart"});function na(){var oa=vt(Qr,Ur),Ea,fa;!oa||(Ea=oa[0]-Gn[0],fa=oa[1]-Gn[1],Mr|=Ea|fa,Gn=oa,cn({type:"drag",x:oa[0]+sn[0],y:oa[1]+sn[1],dx:Ea,dy:fa}))}function wa(){!vt(Qr,Ur)||(un.on(Ut+Wr,null).on(Wt+Wr,null),Zr(Mr),cn({type:"dragend"}))}}}return Ne.origin=function(mt){return arguments.length?(Te=mt,Ne):Te},d.rebind(Ne,he,"on")};function it(){return d.event.changedTouches[0].identifier}d.touches=function(he,Te){return arguments.length<2&&(Te=V().touches),Te?b(Te).map(function(Le){var Be=Mt(he,Le);return Be.identifier=Le.identifier,Be}):[]};var ht=1e-6,Qe=ht*ht,Ce=Math.PI,je=2*Ce,rt=je-ht,ut=Ce/2,Pt=Ce/180,St=180/Ce;function Nt(he,Te,Le){return(Te[0]-he[0])*(Le[1]-he[1])-(Te[1]-he[1])*(Le[0]-he[0])}function Xt(he){return he>1?ut:he<-1?-ut:Math.asin(he)}function Ot(he){return((he=Math.exp(he))-1/he)/2}function Kt(he){return((he=Math.exp(he))+1/he)/2}function Je(he){return((he=Math.exp(2*he))-1)/(he+1)}var gt=Math.SQRT2,Et=2,rr=4;d.interpolateZoom=function(he,Te){var Le=he[0],Be=he[1],Ne=he[2],Ke=Te[0],mt=Te[1],vt=Te[2],Ct=Ke-Le,Ut=mt-Be,Wt=Ct*Ct+Ut*Ut,jt,_r;if(Wt<Qe)_r=Math.log(vt/Ne)/gt,jt=function(sn){return[Le+sn*Ct,Be+sn*Ut,Ne*Math.exp(gt*sn*_r)]};else{var Qr=Math.sqrt(Wt),cn=(vt*vt-Ne*Ne+rr*Wt)/(2*Ne*Et*Qr),Mr=(vt*vt-Ne*Ne-rr*Wt)/(2*vt*Et*Qr),Ur=Math.log(Math.sqrt(cn*cn+1)-cn),Wr=Math.log(Math.sqrt(Mr*Mr+1)-Mr);_r=(Wr-Ur)/gt,jt=function(sn){var un=sn*_r,Zr=Kt(Ur),Gn=Ne/(Et*Qr)*(Zr*Je(gt*un+Ur)-Ot(Ur));return[Le+Gn*Ct,Be+Gn*Ut,Ne*Zr/Kt(gt*un+Ur)]}}return jt.duration=_r*1e3,jt},d.behavior.zoom=function(){var he={x:0,y:0,k:1},Te,Le,Be,Ne=[960,500],Ke=vr,mt=250,vt=0,Ct="mousedown.zoom",Ut="mousemove.zoom",Wt="mouseup.zoom",jt,_r="touchstart.zoom",Qr,cn=K(un,"zoomstart","zoom","zoomend"),Mr,Ur,Wr,sn;dr||(dr="onwheel"in w?(or=function(){return-d.event.deltaY*(d.event.deltaMode?120:1)},"wheel"):"onmousewheel"in w?(or=function(){return d.event.wheelDelta},"mousewheel"):(or=function(){return-d.event.detail},"MozMousePixelScroll"));function un(ha){ha.on(Ct,$a).on(dr+".zoom",ho).on("dblclick.zoom",Ii).on(_r,gi)}un.event=function(ha){ha.each(function(){var ai=cn.of(this,arguments),Xa=he;Wa?d.select(this).transition().each("start.zoom",function(){he=this.__chart__||{x:0,y:0,k:1},fa(ai)}).tween("zoom:zoom",function(){var Mi=Ne[0],si=Ne[1],so=Le?Le[0]:Mi/2,$i=Le?Le[1]:si/2,yo=d.interpolateZoom([(so-he.x)/he.k,($i-he.y)/he.k,Mi/he.k],[(so-Xa.x)/Xa.k,($i-Xa.y)/Xa.k,Mi/Xa.k]);return function(Zo){var Vo=yo(Zo),Ko=Mi/Vo[2];this.__chart__=he={x:so-Vo[0]*Ko,y:$i-Vo[1]*Ko,k:Ko},Va(ai)}}).each("interrupt.zoom",function(){Ra(ai)}).each("end.zoom",function(){Ra(ai)}):(this.__chart__=he,fa(ai),Va(ai),Ra(ai))})},un.translate=function(ha){return arguments.length?(he={x:+ha[0],y:+ha[1],k:he.k},Ea(),un):[he.x,he.y]},un.scale=function(ha){return arguments.length?(he={x:he.x,y:he.y,k:null},na(+ha),Ea(),un):he.k},un.scaleExtent=function(ha){return arguments.length?(Ke=ha==null?vr:[+ha[0],+ha[1]],un):Ke},un.center=function(ha){return arguments.length?(Be=ha&&[+ha[0],+ha[1]],un):Be},un.size=function(ha){return arguments.length?(Ne=ha&&[+ha[0],+ha[1]],un):Ne},un.duration=function(ha){return arguments.length?(mt=+ha,un):mt},un.x=function(ha){return arguments.length?(Ur=ha,Mr=ha.copy(),he={x:0,y:0,k:1},un):Ur},un.y=function(ha){return arguments.length?(sn=ha,Wr=ha.copy(),he={x:0,y:0,k:1},un):sn};function Zr(ha){return[(ha[0]-he.x)/he.k,(ha[1]-he.y)/he.k]}function Gn(ha){return[ha[0]*he.k+he.x,ha[1]*he.k+he.y]}function na(ha){he.k=Math.max(Ke[0],Math.min(Ke[1],ha))}function wa(ha,ai){ai=Gn(ai),he.x+=ha[0]-ai[0],he.y+=ha[1]-ai[1]}function oa(ha,ai,Xa,Mi){ha.__chart__={x:he.x,y:he.y,k:he.k},na(Math.pow(2,Mi)),wa(Le=ai,Xa),ha=d.select(ha),mt>0&&(ha=ha.transition().duration(mt)),ha.call(un.event)}function Ea(){Ur&&Ur.domain(Mr.range().map(function(ha){return(ha-he.x)/he.k}).map(Mr.invert)),sn&&sn.domain(Wr.range().map(function(ha){return(ha-he.y)/he.k}).map(Wr.invert))}function fa(ha){vt++||ha({type:"zoomstart"})}function Va(ha){Ea(),ha({type:"zoom",scale:he.k,translate:[he.x,he.y]})}function Ra(ha){--vt||(ha({type:"zoomend"}),Le=null)}function $a(){var ha=this,ai=cn.of(ha,arguments),Xa=0,Mi=d.select(o(ha)).on(Ut,$i).on(Wt,yo),si=Zr(d.mouse(ha)),so=Bt(ha);Pn.call(ha),fa(ai);function $i(){Xa=1,wa(d.mouse(ha),si),Va(ai)}function yo(){Mi.on(Ut,null).on(Wt,null),so(Xa),Ra(ai)}}function gi(){var ha=this,ai=cn.of(ha,arguments),Xa={},Mi=0,si,so=".zoom-"+d.event.changedTouches[0].identifier,$i="touchmove"+so,yo="touchend"+so,Zo=[],Vo=d.select(ha),Ko=Bt(ha);Ni(),fa(ai),Vo.on(Ct,null).on(_r,Ni);function Gi(){var bo=d.touches(ha);return si=he.k,bo.forEach(function(ro){ro.identifier in Xa&&(Xa[ro.identifier]=Zr(ro))}),bo}function Ni(){var bo=d.event.target;d.select(bo).on($i,Fa).on(yo,ja),Zo.push(bo);for(var ro=d.event.changedTouches,zo=0,Xi=ro.length;zo<Xi;++zo)Xa[ro[zo].identifier]=null;var Jo=Gi(),ks=Date.now();if(Jo.length===1){if(ks-Qr<500){var vu=Jo[0];oa(ha,vu,Xa[vu.identifier],Math.floor(Math.log(he.k)/Math.LN2)+1),$()}Qr=ks}else if(Jo.length>1){var vu=Jo[0],ji=Jo[1],Qf=vu[0]-ji[0],Zl=vu[1]-ji[1];Mi=Qf*Qf+Zl*Zl}}function Fa(){var bo=d.touches(ha),ro,zo,Xi,Jo;Pn.call(ha);for(var ks=0,vu=bo.length;ks<vu;++ks,Jo=null)if(Xi=bo[ks],Jo=Xa[Xi.identifier]){if(zo)break;ro=Xi,zo=Jo}if(Jo){var ji=(ji=Xi[0]-ro[0])*ji+(ji=Xi[1]-ro[1])*ji,Qf=Mi&&Math.sqrt(ji/Mi);ro=[(ro[0]+Xi[0])/2,(ro[1]+Xi[1])/2],zo=[(zo[0]+Jo[0])/2,(zo[1]+Jo[1])/2],na(Qf*si)}Qr=null,wa(ro,zo),Va(ai)}function ja(){if(d.event.touches.length){for(var bo=d.event.changedTouches,ro=0,zo=bo.length;ro<zo;++ro)delete Xa[bo[ro].identifier];for(var Xi in Xa)return void Gi()}d.selectAll(Zo).on(so,null),Vo.on(Ct,$a).on(_r,gi),Ko(),Ra(ai)}}function ho(){var ha=cn.of(this,arguments);jt?clearTimeout(jt):(Pn.call(this),Te=Zr(Le=Be||d.mouse(this)),fa(ha)),jt=setTimeout(function(){jt=null,Ra(ha)},50),$(),na(Math.pow(2,or()*.002)*he.k),wa(Le,Te),Va(ha)}function Ii(){var ha=d.mouse(this),ai=Math.log(he.k)/Math.LN2;oa(this,ha,Zr(ha),d.event.shiftKey?Math.ceil(ai)-1:Math.floor(ai)+1)}return d.rebind(un,cn,"on")};var vr=[0,1/0],or,dr;d.color=Lr;function Lr(){}Lr.prototype.toString=function(){return this.rgb()+""},d.hsl=kr;function kr(he,Te,Le){return this instanceof kr?(this.h=+he,this.s=+Te,void(this.l=+Le)):arguments.length<2?he instanceof kr?new kr(he.h,he.s,he.l):yn(""+he,Gr,kr):new kr(he,Te,Le)}var tr=kr.prototype=new Lr;tr.brighter=function(he){return he=Math.pow(.7,arguments.length?he:1),new kr(this.h,this.s,this.l/he)},tr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new kr(this.h,this.s,he*this.l)},tr.rgb=function(){return Or(this.h,this.s,this.l)};function Or(he,Te,Le){var Be,Ne;he=isNaN(he)?0:(he%=360)<0?he+360:he,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Le=Le<0?0:Le>1?1:Le,Ne=Le<=.5?Le*(1+Te):Le+Te-Le*Te,Be=2*Le-Ne;function Ke(vt){return vt>360?vt-=360:vt<0&&(vt+=360),vt<60?Be+(Ne-Be)*vt/60:vt<180?Ne:vt<240?Be+(Ne-Be)*(240-vt)/60:Be}function mt(vt){return Math.round(Ke(vt)*255)}return new yr(mt(he+120),mt(he),mt(he-120))}d.hcl=et;function et(he,Te,Le){return this instanceof et?(this.h=+he,this.c=+Te,void(this.l=+Le)):arguments.length<2?he instanceof et?new et(he.h,he.c,he.l):he instanceof De?Yt(he.l,he.a,he.b):Yt((he=Ar((he=d.rgb(he)).r,he.g,he.b)).l,he.a,he.b):new et(he,Te,Le)}var we=et.prototype=new Lr;we.brighter=function(he){return new et(this.h,this.c,Math.min(100,this.l+Xe*(arguments.length?he:1)))},we.darker=function(he){return new et(this.h,this.c,Math.max(0,this.l-Xe*(arguments.length?he:1)))},we.rgb=function(){return Se(this.h,this.c,this.l).rgb()};function Se(he,Te,Le){return isNaN(he)&&(he=0),isNaN(Te)&&(Te=0),new De(Le,Math.cos(he*=Pt)*Te,Math.sin(he)*Te)}d.lab=De;function De(he,Te,Le){return this instanceof De?(this.l=+he,this.a=+Te,void(this.b=+Le)):arguments.length<2?he instanceof De?new De(he.l,he.a,he.b):he instanceof et?Se(he.h,he.c,he.l):Ar((he=yr(he)).r,he.g,he.b):new De(he,Te,Le)}var Xe=18,$e=.95047,ot=1,st=1.08883,pt=De.prototype=new Lr;pt.brighter=function(he){return new De(Math.min(100,this.l+Xe*(arguments.length?he:1)),this.a,this.b)},pt.darker=function(he){return new De(Math.max(0,this.l-Xe*(arguments.length?he:1)),this.a,this.b)},pt.rgb=function(){return wt(this.l,this.a,this.b)};function wt(he,Te,Le){var Be=(he+16)/116,Ne=Be+Te/500,Ke=Be-Le/200;return Ne=mr(Ne)*$e,Be=mr(Be)*ot,Ke=mr(Ke)*st,new yr(Tr(3.2404542*Ne-1.5371385*Be-.4985314*Ke),Tr(-.969266*Ne+1.8760108*Be+.041556*Ke),Tr(.0556434*Ne-.2040259*Be+1.0572252*Ke))}function Yt(he,Te,Le){return he>0?new et(Math.atan2(Le,Te)*St,Math.sqrt(Te*Te+Le*Le),he):new et(NaN,NaN,he)}function mr(he){return he>.206893034?he*he*he:(he-4/29)/7.787037}function xr(he){return he>.008856?Math.pow(he,1/3):7.787037*he+4/29}function Tr(he){return Math.round(255*(he<=.00304?12.92*he:1.055*Math.pow(he,1/2.4)-.055))}d.rgb=yr;function yr(he,Te,Le){return this instanceof yr?(this.r=~~he,this.g=~~Te,void(this.b=~~Le)):arguments.length<2?he instanceof yr?new yr(he.r,he.g,he.b):yn(""+he,yr,Or):new yr(he,Te,Le)}function Dr(he){return new yr(he>>16,he>>8&255,he&255)}function tn(he){return Dr(he)+""}var wr=yr.prototype=new Lr;wr.brighter=function(he){he=Math.pow(.7,arguments.length?he:1);var Te=this.r,Le=this.g,Be=this.b,Ne=30;return!Te&&!Le&&!Be?new yr(Ne,Ne,Ne):(Te&&Te<Ne&&(Te=Ne),Le&&Le<Ne&&(Le=Ne),Be&&Be<Ne&&(Be=Ne),new yr(Math.min(255,Te/he),Math.min(255,Le/he),Math.min(255,Be/he)))},wr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new yr(he*this.r,he*this.g,he*this.b)},wr.hsl=function(){return Gr(this.r,this.g,this.b)},wr.toString=function(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)};function gr(he){return he<16?"0"+Math.max(0,he).toString(16):Math.min(255,he).toString(16)}function yn(he,Te,Le){var Be=0,Ne=0,Ke=0,mt,vt,Ct;if(mt=/([a-z]+)\((.*)\)/.exec(he=he.toLowerCase()),mt)switch(vt=mt[2].split(","),mt[1]){case"hsl":return Le(parseFloat(vt[0]),parseFloat(vt[1])/100,parseFloat(vt[2])/100);case"rgb":return Te(fn(vt[0]),fn(vt[1]),fn(vt[2]))}return(Ct=Xr.get(he))?Te(Ct.r,Ct.g,Ct.b):(he!=null&&he.charAt(0)==="#"&&!isNaN(Ct=parseInt(he.slice(1),16))&&(he.length===4?(Be=(Ct&3840)>>4,Be=Be>>4|Be,Ne=Ct&240,Ne=Ne>>4|Ne,Ke=Ct&15,Ke=Ke<<4|Ke):he.length===7&&(Be=(Ct&16711680)>>16,Ne=(Ct&65280)>>8,Ke=Ct&255)),Te(Be,Ne,Ke))}function Gr(he,Te,Le){var Be=Math.min(he/=255,Te/=255,Le/=255),Ne=Math.max(he,Te,Le),Ke=Ne-Be,mt,vt,Ct=(Ne+Be)/2;return Ke?(vt=Ct<.5?Ke/(Ne+Be):Ke/(2-Ne-Be),he==Ne?mt=(Te-Le)/Ke+(Te<Le?6:0):Te==Ne?mt=(Le-he)/Ke+2:mt=(he-Te)/Ke+4,mt*=60):(mt=NaN,vt=Ct>0&&Ct<1?0:mt),new kr(mt,vt,Ct)}function Ar(he,Te,Le){he=nn(he),Te=nn(Te),Le=nn(Le);var Be=xr((.4124564*he+.3575761*Te+.1804375*Le)/$e),Ne=xr((.2126729*he+.7151522*Te+.072175*Le)/ot),Ke=xr((.0193339*he+.119192*Te+.9503041*Le)/st);return De(116*Ne-16,500*(Be-Ne),200*(Ne-Ke))}function nn(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function fn(he){var Te=parseFloat(he);return he.charAt(he.length-1)==="%"?Math.round(Te*2.55):Te}var Xr=d.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Xr.forEach(function(he,Te){Xr.set(he,Dr(Te))});function at(he){return typeof he=="function"?he:function(){return he}}d.functor=at,d.xhr=Ft(R);function Ft(he){return function(Te,Le,Be){return arguments.length===2&&typeof Le=="function"&&(Be=Le,Le=null),er(Te,Le,he,Be)}}function er(he,Te,Le,Be){var Ne={},Ke=d.dispatch("beforesend","progress","load","error"),mt={},vt=new XMLHttpRequest,Ct=null;self.XDomainRequest&&!("withCredentials"in vt)&&/^(http(s)?:)?\/\//.test(he)&&(vt=new XDomainRequest),"onload"in vt?vt.onload=vt.onerror=Ut:vt.onreadystatechange=function(){vt.readyState>3&&Ut()};function Ut(){var Wt=vt.status,jt;if(!Wt&&Yr(vt)||Wt>=200&&Wt<300||Wt===304){try{jt=Le.call(Ne,vt)}catch(_r){Ke.error.call(Ne,_r);return}Ke.load.call(Ne,jt)}else Ke.error.call(Ne,vt)}return vt.onprogress=function(Wt){var jt=d.event;d.event=Wt;try{Ke.progress.call(Ne,vt)}finally{d.event=jt}},Ne.header=function(Wt,jt){return Wt=(Wt+"").toLowerCase(),arguments.length<2?mt[Wt]:(jt==null?delete mt[Wt]:mt[Wt]=jt+"",Ne)},Ne.mimeType=function(Wt){return arguments.length?(Te=Wt==null?null:Wt+"",Ne):Te},Ne.responseType=function(Wt){return arguments.length?(Ct=Wt,Ne):Ct},Ne.response=function(Wt){return Le=Wt,Ne},["get","post"].forEach(function(Wt){Ne[Wt]=function(){return Ne.send.apply(Ne,[Wt].concat(b(arguments)))}}),Ne.send=function(Wt,jt,_r){if(arguments.length===2&&typeof jt=="function"&&(_r=jt,jt=null),vt.open(Wt,he,!0),Te!=null&&!("accept"in mt)&&(mt.accept=Te+",*/*"),vt.setRequestHeader)for(var Qr in mt)vt.setRequestHeader(Qr,mt[Qr]);return Te!=null&&vt.overrideMimeType&&vt.overrideMimeType(Te),Ct!=null&&(vt.responseType=Ct),_r!=null&&Ne.on("error",_r).on("load",function(cn){_r(null,cn)}),Ke.beforesend.call(Ne,vt),vt.send(jt==null?null:jt),Ne},Ne.abort=function(){return vt.abort(),Ne},d.rebind(Ne,Ke,"on"),Be==null?Ne:Ne.get(hr(Be))}function hr(he){return he.length===1?function(Te,Le){he(Te==null?Le:null)}:he}function Yr(he){var Te=he.responseType;return Te&&Te!=="text"?he.response:he.responseText}d.dsv=function(he,Te){var Le=new RegExp('["'+he+`
]`),Be=he.charCodeAt(0);function Ne(Ut,Wt,jt){arguments.length<3&&(jt=Wt,Wt=null);var _r=er(Ut,Te,Wt==null?Ke:mt(Wt),jt);return _r.row=function(Qr){return arguments.length?_r.response((Wt=Qr)==null?Ke:mt(Qr)):Wt},_r}function Ke(Ut){return Ne.parse(Ut.responseText)}function mt(Ut){return function(Wt){return Ne.parse(Wt.responseText,Ut)}}Ne.parse=function(Ut,Wt){var jt;return Ne.parseRows(Ut,function(_r,Qr){if(jt)return jt(_r,Qr-1);var cn=function(Mr){for(var Ur={},Wr=_r.length,sn=0;sn<Wr;++sn)Ur[_r[sn]]=Mr[sn];return Ur};jt=Wt?function(Mr,Ur){return Wt(cn(Mr),Ur)}:cn})},Ne.parseRows=function(Ut,Wt){var jt={},_r={},Qr=[],cn=Ut.length,Mr=0,Ur=0,Wr,sn;function un(){if(Mr>=cn)return _r;if(sn)return sn=!1,jt;var Gn=Mr;if(Ut.charCodeAt(Gn)===34){for(var na=Gn;na++<cn;)if(Ut.charCodeAt(na)===34){if(Ut.charCodeAt(na+1)!==34)break;++na}Mr=na+2;var wa=Ut.charCodeAt(na+1);return wa===13?(sn=!0,Ut.charCodeAt(na+2)===10&&++Mr):wa===10&&(sn=!0),Ut.slice(Gn+1,na).replace(/""/g,'"')}for(;Mr<cn;){var wa=Ut.charCodeAt(Mr++),oa=1;if(wa===10)sn=!0;else if(wa===13)sn=!0,Ut.charCodeAt(Mr)===10&&(++Mr,++oa);else if(wa!==Be)continue;return Ut.slice(Gn,Mr-oa)}return Ut.slice(Gn)}for(;(Wr=un())!==_r;){for(var Zr=[];Wr!==jt&&Wr!==_r;)Zr.push(Wr),Wr=un();Wt&&(Zr=Wt(Zr,Ur++))==null||Qr.push(Zr)}return Qr},Ne.format=function(Ut){if(Array.isArray(Ut[0]))return Ne.formatRows(Ut);var Wt=new I,jt=[];return Ut.forEach(function(_r){for(var Qr in _r)Wt.has(Qr)||jt.push(Wt.add(Qr))}),[jt.map(Ct).join(he)].concat(Ut.map(function(_r){return jt.map(function(Qr){return Ct(_r[Qr])}).join(he)})).join(`
`)},Ne.formatRows=function(Ut){return Ut.map(vt).join(`
`)};function vt(Ut){return Ut.map(Ct).join(he)}function Ct(Ut){return Le.test(Ut)?'"'+Ut.replace(/\"/g,'""')+'"':Ut}return Ne},d.csv=d.dsv(",","text/csv"),d.tsv=d.dsv("	","text/tab-separated-values");var zr,Pr,br,jr,zn=this[O(this,"requestAnimationFrame")]||function(he){setTimeout(he,17)};d.timer=function(){kn.apply(this,arguments)};function kn(he,Te,Le){var Be=arguments.length;Be<2&&(Te=0),Be<3&&(Le=Date.now());var Ne=Le+Te,Ke={c:he,t:Ne,n:null};return Pr?Pr.n=Ke:zr=Ke,Pr=Ke,br||(jr=clearTimeout(jr),br=1,zn(ta)),Ke}function ta(){var he=ia(),Te=Aa()-he;Te>24?(isFinite(Te)&&(clearTimeout(jr),jr=setTimeout(ta,Te)),br=0):(br=1,zn(ta))}d.timer.flush=function(){ia(),Aa()};function ia(){for(var he=Date.now(),Te=zr;Te;)he>=Te.t&&Te.c(he-Te.t)&&(Te.c=null),Te=Te.n;return he}function Aa(){for(var he,Te=zr,Le=1/0;Te;)Te.c?(Te.t<Le&&(Le=Te.t),Te=(he=Te).n):Te=he?he.n=Te.n:zr=Te.n;return Pr=he,Le}d.round=function(he,Te){return Te?Math.round(he*(Te=Math.pow(10,Te)))/Te:Math.round(he)},d.geom={};function ya(he){return he[0]}function pr(he){return he[1]}d.geom.hull=function(he){var Te=ya,Le=pr;if(arguments.length)return Be(he);function Be(Ne){if(Ne.length<3)return[];var Ke=at(Te),mt=at(Le),vt,Ct=Ne.length,Ut=[],Wt=[];for(vt=0;vt<Ct;vt++)Ut.push([+Ke.call(this,Ne[vt],vt),+mt.call(this,Ne[vt],vt),vt]);for(Ut.sort($r),vt=0;vt<Ct;vt++)Wt.push([Ut[vt][0],-Ut[vt][1]]);var jt=vn(Ut),_r=vn(Wt),Qr=_r[0]===jt[0],cn=_r[_r.length-1]===jt[jt.length-1],Mr=[];for(vt=jt.length-1;vt>=0;--vt)Mr.push(Ne[Ut[jt[vt]][2]]);for(vt=+Qr;vt<_r.length-cn;++vt)Mr.push(Ne[Ut[_r[vt]][2]]);return Mr}return Be.x=function(Ne){return arguments.length?(Te=Ne,Be):Te},Be.y=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be};function vn(he){for(var Te=he.length,Le=[0,1],Be=2,Ne=2;Ne<Te;Ne++){for(;Be>1&&Nt(he[Le[Be-2]],he[Le[Be-1]],he[Ne])<=0;)--Be;Le[Be++]=Ne}return Le.slice(0,Be)}function $r(he,Te){return he[0]-Te[0]||he[1]-Te[1]}d.geom.polygon=function(he){return ue(he,Fn),he};var Fn=d.geom.polygon.prototype=[];Fn.area=function(){for(var he=-1,Te=this.length,Le,Be=this[Te-1],Ne=0;++he<Te;)Le=Be,Be=this[he],Ne+=Le[1]*Be[0]-Le[0]*Be[1];return Ne*.5},Fn.centroid=function(he){var Te=-1,Le=this.length,Be=0,Ne=0,Ke,mt=this[Le-1],vt;for(arguments.length||(he=-1/(6*this.area()));++Te<Le;)Ke=mt,mt=this[Te],vt=Ke[0]*mt[1]-mt[0]*Ke[1],Be+=(Ke[0]+mt[0])*vt,Ne+=(Ke[1]+mt[1])*vt;return[Be*he,Ne*he]},Fn.clip=function(he){for(var Te,Le=ra(he),Be=-1,Ne=this.length-ra(this),Ke,mt,vt=this[Ne-1],Ct,Ut,Wt;++Be<Ne;){for(Te=he.slice(),he.length=0,Ct=this[Be],Ut=Te[(mt=Te.length-Le)-1],Ke=-1;++Ke<mt;)Wt=Te[Ke],Nn(Wt,vt,Ct)?(Nn(Ut,vt,Ct)||he.push(ca(Ut,Wt,vt,Ct)),he.push(Wt)):Nn(Ut,vt,Ct)&&he.push(ca(Ut,Wt,vt,Ct)),Ut=Wt;Le&&he.push(he[0]),vt=Ct}return he};function Nn(he,Te,Le){return(Le[0]-Te[0])*(he[1]-Te[1])<(Le[1]-Te[1])*(he[0]-Te[0])}function ca(he,Te,Le,Be){var Ne=he[0],Ke=Le[0],mt=Te[0]-Ne,vt=Be[0]-Ke,Ct=he[1],Ut=Le[1],Wt=Te[1]-Ct,jt=Be[1]-Ut,_r=(vt*(Ct-Ut)-jt*(Ne-Ke))/(jt*mt-vt*Wt);return[Ne+_r*mt,Ct+_r*Wt]}function ra(he){var Te=he[0],Le=he[he.length-1];return!(Te[0]-Le[0]||Te[1]-Le[1])}var Un,ua,da,ur=[],Rr,on,rn=[];function gn(){eo(this),this.edge=this.site=this.circle=null}function wn(he){var Te=ur.pop()||new gn;return Te.site=he,Te}function pn(he){mn(he),da.remove(he),ur.push(he),eo(he)}function cr(he){var Te=he.circle,Le=Te.x,Be=Te.cy,Ne={x:Le,y:Be},Ke=he.P,mt=he.N,vt=[he];pn(he);for(var Ct=Ke;Ct.circle&&g(Le-Ct.circle.x)<ht&&g(Be-Ct.circle.cy)<ht;)Ke=Ct.P,vt.unshift(Ct),pn(Ct),Ct=Ke;vt.unshift(Ct),mn(Ct);for(var Ut=mt;Ut.circle&&g(Le-Ut.circle.x)<ht&&g(Be-Ut.circle.cy)<ht;)mt=Ut.N,vt.push(Ut),pn(Ut),Ut=mt;vt.push(Ut),mn(Ut);var Wt=vt.length,jt;for(jt=1;jt<Wt;++jt)Ut=vt[jt],Ct=vt[jt-1],No(Ut.edge,Ct.site,Ut.site,Ne);Ct=vt[0],Ut=vt[Wt-1],Ut.edge=ka(Ct.site,Ut.site,null,Ne),Bn(Ct),Bn(Ut)}function ar(he){for(var Te=he.x,Le=he.y,Be,Ne,Ke,mt,vt=da._;vt;)if(Ke=Fr(vt,Le)-Te,Ke>ht)vt=vt.L;else if(mt=Te-Jr(vt,Le),mt>ht){if(!vt.R){Be=vt;break}vt=vt.R}else{Ke>-ht?(Be=vt.P,Ne=vt):mt>-ht?(Be=vt,Ne=vt.N):Be=Ne=vt;break}var Ct=wn(he);if(da.insert(Be,Ct),!(!Be&&!Ne)){if(Be===Ne){mn(Be),Ne=wn(Be.site),da.insert(Ct,Ne),Ct.edge=Ne.edge=ka(Be.site,Ct.site),Bn(Be),Bn(Ne);return}if(!Ne){Ct.edge=ka(Be.site,Ct.site);return}mn(Be),mn(Ne);var Ut=Be.site,Wt=Ut.x,jt=Ut.y,_r=he.x-Wt,Qr=he.y-jt,cn=Ne.site,Mr=cn.x-Wt,Ur=cn.y-jt,Wr=2*(_r*Ur-Qr*Mr),sn=_r*_r+Qr*Qr,un=Mr*Mr+Ur*Ur,Zr={x:(Ur*sn-Qr*un)/Wr+Wt,y:(_r*un-Mr*sn)/Wr+jt};No(Ne.edge,Ut,cn,Zr),Ct.edge=ka(Ut,he,null,Zr),Ne.edge=ka(he,cn,null,Zr),Bn(Be),Bn(Ne)}}function Fr(he,Te){var Le=he.site,Be=Le.x,Ne=Le.y,Ke=Ne-Te;if(!Ke)return Be;var mt=he.P;if(!mt)return-1/0;Le=mt.site;var vt=Le.x,Ct=Le.y,Ut=Ct-Te;if(!Ut)return vt;var Wt=vt-Be,jt=1/Ke-1/Ut,_r=Wt/Ut;return jt?(-_r+Math.sqrt(_r*_r-2*jt*(Wt*Wt/(-2*Ut)-Ct+Ut/2+Ne-Ke/2)))/jt+Be:(Be+vt)/2}function Jr(he,Te){var Le=he.N;if(Le)return Fr(Le,Te);var Be=he.site;return Be.y===Te?Be.x:1/0}function En(he){this.site=he,this.edges=[]}En.prototype.prepare=function(){for(var he=this.edges,Te=he.length,Le;Te--;)Le=he[Te].edge,(!Le.b||!Le.a)&&he.splice(Te,1);return he.sort(Kn),he.length};function Vn(he){for(var Te=he[0][0],Le=he[1][0],Be=he[0][1],Ne=he[1][1],Ke,mt,vt,Ct,Ut=ua,Wt=Ut.length,jt,_r,Qr,cn,Mr,Ur;Wt--;)if(jt=Ut[Wt],!(!jt||!jt.prepare()))for(Qr=jt.edges,cn=Qr.length,_r=0;_r<cn;)Ur=Qr[_r].end(),vt=Ur.x,Ct=Ur.y,Mr=Qr[++_r%cn].start(),Ke=Mr.x,mt=Mr.y,(g(vt-Ke)>ht||g(Ct-mt)>ht)&&(Qr.splice(_r,0,new es(il(jt.site,Ur,g(vt-Te)<ht&&Ne-Ct>ht?{x:Te,y:g(Ke-Te)<ht?mt:Ne}:g(Ct-Ne)<ht&&Le-vt>ht?{x:g(mt-Ne)<ht?Ke:Le,y:Ne}:g(vt-Le)<ht&&Ct-Be>ht?{x:Le,y:g(Ke-Le)<ht?mt:Be}:g(Ct-Be)<ht&&vt-Te>ht?{x:g(mt-Be)<ht?Ke:Te,y:Be}:null),jt.site,null)),++cn)}function Kn(he,Te){return Te.angle-he.angle}function jn(){eo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Bn(he){var Te=he.P,Le=he.N;if(!(!Te||!Le)){var Be=Te.site,Ne=he.site,Ke=Le.site;if(Be!==Ke){var mt=Ne.x,vt=Ne.y,Ct=Be.x-mt,Ut=Be.y-vt,Wt=Ke.x-mt,jt=Ke.y-vt,_r=2*(Ct*jt-Ut*Wt);if(!(_r>=-Qe)){var Qr=Ct*Ct+Ut*Ut,cn=Wt*Wt+jt*jt,Mr=(jt*Qr-Ut*cn)/_r,Ur=(Ct*cn-Wt*Qr)/_r,jt=Ur+vt,Wr=rn.pop()||new jn;Wr.arc=he,Wr.site=Ne,Wr.x=Mr+mt,Wr.y=jt+Math.sqrt(Mr*Mr+Ur*Ur),Wr.cy=jt,he.circle=Wr;for(var sn=null,un=on._;un;)if(Wr.y<un.y||Wr.y===un.y&&Wr.x<=un.x)if(un.L)un=un.L;else{sn=un.P;break}else if(un.R)un=un.R;else{sn=un;break}on.insert(sn,Wr),sn||(Rr=Wr)}}}}function mn(he){var Te=he.circle;Te&&(Te.P||(Rr=Te.N),on.remove(Te),rn.push(Te),eo(Te),he.circle=null)}function Rn(he,Te,Le,Be){return function(Ne){var Ke=Ne.a,mt=Ne.b,vt=Ke.x,Ct=Ke.y,Ut=mt.x,Wt=mt.y,jt=0,_r=1,Qr=Ut-vt,cn=Wt-Ct,Mr;if(Mr=he-vt,!(!Qr&&Mr>0)){if(Mr/=Qr,Qr<0){if(Mr<jt)return;Mr<_r&&(_r=Mr)}else if(Qr>0){if(Mr>_r)return;Mr>jt&&(jt=Mr)}if(Mr=Le-vt,!(!Qr&&Mr<0)){if(Mr/=Qr,Qr<0){if(Mr>_r)return;Mr>jt&&(jt=Mr)}else if(Qr>0){if(Mr<jt)return;Mr<_r&&(_r=Mr)}if(Mr=Te-Ct,!(!cn&&Mr>0)){if(Mr/=cn,cn<0){if(Mr<jt)return;Mr<_r&&(_r=Mr)}else if(cn>0){if(Mr>_r)return;Mr>jt&&(jt=Mr)}if(Mr=Be-Ct,!(!cn&&Mr<0)){if(Mr/=cn,cn<0){if(Mr>_r)return;Mr>jt&&(jt=Mr)}else if(cn>0){if(Mr<jt)return;Mr<_r&&(_r=Mr)}return jt>0&&(Ne.a={x:vt+jt*Qr,y:Ct+jt*cn}),_r<1&&(Ne.b={x:vt+_r*Qr,y:Ct+_r*cn}),Ne}}}}}}function Yn(he){for(var Te=Un,Le=Rn(he[0][0],he[0][1],he[1][0],he[1][1]),Be=Te.length,Ne;Be--;)Ne=Te[Be],(!la(Ne,he)||!Le(Ne)||g(Ne.a.x-Ne.b.x)<ht&&g(Ne.a.y-Ne.b.y)<ht)&&(Ne.a=Ne.b=null,Te.splice(Be,1))}function la(he,Te){var Le=he.b;if(Le)return!0;var Be=he.a,Ne=Te[0][0],Ke=Te[1][0],mt=Te[0][1],vt=Te[1][1],Ct=he.l,Ut=he.r,Wt=Ct.x,jt=Ct.y,_r=Ut.x,Qr=Ut.y,cn=(Wt+_r)/2,Mr=(jt+Qr)/2,Ur,Wr;if(Qr===jt){if(cn<Ne||cn>=Ke)return;if(Wt>_r){if(!Be)Be={x:cn,y:mt};else if(Be.y>=vt)return;Le={x:cn,y:vt}}else{if(!Be)Be={x:cn,y:vt};else if(Be.y<mt)return;Le={x:cn,y:mt}}}else if(Ur=(Wt-_r)/(Qr-jt),Wr=Mr-Ur*cn,Ur<-1||Ur>1)if(Wt>_r){if(!Be)Be={x:(mt-Wr)/Ur,y:mt};else if(Be.y>=vt)return;Le={x:(vt-Wr)/Ur,y:vt}}else{if(!Be)Be={x:(vt-Wr)/Ur,y:vt};else if(Be.y<mt)return;Le={x:(mt-Wr)/Ur,y:mt}}else if(jt<Qr){if(!Be)Be={x:Ne,y:Ur*Ne+Wr};else if(Be.x>=Ke)return;Le={x:Ke,y:Ur*Ke+Wr}}else{if(!Be)Be={x:Ke,y:Ur*Ke+Wr};else if(Be.x<Ne)return;Le={x:Ne,y:Ur*Ne+Wr}}return he.a=Be,he.b=Le,!0}function Ga(he,Te){this.l=he,this.r=Te,this.a=this.b=null}function ka(he,Te,Le,Be){var Ne=new Ga(he,Te);return Un.push(Ne),Le&&No(Ne,he,Te,Le),Be&&No(Ne,Te,he,Be),ua[he.i].edges.push(new es(Ne,he,Te)),ua[Te.i].edges.push(new es(Ne,Te,he)),Ne}function il(he,Te,Le){var Be=new Ga(he,null);return Be.a=Te,Be.b=Le,Un.push(Be),Be}function No(he,Te,Le,Be){!he.a&&!he.b?(he.a=Be,he.l=Te,he.r=Le):he.l===Le?he.b=Be:he.a=Be}function es(he,Te,Le){var Be=he.a,Ne=he.b;this.edge=he,this.site=Te,this.angle=Le?Math.atan2(Le.y-Te.y,Le.x-Te.x):he.l===Te?Math.atan2(Ne.x-Be.x,Be.y-Ne.y):Math.atan2(Be.x-Ne.x,Ne.y-Be.y)}es.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ls(){this._=null}function eo(he){he.U=he.C=he.L=he.R=he.P=he.N=null}Ls.prototype={insert:function(he,Te){var Le,Be,Ne;if(he){if(Te.P=he,Te.N=he.N,he.N&&(he.N.P=Te),he.N=Te,he.R){for(he=he.R;he.L;)he=he.L;he.L=Te}else he.R=Te;Le=he}else this._?(he=Ws(this._),Te.P=null,Te.N=he,he.P=he.L=Te,Le=he):(Te.P=Te.N=null,this._=Te,Le=null);for(Te.L=Te.R=null,Te.U=Le,Te.C=!0,he=Te;Le&&Le.C;)Be=Le.U,Le===Be.L?(Ne=Be.R,Ne&&Ne.C?(Le.C=Ne.C=!1,Be.C=!0,he=Be):(he===Le.R&&(Pi(this,Le),he=Le,Le=he.U),Le.C=!1,Be.C=!0,Ys(this,Be))):(Ne=Be.L,Ne&&Ne.C?(Le.C=Ne.C=!1,Be.C=!0,he=Be):(he===Le.L&&(Ys(this,Le),he=Le,Le=he.U),Le.C=!1,Be.C=!0,Pi(this,Be))),Le=he.U;this._.C=!1},remove:function(he){he.N&&(he.N.P=he.P),he.P&&(he.P.N=he.N),he.N=he.P=null;var Te=he.U,Le,Be=he.L,Ne=he.R,Ke,mt;if(Be?Ne?Ke=Ws(Ne):Ke=Be:Ke=Ne,Te?Te.L===he?Te.L=Ke:Te.R=Ke:this._=Ke,Be&&Ne?(mt=Ke.C,Ke.C=he.C,Ke.L=Be,Be.U=Ke,Ke!==Ne?(Te=Ke.U,Ke.U=he.U,he=Ke.R,Te.L=he,Ke.R=Ne,Ne.U=Ke):(Ke.U=Te,Te=Ke,he=Ke.R)):(mt=he.C,he=Ke),he&&(he.U=Te),!mt){if(he&&he.C){he.C=!1;return}do{if(he===this._)break;if(he===Te.L){if(Le=Te.R,Le.C&&(Le.C=!1,Te.C=!0,Pi(this,Te),Le=Te.R),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.R||!Le.R.C)&&(Le.L.C=!1,Le.C=!0,Ys(this,Le),Le=Te.R),Le.C=Te.C,Te.C=Le.R.C=!1,Pi(this,Te),he=this._;break}}else if(Le=Te.L,Le.C&&(Le.C=!1,Te.C=!0,Ys(this,Te),Le=Te.L),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.L||!Le.L.C)&&(Le.R.C=!1,Le.C=!0,Pi(this,Le),Le=Te.L),Le.C=Te.C,Te.C=Le.L.C=!1,Ys(this,Te),he=this._;break}Le.C=!0,he=Te,Te=Te.U}while(!he.C);he&&(he.C=!1)}}};function Pi(he,Te){var Le=Te,Be=Te.R,Ne=Le.U;Ne?Ne.L===Le?Ne.L=Be:Ne.R=Be:he._=Be,Be.U=Ne,Le.U=Be,Le.R=Be.L,Le.R&&(Le.R.U=Le),Be.L=Le}function Ys(he,Te){var Le=Te,Be=Te.L,Ne=Le.U;Ne?Ne.L===Le?Ne.L=Be:Ne.R=Be:he._=Be,Be.U=Ne,Le.U=Be,Le.L=Be.R,Le.L&&(Le.L.U=Le),Be.R=Le}function Ws(he){for(;he.L;)he=he.L;return he}function ts(he,Te){var Le=he.sort(Ml).pop(),Be,Ne,Ke;for(Un=[],ua=new Array(he.length),da=new Ls,on=new Ls;;)if(Ke=Rr,Le&&(!Ke||Le.y<Ke.y||Le.y===Ke.y&&Le.x<Ke.x))(Le.x!==Be||Le.y!==Ne)&&(ua[Le.i]=new En(Le),ar(Le),Be=Le.x,Ne=Le.y),Le=he.pop();else if(Ke)cr(Ke.arc);else break;Te&&(Yn(Te),Vn(Te));var mt={cells:ua,edges:Un};return da=on=Un=ua=null,mt}function Ml(he,Te){return Te.y-he.y||Te.x-he.x}d.geom.voronoi=function(he){var Te=ya,Le=pr,Be=Te,Ne=Le,Ke=Nl;if(he)return mt(he);function mt(Ct){var Ut=new Array(Ct.length),Wt=Ke[0][0],jt=Ke[0][1],_r=Ke[1][0],Qr=Ke[1][1];return ts(vt(Ct),Ke).cells.forEach(function(cn,Mr){var Ur=cn.edges,Wr=cn.site,sn=Ut[Mr]=Ur.length?Ur.map(function(un){var Zr=un.start();return[Zr.x,Zr.y]}):Wr.x>=Wt&&Wr.x<=_r&&Wr.y>=jt&&Wr.y<=Qr?[[Wt,Qr],[_r,Qr],[_r,jt],[Wt,jt]]:[];sn.point=Ct[Mr]}),Ut}function vt(Ct){return Ct.map(function(Ut,Wt){return{x:Math.round(Be(Ut,Wt)/ht)*ht,y:Math.round(Ne(Ut,Wt)/ht)*ht,i:Wt}})}return mt.links=function(Ct){return ts(vt(Ct)).edges.filter(function(Ut){return Ut.l&&Ut.r}).map(function(Ut){return{source:Ct[Ut.l.i],target:Ct[Ut.r.i]}})},mt.triangles=function(Ct){var Ut=[];return ts(vt(Ct)).cells.forEach(function(Wt,jt){for(var _r=Wt.site,Qr=Wt.edges.sort(Kn),cn=-1,Mr=Qr.length,Ur,Wr=Qr[Mr-1].edge,sn=Wr.l===_r?Wr.r:Wr.l;++cn<Mr;)Ur=sn,Wr=Qr[cn].edge,sn=Wr.l===_r?Wr.r:Wr.l,jt<Ur.i&&jt<sn.i&&xu(_r,Ur,sn)<0&&Ut.push([Ct[jt],Ct[Ur.i],Ct[sn.i]])}),Ut},mt.x=function(Ct){return arguments.length?(Be=at(Te=Ct),mt):Te},mt.y=function(Ct){return arguments.length?(Ne=at(Le=Ct),mt):Le},mt.clipExtent=function(Ct){return arguments.length?(Ke=Ct==null?Nl:Ct,mt):Ke===Nl?null:Ke},mt.size=function(Ct){return arguments.length?mt.clipExtent(Ct&&[[0,0],Ct]):Ke===Nl?null:Ke&&Ke[1]},mt};var Nl=[[-1e6,-1e6],[1e6,1e6]];function xu(he,Te,Le){return(he.x-Le.x)*(Te.y-he.y)-(he.x-Te.x)*(Le.y-he.y)}d.geom.delaunay=function(he){return d.geom.voronoi().triangles(he)},d.geom.quadtree=function(he,Te,Le,Be,Ne){var Ke=ya,mt=pr,vt;if(vt=arguments.length)return Ke=hi,mt=ol,vt===3&&(Ne=Le,Be=Te,Le=Te=0),Ct(he);function Ct(Ut){var Wt,jt=at(Ke),_r=at(mt),Qr,cn,Mr,Ur,Wr,sn,un,Zr;if(Te!=null)Wr=Te,sn=Le,un=Be,Zr=Ne;else if(un=Zr=-(Wr=sn=1/0),Qr=[],cn=[],Ur=Ut.length,vt)for(Mr=0;Mr<Ur;++Mr)Wt=Ut[Mr],Wt.x<Wr&&(Wr=Wt.x),Wt.y<sn&&(sn=Wt.y),Wt.x>un&&(un=Wt.x),Wt.y>Zr&&(Zr=Wt.y),Qr.push(Wt.x),cn.push(Wt.y);else for(Mr=0;Mr<Ur;++Mr){var Gn=+jt(Wt=Ut[Mr],Mr),na=+_r(Wt,Mr);Gn<Wr&&(Wr=Gn),na<sn&&(sn=na),Gn>un&&(un=Gn),na>Zr&&(Zr=na),Qr.push(Gn),cn.push(na)}var wa=un-Wr,oa=Zr-sn;wa>oa?Zr=sn+wa:un=Wr+oa;function Ea(Ra,$a,gi,ho,Ii,ha,ai,Xa){if(!(isNaN(gi)||isNaN(ho)))if(Ra.leaf){var Mi=Ra.x,si=Ra.y;if(Mi!=null)if(g(Mi-gi)+g(si-ho)<.01)fa(Ra,$a,gi,ho,Ii,ha,ai,Xa);else{var so=Ra.point;Ra.x=Ra.y=Ra.point=null,fa(Ra,so,Mi,si,Ii,ha,ai,Xa),fa(Ra,$a,gi,ho,Ii,ha,ai,Xa)}else Ra.x=gi,Ra.y=ho,Ra.point=$a}else fa(Ra,$a,gi,ho,Ii,ha,ai,Xa)}function fa(Ra,$a,gi,ho,Ii,ha,ai,Xa){var Mi=(Ii+ai)*.5,si=(ha+Xa)*.5,so=gi>=Mi,$i=ho>=si,yo=$i<<1|so;Ra.leaf=!1,Ra=Ra.nodes[yo]||(Ra.nodes[yo]=Xs()),so?Ii=Mi:ai=Mi,$i?ha=si:Xa=si,Ea(Ra,$a,gi,ho,Ii,ha,ai,Xa)}var Va=Xs();if(Va.add=function(Ra){Ea(Va,Ra,+jt(Ra,++Mr),+_r(Ra,Mr),Wr,sn,un,Zr)},Va.visit=function(Ra){Ui(Ra,Va,Wr,sn,un,Zr)},Va.find=function(Ra){return So(Va,Ra[0],Ra[1],Wr,sn,un,Zr)},Mr=-1,Te==null){for(;++Mr<Ur;)Ea(Va,Ut[Mr],Qr[Mr],cn[Mr],Wr,sn,un,Zr);--Mr}else Ut.forEach(Va.add);return Qr=cn=Ut=Wt=null,Va}return Ct.x=function(Ut){return arguments.length?(Ke=Ut,Ct):Ke},Ct.y=function(Ut){return arguments.length?(mt=Ut,Ct):mt},Ct.extent=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Ne=null:(Te=+Ut[0][0],Le=+Ut[0][1],Be=+Ut[1][0],Ne=+Ut[1][1]),Ct):Te==null?null:[[Te,Le],[Be,Ne]]},Ct.size=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Ne=null:(Te=Le=0,Be=+Ut[0],Ne=+Ut[1]),Ct):Te==null?null:[Be-Te,Ne-Le]},Ct};function hi(he){return he.x}function ol(he){return he.y}function Xs(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ui(he,Te,Le,Be,Ne,Ke){if(!he(Te,Le,Be,Ne,Ke)){var mt=(Le+Ne)*.5,vt=(Be+Ke)*.5,Ct=Te.nodes;Ct[0]&&Ui(he,Ct[0],Le,Be,mt,vt),Ct[1]&&Ui(he,Ct[1],mt,Be,Ne,vt),Ct[2]&&Ui(he,Ct[2],Le,vt,mt,Ke),Ct[3]&&Ui(he,Ct[3],mt,vt,Ne,Ke)}}function So(he,Te,Le,Be,Ne,Ke,mt){var vt=1/0,Ct;return function Ut(Wt,jt,_r,Qr,cn){if(!(jt>Ke||_r>mt||Qr<Be||cn<Ne)){if(Mr=Wt.point){var Mr,Ur=Te-Wt.x,Wr=Le-Wt.y,sn=Ur*Ur+Wr*Wr;if(sn<vt){var un=Math.sqrt(vt=sn);Be=Te-un,Ne=Le-un,Ke=Te+un,mt=Le+un,Ct=Mr}}for(var Zr=Wt.nodes,Gn=(jt+Qr)*.5,na=(_r+cn)*.5,wa=Te>=Gn,oa=Le>=na,Ea=oa<<1|wa,fa=Ea+4;Ea<fa;++Ea)if(Wt=Zr[Ea&3])switch(Ea&3){case 0:Ut(Wt,jt,_r,Gn,na);break;case 1:Ut(Wt,Gn,_r,Qr,na);break;case 2:Ut(Wt,jt,na,Gn,cn);break;case 3:Ut(Wt,Gn,na,Qr,cn);break}}}(he,Be,Ne,Ke,mt),Ct}d.interpolateRgb=Bl;function Bl(he,Te){he=d.rgb(he),Te=d.rgb(Te);var Le=he.r,Be=he.g,Ne=he.b,Ke=Te.r-Le,mt=Te.g-Be,vt=Te.b-Ne;return function(Ct){return"#"+gr(Math.round(Le+Ke*Ct))+gr(Math.round(Be+mt*Ct))+gr(Math.round(Ne+vt*Ct))}}d.interpolateObject=_s;function _s(he,Te){var Le={},Be={},Ne;for(Ne in he)Ne in Te?Le[Ne]=io(he[Ne],Te[Ne]):Be[Ne]=he[Ne];for(Ne in Te)Ne in he||(Be[Ne]=Te[Ne]);return function(Ke){for(Ne in Le)Be[Ne]=Le[Ne](Ke);return Be}}d.interpolateNumber=Di;function Di(he,Te){return he=+he,Te=+Te,function(Le){return he*(1-Le)+Te*Le}}d.interpolateString=Sl;function Sl(he,Te){var Le=Ji.lastIndex=Fi.lastIndex=0,Be,Ne,Ke,mt=-1,vt=[],Ct=[];for(he=he+"",Te=Te+"";(Be=Ji.exec(he))&&(Ne=Fi.exec(Te));)(Ke=Ne.index)>Le&&(Ke=Te.slice(Le,Ke),vt[mt]?vt[mt]+=Ke:vt[++mt]=Ke),(Be=Be[0])===(Ne=Ne[0])?vt[mt]?vt[mt]+=Ne:vt[++mt]=Ne:(vt[++mt]=null,Ct.push({i:mt,x:Di(Be,Ne)})),Le=Fi.lastIndex;return Le<Te.length&&(Ke=Te.slice(Le),vt[mt]?vt[mt]+=Ke:vt[++mt]=Ke),vt.length<2?Ct[0]?(Te=Ct[0].x,function(Ut){return Te(Ut)+""}):function(){return Te}:(Te=Ct.length,function(Ut){for(var Wt=0,jt;Wt<Te;++Wt)vt[(jt=Ct[Wt]).i]=jt.x(Ut);return vt.join("")})}var Ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(Ji.source,"g");d.interpolate=io;function io(he,Te){for(var Le=d.interpolators.length,Be;--Le>=0&&!(Be=d.interpolators[Le](he,Te)););return Be}d.interpolators=[function(he,Te){var Le=typeof Te;return(Le==="string"?Xr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?Bl:Sl:Te instanceof Lr?Bl:Array.isArray(Te)?Qi:Le==="object"&&isNaN(Te)?_s:Di)(he,Te)}],d.interpolateArray=Qi;function Qi(he,Te){var Le=[],Be=[],Ne=he.length,Ke=Te.length,mt=Math.min(he.length,Te.length),vt;for(vt=0;vt<mt;++vt)Le.push(io(he[vt],Te[vt]));for(;vt<Ne;++vt)Be[vt]=he[vt];for(;vt<Ke;++vt)Be[vt]=Te[vt];return function(Ct){for(vt=0;vt<mt;++vt)Be[vt]=Le[vt](Ct);return Be}}var us=function(){return R},sl=d.map({linear:us,poly:Ps,quad:function(){return ko},cubic:function(){return ff},sin:function(){return nu},exp:function(){return cf},circle:function(){return hf},elastic:ll,back:au,bounce:function(){return Ds}}),Bu=d.map({in:R,out:Uu,"in-out":js,"out-in":function(he){return js(Uu(he))}});d.ease=function(he){var Te=he.indexOf("-"),Le=Te>=0?he.slice(0,Te):he,Be=Te>=0?he.slice(Te+1):"in";return Le=sl.get(Le)||us,Be=Bu.get(Be)||R,rs(Be(Le.apply(null,l.call(arguments,1))))};function rs(he){return function(Te){return Te<=0?0:Te>=1?1:he(Te)}}function Uu(he){return function(Te){return 1-he(1-Te)}}function js(he){return function(Te){return .5*(Te<.5?he(2*Te):2-he(2-2*Te))}}function ko(he){return he*he}function ff(he){return he*he*he}function Zs(he){if(he<=0)return 0;if(he>=1)return 1;var Te=he*he,Le=Te*he;return 4*(he<.5?Le:3*(he-Te)+Le-.75)}function Ps(he){return function(Te){return Math.pow(Te,he)}}function nu(he){return 1-Math.cos(he*ut)}function cf(he){return Math.pow(2,10*(he-1))}function hf(he){return 1-Math.sqrt(1-he*he)}function ll(he,Te){var Le;return arguments.length<2&&(Te=.45),arguments.length?Le=Te/je*Math.asin(1/he):(he=1,Le=Te/4),function(Be){return 1+he*Math.pow(2,-10*Be)*Math.sin((Be-Le)*je/Te)}}function au(he){return he||(he=1.70158),function(Te){return Te*Te*((he+1)*Te-he)}}function Ds(he){return he<1/2.75?7.5625*he*he:he<2/2.75?7.5625*(he-=1.5/2.75)*he+.75:he<2.5/2.75?7.5625*(he-=2.25/2.75)*he+.9375:7.5625*(he-=2.625/2.75)*he+.984375}d.interpolateHcl=bu;function bu(he,Te){he=d.hcl(he),Te=d.hcl(Te);var Le=he.h,Be=he.c,Ne=he.l,Ke=Te.h-Le,mt=Te.c-Be,vt=Te.l-Ne;return isNaN(mt)&&(mt=0,Be=isNaN(Be)?Te.c:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Se(Le+Ke*Ct,Be+mt*Ct,Ne+vt*Ct)+""}}d.interpolateHsl=kl;function kl(he,Te){he=d.hsl(he),Te=d.hsl(Te);var Le=he.h,Be=he.s,Ne=he.l,Ke=Te.h-Le,mt=Te.s-Be,vt=Te.l-Ne;return isNaN(mt)&&(mt=0,Be=isNaN(Be)?Te.s:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Or(Le+Ke*Ct,Be+mt*Ct,Ne+vt*Ct)+""}}d.interpolateLab=_u;function _u(he,Te){he=d.lab(he),Te=d.lab(Te);var Le=he.l,Be=he.a,Ne=he.b,Ke=Te.l-Le,mt=Te.a-Be,vt=Te.b-Ne;return function(Ct){return wt(Le+Ke*Ct,Be+mt*Ct,Ne+vt*Ct)+""}}d.interpolateRound=Vu;function Vu(he,Te){return Te-=he,function(Le){return Math.round(he+Te*Le)}}d.transform=function(he){var Te=w.createElementNS(d.ns.prefix.svg,"g");return(d.transform=function(Le){if(Le!=null){Te.setAttribute("transform",Le);var Be=Te.transform.baseVal.consolidate()}return new iu(Be?Be.matrix:ou)})(he)};function iu(he){var Te=[he.a,he.b],Le=[he.c,he.d],Be=ul(Te),Ne=vf(Te,Le),Ke=ul(wu(Le,Te,-Ne))||0;Te[0]*Le[1]<Le[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Be*=-1,Ne*=-1),this.rotate=(Be?Math.atan2(Te[1],Te[0]):Math.atan2(-Le[0],Le[1]))*St,this.translate=[he.e,he.f],this.scale=[Be,Ke],this.skew=Ke?Math.atan2(Ne,Ke)*St:0}iu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function vf(he,Te){return he[0]*Te[0]+he[1]*Te[1]}function ul(he){var Te=Math.sqrt(vf(he,he));return Te&&(he[0]/=Te,he[1]/=Te),Te}function wu(he,Te,Le){return he[0]+=Le*Te[0],he[1]+=Le*Te[1],he}var ou={a:1,b:0,c:0,d:1,e:0,f:0};d.interpolateTransform=su;function ws(he){return he.length?he.pop()+",":""}function Ul(he,Te,Le,Be){if(he[0]!==Te[0]||he[1]!==Te[1]){var Ne=Le.push("translate(",null,",",null,")");Be.push({i:Ne-4,x:Di(he[0],Te[0])},{i:Ne-2,x:Di(he[1],Te[1])})}else(Te[0]||Te[1])&&Le.push("translate("+Te+")")}function Tu(he,Te,Le,Be){he!==Te?(he-Te>180?Te+=360:Te-he>180&&(he+=360),Be.push({i:Le.push(ws(Le)+"rotate(",null,")")-2,x:Di(he,Te)})):Te&&Le.push(ws(Le)+"rotate("+Te+")")}function Hu(he,Te,Le,Be){he!==Te?Be.push({i:Le.push(ws(Le)+"skewX(",null,")")-2,x:Di(he,Te)}):Te&&Le.push(ws(Le)+"skewX("+Te+")")}function Gu(he,Te,Le,Be){if(he[0]!==Te[0]||he[1]!==Te[1]){var Ne=Le.push(ws(Le)+"scale(",null,",",null,")");Be.push({i:Ne-4,x:Di(he[0],Te[0])},{i:Ne-2,x:Di(he[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Le.push(ws(Le)+"scale("+Te+")")}function su(he,Te){var Le=[],Be=[];return he=d.transform(he),Te=d.transform(Te),Ul(he.translate,Te.translate,Le,Be),Tu(he.rotate,Te.rotate,Le,Be),Hu(he.skew,Te.skew,Le,Be),Gu(he.scale,Te.scale,Le,Be),he=Te=null,function(Ne){for(var Ke=-1,mt=Be.length,vt;++Ke<mt;)Le[(vt=Be[Ke]).i]=vt.x(Ne);return Le.join("")}}function pf(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return(Le-he)/Te}}function Yu(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return Math.max(0,Math.min(1,(Le-he)/Te))}}d.layout={},d.layout.bundle=function(){return function(he){for(var Te=[],Le=-1,Be=he.length;++Le<Be;)Te.push(ns(he[Le]));return Te}};function ns(he){for(var Te=he.source,Le=he.target,Be=Cl(Te,Le),Ne=[Te];Te!==Be;)Te=Te.parent,Ne.push(Te);for(var Ke=Ne.length;Le!==Be;)Ne.splice(Ke,0,Le),Le=Le.parent;return Ne}function El(he){for(var Te=[],Le=he.parent;Le!=null;)Te.push(he),he=Le,Le=Le.parent;return Te.push(he),Te}function Cl(he,Te){if(he===Te)return he;for(var Le=El(he),Be=El(Te),Ne=Le.pop(),Ke=Be.pop(),mt=null;Ne===Ke;)mt=Ne,Ne=Le.pop(),Ke=Be.pop();return mt}d.layout.chord=function(){var he={},Te,Le,Be,Ne,Ke=0,mt,vt,Ct;function Ut(){var jt={},_r=[],Qr=d.range(Ne),cn=[],Mr,Ur,Wr,sn,un;for(Te=[],Le=[],Mr=0,sn=-1;++sn<Ne;){for(Ur=0,un=-1;++un<Ne;)Ur+=Be[sn][un];_r.push(Ur),cn.push(d.range(Ne)),Mr+=Ur}for(mt&&Qr.sort(function(Va,Ra){return mt(_r[Va],_r[Ra])}),vt&&cn.forEach(function(Va,Ra){Va.sort(function($a,gi){return vt(Be[Ra][$a],Be[Ra][gi])})}),Mr=(je-Ke*Ne)/Mr,Ur=0,sn=-1;++sn<Ne;){for(Wr=Ur,un=-1;++un<Ne;){var Zr=Qr[sn],Gn=cn[Zr][un],na=Be[Zr][Gn],wa=Ur,oa=Ur+=na*Mr;jt[Zr+"-"+Gn]={index:Zr,subindex:Gn,startAngle:wa,endAngle:oa,value:na}}Le[Zr]={index:Zr,startAngle:Wr,endAngle:Ur,value:_r[Zr]},Ur+=Ke}for(sn=-1;++sn<Ne;)for(un=sn-1;++un<Ne;){var Ea=jt[sn+"-"+un],fa=jt[un+"-"+sn];(Ea.value||fa.value)&&Te.push(Ea.value<fa.value?{source:fa,target:Ea}:{source:Ea,target:fa})}Ct&&Wt()}function Wt(){Te.sort(function(jt,_r){return Ct((jt.source.value+jt.target.value)/2,(_r.source.value+_r.target.value)/2)})}return he.matrix=function(jt){return arguments.length?(Ne=(Be=jt)&&Be.length,Te=Le=null,he):Be},he.padding=function(jt){return arguments.length?(Ke=jt,Te=Le=null,he):Ke},he.sortGroups=function(jt){return arguments.length?(mt=jt,Te=Le=null,he):mt},he.sortSubgroups=function(jt){return arguments.length?(vt=jt,Te=null,he):vt},he.sortChords=function(jt){return arguments.length?(Ct=jt,Te&&Wt(),he):Ct},he.chords=function(){return Te||Ut(),Te},he.groups=function(){return Le||Ut(),Le},he},d.layout.force=function(){var he={},Te=d.dispatch("start","tick","end"),Le,Be=[1,1],Ne,Ke,mt=.9,vt=Is,Ct=lo,Ut=-30,Wt=Vl,jt=.1,_r=.64,Qr=[],cn=[],Mr,Ur,Wr;function sn(Zr){return function(Gn,na,wa,oa){if(Gn.point!==Zr){var Ea=Gn.cx-Zr.x,fa=Gn.cy-Zr.y,Va=oa-na,Ra=Ea*Ea+fa*fa;if(Va*Va/_r<Ra){if(Ra<Wt){var $a=Gn.charge/Ra;Zr.px-=Ea*$a,Zr.py-=fa*$a}return!0}if(Gn.point&&Ra&&Ra<Wt){var $a=Gn.pointCharge/Ra;Zr.px-=Ea*$a,Zr.py-=fa*$a}}return!Gn.charge}}he.tick=function(){if((Ke*=.99)<.005)return Le=null,Te.end({type:"end",alpha:Ke=0}),!0;var Zr=Qr.length,Gn=cn.length,na,wa,oa,Ea,fa,Va,Ra,$a,gi;for(wa=0;wa<Gn;++wa)oa=cn[wa],Ea=oa.source,fa=oa.target,$a=fa.x-Ea.x,gi=fa.y-Ea.y,(Va=$a*$a+gi*gi)&&(Va=Ke*Ur[wa]*((Va=Math.sqrt(Va))-Mr[wa])/Va,$a*=Va,gi*=Va,fa.x-=$a*(Ra=Ea.weight+fa.weight?Ea.weight/(Ea.weight+fa.weight):.5),fa.y-=gi*Ra,Ea.x+=$a*(Ra=1-Ra),Ea.y+=gi*Ra);if((Ra=Ke*jt)&&($a=Be[0]/2,gi=Be[1]/2,wa=-1,Ra))for(;++wa<Zr;)oa=Qr[wa],oa.x+=($a-oa.x)*Ra,oa.y+=(gi-oa.y)*Ra;if(Ut)for(Rs(na=d.geom.quadtree(Qr),Ke,Wr),wa=-1;++wa<Zr;)(oa=Qr[wa]).fixed||na.visit(sn(oa));for(wa=-1;++wa<Zr;)oa=Qr[wa],oa.fixed?(oa.x=oa.px,oa.y=oa.py):(oa.x-=(oa.px-(oa.px=oa.x))*mt,oa.y-=(oa.py-(oa.py=oa.y))*mt);Te.tick({type:"tick",alpha:Ke})},he.nodes=function(Zr){return arguments.length?(Qr=Zr,he):Qr},he.links=function(Zr){return arguments.length?(cn=Zr,he):cn},he.size=function(Zr){return arguments.length?(Be=Zr,he):Be},he.linkDistance=function(Zr){return arguments.length?(vt=typeof Zr=="function"?Zr:+Zr,he):vt},he.distance=he.linkDistance,he.linkStrength=function(Zr){return arguments.length?(Ct=typeof Zr=="function"?Zr:+Zr,he):Ct},he.friction=function(Zr){return arguments.length?(mt=+Zr,he):mt},he.charge=function(Zr){return arguments.length?(Ut=typeof Zr=="function"?Zr:+Zr,he):Ut},he.chargeDistance=function(Zr){return arguments.length?(Wt=Zr*Zr,he):Math.sqrt(Wt)},he.gravity=function(Zr){return arguments.length?(jt=+Zr,he):jt},he.theta=function(Zr){return arguments.length?(_r=Zr*Zr,he):Math.sqrt(_r)},he.alpha=function(Zr){return arguments.length?(Zr=+Zr,Ke?Zr>0?Ke=Zr:(Le.c=null,Le.t=NaN,Le=null,Te.end({type:"end",alpha:Ke=0})):Zr>0&&(Te.start({type:"start",alpha:Ke=Zr}),Le=kn(he.tick)),he):Ke},he.start=function(){var Zr,Gn=Qr.length,na=cn.length,wa=Be[0],oa=Be[1],Ea,fa;for(Zr=0;Zr<Gn;++Zr)(fa=Qr[Zr]).index=Zr,fa.weight=0;for(Zr=0;Zr<na;++Zr)fa=cn[Zr],typeof fa.source=="number"&&(fa.source=Qr[fa.source]),typeof fa.target=="number"&&(fa.target=Qr[fa.target]),++fa.source.weight,++fa.target.weight;for(Zr=0;Zr<Gn;++Zr)fa=Qr[Zr],isNaN(fa.x)&&(fa.x=Va("x",wa)),isNaN(fa.y)&&(fa.y=Va("y",oa)),isNaN(fa.px)&&(fa.px=fa.x),isNaN(fa.py)&&(fa.py=fa.y);if(Mr=[],typeof vt=="function")for(Zr=0;Zr<na;++Zr)Mr[Zr]=+vt.call(this,cn[Zr],Zr);else for(Zr=0;Zr<na;++Zr)Mr[Zr]=vt;if(Ur=[],typeof Ct=="function")for(Zr=0;Zr<na;++Zr)Ur[Zr]=+Ct.call(this,cn[Zr],Zr);else for(Zr=0;Zr<na;++Zr)Ur[Zr]=Ct;if(Wr=[],typeof Ut=="function")for(Zr=0;Zr<Gn;++Zr)Wr[Zr]=+Ut.call(this,Qr[Zr],Zr);else for(Zr=0;Zr<Gn;++Zr)Wr[Zr]=Ut;function Va(Ra,$a){if(!Ea){for(Ea=new Array(Gn),Ii=0;Ii<Gn;++Ii)Ea[Ii]=[];for(Ii=0;Ii<na;++Ii){var gi=cn[Ii];Ea[gi.source.index].push(gi.target),Ea[gi.target.index].push(gi.source)}}for(var ho=Ea[Zr],Ii=-1,ha=ho.length,ai;++Ii<ha;)if(!isNaN(ai=ho[Ii][Ra]))return ai;return Math.random()*$a}return he.resume()},he.resume=function(){return he.alpha(.1)},he.stop=function(){return he.alpha(0)},he.drag=function(){if(Ne||(Ne=d.behavior.drag().origin(R).on("dragstart.force",Au).on("drag.force",un).on("dragend.force",Ts)),!arguments.length)return Ne;this.on("mouseover.force",Eo).on("mouseout.force",lu).call(Ne)};function un(Zr){Zr.px=d.event.x,Zr.py=d.event.y,he.resume()}return d.rebind(he,Te,"on")};function Au(he){he.fixed|=2}function Ts(he){he.fixed&=~6}function Eo(he){he.fixed|=4,he.px=he.x,he.py=he.y}function lu(he){he.fixed&=~4}function Rs(he,Te,Le){var Be=0,Ne=0;if(he.charge=0,!he.leaf)for(var Ke=he.nodes,mt=Ke.length,vt=-1,Ct;++vt<mt;)Ct=Ke[vt],Ct!=null&&(Rs(Ct,Te,Le),he.charge+=Ct.charge,Be+=Ct.charge*Ct.cx,Ne+=Ct.charge*Ct.cy);if(he.point){he.leaf||(he.point.x+=Math.random()-.5,he.point.y+=Math.random()-.5);var Ut=Te*Le[he.point.index];he.charge+=he.pointCharge=Ut,Be+=Ut*he.point.x,Ne+=Ut*he.point.y}he.cx=Be/he.charge,he.cy=Ne/he.charge}var Is=20,lo=1,Vl=1/0;d.layout.hierarchy=function(){var he=uu,Te=Gl,Le=Ll;function Be(Ne){var Ke=[Ne],mt=[],vt;for(Ne.depth=0;(vt=Ke.pop())!=null;)if(mt.push(vt),(Ut=Te.call(Be,vt,vt.depth))&&(Ct=Ut.length)){for(var Ct,Ut,Wt;--Ct>=0;)Ke.push(Wt=Ut[Ct]),Wt.parent=vt,Wt.depth=vt.depth+1;Le&&(vt.value=0),vt.children=Ut}else Le&&(vt.value=+Le.call(Be,vt,vt.depth)||0),delete vt.children;return As(Ne,function(jt){var _r,Qr;he&&(_r=jt.children)&&_r.sort(he),Le&&(Qr=jt.parent)&&(Qr.value+=jt.value)}),mt}return Be.sort=function(Ne){return arguments.length?(he=Ne,Be):he},Be.children=function(Ne){return arguments.length?(Te=Ne,Be):Te},Be.value=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be.revalue=function(Ne){return Le&&(fl(Ne,function(Ke){Ke.children&&(Ke.value=0)}),As(Ne,function(Ke){var mt;Ke.children||(Ke.value=+Le.call(Be,Ke,Ke.depth)||0),(mt=Ke.parent)&&(mt.value+=Ke.value)})),Ne},Be};function Hl(he,Te){return d.rebind(he,Te,"sort","children","value"),he.nodes=he,he.links=Yl,he}function fl(he,Te){for(var Le=[he];(he=Le.pop())!=null;)if(Te(he),(Ne=he.children)&&(Be=Ne.length))for(var Be,Ne;--Be>=0;)Le.push(Ne[Be])}function As(he,Te){for(var Le=[he],Be=[];(he=Le.pop())!=null;)if(Be.push(he),(mt=he.children)&&(Ke=mt.length))for(var Ne=-1,Ke,mt;++Ne<Ke;)Le.push(mt[Ne]);for(;(he=Be.pop())!=null;)Te(he)}function Gl(he){return he.children}function Ll(he){return he.value}function uu(he,Te){return Te.value-he.value}function Yl(he){return d.merge(he.map(function(Te){return(Te.children||[]).map(function(Le){return{source:Te,target:Le}})}))}d.layout.partition=function(){var he=d.layout.hierarchy(),Te=[1,1];function Le(Ke,mt,vt,Ct){var Ut=Ke.children;if(Ke.x=mt,Ke.y=Ke.depth*Ct,Ke.dx=vt,Ke.dy=Ct,Ut&&(jt=Ut.length)){var Wt=-1,jt,_r,Qr;for(vt=Ke.value?vt/Ke.value:0;++Wt<jt;)Le(_r=Ut[Wt],mt,Qr=_r.value*vt,Ct),mt+=Qr}}function Be(Ke){var mt=Ke.children,vt=0;if(mt&&(Ut=mt.length))for(var Ct=-1,Ut;++Ct<Ut;)vt=Math.max(vt,Be(mt[Ct]));return 1+vt}function Ne(Ke,mt){var vt=he.call(this,Ke,mt);return Le(vt[0],0,Te[0],Te[1]/Be(vt[0])),vt}return Ne.size=function(Ke){return arguments.length?(Te=Ke,Ne):Te},Hl(Ne,he)},d.layout.pie=function(){var he=Number,Te=cl,Le=0,Be=je,Ne=0;function Ke(mt){var vt=mt.length,Ct=mt.map(function(sn,un){return+he.call(Ke,sn,un)}),Ut=+(typeof Le=="function"?Le.apply(this,arguments):Le),Wt=(typeof Be=="function"?Be.apply(this,arguments):Be)-Ut,jt=Math.min(Math.abs(Wt)/vt,+(typeof Ne=="function"?Ne.apply(this,arguments):Ne)),_r=jt*(Wt<0?-1:1),Qr=d.sum(Ct),cn=Qr?(Wt-vt*_r)/Qr:0,Mr=d.range(vt),Ur=[],Wr;return Te!=null&&Mr.sort(Te===cl?function(sn,un){return Ct[un]-Ct[sn]}:function(sn,un){return Te(mt[sn],mt[un])}),Mr.forEach(function(sn){Ur[sn]={data:mt[sn],value:Wr=Ct[sn],startAngle:Ut,endAngle:Ut+=Wr*cn+_r,padAngle:jt}}),Ur}return Ke.value=function(mt){return arguments.length?(he=mt,Ke):he},Ke.sort=function(mt){return arguments.length?(Te=mt,Ke):Te},Ke.startAngle=function(mt){return arguments.length?(Le=mt,Ke):Le},Ke.endAngle=function(mt){return arguments.length?(Be=mt,Ke):Be},Ke.padAngle=function(mt){return arguments.length?(Ne=mt,Ke):Ne},Ke};var cl={};d.layout.stack=function(){var he=R,Te=Wl,Le=hl,Be=zf,Ne=df,Ke=fs;function mt(vt,Ct){if(!(cn=vt.length))return vt;var Ut=vt.map(function(sn,un){return he.call(mt,sn,un)}),Wt=Ut.map(function(sn){return sn.map(function(un,Zr){return[Ne.call(mt,un,Zr),Ke.call(mt,un,Zr)]})}),jt=Te.call(mt,Wt,Ct);Ut=d.permute(Ut,jt),Wt=d.permute(Wt,jt);var _r=Le.call(mt,Wt,Ct),Qr=Ut[0].length,cn,Mr,Ur,Wr;for(Ur=0;Ur<Qr;++Ur)for(Be.call(mt,Ut[0][Ur],Wr=_r[Ur],Wt[0][Ur][1]),Mr=1;Mr<cn;++Mr)Be.call(mt,Ut[Mr][Ur],Wr+=Wt[Mr-1][Ur][1],Wt[Mr][Ur][1]);return vt}return mt.values=function(vt){return arguments.length?(he=vt,mt):he},mt.order=function(vt){return arguments.length?(Te=typeof vt=="function"?vt:Mu.get(vt)||Wl,mt):Te},mt.offset=function(vt){return arguments.length?(Le=typeof vt=="function"?vt:Pl.get(vt)||hl,mt):Le},mt.x=function(vt){return arguments.length?(Ne=vt,mt):Ne},mt.y=function(vt){return arguments.length?(Ke=vt,mt):Ke},mt.out=function(vt){return arguments.length?(Be=vt,mt):Be},mt};function df(he){return he.x}function fs(he){return he.y}function zf(he,Te,Le){he.y0=Te,he.y=Le}var Mu=d.map({"inside-out":function(he){var Te=he.length,Le,Be,Ne=he.map(Xl),Ke=he.map(Wu),mt=d.range(Te).sort(function(jt,_r){return Ne[jt]-Ne[_r]}),vt=0,Ct=0,Ut=[],Wt=[];for(Le=0;Le<Te;++Le)Be=mt[Le],vt<Ct?(vt+=Ke[Be],Ut.push(Be)):(Ct+=Ke[Be],Wt.push(Be));return Wt.reverse().concat(Ut)},reverse:function(he){return d.range(he.length).reverse()},default:Wl}),Pl=d.map({silhouette:function(he){var Te=he.length,Le=he[0].length,Be=[],Ne=0,Ke,mt,vt,Ct=[];for(mt=0;mt<Le;++mt){for(Ke=0,vt=0;Ke<Te;Ke++)vt+=he[Ke][mt][1];vt>Ne&&(Ne=vt),Be.push(vt)}for(mt=0;mt<Le;++mt)Ct[mt]=(Ne-Be[mt])/2;return Ct},wiggle:function(he){var Te=he.length,Le=he[0],Be=Le.length,Ne,Ke,mt,vt,Ct,Ut,Wt,jt,_r,Qr=[];for(Qr[0]=jt=_r=0,Ke=1;Ke<Be;++Ke){for(Ne=0,vt=0;Ne<Te;++Ne)vt+=he[Ne][Ke][1];for(Ne=0,Ct=0,Wt=Le[Ke][0]-Le[Ke-1][0];Ne<Te;++Ne){for(mt=0,Ut=(he[Ne][Ke][1]-he[Ne][Ke-1][1])/(2*Wt);mt<Ne;++mt)Ut+=(he[mt][Ke][1]-he[mt][Ke-1][1])/Wt;Ct+=Ut*he[Ne][Ke][1]}Qr[Ke]=jt-=vt?Ct/vt*Wt:0,jt<_r&&(_r=jt)}for(Ke=0;Ke<Be;++Ke)Qr[Ke]-=_r;return Qr},expand:function(he){var Te=he.length,Le=he[0].length,Be=1/Te,Ne,Ke,mt,vt=[];for(Ke=0;Ke<Le;++Ke){for(Ne=0,mt=0;Ne<Te;Ne++)mt+=he[Ne][Ke][1];if(mt)for(Ne=0;Ne<Te;Ne++)he[Ne][Ke][1]/=mt;else for(Ne=0;Ne<Te;Ne++)he[Ne][Ke][1]=Be}for(Ke=0;Ke<Le;++Ke)vt[Ke]=0;return vt},zero:hl});function Wl(he){return d.range(he.length)}function hl(he){for(var Te=-1,Le=he[0].length,Be=[];++Te<Le;)Be[Te]=0;return Be}function Xl(he){for(var Te=1,Le=0,Be=he[0][1],Ne,Ke=he.length;Te<Ke;++Te)(Ne=he[Te][1])>Be&&(Le=Te,Be=Ne);return Le}function Wu(he){return he.reduce(Xu,0)}function Xu(he,Te){return he+Te[1]}d.layout.histogram=function(){var he=!0,Te=Number,Le=Dl,Be=Ff;function Ne(Ke,mt){for(var vt=[],Ct=Ke.map(Te,this),Ut=Le.call(this,Ct,mt),Wt=Be.call(this,Ut,Ct,mt),jt,mt=-1,_r=Ct.length,Qr=Wt.length-1,cn=he?1:1/_r,Mr;++mt<Qr;)jt=vt[mt]=[],jt.dx=Wt[mt+1]-(jt.x=Wt[mt]),jt.y=0;if(Qr>0)for(mt=-1;++mt<_r;)Mr=Ct[mt],Mr>=Ut[0]&&Mr<=Ut[1]&&(jt=vt[d.bisect(Wt,Mr,1,Qr)-1],jt.y+=cn,jt.push(Ke[mt]));return vt}return Ne.value=function(Ke){return arguments.length?(Te=Ke,Ne):Te},Ne.range=function(Ke){return arguments.length?(Le=at(Ke),Ne):Le},Ne.bins=function(Ke){return arguments.length?(Be=typeof Ke=="number"?function(mt){return Ri(mt,Ke)}:at(Ke),Ne):Be},Ne.frequency=function(Ke){return arguments.length?(he=!!Ke,Ne):he},Ne};function Ff(he,Te){return Ri(he,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Ri(he,Te){for(var Le=-1,Be=+he[0],Ne=(he[1]-Be)/Te,Ke=[];++Le<=Te;)Ke[Le]=Ne*Le+Be;return Ke}function Dl(he){return[d.min(he),d.max(he)]}d.layout.pack=function(){var he=d.layout.hierarchy().sort(vl),Te=0,Le=[1,1],Be;function Ne(Ke,mt){var vt=he.call(this,Ke,mt),Ct=vt[0],Ut=Le[0],Wt=Le[1],jt=Be==null?Math.sqrt:typeof Be=="function"?Be:function(){return Be};if(Ct.x=Ct.y=0,As(Ct,function(Qr){Qr.r=+jt(Qr.value)}),As(Ct,uo),Te){var _r=Te*(Be?1:Math.max(2*Ct.r/Ut,2*Ct.r/Wt))/2;As(Ct,function(Qr){Qr.r+=_r}),As(Ct,uo),As(Ct,function(Qr){Qr.r-=_r})}return Ks(Ct,Ut/2,Wt/2,Be?1:1/Math.max(2*Ct.r/Ut,2*Ct.r/Wt)),vt}return Ne.size=function(Ke){return arguments.length?(Le=Ke,Ne):Le},Ne.radius=function(Ke){return arguments.length?(Be=Ke==null||typeof Ke=="function"?Ke:+Ke,Ne):Be},Ne.padding=function(Ke){return arguments.length?(Te=+Ke,Ne):Te},Hl(Ne,he)};function vl(he,Te){return he.value-Te.value}function as(he,Te){var Le=he._pack_next;he._pack_next=Te,Te._pack_prev=he,Te._pack_next=Le,Le._pack_prev=Te}function cs(he,Te){he._pack_next=Te,Te._pack_prev=he}function jl(he,Te){var Le=Te.x-he.x,Be=Te.y-he.y,Ne=he.r+Te.r;return .999*Ne*Ne>Le*Le+Be*Be}function uo(he){if(!(Te=he.children)||!(_r=Te.length))return;var Te,Le=1/0,Be=-1/0,Ne=1/0,Ke=-1/0,mt,vt,Ct,Ut,Wt,jt,_r;function Qr(Zr){Le=Math.min(Zr.x-Zr.r,Le),Be=Math.max(Zr.x+Zr.r,Be),Ne=Math.min(Zr.y-Zr.r,Ne),Ke=Math.max(Zr.y+Zr.r,Ke)}if(Te.forEach(ju),mt=Te[0],mt.x=-mt.r,mt.y=0,Qr(mt),_r>1&&(vt=Te[1],vt.x=vt.r,vt.y=0,Qr(vt),_r>2))for(Ct=Te[2],Js(mt,vt,Ct),Qr(Ct),as(mt,Ct),mt._pack_prev=Ct,as(Ct,vt),vt=mt._pack_next,Ut=3;Ut<_r;Ut++){Js(mt,vt,Ct=Te[Ut]);var cn=0,Mr=1,Ur=1;for(Wt=vt._pack_next;Wt!==vt;Wt=Wt._pack_next,Mr++)if(jl(Wt,Ct)){cn=1;break}if(cn==1)for(jt=mt._pack_prev;jt!==Wt._pack_prev&&!jl(jt,Ct);jt=jt._pack_prev,Ur++);cn?(Mr<Ur||Mr==Ur&&vt.r<mt.r?cs(mt,vt=Wt):cs(mt=jt,vt),Ut--):(as(mt,Ct),vt=Ct,Qr(Ct))}var Wr=(Le+Be)/2,sn=(Ne+Ke)/2,un=0;for(Ut=0;Ut<_r;Ut++)Ct=Te[Ut],Ct.x-=Wr,Ct.y-=sn,un=Math.max(un,Ct.r+Math.sqrt(Ct.x*Ct.x+Ct.y*Ct.y));he.r=un,Te.forEach(hs)}function ju(he){he._pack_next=he._pack_prev=he}function hs(he){delete he._pack_next,delete he._pack_prev}function Ks(he,Te,Le,Be){var Ne=he.children;if(he.x=Te+=Be*he.x,he.y=Le+=Be*he.y,he.r*=Be,Ne)for(var Ke=-1,mt=Ne.length;++Ke<mt;)Ks(Ne[Ke],Te,Le,Be)}function Js(he,Te,Le){var Be=he.r+Le.r,Ne=Te.x-he.x,Ke=Te.y-he.y;if(Be&&(Ne||Ke)){var mt=Te.r+Le.r,vt=Ne*Ne+Ke*Ke;mt*=mt,Be*=Be;var Ct=.5+(Be-mt)/(2*vt),Ut=Math.sqrt(Math.max(0,2*mt*(Be+vt)-(Be-=vt)*Be-mt*mt))/(2*vt);Le.x=he.x+Ct*Ne+Ut*Ke,Le.y=he.y+Ct*Ke-Ut*Ne}else Le.x=he.x+Be,Le.y=he.y}d.layout.tree=function(){var he=d.layout.hierarchy().sort(null).value(null),Te=zs,Le=[1,1],Be=null;function Ne(Wt,jt){var _r=he.call(this,Wt,jt),Qr=_r[0],cn=Ke(Qr);if(As(cn,mt),cn.parent.m=-cn.z,fl(cn,vt),Be)fl(Qr,Ut);else{var Mr=Qr,Ur=Qr,Wr=Qr;fl(Qr,function(Gn){Gn.x<Mr.x&&(Mr=Gn),Gn.x>Ur.x&&(Ur=Gn),Gn.depth>Wr.depth&&(Wr=Gn)});var sn=Te(Mr,Ur)/2-Mr.x,un=Le[0]/(Ur.x+Te(Ur,Mr)/2+sn),Zr=Le[1]/(Wr.depth||1);fl(Qr,function(Gn){Gn.x=(Gn.x+sn)*un,Gn.y=Gn.depth*Zr})}return _r}function Ke(Wt){for(var jt={A:null,children:[Wt]},_r=[jt],Qr;(Qr=_r.pop())!=null;)for(var cn=Qr.children,Mr,Ur=0,Wr=cn.length;Ur<Wr;++Ur)_r.push((cn[Ur]=Mr={_:cn[Ur],parent:Qr,children:(Mr=cn[Ur].children)&&Mr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ur}).a=Mr);return jt.children[0]}function mt(Wt){var jt=Wt.children,_r=Wt.parent.children,Qr=Wt.i?_r[Wt.i-1]:null;if(jt.length){ps(Wt);var cn=(jt[0].z+jt[jt.length-1].z)/2;Qr?(Wt.z=Qr.z+Te(Wt._,Qr._),Wt.m=Wt.z-cn):Wt.z=cn}else Qr&&(Wt.z=Qr.z+Te(Wt._,Qr._));Wt.parent.A=Ct(Wt,Qr,Wt.parent.A||_r[0])}function vt(Wt){Wt._.x=Wt.z+Wt.parent.m,Wt.m+=Wt.parent.m}function Ct(Wt,jt,_r){if(jt){for(var Qr=Wt,cn=Wt,Mr=jt,Ur=Qr.parent.children[0],Wr=Qr.m,sn=cn.m,un=Mr.m,Zr=Ur.m,Gn;Mr=Vi(Mr),Qr=vs(Qr),Mr&&Qr;)Ur=vs(Ur),cn=Vi(cn),cn.a=Wt,Gn=Mr.z+un-Qr.z-Wr+Te(Mr._,Qr._),Gn>0&&(Co(Zu(Mr,Wt,_r),Wt,Gn),Wr+=Gn,sn+=Gn),un+=Mr.m,Wr+=Qr.m,Zr+=Ur.m,sn+=cn.m;Mr&&!Vi(cn)&&(cn.t=Mr,cn.m+=un-sn),Qr&&!vs(Ur)&&(Ur.t=Qr,Ur.m+=Wr-Zr,_r=Wt)}return _r}function Ut(Wt){Wt.x*=Le[0],Wt.y=Wt.depth*Le[1]}return Ne.separation=function(Wt){return arguments.length?(Te=Wt,Ne):Te},Ne.size=function(Wt){return arguments.length?(Be=(Le=Wt)==null?Ut:null,Ne):Be?null:Le},Ne.nodeSize=function(Wt){return arguments.length?(Be=(Le=Wt)==null?null:Ut,Ne):Be?Le:null},Hl(Ne,he)};function zs(he,Te){return he.parent==Te.parent?1:2}function vs(he){var Te=he.children;return Te.length?Te[0]:he.t}function Vi(he){var Te=he.children,Le;return(Le=Te.length)?Te[Le-1]:he.t}function Co(he,Te,Le){var Be=Le/(Te.i-he.i);Te.c-=Be,Te.s+=Le,he.c+=Be,Te.z+=Le,Te.m+=Le}function ps(he){for(var Te=0,Le=0,Be=he.children,Ne=Be.length,Ke;--Ne>=0;)Ke=Be[Ne],Ke.z+=Te,Ke.m+=Te,Te+=Ke.s+(Le+=Ke.c)}function Zu(he,Te,Le){return he.a.parent===Te.parent?he.a:Le}d.layout.cluster=function(){var he=d.layout.hierarchy().sort(null).value(null),Te=zs,Le=[1,1],Be=!1;function Ne(Ke,mt){var vt=he.call(this,Ke,mt),Ct=vt[0],Ut,Wt=0;As(Ct,function(Mr){var Ur=Mr.children;Ur&&Ur.length?(Mr.x=Ku(Ur),Mr.y=fu(Ur)):(Mr.x=Ut?Wt+=Te(Mr,Ut):0,Mr.y=0,Ut=Mr)});var jt=xt(Ct),_r=It(Ct),Qr=jt.x-Te(jt,_r)/2,cn=_r.x+Te(_r,jt)/2;return As(Ct,Be?function(Mr){Mr.x=(Mr.x-Ct.x)*Le[0],Mr.y=(Ct.y-Mr.y)*Le[1]}:function(Mr){Mr.x=(Mr.x-Qr)/(cn-Qr)*Le[0],Mr.y=(1-(Ct.y?Mr.y/Ct.y:1))*Le[1]}),vt}return Ne.separation=function(Ke){return arguments.length?(Te=Ke,Ne):Te},Ne.size=function(Ke){return arguments.length?(Be=(Le=Ke)==null,Ne):Be?null:Le},Ne.nodeSize=function(Ke){return arguments.length?(Be=(Le=Ke)!=null,Ne):Be?Le:null},Hl(Ne,he)};function fu(he){return 1+d.max(he,function(Te){return Te.y})}function Ku(he){return he.reduce(function(Te,Le){return Te+Le.x},0)/he.length}function xt(he){var Te=he.children;return Te&&Te.length?xt(Te[0]):he}function It(he){var Te=he.children,Le;return Te&&(Le=Te.length)?It(Te[Le-1]):he}d.layout.treemap=function(){var he=d.layout.hierarchy(),Te=Math.round,Le=[1,1],Be=null,Ne=nr,Ke=!1,mt,vt="squarify",Ct=.5*(1+Math.sqrt(5));function Ut(Mr,Ur){for(var Wr=-1,sn=Mr.length,un,Zr;++Wr<sn;)Zr=(un=Mr[Wr]).value*(Ur<0?0:Ur),un.area=isNaN(Zr)||Zr<=0?0:Zr}function Wt(Mr){var Ur=Mr.children;if(Ur&&Ur.length){var Wr=Ne(Mr),sn=[],un=Ur.slice(),Zr,Gn=1/0,na,wa=vt==="slice"?Wr.dx:vt==="dice"?Wr.dy:vt==="slice-dice"?Mr.depth&1?Wr.dy:Wr.dx:Math.min(Wr.dx,Wr.dy),oa;for(Ut(un,Wr.dx*Wr.dy/Mr.value),sn.area=0;(oa=un.length)>0;)sn.push(Zr=un[oa-1]),sn.area+=Zr.area,vt!=="squarify"||(na=_r(sn,wa))<=Gn?(un.pop(),Gn=na):(sn.area-=sn.pop().area,Qr(sn,wa,Wr,!1),wa=Math.min(Wr.dx,Wr.dy),sn.length=sn.area=0,Gn=1/0);sn.length&&(Qr(sn,wa,Wr,!0),sn.length=sn.area=0),Ur.forEach(Wt)}}function jt(Mr){var Ur=Mr.children;if(Ur&&Ur.length){var Wr=Ne(Mr),sn=Ur.slice(),un,Zr=[];for(Ut(sn,Wr.dx*Wr.dy/Mr.value),Zr.area=0;un=sn.pop();)Zr.push(un),Zr.area+=un.area,un.z!=null&&(Qr(Zr,un.z?Wr.dx:Wr.dy,Wr,!sn.length),Zr.length=Zr.area=0);Ur.forEach(jt)}}function _r(Mr,Ur){for(var Wr=Mr.area,sn,un=0,Zr=1/0,Gn=-1,na=Mr.length;++Gn<na;)!(sn=Mr[Gn].area)||(sn<Zr&&(Zr=sn),sn>un&&(un=sn));return Wr*=Wr,Ur*=Ur,Wr?Math.max(Ur*un*Ct/Wr,Wr/(Ur*Zr*Ct)):1/0}function Qr(Mr,Ur,Wr,sn){var un=-1,Zr=Mr.length,Gn=Wr.x,na=Wr.y,wa=Ur?Te(Mr.area/Ur):0,oa;if(Ur==Wr.dx){for((sn||wa>Wr.dy)&&(wa=Wr.dy);++un<Zr;)oa=Mr[un],oa.x=Gn,oa.y=na,oa.dy=wa,Gn+=oa.dx=Math.min(Wr.x+Wr.dx-Gn,wa?Te(oa.area/wa):0);oa.z=!0,oa.dx+=Wr.x+Wr.dx-Gn,Wr.y+=wa,Wr.dy-=wa}else{for((sn||wa>Wr.dx)&&(wa=Wr.dx);++un<Zr;)oa=Mr[un],oa.x=Gn,oa.y=na,oa.dx=wa,na+=oa.dy=Math.min(Wr.y+Wr.dy-na,wa?Te(oa.area/wa):0);oa.z=!1,oa.dy+=Wr.y+Wr.dy-na,Wr.x+=wa,Wr.dx-=wa}}function cn(Mr){var Ur=mt||he(Mr),Wr=Ur[0];return Wr.x=Wr.y=0,Wr.value?(Wr.dx=Le[0],Wr.dy=Le[1]):Wr.dx=Wr.dy=0,mt&&he.revalue(Wr),Ut([Wr],Wr.dx*Wr.dy/Wr.value),(mt?jt:Wt)(Wr),Ke&&(mt=Ur),Ur}return cn.size=function(Mr){return arguments.length?(Le=Mr,cn):Le},cn.padding=function(Mr){if(!arguments.length)return Be;function Ur(un){var Zr=Mr.call(cn,un,un.depth);return Zr==null?nr(un):Jt(un,typeof Zr=="number"?[Zr,Zr,Zr,Zr]:Zr)}function Wr(un){return Jt(un,Mr)}var sn;return Ne=(Be=Mr)==null?nr:(sn=typeof Mr)==="function"?Ur:(sn==="number"&&(Mr=[Mr,Mr,Mr,Mr]),Wr),cn},cn.round=function(Mr){return arguments.length?(Te=Mr?Math.round:Number,cn):Te!=Number},cn.sticky=function(Mr){return arguments.length?(Ke=Mr,mt=null,cn):Ke},cn.ratio=function(Mr){return arguments.length?(Ct=Mr,cn):Ct},cn.mode=function(Mr){return arguments.length?(vt=Mr+"",cn):vt},Hl(cn,he)};function nr(he){return{x:he.x,y:he.y,dx:he.dx,dy:he.dy}}function Jt(he,Te){var Le=he.x+Te[3],Be=he.y+Te[0],Ne=he.dx-Te[1]-Te[3],Ke=he.dy-Te[0]-Te[2];return Ne<0&&(Le+=Ne/2,Ne=0),Ke<0&&(Be+=Ke/2,Ke=0),{x:Le,y:Be,dx:Ne,dy:Ke}}d.random={normal:function(he,Te){var Le=arguments.length;return Le<2&&(Te=1),Le<1&&(he=0),function(){var Be,Ne,Ke;do Be=Math.random()*2-1,Ne=Math.random()*2-1,Ke=Be*Be+Ne*Ne;while(!Ke||Ke>1);return he+Te*Be*Math.sqrt(-2*Math.log(Ke)/Ke)}},logNormal:function(){var he=d.random.normal.apply(d,arguments);return function(){return Math.exp(he())}},bates:function(he){var Te=d.random.irwinHall(he);return function(){return Te()/he}},irwinHall:function(he){return function(){for(var Te=0,Le=0;Le<he;Le++)Te+=Math.random();return Te}}},d.scale={};function Cr(he){var Te=he[0],Le=he[he.length-1];return Te<Le?[Te,Le]:[Le,Te]}function an(he){return he.rangeExtent?he.rangeExtent():Cr(he.range())}function dn(he,Te,Le,Be){var Ne=Le(he[0],he[1]),Ke=Be(Te[0],Te[1]);return function(mt){return Ke(Ne(mt))}}function Tn(he,Te){var Le=0,Be=he.length-1,Ne=he[Le],Ke=he[Be],mt;return Ke<Ne&&(mt=Le,Le=Be,Be=mt,mt=Ne,Ne=Ke,Ke=mt),he[Le]=Te.floor(Ne),he[Be]=Te.ceil(Ke),he}function Cn(he){return he?{floor:function(Te){return Math.floor(Te/he)*he},ceil:function(Te){return Math.ceil(Te/he)*he}}:Hn}var Hn={floor:R,ceil:R};function xn(he,Te,Le,Be){var Ne=[],Ke=[],mt=0,vt=Math.min(he.length,Te.length)-1;for(he[vt]<he[0]&&(he=he.slice().reverse(),Te=Te.slice().reverse());++mt<=vt;)Ne.push(Le(he[mt-1],he[mt])),Ke.push(Be(Te[mt-1],Te[mt]));return function(Ct){var Ut=d.bisect(he,Ct,1,vt)-1;return Ke[Ut](Ne[Ut](Ct))}}d.scale.linear=function(){return In([0,1],[0,1],io,!1)};function In(he,Te,Le,Be){var Ne,Ke;function mt(){var Ct=Math.min(he.length,Te.length)>2?xn:dn,Ut=Be?Yu:pf;return Ne=Ct(he,Te,Ut,Le),Ke=Ct(Te,he,Ut,io),vt}function vt(Ct){return Ne(Ct)}return vt.invert=function(Ct){return Ke(Ct)},vt.domain=function(Ct){return arguments.length?(he=Ct.map(Number),mt()):he},vt.range=function(Ct){return arguments.length?(Te=Ct,mt()):Te},vt.rangeRound=function(Ct){return vt.range(Ct).interpolate(Vu)},vt.clamp=function(Ct){return arguments.length?(Be=Ct,mt()):Be},vt.interpolate=function(Ct){return arguments.length?(Le=Ct,mt()):Le},vt.ticks=function(Ct){return Oa(he,Ct)},vt.tickFormat=function(Ct,Ut){return d3_scale_linearTickFormat(he,Ct,Ut)},vt.nice=function(Ct){return Wn(he,Ct),mt()},vt.copy=function(){return In(he,Te,Le,Be)},mt()}function Ln(he,Te){return d.rebind(he,Te,"range","rangeRound","interpolate","clamp")}function Wn(he,Te){return Tn(he,Cn(qn(he,Te)[2])),Tn(he,Cn(qn(he,Te)[2])),he}function qn(he,Te){Te==null&&(Te=10);var Le=Cr(he),Be=Le[1]-Le[0],Ne=Math.pow(10,Math.floor(Math.log(Be/Te)/Math.LN10)),Ke=Te/Be*Ne;return Ke<=.15?Ne*=10:Ke<=.35?Ne*=5:Ke<=.75&&(Ne*=2),Le[0]=Math.ceil(Le[0]/Ne)*Ne,Le[1]=Math.floor(Le[1]/Ne)*Ne+Ne*.5,Le[2]=Ne,Le}function Oa(he,Te){return d.range.apply(d,qn(he,Te))}d.scale.log=function(){return La(d.scale.linear().domain([0,1]),10,!0,[1,10])};function La(he,Te,Le,Be){function Ne(vt){return(Le?Math.log(vt<0?0:vt):-Math.log(vt>0?0:-vt))/Math.log(Te)}function Ke(vt){return Le?Math.pow(Te,vt):-Math.pow(Te,-vt)}function mt(vt){return he(Ne(vt))}return mt.invert=function(vt){return Ke(he.invert(vt))},mt.domain=function(vt){return arguments.length?(Le=vt[0]>=0,he.domain((Be=vt.map(Number)).map(Ne)),mt):Be},mt.base=function(vt){return arguments.length?(Te=+vt,he.domain(Be.map(Ne)),mt):Te},mt.nice=function(){var vt=Tn(Be.map(Ne),Le?Math:Na);return he.domain(vt),Be=vt.map(Ke),mt},mt.ticks=function(){var vt=Cr(Be),Ct=[],Ut=vt[0],Wt=vt[1],jt=Math.floor(Ne(Ut)),_r=Math.ceil(Ne(Wt)),Qr=Te%1?2:Te;if(isFinite(_r-jt)){if(Le){for(;jt<_r;jt++)for(var cn=1;cn<Qr;cn++)Ct.push(Ke(jt)*cn);Ct.push(Ke(jt))}else for(Ct.push(Ke(jt));jt++<_r;)for(var cn=Qr-1;cn>0;cn--)Ct.push(Ke(jt)*cn);for(jt=0;Ct[jt]<Ut;jt++);for(_r=Ct.length;Ct[_r-1]>Wt;_r--);Ct=Ct.slice(jt,_r)}return Ct},mt.copy=function(){return La(he.copy(),Te,Le,Be)},Ln(mt,he)}var Na={floor:function(he){return-Math.ceil(-he)},ceil:function(he){return-Math.floor(-he)}};d.scale.pow=function(){return Ba(d.scale.linear(),1,[0,1])};function Ba(he,Te,Le){var Be=Qn(Te),Ne=Qn(1/Te);function Ke(mt){return he(Be(mt))}return Ke.invert=function(mt){return Ne(he.invert(mt))},Ke.domain=function(mt){return arguments.length?(he.domain((Le=mt.map(Number)).map(Be)),Ke):Le},Ke.ticks=function(mt){return Oa(Le,mt)},Ke.tickFormat=function(mt,vt){return d3_scale_linearTickFormat(Le,mt,vt)},Ke.nice=function(mt){return Ke.domain(Wn(Le,mt))},Ke.exponent=function(mt){return arguments.length?(Be=Qn(Te=mt),Ne=Qn(1/Te),he.domain(Le.map(Be)),Ke):Te},Ke.copy=function(){return Ba(he.copy(),Te,Le)},Ln(Ke,he)}function Qn(he){return function(Te){return Te<0?-Math.pow(-Te,he):Math.pow(Te,he)}}d.scale.sqrt=function(){return d.scale.pow().exponent(.5)},d.scale.ordinal=function(){return pa([],{t:"range",a:[[]]})};function pa(he,Te){var Le,Be,Ne;function Ke(vt){return Be[((Le.get(vt)||(Te.t==="range"?Le.set(vt,he.push(vt)):NaN))-1)%Be.length]}function mt(vt,Ct){return d.range(he.length).map(function(Ut){return vt+Ct*Ut})}return Ke.domain=function(vt){if(!arguments.length)return he;he=[],Le=new M;for(var Ct=-1,Ut=vt.length,Wt;++Ct<Ut;)Le.has(Wt=vt[Ct])||Le.set(Wt,he.push(Wt));return Ke[Te.t].apply(Ke,Te.a)},Ke.range=function(vt){return arguments.length?(Be=vt,Ne=0,Te={t:"range",a:arguments},Ke):Be},Ke.rangePoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Wt=vt[1],jt=he.length<2?(Ut=(Ut+Wt)/2,0):(Wt-Ut)/(he.length-1+Ct);return Be=mt(Ut+jt*Ct/2,jt),Ne=0,Te={t:"rangePoints",a:arguments},Ke},Ke.rangeRoundPoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Wt=vt[1],jt=he.length<2?(Ut=Wt=Math.round((Ut+Wt)/2),0):(Wt-Ut)/(he.length-1+Ct)|0;return Be=mt(Ut+Math.round(jt*Ct/2+(Wt-Ut-(he.length-1+Ct)*jt)/2),jt),Ne=0,Te={t:"rangeRoundPoints",a:arguments},Ke},Ke.rangeBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Wt=vt[1]<vt[0],jt=vt[Wt-0],_r=vt[1-Wt],Qr=(_r-jt)/(he.length-Ct+2*Ut);return Be=mt(jt+Qr*Ut,Qr),Wt&&Be.reverse(),Ne=Qr*(1-Ct),Te={t:"rangeBands",a:arguments},Ke},Ke.rangeRoundBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Wt=vt[1]<vt[0],jt=vt[Wt-0],_r=vt[1-Wt],Qr=Math.floor((_r-jt)/(he.length-Ct+2*Ut));return Be=mt(jt+Math.round((_r-jt-(he.length-Ct)*Qr)/2),Qr),Wt&&Be.reverse(),Ne=Math.round(Qr*(1-Ct)),Te={t:"rangeRoundBands",a:arguments},Ke},Ke.rangeBand=function(){return Ne},Ke.rangeExtent=function(){return Cr(Te.a[0])},Ke.copy=function(){return pa(he,Te)},Ke.domain(he)}d.scale.category10=function(){return d.scale.ordinal().range(Ya)},d.scale.category20=function(){return d.scale.ordinal().range(Qa)},d.scale.category20b=function(){return d.scale.ordinal().range(pi)},d.scale.category20c=function(){return d.scale.ordinal().range(di)};var Ya=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tn),Qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tn),pi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tn),di=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tn);d.scale.quantile=function(){return yi([],[])};function yi(he,Te){var Le;function Be(){var Ke=0,mt=Te.length;for(Le=[];++Ke<mt;)Le[Ke-1]=d.quantile(he,Ke/mt);return Ne}function Ne(Ke){if(!isNaN(Ke=+Ke))return Te[d.bisect(Le,Ke)]}return Ne.domain=function(Ke){return arguments.length?(he=Ke.map(f).filter(h).sort(i),Be()):he},Ne.range=function(Ke){return arguments.length?(Te=Ke,Be()):Te},Ne.quantiles=function(){return Le},Ne.invertExtent=function(Ke){return Ke=Te.indexOf(Ke),Ke<0?[NaN,NaN]:[Ke>0?Le[Ke-1]:he[0],Ke<Le.length?Le[Ke]:he[he.length-1]]},Ne.copy=function(){return yi(he,Te)},Be()}d.scale.quantize=function(){return Ti(0,1,[0,1])};function Ti(he,Te,Le){var Be,Ne;function Ke(vt){return Le[Math.max(0,Math.min(Ne,Math.floor(Be*(vt-he))))]}function mt(){return Be=Le.length/(Te-he),Ne=Le.length-1,Ke}return Ke.domain=function(vt){return arguments.length?(he=+vt[0],Te=+vt[vt.length-1],mt()):[he,Te]},Ke.range=function(vt){return arguments.length?(Le=vt,mt()):Le},Ke.invertExtent=function(vt){return vt=Le.indexOf(vt),vt=vt<0?NaN:vt/Be+he,[vt,vt+1/Be]},Ke.copy=function(){return Ti(he,Te,Le)},mt()}d.scale.threshold=function(){return oi([.5],[0,1])};function oi(he,Te){function Le(Be){if(Be<=Be)return Te[d.bisect(he,Be)]}return Le.domain=function(Be){return arguments.length?(he=Be,Le):he},Le.range=function(Be){return arguments.length?(Te=Be,Le):Te},Le.invertExtent=function(Be){return Be=Te.indexOf(Be),[he[Be-1],he[Be]]},Le.copy=function(){return oi(he,Te)},Le}d.scale.identity=function(){return mo([0,1])};function mo(he){function Te(Le){return+Le}return Te.invert=Te,Te.domain=Te.range=function(Le){return arguments.length?(he=Le.map(Te),Te):he},Te.ticks=function(Le){return Oa(he,Le)},Te.tickFormat=function(Le,Be){return d3_scale_linearTickFormat(he,Le,Be)},Te.copy=function(){return mo(he)},Te}d.svg={};function to(){return 0}d.svg.arc=function(){var he=ga,Te=mi,Le=to,Be=Ka,Ne=fo,Ke=po,mt=ds;function vt(){var Ut=Math.max(0,+he.apply(this,arguments)),Wt=Math.max(0,+Te.apply(this,arguments)),jt=Ne.apply(this,arguments)-ut,_r=Ke.apply(this,arguments)-ut,Qr=Math.abs(_r-jt),cn=jt>_r?0:1;if(Wt<Ut&&(Mr=Wt,Wt=Ut,Ut=Mr),Qr>=rt)return Ct(Wt,cn)+(Ut?Ct(Ut,1-cn):"")+"Z";var Mr,Ur,Wr,sn,un=0,Zr=0,Gn,na,wa,oa,Ea,fa,Va,Ra,$a=[];if((sn=(+mt.apply(this,arguments)||0)/2)&&(Wr=Be===Ka?Math.sqrt(Ut*Ut+Wt*Wt):+Be.apply(this,arguments),cn||(Zr*=-1),Wt&&(Zr=Xt(Wr/Wt*Math.sin(sn))),Ut&&(un=Xt(Wr/Ut*Math.sin(sn)))),Wt){Gn=Wt*Math.cos(jt+Zr),na=Wt*Math.sin(jt+Zr),wa=Wt*Math.cos(_r-Zr),oa=Wt*Math.sin(_r-Zr);var gi=Math.abs(_r-jt-2*Zr)<=Ce?0:1;if(Zr&&Fs(Gn,na,wa,oa)===cn^gi){var ho=(jt+_r)/2;Gn=Wt*Math.cos(ho),na=Wt*Math.sin(ho),wa=oa=null}}else Gn=na=0;if(Ut){Ea=Ut*Math.cos(_r-un),fa=Ut*Math.sin(_r-un),Va=Ut*Math.cos(jt+un),Ra=Ut*Math.sin(jt+un);var Ii=Math.abs(jt-_r+2*un)<=Ce?0:1;if(un&&Fs(Ea,fa,Va,Ra)===1-cn^Ii){var ha=(jt+_r)/2;Ea=Ut*Math.cos(ha),fa=Ut*Math.sin(ha),Va=Ra=null}}else Ea=fa=0;if(Qr>ht&&(Mr=Math.min(Math.abs(Wt-Ut)/2,+Le.apply(this,arguments)))>.001){Ur=Ut<Wt^cn?0:1;var ai=Mr,Xa=Mr;if(Qr<Ce){var Mi=Va==null?[Ea,fa]:wa==null?[Gn,na]:ca([Gn,na],[Va,Ra],[wa,oa],[Ea,fa]),si=Gn-Mi[0],so=na-Mi[1],$i=wa-Mi[0],yo=oa-Mi[1],Zo=1/Math.sin(Math.acos((si*$i+so*yo)/(Math.sqrt(si*si+so*so)*Math.sqrt($i*$i+yo*yo)))/2),Vo=Math.sqrt(Mi[0]*Mi[0]+Mi[1]*Mi[1]);Xa=Math.min(Mr,(Ut-Vo)/(Zo-1)),ai=Math.min(Mr,(Wt-Vo)/(Zo+1))}if(wa!=null){var Ko=Bo(Va==null?[Ea,fa]:[Va,Ra],[Gn,na],Wt,ai,cn),Gi=Bo([wa,oa],[Ea,fa],Wt,ai,cn);Mr===ai?$a.push("M",Ko[0],"A",ai,",",ai," 0 0,",Ur," ",Ko[1],"A",Wt,",",Wt," 0 ",1-cn^Fs(Ko[1][0],Ko[1][1],Gi[1][0],Gi[1][1]),",",cn," ",Gi[1],"A",ai,",",ai," 0 0,",Ur," ",Gi[0]):$a.push("M",Ko[0],"A",ai,",",ai," 0 1,",Ur," ",Gi[0])}else $a.push("M",Gn,",",na);if(Va!=null){var Ni=Bo([Gn,na],[Va,Ra],Ut,-Xa,cn),Fa=Bo([Ea,fa],wa==null?[Gn,na]:[wa,oa],Ut,-Xa,cn);Mr===Xa?$a.push("L",Fa[0],"A",Xa,",",Xa," 0 0,",Ur," ",Fa[1],"A",Ut,",",Ut," 0 ",cn^Fs(Fa[1][0],Fa[1][1],Ni[1][0],Ni[1][1]),",",1-cn," ",Ni[1],"A",Xa,",",Xa," 0 0,",Ur," ",Ni[0]):$a.push("L",Fa[0],"A",Xa,",",Xa," 0 0,",Ur," ",Ni[0])}else $a.push("L",Ea,",",fa)}else $a.push("M",Gn,",",na),wa!=null&&$a.push("A",Wt,",",Wt," 0 ",gi,",",cn," ",wa,",",oa),$a.push("L",Ea,",",fa),Va!=null&&$a.push("A",Ut,",",Ut," 0 ",Ii,",",1-cn," ",Va,",",Ra);return $a.push("Z"),$a.join("")}function Ct(Ut,Wt){return"M0,"+Ut+"A"+Ut+","+Ut+" 0 1,"+Wt+" 0,"+-Ut+"A"+Ut+","+Ut+" 0 1,"+Wt+" 0,"+Ut}return vt.innerRadius=function(Ut){return arguments.length?(he=at(Ut),vt):he},vt.outerRadius=function(Ut){return arguments.length?(Te=at(Ut),vt):Te},vt.cornerRadius=function(Ut){return arguments.length?(Le=at(Ut),vt):Le},vt.padRadius=function(Ut){return arguments.length?(Be=Ut==Ka?Ka:at(Ut),vt):Be},vt.startAngle=function(Ut){return arguments.length?(Ne=at(Ut),vt):Ne},vt.endAngle=function(Ut){return arguments.length?(Ke=at(Ut),vt):Ke},vt.padAngle=function(Ut){return arguments.length?(mt=at(Ut),vt):mt},vt.centroid=function(){var Ut=(+he.apply(this,arguments)+ +Te.apply(this,arguments))/2,Wt=(+Ne.apply(this,arguments)+ +Ke.apply(this,arguments))/2-ut;return[Math.cos(Wt)*Ut,Math.sin(Wt)*Ut]},vt};var Ka="auto";function ga(he){return he.innerRadius}function mi(he){return he.outerRadius}function fo(he){return he.startAngle}function po(he){return he.endAngle}function ds(he){return he&&he.padAngle}function Fs(he,Te,Le,Be){return(he-Le)*Te-(Te-Be)*he>0?0:1}function Bo(he,Te,Le,Be,Ne){var Ke=he[0]-Te[0],mt=he[1]-Te[1],vt=(Ne?Be:-Be)/Math.sqrt(Ke*Ke+mt*mt),Ct=vt*mt,Ut=-vt*Ke,Wt=he[0]+Ct,jt=he[1]+Ut,_r=Te[0]+Ct,Qr=Te[1]+Ut,cn=(Wt+_r)/2,Mr=(jt+Qr)/2,Ur=_r-Wt,Wr=Qr-jt,sn=Ur*Ur+Wr*Wr,un=Le-Be,Zr=Wt*Qr-_r*jt,Gn=(Wr<0?-1:1)*Math.sqrt(Math.max(0,un*un*sn-Zr*Zr)),na=(Zr*Wr-Ur*Gn)/sn,wa=(-Zr*Ur-Wr*Gn)/sn,oa=(Zr*Wr+Ur*Gn)/sn,Ea=(-Zr*Ur+Wr*Gn)/sn,fa=na-cn,Va=wa-Mr,Ra=oa-cn,$a=Ea-Mr;return fa*fa+Va*Va>Ra*Ra+$a*$a&&(na=oa,wa=Ea),[[na-Ct,wa-Ut],[na*Le/un,wa*Le/un]]}function pl(){return!0}function Ms(he){var Te=ya,Le=pr,Be=pl,Ne=xo,Ke=Ne.key,mt=.7;function vt(Ct){var Ut=[],Wt=[],jt=-1,_r=Ct.length,Qr,cn=at(Te),Mr=at(Le);function Ur(){Ut.push("M",Ne(he(Wt),mt))}for(;++jt<_r;)Be.call(this,Qr=Ct[jt],jt)?Wt.push([+cn.call(this,Qr,jt),+Mr.call(this,Qr,jt)]):Wt.length&&(Ur(),Wt=[]);return Wt.length&&Ur(),Ut.length?Ut.join(""):null}return vt.x=function(Ct){return arguments.length?(Te=Ct,vt):Te},vt.y=function(Ct){return arguments.length?(Le=Ct,vt):Le},vt.defined=function(Ct){return arguments.length?(Be=Ct,vt):Be},vt.interpolate=function(Ct){return arguments.length?(typeof Ct=="function"?Ke=Ne=Ct:Ke=(Ne=gs.get(Ct)||xo).key,vt):Ke},vt.tension=function(Ct){return arguments.length?(mt=Ct,vt):mt},vt}d.svg.line=function(){return Ms(R)};var gs=d.map({linear:xo,"linear-closed":cu,step:Su,"step-before":ys,"step-after":Ju,basis:Os,"basis-open":Of,"basis-closed":mf,bundle:xf,cardinal:gf,"cardinal-open":hu,"cardinal-closed":Lc,monotone:We});gs.forEach(function(he,Te){Te.key=he,Te.closed=/-closed$/.test(he)});function xo(he){return he.length>1?he.join("L"):he+"Z"}function cu(he){return he.join("L")+"Z"}function Su(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("H",(Be[0]+(Be=he[Te])[0])/2,"V",Be[1]);return Le>1&&Ne.push("H",Be[0]),Ne.join("")}function ys(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("V",(Be=he[Te])[1],"H",Be[0]);return Ne.join("")}function Ju(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("H",(Be=he[Te])[0],"V",Be[1]);return Ne.join("")}function hu(he,Te){return he.length<4?xo(he):he[1]+Qu(he.slice(1,-1),yf(he,Te))}function Lc(he,Te){return he.length<3?cu(he):he[0]+Qu((he.push(he[0]),he),yf([he[he.length-2]].concat(he,[he[1]]),Te))}function gf(he,Te){return he.length<3?xo(he):he[0]+Qu(he,yf(he,Te))}function Qu(he,Te){if(Te.length<1||he.length!=Te.length&&he.length!=Te.length+2)return xo(he);var Le=he.length!=Te.length,Be="",Ne=he[0],Ke=he[1],mt=Te[0],vt=mt,Ct=1;if(Le&&(Be+="Q"+(Ke[0]-mt[0]*2/3)+","+(Ke[1]-mt[1]*2/3)+","+Ke[0]+","+Ke[1],Ne=he[1],Ct=2),Te.length>1){vt=Te[1],Ke=he[Ct],Ct++,Be+="C"+(Ne[0]+mt[0])+","+(Ne[1]+mt[1])+","+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1];for(var Ut=2;Ut<Te.length;Ut++,Ct++)Ke=he[Ct],vt=Te[Ut],Be+="S"+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1]}if(Le){var Wt=he[Ct];Be+="Q"+(Ke[0]+vt[0]*2/3)+","+(Ke[1]+vt[1]*2/3)+","+Wt[0]+","+Wt[1]}return Be}function yf(he,Te){for(var Le=[],Be=(1-Te)/2,Ne,Ke=he[0],mt=he[1],vt=1,Ct=he.length;++vt<Ct;)Ne=Ke,Ke=mt,mt=he[vt],Le.push([Be*(mt[0]-Ne[0]),Be*(mt[1]-Ne[1])]);return Le}function Os(he){if(he.length<3)return xo(he);var Te=1,Le=he.length,Be=he[0],Ne=Be[0],Ke=Be[1],mt=[Ne,Ne,Ne,(Be=he[1])[0]],vt=[Ke,Ke,Ke,Be[1]],Ct=[Ne,",",Ke,"L",Uo(Ss,mt),",",Uo(Ss,vt)];for(he.push(he[Le-1]);++Te<=Le;)Be=he[Te],mt.shift(),mt.push(Be[0]),vt.shift(),vt.push(Be[1]),$u(Ct,mt,vt);return he.pop(),Ct.push("L",Be),Ct.join("")}function Of(he){if(he.length<4)return xo(he);for(var Te=[],Le=-1,Be=he.length,Ne,Ke=[0],mt=[0];++Le<3;)Ne=he[Le],Ke.push(Ne[0]),mt.push(Ne[1]);for(Te.push(Uo(Ss,Ke)+","+Uo(Ss,mt)),--Le;++Le<Be;)Ne=he[Le],Ke.shift(),Ke.push(Ne[0]),mt.shift(),mt.push(Ne[1]),$u(Te,Ke,mt);return Te.join("")}function mf(he){for(var Te,Le=-1,Be=he.length,Ne=Be+4,Ke,mt=[],vt=[];++Le<4;)Ke=he[Le%Be],mt.push(Ke[0]),vt.push(Ke[1]);for(Te=[Uo(Ss,mt),",",Uo(Ss,vt)],--Le;++Le<Ne;)Ke=he[Le%Be],mt.shift(),mt.push(Ke[0]),vt.shift(),vt.push(Ke[1]),$u(Te,mt,vt);return Te.join("")}function xf(he,Te){var Le=he.length-1;if(Le)for(var Be=he[0][0],Ne=he[0][1],Ke=he[Le][0]-Be,mt=he[Le][1]-Ne,vt=-1,Ct,Ut;++vt<=Le;)Ct=he[vt],Ut=vt/Le,Ct[0]=Te*Ct[0]+(1-Te)*(Be+Ut*Ke),Ct[1]=Te*Ct[1]+(1-Te)*(Ne+Ut*mt);return Os(he)}function Uo(he,Te){return he[0]*Te[0]+he[1]*Te[1]+he[2]*Te[2]+he[3]*Te[3]}var bf=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],Ss=[0,1/6,2/3,1/6];function $u(he,Te,Le){he.push("C",Uo(bf,Te),",",Uo(bf,Le),",",Uo(Jf,Te),",",Uo(Jf,Le),",",Uo(Ss,Te),",",Uo(Ss,Le))}function qu(he,Te){return(Te[1]-he[1])/(Te[0]-he[0])}function _f(he){for(var Te=0,Le=he.length-1,Be=[],Ne=he[0],Ke=he[1],mt=Be[0]=qu(Ne,Ke);++Te<Le;)Be[Te]=(mt+(mt=qu(Ne=Ke,Ke=he[Te+1])))/2;return Be[Te]=mt,Be}function ze(he){for(var Te=[],Le,Be,Ne,Ke,mt=_f(he),vt=-1,Ct=he.length-1;++vt<Ct;)Le=qu(he[vt],he[vt+1]),g(Le)<ht?mt[vt]=mt[vt+1]=0:(Be=mt[vt]/Le,Ne=mt[vt+1]/Le,Ke=Be*Be+Ne*Ne,Ke>9&&(Ke=Le*3/Math.sqrt(Ke),mt[vt]=Ke*Be,mt[vt+1]=Ke*Ne));for(vt=-1;++vt<=Ct;)Ke=(he[Math.min(Ct,vt+1)][0]-he[Math.max(0,vt-1)][0])/(6*(1+mt[vt]*mt[vt])),Te.push([Ke||0,mt[vt]*Ke||0]);return Te}function We(he){return he.length<3?xo(he):he[0]+Qu(he,ze(he))}d.svg.line.radial=function(){var he=Ms(nt);return he.radius=he.x,delete he.x,he.angle=he.y,delete he.y,he};function nt(he){for(var Te,Le=-1,Be=he.length,Ne,Ke;++Le<Be;)Te=he[Le],Ne=Te[0],Ke=Te[1]-ut,Te[0]=Ne*Math.cos(Ke),Te[1]=Ne*Math.sin(Ke);return he}function lt(he){var Te=ya,Le=ya,Be=0,Ne=pr,Ke=pl,mt=xo,vt=mt.key,Ct=mt,Ut="L",Wt=.7;function jt(_r){var Qr=[],cn=[],Mr=[],Ur=-1,Wr=_r.length,sn,un=at(Te),Zr=at(Be),Gn=Te===Le?function(){return wa}:at(Le),na=Be===Ne?function(){return oa}:at(Ne),wa,oa;function Ea(){Qr.push("M",mt(he(Mr),Wt),Ut,Ct(he(cn.reverse()),Wt),"Z")}for(;++Ur<Wr;)Ke.call(this,sn=_r[Ur],Ur)?(cn.push([wa=+un.call(this,sn,Ur),oa=+Zr.call(this,sn,Ur)]),Mr.push([+Gn.call(this,sn,Ur),+na.call(this,sn,Ur)])):cn.length&&(Ea(),cn=[],Mr=[]);return cn.length&&Ea(),Qr.length?Qr.join(""):null}return jt.x=function(_r){return arguments.length?(Te=Le=_r,jt):Le},jt.x0=function(_r){return arguments.length?(Te=_r,jt):Te},jt.x1=function(_r){return arguments.length?(Le=_r,jt):Le},jt.y=function(_r){return arguments.length?(Be=Ne=_r,jt):Ne},jt.y0=function(_r){return arguments.length?(Be=_r,jt):Be},jt.y1=function(_r){return arguments.length?(Ne=_r,jt):Ne},jt.defined=function(_r){return arguments.length?(Ke=_r,jt):Ke},jt.interpolate=function(_r){return arguments.length?(typeof _r=="function"?vt=mt=_r:vt=(mt=gs.get(_r)||xo).key,Ct=mt.reverse||mt,Ut=mt.closed?"M":"L",jt):vt},jt.tension=function(_r){return arguments.length?(Wt=_r,jt):Wt},jt}ys.reverse=Ju,Ju.reverse=ys,d.svg.area=function(){return lt(R)},d.svg.area.radial=function(){var he=lt(nt);return he.radius=he.x,delete he.x,he.innerRadius=he.x0,delete he.x0,he.outerRadius=he.x1,delete he.x1,he.angle=he.y,delete he.y,he.startAngle=he.y0,delete he.y0,he.endAngle=he.y1,delete he.y1,he};function _t(he){return he.source}function bt(he){return he.target}d.svg.chord=function(){var he=_t,Te=bt,Le=Tt,Be=fo,Ne=po;function Ke(Wt,jt){var _r=mt(this,he,Wt,jt),Qr=mt(this,Te,Wt,jt);return"M"+_r.p0+Ct(_r.r,_r.p1,_r.a1-_r.a0)+(vt(_r,Qr)?Ut(_r.r,_r.p1,_r.r,_r.p0):Ut(_r.r,_r.p1,Qr.r,Qr.p0)+Ct(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Ut(Qr.r,Qr.p1,_r.r,_r.p0))+"Z"}function mt(Wt,jt,_r,Qr){var cn=jt.call(Wt,_r,Qr),Mr=Le.call(Wt,cn,Qr),Ur=Be.call(Wt,cn,Qr)-ut,Wr=Ne.call(Wt,cn,Qr)-ut;return{r:Mr,a0:Ur,a1:Wr,p0:[Mr*Math.cos(Ur),Mr*Math.sin(Ur)],p1:[Mr*Math.cos(Wr),Mr*Math.sin(Wr)]}}function vt(Wt,jt){return Wt.a0==jt.a0&&Wt.a1==jt.a1}function Ct(Wt,jt,_r){return"A"+Wt+","+Wt+" 0 "+ +(_r>Ce)+",1 "+jt}function Ut(Wt,jt,_r,Qr){return"Q 0,0 "+Qr}return Ke.radius=function(Wt){return arguments.length?(Le=at(Wt),Ke):Le},Ke.source=function(Wt){return arguments.length?(he=at(Wt),Ke):he},Ke.target=function(Wt){return arguments.length?(Te=at(Wt),Ke):Te},Ke.startAngle=function(Wt){return arguments.length?(Be=at(Wt),Ke):Be},Ke.endAngle=function(Wt){return arguments.length?(Ne=at(Wt),Ke):Ne},Ke};function Tt(he){return he.radius}d.svg.diagonal=function(){var he=_t,Te=bt,Le=qt;function Be(Ne,Ke){var mt=he.call(this,Ne,Ke),vt=Te.call(this,Ne,Ke),Ct=(mt.y+vt.y)/2,Ut=[mt,{x:mt.x,y:Ct},{x:vt.x,y:Ct},vt];return Ut=Ut.map(Le),"M"+Ut[0]+"C"+Ut[1]+" "+Ut[2]+" "+Ut[3]}return Be.source=function(Ne){return arguments.length?(he=at(Ne),Be):he},Be.target=function(Ne){return arguments.length?(Te=at(Ne),Be):Te},Be.projection=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be};function qt(he){return[he.x,he.y]}d.svg.diagonal.radial=function(){var he=d.svg.diagonal(),Te=qt,Le=he.projection;return he.projection=function(Be){return arguments.length?Le(sr(Te=Be)):Te},he};function sr(he){return function(){var Te=he.apply(this,arguments),Le=Te[0],Be=Te[1]-ut;return[Le*Math.cos(Be),Le*Math.sin(Be)]}}d.svg.symbol=function(){var he=fr,Te=Qt;function Le(Be,Ne){return(Hr.get(he.call(this,Be,Ne))||Er)(Te.call(this,Be,Ne))}return Le.type=function(Be){return arguments.length?(he=at(Be),Le):he},Le.size=function(Be){return arguments.length?(Te=at(Be),Le):Te},Le};function Qt(){return 64}function fr(){return"circle"}function Er(he){var Te=Math.sqrt(he/Ce);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Hr=d.map({circle:Er,cross:function(he){var Te=Math.sqrt(he/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(he){var Te=Math.sqrt(he/(2*_n)),Le=Te*_n;return"M0,"+-Te+"L"+Le+",0 0,"+Te+" "+-Le+",0Z"},square:function(he){var Te=Math.sqrt(he)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(he){var Te=Math.sqrt(he/en),Le=Te*en/2;return"M0,"+Le+"L"+Te+","+-Le+" "+-Te+","+-Le+"Z"},"triangle-up":function(he){var Te=Math.sqrt(he/en),Le=Te*en/2;return"M0,"+-Le+"L"+Te+","+Le+" "+-Te+","+Le+"Z"}});d.svg.symbolTypes=Hr.keys();var en=Math.sqrt(3),_n=Math.tan(30*Pt);ee.transition=function(he){for(var Te=Wa||++Za,Le=ri(he),Be=[],Ne,Ke,mt=ei||{time:Date.now(),ease:Zs,delay:0,duration:250},vt=-1,Ct=this.length;++vt<Ct;){Be.push(Ne=[]);for(var Ut=this[vt],Wt=-1,jt=Ut.length;++Wt<jt;)(Ke=Ut[Wt])&&Hi(Ke,Wt,Le,Te,mt),Ne.push(Ke)}return ma(Be,Le,Te)},ee.interrupt=function(he){return this.each(he==null?Pn:Zn(ri(he)))};var Pn=Zn(ri());function Zn(he){return function(){var Te,Le,Be;(Te=this[he])&&(Be=Te[Le=Te.active])&&(Be.timer.c=null,Be.timer.t=NaN,--Te.count?delete Te[Le]:delete this[he],Te.active+=.5,Be.event&&Be.event.interrupt.call(this,this.__data__,Be.index))}}function ma(he,Te,Le){return ue(he,ba),he.namespace=Te,he.id=Le,he}var ba=[],Za=0,Wa,ei;ba.call=ee.call,ba.empty=ee.empty,ba.node=ee.node,ba.size=ee.size,d.transition=function(he,Te){return he&&he.transition?Wa?he.transition(Te):he:d.selection().transition(he)},d.transition.prototype=ba,ba.select=function(he){var Te=this.id,Le=this.namespace,Be=[],Ne,Ke,mt;he=j(he);for(var vt=-1,Ct=this.length;++vt<Ct;){Be.push(Ne=[]);for(var Ut=this[vt],Wt=-1,jt=Ut.length;++Wt<jt;)(mt=Ut[Wt])&&(Ke=he.call(mt,mt.__data__,Wt,vt))?("__data__"in mt&&(Ke.__data__=mt.__data__),Hi(Ke,Wt,Le,Te,mt[Le][Te]),Ne.push(Ke)):Ne.push(null)}return ma(Be,Le,Te)},ba.selectAll=function(he){var Te=this.id,Le=this.namespace,Be=[],Ne,Ke,mt,vt,Ct;he=Q(he);for(var Ut=-1,Wt=this.length;++Ut<Wt;)for(var jt=this[Ut],_r=-1,Qr=jt.length;++_r<Qr;)if(mt=jt[_r]){Ct=mt[Le][Te],Ke=he.call(mt,mt.__data__,_r,Ut),Be.push(Ne=[]);for(var cn=-1,Mr=Ke.length;++cn<Mr;)(vt=Ke[cn])&&Hi(vt,cn,Le,Te,Ct),Ne.push(vt)}return ma(Be,Le,Te)},ba.filter=function(he){var Te=[],Le,Be,Ne;typeof he!="function"&&(he=_e(he));for(var Ke=0,mt=this.length;Ke<mt;Ke++){Te.push(Le=[]);for(var Be=this[Ke],vt=0,Ct=Be.length;vt<Ct;vt++)(Ne=Be[vt])&&he.call(Ne,Ne.__data__,vt,Ke)&&Le.push(Ne)}return ma(Te,this.namespace,this.id)},ba.tween=function(he,Te){var Le=this.id,Be=this.namespace;return arguments.length<2?this.node()[Be][Le].tween.get(he):Ye(this,Te==null?function(Ne){Ne[Be][Le].tween.remove(he)}:function(Ne){Ne[Be][Le].tween.set(he,Te)})};function fi(he,Te,Le,Be){var Ne=he.id,Ke=he.namespace;return Ye(he,typeof Le=="function"?function(mt,vt,Ct){mt[Ke][Ne].tween.set(Te,Be(Le.call(mt,mt.__data__,vt,Ct)))}:(Le=Be(Le),function(mt){mt[Ke][Ne].tween.set(Te,Le)}))}ba.attr=function(he,Te){if(arguments.length<2){for(Te in he)this.attr(Te,he[Te]);return this}var Le=he=="transform"?su:io,Be=d.ns.qualify(he);function Ne(){this.removeAttribute(Be)}function Ke(){this.removeAttributeNS(Be.space,Be.local)}function mt(Ct){return Ct==null?Ne:(Ct+="",function(){var Ut=this.getAttribute(Be),Wt;return Ut!==Ct&&(Wt=Le(Ut,Ct),function(jt){this.setAttribute(Be,Wt(jt))})})}function vt(Ct){return Ct==null?Ke:(Ct+="",function(){var Ut=this.getAttributeNS(Be.space,Be.local),Wt;return Ut!==Ct&&(Wt=Le(Ut,Ct),function(jt){this.setAttributeNS(Be.space,Be.local,Wt(jt))})})}return fi(this,"attr."+he,Te,Be.local?vt:mt)},ba.attrTween=function(he,Te){var Le=d.ns.qualify(he);function Be(Ke,mt){var vt=Te.call(this,Ke,mt,this.getAttribute(Le));return vt&&function(Ct){this.setAttribute(Le,vt(Ct))}}function Ne(Ke,mt){var vt=Te.call(this,Ke,mt,this.getAttributeNS(Le.space,Le.local));return vt&&function(Ct){this.setAttributeNS(Le.space,Le.local,vt(Ct))}}return this.tween("attr."+he,Le.local?Ne:Be)},ba.style=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te="");for(Le in he)this.style(Le,he[Le],Te);return this}Le=""}function Ne(){this.style.removeProperty(he)}function Ke(mt){return mt==null?Ne:(mt+="",function(){var vt=o(this).getComputedStyle(this,null).getPropertyValue(he),Ct;return vt!==mt&&(Ct=io(vt,mt),function(Ut){this.style.setProperty(he,Ct(Ut),Le)})})}return fi(this,"style."+he,Te,Ke)},ba.styleTween=function(he,Te,Le){arguments.length<3&&(Le="");function Be(Ne,Ke){var mt=Te.call(this,Ne,Ke,o(this).getComputedStyle(this,null).getPropertyValue(he));return mt&&function(vt){this.style.setProperty(he,mt(vt),Le)}}return this.tween("style."+he,Be)},ba.text=function(he){return fi(this,"text",he,oo)};function oo(he){return he==null&&(he=""),function(){this.textContent=he}}ba.remove=function(){var he=this.namespace;return this.each("end.transition",function(){var Te;this[he].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},ba.ease=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].ease:(typeof he!="function"&&(he=d.ease.apply(d,arguments)),Ye(this,function(Be){Be[Le][Te].ease=he}))},ba.delay=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].delay:Ye(this,typeof he=="function"?function(Be,Ne,Ke){Be[Le][Te].delay=+he.call(Be,Be.__data__,Ne,Ke)}:(he=+he,function(Be){Be[Le][Te].delay=he}))},ba.duration=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].duration:Ye(this,typeof he=="function"?function(Be,Ne,Ke){Be[Le][Te].duration=Math.max(1,he.call(Be,Be.__data__,Ne,Ke))}:(he=Math.max(1,he),function(Be){Be[Le][Te].duration=he}))},ba.each=function(he,Te){var Le=this.id,Be=this.namespace;if(arguments.length<2){var Ne=ei,Ke=Wa;try{Wa=Le,Ye(this,function(mt,vt,Ct){ei=mt[Be][Le],he.call(mt,mt.__data__,vt,Ct)})}finally{ei=Ne,Wa=Ke}}else Ye(this,function(mt){var vt=mt[Be][Le];(vt.event||(vt.event=d.dispatch("start","end","interrupt"))).on(he,Te)});return this},ba.transition=function(){for(var he=this.id,Te=++Za,Le=this.namespace,Be=[],Ne,Ke,mt,vt,Ct=0,Ut=this.length;Ct<Ut;Ct++){Be.push(Ne=[]);for(var Ke=this[Ct],Wt=0,jt=Ke.length;Wt<jt;Wt++)(mt=Ke[Wt])&&(vt=mt[Le][he],Hi(mt,Wt,Le,Te,{time:vt.time,ease:vt.ease,delay:vt.delay+vt.duration,duration:vt.duration})),Ne.push(mt)}return ma(Be,Le,Te)};function ri(he){return he==null?"__transition__":"__transition_"+he+"__"}function Hi(he,Te,Le,Be,Ne){var Ke=he[Le]||(he[Le]={active:0,count:0}),mt=Ke[Be],vt,Ct,Ut,Wt,jt;function _r(Mr){var Ur=mt.delay;if(Ct.t=Ur+vt,Ur<=Mr)return Qr(Mr-Ur);Ct.c=Qr}function Qr(Mr){var Ur=Ke.active,Wr=Ke[Ur];Wr&&(Wr.timer.c=null,Wr.timer.t=NaN,--Ke.count,delete Ke[Ur],Wr.event&&Wr.event.interrupt.call(he,he.__data__,Wr.index));for(var sn in Ke)if(+sn<Be){var un=Ke[sn];un.timer.c=null,un.timer.t=NaN,--Ke.count,delete Ke[sn]}Ct.c=cn,kn(function(){return Ct.c&&cn(Mr||1)&&(Ct.c=null,Ct.t=NaN),1},0,vt),Ke.active=Be,mt.event&&mt.event.start.call(he,he.__data__,Te),jt=[],mt.tween.forEach(function(Zr,Gn){(Gn=Gn.call(he,he.__data__,Te))&&jt.push(Gn)}),Wt=mt.ease,Ut=mt.duration}function cn(Mr){for(var Ur=Mr/Ut,Wr=Wt(Ur),sn=jt.length;sn>0;)jt[--sn].call(he,Wr);if(Ur>=1)return mt.event&&mt.event.end.call(he,he.__data__,Te),--Ke.count?delete Ke[Be]:delete he[Le],1}mt||(vt=Ne.time,Ct=kn(_r,0,vt),mt=Ke[Be]={tween:new M,time:vt,timer:Ct,delay:Ne.delay,duration:Ne.duration,ease:Ne.ease,index:Te},Ne=null,++Ke.count)}d.svg.axis=function(){var he=d.scale.linear(),Te=co,Le=6,Be=6,Ne=3,Ke=[10],mt=null,vt;function Ct(Ut){Ut.each(function(){var Wt=d.select(this),jt=this.__chart__||he,_r=this.__chart__=he.copy(),Qr=mt==null?_r.ticks?_r.ticks.apply(_r,Ke):_r.domain():mt,cn=vt==null?_r.tickFormat?_r.tickFormat.apply(_r,Ke):R:vt,Mr=Wt.selectAll(".tick").data(Qr,_r),Ur=Mr.enter().insert("g",".domain").attr("class","tick").style("opacity",ht),Wr=d.transition(Mr.exit()).style("opacity",ht).remove(),sn=d.transition(Mr.order()).style("opacity",1),un=Math.max(Le,0)+Ne,Zr,Gn=an(_r),na=Wt.selectAll(".domain").data([0]),wa=(na.enter().append("path").attr("class","domain"),d.transition(na));Ur.append("line"),Ur.append("text");var oa=Ur.select("line"),Ea=sn.select("line"),fa=Mr.select("text").text(cn),Va=Ur.select("text"),Ra=sn.select("text"),$a=Te==="top"||Te==="left"?-1:1,gi,ho,Ii,ha;if(Te==="bottom"||Te==="top"?(Zr=xi,gi="x",Ii="y",ho="x2",ha="y2",fa.attr("dy",$a<0?"0em":".71em").style("text-anchor","middle"),wa.attr("d","M"+Gn[0]+","+$a*Be+"V0H"+Gn[1]+"V"+$a*Be)):(Zr=Ai,gi="y",Ii="x",ho="y2",ha="x2",fa.attr("dy",".32em").style("text-anchor",$a<0?"end":"start"),wa.attr("d","M"+$a*Be+","+Gn[0]+"H0V"+Gn[1]+"H"+$a*Be)),oa.attr(ha,$a*Le),Va.attr(Ii,$a*un),Ea.attr(ho,0).attr(ha,$a*Le),Ra.attr(gi,0).attr(Ii,$a*un),_r.rangeBand){var ai=_r,Xa=ai.rangeBand()/2;jt=_r=function(Mi){return ai(Mi)+Xa}}else jt.rangeBand?jt=_r:Wr.call(Zr,_r,jt);Ur.call(Zr,jt,_r),sn.call(Zr,_r,_r)})}return Ct.scale=function(Ut){return arguments.length?(he=Ut,Ct):he},Ct.orient=function(Ut){return arguments.length?(Te=Ut in _o?Ut+"":co,Ct):Te},Ct.ticks=function(){return arguments.length?(Ke=b(arguments),Ct):Ke},Ct.tickValues=function(Ut){return arguments.length?(mt=Ut,Ct):mt},Ct.tickFormat=function(Ut){return arguments.length?(vt=Ut,Ct):vt},Ct.tickSize=function(Ut){var Wt=arguments.length;return Wt?(Le=+Ut,Be=+arguments[Wt-1],Ct):Le},Ct.innerTickSize=function(Ut){return arguments.length?(Le=+Ut,Ct):Le},Ct.outerTickSize=function(Ut){return arguments.length?(Be=+Ut,Ct):Be},Ct.tickPadding=function(Ut){return arguments.length?(Ne=+Ut,Ct):Ne},Ct.tickSubdivide=function(){return arguments.length&&Ct},Ct};var co="bottom",_o={top:1,right:1,bottom:1,left:1};function xi(he,Te,Le){he.attr("transform",function(Be){var Ne=Te(Be);return"translate("+(isFinite(Ne)?Ne:Le(Be))+",0)"})}function Ai(he,Te,Le){he.attr("transform",function(Be){var Ne=Te(Be);return"translate(0,"+(isFinite(Ne)?Ne:Le(Be))+")"})}d.svg.brush=function(){var he=K(Wt,"brushstart","brush","brushend"),Te=null,Le=null,Be=[0,0],Ne=[0,0],Ke,mt,vt=!0,Ct=!0,Ut=go[0];function Wt(Mr){Mr.each(function(){var Ur=d.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Wr=Ur.selectAll(".background").data([0]);Wr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ur.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Ur.selectAll(".resize").data(Ut,R);sn.exit().remove(),sn.enter().append("g").attr("class",function(na){return"resize "+na}).style("cursor",function(na){return ms[na]}).append("rect").attr("x",function(na){return/[ew]$/.test(na)?-3:null}).attr("y",function(na){return/^[ns]/.test(na)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",Wt.empty()?"none":null);var un=d.transition(Ur),Zr=d.transition(Wr),Gn;Te&&(Gn=an(Te),Zr.attr("x",Gn[0]).attr("width",Gn[1]-Gn[0]),_r(un)),Le&&(Gn=an(Le),Zr.attr("y",Gn[0]).attr("height",Gn[1]-Gn[0]),Qr(un)),jt(un)})}Wt.event=function(Mr){Mr.each(function(){var Ur=he.of(this,arguments),Wr={x:Be,y:Ne,i:Ke,j:mt},sn=this.__chart__||Wr;this.__chart__=Wr,Wa?d.select(this).transition().each("start.brush",function(){Ke=sn.i,mt=sn.j,Be=sn.x,Ne=sn.y,Ur({type:"brushstart"})}).tween("brush:brush",function(){var un=Qi(Be,Wr.x),Zr=Qi(Ne,Wr.y);return Ke=mt=null,function(Gn){Be=Wr.x=un(Gn),Ne=Wr.y=Zr(Gn),Ur({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ke=Wr.i,mt=Wr.j,Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"})}):(Ur({type:"brushstart"}),Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"}))})};function jt(Mr){Mr.selectAll(".resize").attr("transform",function(Ur){return"translate("+Be[+/e$/.test(Ur)]+","+Ne[+/^s/.test(Ur)]+")"})}function _r(Mr){Mr.select(".extent").attr("x",Be[0]),Mr.selectAll(".extent,.n>rect,.s>rect").attr("width",Be[1]-Be[0])}function Qr(Mr){Mr.select(".extent").attr("y",Ne[0]),Mr.selectAll(".extent,.e>rect,.w>rect").attr("height",Ne[1]-Ne[0])}function cn(){var Mr=this,Ur=d.select(d.event.target),Wr=he.of(Mr,arguments),sn=d.select(Mr),un=Ur.datum(),Zr=!/^(n|s)$/.test(un)&&Te,Gn=!/^(e|w)$/.test(un)&&Le,na=Ur.classed("extent"),wa=Bt(Mr),oa,Ea=d.mouse(Mr),fa,Va=d.select(o(Mr)).on("keydown.brush",gi).on("keyup.brush",ho);if(d.event.changedTouches?Va.on("touchmove.brush",Ii).on("touchend.brush",ai):Va.on("mousemove.brush",Ii).on("mouseup.brush",ai),sn.interrupt().selectAll("*").interrupt(),na)Ea[0]=Be[0]-Ea[0],Ea[1]=Ne[0]-Ea[1];else if(un){var Ra=+/w$/.test(un),$a=+/^n/.test(un);fa=[Be[1-Ra]-Ea[0],Ne[1-$a]-Ea[1]],Ea[0]=Be[Ra],Ea[1]=Ne[$a]}else d.event.altKey&&(oa=Ea.slice());sn.style("pointer-events","none").selectAll(".resize").style("display",null),d.select("body").style("cursor",Ur.style("cursor")),Wr({type:"brushstart"}),Ii();function gi(){d.event.keyCode==32&&(na||(oa=null,Ea[0]-=Be[1],Ea[1]-=Ne[1],na=2),$())}function ho(){d.event.keyCode==32&&na==2&&(Ea[0]+=Be[1],Ea[1]+=Ne[1],na=0,$())}function Ii(){var Xa=d.mouse(Mr),Mi=!1;fa&&(Xa[0]+=fa[0],Xa[1]+=fa[1]),na||(d.event.altKey?(oa||(oa=[(Be[0]+Be[1])/2,(Ne[0]+Ne[1])/2]),Ea[0]=Be[+(Xa[0]<oa[0])],Ea[1]=Ne[+(Xa[1]<oa[1])]):oa=null),Zr&&ha(Xa,Te,0)&&(_r(sn),Mi=!0),Gn&&ha(Xa,Le,1)&&(Qr(sn),Mi=!0),Mi&&(jt(sn),Wr({type:"brush",mode:na?"move":"resize"}))}function ha(Xa,Mi,si){var so=an(Mi),$i=so[0],yo=so[1],Zo=Ea[si],Vo=si?Ne:Be,Ko=Vo[1]-Vo[0],Gi,Ni;if(na&&($i-=Zo,yo-=Ko+Zo),Gi=(si?Ct:vt)?Math.max($i,Math.min(yo,Xa[si])):Xa[si],na?Ni=(Gi+=Zo)+Ko:(oa&&(Zo=Math.max($i,Math.min(yo,2*oa[si]-Gi))),Zo<Gi?(Ni=Gi,Gi=Zo):Ni=Zo),Vo[0]!=Gi||Vo[1]!=Ni)return si?mt=null:Ke=null,Vo[0]=Gi,Vo[1]=Ni,!0}function ai(){Ii(),sn.style("pointer-events","all").selectAll(".resize").style("display",Wt.empty()?"none":null),d.select("body").style("cursor",null),Va.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),wa(),Wr({type:"brushend"})}}return Wt.x=function(Mr){return arguments.length?(Te=Mr,Ut=go[!Te<<1|!Le],Wt):Te},Wt.y=function(Mr){return arguments.length?(Le=Mr,Ut=go[!Te<<1|!Le],Wt):Le},Wt.clamp=function(Mr){return arguments.length?(Te&&Le?(vt=!!Mr[0],Ct=!!Mr[1]):Te?vt=!!Mr:Le&&(Ct=!!Mr),Wt):Te&&Le?[vt,Ct]:Te?vt:Le?Ct:null},Wt.extent=function(Mr){var Ur,Wr,sn,un,Zr;return arguments.length?(Te&&(Ur=Mr[0],Wr=Mr[1],Le&&(Ur=Ur[0],Wr=Wr[0]),Ke=[Ur,Wr],Te.invert&&(Ur=Te(Ur),Wr=Te(Wr)),Wr<Ur&&(Zr=Ur,Ur=Wr,Wr=Zr),(Ur!=Be[0]||Wr!=Be[1])&&(Be=[Ur,Wr])),Le&&(sn=Mr[0],un=Mr[1],Te&&(sn=sn[1],un=un[1]),mt=[sn,un],Le.invert&&(sn=Le(sn),un=Le(un)),un<sn&&(Zr=sn,sn=un,un=Zr),(sn!=Ne[0]||un!=Ne[1])&&(Ne=[sn,un])),Wt):(Te&&(Ke?(Ur=Ke[0],Wr=Ke[1]):(Ur=Be[0],Wr=Be[1],Te.invert&&(Ur=Te.invert(Ur),Wr=Te.invert(Wr)),Wr<Ur&&(Zr=Ur,Ur=Wr,Wr=Zr))),Le&&(mt?(sn=mt[0],un=mt[1]):(sn=Ne[0],un=Ne[1],Le.invert&&(sn=Le.invert(sn),un=Le.invert(un)),un<sn&&(Zr=sn,sn=un,un=Zr))),Te&&Le?[[Ur,sn],[Wr,un]]:Te?[Ur,Wr]:Le&&[sn,un])},Wt.clear=function(){return Wt.empty()||(Be=[0,0],Ne=[0,0],Ke=mt=null),Wt},Wt.empty=function(){return!!Te&&Be[0]==Be[1]||!!Le&&Ne[0]==Ne[1]},d.rebind(Wt,he,"on")};var ms={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},go=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d.text=Ft(function(he){return he.responseText}),d.json=function(he,Te){return er(he,"application/json",Io,Te)};function Io(he){return JSON.parse(he.responseText)}d.html=function(he,Te){return er(he,"text/html",jo,Te)};function jo(he){var Te=w.createRange();return Te.selectNode(w.body),Te.createContextualFragment(he.responseText)}d.xml=Ft(function(he){return he.responseXML}),typeof B=="object"&&B.exports?B.exports=d:this.d3=d}).apply(self)},{}],59:[function(t,B,H){B.exports=t("./quad")},{"./quad":60}],60:[function(t,B,H){var d=t("binary-search-bounds"),l=t("clamp"),b=t("parse-rect"),w=t("array-bounds"),e=t("pick-by-alias"),o=t("defined"),a=t("flatten-vertex-data"),n=t("is-obj"),r=t("dtype"),u=t("math-log2"),s=1073741824;B.exports=function(h,p){p||(p={}),h=a(h,"float64"),p=e(p,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var v=o(p.maxDepth,255),y=o(p.bounds,w(h,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var g=i(h,y),A=h.length>>>1,m;p.dtype||(p.dtype="array"),typeof p.dtype=="string"?m=new(r(p.dtype))(A):p.dtype&&(m=p.dtype,Array.isArray(m)&&(m.length=A));for(var M=0;M<A;++M)m[M]=M;var _=[],T=[],x=[],c=[];R(0,0,1,m,0,1);for(var L=0,S=0;S<_.length;S++){var k=_[S];if(m.set)m.set(k,L);else for(var P=0,z=k.length;P<z;P++)m[P+L]=k[P];var I=L+_[S].length;c[S]=[L,I],L=I}return m.range=D,m;function R(Y,X,q,$,V,K){if(!$.length)return null;var se=_[V]||(_[V]=[]),ue=x[V]||(x[V]=[]),oe=T[V]||(T[V]=[]),U=se.length;if(V++,V>v||K>s){for(var G=0;G<$.length;G++)se.push($[G]),ue.push(K),oe.push(null,null,null,null);return U}if(se.push($[0]),ue.push(K),$.length<=1)return oe.push(null,null,null,null),U;for(var re=q*.5,ee=Y+re,j=X+re,Q=[],ne=[],ae=[],ie=[],fe=1,me=$.length;fe<me;fe++){var ce=$[fe],ye=g[ce*2],xe=g[ce*2+1];ye<ee?xe<j?Q.push(ce):ne.push(ce):xe<j?ae.push(ce):ie.push(ce)}return K<<=2,oe.push(R(Y,X,re,Q,V,K),R(Y,j,re,ne,V,K+1),R(ee,X,re,ae,V,K+2),R(ee,j,re,ie,V,K+3)),U}function D(){for(var Y=[],X=arguments.length;X--;)Y[X]=arguments[X];var q;if(n(Y[Y.length-1])){var $=Y.pop();!Y.length&&($.x!=null||$.l!=null||$.left!=null)&&(Y=[$],q={}),q=e($,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else q={};Y.length||(Y=y);var V=b.apply(void 0,Y),K=[Math.min(V.x,V.x+V.width),Math.min(V.y,V.y+V.height),Math.max(V.x,V.x+V.width),Math.max(V.y,V.y+V.height)],se=K[0],ue=K[1],oe=K[2],U=K[3],G=i([se,ue,oe,U],y),re=G[0],ee=G[1],j=G[2],Q=G[3],ne=o(q.level,_.length);if(q.d!=null){var ae;typeof q.d=="number"?ae=[q.d,q.d]:q.d.length&&(ae=q.d),ne=Math.min(Math.max(Math.ceil(-u(Math.abs(ae[0])/(y[2]-y[0]))),Math.ceil(-u(Math.abs(ae[1])/(y[3]-y[1])))),ne)}if(ne=Math.min(ne,_.length),q.lod)return O(re,ee,j,Q,ne);var ie=[];fe(0,0,1,0,0,1);function fe(ce,ye,xe,ke,Ae,Oe){if(!(Ae===null||Oe===null)){var He=ce+xe,Ge=ye+xe;if(!(re>He||ee>Ge||j<ce||Q<ye)&&!(ke>=ne)&&Ae!==Oe){var _e=_[ke];Oe===void 0&&(Oe=_e.length);for(var Ie=Ae;Ie<Oe;Ie++){var Ye=_e[Ie],qe=h[Ye*2],Ue=h[Ye*2+1];qe>=se&&qe<=oe&&Ue>=ue&&Ue<=U&&ie.push(Ye)}var Re=T[ke],Ve=Re[Ae*4+0],dt=Re[Ae*4+1],Dt=Re[Ae*4+2],Gt=Re[Ae*4+3],kt=me(Re,Ae+1),zt=xe*.5,Bt=ke+1;fe(ce,ye,zt,Bt,Ve,dt||Dt||Gt||kt),fe(ce,ye+zt,zt,Bt,dt,Dt||Gt||kt),fe(ce+zt,ye,zt,Bt,Dt,Gt||kt),fe(ce+zt,ye+zt,zt,Bt,Gt,kt)}}}function me(ce,ye){for(var xe=null,ke=0;xe===null;)if(xe=ce[ye*4+ke],ke++,ke>ce.length)return null;return xe}return ie}function O(Y,X,q,$,V){for(var K=[],se=0;se<V;se++){var ue=x[se],oe=c[se][0],U=F(Y,X,se),G=F(q,$,se),re=d.ge(ue,U),ee=d.gt(ue,G,re,ue.length-1);K[se]=[re+oe,ee+oe]}return K}function F(Y,X,q){for(var $=1,V=.5,K=.5,se=.5,ue=0;ue<q;ue++)$<<=2,$+=Y<V?X<K?0:1:X<K?2:3,se*=.5,V+=Y<V?-se:se,K+=X<K?-se:se;return $}};function i(f,h){for(var p=h[0],v=h[1],y=h[2],g=h[3],A=1/(y-p),m=1/(g-v),M=new Array(f.length),_=0,T=f.length/2;_<T;_++)M[2*_]=l((f[2*_]-p)*A,0,1),M[2*_+1]=l((f[2*_+1]-v)*m,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta"),l=6378137;function b(n){return d.geomReduce(n,function(r,u){return r+w(u)},0)}H.default=b;function w(n){var r=0,u;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(u=0;u<n.coordinates.length;u++)r+=e(n.coordinates[u]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(n){var r=0;if(n&&n.length>0){r+=Math.abs(o(n[0]));for(var u=1;u<n.length;u++)r-=Math.abs(o(n[u]))}return r}function o(n){var r,u,s,i,f,h,p,v=0,y=n.length;if(y>2){for(p=0;p<y;p++)p===y-2?(i=y-2,f=y-1,h=0):p===y-1?(i=y-1,f=0,h=1):(i=p,f=p+1,h=p+2),r=n[i],u=n[f],s=n[h],v+=(a(s[0])-a(r[0]))*Math.sin(a(u[1]));v=v*l*l/2}return v}function a(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius*1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1.0936133},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(S,k,P){P===void 0&&(P={});var z={type:"Feature"};return(P.id===0||P.id)&&(z.id=P.id),P.bbox&&(z.bbox=P.bbox),z.properties=k||{},z.geometry=S,z}H.feature=d;function l(S,k,P){switch(S){case"Point":return b(k).geometry;case"LineString":return a(k).geometry;case"Polygon":return e(k).geometry;case"MultiPoint":return s(k).geometry;case"MultiLineString":return u(k).geometry;case"MultiPolygon":return i(k).geometry;default:throw new Error(S+" is invalid")}}H.geometry=l;function b(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(S[0])||!T(S[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:S};return d(z,k,P)}H.point=b;function w(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return b(z,k)}),P)}H.points=w;function e(S,k,P){P===void 0&&(P={});for(var z=0,I=S;z<I.length;z++){var R=I[z];if(R.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<R[R.length-1].length;D++)if(R[R.length-1][D]!==R[0][D])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:S};return d(O,k,P)}H.polygon=e;function o(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return e(z,k)}),P)}H.polygons=o;function a(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:S};return d(z,k,P)}H.lineString=a;function n(S,k,P){return P===void 0&&(P={}),r(S.map(function(z){return a(z,k)}),P)}H.lineStrings=n;function r(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}H.featureCollection=r;function u(S,k,P){P===void 0&&(P={});var z={type:"MultiLineString",coordinates:S};return d(z,k,P)}H.multiLineString=u;function s(S,k,P){P===void 0&&(P={});var z={type:"MultiPoint",coordinates:S};return d(z,k,P)}H.multiPoint=s;function i(S,k,P){P===void 0&&(P={});var z={type:"MultiPolygon",coordinates:S};return d(z,k,P)}H.multiPolygon=i;function f(S,k,P){P===void 0&&(P={});var z={type:"GeometryCollection",geometries:S};return d(z,k,P)}H.geometryCollection=f;function h(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}H.round=h;function p(S,k){k===void 0&&(k="kilometers");var P=H.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}H.radiansToLength=p;function v(S,k){k===void 0&&(k="kilometers");var P=H.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}H.lengthToRadians=v;function y(S,k){return A(v(S,k))}H.lengthToDegrees=y;function g(S){var k=S%360;return k<0&&(k+=360),k}H.bearingToAzimuth=g;function A(S){var k=S%(2*Math.PI);return k*180/Math.PI}H.radiansToDegrees=A;function m(S){var k=S%360;return k*Math.PI/180}H.degreesToRadians=m;function M(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return p(v(S,k),P)}H.convertLength=M;function _(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var z=H.areaFactors[k];if(!z)throw new Error("invalid original units");var I=H.areaFactors[P];if(!I)throw new Error("invalid final units");return S/z*I}H.convertArea=_;function T(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}H.isNumber=T;function x(S){return!!S&&S.constructor===Object}H.isObject=x;function c(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!T(k))throw new Error("bbox must only contain numbers")})}H.validateBBox=c;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}H.validateId=L},{}],63:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/helpers");function l(A,m,M){if(A!==null)for(var _,T,x,c,L,S,k,P=0,z=0,I,R=A.type,D=R==="FeatureCollection",O=R==="Feature",F=D?A.features.length:1,Y=0;Y<F;Y++){k=D?A.features[Y].geometry:O?A.geometry:A,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var X=0;X<L;X++){var q=0,$=0;if(c=I?k.geometries[X]:k,c!==null){S=c.coordinates;var V=c.type;switch(P=M&&(V==="Polygon"||V==="MultiPolygon")?1:0,V){case null:break;case"Point":if(m(S,z,Y,q,$)===!1)return!1;z++,q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(m(S[_],z,Y,q,$)===!1)return!1;z++,V==="MultiPoint"&&q++}V==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(T=0;T<S[_].length-P;T++){if(m(S[_][T],z,Y,q,$)===!1)return!1;z++}V==="MultiLineString"&&q++,V==="Polygon"&&$++}V==="Polygon"&&q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for($=0,T=0;T<S[_].length;T++){for(x=0;x<S[_][T].length-P;x++){if(m(S[_][T][x],z,Y,q,$)===!1)return!1;z++}$++}q++}break;case"GeometryCollection":for(_=0;_<c.geometries.length;_++)if(l(c.geometries[_],m,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(A,m,M,_){var T=M;return l(A,function(x,c,L,S,k){c===0&&M===void 0?T=x:T=m(T,x,c,L,S,k)},_),T}function w(A,m){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&m(A.features[M].properties,M)!==!1;M++);break;case"Feature":m(A.properties,0);break}}function e(A,m,M){var _=M;return w(A,function(T,x){x===0&&M===void 0?_=T:_=m(_,T,x)}),_}function o(A,m){if(A.type==="Feature")m(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&m(A.features[M],M)!==!1;M++);}function a(A,m,M){var _=M;return o(A,function(T,x){x===0&&M===void 0?_=T:_=m(_,T,x)}),_}function n(A){var m=[];return l(A,function(M){m.push(M)}),m}function r(A,m){var M,_,T,x,c,L,S,k,P,z,I=0,R=A.type==="FeatureCollection",D=A.type==="Feature",O=R?A.features.length:1;for(M=0;M<O;M++){for(L=R?A.features[M].geometry:D?A.geometry:A,k=R?A.features[M].properties:D?A.properties:{},P=R?A.features[M].bbox:D?A.bbox:void 0,z=R?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,c=S?L.geometries.length:1,T=0;T<c;T++){if(x=S?L.geometries[T]:L,x===null){if(m(null,I,k,P,z)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(x,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<x.geometries.length;_++)if(m(x.geometries[_],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function u(A,m,M){var _=M;return r(A,function(T,x,c,L,S){x===0&&M===void 0?_=T:_=m(_,T,x,c,L,S)}),_}function s(A,m){r(A,function(M,_,T,x,c){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return m(d.feature(M,T,{bbox:x,id:c}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],z={type:S,coordinates:P};if(m(d.feature(z,T),_,k)===!1)return!1}})}function i(A,m,M){var _=M;return s(A,function(T,x,c){x===0&&c===0&&M===void 0?_=T:_=m(_,T,x,c)}),_}function f(A,m){s(A,function(M,_,T){var x=0;if(!!M.geometry){var c=M.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var L,S=0,k=0,P=0;if(l(M,function(z,I,R,D,O){if(L===void 0||_>S||D>k||O>P){L=z,S=_,k=D,P=O,x=0;return}var F=d.lineString([L,z],M.properties);if(m(F,_,T,O,x)===!1)return!1;x++,L=z})===!1)return!1}}})}function h(A,m,M){var _=M,T=!1;return f(A,function(x,c,L,S,k){T===!1&&M===void 0?_=x:_=m(_,x,c,L,S,k),T=!0}),_}function p(A,m){if(!A)throw new Error("geojson is required");s(A,function(M,_,T){if(M.geometry!==null){var x=M.geometry.type,c=M.geometry.coordinates;switch(x){case"LineString":if(m(M,_,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<c.length;L++)if(m(d.lineString(c[L],M.properties),_,T,L)===!1)return!1;break}}})}function v(A,m,M){var _=M;return p(A,function(T,x,c,L){x===0&&M===void 0?_=T:_=m(_,T,x,c,L)}),_}function y(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,_=m.multiFeatureIndex||0,T=m.geometryIndex||0,x=m.segmentIndex||0,c=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),c=c||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":c=c||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=S.length+x-1),d.lineString([S[x],S[x+1]],c,m);case"Polygon":return T<0&&(T=S.length+T),x<0&&(x=S[T].length+x-1),d.lineString([S[T][x],S[T][x+1]],c,m);case"MultiLineString":return _<0&&(_=S.length+_),x<0&&(x=S[_].length+x-1),d.lineString([S[_][x],S[_][x+1]],c,m);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),x<0&&(x=S[_][T].length-x-1),d.lineString([S[_][T][x],S[_][T][x+1]],c,m)}throw new Error("geojson is invalid")}function g(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,_=m.multiFeatureIndex||0,T=m.geometryIndex||0,x=m.coordIndex||0,c=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),c=c||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":c=c||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return d.point(S,c,m);case"MultiPoint":return _<0&&(_=S.length+_),d.point(S[_],c,m);case"LineString":return x<0&&(x=S.length+x),d.point(S[x],c,m);case"Polygon":return T<0&&(T=S.length+T),x<0&&(x=S[T].length+x),d.point(S[T][x],c,m);case"MultiLineString":return _<0&&(_=S.length+_),x<0&&(x=S[_].length+x),d.point(S[_][x],c,m);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),x<0&&(x=S[_][T].length-x),d.point(S[_][T][x],c,m)}throw new Error("geojson is invalid")}H.coordEach=l,H.coordReduce=b,H.propEach=w,H.propReduce=e,H.featureEach=o,H.featureReduce=a,H.coordAll=n,H.geomEach=r,H.geomReduce=u,H.flattenEach=s,H.flattenReduce=i,H.segmentEach=f,H.segmentReduce=h,H.lineEach=p,H.lineReduce=v,H.findSegment=y,H.findPoint=g},{"@turf/helpers":62}],64:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta");function l(b){var w=[1/0,1/0,-1/0,-1/0];return d.coordEach(b,function(e){w[0]>e[0]&&(w[0]=e[0]),w[1]>e[1]&&(w[1]=e[1]),w[2]<e[0]&&(w[2]=e[0]),w[3]<e[1]&&(w[3]=e[1])}),w}l.default=l,H.default=l},{"@turf/meta":66}],65:[function(t,B,H){arguments[4][62][0].apply(H,arguments)},{dup:62}],66:[function(t,B,H){arguments[4][63][0].apply(H,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta"),l=t("@turf/helpers");function b(w,e){e===void 0&&(e={});var o=0,a=0,n=0;return d.coordEach(w,function(r){o+=r[0],a+=r[1],n++}),l.point([o/n,a/n],e.properties)}H.default=b},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius/1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1/1.0936},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(O,F,Y){Y===void 0&&(Y={});var X={type:"Feature"};return(Y.id===0||Y.id)&&(X.id=Y.id),Y.bbox&&(X.bbox=Y.bbox),X.properties=F||{},X.geometry=O,X}H.feature=d;function l(O,F,Y){switch(O){case"Point":return b(F).geometry;case"LineString":return a(F).geometry;case"Polygon":return e(F).geometry;case"MultiPoint":return s(F).geometry;case"MultiLineString":return u(F).geometry;case"MultiPolygon":return i(F).geometry;default:throw new Error(O+" is invalid")}}H.geometry=l;function b(O,F,Y){Y===void 0&&(Y={});var X={type:"Point",coordinates:O};return d(X,F,Y)}H.point=b;function w(O,F,Y){return Y===void 0&&(Y={}),r(O.map(function(X){return b(X,F)}),Y)}H.points=w;function e(O,F,Y){Y===void 0&&(Y={});for(var X=0,q=O;X<q.length;X++){var $=q[X];if($.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var V=0;V<$[$.length-1].length;V++)if($[$.length-1][V]!==$[0][V])throw new Error("First and last Position are not equivalent.")}var K={type:"Polygon",coordinates:O};return d(K,F,Y)}H.polygon=e;function o(O,F,Y){return Y===void 0&&(Y={}),r(O.map(function(X){return e(X,F)}),Y)}H.polygons=o;function a(O,F,Y){if(Y===void 0&&(Y={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var X={type:"LineString",coordinates:O};return d(X,F,Y)}H.lineString=a;function n(O,F,Y){return Y===void 0&&(Y={}),r(O.map(function(X){return a(X,F)}),Y)}H.lineStrings=n;function r(O,F){F===void 0&&(F={});var Y={type:"FeatureCollection"};return F.id&&(Y.id=F.id),F.bbox&&(Y.bbox=F.bbox),Y.features=O,Y}H.featureCollection=r;function u(O,F,Y){Y===void 0&&(Y={});var X={type:"MultiLineString",coordinates:O};return d(X,F,Y)}H.multiLineString=u;function s(O,F,Y){Y===void 0&&(Y={});var X={type:"MultiPoint",coordinates:O};return d(X,F,Y)}H.multiPoint=s;function i(O,F,Y){Y===void 0&&(Y={});var X={type:"MultiPolygon",coordinates:O};return d(X,F,Y)}H.multiPolygon=i;function f(O,F,Y){Y===void 0&&(Y={});var X={type:"GeometryCollection",geometries:O};return d(X,F,Y)}H.geometryCollection=f;function h(O,F){if(F===void 0&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var Y=Math.pow(10,F||0);return Math.round(O*Y)/Y}H.round=h;function p(O,F){F===void 0&&(F="kilometers");var Y=H.factors[F];if(!Y)throw new Error(F+" units is invalid");return O*Y}H.radiansToLength=p;function v(O,F){F===void 0&&(F="kilometers");var Y=H.factors[F];if(!Y)throw new Error(F+" units is invalid");return O/Y}H.lengthToRadians=v;function y(O,F){return A(v(O,F))}H.lengthToDegrees=y;function g(O){var F=O%360;return F<0&&(F+=360),F}H.bearingToAzimuth=g;function A(O){var F=O%(2*Math.PI);return F*180/Math.PI}H.radiansToDegrees=A;function m(O){var F=O%360;return F*Math.PI/180}H.degreesToRadians=m;function M(O,F,Y){if(F===void 0&&(F="kilometers"),Y===void 0&&(Y="kilometers"),!(O>=0))throw new Error("length must be a positive number");return p(v(O,F),Y)}H.convertLength=M;function _(O,F,Y){if(F===void 0&&(F="meters"),Y===void 0&&(Y="kilometers"),!(O>=0))throw new Error("area must be a positive number");var X=H.areaFactors[F];if(!X)throw new Error("invalid original units");var q=H.areaFactors[Y];if(!q)throw new Error("invalid final units");return O/X*q}H.convertArea=_;function T(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}H.isNumber=T;function x(O){return!!O&&O.constructor===Object}H.isObject=x;function c(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(F){if(!T(F))throw new Error("bbox must only contain numbers")})}H.validateBBox=c;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}H.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}H.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}H.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}H.distanceToDegrees=P;function z(){throw new Error("method has been renamed to `lengthToRadians`")}H.distanceToRadians=z;function I(){throw new Error("method has been renamed to `radiansToLength`")}H.radiansToDistance=I;function R(){throw new Error("method has been renamed to `bearingToAzimuth`")}H.bearingToAngle=R;function D(){throw new Error("method has been renamed to `convertLength`")}H.convertDistance=D},{}],69:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/helpers");function l(A,m,M){if(A!==null)for(var _,T,x,c,L,S,k,P=0,z=0,I,R=A.type,D=R==="FeatureCollection",O=R==="Feature",F=D?A.features.length:1,Y=0;Y<F;Y++){k=D?A.features[Y].geometry:O?A.geometry:A,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var X=0;X<L;X++){var q=0,$=0;if(c=I?k.geometries[X]:k,c!==null){S=c.coordinates;var V=c.type;switch(P=M&&(V==="Polygon"||V==="MultiPolygon")?1:0,V){case null:break;case"Point":if(m(S,z,Y,q,$)===!1)return!1;z++,q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(m(S[_],z,Y,q,$)===!1)return!1;z++,V==="MultiPoint"&&q++}V==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(T=0;T<S[_].length-P;T++){if(m(S[_][T],z,Y,q,$)===!1)return!1;z++}V==="MultiLineString"&&q++,V==="Polygon"&&$++}V==="Polygon"&&q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for($=0,T=0;T<S[_].length;T++){for(x=0;x<S[_][T].length-P;x++){if(m(S[_][T][x],z,Y,q,$)===!1)return!1;z++}$++}q++}break;case"GeometryCollection":for(_=0;_<c.geometries.length;_++)if(l(c.geometries[_],m,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(A,m,M,_){var T=M;return l(A,function(x,c,L,S,k){c===0&&M===void 0?T=x:T=m(T,x,c,L,S,k)},_),T}function w(A,m){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&m(A.features[M].properties,M)!==!1;M++);break;case"Feature":m(A.properties,0);break}}function e(A,m,M){var _=M;return w(A,function(T,x){x===0&&M===void 0?_=T:_=m(_,T,x)}),_}function o(A,m){if(A.type==="Feature")m(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&m(A.features[M],M)!==!1;M++);}function a(A,m,M){var _=M;return o(A,function(T,x){x===0&&M===void 0?_=T:_=m(_,T,x)}),_}function n(A){var m=[];return l(A,function(M){m.push(M)}),m}function r(A,m){var M,_,T,x,c,L,S,k,P,z,I=0,R=A.type==="FeatureCollection",D=A.type==="Feature",O=R?A.features.length:1;for(M=0;M<O;M++){for(L=R?A.features[M].geometry:D?A.geometry:A,k=R?A.features[M].properties:D?A.properties:{},P=R?A.features[M].bbox:D?A.bbox:void 0,z=R?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,c=S?L.geometries.length:1,T=0;T<c;T++){if(x=S?L.geometries[T]:L,x===null){if(m(null,I,k,P,z)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(x,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<x.geometries.length;_++)if(m(x.geometries[_],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function u(A,m,M){var _=M;return r(A,function(T,x,c,L,S){x===0&&M===void 0?_=T:_=m(_,T,x,c,L,S)}),_}function s(A,m){r(A,function(M,_,T,x,c){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return m(d.feature(M,T,{bbox:x,id:c}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],z={type:S,coordinates:P};if(m(d.feature(z,T),_,k)===!1)return!1}})}function i(A,m,M){var _=M;return s(A,function(T,x,c){x===0&&c===0&&M===void 0?_=T:_=m(_,T,x,c)}),_}function f(A,m){s(A,function(M,_,T){var x=0;if(!!M.geometry){var c=M.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var L,S=0,k=0,P=0;if(l(M,function(z,I,R,D,O){if(L===void 0||_>S||D>k||O>P){L=z,S=_,k=D,P=O,x=0;return}var F=d.lineString([L,z],M.properties);if(m(F,_,T,O,x)===!1)return!1;x++,L=z})===!1)return!1}}})}function h(A,m,M){var _=M,T=!1;return f(A,function(x,c,L,S,k){T===!1&&M===void 0?_=x:_=m(_,x,c,L,S,k),T=!0}),_}function p(A,m){if(!A)throw new Error("geojson is required");s(A,function(M,_,T){if(M.geometry!==null){var x=M.geometry.type,c=M.geometry.coordinates;switch(x){case"LineString":if(m(M,_,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<c.length;L++)if(m(d.lineString(c[L],M.properties),_,T,L)===!1)return!1;break}}})}function v(A,m,M){var _=M;return p(A,function(T,x,c,L){x===0&&M===void 0?_=T:_=m(_,T,x,c,L)}),_}function y(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,_=m.multiFeatureIndex||0,T=m.geometryIndex||0,x=m.segmentIndex||0,c=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),c=c||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":c=c||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=S.length+x-1),d.lineString([S[x],S[x+1]],c,m);case"Polygon":return T<0&&(T=S.length+T),x<0&&(x=S[T].length+x-1),d.lineString([S[T][x],S[T][x+1]],c,m);case"MultiLineString":return _<0&&(_=S.length+_),x<0&&(x=S[_].length+x-1),d.lineString([S[_][x],S[_][x+1]],c,m);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),x<0&&(x=S[_][T].length-x-1),d.lineString([S[_][T][x],S[_][T][x+1]],c,m)}throw new Error("geojson is invalid")}function g(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,_=m.multiFeatureIndex||0,T=m.geometryIndex||0,x=m.coordIndex||0,c=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),c=c||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":c=c||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return d.point(S,c,m);case"MultiPoint":return _<0&&(_=S.length+_),d.point(S[_],c,m);case"LineString":return x<0&&(x=S.length+x),d.point(S[x],c,m);case"Polygon":return T<0&&(T=S.length+T),x<0&&(x=S[T].length+x),d.point(S[T][x],c,m);case"MultiLineString":return _<0&&(_=S.length+_),x<0&&(x=S[_].length+x),d.point(S[_][x],c,m);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),x<0&&(x=S[_][T].length-x),d.point(S[_][T][x],c,m)}throw new Error("geojson is invalid")}H.coordEach=l,H.coordReduce=b,H.propEach=w,H.propReduce=e,H.featureEach=o,H.featureReduce=a,H.coordAll=n,H.geomEach=r,H.geomReduce=u,H.flattenEach=s,H.flattenReduce=i,H.segmentEach=f,H.segmentReduce=h,H.lineEach=p,H.lineReduce=v,H.findSegment=y,H.findPoint=g},{"@turf/helpers":68}],70:[function(t,B,H){B.exports=d;function d(l){var b=0,w=0,e=0,o=0;return l.map(function(a){a=a.slice();var n=a[0],r=n.toUpperCase();if(n!=r)switch(a[0]=r,n){case"a":a[6]+=e,a[7]+=o;break;case"v":a[1]+=o;break;case"h":a[1]+=e;break;default:for(var u=1;u<a.length;)a[u++]+=e,a[u++]+=o}switch(r){case"Z":e=b,o=w;break;case"H":e=a[1];break;case"V":o=a[1];break;case"M":e=b=a[1],o=w=a[2];break;default:e=a[a.length-2],o=a[a.length-1]}return a})}},{}],71:[function(t,B,H){B.exports=d;function d(l,b){if(!l||l.length==null)throw Error("Argument should be an array");b==null?b=1:b=Math.floor(b);for(var w=Array(b*2),e=0;e<b;e++){for(var o=-1/0,a=1/0,n=e,r=l.length;n<r;n+=b)l[n]>o&&(o=l[n]),l[n]<a&&(a=l[n]);w[e]=a,w[b+e]=o}return w}},{}],72:[function(t,B,H){B.exports=function(d,l,b){if(typeof Array.prototype.findIndex=="function")return d.findIndex(l,b);if(typeof l!="function")throw new TypeError("predicate must be a function");var w=Object(d),e=w.length;if(e===0)return-1;for(var o=0;o<e;o++)if(l.call(b,w[o],o,w))return o;return-1}},{}],73:[function(t,B,H){var d=t("array-bounds");B.exports=l;function l(b,w,e){if(!b||b.length==null)throw Error("Argument should be an array");w==null&&(w=1),e==null&&(e=d(b,w));for(var o=0;o<w;o++){var a=e[w+o],n=e[o],r=o,u=b.length;if(a===1/0&&n===-1/0)for(r=o;r<u;r+=w)b[r]=b[r]===a?1:b[r]===n?0:.5;else if(a===1/0)for(r=o;r<u;r+=w)b[r]=b[r]===a?1:0;else if(n===-1/0)for(r=o;r<u;r+=w)b[r]=b[r]===n?0:1;else{var s=a-n;for(r=o;r<u;r+=w)isNaN(b[r])||(b[r]=s===0?.5:(b[r]-n)/s)}}return b}},{"array-bounds":71}],74:[function(t,B,H){B.exports=function(l,b){var w=typeof l=="number",e=typeof b=="number";w&&!e?(b=l,l=0):!w&&!e&&(l=0,b=0),l=l|0,b=b|0;var o=b-l;if(o<0)throw new Error("array length must be positive");for(var a=new Array(o),n=0,r=l;n<o;n++,r++)a[n]=r;return a}},{}],75:[function(t,B,H){(function(d){(function(){var l=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function b(k,P){if(k===P)return 0;for(var z=k.length,I=P.length,R=0,D=Math.min(z,I);R<D;++R)if(k[R]!==P[R]){z=k[R],I=P[R];break}return z<I?-1:I<z?1:0}function w(k){return d.Buffer&&typeof d.Buffer.isBuffer=="function"?d.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var e=t("util/"),o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(k){return Object.prototype.toString.call(k)}function u(k){return w(k)||typeof d.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var s=B.exports=g,i=/\s*function\s+([^\(\s]*)\s*/;function f(k){if(!!e.isFunction(k)){if(n)return k.name;var P=k.toString(),z=P.match(i);return z&&z[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=v(this),this.generatedMessage=!0);var z=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,z);else{var I=new Error;if(I.stack){var R=I.stack,D=f(z),O=R.indexOf(`
`+D);if(O>=0){var F=R.indexOf(`
`,O+1);R=R.substring(F+1)}this.stack=R}}},e.inherits(s.AssertionError,Error);function h(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function p(k){if(n||!e.isFunction(k))return e.inspect(k);var P=f(k),z=P?": "+P:"";return"[Function"+z+"]"}function v(k){return h(p(k.actual),128)+" "+k.operator+" "+h(p(k.expected),128)}function y(k,P,z,I,R){throw new s.AssertionError({message:z,actual:k,expected:P,operator:I,stackStartFunction:R})}s.fail=y;function g(k,P){k||y(k,!0,P,"==",s.ok)}s.ok=g,s.equal=function(P,z,I){P!=z&&y(P,z,I,"==",s.equal)},s.notEqual=function(P,z,I){P==z&&y(P,z,I,"!=",s.notEqual)},s.deepEqual=function(P,z,I){A(P,z,!1)||y(P,z,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,z,I){A(P,z,!0)||y(P,z,I,"deepStrictEqual",s.deepStrictEqual)};function A(k,P,z,I){if(k===P)return!0;if(w(k)&&w(P))return b(k,P)===0;if(e.isDate(k)&&e.isDate(P))return k.getTime()===P.getTime();if(e.isRegExp(k)&&e.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return z?k===P:k==P;if(u(k)&&u(P)&&r(k)===r(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return b(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(w(k)!==w(P))return!1;I=I||{actual:[],expected:[]};var R=I.actual.indexOf(k);return R!==-1&&R===I.expected.indexOf(P)?!0:(I.actual.push(k),I.expected.push(P),M(k,P,z,I))}function m(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function M(k,P,z,I){if(k==null||P===null||P===void 0)return!1;if(e.isPrimitive(k)||e.isPrimitive(P))return k===P;if(z&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var R=m(k),D=m(P);if(R&&!D||!R&&D)return!1;if(R)return k=a.call(k),P=a.call(P),A(k,P,z);var O=S(k),F=S(P),Y,X;if(O.length!==F.length)return!1;for(O.sort(),F.sort(),X=O.length-1;X>=0;X--)if(O[X]!==F[X])return!1;for(X=O.length-1;X>=0;X--)if(Y=O[X],!A(k[Y],P[Y],z,I))return!1;return!0}s.notDeepEqual=function(P,z,I){A(P,z,!1)&&y(P,z,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=_;function _(k,P,z){A(k,P,!0)&&y(k,P,z,"notDeepStrictEqual",_)}s.strictEqual=function(P,z,I){P!==z&&y(P,z,I,"===",s.strictEqual)},s.notStrictEqual=function(P,z,I){P===z&&y(P,z,I,"!==",s.notStrictEqual)};function T(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function x(k){var P;try{k()}catch(z){P=z}return P}function c(k,P,z,I){var R;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof z=="string"&&(I=z,z=null),R=x(P),I=(z&&z.name?" ("+z.name+").":".")+(I?" "+I:"."),k&&!R&&y(R,z,"Missing expected exception"+I);var D=typeof I=="string",O=!k&&e.isError(R),F=!k&&R&&!z;if((O&&D&&T(R,z)||F)&&y(R,z,"Got unwanted exception"+I),k&&R&&z&&!T(R,z)||!k&&R)throw R}s.throws=function(k,P,z){c(!0,k,P,z)},s.doesNotThrow=function(k,P,z){c(!1,k,P,z)},s.ifError=function(k){if(k)throw k};function L(k,P){k||y(k,!0,P,"==",L)}s.strict=l(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var S=Object.keys||function(k){var P=[];for(var z in k)o.call(k,z)&&P.push(z);return P}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,B,H){typeof Object.create=="function"?B.exports=function(l,b){l.super_=b,l.prototype=Object.create(b.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(l,b){l.super_=b;var w=function(){};w.prototype=b.prototype,l.prototype=new w,l.prototype.constructor=l}},{}],77:[function(t,B,H){B.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},{}],78:[function(t,B,H){(function(d,l){(function(){var b=/%[sdj%]/g;H.format=function(F){if(!M(F)){for(var Y=[],X=0;X<arguments.length;X++)Y.push(o(arguments[X]));return Y.join(" ")}for(var X=1,q=arguments,$=q.length,V=String(F).replace(b,function(se){if(se==="%%")return"%";if(X>=$)return se;switch(se){case"%s":return String(q[X++]);case"%d":return Number(q[X++]);case"%j":try{return JSON.stringify(q[X++])}catch{return"[Circular]"}default:return se}}),K=q[X];X<$;K=q[++X])g(K)||!c(K)?V+=" "+K:V+=" "+o(K);return V},H.deprecate=function(F,Y){if(T(l.process))return function(){return H.deprecate(F,Y).apply(this,arguments)};if(d.noDeprecation===!0)return F;var X=!1;function q(){if(!X){if(d.throwDeprecation)throw new Error(Y);d.traceDeprecation?console.trace(Y):console.error(Y),X=!0}return F.apply(this,arguments)}return q};var w={},e;H.debuglog=function(F){if(T(e)&&(e=""),F=F.toUpperCase(),!w[F])if(new RegExp("\\b"+F+"\\b","i").test(e)){var Y=d.pid;w[F]=function(){var X=H.format.apply(H,arguments);console.error("%s %d: %s",F,Y,X)}}else w[F]=function(){};return w[F]};function o(F,Y){var X={seen:[],stylize:n};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),y(Y)?X.showHidden=Y:Y&&H._extend(X,Y),T(X.showHidden)&&(X.showHidden=!1),T(X.depth)&&(X.depth=2),T(X.colors)&&(X.colors=!1),T(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=a),u(X,F,X.depth)}H.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(F,Y){var X=o.styles[Y];return X?"["+o.colors[X][0]+"m"+F+"["+o.colors[X][1]+"m":F}function n(F,Y){return F}function r(F){var Y={};return F.forEach(function(X,q){Y[X]=!0}),Y}function u(F,Y,X){if(F.customInspect&&Y&&k(Y.inspect)&&Y.inspect!==H.inspect&&!(Y.constructor&&Y.constructor.prototype===Y)){var q=Y.inspect(X,F);return M(q)||(q=u(F,q,X)),q}var $=s(F,Y);if($)return $;var V=Object.keys(Y),K=r(V);if(F.showHidden&&(V=Object.getOwnPropertyNames(Y)),S(Y)&&(V.indexOf("message")>=0||V.indexOf("description")>=0))return i(Y);if(V.length===0){if(k(Y)){var se=Y.name?": "+Y.name:"";return F.stylize("[Function"+se+"]","special")}if(x(Y))return F.stylize(RegExp.prototype.toString.call(Y),"regexp");if(L(Y))return F.stylize(Date.prototype.toString.call(Y),"date");if(S(Y))return i(Y)}var ue="",oe=!1,U=["{","}"];if(v(Y)&&(oe=!0,U=["[","]"]),k(Y)){var G=Y.name?": "+Y.name:"";ue=" [Function"+G+"]"}if(x(Y)&&(ue=" "+RegExp.prototype.toString.call(Y)),L(Y)&&(ue=" "+Date.prototype.toUTCString.call(Y)),S(Y)&&(ue=" "+i(Y)),V.length===0&&(!oe||Y.length==0))return U[0]+ue+U[1];if(X<0)return x(Y)?F.stylize(RegExp.prototype.toString.call(Y),"regexp"):F.stylize("[Object]","special");F.seen.push(Y);var re;return oe?re=f(F,Y,X,K,V):re=V.map(function(ee){return h(F,Y,X,K,ee,oe)}),F.seen.pop(),p(re,ue,U)}function s(F,Y){if(T(Y))return F.stylize("undefined","undefined");if(M(Y)){var X="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(X,"string")}if(m(Y))return F.stylize(""+Y,"number");if(y(Y))return F.stylize(""+Y,"boolean");if(g(Y))return F.stylize("null","null")}function i(F){return"["+Error.prototype.toString.call(F)+"]"}function f(F,Y,X,q,$){for(var V=[],K=0,se=Y.length;K<se;++K)O(Y,String(K))?V.push(h(F,Y,X,q,String(K),!0)):V.push("");return $.forEach(function(ue){ue.match(/^\d+$/)||V.push(h(F,Y,X,q,ue,!0))}),V}function h(F,Y,X,q,$,V){var K,se,ue;if(ue=Object.getOwnPropertyDescriptor(Y,$)||{value:Y[$]},ue.get?ue.set?se=F.stylize("[Getter/Setter]","special"):se=F.stylize("[Getter]","special"):ue.set&&(se=F.stylize("[Setter]","special")),O(q,$)||(K="["+$+"]"),se||(F.seen.indexOf(ue.value)<0?(g(X)?se=u(F,ue.value,null):se=u(F,ue.value,X-1),se.indexOf(`
`)>-1&&(V?se=se.split(`
`).map(function(oe){return"  "+oe}).join(`
`).substr(2):se=`
`+se.split(`
`).map(function(oe){return"   "+oe}).join(`
`))):se=F.stylize("[Circular]","special")),T(K)){if(V&&$.match(/^\d+$/))return se;K=JSON.stringify(""+$),K.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(K=K.substr(1,K.length-2),K=F.stylize(K,"name")):(K=K.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),K=F.stylize(K,"string"))}return K+": "+se}function p(F,Y,X){var q=F.reduce(function($,V){return V.indexOf(`
`)>=0,$+V.replace(/\u001b\[\d\d?m/g,"").length+1},0);return q>60?X[0]+(Y===""?"":Y+`
 `)+" "+F.join(`,
  `)+" "+X[1]:X[0]+Y+" "+F.join(", ")+" "+X[1]}function v(F){return Array.isArray(F)}H.isArray=v;function y(F){return typeof F=="boolean"}H.isBoolean=y;function g(F){return F===null}H.isNull=g;function A(F){return F==null}H.isNullOrUndefined=A;function m(F){return typeof F=="number"}H.isNumber=m;function M(F){return typeof F=="string"}H.isString=M;function _(F){return typeof F=="symbol"}H.isSymbol=_;function T(F){return F===void 0}H.isUndefined=T;function x(F){return c(F)&&z(F)==="[object RegExp]"}H.isRegExp=x;function c(F){return typeof F=="object"&&F!==null}H.isObject=c;function L(F){return c(F)&&z(F)==="[object Date]"}H.isDate=L;function S(F){return c(F)&&(z(F)==="[object Error]"||F instanceof Error)}H.isError=S;function k(F){return typeof F=="function"}H.isFunction=k;function P(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F=="undefined"}H.isPrimitive=P,H.isBuffer=t("./support/isBuffer");function z(F){return Object.prototype.toString.call(F)}function I(F){return F<10?"0"+F.toString(10):F.toString(10)}var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var F=new Date,Y=[I(F.getHours()),I(F.getMinutes()),I(F.getSeconds())].join(":");return[F.getDate(),R[F.getMonth()],Y].join(" ")}H.log=function(){console.log("%s - %s",D(),H.format.apply(H,arguments))},H.inherits=t("inherits"),H._extend=function(F,Y){if(!Y||!c(Y))return F;for(var X=Object.keys(Y),q=X.length;q--;)F[X[q]]=Y[X[q]];return F};function O(F,Y){return Object.prototype.hasOwnProperty.call(F,Y)}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(t,B,H){H.byteLength=n,H.toByteArray=u,H.fromByteArray=f;for(var d=[],l=[],b=typeof Uint8Array!="undefined"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=w.length;e<o;++e)d[e]=w[e],l[w.charCodeAt(e)]=e;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;function a(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=h.indexOf("=");v===-1&&(v=p);var y=v===p?0:4-v%4;return[v,y]}function n(h){var p=a(h),v=p[0],y=p[1];return(v+y)*3/4-y}function r(h,p,v){return(p+v)*3/4-v}function u(h){var p,v=a(h),y=v[0],g=v[1],A=new b(r(h,y,g)),m=0,M=g>0?y-4:y,_;for(_=0;_<M;_+=4)p=l[h.charCodeAt(_)]<<18|l[h.charCodeAt(_+1)]<<12|l[h.charCodeAt(_+2)]<<6|l[h.charCodeAt(_+3)],A[m++]=p>>16&255,A[m++]=p>>8&255,A[m++]=p&255;return g===2&&(p=l[h.charCodeAt(_)]<<2|l[h.charCodeAt(_+1)]>>4,A[m++]=p&255),g===1&&(p=l[h.charCodeAt(_)]<<10|l[h.charCodeAt(_+1)]<<4|l[h.charCodeAt(_+2)]>>2,A[m++]=p>>8&255,A[m++]=p&255),A}function s(h){return d[h>>18&63]+d[h>>12&63]+d[h>>6&63]+d[h&63]}function i(h,p,v){for(var y,g=[],A=p;A<v;A+=3)y=(h[A]<<16&16711680)+(h[A+1]<<8&65280)+(h[A+2]&255),g.push(s(y));return g.join("")}function f(h){for(var p,v=h.length,y=v%3,g=[],A=16383,m=0,M=v-y;m<M;m+=A)g.push(i(h,m,m+A>M?M:m+A));return y===1?(p=h[v-1],g.push(d[p>>2]+d[p<<4&63]+"==")):y===2&&(p=(h[v-2]<<8)+h[v-1],g.push(d[p>>10]+d[p>>4&63]+d[p<<2&63]+"=")),g.join("")}},{}],80:[function(t,B,H){function d(a,n,r,u,s){for(var i=s+1;u<=s;){var f=u+s>>>1,h=a[f],p=r!==void 0?r(h,n):h-n;p>=0?(i=f,s=f-1):u=f+1}return i}function l(a,n,r,u,s){for(var i=s+1;u<=s;){var f=u+s>>>1,h=a[f],p=r!==void 0?r(h,n):h-n;p>0?(i=f,s=f-1):u=f+1}return i}function b(a,n,r,u,s){for(var i=u-1;u<=s;){var f=u+s>>>1,h=a[f],p=r!==void 0?r(h,n):h-n;p<0?(i=f,u=f+1):s=f-1}return i}function w(a,n,r,u,s){for(var i=u-1;u<=s;){var f=u+s>>>1,h=a[f],p=r!==void 0?r(h,n):h-n;p<=0?(i=f,u=f+1):s=f-1}return i}function e(a,n,r,u,s){for(;u<=s;){var i=u+s>>>1,f=a[i],h=r!==void 0?r(f,n):f-n;if(h===0)return i;h<=0?u=i+1:s=i-1}return-1}function o(a,n,r,u,s,i){return typeof r=="function"?i(a,n,r,u===void 0?0:u|0,s===void 0?a.length-1:s|0):i(a,n,void 0,r===void 0?0:r|0,u===void 0?a.length-1:u|0)}B.exports={ge:function(a,n,r,u,s){return o(a,n,r,u,s,d)},gt:function(a,n,r,u,s){return o(a,n,r,u,s,l)},lt:function(a,n,r,u,s){return o(a,n,r,u,s,b)},le:function(a,n,r,u,s){return o(a,n,r,u,s,w)},eq:function(a,n,r,u,s){return o(a,n,r,u,s,e)}}},{}],81:[function(t,B,H){var d=32;H.INT_BITS=d,H.INT_MAX=2147483647,H.INT_MIN=-1<<d-1,H.sign=function(w){return(w>0)-(w<0)},H.abs=function(w){var e=w>>d-1;return(w^e)-e},H.min=function(w,e){return e^(w^e)&-(w<e)},H.max=function(w,e){return w^(w^e)&-(w<e)},H.isPow2=function(w){return!(w&w-1)&&!!w},H.log2=function(w){var e,o;return e=(w>65535)<<4,w>>>=e,o=(w>255)<<3,w>>>=o,e|=o,o=(w>15)<<2,w>>>=o,e|=o,o=(w>3)<<1,w>>>=o,e|=o,e|w>>1},H.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},H.popCount=function(w){return w=w-(w>>>1&1431655765),w=(w&858993459)+(w>>>2&858993459),(w+(w>>>4)&252645135)*16843009>>>24};function l(w){var e=32;return w&=-w,w&&e--,w&65535&&(e-=16),w&16711935&&(e-=8),w&252645135&&(e-=4),w&858993459&&(e-=2),w&1431655765&&(e-=1),e}H.countTrailingZeros=l,H.nextPow2=function(w){return w+=w===0,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w+1},H.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w-(w>>>1)},H.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,w&=15,27030>>>w&1};var b=new Array(256);(function(w){for(var e=0;e<256;++e){var o=e,a=e,n=7;for(o>>>=1;o;o>>>=1)a<<=1,a|=o&1,--n;w[e]=a<<n&255}})(b),H.reverse=function(w){return b[w&255]<<24|b[w>>>8&255]<<16|b[w>>>16&255]<<8|b[w>>>24&255]},H.interleave2=function(w,e){return w&=65535,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,w|e<<1},H.deinterleave2=function(w,e){return w=w>>>e&1431655765,w=(w|w>>>1)&858993459,w=(w|w>>>2)&252645135,w=(w|w>>>4)&16711935,w=(w|w>>>16)&65535,w<<16>>16},H.interleave3=function(w,e,o){return w&=1023,w=(w|w<<16)&4278190335,w=(w|w<<8)&251719695,w=(w|w<<4)&3272356035,w=(w|w<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,w|=e<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,w|o<<2},H.deinterleave3=function(w,e){return w=w>>>e&1227133513,w=(w|w>>>2)&3272356035,w=(w|w>>>4)&251719695,w=(w|w>>>8)&4278190335,w=(w|w>>>16)&1023,w<<22>>22},H.nextCombination=function(w){var e=w|w-1;return e+1|(~e&-~e)-1>>>l(w)+1}},{}],82:[function(t,B,H){var d=t("clamp");B.exports=b;var l=1e20;function b(o,a){a||(a={});var n=a.cutoff==null?.25:a.cutoff,r=a.radius==null?8:a.radius,u=a.channel||0,s,i,f,h,p,v,y,g,A,m,M;if(ArrayBuffer.isView(o)||Array.isArray(o)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");s=a.width,i=a.height,h=o,a.stride?v=a.stride:v=Math.floor(o.length/s/i)}else window.HTMLCanvasElement&&o instanceof window.HTMLCanvasElement?(g=o,y=g.getContext("2d"),s=g.width,i=g.height,A=y.getImageData(0,0,s,i),h=A.data,v=4):window.CanvasRenderingContext2D&&o instanceof window.CanvasRenderingContext2D?(g=o.canvas,y=o,s=g.width,i=g.height,A=y.getImageData(0,0,s,i),h=A.data,v=4):window.ImageData&&o instanceof window.ImageData&&(A=o,s=o.width,i=o.height,h=A.data,v=4);if(f=Math.max(s,i),window.Uint8ClampedArray&&h instanceof window.Uint8ClampedArray||window.Uint8Array&&h instanceof window.Uint8Array)for(p=h,h=Array(s*i),m=0,M=p.length;m<M;m++)h[m]=p[m*v+u]/255;else if(v!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(s*i),T=Array(s*i),x=Array(f),c=Array(f),L=Array(f+1),S=Array(f);for(m=0,M=s*i;m<M;m++){var k=h[m];_[m]=k===1?0:k===0?l:Math.pow(Math.max(0,.5-k),2),T[m]=k===1?l:k===0?0:Math.pow(Math.max(0,k-.5),2)}w(_,s,i,x,c,S,L),w(T,s,i,x,c,S,L);var P=window.Float32Array?new Float32Array(s*i):new Array(s*i);for(m=0,M=s*i;m<M;m++)P[m]=d(1-((_[m]-T[m])/r+n),0,1);return P}function w(o,a,n,r,u,s,i){for(var f=0;f<a;f++){for(var h=0;h<n;h++)r[h]=o[h*a+f];for(e(r,u,s,i,n),h=0;h<n;h++)o[h*a+f]=u[h]}for(h=0;h<n;h++){for(f=0;f<a;f++)r[f]=o[h*a+f];for(e(r,u,s,i,a),f=0;f<a;f++)o[h*a+f]=Math.sqrt(u[f])}}function e(o,a,n,r,u){n[0]=0,r[0]=-l,r[1]=+l;for(var s=1,i=0;s<u;s++){for(var f=(o[s]+s*s-(o[n[i]]+n[i]*n[i]))/(2*s-2*n[i]);f<=r[i];)i--,f=(o[s]+s*s-(o[n[i]]+n[i]*n[i]))/(2*s-2*n[i]);i++,n[i]=s,r[i]=f,r[i+1]=+l}for(s=0,i=0;s<u;s++){for(;r[i+1]<s;)i++;a[s]=(s-n[i])*(s-n[i])+o[n[i]]}}},{clamp:86}],83:[function(t,B,H){},{}],84:[function(t,B,H){var d=typeof Reflect=="object"?Reflect:null,l=d&&typeof d.apply=="function"?d.apply:function(m,M,_){return Function.prototype.apply.call(m,M,_)},b;d&&typeof d.ownKeys=="function"?b=d.ownKeys:Object.getOwnPropertySymbols?b=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:b=function(m){return Object.getOwnPropertyNames(m)};function w(A){console&&console.warn&&console.warn(A)}var e=Number.isNaN||function(m){return m!==m};function o(){o.init.call(this)}B.exports=o,B.exports.once=g,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function n(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||e(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||e(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function r(A){return A._maxListeners===void 0?o.defaultMaxListeners:A._maxListeners}o.prototype.getMaxListeners=function(){return r(this)},o.prototype.emit=function(m){for(var M=[],_=1;_<arguments.length;_++)M.push(arguments[_]);var T=m==="error",x=this._events;if(x!==void 0)T=T&&x.error===void 0;else if(!T)return!1;if(T){var c;if(M.length>0&&(c=M[0]),c instanceof Error)throw c;var L=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw L.context=c,L}var S=x[m];if(S===void 0)return!1;if(typeof S=="function")l(S,this,M);else for(var k=S.length,P=p(S,k),_=0;_<k;++_)l(P[_],this,M);return!0};function u(A,m,M,_){var T,x,c;if(n(M),x=A._events,x===void 0?(x=A._events=Object.create(null),A._eventsCount=0):(x.newListener!==void 0&&(A.emit("newListener",m,M.listener?M.listener:M),x=A._events),c=x[m]),c===void 0)c=x[m]=M,++A._eventsCount;else if(typeof c=="function"?c=x[m]=_?[M,c]:[c,M]:_?c.unshift(M):c.push(M),T=r(A),T>0&&c.length>T&&!c.warned){c.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=m,L.count=c.length,w(L)}return A}o.prototype.addListener=function(m,M){return u(this,m,M,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(m,M){return u(this,m,M,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(A,m,M){var _={fired:!1,wrapFn:void 0,target:A,type:m,listener:M},T=s.bind(_);return T.listener=M,_.wrapFn=T,T}o.prototype.once=function(m,M){return n(M),this.on(m,i(this,m,M)),this},o.prototype.prependOnceListener=function(m,M){return n(M),this.prependListener(m,i(this,m,M)),this},o.prototype.removeListener=function(m,M){var _,T,x,c,L;if(n(M),T=this._events,T===void 0)return this;if(_=T[m],_===void 0)return this;if(_===M||_.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete T[m],T.removeListener&&this.emit("removeListener",m,_.listener||M));else if(typeof _!="function"){for(x=-1,c=_.length-1;c>=0;c--)if(_[c]===M||_[c].listener===M){L=_[c].listener,x=c;break}if(x<0)return this;x===0?_.shift():v(_,x),_.length===1&&(T[m]=_[0]),T.removeListener!==void 0&&this.emit("removeListener",m,L||M)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(m){var M,_,T;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[m]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _[m]),this;if(arguments.length===0){var x=Object.keys(_),c;for(T=0;T<x.length;++T)c=x[T],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=_[m],typeof M=="function")this.removeListener(m,M);else if(M!==void 0)for(T=M.length-1;T>=0;T--)this.removeListener(m,M[T]);return this};function f(A,m,M){var _=A._events;if(_===void 0)return[];var T=_[m];return T===void 0?[]:typeof T=="function"?M?[T.listener||T]:[T]:M?y(T):p(T,T.length)}o.prototype.listeners=function(m){return f(this,m,!0)},o.prototype.rawListeners=function(m){return f(this,m,!1)},o.listenerCount=function(A,m){return typeof A.listenerCount=="function"?A.listenerCount(m):h.call(A,m)},o.prototype.listenerCount=h;function h(A){var m=this._events;if(m!==void 0){var M=m[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]};function p(A,m){for(var M=new Array(m),_=0;_<m;++_)M[_]=A[_];return M}function v(A,m){for(;m+1<A.length;m++)A[m]=A[m+1];A.pop()}function y(A){for(var m=new Array(A.length),M=0;M<m.length;++M)m[M]=A[M].listener||A[M];return m}function g(A,m){return new Promise(function(M,_){function T(){x!==void 0&&A.removeListener("error",x),M([].slice.call(arguments))}var x;m!=="error"&&(x=function(L){A.removeListener(m,T),_(L)},A.once("error",x)),A.once(m,T)})}},{}],85:[function(t,B,H){(function(d){(function(){var l=t("base64-js"),b=t("ieee754");H.Buffer=a,H.SlowBuffer=y,H.INSPECT_MAX_BYTES=50;var w=2147483647;H.kMaxLength=w,a.TYPED_ARRAY_SUPPORT=e(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var ae=new Uint8Array(1);return ae.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ae.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function o(ae){if(ae>w)throw new RangeError('The value "'+ae+'" is invalid for option "size"');var ie=new Uint8Array(ae);return ie.__proto__=a.prototype,ie}function a(ae,ie,fe){if(typeof ae=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(ae)}return n(ae,ie,fe)}typeof Symbol!="undefined"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function n(ae,ie,fe){if(typeof ae=="string")return i(ae,ie);if(ArrayBuffer.isView(ae))return f(ae);if(ae==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(Q(ae,ArrayBuffer)||ae&&Q(ae.buffer,ArrayBuffer))return h(ae,ie,fe);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=ae.valueOf&&ae.valueOf();if(me!=null&&me!==ae)return a.from(me,ie,fe);var ce=p(ae);if(ce)return ce;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return a.from(ae[Symbol.toPrimitive]("string"),ie,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}a.from=function(ae,ie,fe){return n(ae,ie,fe)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function r(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function u(ae,ie,fe){return r(ae),ae<=0?o(ae):ie!==void 0?typeof fe=="string"?o(ae).fill(ie,fe):o(ae).fill(ie):o(ae)}a.alloc=function(ae,ie,fe){return u(ae,ie,fe)};function s(ae){return r(ae),o(ae<0?0:v(ae)|0)}a.allocUnsafe=function(ae){return s(ae)},a.allocUnsafeSlow=function(ae){return s(ae)};function i(ae,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var fe=g(ae,ie)|0,me=o(fe),ce=me.write(ae,ie);return ce!==fe&&(me=me.slice(0,ce)),me}function f(ae){for(var ie=ae.length<0?0:v(ae.length)|0,fe=o(ie),me=0;me<ie;me+=1)fe[me]=ae[me]&255;return fe}function h(ae,ie,fe){if(ie<0||ae.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<ie+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var me;return ie===void 0&&fe===void 0?me=new Uint8Array(ae):fe===void 0?me=new Uint8Array(ae,ie):me=new Uint8Array(ae,ie,fe),me.__proto__=a.prototype,me}function p(ae){if(a.isBuffer(ae)){var ie=v(ae.length)|0,fe=o(ie);return fe.length===0||ae.copy(fe,0,0,ie),fe}if(ae.length!==void 0)return typeof ae.length!="number"||ne(ae.length)?o(0):f(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return f(ae.data)}function v(ae){if(ae>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return ae|0}function y(ae){return+ae!=ae&&(ae=0),a.alloc(+ae)}a.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==a.prototype},a.compare=function(ie,fe){if(Q(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),Q(fe,Uint8Array)&&(fe=a.from(fe,fe.offset,fe.byteLength)),!a.isBuffer(ie)||!a.isBuffer(fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===fe)return 0;for(var me=ie.length,ce=fe.length,ye=0,xe=Math.min(me,ce);ye<xe;++ye)if(ie[ye]!==fe[ye]){me=ie[ye],ce=fe[ye];break}return me<ce?-1:ce<me?1:0},a.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(ie,fe){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return a.alloc(0);var me;if(fe===void 0)for(fe=0,me=0;me<ie.length;++me)fe+=ie[me].length;var ce=a.allocUnsafe(fe),ye=0;for(me=0;me<ie.length;++me){var xe=ie[me];if(Q(xe,Uint8Array)&&(xe=a.from(xe)),!a.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ce,ye),ye+=xe.length}return ce};function g(ae,ie){if(a.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||Q(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);var fe=ae.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&fe===0)return 0;for(var ce=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return U(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe*2;case"hex":return fe>>>1;case"base64":return ee(ae).length;default:if(ce)return me?-1:U(ae).length;ie=(""+ie).toLowerCase(),ce=!0}}a.byteLength=g;function A(ae,ie,fe){var me=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0,ie>>>=0,fe<=ie))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return F(this,ie,fe);case"utf8":case"utf-8":return z(this,ie,fe);case"ascii":return D(this,ie,fe);case"latin1":case"binary":return O(this,ie,fe);case"base64":return P(this,ie,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,ie,fe);default:if(me)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),me=!0}}a.prototype._isBuffer=!0;function m(ae,ie,fe){var me=ae[ie];ae[ie]=ae[fe],ae[fe]=me}a.prototype.swap16=function(){var ie=this.length;if(ie%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var fe=0;fe<ie;fe+=2)m(this,fe,fe+1);return this},a.prototype.swap32=function(){var ie=this.length;if(ie%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var fe=0;fe<ie;fe+=4)m(this,fe,fe+3),m(this,fe+1,fe+2);return this},a.prototype.swap64=function(){var ie=this.length;if(ie%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var fe=0;fe<ie;fe+=8)m(this,fe,fe+7),m(this,fe+1,fe+6),m(this,fe+2,fe+5),m(this,fe+3,fe+4);return this},a.prototype.toString=function(){var ie=this.length;return ie===0?"":arguments.length===0?z(this,0,ie):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(ie){if(!a.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:a.compare(this,ie)===0},a.prototype.inspect=function(){var ie="",fe=H.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,fe).replace(/(.{2})/g,"$1 ").trim(),this.length>fe&&(ie+=" ... "),"<Buffer "+ie+">"},a.prototype.compare=function(ie,fe,me,ce,ye){if(Q(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),!a.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(fe===void 0&&(fe=0),me===void 0&&(me=ie?ie.length:0),ce===void 0&&(ce=0),ye===void 0&&(ye=this.length),fe<0||me>ie.length||ce<0||ye>this.length)throw new RangeError("out of range index");if(ce>=ye&&fe>=me)return 0;if(ce>=ye)return-1;if(fe>=me)return 1;if(fe>>>=0,me>>>=0,ce>>>=0,ye>>>=0,this===ie)return 0;for(var xe=ye-ce,ke=me-fe,Ae=Math.min(xe,ke),Oe=this.slice(ce,ye),He=ie.slice(fe,me),Ge=0;Ge<Ae;++Ge)if(Oe[Ge]!==He[Ge]){xe=Oe[Ge],ke=He[Ge];break}return xe<ke?-1:ke<xe?1:0};function M(ae,ie,fe,me,ce){if(ae.length===0)return-1;if(typeof fe=="string"?(me=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),fe=+fe,ne(fe)&&(fe=ce?0:ae.length-1),fe<0&&(fe=ae.length+fe),fe>=ae.length){if(ce)return-1;fe=ae.length-1}else if(fe<0)if(ce)fe=0;else return-1;if(typeof ie=="string"&&(ie=a.from(ie,me)),a.isBuffer(ie))return ie.length===0?-1:_(ae,ie,fe,me,ce);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(ae,ie,fe):Uint8Array.prototype.lastIndexOf.call(ae,ie,fe):_(ae,[ie],fe,me,ce);throw new TypeError("val must be string, number or Buffer")}function _(ae,ie,fe,me,ce){var ye=1,xe=ae.length,ke=ie.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ae.length<2||ie.length<2)return-1;ye=2,xe/=2,ke/=2,fe/=2}function Ae(Ie,Ye){return ye===1?Ie[Ye]:Ie.readUInt16BE(Ye*ye)}var Oe;if(ce){var He=-1;for(Oe=fe;Oe<xe;Oe++)if(Ae(ae,Oe)===Ae(ie,He===-1?0:Oe-He)){if(He===-1&&(He=Oe),Oe-He+1===ke)return He*ye}else He!==-1&&(Oe-=Oe-He),He=-1}else for(fe+ke>xe&&(fe=xe-ke),Oe=fe;Oe>=0;Oe--){for(var Ge=!0,_e=0;_e<ke;_e++)if(Ae(ae,Oe+_e)!==Ae(ie,_e)){Ge=!1;break}if(Ge)return Oe}return-1}a.prototype.includes=function(ie,fe,me){return this.indexOf(ie,fe,me)!==-1},a.prototype.indexOf=function(ie,fe,me){return M(this,ie,fe,me,!0)},a.prototype.lastIndexOf=function(ie,fe,me){return M(this,ie,fe,me,!1)};function T(ae,ie,fe,me){fe=Number(fe)||0;var ce=ae.length-fe;me?(me=Number(me),me>ce&&(me=ce)):me=ce;var ye=ie.length;me>ye/2&&(me=ye/2);for(var xe=0;xe<me;++xe){var ke=parseInt(ie.substr(xe*2,2),16);if(ne(ke))return xe;ae[fe+xe]=ke}return xe}function x(ae,ie,fe,me){return j(U(ie,ae.length-fe),ae,fe,me)}function c(ae,ie,fe,me){return j(G(ie),ae,fe,me)}function L(ae,ie,fe,me){return c(ae,ie,fe,me)}function S(ae,ie,fe,me){return j(ee(ie),ae,fe,me)}function k(ae,ie,fe,me){return j(re(ie,ae.length-fe),ae,fe,me)}a.prototype.write=function(ie,fe,me,ce){if(fe===void 0)ce="utf8",me=this.length,fe=0;else if(me===void 0&&typeof fe=="string")ce=fe,me=this.length,fe=0;else if(isFinite(fe))fe=fe>>>0,isFinite(me)?(me=me>>>0,ce===void 0&&(ce="utf8")):(ce=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ye=this.length-fe;if((me===void 0||me>ye)&&(me=ye),ie.length>0&&(me<0||fe<0)||fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var xe=!1;;)switch(ce){case"hex":return T(this,ie,fe,me);case"utf8":case"utf-8":return x(this,ie,fe,me);case"ascii":return c(this,ie,fe,me);case"latin1":case"binary":return L(this,ie,fe,me);case"base64":return S(this,ie,fe,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ie,fe,me);default:if(xe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),xe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(ae,ie,fe){return ie===0&&fe===ae.length?l.fromByteArray(ae):l.fromByteArray(ae.slice(ie,fe))}function z(ae,ie,fe){fe=Math.min(ae.length,fe);for(var me=[],ce=ie;ce<fe;){var ye=ae[ce],xe=null,ke=ye>239?4:ye>223?3:ye>191?2:1;if(ce+ke<=fe){var Ae,Oe,He,Ge;switch(ke){case 1:ye<128&&(xe=ye);break;case 2:Ae=ae[ce+1],(Ae&192)==128&&(Ge=(ye&31)<<6|Ae&63,Ge>127&&(xe=Ge));break;case 3:Ae=ae[ce+1],Oe=ae[ce+2],(Ae&192)==128&&(Oe&192)==128&&(Ge=(ye&15)<<12|(Ae&63)<<6|Oe&63,Ge>2047&&(Ge<55296||Ge>57343)&&(xe=Ge));break;case 4:Ae=ae[ce+1],Oe=ae[ce+2],He=ae[ce+3],(Ae&192)==128&&(Oe&192)==128&&(He&192)==128&&(Ge=(ye&15)<<18|(Ae&63)<<12|(Oe&63)<<6|He&63,Ge>65535&&Ge<1114112&&(xe=Ge))}}xe===null?(xe=65533,ke=1):xe>65535&&(xe-=65536,me.push(xe>>>10&1023|55296),xe=56320|xe&1023),me.push(xe),ce+=ke}return R(me)}var I=4096;function R(ae){var ie=ae.length;if(ie<=I)return String.fromCharCode.apply(String,ae);for(var fe="",me=0;me<ie;)fe+=String.fromCharCode.apply(String,ae.slice(me,me+=I));return fe}function D(ae,ie,fe){var me="";fe=Math.min(ae.length,fe);for(var ce=ie;ce<fe;++ce)me+=String.fromCharCode(ae[ce]&127);return me}function O(ae,ie,fe){var me="";fe=Math.min(ae.length,fe);for(var ce=ie;ce<fe;++ce)me+=String.fromCharCode(ae[ce]);return me}function F(ae,ie,fe){var me=ae.length;(!ie||ie<0)&&(ie=0),(!fe||fe<0||fe>me)&&(fe=me);for(var ce="",ye=ie;ye<fe;++ye)ce+=oe(ae[ye]);return ce}function Y(ae,ie,fe){for(var me=ae.slice(ie,fe),ce="",ye=0;ye<me.length;ye+=2)ce+=String.fromCharCode(me[ye]+me[ye+1]*256);return ce}a.prototype.slice=function(ie,fe){var me=this.length;ie=~~ie,fe=fe===void 0?me:~~fe,ie<0?(ie+=me,ie<0&&(ie=0)):ie>me&&(ie=me),fe<0?(fe+=me,fe<0&&(fe=0)):fe>me&&(fe=me),fe<ie&&(fe=ie);var ce=this.subarray(ie,fe);return ce.__proto__=a.prototype,ce};function X(ae,ie,fe){if(ae%1!=0||ae<0)throw new RangeError("offset is not uint");if(ae+ie>fe)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(ie,fe,me){ie=ie>>>0,fe=fe>>>0,me||X(ie,fe,this.length);for(var ce=this[ie],ye=1,xe=0;++xe<fe&&(ye*=256);)ce+=this[ie+xe]*ye;return ce},a.prototype.readUIntBE=function(ie,fe,me){ie=ie>>>0,fe=fe>>>0,me||X(ie,fe,this.length);for(var ce=this[ie+--fe],ye=1;fe>0&&(ye*=256);)ce+=this[ie+--fe]*ye;return ce},a.prototype.readUInt8=function(ie,fe){return ie=ie>>>0,fe||X(ie,1,this.length),this[ie]},a.prototype.readUInt16LE=function(ie,fe){return ie=ie>>>0,fe||X(ie,2,this.length),this[ie]|this[ie+1]<<8},a.prototype.readUInt16BE=function(ie,fe){return ie=ie>>>0,fe||X(ie,2,this.length),this[ie]<<8|this[ie+1]},a.prototype.readUInt32LE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},a.prototype.readUInt32BE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},a.prototype.readIntLE=function(ie,fe,me){ie=ie>>>0,fe=fe>>>0,me||X(ie,fe,this.length);for(var ce=this[ie],ye=1,xe=0;++xe<fe&&(ye*=256);)ce+=this[ie+xe]*ye;return ye*=128,ce>=ye&&(ce-=Math.pow(2,8*fe)),ce},a.prototype.readIntBE=function(ie,fe,me){ie=ie>>>0,fe=fe>>>0,me||X(ie,fe,this.length);for(var ce=fe,ye=1,xe=this[ie+--ce];ce>0&&(ye*=256);)xe+=this[ie+--ce]*ye;return ye*=128,xe>=ye&&(xe-=Math.pow(2,8*fe)),xe},a.prototype.readInt8=function(ie,fe){return ie=ie>>>0,fe||X(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},a.prototype.readInt16LE=function(ie,fe){ie=ie>>>0,fe||X(ie,2,this.length);var me=this[ie]|this[ie+1]<<8;return me&32768?me|4294901760:me},a.prototype.readInt16BE=function(ie,fe){ie=ie>>>0,fe||X(ie,2,this.length);var me=this[ie+1]|this[ie]<<8;return me&32768?me|4294901760:me},a.prototype.readInt32LE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},a.prototype.readInt32BE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},a.prototype.readFloatLE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),b.read(this,ie,!0,23,4)},a.prototype.readFloatBE=function(ie,fe){return ie=ie>>>0,fe||X(ie,4,this.length),b.read(this,ie,!1,23,4)},a.prototype.readDoubleLE=function(ie,fe){return ie=ie>>>0,fe||X(ie,8,this.length),b.read(this,ie,!0,52,8)},a.prototype.readDoubleBE=function(ie,fe){return ie=ie>>>0,fe||X(ie,8,this.length),b.read(this,ie,!1,52,8)};function q(ae,ie,fe,me,ce,ye){if(!a.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>ce||ie<ye)throw new RangeError('"value" argument is out of bounds');if(fe+me>ae.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(ie,fe,me,ce){if(ie=+ie,fe=fe>>>0,me=me>>>0,!ce){var ye=Math.pow(2,8*me)-1;q(this,ie,fe,me,ye,0)}var xe=1,ke=0;for(this[fe]=ie&255;++ke<me&&(xe*=256);)this[fe+ke]=ie/xe&255;return fe+me},a.prototype.writeUIntBE=function(ie,fe,me,ce){if(ie=+ie,fe=fe>>>0,me=me>>>0,!ce){var ye=Math.pow(2,8*me)-1;q(this,ie,fe,me,ye,0)}var xe=me-1,ke=1;for(this[fe+xe]=ie&255;--xe>=0&&(ke*=256);)this[fe+xe]=ie/ke&255;return fe+me},a.prototype.writeUInt8=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,1,255,0),this[fe]=ie&255,fe+1},a.prototype.writeUInt16LE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,2,65535,0),this[fe]=ie&255,this[fe+1]=ie>>>8,fe+2},a.prototype.writeUInt16BE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,2,65535,0),this[fe]=ie>>>8,this[fe+1]=ie&255,fe+2},a.prototype.writeUInt32LE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,4,4294967295,0),this[fe+3]=ie>>>24,this[fe+2]=ie>>>16,this[fe+1]=ie>>>8,this[fe]=ie&255,fe+4},a.prototype.writeUInt32BE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,4,4294967295,0),this[fe]=ie>>>24,this[fe+1]=ie>>>16,this[fe+2]=ie>>>8,this[fe+3]=ie&255,fe+4},a.prototype.writeIntLE=function(ie,fe,me,ce){if(ie=+ie,fe=fe>>>0,!ce){var ye=Math.pow(2,8*me-1);q(this,ie,fe,me,ye-1,-ye)}var xe=0,ke=1,Ae=0;for(this[fe]=ie&255;++xe<me&&(ke*=256);)ie<0&&Ae===0&&this[fe+xe-1]!==0&&(Ae=1),this[fe+xe]=(ie/ke>>0)-Ae&255;return fe+me},a.prototype.writeIntBE=function(ie,fe,me,ce){if(ie=+ie,fe=fe>>>0,!ce){var ye=Math.pow(2,8*me-1);q(this,ie,fe,me,ye-1,-ye)}var xe=me-1,ke=1,Ae=0;for(this[fe+xe]=ie&255;--xe>=0&&(ke*=256);)ie<0&&Ae===0&&this[fe+xe+1]!==0&&(Ae=1),this[fe+xe]=(ie/ke>>0)-Ae&255;return fe+me},a.prototype.writeInt8=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,1,127,-128),ie<0&&(ie=255+ie+1),this[fe]=ie&255,fe+1},a.prototype.writeInt16LE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,2,32767,-32768),this[fe]=ie&255,this[fe+1]=ie>>>8,fe+2},a.prototype.writeInt16BE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,2,32767,-32768),this[fe]=ie>>>8,this[fe+1]=ie&255,fe+2},a.prototype.writeInt32LE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,4,2147483647,-2147483648),this[fe]=ie&255,this[fe+1]=ie>>>8,this[fe+2]=ie>>>16,this[fe+3]=ie>>>24,fe+4},a.prototype.writeInt32BE=function(ie,fe,me){return ie=+ie,fe=fe>>>0,me||q(this,ie,fe,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[fe]=ie>>>24,this[fe+1]=ie>>>16,this[fe+2]=ie>>>8,this[fe+3]=ie&255,fe+4};function $(ae,ie,fe,me,ce,ye){if(fe+me>ae.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function V(ae,ie,fe,me,ce){return ie=+ie,fe=fe>>>0,ce||$(ae,ie,fe,4),b.write(ae,ie,fe,me,23,4),fe+4}a.prototype.writeFloatLE=function(ie,fe,me){return V(this,ie,fe,!0,me)},a.prototype.writeFloatBE=function(ie,fe,me){return V(this,ie,fe,!1,me)};function K(ae,ie,fe,me,ce){return ie=+ie,fe=fe>>>0,ce||$(ae,ie,fe,8),b.write(ae,ie,fe,me,52,8),fe+8}a.prototype.writeDoubleLE=function(ie,fe,me){return K(this,ie,fe,!0,me)},a.prototype.writeDoubleBE=function(ie,fe,me){return K(this,ie,fe,!1,me)},a.prototype.copy=function(ie,fe,me,ce){if(!a.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(me||(me=0),!ce&&ce!==0&&(ce=this.length),fe>=ie.length&&(fe=ie.length),fe||(fe=0),ce>0&&ce<me&&(ce=me),ce===me||ie.length===0||this.length===0)return 0;if(fe<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),ie.length-fe<ce-me&&(ce=ie.length-fe+me);var ye=ce-me;if(this===ie&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(fe,me,ce);else if(this===ie&&me<fe&&fe<ce)for(var xe=ye-1;xe>=0;--xe)ie[xe+fe]=this[xe+me];else Uint8Array.prototype.set.call(ie,this.subarray(me,ce),fe);return ye},a.prototype.fill=function(ie,fe,me,ce){if(typeof ie=="string"){if(typeof fe=="string"?(ce=fe,fe=0,me=this.length):typeof me=="string"&&(ce=me,me=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!a.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(ie.length===1){var ye=ie.charCodeAt(0);(ce==="utf8"&&ye<128||ce==="latin1")&&(ie=ye)}}else typeof ie=="number"&&(ie=ie&255);if(fe<0||this.length<fe||this.length<me)throw new RangeError("Out of range index");if(me<=fe)return this;fe=fe>>>0,me=me===void 0?this.length:me>>>0,ie||(ie=0);var xe;if(typeof ie=="number")for(xe=fe;xe<me;++xe)this[xe]=ie;else{var ke=a.isBuffer(ie)?ie:a.from(ie,ce),Ae=ke.length;if(Ae===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(xe=0;xe<me-fe;++xe)this[xe+fe]=ke[xe%Ae]}return this};var se=/[^+/0-9A-Za-z-_]/g;function ue(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(se,""),ae.length<2)return"";for(;ae.length%4!=0;)ae=ae+"=";return ae}function oe(ae){return ae<16?"0"+ae.toString(16):ae.toString(16)}function U(ae,ie){ie=ie||1/0;for(var fe,me=ae.length,ce=null,ye=[],xe=0;xe<me;++xe){if(fe=ae.charCodeAt(xe),fe>55295&&fe<57344){if(!ce){if(fe>56319){(ie-=3)>-1&&ye.push(239,191,189);continue}else if(xe+1===me){(ie-=3)>-1&&ye.push(239,191,189);continue}ce=fe;continue}if(fe<56320){(ie-=3)>-1&&ye.push(239,191,189),ce=fe;continue}fe=(ce-55296<<10|fe-56320)+65536}else ce&&(ie-=3)>-1&&ye.push(239,191,189);if(ce=null,fe<128){if((ie-=1)<0)break;ye.push(fe)}else if(fe<2048){if((ie-=2)<0)break;ye.push(fe>>6|192,fe&63|128)}else if(fe<65536){if((ie-=3)<0)break;ye.push(fe>>12|224,fe>>6&63|128,fe&63|128)}else if(fe<1114112){if((ie-=4)<0)break;ye.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,fe&63|128)}else throw new Error("Invalid code point")}return ye}function G(ae){for(var ie=[],fe=0;fe<ae.length;++fe)ie.push(ae.charCodeAt(fe)&255);return ie}function re(ae,ie){for(var fe,me,ce,ye=[],xe=0;xe<ae.length&&!((ie-=2)<0);++xe)fe=ae.charCodeAt(xe),me=fe>>8,ce=fe%256,ye.push(ce),ye.push(me);return ye}function ee(ae){return l.toByteArray(ue(ae))}function j(ae,ie,fe,me){for(var ce=0;ce<me&&!(ce+fe>=ie.length||ce>=ae.length);++ce)ie[ce+fe]=ae[ce];return ce}function Q(ae,ie){return ae instanceof ie||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===ie.name}function ne(ae){return ae!==ae}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,B,H){B.exports=d;function d(l,b,w){return b<w?l<b?b:l>w?w:l:l<w?w:l>b?b:l}},{}],87:[function(t,B,H){var d=t("clamp");B.exports=l,B.exports.to=l,B.exports.from=b;function l(w,e){e==null&&(e=!0);var o=w[0],a=w[1],n=w[2],r=w[3];r==null&&(r=e?1:255),e&&(o*=255,a*=255,n*=255,r*=255),o=d(o,0,255)&255,a=d(a,0,255)&255,n=d(n,0,255)&255,r=d(r,0,255)&255;var u=o*16777216+(a<<16)+(n<<8)+r;return u}function b(w,e){w=+w;var o=w>>>24,a=(w&16711680)>>>16,n=(w&65280)>>>8,r=w&255;return e===!1?[o,a,n,r]:[o/255,a/255,n/255,r/255]}},{clamp:86}],88:[function(t,B,H){B.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,B,H){var d=t("color-rgba"),l=t("clamp"),b=t("dtype");B.exports=function(o,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var n=b(a),r=new n(4),u=a!=="uint8"&&a!=="uint8_clamped";return(!o.length||typeof o=="string")&&(o=d(o),o[0]/=255,o[1]/=255,o[2]/=255),w(o)?(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3]!=null?o[3]:255,u&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(u?(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3]!=null?o[3]:1):(r[0]=l(Math.floor(o[0]*255),0,255),r[1]=l(Math.floor(o[1]*255),0,255),r[2]=l(Math.floor(o[2]*255),0,255),r[3]=o[3]==null?255:l(Math.floor(o[3]*255),0,255)),r)};function w(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,B,H){(function(d){(function(){var l=t("color-name"),b=t("is-plain-obj"),w=t("defined");B.exports=o;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function o(a){var n,r=[],u=1,s;if(typeof a=="string")if(l[a])r=l[a].slice(),s="rgb";else if(a==="transparent")u=0,s="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var i=a.slice(1),f=i.length,h=f<=4;u=1,h?(r=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],f===4&&(u=parseInt(i[3]+i[3],16)/255)):(r=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],f===8&&(u=parseInt(i[6]+i[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var p=n[1],v=p==="rgb",i=p.replace(/a$/,"");s=i;var f=i==="cmyk"?4:i==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(m,M){if(/%$/.test(m))return M===f?parseFloat(m)/100:i==="rgb"?parseFloat(m)*255/100:parseFloat(m);if(i[M]==="h"){if(/deg$/.test(m))return parseFloat(m);if(e[m]!==void 0)return e[m]}return parseFloat(m)}),p===i&&r.push(1),u=v||r[f]===void 0?1:r[f],r=r.slice(0,f)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(r=a.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),s=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))s="rgb",r=[a>>>16,(a&65280)>>>8,a&255];else if(b(a)){var y=w(a.r,a.red,a.R,null);y!==null?(s="rgb",r=[y,w(a.g,a.green,a.G),w(a.b,a.blue,a.B)]):(s="hsl",r=[w(a.h,a.hue,a.H),w(a.s,a.saturation,a.S),w(a.l,a.lightness,a.L,a.b,a.brightness)]),u=w(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(u/=100)}else(Array.isArray(a)||d.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(r=[a[0],a[1],a[2]],s="rgb",u=a.length===4?a[3]:1);return{space:s,values:r,alpha:u}}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,B,H){var d=t("color-parse"),l=t("color-space/hsl"),b=t("clamp");B.exports=function(e){var o,a=d(e);return a.space?(o=Array(3),o[0]=b(a.values[0],0,255),o[1]=b(a.values[1],0,255),o[2]=b(a.values[2],0,255),a.space[0]==="h"&&(o=l.rgb(o)),o.push(b(a.alpha,0,1)),o):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,B,H){var d=t("./rgb");B.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(l){var b=l[0]/360,w=l[1]/100,e=l[2]/100,o,a,n,r,u;if(w===0)return u=e*255,[u,u,u];e<.5?a=e*(1+w):a=e+w-e*w,o=2*e-a,r=[0,0,0];for(var s=0;s<3;s++)n=b+1/3*-(s-1),n<0?n++:n>1&&n--,6*n<1?u=o+(a-o)*6*n:2*n<1?u=a:3*n<2?u=o+(a-o)*(2/3-n)*6:u=o,r[s]=u*255;return r}},d.hsl=function(l){var b=l[0]/255,w=l[1]/255,e=l[2]/255,o=Math.min(b,w,e),a=Math.max(b,w,e),n=a-o,r,u,s;return a===o?r=0:b===a?r=(w-e)/n:w===a?r=2+(e-b)/n:e===a&&(r=4+(b-w)/n),r=Math.min(r*60,360),r<0&&(r+=360),s=(o+a)/2,a===o?u=0:s<=.5?u=n/(a+o):u=n/(2-a-o),[r,u*100,s*100]}},{"./rgb":93}],93:[function(t,B,H){B.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,B,H){B.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,B,H){B.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,B,H){B.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,B,H){B.exports=["normal","italic","oblique"]},{}],98:[function(t,B,H){B.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,B,H){B.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,B,H){var d=t("css-font-size-keywords");B.exports={isSize:function(b){return/^[\d\.]/.test(b)||b.indexOf("/")!==-1||d.indexOf(b)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,B,H){var d=t("unquote"),l=t("css-global-keywords"),b=t("css-system-font-keywords"),w=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),o=t("css-font-stretch-keywords"),a=t("string-split-by"),n=t("./lib/util").isSize;B.exports=u;var r=u.cache={};function u(i){if(typeof i!="string")throw new Error("Font argument must be a string.");if(r[i])return r[i];if(i==="")throw new Error("Cannot parse an empty string.");if(b.indexOf(i)!==-1)return r[i]={system:i};for(var f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=a(i,/\s+/),p;p=h.shift();){if(l.indexOf(p)!==-1)return["style","variant","weight","stretch"].forEach(function(y){f[y]=p}),r[i]=f;if(e.indexOf(p)!==-1){f.style=p;continue}if(p==="normal"||p==="small-caps"){f.variant=p;continue}if(o.indexOf(p)!==-1){f.stretch=p;continue}if(w.indexOf(p)!==-1){f.weight=p;continue}if(n(p)){var v=a(p,"/");if(f.size=v[0],v[1]!=null?f.lineHeight=s(v[1]):h[0]==="/"&&(h.shift(),f.lineHeight=s(h.shift())),!h.length)throw new Error("Missing required font-family.");return f.family=a(h.join(" "),/\s*,\s*/).map(d),r[i]=f}throw new Error("Unknown or unsupported font token: "+p)}throw new Error("Missing required font-size.")}function s(i){var f=parseFloat(i);return f.toString()===i?f:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(t,B,H){var d=t("pick-by-alias"),l=t("./lib/util").isSize,b=i(t("css-global-keywords")),w=i(t("css-system-font-keywords")),e=i(t("css-font-weight-keywords")),o=i(t("css-font-style-keywords")),a=i(t("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};B.exports=function(h){if(h=d(h,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),h.system)return h.system&&s(h.system,w),h.system;if(s(h.style,o),s(h.variant,n),s(h.weight,e),s(h.stretch,a),h.size==null&&(h.size=u.size),typeof h.size=="number"&&(h.size+="px"),!l)throw Error("Bad size value `"+h.size+"`");h.family||(h.family=u.family),Array.isArray(h.family)&&(h.family.length||(h.family=[u.family]),h.family=h.family.map(function(v){return r[v]?v:'"'+v+'"'}).join(", "));var p=[];return p.push(h.style),h.variant!==h.style&&p.push(h.variant),h.weight!==h.variant&&h.weight!==h.style&&p.push(h.weight),h.stretch!==h.weight&&h.stretch!==h.variant&&h.stretch!==h.style&&p.push(h.stretch),p.push(h.size+(h.lineHeight==null||h.lineHeight==="normal"||h.lineHeight+""=="1"?"":"/"+h.lineHeight)),p.push(h.family),p.filter(Boolean).join(" ")};function s(f,h){if(f&&!h[f]&&!b[f])throw Error("Unknown keyword `"+f+"`");return f}function i(f){for(var h={},p=0;p<f.length;p++)h[f[p]]=1;return h}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,B,H){B.exports=["inherit","initial","unset"]},{}],104:[function(t,B,H){B.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,B,H){var d=t("type/value/is"),l=t("type/value/ensure"),b=t("type/plain-function/ensure"),w=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),o=t("es5-ext/object/map"),a=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,u;u=function(s,i,f){var h=l(i)&&b(i.value),p;return p=w(i),delete p.writable,delete p.value,p.get=function(){return!f.overwriteDefinition&&r.call(this,s)?h:(i.value=a.call(h,f.resolveContext?f.resolveContext(this):this),n(this,s,i),this[s])},p},B.exports=function(s){var i=e(arguments[1]);return d(i.resolveContext)&&b(i.resolveContext),o(s,function(f,h){return u(h,f,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(t,B,H){var d=t("type/value/is"),l=t("type/plain-function/is"),b=t("es5-ext/object/assign"),w=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),o=B.exports=function(a,n){var r,u,s,i,f;return arguments.length<2||typeof a!="string"?(i=n,n=a,a=null):i=arguments[2],d(a)?(r=e.call(a,"c"),u=e.call(a,"e"),s=e.call(a,"w")):(r=s=!0,u=!1),f={value:n,configurable:r,enumerable:u,writable:s},i?b(w(i),f):f};o.gs=function(a,n,r){var u,s,i,f;return typeof a!="string"?(i=r,r=n,n=a,a=null):i=arguments[3],d(n)?l(n)?d(r)?l(r)||(i=r,r=void 0):r=void 0:(i=n,n=r=void 0):n=void 0,d(a)?(u=e.call(a,"c"),s=e.call(a,"e")):(u=!0,s=!1),f={get:n,set:r,configurable:u,enumerable:s},i?b(w(i),f):f}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(t,B,H){(function(d,l){l(typeof H=="object"&&typeof B!="undefined"?H:d.d3=d.d3||{})})(this,function(d){function l(U,G){return U<G?-1:U>G?1:U>=G?0:NaN}function b(U){return U.length===1&&(U=w(U)),{left:function(G,re,ee,j){for(ee==null&&(ee=0),j==null&&(j=G.length);ee<j;){var Q=ee+j>>>1;U(G[Q],re)<0?ee=Q+1:j=Q}return ee},right:function(G,re,ee,j){for(ee==null&&(ee=0),j==null&&(j=G.length);ee<j;){var Q=ee+j>>>1;U(G[Q],re)>0?j=Q:ee=Q+1}return ee}}}function w(U){return function(G,re){return l(U(G),re)}}var e=b(l),o=e.right,a=e.left;function n(U,G){G==null&&(G=r);for(var re=0,ee=U.length-1,j=U[0],Q=new Array(ee<0?0:ee);re<ee;)Q[re]=G(j,j=U[++re]);return Q}function r(U,G){return[U,G]}function u(U,G,re){var ee=U.length,j=G.length,Q=new Array(ee*j),ne,ae,ie,fe;for(re==null&&(re=r),ne=ie=0;ne<ee;++ne)for(fe=U[ne],ae=0;ae<j;++ae,++ie)Q[ie]=re(fe,G[ae]);return Q}function s(U,G){return G<U?-1:G>U?1:G>=U?0:NaN}function i(U){return U===null?NaN:+U}function f(U,G){var re=U.length,ee=0,j=-1,Q=0,ne,ae,ie=0;if(G==null)for(;++j<re;)isNaN(ne=i(U[j]))||(ae=ne-Q,Q+=ae/++ee,ie+=ae*(ne-Q));else for(;++j<re;)isNaN(ne=i(G(U[j],j,U)))||(ae=ne-Q,Q+=ae/++ee,ie+=ae*(ne-Q));if(ee>1)return ie/(ee-1)}function h(U,G){var re=f(U,G);return re&&Math.sqrt(re)}function p(U,G){var re=U.length,ee=-1,j,Q,ne;if(G==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=ne=j;++ee<re;)(j=U[ee])!=null&&(Q>j&&(Q=j),ne<j&&(ne=j))}else for(;++ee<re;)if((j=G(U[ee],ee,U))!=null&&j>=j)for(Q=ne=j;++ee<re;)(j=G(U[ee],ee,U))!=null&&(Q>j&&(Q=j),ne<j&&(ne=j));return[Q,ne]}var v=Array.prototype,y=v.slice,g=v.map;function A(U){return function(){return U}}function m(U){return U}function M(U,G,re){U=+U,G=+G,re=(j=arguments.length)<2?(G=U,U=0,1):j<3?1:+re;for(var ee=-1,j=Math.max(0,Math.ceil((G-U)/re))|0,Q=new Array(j);++ee<j;)Q[ee]=U+ee*re;return Q}var _=Math.sqrt(50),T=Math.sqrt(10),x=Math.sqrt(2);function c(U,G,re){var ee,j=-1,Q,ne,ae;if(G=+G,U=+U,re=+re,U===G&&re>0)return[U];if((ee=G<U)&&(Q=U,U=G,G=Q),(ae=L(U,G,re))===0||!isFinite(ae))return[];if(ae>0)for(U=Math.ceil(U/ae),G=Math.floor(G/ae),ne=new Array(Q=Math.ceil(G-U+1));++j<Q;)ne[j]=(U+j)*ae;else for(U=Math.floor(U*ae),G=Math.ceil(G*ae),ne=new Array(Q=Math.ceil(U-G+1));++j<Q;)ne[j]=(U-j)/ae;return ee&&ne.reverse(),ne}function L(U,G,re){var ee=(G-U)/Math.max(0,re),j=Math.floor(Math.log(ee)/Math.LN10),Q=ee/Math.pow(10,j);return j>=0?(Q>=_?10:Q>=T?5:Q>=x?2:1)*Math.pow(10,j):-Math.pow(10,-j)/(Q>=_?10:Q>=T?5:Q>=x?2:1)}function S(U,G,re){var ee=Math.abs(G-U)/Math.max(0,re),j=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)),Q=ee/j;return Q>=_?j*=10:Q>=T?j*=5:Q>=x&&(j*=2),G<U?-j:j}function k(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=m,G=p,re=k;function ee(j){var Q,ne=j.length,ae,ie=new Array(ne);for(Q=0;Q<ne;++Q)ie[Q]=U(j[Q],Q,j);var fe=G(ie),me=fe[0],ce=fe[1],ye=re(ie,me,ce);Array.isArray(ye)||(ye=S(me,ce,ye),ye=M(Math.ceil(me/ye)*ye,ce,ye));for(var xe=ye.length;ye[0]<=me;)ye.shift(),--xe;for(;ye[xe-1]>ce;)ye.pop(),--xe;var ke=new Array(xe+1),Ae;for(Q=0;Q<=xe;++Q)Ae=ke[Q]=[],Ae.x0=Q>0?ye[Q-1]:me,Ae.x1=Q<xe?ye[Q]:ce;for(Q=0;Q<ne;++Q)ae=ie[Q],me<=ae&&ae<=ce&&ke[o(ye,ae,0,xe)].push(j[Q]);return ke}return ee.value=function(j){return arguments.length?(U=typeof j=="function"?j:A(j),ee):U},ee.domain=function(j){return arguments.length?(G=typeof j=="function"?j:A([j[0],j[1]]),ee):G},ee.thresholds=function(j){return arguments.length?(re=typeof j=="function"?j:Array.isArray(j)?A(y.call(j)):A(j),ee):re},ee}function z(U,G,re){if(re==null&&(re=i),!!(ee=U.length)){if((G=+G)<=0||ee<2)return+re(U[0],0,U);if(G>=1)return+re(U[ee-1],ee-1,U);var ee,j=(ee-1)*G,Q=Math.floor(j),ne=+re(U[Q],Q,U),ae=+re(U[Q+1],Q+1,U);return ne+(ae-ne)*(j-Q)}}function I(U,G,re){return U=g.call(U,i).sort(l),Math.ceil((re-G)/(2*(z(U,.75)-z(U,.25))*Math.pow(U.length,-1/3)))}function R(U,G,re){return Math.ceil((re-G)/(3.5*h(U)*Math.pow(U.length,-1/3)))}function D(U,G){var re=U.length,ee=-1,j,Q;if(G==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=j;++ee<re;)(j=U[ee])!=null&&j>Q&&(Q=j)}else for(;++ee<re;)if((j=G(U[ee],ee,U))!=null&&j>=j)for(Q=j;++ee<re;)(j=G(U[ee],ee,U))!=null&&j>Q&&(Q=j);return Q}function O(U,G){var re=U.length,ee=re,j=-1,Q,ne=0;if(G==null)for(;++j<re;)isNaN(Q=i(U[j]))?--ee:ne+=Q;else for(;++j<re;)isNaN(Q=i(G(U[j],j,U)))?--ee:ne+=Q;if(ee)return ne/ee}function F(U,G){var re=U.length,ee=-1,j,Q=[];if(G==null)for(;++ee<re;)isNaN(j=i(U[ee]))||Q.push(j);else for(;++ee<re;)isNaN(j=i(G(U[ee],ee,U)))||Q.push(j);return z(Q.sort(l),.5)}function Y(U){for(var G=U.length,re,ee=-1,j=0,Q,ne;++ee<G;)j+=U[ee].length;for(Q=new Array(j);--G>=0;)for(ne=U[G],re=ne.length;--re>=0;)Q[--j]=ne[re];return Q}function X(U,G){var re=U.length,ee=-1,j,Q;if(G==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=j;++ee<re;)(j=U[ee])!=null&&Q>j&&(Q=j)}else for(;++ee<re;)if((j=G(U[ee],ee,U))!=null&&j>=j)for(Q=j;++ee<re;)(j=G(U[ee],ee,U))!=null&&Q>j&&(Q=j);return Q}function q(U,G){for(var re=G.length,ee=new Array(re);re--;)ee[re]=U[G[re]];return ee}function $(U,G){if(!!(re=U.length)){var re,ee=0,j=0,Q,ne=U[j];for(G==null&&(G=l);++ee<re;)(G(Q=U[ee],ne)<0||G(ne,ne)!==0)&&(ne=Q,j=ee);if(G(ne,ne)===0)return j}}function V(U,G,re){for(var ee=(re==null?U.length:re)-(G=G==null?0:+G),j,Q;ee;)Q=Math.random()*ee--|0,j=U[ee+G],U[ee+G]=U[Q+G],U[Q+G]=j;return U}function K(U,G){var re=U.length,ee=-1,j,Q=0;if(G==null)for(;++ee<re;)(j=+U[ee])&&(Q+=j);else for(;++ee<re;)(j=+G(U[ee],ee,U))&&(Q+=j);return Q}function se(U){if(!(Q=U.length))return[];for(var G=-1,re=X(U,ue),ee=new Array(re);++G<re;)for(var j=-1,Q,ne=ee[G]=new Array(Q);++j<Q;)ne[j]=U[j][G];return ee}function ue(U){return U.length}function oe(){return se(arguments)}d.bisect=o,d.bisectRight=o,d.bisectLeft=a,d.ascending=l,d.bisector=b,d.cross=u,d.descending=s,d.deviation=h,d.extent=p,d.histogram=P,d.thresholdFreedmanDiaconis=I,d.thresholdScott=R,d.thresholdSturges=k,d.max=D,d.mean=O,d.median=F,d.merge=Y,d.min=X,d.pairs=n,d.permute=q,d.quantile=z,d.range=M,d.scan=$,d.shuffle=V,d.sum=K,d.ticks=c,d.tickIncrement=L,d.tickStep=S,d.transpose=se,d.variance=f,d.zip=oe,Object.defineProperty(d,"__esModule",{value:!0})})},{}],108:[function(t,B,H){(function(d,l){l(typeof H=="object"&&typeof B!="undefined"?H:d.d3=d.d3||{})})(this,function(d){var l="$";function b(){}b.prototype=w.prototype={constructor:b,has:function(v){return l+v in this},get:function(v){return this[l+v]},set:function(v,y){return this[l+v]=y,this},remove:function(v){var y=l+v;return y in this&&delete this[y]},clear:function(){for(var v in this)v[0]===l&&delete this[v]},keys:function(){var v=[];for(var y in this)y[0]===l&&v.push(y.slice(1));return v},values:function(){var v=[];for(var y in this)y[0]===l&&v.push(this[y]);return v},entries:function(){var v=[];for(var y in this)y[0]===l&&v.push({key:y.slice(1),value:this[y]});return v},size:function(){var v=0;for(var y in this)y[0]===l&&++v;return v},empty:function(){for(var v in this)if(v[0]===l)return!1;return!0},each:function(v){for(var y in this)y[0]===l&&v(this[y],y.slice(1),this)}};function w(v,y){var g=new b;if(v instanceof b)v.each(function(T,x){g.set(x,T)});else if(Array.isArray(v)){var A=-1,m=v.length,M;if(y==null)for(;++A<m;)g.set(A,v[A]);else for(;++A<m;)g.set(y(M=v[A],A,v),M)}else if(v)for(var _ in v)g.set(_,v[_]);return g}function e(){var v=[],y=[],g,A,m;function M(T,x,c,L){if(x>=v.length)return g!=null&&T.sort(g),A!=null?A(T):T;for(var S=-1,k=T.length,P=v[x++],z,I,R=w(),D,O=c();++S<k;)(D=R.get(z=P(I=T[S])+""))?D.push(I):R.set(z,[I]);return R.each(function(F,Y){L(O,Y,M(F,x,c,L))}),O}function _(T,x){if(++x>v.length)return T;var c,L=y[x-1];return A!=null&&x>=v.length?c=T.entries():(c=[],T.each(function(S,k){c.push({key:k,values:_(S,x)})})),L!=null?c.sort(function(S,k){return L(S.key,k.key)}):c}return m={object:function(T){return M(T,0,o,a)},map:function(T){return M(T,0,n,r)},entries:function(T){return _(M(T,0,n,r),0)},key:function(T){return v.push(T),m},sortKeys:function(T){return y[v.length-1]=T,m},sortValues:function(T){return g=T,m},rollup:function(T){return A=T,m}}}function o(){return{}}function a(v,y,g){v[y]=g}function n(){return w()}function r(v,y,g){v.set(y,g)}function u(){}var s=w.prototype;u.prototype=i.prototype={constructor:u,has:s.has,add:function(v){return v+="",this[l+v]=v,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function i(v,y){var g=new u;if(v instanceof u)v.each(function(M){g.add(M)});else if(v){var A=-1,m=v.length;if(y==null)for(;++A<m;)g.add(v[A]);else for(;++A<m;)g.add(y(v[A],A,v))}return g}function f(v){var y=[];for(var g in v)y.push(g);return y}function h(v){var y=[];for(var g in v)y.push(v[g]);return y}function p(v){var y=[];for(var g in v)y.push({key:g,value:v[g]});return y}d.nest=e,d.set=i,d.map=w,d.keys=f,d.values=h,d.entries=p,Object.defineProperty(d,"__esModule",{value:!0})})},{}],109:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(Re,Ve,dt){Re.prototype=Ve.prototype=dt,dt.constructor=Re}function b(Re,Ve){var dt=Object.create(Re.prototype);for(var Dt in Ve)dt[Dt]=Ve[Dt];return dt}function w(){}var e=.7,o=1/e,a="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),i=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),f=new RegExp("^rgba\\("+[a,a,a,n]+"\\)$"),h=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),p=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),v=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l(w,M,{copy:function(Re){return Object.assign(new this.constructor,this,Re)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:A,formatRgb:m,toString:m});function g(){return this.rgb().formatHex()}function A(){return I(this).formatHsl()}function m(){return this.rgb().formatRgb()}function M(Re){var Ve,dt;return Re=(Re+"").trim().toLowerCase(),(Ve=u.exec(Re))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?_(Ve):dt===3?new L(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?T(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?T(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=s.exec(Re))?new L(Ve[1],Ve[2],Ve[3],1):(Ve=i.exec(Re))?new L(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=f.exec(Re))?T(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=h.exec(Re))?T(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=p.exec(Re))?z(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=v.exec(Re))?z(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):y.hasOwnProperty(Re)?_(y[Re]):Re==="transparent"?new L(NaN,NaN,NaN,0):null}function _(Re){return new L(Re>>16&255,Re>>8&255,Re&255,1)}function T(Re,Ve,dt,Dt){return Dt<=0&&(Re=Ve=dt=NaN),new L(Re,Ve,dt,Dt)}function x(Re){return Re instanceof w||(Re=M(Re)),Re?(Re=Re.rgb(),new L(Re.r,Re.g,Re.b,Re.opacity)):new L}function c(Re,Ve,dt,Dt){return arguments.length===1?x(Re):new L(Re,Ve,dt,Dt==null?1:Dt)}function L(Re,Ve,dt,Dt){this.r=+Re,this.g=+Ve,this.b=+dt,this.opacity=+Dt}l(L,c,b(w,{brighter:function(Re){return Re=Re==null?o:Math.pow(o,Re),new L(this.r*Re,this.g*Re,this.b*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new L(this.r*Re,this.g*Re,this.b*Re,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Re===1?")":", "+Re+")")}function P(Re){return Re=Math.max(0,Math.min(255,Math.round(Re)||0)),(Re<16?"0":"")+Re.toString(16)}function z(Re,Ve,dt,Dt){return Dt<=0?Re=Ve=dt=NaN:dt<=0||dt>=1?Re=Ve=NaN:Ve<=0&&(Re=NaN),new D(Re,Ve,dt,Dt)}function I(Re){if(Re instanceof D)return new D(Re.h,Re.s,Re.l,Re.opacity);if(Re instanceof w||(Re=M(Re)),!Re)return new D;if(Re instanceof D)return Re;Re=Re.rgb();var Ve=Re.r/255,dt=Re.g/255,Dt=Re.b/255,Gt=Math.min(Ve,dt,Dt),kt=Math.max(Ve,dt,Dt),zt=NaN,Bt=kt-Gt,Lt=(kt+Gt)/2;return Bt?(Ve===kt?zt=(dt-Dt)/Bt+(dt<Dt)*6:dt===kt?zt=(Dt-Ve)/Bt+2:zt=(Ve-dt)/Bt+4,Bt/=Lt<.5?kt+Gt:2-kt-Gt,zt*=60):Bt=Lt>0&&Lt<1?0:zt,new D(zt,Bt,Lt,Re.opacity)}function R(Re,Ve,dt,Dt){return arguments.length===1?I(Re):new D(Re,Ve,dt,Dt==null?1:Dt)}function D(Re,Ve,dt,Dt){this.h=+Re,this.s=+Ve,this.l=+dt,this.opacity=+Dt}l(D,R,b(w,{brighter:function(Re){return Re=Re==null?o:Math.pow(o,Re),new D(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new D(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=this.h%360+(this.h<0)*360,Ve=isNaN(Re)||isNaN(this.s)?0:this.s,dt=this.l,Dt=dt+(dt<.5?dt:1-dt)*Ve,Gt=2*dt-Dt;return new L(O(Re>=240?Re-240:Re+120,Gt,Dt),O(Re,Gt,Dt),O(Re<120?Re+240:Re-120,Gt,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Re===1?")":", "+Re+")")}}));function O(Re,Ve,dt){return(Re<60?Ve+(dt-Ve)*Re/60:Re<180?dt:Re<240?Ve+(dt-Ve)*(240-Re)/60:Ve)*255}var F=Math.PI/180,Y=180/Math.PI,X=18,q=.96422,$=1,V=.82521,K=4/29,se=6/29,ue=3*se*se,oe=se*se*se;function U(Re){if(Re instanceof ee)return new ee(Re.l,Re.a,Re.b,Re.opacity);if(Re instanceof ce)return ye(Re);Re instanceof L||(Re=x(Re));var Ve=ae(Re.r),dt=ae(Re.g),Dt=ae(Re.b),Gt=j((.2225045*Ve+.7168786*dt+.0606169*Dt)/$),kt,zt;return Ve===dt&&dt===Dt?kt=zt=Gt:(kt=j((.4360747*Ve+.3850649*dt+.1430804*Dt)/q),zt=j((.0139322*Ve+.0971045*dt+.7141733*Dt)/V)),new ee(116*Gt-16,500*(kt-Gt),200*(Gt-zt),Re.opacity)}function G(Re,Ve){return new ee(Re,0,0,Ve==null?1:Ve)}function re(Re,Ve,dt,Dt){return arguments.length===1?U(Re):new ee(Re,Ve,dt,Dt==null?1:Dt)}function ee(Re,Ve,dt,Dt){this.l=+Re,this.a=+Ve,this.b=+dt,this.opacity=+Dt}l(ee,re,b(w,{brighter:function(Re){return new ee(this.l+X*(Re==null?1:Re),this.a,this.b,this.opacity)},darker:function(Re){return new ee(this.l-X*(Re==null?1:Re),this.a,this.b,this.opacity)},rgb:function(){var Re=(this.l+16)/116,Ve=isNaN(this.a)?Re:Re+this.a/500,dt=isNaN(this.b)?Re:Re-this.b/200;return Ve=q*Q(Ve),Re=$*Q(Re),dt=V*Q(dt),new L(ne(3.1338561*Ve-1.6168667*Re-.4906146*dt),ne(-.9787684*Ve+1.9161415*Re+.033454*dt),ne(.0719453*Ve-.2289914*Re+1.4052427*dt),this.opacity)}}));function j(Re){return Re>oe?Math.pow(Re,1/3):Re/ue+K}function Q(Re){return Re>se?Re*Re*Re:ue*(Re-K)}function ne(Re){return 255*(Re<=.0031308?12.92*Re:1.055*Math.pow(Re,1/2.4)-.055)}function ae(Re){return(Re/=255)<=.04045?Re/12.92:Math.pow((Re+.055)/1.055,2.4)}function ie(Re){if(Re instanceof ce)return new ce(Re.h,Re.c,Re.l,Re.opacity);if(Re instanceof ee||(Re=U(Re)),Re.a===0&&Re.b===0)return new ce(NaN,0<Re.l&&Re.l<100?0:NaN,Re.l,Re.opacity);var Ve=Math.atan2(Re.b,Re.a)*Y;return new ce(Ve<0?Ve+360:Ve,Math.sqrt(Re.a*Re.a+Re.b*Re.b),Re.l,Re.opacity)}function fe(Re,Ve,dt,Dt){return arguments.length===1?ie(Re):new ce(dt,Ve,Re,Dt==null?1:Dt)}function me(Re,Ve,dt,Dt){return arguments.length===1?ie(Re):new ce(Re,Ve,dt,Dt==null?1:Dt)}function ce(Re,Ve,dt,Dt){this.h=+Re,this.c=+Ve,this.l=+dt,this.opacity=+Dt}function ye(Re){if(isNaN(Re.h))return new ee(Re.l,0,0,Re.opacity);var Ve=Re.h*F;return new ee(Re.l,Math.cos(Ve)*Re.c,Math.sin(Ve)*Re.c,Re.opacity)}l(ce,me,b(w,{brighter:function(Re){return new ce(this.h,this.c,this.l+X*(Re==null?1:Re),this.opacity)},darker:function(Re){return new ce(this.h,this.c,this.l-X*(Re==null?1:Re),this.opacity)},rgb:function(){return ye(this).rgb()}}));var xe=-.14861,ke=1.78277,Ae=-.29227,Oe=-.90649,He=1.97294,Ge=He*Oe,_e=He*ke,Ie=ke*Ae-Oe*xe;function Ye(Re){if(Re instanceof Ue)return new Ue(Re.h,Re.s,Re.l,Re.opacity);Re instanceof L||(Re=x(Re));var Ve=Re.r/255,dt=Re.g/255,Dt=Re.b/255,Gt=(Ie*Dt+Ge*Ve-_e*dt)/(Ie+Ge-_e),kt=Dt-Gt,zt=(He*(dt-Gt)-Ae*kt)/Oe,Bt=Math.sqrt(zt*zt+kt*kt)/(He*Gt*(1-Gt)),Lt=Bt?Math.atan2(zt,kt)*Y-120:NaN;return new Ue(Lt<0?Lt+360:Lt,Bt,Gt,Re.opacity)}function qe(Re,Ve,dt,Dt){return arguments.length===1?Ye(Re):new Ue(Re,Ve,dt,Dt==null?1:Dt)}function Ue(Re,Ve,dt,Dt){this.h=+Re,this.s=+Ve,this.l=+dt,this.opacity=+Dt}l(Ue,qe,b(w,{brighter:function(Re){return Re=Re==null?o:Math.pow(o,Re),new Ue(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new Ue(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=isNaN(this.h)?0:(this.h+120)*F,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Dt=Math.cos(Re),Gt=Math.sin(Re);return new L(255*(Ve+dt*(xe*Dt+ke*Gt)),255*(Ve+dt*(Ae*Dt+Oe*Gt)),255*(Ve+dt*(He*Dt)),this.opacity)}})),d.color=M,d.cubehelix=qe,d.gray=G,d.hcl=me,d.hsl=R,d.lab=re,d.lch=fe,d.rgb=c,Object.defineProperty(d,"__esModule",{value:!0})})},{}],110:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l={value:function(){}};function b(){for(var n=0,r=arguments.length,u={},s;n<r;++n){if(!(s=arguments[n]+"")||s in u||/[\s.]/.test(s))throw new Error("illegal type: "+s);u[s]=[]}return new w(u)}function w(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(u){var s="",i=u.indexOf(".");if(i>=0&&(s=u.slice(i+1),u=u.slice(0,i)),u&&!r.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:s}})}w.prototype=b.prototype={constructor:w,on:function(n,r){var u=this._,s=e(n+"",u),i,f=-1,h=s.length;if(arguments.length<2){for(;++f<h;)if((i=(n=s[f]).type)&&(i=o(u[i],n.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++f<h;)if(i=(n=s[f]).type)u[i]=a(u[i],n.name,r);else if(r==null)for(i in u)u[i]=a(u[i],n.name,null);return this},copy:function(){var n={},r=this._;for(var u in r)n[u]=r[u].slice();return new w(n)},call:function(n,r){if((i=arguments.length-2)>0)for(var u=new Array(i),s=0,i,f;s<i;++s)u[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],s=0,i=f.length;s<i;++s)f[s].value.apply(r,u)},apply:function(n,r,u){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],i=0,f=s.length;i<f;++i)s[i].value.apply(r,u)}};function o(n,r){for(var u=0,s=n.length,i;u<s;++u)if((i=n[u]).name===r)return i.value}function a(n,r,u){for(var s=0,i=n.length;s<i;++s)if(n[s].name===r){n[s]=l,n=n.slice(0,s).concat(n.slice(s+1));break}return u!=null&&n.push({name:r,value:u}),n}d.dispatch=b,Object.defineProperty(d,"__esModule",{value:!0})})},{}],111:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3,d.d3)})(this,function(d,l,b,w,e){function o(x,c){var L;x==null&&(x=0),c==null&&(c=0);function S(){var k,P=L.length,z,I=0,R=0;for(k=0;k<P;++k)z=L[k],I+=z.x,R+=z.y;for(I=I/P-x,R=R/P-c,k=0;k<P;++k)z=L[k],z.x-=I,z.y-=R}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(x=+k,S):x},S.y=function(k){return arguments.length?(c=+k,S):c},S}function a(x){return function(){return x}}function n(){return(Math.random()-.5)*1e-6}function r(x){return x.x+x.vx}function u(x){return x.y+x.vy}function s(x){var c,L,S=1,k=1;typeof x!="function"&&(x=a(x==null?1:+x));function P(){for(var R,D=c.length,O,F,Y,X,q,$,V=0;V<k;++V)for(O=l.quadtree(c,r,u).visitAfter(z),R=0;R<D;++R)F=c[R],q=L[F.index],$=q*q,Y=F.x+F.vx,X=F.y+F.vy,O.visit(K);function K(se,ue,oe,U,G){var re=se.data,ee=se.r,j=q+ee;if(re){if(re.index>F.index){var Q=Y-re.x-re.vx,ne=X-re.y-re.vy,ae=Q*Q+ne*ne;ae<j*j&&(Q===0&&(Q=n(),ae+=Q*Q),ne===0&&(ne=n(),ae+=ne*ne),ae=(j-(ae=Math.sqrt(ae)))/ae*S,F.vx+=(Q*=ae)*(j=(ee*=ee)/($+ee)),F.vy+=(ne*=ae)*j,re.vx-=Q*(j=1-j),re.vy-=ne*j)}return}return ue>Y+j||U<Y-j||oe>X+j||G<X-j}}function z(R){if(R.data)return R.r=L[R.data.index];for(var D=R.r=0;D<4;++D)R[D]&&R[D].r>R.r&&(R.r=R[D].r)}function I(){if(!!c){var R,D=c.length,O;for(L=new Array(D),R=0;R<D;++R)O=c[R],L[O.index]=+x(O,R,c)}}return P.initialize=function(R){c=R,I()},P.iterations=function(R){return arguments.length?(k=+R,P):k},P.strength=function(R){return arguments.length?(S=+R,P):S},P.radius=function(R){return arguments.length?(x=typeof R=="function"?R:a(+R),I(),P):x},P}function i(x){return x.index}function f(x,c){var L=x.get(c);if(!L)throw new Error("missing: "+c);return L}function h(x){var c=i,L=O,S,k=a(30),P,z,I,R,D=1;x==null&&(x=[]);function O($){return 1/Math.min(I[$.source.index],I[$.target.index])}function F($){for(var V=0,K=x.length;V<D;++V)for(var se=0,ue,oe,U,G,re,ee,j;se<K;++se)ue=x[se],oe=ue.source,U=ue.target,G=U.x+U.vx-oe.x-oe.vx||n(),re=U.y+U.vy-oe.y-oe.vy||n(),ee=Math.sqrt(G*G+re*re),ee=(ee-P[se])/ee*$*S[se],G*=ee,re*=ee,U.vx-=G*(j=R[se]),U.vy-=re*j,oe.vx+=G*(j=1-j),oe.vy+=re*j}function Y(){if(!!z){var $,V=z.length,K=x.length,se=b.map(z,c),ue;for($=0,I=new Array(V);$<K;++$)ue=x[$],ue.index=$,typeof ue.source!="object"&&(ue.source=f(se,ue.source)),typeof ue.target!="object"&&(ue.target=f(se,ue.target)),I[ue.source.index]=(I[ue.source.index]||0)+1,I[ue.target.index]=(I[ue.target.index]||0)+1;for($=0,R=new Array(K);$<K;++$)ue=x[$],R[$]=I[ue.source.index]/(I[ue.source.index]+I[ue.target.index]);S=new Array(K),X(),P=new Array(K),q()}}function X(){if(!!z)for(var $=0,V=x.length;$<V;++$)S[$]=+L(x[$],$,x)}function q(){if(!!z)for(var $=0,V=x.length;$<V;++$)P[$]=+k(x[$],$,x)}return F.initialize=function($){z=$,Y()},F.links=function($){return arguments.length?(x=$,Y(),F):x},F.id=function($){return arguments.length?(c=$,F):c},F.iterations=function($){return arguments.length?(D=+$,F):D},F.strength=function($){return arguments.length?(L=typeof $=="function"?$:a(+$),X(),F):L},F.distance=function($){return arguments.length?(k=typeof $=="function"?$:a(+$),q(),F):k},F}function p(x){return x.x}function v(x){return x.y}var y=10,g=Math.PI*(3-Math.sqrt(5));function A(x){var c,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,z=.6,I=b.map(),R=e.timer(O),D=w.dispatch("tick","end");x==null&&(x=[]);function O(){F(),D.call("tick",c),L<S&&(R.stop(),D.call("end",c))}function F(q){var $,V=x.length,K;q===void 0&&(q=1);for(var se=0;se<q;++se)for(L+=(P-L)*k,I.each(function(ue){ue(L)}),$=0;$<V;++$)K=x[$],K.fx==null?K.x+=K.vx*=z:(K.x=K.fx,K.vx=0),K.fy==null?K.y+=K.vy*=z:(K.y=K.fy,K.vy=0);return c}function Y(){for(var q=0,$=x.length,V;q<$;++q){if(V=x[q],V.index=q,V.fx!=null&&(V.x=V.fx),V.fy!=null&&(V.y=V.fy),isNaN(V.x)||isNaN(V.y)){var K=y*Math.sqrt(q),se=q*g;V.x=K*Math.cos(se),V.y=K*Math.sin(se)}(isNaN(V.vx)||isNaN(V.vy))&&(V.vx=V.vy=0)}}function X(q){return q.initialize&&q.initialize(x),q}return Y(),c={tick:F,restart:function(){return R.restart(O),c},stop:function(){return R.stop(),c},nodes:function(q){return arguments.length?(x=q,Y(),I.each(X),c):x},alpha:function(q){return arguments.length?(L=+q,c):L},alphaMin:function(q){return arguments.length?(S=+q,c):S},alphaDecay:function(q){return arguments.length?(k=+q,c):+k},alphaTarget:function(q){return arguments.length?(P=+q,c):P},velocityDecay:function(q){return arguments.length?(z=1-q,c):1-z},force:function(q,$){return arguments.length>1?($==null?I.remove(q):I.set(q,X($)),c):I.get(q)},find:function(q,$,V){var K=0,se=x.length,ue,oe,U,G,re;for(V==null?V=1/0:V*=V,K=0;K<se;++K)G=x[K],ue=q-G.x,oe=$-G.y,U=ue*ue+oe*oe,U<V&&(re=G,V=U);return re},on:function(q,$){return arguments.length>1?(D.on(q,$),c):D.on(q)}}}function m(){var x,c,L,S=a(-30),k,P=1,z=1/0,I=.81;function R(Y){var X,q=x.length,$=l.quadtree(x,p,v).visitAfter(O);for(L=Y,X=0;X<q;++X)c=x[X],$.visit(F)}function D(){if(!!x){var Y,X=x.length,q;for(k=new Array(X),Y=0;Y<X;++Y)q=x[Y],k[q.index]=+S(q,Y,x)}}function O(Y){var X=0,q,$,V=0,K,se,ue;if(Y.length){for(K=se=ue=0;ue<4;++ue)(q=Y[ue])&&($=Math.abs(q.value))&&(X+=q.value,V+=$,K+=$*q.x,se+=$*q.y);Y.x=K/V,Y.y=se/V}else{q=Y,q.x=q.data.x,q.y=q.data.y;do X+=k[q.data.index];while(q=q.next)}Y.value=X}function F(Y,X,q,$){if(!Y.value)return!0;var V=Y.x-c.x,K=Y.y-c.y,se=$-X,ue=V*V+K*K;if(se*se/I<ue)return ue<z&&(V===0&&(V=n(),ue+=V*V),K===0&&(K=n(),ue+=K*K),ue<P&&(ue=Math.sqrt(P*ue)),c.vx+=V*Y.value*L/ue,c.vy+=K*Y.value*L/ue),!0;if(Y.length||ue>=z)return;(Y.data!==c||Y.next)&&(V===0&&(V=n(),ue+=V*V),K===0&&(K=n(),ue+=K*K),ue<P&&(ue=Math.sqrt(P*ue)));do Y.data!==c&&(se=k[Y.data.index]*L/ue,c.vx+=V*se,c.vy+=K*se);while(Y=Y.next)}return R.initialize=function(Y){x=Y,D()},R.strength=function(Y){return arguments.length?(S=typeof Y=="function"?Y:a(+Y),D(),R):S},R.distanceMin=function(Y){return arguments.length?(P=Y*Y,R):Math.sqrt(P)},R.distanceMax=function(Y){return arguments.length?(z=Y*Y,R):Math.sqrt(z)},R.theta=function(Y){return arguments.length?(I=Y*Y,R):Math.sqrt(I)},R}function M(x,c,L){var S,k=a(.1),P,z;typeof x!="function"&&(x=a(+x)),c==null&&(c=0),L==null&&(L=0);function I(D){for(var O=0,F=S.length;O<F;++O){var Y=S[O],X=Y.x-c||1e-6,q=Y.y-L||1e-6,$=Math.sqrt(X*X+q*q),V=(z[O]-$)*P[O]*D/$;Y.vx+=X*V,Y.vy+=q*V}}function R(){if(!!S){var D,O=S.length;for(P=new Array(O),z=new Array(O),D=0;D<O;++D)z[D]=+x(S[D],D,S),P[D]=isNaN(z[D])?0:+k(S[D],D,S)}}return I.initialize=function(D){S=D,R()},I.strength=function(D){return arguments.length?(k=typeof D=="function"?D:a(+D),R(),I):k},I.radius=function(D){return arguments.length?(x=typeof D=="function"?D:a(+D),R(),I):x},I.x=function(D){return arguments.length?(c=+D,I):c},I.y=function(D){return arguments.length?(L=+D,I):L},I}function _(x){var c=a(.1),L,S,k;typeof x!="function"&&(x=a(x==null?0:+x));function P(I){for(var R=0,D=L.length,O;R<D;++R)O=L[R],O.vx+=(k[R]-O.x)*S[R]*I}function z(){if(!!L){var I,R=L.length;for(S=new Array(R),k=new Array(R),I=0;I<R;++I)S[I]=isNaN(k[I]=+x(L[I],I,L))?0:+c(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(c=typeof I=="function"?I:a(+I),z(),P):c},P.x=function(I){return arguments.length?(x=typeof I=="function"?I:a(+I),z(),P):x},P}function T(x){var c=a(.1),L,S,k;typeof x!="function"&&(x=a(x==null?0:+x));function P(I){for(var R=0,D=L.length,O;R<D;++R)O=L[R],O.vy+=(k[R]-O.y)*S[R]*I}function z(){if(!!L){var I,R=L.length;for(S=new Array(R),k=new Array(R),I=0;I<R;++I)S[I]=isNaN(k[I]=+x(L[I],I,L))?0:+c(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(c=typeof I=="function"?I:a(+I),z(),P):c},P.y=function(I){return arguments.length?(x=typeof I=="function"?I:a(+I),z(),P):x},P}d.forceCenter=o,d.forceCollide=s,d.forceLink=h,d.forceManyBody=m,d.forceRadial=M,d.forceSimulation=A,d.forceX=_,d.forceY=T,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=typeof globalThis!="undefined"?globalThis:d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function b(x,c){if((L=(x=c?x.toExponential(c-1):x.toExponential()).indexOf("e"))<0)return null;var L,S=x.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+x.slice(L+1)]}function w(x){return x=b(Math.abs(x)),x?x[1]:NaN}function e(x,c){return function(L,S){for(var k=L.length,P=[],z=0,I=x[0],R=0;k>0&&I>0&&(R+I+1>S&&(I=Math.max(1,S-R)),P.push(L.substring(k-=I,k+I)),!((R+=I+1)>S));)I=x[z=(z+1)%x.length];return P.reverse().join(c)}}function o(x){return function(c){return c.replace(/[0-9]/g,function(L){return x[+L]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(x){if(!(c=a.exec(x)))throw new Error("invalid format: "+x);var c;return new r({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}n.prototype=r.prototype;function r(x){this.fill=x.fill===void 0?" ":x.fill+"",this.align=x.align===void 0?">":x.align+"",this.sign=x.sign===void 0?"-":x.sign+"",this.symbol=x.symbol===void 0?"":x.symbol+"",this.zero=!!x.zero,this.width=x.width===void 0?void 0:+x.width,this.comma=!!x.comma,this.precision=x.precision===void 0?void 0:+x.precision,this.trim=!!x.trim,this.type=x.type===void 0?"":x.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u(x){e:for(var c=x.length,L=1,S=-1,k;L<c;++L)switch(x[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+x[L])break e;S>0&&(S=0);break}return S>0?x.slice(0,S)+x.slice(k+1):x}var s;function i(x,c){var L=b(x,c);if(!L)return x+"";var S=L[0],k=L[1],P=k-(s=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,z=S.length;return P===z?S:P>z?S+new Array(P-z+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+b(x,Math.max(0,c+P-1))[0]}function f(x,c){var L=b(x,c);if(!L)return x+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var h={"%":function(x,c){return(x*100).toFixed(c)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:l,e:function(x,c){return x.toExponential(c)},f:function(x,c){return x.toFixed(c)},g:function(x,c){return x.toPrecision(c)},o:function(x){return Math.round(x).toString(8)},p:function(x,c){return f(x*100,c)},r:f,s:i,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function p(x){return x}var v=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function g(x){var c=x.grouping===void 0||x.thousands===void 0?p:e(v.call(x.grouping,Number),x.thousands+""),L=x.currency===void 0?"":x.currency[0]+"",S=x.currency===void 0?"":x.currency[1]+"",k=x.decimal===void 0?".":x.decimal+"",P=x.numerals===void 0?p:o(v.call(x.numerals,String)),z=x.percent===void 0?"%":x.percent+"",I=x.minus===void 0?"-":x.minus+"",R=x.nan===void 0?"NaN":x.nan+"";function D(F){F=n(F);var Y=F.fill,X=F.align,q=F.sign,$=F.symbol,V=F.zero,K=F.width,se=F.comma,ue=F.precision,oe=F.trim,U=F.type;U==="n"?(se=!0,U="g"):h[U]||(ue===void 0&&(ue=12),oe=!0,U="g"),(V||Y==="0"&&X==="=")&&(V=!0,Y="0",X="=");var G=$==="$"?L:$==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",re=$==="$"?S:/[%p]/.test(U)?z:"",ee=h[U],j=/[defgprs%]/.test(U);ue=ue===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,ue)):Math.max(0,Math.min(20,ue));function Q(ne){var ae=G,ie=re,fe,me,ce;if(U==="c")ie=ee(ne)+ie,ne="";else{ne=+ne;var ye=ne<0||1/ne<0;if(ne=isNaN(ne)?R:ee(Math.abs(ne),ue),oe&&(ne=u(ne)),ye&&+ne==0&&q!=="+"&&(ye=!1),ae=(ye?q==="("?q:I:q==="-"||q==="("?"":q)+ae,ie=(U==="s"?y[8+s/3]:"")+ie+(ye&&q==="("?")":""),j){for(fe=-1,me=ne.length;++fe<me;)if(ce=ne.charCodeAt(fe),48>ce||ce>57){ie=(ce===46?k+ne.slice(fe+1):ne.slice(fe))+ie,ne=ne.slice(0,fe);break}}}se&&!V&&(ne=c(ne,1/0));var xe=ae.length+ne.length+ie.length,ke=xe<K?new Array(K-xe+1).join(Y):"";switch(se&&V&&(ne=c(ke+ne,ke.length?K-ie.length:1/0),ke=""),X){case"<":ne=ae+ne+ie+ke;break;case"=":ne=ae+ke+ne+ie;break;case"^":ne=ke.slice(0,xe=ke.length>>1)+ae+ne+ie+ke.slice(xe);break;default:ne=ke+ae+ne+ie;break}return P(ne)}return Q.toString=function(){return F+""},Q}function O(F,Y){var X=D((F=n(F),F.type="f",F)),q=Math.max(-8,Math.min(8,Math.floor(w(Y)/3)))*3,$=Math.pow(10,-q),V=y[8+q/3];return function(K){return X($*K)+V}}return{format:D,formatPrefix:O}}var A;m({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function m(x){return A=g(x),d.format=A.format,d.formatPrefix=A.formatPrefix,A}function M(x){return Math.max(0,-w(Math.abs(x)))}function _(x,c){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(w(c)/3)))*3-w(Math.abs(x)))}function T(x,c){return x=Math.abs(x),c=Math.abs(c)-x,Math.max(0,w(c)-w(x))+1}d.FormatSpecifier=r,d.formatDefaultLocale=m,d.formatLocale=g,d.formatSpecifier=n,d.precisionFixed=M,d.precisionPrefix=_,d.precisionRound=T,Object.defineProperty(d,"__esModule",{value:!0})})},{}],113:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-geo"),t("d3-array")):l(d.d3=d.d3||{},d.d3,d.d3)})(this,function(d,l,b){var w=Math.abs,e=Math.atan,o=Math.atan2,a=Math.cos,n=Math.exp,r=Math.floor,u=Math.log,s=Math.max,i=Math.min,f=Math.pow,h=Math.round,p=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},v=Math.sin,y=Math.tan,g=1e-6,A=1e-12,m=Math.PI,M=m/2,_=m/4,T=Math.SQRT1_2,x=R(2),c=R(m),L=m*2,S=180/m,k=m/180;function P(ze){return ze?ze/Math.sin(ze):1}function z(ze){return ze>1?M:ze<-1?-M:Math.asin(ze)}function I(ze){return ze>1?0:ze<-1?m:Math.acos(ze)}function R(ze){return ze>0?Math.sqrt(ze):0}function D(ze){return ze=n(2*ze),(ze-1)/(ze+1)}function O(ze){return(n(ze)-n(-ze))/2}function F(ze){return(n(ze)+n(-ze))/2}function Y(ze){return u(ze+R(ze*ze+1))}function X(ze){return u(ze+R(ze*ze-1))}function q(ze){var We=y(ze/2),nt=2*u(a(ze/2))/(We*We);function lt(_t,bt){var Tt=a(_t),qt=a(bt),sr=v(bt),Qt=qt*Tt,fr=-((1-Qt?u((1+Qt)/2)/(1-Qt):-.5)+nt/(1+Qt));return[fr*qt*v(_t),fr*sr]}return lt.invert=function(_t,bt){var Tt=R(_t*_t+bt*bt),qt=-ze/2,sr=50,Qt;if(!Tt)return[0,0];do{var fr=qt/2,Er=a(fr),Hr=v(fr),en=Hr/Er,_n=-u(w(Er));qt-=Qt=(2/en*_n-nt*en-Tt)/(-_n/(Hr*Hr)+1-nt/(2*Er*Er))*(Er<0?.7:1)}while(w(Qt)>g&&--sr>0);var Pn=v(qt);return[o(_t*Pn,Tt*a(qt)),z(bt*Pn/Tt)]},lt}function $(){var ze=M,We=l.geoProjectionMutator(q),nt=We(ze);return nt.radius=function(lt){return arguments.length?We(ze=lt*k):ze*S},nt.scale(179.976).clipAngle(147)}function V(ze,We){var nt=a(We),lt=P(I(nt*a(ze/=2)));return[2*nt*v(ze)*lt,v(We)*lt]}V.invert=function(ze,We){if(!(ze*ze+4*We*We>m*m+g)){var nt=ze,lt=We,_t=25;do{var bt=v(nt),Tt=v(nt/2),qt=a(nt/2),sr=v(lt),Qt=a(lt),fr=v(2*lt),Er=sr*sr,Hr=Qt*Qt,en=Tt*Tt,_n=1-Hr*qt*qt,Pn=_n?I(Qt*qt)*R(Zn=1/_n):Zn=0,Zn,ma=2*Pn*Qt*Tt-ze,ba=Pn*sr-We,Za=Zn*(Hr*en+Pn*Qt*qt*Er),Wa=Zn*(.5*bt*fr-Pn*2*sr*Tt),ei=Zn*.25*(fr*Tt-Pn*sr*Hr*bt),fi=Zn*(Er*qt+Pn*en*Qt),oo=Wa*ei-fi*Za;if(!oo)break;var ri=(ba*Wa-ma*fi)/oo,Hi=(ma*ei-ba*Za)/oo;nt-=ri,lt-=Hi}while((w(ri)>g||w(Hi)>g)&&--_t>0);return[nt,lt]}};function K(){return l.geoProjection(V).scale(152.63)}function se(ze){var We=v(ze),nt=a(ze),lt=ze>=0?1:-1,_t=y(lt*ze),bt=(1+We-nt)/2;function Tt(qt,sr){var Qt=a(sr),fr=a(qt/=2);return[(1+Qt)*v(qt),(lt*sr>-o(fr,_t)-.001?0:-lt*10)+bt+v(sr)*nt-(1+Qt)*We*fr]}return Tt.invert=function(qt,sr){var Qt=0,fr=0,Er=50;do{var Hr=a(Qt),en=v(Qt),_n=a(fr),Pn=v(fr),Zn=1+_n,ma=Zn*en-qt,ba=bt+Pn*nt-Zn*We*Hr-sr,Za=Zn*Hr/2,Wa=-en*Pn,ei=We*Zn*en/2,fi=nt*_n+We*Hr*Pn,oo=Wa*ei-fi*Za,ri=(ba*Wa-ma*fi)/oo/2,Hi=(ma*ei-ba*Za)/oo;w(Hi)>2&&(Hi/=2),Qt-=ri,fr-=Hi}while((w(ri)>g||w(Hi)>g)&&--Er>0);return lt*fr>-o(a(Qt),_t)-.001?[Qt*2,fr]:null},Tt}function ue(){var ze=20*k,We=ze>=0?1:-1,nt=y(We*ze),lt=l.geoProjectionMutator(se),_t=lt(ze),bt=_t.stream;return _t.parallel=function(Tt){return arguments.length?(nt=y((We=(ze=Tt*k)>=0?1:-1)*ze),lt(ze)):ze*S},_t.stream=function(Tt){var qt=_t.rotate(),sr=bt(Tt),Qt=(_t.rotate([0,0]),bt(Tt)),fr=_t.precision();return _t.rotate(qt),sr.sphere=function(){Qt.polygonStart(),Qt.lineStart();for(var Er=We*-180;We*Er<180;Er+=We*90)Qt.point(Er,We*90);if(ze)for(;We*(Er-=3*We*fr)>=-180;)Qt.point(Er,We*-o(a(Er*k/2),nt)*S);Qt.lineEnd(),Qt.polygonEnd()},sr},_t.scale(218.695).center([0,28.0974])}function oe(ze,We){var nt=y(We/2),lt=R(1-nt*nt),_t=1+lt*a(ze/=2),bt=v(ze)*lt/_t,Tt=nt/_t,qt=bt*bt,sr=Tt*Tt;return[4/3*bt*(3+qt-3*sr),4/3*Tt*(3+3*qt-sr)]}oe.invert=function(ze,We){if(ze*=3/8,We*=3/8,!ze&&w(We)>1)return null;var nt=ze*ze,lt=We*We,_t=1+nt+lt,bt=R((_t-R(_t*_t-4*We*We))/2),Tt=z(bt)/3,qt=bt?X(w(We/bt))/3:Y(w(ze))/3,sr=a(Tt),Qt=F(qt),fr=Qt*Qt-sr*sr;return[p(ze)*2*o(O(qt)*sr,.25-fr),p(We)*2*o(Qt*v(Tt),.25+fr)]};function U(){return l.geoProjection(oe).scale(66.1603)}var G=R(8),re=u(1+x);function ee(ze,We){var nt=w(We);return nt<_?[ze,u(y(_+We/2))]:[ze*a(nt)*(2*x-1/v(nt)),p(We)*(2*x*(nt-_)-u(y(nt/2)))]}ee.invert=function(ze,We){if((bt=w(We))<re)return[ze,2*e(n(We))-M];var nt=_,lt=25,_t,bt;do{var Tt=a(nt/2),qt=y(nt/2);nt-=_t=(G*(nt-_)-u(qt)-bt)/(G-Tt*Tt/(2*qt))}while(w(_t)>A&&--lt>0);return[ze/(a(nt)*(G-1/v(nt))),p(We)*nt]};function j(){return l.geoProjection(ee).scale(112.314)}function Q(ze){var We=2*m/ze;function nt(lt,_t){var bt=l.geoAzimuthalEquidistantRaw(lt,_t);if(w(lt)>M){var Tt=o(bt[1],bt[0]),qt=R(bt[0]*bt[0]+bt[1]*bt[1]),sr=We*h((Tt-M)/We)+M,Qt=o(v(Tt-=sr),2-a(Tt));Tt=sr+z(m/qt*v(Qt))-Qt,bt[0]=qt*a(Tt),bt[1]=qt*v(Tt)}return bt}return nt.invert=function(lt,_t){var bt=R(lt*lt+_t*_t);if(bt>M){var Tt=o(_t,lt),qt=We*h((Tt-M)/We)+M,sr=Tt>qt?-1:1,Qt=bt*a(qt-Tt),fr=1/y(sr*I((Qt-m)/R(m*(m-2*Qt)+bt*bt)));Tt=qt+2*e((fr+sr*R(fr*fr-3))/3),lt=bt*a(Tt),_t=bt*v(Tt)}return l.geoAzimuthalEquidistantRaw.invert(lt,_t)},nt}function ne(){var ze=5,We=l.geoProjectionMutator(Q),nt=We(ze),lt=nt.stream,_t=.01,bt=-a(_t*k),Tt=v(_t*k);return nt.lobes=function(qt){return arguments.length?We(ze=+qt):ze},nt.stream=function(qt){var sr=nt.rotate(),Qt=lt(qt),fr=(nt.rotate([0,0]),lt(qt));return nt.rotate(sr),Qt.sphere=function(){fr.polygonStart(),fr.lineStart();for(var Er=0,Hr=360/ze,en=2*m/ze,_n=90-180/ze,Pn=M;Er<ze;++Er,_n-=Hr,Pn-=en)fr.point(o(Tt*a(Pn),bt)*S,z(Tt*v(Pn))*S),_n<-90?(fr.point(-90,-180-_n-_t),fr.point(-90,-180-_n+_t)):(fr.point(90,_n+_t),fr.point(90,_n-_t));fr.lineEnd(),fr.polygonEnd()},Qt},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ae(ze,We){if(arguments.length<2&&(We=ze),We===1)return l.geoAzimuthalEqualAreaRaw;if(We===1/0)return ie;function nt(lt,_t){var bt=l.geoAzimuthalEqualAreaRaw(lt/We,_t);return bt[0]*=ze,bt}return nt.invert=function(lt,_t){var bt=l.geoAzimuthalEqualAreaRaw.invert(lt/ze,_t);return bt[0]*=We,bt},nt}function ie(ze,We){return[ze*a(We)/a(We/=2),2*v(We)]}ie.invert=function(ze,We){var nt=2*z(We/2);return[ze*a(nt/2)/a(nt),nt]};function fe(){var ze=2,We=l.geoProjectionMutator(ae),nt=We(ze);return nt.coefficient=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(169.529)}function me(ze,We,nt){var lt=100,_t,bt,Tt;nt=nt===void 0?0:+nt,We=+We;do bt=ze(nt),Tt=ze(nt+g),bt===Tt&&(Tt=bt+g),nt-=_t=-1*g*(bt-We)/(bt-Tt);while(lt-- >0&&w(_t)>g);return lt<0?NaN:nt}function ce(ze,We,nt){return We===void 0&&(We=40),nt===void 0&&(nt=A),function(lt,_t,bt,Tt){var qt,sr,Qt;bt=bt===void 0?0:+bt,Tt=Tt===void 0?0:+Tt;for(var fr=0;fr<We;fr++){var Er=ze(bt,Tt),Hr=Er[0]-lt,en=Er[1]-_t;if(w(Hr)<nt&&w(en)<nt)break;var _n=Hr*Hr+en*en;if(_n>qt){bt-=sr/=2,Tt-=Qt/=2;continue}qt=_n;var Pn=(bt>0?-1:1)*nt,Zn=(Tt>0?-1:1)*nt,ma=ze(bt+Pn,Tt),ba=ze(bt,Tt+Zn),Za=(ma[0]-Er[0])/Pn,Wa=(ma[1]-Er[1])/Pn,ei=(ba[0]-Er[0])/Zn,fi=(ba[1]-Er[1])/Zn,oo=fi*Za-Wa*ei,ri=(w(oo)<.5?.5:1)/oo;if(sr=(en*ei-Hr*fi)*ri,Qt=(Hr*Wa-en*Za)*ri,bt+=sr,Tt+=Qt,w(sr)<nt&&w(Qt)<nt)break}return[bt,Tt]}}function ye(){var ze=ae(1.68,2),We=1.4,nt=12;function lt(_t,bt){if(_t+bt<-We){var Tt=(_t-bt+1.6)*(_t+bt+We)/8;_t+=Tt,bt-=.8*Tt*v(bt+m/2)}var qt=ze(_t,bt),sr=(1-a(_t*bt))/nt;return qt[1]<0&&(qt[0]*=1+sr),qt[1]>0&&(qt[1]*=1+sr/1.5*qt[0]*qt[0]),qt}return lt.invert=ce(lt),lt}function xe(){return l.geoProjection(ye()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ke(ze,We){var nt=ze*v(We),lt=30,_t;do We-=_t=(We+v(We)-nt)/(1+a(We));while(w(_t)>g&&--lt>0);return We/2}function Ae(ze,We,nt){function lt(_t,bt){return[ze*_t*a(bt=ke(nt,bt)),We*v(bt)]}return lt.invert=function(_t,bt){return bt=z(bt/We),[_t/(ze*a(bt)),z((2*bt+v(2*bt))/nt)]},lt}var Oe=Ae(x/M,x,m);function He(){return l.geoProjection(Oe).scale(169.529)}var Ge=2.00276,_e=1.11072;function Ie(ze,We){var nt=ke(m,We);return[Ge*ze/(1/a(We)+_e/a(nt)),(We+x*v(nt))/Ge]}Ie.invert=function(ze,We){var nt=Ge*We,lt=We<0?-_:_,_t=25,bt,Tt;do Tt=nt-x*v(lt),lt-=bt=(v(2*lt)+2*lt-m*v(Tt))/(2*a(2*lt)+2+m*a(Tt)*x*a(lt));while(w(bt)>g&&--_t>0);return Tt=nt-x*v(lt),[ze*(1/a(Tt)+_e/a(lt))/Ge,Tt]};function Ye(){return l.geoProjection(Ie).scale(160.857)}function qe(ze){var We=0,nt=l.geoProjectionMutator(ze),lt=nt(We);return lt.parallel=function(_t){return arguments.length?nt(We=_t*k):We*S},lt}function Ue(ze,We){return[ze*a(We),We]}Ue.invert=function(ze,We){return[ze/a(We),We]};function Re(){return l.geoProjection(Ue).scale(152.63)}function Ve(ze){if(!ze)return Ue;var We=1/y(ze);function nt(lt,_t){var bt=We+ze-_t,Tt=bt&&lt*a(_t)/bt;return[bt*v(Tt),We-bt*a(Tt)]}return nt.invert=function(lt,_t){var bt=R(lt*lt+(_t=We-_t)*_t),Tt=We+ze-bt;return[bt/a(Tt)*o(lt,_t),Tt]},nt}function dt(){return qe(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Dt(ze){function We(nt,lt){var _t=M-lt,bt=_t&&nt*ze*v(_t)/_t;return[_t*v(bt)/ze,M-_t*a(bt)]}return We.invert=function(nt,lt){var _t=nt*ze,bt=M-lt,Tt=R(_t*_t+bt*bt),qt=o(_t,bt);return[(Tt?Tt/v(Tt):1)*qt/ze,M-Tt]},We}function Gt(){var ze=.5,We=l.geoProjectionMutator(Dt),nt=We(ze);return nt.fraction=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(158.837)}var kt=Ae(1,4/m,m);function zt(){return l.geoProjection(kt).scale(152.63)}function Bt(ze,We,nt,lt,_t,bt){var Tt=a(bt),qt;if(w(ze)>1||w(bt)>1)qt=I(nt*_t+We*lt*Tt);else{var sr=v(ze/2),Qt=v(bt/2);qt=2*z(R(sr*sr+We*lt*Qt*Qt))}return w(qt)>g?[qt,o(lt*v(bt),We*_t-nt*lt*Tt)]:[0,0]}function Lt(ze,We,nt){return I((ze*ze+We*We-nt*nt)/(2*ze*We))}function Mt(ze){return ze-2*m*r((ze+m)/(2*m))}function it(ze,We,nt){for(var lt=[[ze[0],ze[1],v(ze[1]),a(ze[1])],[We[0],We[1],v(We[1]),a(We[1])],[nt[0],nt[1],v(nt[1]),a(nt[1])]],_t=lt[2],bt,Tt=0;Tt<3;++Tt,_t=bt)bt=lt[Tt],_t.v=Bt(bt[1]-_t[1],_t[3],_t[2],bt[3],bt[2],bt[0]-_t[0]),_t.point=[0,0];var qt=Lt(lt[0].v[0],lt[2].v[0],lt[1].v[0]),sr=Lt(lt[0].v[0],lt[1].v[0],lt[2].v[0]),Qt=m-qt;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var fr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*a(qt),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*v(qt))];function Er(Hr,en){var _n=v(en),Pn=a(en),Zn=new Array(3),ma;for(ma=0;ma<3;++ma){var ba=lt[ma];if(Zn[ma]=Bt(en-ba[1],ba[3],ba[2],Pn,_n,Hr-ba[0]),!Zn[ma][0])return ba.point;Zn[ma][1]=Mt(Zn[ma][1]-ba.v[1])}var Za=fr.slice();for(ma=0;ma<3;++ma){var Wa=ma==2?0:ma+1,ei=Lt(lt[ma].v[0],Zn[ma][0],Zn[Wa][0]);Zn[ma][1]<0&&(ei=-ei),ma?ma==1?(ei=sr-ei,Za[0]-=Zn[ma][0]*a(ei),Za[1]-=Zn[ma][0]*v(ei)):(ei=Qt-ei,Za[0]+=Zn[ma][0]*a(ei),Za[1]+=Zn[ma][0]*v(ei)):(Za[0]+=Zn[ma][0]*a(ei),Za[1]-=Zn[ma][0]*v(ei))}return Za[0]/=3,Za[1]/=3,Za}return Er}function ht(ze){return ze[0]*=k,ze[1]*=k,ze}function Qe(){return Ce([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ce(ze,We,nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:[ze,We,nt]}),_t=[-lt[0],-lt[1]],bt=l.geoRotation(_t),Tt=it(ht(bt(ze)),ht(bt(We)),ht(bt(nt)));Tt.invert=ce(Tt);var qt=l.geoProjection(Tt).rotate(_t),sr=qt.center;return delete qt.rotate,qt.center=function(Qt){return arguments.length?sr(bt(Qt)):bt.invert(sr())},qt.clipAngle(90)}function je(ze,We){var nt=R(1-v(We));return[2/c*ze*nt,c*(1-nt)]}je.invert=function(ze,We){var nt=(nt=We/c-1)*nt;return[nt>0?ze*R(m/nt)/2:0,z(1-nt)]};function rt(){return l.geoProjection(je).scale(95.6464).center([0,30])}function ut(ze){var We=y(ze);function nt(lt,_t){return[lt,(lt?lt/v(lt):1)*(v(_t)*a(lt)-We*a(_t))]}return nt.invert=We?function(lt,_t){lt&&(_t*=v(lt)/lt);var bt=a(lt);return[lt,2*o(R(bt*bt+We*We-_t*_t)-bt,We-_t)]}:function(lt,_t){return[lt,z(lt?_t*y(lt)/lt:_t)]},nt}function Pt(){return qe(ut).scale(249.828).clipAngle(90)}var St=R(3);function Nt(ze,We){return[St*ze*(2*a(2*We/3)-1)/c,St*c*v(We/3)]}Nt.invert=function(ze,We){var nt=3*z(We/(St*c));return[c*ze/(St*(2*a(2*nt/3)-1)),nt]};function Xt(){return l.geoProjection(Nt).scale(156.19)}function Ot(ze){var We=a(ze);function nt(lt,_t){return[lt*We,v(_t)/We]}return nt.invert=function(lt,_t){return[lt/We,z(_t*We)]},nt}function Kt(){return qe(Ot).parallel(38.58).scale(195.044)}function Je(ze){var We=a(ze);function nt(lt,_t){return[lt*We,(1+We)*y(_t/2)]}return nt.invert=function(lt,_t){return[lt/We,e(_t/(1+We))*2]},nt}function gt(){return qe(Je).scale(124.75)}function Et(ze,We){var nt=R(8/(3*m));return[nt*ze*(1-w(We)/m),nt*We]}Et.invert=function(ze,We){var nt=R(8/(3*m)),lt=We/nt;return[ze/(nt*(1-w(lt)/m)),lt]};function rr(){return l.geoProjection(Et).scale(165.664)}function vr(ze,We){var nt=R(4-3*v(w(We)));return[2/R(6*m)*ze*nt,p(We)*R(2*m/3)*(2-nt)]}vr.invert=function(ze,We){var nt=2-w(We)/R(2*m/3);return[ze*R(6*m)/(2*nt),p(We)*z((4-nt*nt)/3)]};function or(){return l.geoProjection(vr).scale(165.664)}function dr(ze,We){var nt=R(m*(4+m));return[2/nt*ze*(1+R(1-4*We*We/(m*m))),4/nt*We]}dr.invert=function(ze,We){var nt=R(m*(4+m))/2;return[ze*nt/(1+R(1-We*We*(4+m)/(4*m))),We*nt/2]};function Lr(){return l.geoProjection(dr).scale(180.739)}function kr(ze,We){var nt=(2+M)*v(We);We/=2;for(var lt=0,_t=1/0;lt<10&&w(_t)>g;lt++){var bt=a(We);We-=_t=(We+v(We)*(bt+2)-nt)/(2*bt*(1+bt))}return[2/R(m*(4+m))*ze*(1+a(We)),2*R(m/(4+m))*v(We)]}kr.invert=function(ze,We){var nt=We*R((4+m)/m)/2,lt=z(nt),_t=a(lt);return[ze/(2/R(m*(4+m))*(1+_t)),z((lt+nt*(_t+2))/(2+M))]};function tr(){return l.geoProjection(kr).scale(180.739)}function Or(ze,We){return[ze*(1+a(We))/R(2+m),2*We/R(2+m)]}Or.invert=function(ze,We){var nt=R(2+m),lt=We*nt/2;return[nt*ze/(1+a(lt)),lt]};function et(){return l.geoProjection(Or).scale(173.044)}function we(ze,We){for(var nt=(1+M)*v(We),lt=0,_t=1/0;lt<10&&w(_t)>g;lt++)We-=_t=(We+v(We)-nt)/(1+a(We));return nt=R(2+m),[ze*(1+a(We))/nt,2*We/nt]}we.invert=function(ze,We){var nt=1+M,lt=R(nt/2);return[ze*2*lt/(1+a(We*=lt)),z((We+v(We))/nt)]};function Se(){return l.geoProjection(we).scale(173.044)}var De=3+2*x;function Xe(ze,We){var nt=v(ze/=2),lt=a(ze),_t=R(a(We)),bt=a(We/=2),Tt=v(We)/(bt+x*lt*_t),qt=R(2/(1+Tt*Tt)),sr=R((x*bt+(lt+nt)*_t)/(x*bt+(lt-nt)*_t));return[De*(qt*(sr-1/sr)-2*u(sr)),De*(qt*Tt*(sr+1/sr)-2*e(Tt))]}Xe.invert=function(ze,We){if(!(bt=oe.invert(ze/1.2,We*1.065)))return null;var nt=bt[0],lt=bt[1],_t=20,bt;ze/=De,We/=De;do{var Tt=nt/2,qt=lt/2,sr=v(Tt),Qt=a(Tt),fr=v(qt),Er=a(qt),Hr=a(lt),en=R(Hr),_n=fr/(Er+x*Qt*en),Pn=_n*_n,Zn=R(2/(1+Pn)),ma=x*Er+(Qt+sr)*en,ba=x*Er+(Qt-sr)*en,Za=ma/ba,Wa=R(Za),ei=Wa-1/Wa,fi=Wa+1/Wa,oo=Zn*ei-2*u(Wa)-ze,ri=Zn*_n*fi-2*e(_n)-We,Hi=fr&&T*en*sr*Pn/fr,co=(x*Qt*Er+en)/(2*(Er+x*Qt*en)*(Er+x*Qt*en)*en),_o=-.5*_n*Zn*Zn*Zn,xi=_o*Hi,Ai=_o*co,ms=(ms=2*Er+x*en*(Qt-sr))*ms*Wa,go=(x*Qt*Er*en+Hr)/ms,Io=-(x*sr*fr)/(en*ms),jo=ei*xi-2*go/Wa+Zn*(go+go/Za),he=ei*Ai-2*Io/Wa+Zn*(Io+Io/Za),Te=_n*fi*xi-2*Hi/(1+Pn)+Zn*fi*Hi+Zn*_n*(go-go/Za),Le=_n*fi*Ai-2*co/(1+Pn)+Zn*fi*co+Zn*_n*(Io-Io/Za),Be=he*Te-Le*jo;if(!Be)break;var Ne=(ri*he-oo*Le)/Be,Ke=(oo*Te-ri*jo)/Be;nt-=Ne,lt=s(-M,i(M,lt-Ke))}while((w(Ne)>g||w(Ke)>g)&&--_t>0);return w(w(lt)-M)<g?[0,lt]:_t&&[nt,lt]};function $e(){return l.geoProjection(Xe).scale(62.5271)}var ot=a(35*k);function st(ze,We){var nt=y(We/2);return[ze*ot*R(1-nt*nt),(1+ot)*nt]}st.invert=function(ze,We){var nt=We/(1+ot);return[ze&&ze/(ot*R(1-nt*nt)),2*e(nt)]};function pt(){return l.geoProjection(st).scale(137.152)}function wt(ze,We){var nt=We/2,lt=a(nt);return[2*ze/c*a(We)*lt*lt,c*y(nt)]}wt.invert=function(ze,We){var nt=e(We/c),lt=a(nt),_t=2*nt;return[ze*c/2/(a(_t)*lt*lt),_t]};function Yt(){return l.geoProjection(wt).scale(135.264)}function mr(ze){var We=1-ze,nt=bt(m,0)[0]-bt(-m,0)[0],lt=bt(0,M)[1]-bt(0,-M)[1],_t=R(2*lt/nt);function bt(sr,Qt){var fr=a(Qt),Er=v(Qt);return[fr/(We+ze*fr)*sr,We*Qt+ze*Er]}function Tt(sr,Qt){var fr=bt(sr,Qt);return[fr[0]*_t,fr[1]/_t]}function qt(sr){return Tt(0,sr)[1]}return Tt.invert=function(sr,Qt){var fr=me(qt,Qt),Er=sr/_t*(ze+We/a(fr));return[Er,fr]},Tt}function xr(){var ze=.5,We=l.geoProjectionMutator(mr),nt=We(ze);return nt.alpha=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(168.725)}function Tr(ze){return[ze[0]/2,z(y(ze[1]/2*k))*S]}function yr(ze){return[ze[0]*2,2*e(v(ze[1]*k))*S]}function Dr(ze){ze==null&&(ze=l.geoOrthographic);var We=ze(),nt=l.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function lt(bt){return We(Tr(bt))}We.invert&&(lt.invert=function(bt){return yr(We.invert(bt))}),lt.stream=function(bt){var Tt=We.stream(bt),qt=nt.stream({point:function(sr,Qt){Tt.point(sr/2,z(y(-Qt/2*k))*S)},lineStart:function(){Tt.lineStart()},lineEnd:function(){Tt.lineEnd()},polygonStart:function(){Tt.polygonStart()},polygonEnd:function(){Tt.polygonEnd()}});return qt.sphere=Tt.sphere,qt};function _t(bt){lt[bt]=function(){return arguments.length?(We[bt].apply(We,arguments),lt):We[bt]()}}return lt.rotate=function(bt){return arguments.length?(nt.rotate(bt),lt):nt.rotate()},lt.center=function(bt){return arguments.length?(We.center(Tr(bt)),lt):yr(We.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),lt.scale(249.5)}function tn(ze,We){var nt=2*m/We,lt=ze*ze;function _t(bt,Tt){var qt=l.geoAzimuthalEquidistantRaw(bt,Tt),sr=qt[0],Qt=qt[1],fr=sr*sr+Qt*Qt;if(fr>lt){var Er=R(fr),Hr=o(Qt,sr),en=nt*h(Hr/nt),_n=Hr-en,Pn=ze*a(_n),Zn=(ze*v(_n)-_n*v(Pn))/(M-Pn),ma=wr(_n,Zn),ba=(m-ze)/gr(ma,Pn,m);sr=Er;var Za=50,Wa;do sr-=Wa=(ze+gr(ma,Pn,sr)*ba-Er)/(ma(sr)*ba);while(w(Wa)>g&&--Za>0);Qt=_n*v(sr),sr<M&&(Qt-=Zn*(sr-M));var ei=v(en),fi=a(en);qt[0]=sr*fi-Qt*ei,qt[1]=sr*ei+Qt*fi}return qt}return _t.invert=function(bt,Tt){var qt=bt*bt+Tt*Tt;if(qt>lt){var sr=R(qt),Qt=o(Tt,bt),fr=nt*h(Qt/nt),Er=Qt-fr;bt=sr*a(Er),Tt=sr*v(Er);for(var Hr=bt-M,en=v(bt),_n=Tt/en,Pn=bt<M?1/0:0,Zn=10;;){var ma=ze*v(_n),ba=ze*a(_n),Za=v(ba),Wa=M-ba,ei=(ma-_n*Za)/Wa,fi=wr(_n,ei);if(w(Pn)<A||!--Zn)break;_n-=Pn=(_n*en-ei*Hr-Tt)/(en-Hr*2*(Wa*(ba+_n*ma*a(ba)-Za)-ma*(ma-_n*Za))/(Wa*Wa))}sr=ze+gr(fi,ba,bt)*(m-ze)/gr(fi,ba,m),Qt=fr+_n,bt=sr*a(Qt),Tt=sr*v(Qt)}return l.geoAzimuthalEquidistantRaw.invert(bt,Tt)},_t}function wr(ze,We){return function(nt){var lt=ze*a(nt);return nt<M&&(lt-=We),R(1+lt*lt)}}function gr(ze,We,nt){for(var lt=50,_t=(nt-We)/lt,bt=ze(We)+ze(nt),Tt=1,qt=We;Tt<lt;++Tt)bt+=2*ze(qt+=_t);return bt*.5*_t}function yn(){var ze=6,We=30*k,nt=a(We),lt=v(We),_t=l.geoProjectionMutator(tn),bt=_t(We,ze),Tt=bt.stream,qt=.01,sr=-a(qt*k),Qt=v(qt*k);return bt.radius=function(fr){return arguments.length?(nt=a(We=fr*k),lt=v(We),_t(We,ze)):We*S},bt.lobes=function(fr){return arguments.length?_t(We,ze=+fr):ze},bt.stream=function(fr){var Er=bt.rotate(),Hr=Tt(fr),en=(bt.rotate([0,0]),Tt(fr));return bt.rotate(Er),Hr.sphere=function(){en.polygonStart(),en.lineStart();for(var _n=0,Pn=2*m/ze,Zn=0;_n<ze;++_n,Zn-=Pn)en.point(o(Qt*a(Zn),sr)*S,z(Qt*v(Zn))*S),en.point(o(lt*a(Zn-Pn/2),nt)*S,z(lt*v(Zn-Pn/2))*S);en.lineEnd(),en.polygonEnd()},Hr},bt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Gr(ze,We,nt,lt,_t,bt,Tt,qt){arguments.length<8&&(qt=0);function sr(Qt,fr){if(!fr)return[ze*Qt/m,0];var Er=fr*fr,Hr=ze+Er*(We+Er*(nt+Er*lt)),en=fr*(_t-1+Er*(bt-qt+Er*Tt)),_n=(Hr*Hr+en*en)/(2*en),Pn=Qt*z(Hr/_n)/m;return[_n*v(Pn),fr*(1+Er*qt)+_n*(1-a(Pn))]}return sr.invert=function(Qt,fr){var Er=m*Qt/ze,Hr=fr,en,_n,Pn=50;do{var Zn=Hr*Hr,ma=ze+Zn*(We+Zn*(nt+Zn*lt)),ba=Hr*(_t-1+Zn*(bt-qt+Zn*Tt)),Za=ma*ma+ba*ba,Wa=2*ba,ei=Za/Wa,fi=ei*ei,oo=z(ma/ei)/m,ri=Er*oo,Hi=ma*ma,co=(2*We+Zn*(4*nt+Zn*6*lt))*Hr,_o=_t+Zn*(3*bt+Zn*5*Tt),xi=2*(ma*co+ba*(_o-1)),Ai=2*(_o-1),ms=(xi*Wa-Za*Ai)/(Wa*Wa),go=a(ri),Io=v(ri),jo=ei*go,he=ei*Io,Te=Er/m*(1/R(1-Hi/fi))*(co*ei-ma*ms)/fi,Le=he-Qt,Be=Hr*(1+Zn*qt)+ei-jo-fr,Ne=ms*Io+jo*Te,Ke=jo*oo,mt=1+ms-(ms*go-he*Te),vt=he*oo,Ct=Ne*vt-mt*Ke;if(!Ct)break;Er-=en=(Be*Ne-Le*mt)/Ct,Hr-=_n=(Le*vt-Be*Ke)/Ct}while((w(en)>g||w(_n)>g)&&--Pn>0);return[Er,Hr]},sr}var Ar=Gr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function nn(){return l.geoProjection(Ar).scale(149.995)}var fn=Gr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Xr(){return l.geoProjection(fn).scale(153.93)}var at=Gr(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ft(){return l.geoProjection(at).scale(130.945)}function er(ze,We){var nt=ze*ze,lt=We*We;return[ze*(1-.162388*lt)*(.87-952426e-9*nt*nt),We*(1+lt/12)]}er.invert=function(ze,We){var nt=ze,lt=We,_t=50,bt;do{var Tt=lt*lt;lt-=bt=(lt*(1+Tt/12)-We)/(1+Tt/4)}while(w(bt)>g&&--_t>0);_t=50,ze/=1-.162388*Tt;do{var qt=(qt=nt*nt)*qt;nt-=bt=(nt*(.87-952426e-9*qt)-ze)/(.87-.00476213*qt)}while(w(bt)>g&&--_t>0);return[nt,lt]};function hr(){return l.geoProjection(er).scale(131.747)}var Yr=Gr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function zr(){return l.geoProjection(Yr).scale(131.087)}function Pr(ze){var We=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var bt=lt>0?-.5:.5,Tt=ze(lt+bt*m,_t);return Tt[0]-=bt*We,Tt}return ze.invert&&(nt.invert=function(lt,_t){var bt=lt>0?-.5:.5,Tt=ze.invert(lt+bt*We,_t),qt=Tt[0]-bt*m;return qt<-m?qt+=2*m:qt>m&&(qt-=2*m),Tt[0]=qt,Tt}),nt}function br(ze,We){var nt=p(ze),lt=p(We),_t=a(We),bt=a(ze)*_t,Tt=v(ze)*_t,qt=v(lt*We);ze=w(o(Tt,qt)),We=z(bt),w(ze-M)>g&&(ze%=M);var sr=jr(ze>m/4?M-ze:ze,We);return ze>m/4&&(qt=sr[0],sr[0]=-sr[1],sr[1]=-qt),sr[0]*=nt,sr[1]*=-lt,sr}br.invert=function(ze,We){w(ze)>1&&(ze=p(ze)*2-ze),w(We)>1&&(We=p(We)*2-We);var nt=p(ze),lt=p(We),_t=-nt*ze,bt=-lt*We,Tt=bt/_t<1,qt=zn(Tt?bt:_t,Tt?_t:bt),sr=qt[0],Qt=qt[1],fr=a(Qt);return Tt&&(sr=-M-sr),[nt*(o(v(sr)*fr,-v(Qt))+m),lt*z(a(sr)*fr)]};function jr(ze,We){if(We===M)return[0,0];var nt=v(We),lt=nt*nt,_t=lt*lt,bt=1+_t,Tt=1+3*_t,qt=1-_t,sr=z(1/R(bt)),Qt=qt+lt*bt*sr,fr=(1-nt)/Qt,Er=R(fr),Hr=fr*bt,en=R(Hr),_n=Er*qt,Pn,Zn;if(ze===0)return[0,-(_n+lt*en)];var ma=a(We),ba=1/ma,Za=2*nt*ma,Wa=(-3*lt+sr*Tt)*Za,ei=(-Qt*ma-(1-nt)*Wa)/(Qt*Qt),fi=.5*ei/Er,oo=qt*fi-2*lt*Er*Za,ri=lt*bt*ei+fr*Tt*Za,Hi=-ba*Za,co=-ba*ri,_o=-2*ba*oo,xi=4*ze/m,Ai;if(ze>.222*m||We<m/4&&ze>.175*m){if(Pn=(_n+lt*R(Hr*(1+_t)-_n*_n))/(1+_t),ze>m/4)return[Pn,Pn];var ms=Pn,go=.5*Pn;Pn=.5*(go+ms),Zn=50;do{var Io=R(Hr-Pn*Pn),jo=Pn*(_o+Hi*Io)+co*z(Pn/en)-xi;if(!jo)break;jo<0?go=Pn:ms=Pn,Pn=.5*(go+ms)}while(w(ms-go)>g&&--Zn>0)}else{Pn=g,Zn=25;do{var he=Pn*Pn,Te=R(Hr-he),Le=_o+Hi*Te,Be=Pn*Le+co*z(Pn/en)-xi,Ne=Le+(co-Hi*he)/Te;Pn-=Ai=Te?Be/Ne:0}while(w(Ai)>g&&--Zn>0)}return[Pn,-_n-lt*R(Hr-Pn*Pn)]}function zn(ze,We){for(var nt=0,lt=1,_t=.5,bt=50;;){var Tt=_t*_t,qt=R(_t),sr=z(1/R(1+Tt)),Qt=1-Tt+_t*(1+Tt)*sr,fr=(1-qt)/Qt,Er=R(fr),Hr=fr*(1+Tt),en=Er*(1-Tt),_n=Hr-ze*ze,Pn=R(_n),Zn=We+en+_t*Pn;if(w(lt-nt)<A||--bt==0||Zn===0)break;Zn>0?nt=_t:lt=_t,_t=.5*(nt+lt)}if(!bt)return null;var ma=z(qt),ba=a(ma),Za=1/ba,Wa=2*qt*ba,ei=(-3*_t+sr*(1+3*Tt))*Wa,fi=(-Qt*ba-(1-qt)*ei)/(Qt*Qt),oo=.5*fi/Er,ri=(1-Tt)*oo-2*_t*Er*Wa,Hi=-2*Za*ri,co=-Za*Wa,_o=-Za*(_t*(1+Tt)*fi+fr*(1+3*Tt)*Wa);return[m/4*(ze*(Hi+co*Pn)+_o*z(ze/R(Hr))),ma]}function kn(){return l.geoProjection(Pr(br)).scale(239.75)}function ta(ze,We,nt){var lt,_t,bt;return ze?(lt=ia(ze,nt),We?(_t=ia(We,1-nt),bt=_t[1]*_t[1]+nt*lt[0]*lt[0]*_t[0]*_t[0],[[lt[0]*_t[2]/bt,lt[1]*lt[2]*_t[0]*_t[1]/bt],[lt[1]*_t[1]/bt,-lt[0]*lt[2]*_t[0]*_t[2]/bt],[lt[2]*_t[1]*_t[2]/bt,-nt*lt[0]*lt[1]*_t[0]/bt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(_t=ia(We,1-nt),[[0,_t[0]/_t[1]],[1/_t[1],0],[_t[2]/_t[1],0]])}function ia(ze,We){var nt,lt,_t,bt,Tt;if(We<g)return bt=v(ze),lt=a(ze),nt=We*(ze-bt*lt)/4,[bt-nt*lt,lt+nt*bt,1-We*bt*bt/2,ze-nt];if(We>=1-g)return nt=(1-We)/4,lt=F(ze),bt=D(ze),_t=1/lt,Tt=lt*O(ze),[bt+nt*(Tt-ze)/(lt*lt),_t-nt*bt*_t*(Tt-ze),_t+nt*bt*_t*(Tt+ze),2*e(n(ze))-M+nt*(Tt-ze)/lt];var qt=[1,0,0,0,0,0,0,0,0],sr=[R(We),0,0,0,0,0,0,0,0],Qt=0;for(lt=R(1-We),Tt=1;w(sr[Qt]/qt[Qt])>g&&Qt<8;)nt=qt[Qt++],sr[Qt]=(nt-lt)/2,qt[Qt]=(nt+lt)/2,lt=R(nt*lt),Tt*=2;_t=Tt*qt[Qt]*ze;do bt=sr[Qt]*v(lt=_t)/qt[Qt],_t=(z(bt)+_t)/2;while(--Qt);return[v(_t),bt=a(_t),bt/a(_t-lt),_t]}function Aa(ze,We,nt){var lt=w(ze),_t=w(We),bt=O(_t);if(lt){var Tt=1/v(lt),qt=1/(y(lt)*y(lt)),sr=-(qt+nt*(bt*bt*Tt*Tt)-1+nt),Qt=(nt-1)*qt,fr=(-sr+R(sr*sr-4*Qt))/2;return[ya(e(1/R(fr)),nt)*p(ze),ya(e(R((fr/qt-1)/nt)),1-nt)*p(We)]}return[0,ya(e(bt),1-nt)*p(We)]}function ya(ze,We){if(!We)return ze;if(We===1)return u(y(ze/2+_));for(var nt=1,lt=R(1-We),_t=R(We),bt=0;w(_t)>g;bt++){if(ze%m){var Tt=e(lt*y(ze)/nt);Tt<0&&(Tt+=m),ze+=Tt+~~(ze/m)*m}else ze+=ze;_t=(nt+lt)/2,lt=R(nt*lt),_t=((nt=_t)-lt)/2}return ze/(f(2,bt)*nt)}function pr(ze,We){var nt=(x-1)/(x+1),lt=R(1-nt*nt),_t=ya(M,lt*lt),bt=-1,Tt=u(y(m/4+w(We)/2)),qt=n(bt*Tt)/R(nt),sr=vn(qt*a(bt*ze),qt*v(bt*ze)),Qt=Aa(sr[0],sr[1],lt*lt);return[-Qt[1],(We>=0?1:-1)*(.5*_t-Qt[0])]}function vn(ze,We){var nt=ze*ze,lt=We+1,_t=1-nt-We*We;return[.5*((ze>=0?M:-M)-o(_t,2*ze)),-.25*u(_t*_t+4*nt)+.5*u(lt*lt+nt)]}function $r(ze,We){var nt=We[0]*We[0]+We[1]*We[1];return[(ze[0]*We[0]+ze[1]*We[1])/nt,(ze[1]*We[0]-ze[0]*We[1])/nt]}pr.invert=function(ze,We){var nt=(x-1)/(x+1),lt=R(1-nt*nt),_t=ya(M,lt*lt),bt=-1,Tt=ta(.5*_t-We,-ze,lt*lt),qt=$r(Tt[0],Tt[1]),sr=o(qt[1],qt[0])/bt;return[sr,2*e(n(.5/bt*u(nt*qt[0]*qt[0]+nt*qt[1]*qt[1])))-M]};function Fn(){return l.geoProjection(Pr(pr)).scale(151.496)}function Nn(ze){var We=v(ze),nt=a(ze),lt=ca(ze);lt.invert=ca(-ze);function _t(bt,Tt){var qt=lt(bt,Tt);bt=qt[0],Tt=qt[1];var sr=v(Tt),Qt=a(Tt),fr=a(bt),Er=I(We*sr+nt*Qt*fr),Hr=v(Er),en=w(Hr)>g?Er/Hr:1;return[en*nt*v(bt),(w(bt)>M?en:-en)*(We*Qt-nt*sr*fr)]}return _t.invert=function(bt,Tt){var qt=R(bt*bt+Tt*Tt),sr=-v(qt),Qt=a(qt),fr=qt*Qt,Er=-Tt*sr,Hr=qt*We,en=R(fr*fr+Er*Er-Hr*Hr),_n=o(fr*Hr+Er*en,Er*Hr-fr*en),Pn=(qt>M?-1:1)*o(bt*sr,qt*a(_n)*Qt+Tt*v(_n)*sr);return lt.invert(Pn,_n)},_t}function ca(ze){var We=v(ze),nt=a(ze);return function(lt,_t){var bt=a(_t),Tt=a(lt)*bt,qt=v(lt)*bt,sr=v(_t);return[o(qt,Tt*nt-sr*We),z(sr*nt+Tt*We)]}}function ra(){var ze=0,We=l.geoProjectionMutator(Nn),nt=We(ze),lt=nt.rotate,_t=nt.stream,bt=l.geoCircle();return nt.parallel=function(Tt){if(!arguments.length)return ze*S;var qt=nt.rotate();return We(ze=Tt*k).rotate(qt)},nt.rotate=function(Tt){return arguments.length?(lt.call(nt,[Tt[0],Tt[1]-ze*S]),bt.center([-Tt[0],-Tt[1]]),nt):(Tt=lt.call(nt),Tt[1]+=ze*S,Tt)},nt.stream=function(Tt){return Tt=_t(Tt),Tt.sphere=function(){Tt.polygonStart();var qt=.01,sr=bt.radius(90-qt)().coordinates[0],Qt=sr.length-1,fr=-1,Er;for(Tt.lineStart();++fr<Qt;)Tt.point((Er=sr[fr])[0],Er[1]);for(Tt.lineEnd(),sr=bt.radius(90+qt)().coordinates[0],Qt=sr.length-1,Tt.lineStart();--fr>=0;)Tt.point((Er=sr[fr])[0],Er[1]);Tt.lineEnd(),Tt.polygonEnd()},Tt},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var Un=3,ua=z(1-1/Un)*S,da=Ot(0);function ur(ze){var We=ua*k,nt=je(m,We)[0]-je(-m,We)[0],lt=da(0,We)[1],_t=je(0,We)[1],bt=c-_t,Tt=L/ze,qt=4/L,sr=lt+bt*bt*4/L;function Qt(fr,Er){var Hr,en=w(Er);if(en>We){var _n=i(ze-1,s(0,r((fr+m)/Tt)));fr+=m*(ze-1)/ze-_n*Tt,Hr=je(fr,en),Hr[0]=Hr[0]*L/nt-L*(ze-1)/(2*ze)+_n*L/ze,Hr[1]=lt+(Hr[1]-_t)*4*bt/L,Er<0&&(Hr[1]=-Hr[1])}else Hr=da(fr,Er);return Hr[0]*=qt,Hr[1]/=sr,Hr}return Qt.invert=function(fr,Er){fr/=qt,Er*=sr;var Hr=w(Er);if(Hr>lt){var en=i(ze-1,s(0,r((fr+m)/Tt)));fr=(fr+m*(ze-1)/ze-en*Tt)*nt/L;var _n=je.invert(fr,.25*(Hr-lt)*L/bt+_t);return _n[0]-=m*(ze-1)/ze-en*Tt,Er<0&&(_n[1]=-_n[1]),_n}return da.invert(fr,Er)},Qt}function Rr(ze,We){return[ze,We&1?90-g:ua]}function on(ze,We){return[ze,We&1?-90+g:-ua]}function rn(ze){return[ze[0]*(1-g),ze[1]]}function gn(ze){var We=[].concat(b.range(-180,180+ze/2,ze).map(Rr),b.range(180,-180-ze/2,-ze).map(on));return{type:"Polygon",coordinates:[ze===180?We.map(rn):We]}}function wn(){var ze=4,We=l.geoProjectionMutator(ur),nt=We(ze),lt=nt.stream;return nt.lobes=function(_t){return arguments.length?We(ze=+_t):ze},nt.stream=function(_t){var bt=nt.rotate(),Tt=lt(_t),qt=(nt.rotate([0,0]),lt(_t));return nt.rotate(bt),Tt.sphere=function(){l.geoStream(gn(180/ze),qt)},Tt},nt.scale(239.75)}function pn(ze){var We=1+ze,nt=v(1/We),lt=z(nt),_t=2*R(m/(bt=m+4*lt*We)),bt,Tt=.5*_t*(We+R(ze*(2+ze))),qt=ze*ze,sr=We*We;function Qt(fr,Er){var Hr=1-v(Er),en,_n;if(Hr&&Hr<2){var Pn=M-Er,Zn=25,ma;do{var ba=v(Pn),Za=a(Pn),Wa=lt+o(ba,We-Za),ei=1+sr-2*We*Za;Pn-=ma=(Pn-qt*lt-We*ba+ei*Wa-.5*Hr*bt)/(2*We*ba*Wa)}while(w(ma)>A&&--Zn>0);en=_t*R(ei),_n=fr*Wa/m}else en=_t*(ze+Hr),_n=fr*lt/m;return[en*v(_n),Tt-en*a(_n)]}return Qt.invert=function(fr,Er){var Hr=fr*fr+(Er-=Tt)*Er,en=(1+sr-Hr/(_t*_t))/(2*We),_n=I(en),Pn=v(_n),Zn=lt+o(Pn,We-en);return[z(fr/R(Hr))*m/Zn,z(1-2*(_n-qt*lt-We*Pn+(1+sr-2*We*en)*Zn)/bt)]},Qt}function cr(){var ze=1,We=l.geoProjectionMutator(pn),nt=We(ze);return nt.ratio=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(167.774).center([0,18.67])}var ar=.7109889596207567,Fr=.0528035274542;function Jr(ze,We){return We>-ar?(ze=Oe(ze,We),ze[1]+=Fr,ze):Ue(ze,We)}Jr.invert=function(ze,We){return We>-ar?Oe.invert(ze,We-Fr):Ue.invert(ze,We)};function En(){return l.geoProjection(Jr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Vn(ze,We){return w(We)>ar?(ze=Oe(ze,We),ze[1]-=We>0?Fr:-Fr,ze):Ue(ze,We)}Vn.invert=function(ze,We){return w(We)>ar?Oe.invert(ze,We+(We>0?Fr:-Fr)):Ue.invert(ze,We)};function Kn(){return l.geoProjection(Vn).scale(152.63)}function jn(ze,We,nt,lt){var _t=R(4*m/(2*nt+(1+ze-We/2)*v(2*nt)+(ze+We)/2*v(4*nt)+We/2*v(6*nt))),bt=R(lt*v(nt)*R((1+ze*a(2*nt)+We*a(4*nt))/(1+ze+We))),Tt=nt*sr(1);function qt(Er){return R(1+ze*a(2*Er)+We*a(4*Er))}function sr(Er){var Hr=Er*nt;return(2*Hr+(1+ze-We/2)*v(2*Hr)+(ze+We)/2*v(4*Hr)+We/2*v(6*Hr))/nt}function Qt(Er){return qt(Er)*v(Er)}var fr=function(Er,Hr){var en=nt*me(sr,Tt*v(Hr)/nt,Hr/m);isNaN(en)&&(en=nt*p(Hr));var _n=_t*qt(en);return[_n*bt*Er/m*a(en),_n/bt*v(en)]};return fr.invert=function(Er,Hr){var en=me(Qt,Hr*bt/_t);return[Er*m/(a(en)*_t*bt*qt(en)),z(nt*sr(en/nt)/Tt)]},nt===0&&(_t=R(lt/m),fr=function(Er,Hr){return[Er*_t,v(Hr)/_t]},fr.invert=function(Er,Hr){return[Er/_t,z(Hr*_t)]}),fr}function Bn(){var ze=1,We=0,nt=45*k,lt=2,_t=l.geoProjectionMutator(jn),bt=_t(ze,We,nt,lt);return bt.a=function(Tt){return arguments.length?_t(ze=+Tt,We,nt,lt):ze},bt.b=function(Tt){return arguments.length?_t(ze,We=+Tt,nt,lt):We},bt.psiMax=function(Tt){return arguments.length?_t(ze,We,nt=+Tt*k,lt):nt*S},bt.ratio=function(Tt){return arguments.length?_t(ze,We,nt,lt=+Tt):lt},bt.scale(180.739)}function mn(ze,We,nt,lt,_t,bt,Tt,qt,sr,Qt,fr){if(fr.nanEncountered)return NaN;var Er,Hr,en,_n,Pn,Zn,ma,ba,Za,Wa;if(Er=nt-We,Hr=ze(We+Er*.25),en=ze(nt-Er*.25),isNaN(Hr)){fr.nanEncountered=!0;return}if(isNaN(en)){fr.nanEncountered=!0;return}return _n=Er*(lt+4*Hr+_t)/12,Pn=Er*(_t+4*en+bt)/12,Zn=_n+Pn,Wa=(Zn-Tt)/15,Qt>sr?(fr.maxDepthCount++,Zn+Wa):Math.abs(Wa)<qt?Zn+Wa:(ma=We+Er*.5,ba=mn(ze,We,ma,lt,Hr,_t,_n,qt*.5,sr,Qt+1,fr),isNaN(ba)?(fr.nanEncountered=!0,NaN):(Za=mn(ze,ma,nt,_t,en,bt,Pn,qt*.5,sr,Qt+1,fr),isNaN(Za)?(fr.nanEncountered=!0,NaN):ba+Za))}function Rn(ze,We,nt,lt,_t){var bt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),_t===void 0&&(_t=20);var Tt=ze(We),qt=ze(.5*(We+nt)),sr=ze(nt),Qt=(Tt+4*qt+sr)*(nt-We)/6,fr=mn(ze,We,nt,Tt,qt,sr,Qt,lt,_t,1,bt);return fr}function Yn(ze,We,nt){function lt(en){return ze+(1-ze)*f(1-f(en,We),1/We)}function _t(en){return Rn(lt,0,en,1e-4)}for(var bt=1/_t(1),Tt=1e3,qt=(1+1e-8)*bt,sr=[],Qt=0;Qt<=Tt;Qt++)sr.push(_t(Qt/Tt)*qt);function fr(en){var _n=0,Pn=Tt,Zn=Tt>>1;do sr[Zn]>en?Pn=Zn:_n=Zn,Zn=_n+Pn>>1;while(Zn>_n);var ma=sr[Zn+1]-sr[Zn];return ma&&(ma=(en-sr[Zn+1])/ma),(Zn+1+ma)/Tt}var Er=2*fr(1)/m*bt/nt,Hr=function(en,_n){var Pn=fr(w(v(_n))),Zn=lt(Pn)*en;return Pn/=Er,[Zn,_n>=0?Pn:-Pn]};return Hr.invert=function(en,_n){var Pn;return _n*=Er,w(_n)<1&&(Pn=p(_n)*z(_t(w(_n))*bt)),[en/lt(w(_n)),Pn]},Hr}function la(){var ze=0,We=2.5,nt=1.183136,lt=l.geoProjectionMutator(Yn),_t=lt(ze,We,nt);return _t.alpha=function(bt){return arguments.length?lt(ze=+bt,We,nt):ze},_t.k=function(bt){return arguments.length?lt(ze,We=+bt,nt):We},_t.gamma=function(bt){return arguments.length?lt(ze,We,nt=+bt):nt},_t.scale(152.63)}function Ga(ze,We){return w(ze[0]-We[0])<g&&w(ze[1]-We[1])<g}function ka(ze,We){for(var nt=-1,lt=ze.length,_t=ze[0],bt,Tt,qt,sr=[];++nt<lt;){bt=ze[nt],Tt=(bt[0]-_t[0])/We,qt=(bt[1]-_t[1])/We;for(var Qt=0;Qt<We;++Qt)sr.push([_t[0]+Qt*Tt,_t[1]+Qt*qt]);_t=bt}return sr.push(bt),sr}function il(ze){var We=[],nt,lt,_t,bt,Tt,qt,sr,Qt=ze[0].length;for(sr=0;sr<Qt;++sr)nt=ze[0][sr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],qt=nt[2][1],We.push(ka([[lt+g,_t+g],[lt+g,bt-g],[Tt-g,bt-g],[Tt-g,qt+g]],30));for(sr=ze[1].length-1;sr>=0;--sr)nt=ze[1][sr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],qt=nt[2][1],We.push(ka([[Tt-g,qt-g],[Tt-g,bt+g],[lt+g,bt+g],[lt+g,_t-g]],30));return{type:"Polygon",coordinates:[b.merge(We)]}}function No(ze,We,nt){var lt,_t;function bt(sr,Qt){for(var fr=Qt<0?-1:1,Er=We[+(Qt<0)],Hr=0,en=Er.length-1;Hr<en&&sr>Er[Hr][2][0];++Hr);var _n=ze(sr-Er[Hr][1][0],Qt);return _n[0]+=ze(Er[Hr][1][0],fr*Qt>fr*Er[Hr][0][1]?Er[Hr][0][1]:Qt)[0],_n}nt?bt.invert=nt(bt):ze.invert&&(bt.invert=function(sr,Qt){for(var fr=_t[+(Qt<0)],Er=We[+(Qt<0)],Hr=0,en=fr.length;Hr<en;++Hr){var _n=fr[Hr];if(_n[0][0]<=sr&&sr<_n[1][0]&&_n[0][1]<=Qt&&Qt<_n[1][1]){var Pn=ze.invert(sr-ze(Er[Hr][1][0],0)[0],Qt);return Pn[0]+=Er[Hr][1][0],Ga(bt(Pn[0],Pn[1]),[sr,Qt])?Pn:null}}});var Tt=l.geoProjection(bt),qt=Tt.stream;return Tt.stream=function(sr){var Qt=Tt.rotate(),fr=qt(sr),Er=(Tt.rotate([0,0]),qt(sr));return Tt.rotate(Qt),fr.sphere=function(){l.geoStream(lt,Er)},fr},Tt.lobes=function(sr){return arguments.length?(lt=il(sr),We=sr.map(function(Qt){return Qt.map(function(fr){return[[fr[0][0]*k,fr[0][1]*k],[fr[1][0]*k,fr[1][1]*k],[fr[2][0]*k,fr[2][1]*k]]})}),_t=We.map(function(Qt){return Qt.map(function(fr){var Er=ze(fr[0][0],fr[0][1])[0],Hr=ze(fr[2][0],fr[2][1])[0],en=ze(fr[1][0],fr[0][1])[1],_n=ze(fr[1][0],fr[1][1])[1],Pn;return en>_n&&(Pn=en,en=_n,_n=Pn),[[Er,en],[Hr,_n]]})}),Tt):We.map(function(Qt){return Qt.map(function(fr){return[[fr[0][0]*S,fr[0][1]*S],[fr[1][0]*S,fr[1][1]*S],[fr[2][0]*S,fr[2][1]*S]]})})},We!=null&&Tt.lobes(We),Tt}var es=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ls(){return No(Ie,es).scale(160.857)}var eo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Pi(){return No(Vn,eo).scale(152.63)}var Ys=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ws(){return No(Oe,Ys).scale(169.529)}var ts=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ml(){return No(Oe,ts).scale(169.529).rotate([20,0])}var Nl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function xu(){return No(Jr,Nl,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var hi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ol(){return No(Ue,hi).scale(152.63).rotate([-20,0])}function Xs(ze,We){return[3/L*ze*R(m*m/3-We*We),We]}Xs.invert=function(ze,We){return[L/3*ze/R(m*m/3-We*We),We]};function Ui(){return l.geoProjection(Xs).scale(158.837)}function So(ze){function We(nt,lt){if(w(w(lt)-M)<g)return[0,lt<0?-2:2];var _t=v(lt),bt=f((1+_t)/(1-_t),ze/2),Tt=.5*(bt+1/bt)+a(nt*=ze);return[2*v(nt)/Tt,(bt-1/bt)/Tt]}return We.invert=function(nt,lt){var _t=w(lt);if(w(_t-2)<g)return nt?null:[0,p(lt)*M];if(_t>2)return null;nt/=2,lt/=2;var bt=nt*nt,Tt=lt*lt,qt=2*lt/(1+bt+Tt);return qt=f((1+qt)/(1-qt),1/ze),[o(2*nt,1-bt-Tt)/ze,z((qt-1)/(qt+1))]},We}function Bl(){var ze=.5,We=l.geoProjectionMutator(So),nt=We(ze);return nt.spacing=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(124.75)}var _s=m/x;function Di(ze,We){return[ze*(1+R(a(We)))/2,We/(a(We/2)*a(ze/6))]}Di.invert=function(ze,We){var nt=w(ze),lt=w(We),_t=g,bt=M;lt<_s?bt*=lt/_s:_t+=6*I(_s/lt);for(var Tt=0;Tt<25;Tt++){var qt=v(bt),sr=R(a(bt)),Qt=v(bt/2),fr=a(bt/2),Er=v(_t/6),Hr=a(_t/6),en=.5*_t*(1+sr)-nt,_n=bt/(fr*Hr)-lt,Pn=sr?-.25*_t*qt/sr:0,Zn=.5*(1+sr),ma=(1+.5*bt*Qt/fr)/(fr*Hr),ba=bt/fr*(Er/6)/(Hr*Hr),Za=Pn*ba-ma*Zn,Wa=(en*ba-_n*Zn)/Za,ei=(_n*Pn-en*ma)/Za;if(bt-=Wa,_t-=ei,w(Wa)<g&&w(ei)<g)break}return[ze<0?-_t:_t,We<0?-bt:bt]};function Sl(){return l.geoProjection(Di).scale(97.2672)}function Ji(ze,We){var nt=ze*ze,lt=We*We;return[ze*(.975534+lt*(-.119161+nt*-.0143059+lt*-.0547009)),We*(1.00384+nt*(.0802894+lt*-.02855+nt*199025e-9)+lt*(.0998909+lt*-.0491032))]}Ji.invert=function(ze,We){var nt=p(ze)*m,lt=We/2,_t=50;do{var bt=nt*nt,Tt=lt*lt,qt=nt*lt,sr=nt*(.975534+Tt*(-.119161+bt*-.0143059+Tt*-.0547009))-ze,Qt=lt*(1.00384+bt*(.0802894+Tt*-.02855+bt*199025e-9)+Tt*(.0998909+Tt*-.0491032))-We,fr=.975534-Tt*(.119161+3*bt*.0143059+Tt*.0547009),Er=-qt*(2*.119161+4*.0547009*Tt+2*.0143059*bt),Hr=qt*(2*.0802894+4*199025e-9*bt+2*-.02855*Tt),en=1.00384+bt*(.0802894+199025e-9*bt)+Tt*(3*(.0998909-.02855*bt)-5*.0491032*Tt),_n=Er*Hr-en*fr,Pn=(Qt*Er-sr*en)/_n,Zn=(sr*Hr-Qt*fr)/_n;nt-=Pn,lt-=Zn}while((w(Pn)>g||w(Zn)>g)&&--_t>0);return _t&&[nt,lt]};function Fi(){return l.geoProjection(Ji).scale(139.98)}function io(ze,We){return[v(ze)/a(We),y(We)*a(ze)]}io.invert=function(ze,We){var nt=ze*ze,lt=We*We,_t=lt+1,bt=nt+_t,Tt=ze?T*R((bt-R(bt*bt-4*nt))/nt):1/R(_t);return[z(ze*Tt),p(We)*I(Tt)]};function Qi(){return l.geoProjection(io).scale(144.049).clipAngle(90-.001)}function us(ze){var We=a(ze),nt=y(_+ze/2);function lt(_t,bt){var Tt=bt-ze,qt=w(Tt)<g?_t*We:w(qt=_+bt/2)<g||w(w(qt)-M)<g?0:_t*Tt/u(y(qt)/nt);return[qt,Tt]}return lt.invert=function(_t,bt){var Tt,qt=bt+ze;return[w(bt)<g?_t/We:w(Tt=_+qt/2)<g||w(w(Tt)-M)<g?0:_t*u(y(Tt)/nt)/bt,qt]},lt}function sl(){return qe(us).parallel(40).scale(158.837)}function Bu(ze,We){return[ze,1.25*u(y(_+.4*We))]}Bu.invert=function(ze,We){return[ze,2.5*e(n(.8*We))-.625*m]};function rs(){return l.geoProjection(Bu).scale(108.318)}function Uu(ze){var We=ze.length-1;function nt(lt,_t){for(var bt=a(_t),Tt=2/(1+bt*a(lt)),qt=Tt*bt*v(lt),sr=Tt*v(_t),Qt=We,fr=ze[Qt],Er=fr[0],Hr=fr[1],en;--Qt>=0;)fr=ze[Qt],Er=fr[0]+qt*(en=Er)-sr*Hr,Hr=fr[1]+qt*Hr+sr*en;return Er=qt*(en=Er)-sr*Hr,Hr=qt*Hr+sr*en,[Er,Hr]}return nt.invert=function(lt,_t){var bt=20,Tt=lt,qt=_t;do{for(var sr=We,Qt=ze[sr],fr=Qt[0],Er=Qt[1],Hr=0,en=0,_n;--sr>=0;)Qt=ze[sr],Hr=fr+Tt*(_n=Hr)-qt*en,en=Er+Tt*en+qt*_n,fr=Qt[0]+Tt*(_n=fr)-qt*Er,Er=Qt[1]+Tt*Er+qt*_n;Hr=fr+Tt*(_n=Hr)-qt*en,en=Er+Tt*en+qt*_n,fr=Tt*(_n=fr)-qt*Er-lt,Er=Tt*Er+qt*_n-_t;var Pn=Hr*Hr+en*en,Zn,ma;Tt-=Zn=(fr*Hr+Er*en)/Pn,qt-=ma=(Er*Hr-fr*en)/Pn}while(w(Zn)+w(ma)>g*g&&--bt>0);if(bt){var ba=R(Tt*Tt+qt*qt),Za=2*e(ba*.5),Wa=v(Za);return[o(Tt*Wa,ba*a(Za)),ba?z(qt*Wa/ba):0]}},nt}var js=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ko=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ff=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Zs=[[.9245,0],[0,0],[.01943,0]],Ps=[[.721316,0],[0,0],[-.00881625,-.00617325]];function nu(){return Ds(js,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function cf(){return Ds(ko,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function hf(){return Ds(ff,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ll(){return Ds(Zs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function au(){return Ds(Ps,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ds(ze,We){var nt=l.geoProjection(Uu(ze)).rotate(We).clipAngle(90),lt=l.geoRotation(We),_t=nt.center;return delete nt.rotate,nt.center=function(bt){return arguments.length?_t(lt(bt)):lt.invert(_t())},nt}var bu=R(6),kl=R(7);function _u(ze,We){var nt=z(7*v(We)/(3*bu));return[bu*ze*(2*a(2*nt/3)-1)/kl,9*v(nt/3)/kl]}_u.invert=function(ze,We){var nt=3*z(We*kl/9);return[ze*kl/(bu*(2*a(2*nt/3)-1)),z(v(nt)*3*bu/7)]};function Vu(){return l.geoProjection(_u).scale(164.859)}function iu(ze,We){for(var nt=(1+T)*v(We),lt=We,_t=0,bt;_t<25&&(lt-=bt=(v(lt/2)+v(lt)-nt)/(.5*a(lt/2)+a(lt)),!(w(bt)<g));_t++);return[ze*(1+2*a(lt)/a(lt/2))/(3*x),2*R(3)*v(lt/2)/R(2+x)]}iu.invert=function(ze,We){var nt=We*R(2+x)/(2*R(3)),lt=2*z(nt);return[3*x*ze/(1+2*a(lt)/a(lt/2)),z((nt+v(lt))/(1+T))]};function vf(){return l.geoProjection(iu).scale(188.209)}function ul(ze,We){for(var nt=R(6/(4+m)),lt=(1+m/4)*v(We),_t=We/2,bt=0,Tt;bt<25&&(_t-=Tt=(_t/2+v(_t)-lt)/(.5+a(_t)),!(w(Tt)<g));bt++);return[nt*(.5+a(_t))*ze/1.5,nt*_t]}ul.invert=function(ze,We){var nt=R(6/(4+m)),lt=We/nt;return w(w(lt)-M)<g&&(lt=lt<0?-M:M),[1.5*ze/(nt*(.5+a(lt))),z((lt/2+v(lt))/(1+m/4))]};function wu(){return l.geoProjection(ul).scale(166.518)}function ou(ze,We){var nt=We*We,lt=nt*nt,_t=nt*lt;return[ze*(.84719-.13063*nt+_t*_t*(-.04515+.05494*nt-.02326*lt+.00331*_t)),We*(1.01183+lt*lt*(-.02625+.01926*nt-.00396*lt))]}ou.invert=function(ze,We){var nt=We,lt=25,_t,bt,Tt,qt;do bt=nt*nt,Tt=bt*bt,nt-=_t=(nt*(1.01183+Tt*Tt*(-.02625+.01926*bt-.00396*Tt))-We)/(1.01183+Tt*Tt*(9*-.02625+11*.01926*bt+13*-.00396*Tt));while(w(_t)>A&&--lt>0);return bt=nt*nt,Tt=bt*bt,qt=bt*Tt,[ze/(.84719-.13063*bt+qt*qt*(-.04515+.05494*bt-.02326*Tt+.00331*qt)),nt]};function ws(){return l.geoProjection(ou).scale(175.295)}function Ul(ze,We){return[ze*(1+a(We))/2,2*(We-y(We/2))]}Ul.invert=function(ze,We){for(var nt=We/2,lt=0,_t=1/0;lt<10&&w(_t)>g;++lt){var bt=a(We/2);We-=_t=(We-y(We/2)-nt)/(1-.5/(bt*bt))}return[2*ze/(1+a(We)),We]};function Tu(){return l.geoProjection(Ul).scale(152.63)}var Hu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Gu(){return No(ae(1/0),Hu).rotate([20,0]).scale(152.63)}function su(ze,We){var nt=v(We),lt=a(We),_t=p(ze);if(ze===0||w(We)===M)return[0,We];if(We===0)return[ze,0];if(w(ze)===M)return[ze*lt,M*nt];var bt=m/(2*ze)-2*ze/m,Tt=2*We/m,qt=(1-Tt*Tt)/(nt-Tt),sr=bt*bt,Qt=qt*qt,fr=1+sr/Qt,Er=1+Qt/sr,Hr=(bt*nt/qt-bt/2)/fr,en=(Qt*nt/sr+qt/2)/Er,_n=Hr*Hr+lt*lt/fr,Pn=en*en-(Qt*nt*nt/sr+qt*nt-1)/Er;return[M*(Hr+R(_n)*_t),M*(en+R(Pn<0?0:Pn)*p(-We*bt)*_t)]}su.invert=function(ze,We){ze/=M,We/=M;var nt=ze*ze,lt=We*We,_t=nt+lt,bt=m*m;return[ze?(_t-1+R((1-_t)*(1-_t)+4*nt))/(2*ze)*M:0,me(function(Tt){return _t*(m*v(Tt)-2*Tt)*m+4*Tt*Tt*(We-v(Tt))+2*m*Tt-bt*We},0)]};function pf(){return l.geoProjection(su).scale(127.267)}var Yu=1.0148,ns=.23185,El=-.14499,Cl=.02406,Au=Yu,Ts=5*ns,Eo=7*El,lu=9*Cl,Rs=1.790857183;function Is(ze,We){var nt=We*We;return[ze,We*(Yu+nt*nt*(ns+nt*(El+Cl*nt)))]}Is.invert=function(ze,We){We>Rs?We=Rs:We<-Rs&&(We=-Rs);var nt=We,lt;do{var _t=nt*nt;nt-=lt=(nt*(Yu+_t*_t*(ns+_t*(El+Cl*_t)))-We)/(Au+_t*_t*(Ts+_t*(Eo+lu*_t)))}while(w(lt)>g);return[ze,nt]};function lo(){return l.geoProjection(Is).scale(139.319)}function Vl(ze,We){if(w(We)<g)return[ze,0];var nt=y(We),lt=ze*v(We);return[v(lt)/nt,We+(1-a(lt))/nt]}Vl.invert=function(ze,We){if(w(We)<g)return[ze,0];var nt=ze*ze+We*We,lt=We*.5,_t=10,bt;do{var Tt=y(lt),qt=1/a(lt),sr=nt-2*We*lt+lt*lt;lt-=bt=(Tt*sr+2*(lt-We))/(2+sr*qt*qt+2*(lt-We)*Tt)}while(w(bt)>g&&--_t>0);return Tt=y(lt),[(w(We)<w(lt+1/Tt)?z(ze*Tt):p(We)*p(ze)*(I(w(ze*Tt))+M))/v(lt),lt]};function Hl(){return l.geoProjection(Vl).scale(103.74)}function fl(ze,We){var nt=Ll(ze[1],ze[0]),lt=Ll(We[1],We[0]),_t=Yl(nt,lt),bt=uu(nt)/uu(lt);return Gl([1,0,ze[0][0],0,1,ze[0][1]],Gl([bt,0,0,0,bt,0],Gl([a(_t),v(_t),0,-v(_t),a(_t),0],[1,0,-We[0][0],0,1,-We[0][1]])))}function As(ze){var We=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[We*ze[4],-We*ze[1],We*(ze[1]*ze[5]-ze[2]*ze[4]),-We*ze[3],We*ze[0],We*(ze[2]*ze[3]-ze[0]*ze[5])]}function Gl(ze,We){return[ze[0]*We[0]+ze[1]*We[3],ze[0]*We[1]+ze[1]*We[4],ze[0]*We[2]+ze[1]*We[5]+ze[2],ze[3]*We[0]+ze[4]*We[3],ze[3]*We[1]+ze[4]*We[4],ze[3]*We[2]+ze[4]*We[5]+ze[5]]}function Ll(ze,We){return[ze[0]-We[0],ze[1]-We[1]]}function uu(ze){return R(ze[0]*ze[0]+ze[1]*ze[1])}function Yl(ze,We){return o(ze[0]*We[1]-ze[1]*We[0],ze[0]*We[0]+ze[1]*We[1])}function cl(ze,We,nt){lt(ze,{transform:null});function lt(Qt,fr){if(Qt.edges=Mu(Qt.face),fr.face){var Er=Qt.shared=zf(Qt.face,fr.face),Hr=fl(Er.map(fr.project),Er.map(Qt.project));Qt.transform=fr.transform?Gl(fr.transform,Hr):Hr;for(var en=fr.edges,_n=0,Pn=en.length;_n<Pn;++_n)fs(Er[0],en[_n][1])&&fs(Er[1],en[_n][0])&&(en[_n]=Qt),fs(Er[0],en[_n][0])&&fs(Er[1],en[_n][1])&&(en[_n]=Qt);for(en=Qt.edges,_n=0,Pn=en.length;_n<Pn;++_n)fs(Er[0],en[_n][0])&&fs(Er[1],en[_n][1])&&(en[_n]=fr),fs(Er[0],en[_n][1])&&fs(Er[1],en[_n][0])&&(en[_n]=fr)}else Qt.transform=fr.transform;return Qt.children&&Qt.children.forEach(function(Zn){lt(Zn,Qt)}),Qt}function _t(Qt,fr){var Er=We(Qt,fr),Hr=Er.project([Qt*S,fr*S]),en;return(en=Er.transform)?[en[0]*Hr[0]+en[1]*Hr[1]+en[2],-(en[3]*Hr[0]+en[4]*Hr[1]+en[5])]:(Hr[1]=-Hr[1],Hr)}Pl(ze)&&(_t.invert=function(Qt,fr){var Er=bt(ze,[Qt,-fr]);return Er&&(Er[0]*=k,Er[1]*=k,Er)});function bt(Qt,fr){var Er=Qt.project.invert,Hr=Qt.transform,en=fr;if(Hr&&(Hr=As(Hr),en=[Hr[0]*en[0]+Hr[1]*en[1]+Hr[2],Hr[3]*en[0]+Hr[4]*en[1]+Hr[5]]),Er&&Qt===Tt(_n=Er(en)))return _n;for(var _n,Pn=Qt.children,Zn=0,ma=Pn&&Pn.length;Zn<ma;++Zn)if(_n=bt(Pn[Zn],fr))return _n}function Tt(Qt){return We(Qt[0]*k,Qt[1]*k)}var qt=l.geoProjection(_t),sr=qt.stream;return qt.stream=function(Qt){var fr=qt.rotate(),Er=sr(Qt),Hr=(qt.rotate([0,0]),sr(Qt));return qt.rotate(fr),Er.sphere=function(){Hr.polygonStart(),Hr.lineStart(),df(Hr,ze),Hr.lineEnd(),Hr.polygonEnd()},Er},qt.angle(nt==null?-30:nt*S)}function df(ze,We,nt){var lt,_t=We.edges,bt=_t.length,Tt,qt={type:"MultiPoint",coordinates:We.face},sr=We.face.filter(function(Pn){return w(Pn[1])!==90}),Qt=l.geoBounds({type:"MultiPoint",coordinates:sr}),fr=!1,Er=-1,Hr=Qt[1][0]-Qt[0][0],en=Hr===180||Hr===360?[(Qt[0][0]+Qt[1][0])/2,(Qt[0][1]+Qt[1][1])/2]:l.geoCentroid(qt);if(nt)for(;++Er<bt&&_t[Er]!==nt;);++Er;for(var _n=0;_n<bt;++_n)Tt=_t[(_n+Er)%bt],Array.isArray(Tt)?(fr||(ze.point((lt=l.geoInterpolate(Tt[0],en)(g))[0],lt[1]),fr=!0),ze.point((lt=l.geoInterpolate(Tt[1],en)(g))[0],lt[1])):(fr=!1,Tt!==nt&&df(ze,Tt,We))}function fs(ze,We){return ze&&We&&ze[0]===We[0]&&ze[1]===We[1]}function zf(ze,We){for(var nt,lt,_t=ze.length,bt=null,Tt=0;Tt<_t;++Tt){nt=ze[Tt];for(var qt=We.length;--qt>=0;)if(lt=We[qt],nt[0]===lt[0]&&nt[1]===lt[1]){if(bt)return[bt,nt];bt=nt}}}function Mu(ze){for(var We=ze.length,nt=[],lt=ze[We-1],_t=0;_t<We;++_t)nt.push([lt,lt=ze[_t]]);return nt}function Pl(ze){return ze.project.invert||ze.children&&ze.children.some(Pl)}var Wl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],hl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(We){return Wl[We]})});function Xl(ze){ze=ze||function(nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:nt});return l.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var We=hl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=We[nt];_t&&(_t.children||(_t.children=[])).push(We[lt])}),cl(We[0],function(nt,lt){return We[nt<-m/2?lt<0?6:4:nt<0?lt<0?2:0:nt<m/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Wu=2/R(3);function Xu(ze,We){var nt=je(ze,We);return[nt[0]*Wu,nt[1]]}Xu.invert=function(ze,We){return je.invert(ze/Wu,We)};function Ff(ze){ze=ze||function(nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:nt});return l.geoProjection(Xu).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var We=hl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=We[nt];_t&&(_t.children||(_t.children=[])).push(We[lt])}),cl(We[0],function(nt,lt){return We[nt<-m/2?lt<0?6:4:nt<0?lt<0?2:0:nt<m/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ri(ze){ze=ze||function(Tt){var qt=Tt.length===6?l.geoCentroid({type:"MultiPoint",coordinates:Tt}):Tt[0];return l.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var We=hl.map(function(Tt){for(var qt=Tt.map(cs),sr=qt.length,Qt=qt[sr-1],fr,Er=[],Hr=0;Hr<sr;++Hr)fr=qt[Hr],Er.push(as([Qt[0]*.9486832980505138+fr[0]*.31622776601683794,Qt[1]*.9486832980505138+fr[1]*.31622776601683794,Qt[2]*.9486832980505138+fr[2]*.31622776601683794]),as([fr[0]*.9486832980505138+Qt[0]*.31622776601683794,fr[1]*.9486832980505138+Qt[1]*.31622776601683794,fr[2]*.9486832980505138+Qt[2]*.31622776601683794])),Qt=fr;return Er}),nt=[],lt=[-1,0,0,1,0,1,4,5];We.forEach(function(Tt,qt){for(var sr=hl[qt],Qt=sr.length,fr=nt[qt]=[],Er=0;Er<Qt;++Er)We.push([sr[Er],Tt[(Er*2+2)%(2*Qt)],Tt[(Er*2+1)%(2*Qt)]]),lt.push(qt),fr.push(vl(cs(Tt[(Er*2+2)%(2*Qt)]),cs(Tt[(Er*2+1)%(2*Qt)])))});var _t=We.map(function(Tt){return{project:ze(Tt),face:Tt}});lt.forEach(function(Tt,qt){var sr=_t[Tt];sr&&(sr.children||(sr.children=[])).push(_t[qt])});function bt(Tt,qt){var sr=a(qt),Qt=[sr*a(Tt),sr*v(Tt),v(qt)],fr=Tt<-m/2?qt<0?6:4:Tt<0?qt<0?2:0:Tt<m/2?qt<0?3:1:qt<0?7:5,Er=nt[fr];return _t[Dl(Er[0],Qt)<0?8+3*fr:Dl(Er[1],Qt)<0?8+3*fr+1:Dl(Er[2],Qt)<0?8+3*fr+2:fr]}return cl(_t[0],bt).angle(-30).scale(110.625).center([0,45])}function Dl(ze,We){for(var nt=0,lt=ze.length,_t=0;nt<lt;++nt)_t+=ze[nt]*We[nt];return _t}function vl(ze,We){return[ze[1]*We[2]-ze[2]*We[1],ze[2]*We[0]-ze[0]*We[2],ze[0]*We[1]-ze[1]*We[0]]}function as(ze){return[o(ze[1],ze[0])*S,z(s(-1,i(1,ze[2])))*S]}function cs(ze){var We=ze[0]*k,nt=ze[1]*k,lt=a(nt);return[lt*a(We),lt*v(We),v(nt)]}function jl(){}function uo(ze){if((nt=ze.length)<4)return!1;for(var We=0,nt,lt=ze[nt-1][1]*ze[0][0]-ze[nt-1][0]*ze[0][1];++We<nt;)lt+=ze[We-1][1]*ze[We][0]-ze[We-1][0]*ze[We][1];return lt<=0}function ju(ze,We){for(var nt=We[0],lt=We[1],_t=!1,bt=0,Tt=ze.length,qt=Tt-1;bt<Tt;qt=bt++){var sr=ze[bt],Qt=sr[0],fr=sr[1],Er=ze[qt],Hr=Er[0],en=Er[1];fr>lt^en>lt&&nt<(Hr-Qt)*(lt-fr)/(en-fr)+Qt&&(_t=!_t)}return _t}function hs(ze,We){var nt=We.stream,lt;if(!nt)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":lt=Js;break;case"FeatureCollection":lt=Ks;break;default:lt=vs;break}return lt(ze,nt)}function Ks(ze,We){return{type:"FeatureCollection",features:ze.features.map(function(nt){return Js(nt,We)})}}function Js(ze,We){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:vs(ze.geometry,We)}}function zs(ze,We){return{type:"GeometryCollection",geometries:ze.geometries.map(function(nt){return vs(nt,We)})}}function vs(ze,We){if(!ze)return null;if(ze.type==="GeometryCollection")return zs(ze,We);var nt;switch(ze.type){case"Point":nt=ps;break;case"MultiPoint":nt=ps;break;case"LineString":nt=Zu;break;case"MultiLineString":nt=Zu;break;case"Polygon":nt=fu;break;case"MultiPolygon":nt=fu;break;case"Sphere":nt=fu;break;default:return null}return l.geoStream(ze,We(nt)),nt.result()}var Vi=[],Co=[],ps={point:function(ze,We){Vi.push([ze,We])},result:function(){var ze=Vi.length?Vi.length<2?{type:"Point",coordinates:Vi[0]}:{type:"MultiPoint",coordinates:Vi}:null;return Vi=[],ze}},Zu={lineStart:jl,point:function(ze,We){Vi.push([ze,We])},lineEnd:function(){Vi.length&&(Co.push(Vi),Vi=[])},result:function(){var ze=Co.length?Co.length<2?{type:"LineString",coordinates:Co[0]}:{type:"MultiLineString",coordinates:Co}:null;return Co=[],ze}},fu={polygonStart:jl,lineStart:jl,point:function(ze,We){Vi.push([ze,We])},lineEnd:function(){var ze=Vi.length;if(ze){do Vi.push(Vi[0].slice());while(++ze<4);Co.push(Vi),Vi=[]}},polygonEnd:jl,result:function(){if(!Co.length)return null;var ze=[],We=[];return Co.forEach(function(nt){uo(nt)?ze.push([nt]):We.push(nt)}),We.forEach(function(nt){var lt=nt[0];ze.some(function(_t){if(ju(_t[0],lt))return _t.push(nt),!0})||ze.push([nt])}),Co=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function Ku(ze){var We=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var bt=w(lt)<M,Tt=ze(bt?lt:lt>0?lt-m:lt+m,_t),qt=(Tt[0]-Tt[1])*T,sr=(Tt[0]+Tt[1])*T;if(bt)return[qt,sr];var Qt=We*T,fr=qt>0^sr>0?-1:1;return[fr*qt-p(sr)*Qt,fr*sr-p(qt)*Qt]}return ze.invert&&(nt.invert=function(lt,_t){var bt=(lt+_t)*T,Tt=(_t-lt)*T,qt=w(bt)<.5*We&&w(Tt)<.5*We;if(!qt){var sr=We*T,Qt=bt>0^Tt>0?-1:1,fr=-Qt*lt+(Tt>0?1:-1)*sr,Er=-Qt*_t+(bt>0?1:-1)*sr;bt=(-fr-Er)*T,Tt=(fr-Er)*T}var Hr=ze.invert(bt,Tt);return qt||(Hr[0]+=bt>0?m:-m),Hr}),l.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function xt(){return Ku(br).scale(176.423)}function It(){return Ku(pr).scale(111.48)}function nr(ze,We){if(!(0<=(We=+We)&&We<=20))throw new Error("invalid digits");function nt(Qt){var fr=Qt.length,Er=2,Hr=new Array(fr);for(Hr[0]=+Qt[0].toFixed(We),Hr[1]=+Qt[1].toFixed(We);Er<fr;)Hr[Er]=Qt[Er],++Er;return Hr}function lt(Qt){return Qt.map(nt)}function _t(Qt){for(var fr=nt(Qt[0]),Er=[fr],Hr=1;Hr<Qt.length;Hr++){var en=nt(Qt[Hr]);(en.length>2||en[0]!=fr[0]||en[1]!=fr[1])&&(Er.push(en),fr=en)}return Er.length===1&&Qt.length>1&&Er.push(nt(Qt[Qt.length-1])),Er}function bt(Qt){return Qt.map(_t)}function Tt(Qt){if(Qt==null)return Qt;var fr;switch(Qt.type){case"GeometryCollection":fr={type:"GeometryCollection",geometries:Qt.geometries.map(Tt)};break;case"Point":fr={type:"Point",coordinates:nt(Qt.coordinates)};break;case"MultiPoint":fr={type:Qt.type,coordinates:lt(Qt.coordinates)};break;case"LineString":fr={type:Qt.type,coordinates:_t(Qt.coordinates)};break;case"MultiLineString":case"Polygon":fr={type:Qt.type,coordinates:bt(Qt.coordinates)};break;case"MultiPolygon":fr={type:"MultiPolygon",coordinates:Qt.coordinates.map(bt)};break;default:return Qt}return Qt.bbox!=null&&(fr.bbox=Qt.bbox),fr}function qt(Qt){var fr={type:"Feature",properties:Qt.properties,geometry:Tt(Qt.geometry)};return Qt.id!=null&&(fr.id=Qt.id),Qt.bbox!=null&&(fr.bbox=Qt.bbox),fr}if(ze!=null)switch(ze.type){case"Feature":return qt(ze);case"FeatureCollection":{var sr={type:"FeatureCollection",features:ze.features.map(qt)};return ze.bbox!=null&&(sr.bbox=ze.bbox),sr}default:return Tt(ze)}return ze}function Jt(ze){var We=v(ze);function nt(lt,_t){var bt=We?y(lt*We/2)/We:lt/2;if(!_t)return[2*bt,-ze];var Tt=2*e(bt*v(_t)),qt=1/y(_t);return[v(Tt)*qt,_t+(1-a(Tt))*qt-ze]}return nt.invert=function(lt,_t){if(w(_t+=ze)<g)return[We?2*e(We*lt/2)/We:lt,0];var bt=lt*lt+_t*_t,Tt=0,qt=10,sr;do{var Qt=y(Tt),fr=1/a(Tt),Er=bt-2*_t*Tt+Tt*Tt;Tt-=sr=(Qt*Er+2*(Tt-_t))/(2+Er*fr*fr+2*(Tt-_t)*Qt)}while(w(sr)>g&&--qt>0);var Hr=lt*(Qt=y(Tt)),en=y(w(_t)<w(Tt+1/Qt)?z(Hr)*.5:I(Hr)*.5+m/4)/v(Tt);return[We?2*e(We*en)/We:2*en,Tt]},nt}function Cr(){return qe(Jt).scale(131.215)}var an=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];an.forEach(function(ze){ze[1]*=1.0144});function dn(ze,We){var nt=i(18,w(We)*36/m),lt=r(nt),_t=nt-lt,bt=(Er=an[lt])[0],Tt=Er[1],qt=(Er=an[++lt])[0],sr=Er[1],Qt=(Er=an[i(19,++lt)])[0],fr=Er[1],Er;return[ze*(qt+_t*(Qt-bt)/2+_t*_t*(Qt-2*qt+bt)/2),(We>0?M:-M)*(sr+_t*(fr-Tt)/2+_t*_t*(fr-2*sr+Tt)/2)]}dn.invert=function(ze,We){var nt=We/M,lt=nt*90,_t=i(18,w(lt/5)),bt=s(0,r(_t));do{var Tt=an[bt][1],qt=an[bt+1][1],sr=an[i(19,bt+2)][1],Qt=sr-Tt,fr=sr-2*qt+Tt,Er=2*(w(nt)-qt)/Qt,Hr=fr/Qt,en=Er*(1-Hr*Er*(1-2*Hr*Er));if(en>=0||bt===1){lt=(We>=0?5:-5)*(en+_t);var _n=50,Pn;do _t=i(18,w(lt)/5),bt=r(_t),en=_t-bt,Tt=an[bt][1],qt=an[bt+1][1],sr=an[i(19,bt+2)][1],lt-=(Pn=(We>=0?M:-M)*(qt+en*(sr-Tt)/2+en*en*(sr-2*qt+Tt)/2)-We)*S;while(w(Pn)>A&&--_n>0);break}}while(--bt>=0);var Zn=an[bt][0],ma=an[bt+1][0],ba=an[i(19,bt+2)][0];return[ze/(ma+en*(ba-Zn)/2+en*en*(ba-2*ma+Zn)/2),lt*k]};function Tn(){return l.geoProjection(dn).scale(152.63)}function Cn(ze){function We(nt,lt){var _t=a(lt),bt=(ze-1)/(ze-_t*a(nt));return[bt*_t*v(nt),bt*v(lt)]}return We.invert=function(nt,lt){var _t=nt*nt+lt*lt,bt=R(_t),Tt=(ze-R(1-_t*(ze+1)/(ze-1)))/((ze-1)/bt+bt/(ze-1));return[o(nt*Tt,bt*R(1-Tt*Tt)),bt?z(lt*Tt/bt):0]},We}function Hn(ze,We){var nt=Cn(ze);if(!We)return nt;var lt=a(We),_t=v(We);function bt(Tt,qt){var sr=nt(Tt,qt),Qt=sr[1],fr=Qt*_t/(ze-1)+lt;return[sr[0]*lt/fr,Qt/fr]}return bt.invert=function(Tt,qt){var sr=(ze-1)/(ze-1-qt*_t);return nt.invert(sr*Tt,sr*qt*lt)},bt}function xn(){var ze=2,We=0,nt=l.geoProjectionMutator(Hn),lt=nt(ze,We);return lt.distance=function(_t){return arguments.length?nt(ze=+_t,We):ze},lt.tilt=function(_t){return arguments.length?nt(ze,We=_t*k):We*S},lt.scale(432.147).clipAngle(I(1/ze)*S-1e-6)}var In=1e-4,Ln=1e4,Wn=-180,qn=Wn+In,Oa=180,La=Oa-In,Na=-90,Ba=Na+In,Qn=90,pa=Qn-In;function Ya(ze){return ze.length>0}function Qa(ze){return Math.floor(ze*Ln)/Ln}function pi(ze){return ze===Na||ze===Qn?[0,ze]:[Wn,Qa(ze)]}function di(ze){var We=ze[0],nt=ze[1],lt=!1;return We<=qn?(We=Wn,lt=!0):We>=La&&(We=Oa,lt=!0),nt<=Ba?(nt=Na,lt=!0):nt>=pa&&(nt=Qn,lt=!0),lt?[We,nt]:ze}function yi(ze){return ze.map(di)}function Ti(ze,We,nt){for(var lt=0,_t=ze.length;lt<_t;++lt){var bt=ze[lt].slice();nt.push({index:-1,polygon:We,ring:bt});for(var Tt=0,qt=bt.length;Tt<qt;++Tt){var sr=bt[Tt],Qt=sr[0],fr=sr[1];if(Qt<=qn||Qt>=La||fr<=Ba||fr>=pa){bt[Tt]=di(sr);for(var Er=Tt+1;Er<qt;++Er){var Hr=bt[Er],en=Hr[0],_n=Hr[1];if(en>qn&&en<La&&_n>Ba&&_n<pa)break}if(Er===Tt+1)continue;if(Tt){var Pn={index:-1,polygon:We,ring:bt.slice(0,Tt+1)};Pn.ring[Pn.ring.length-1]=pi(fr),nt[nt.length-1]=Pn}else nt.pop();if(Er>=qt)break;nt.push({index:-1,polygon:We,ring:bt=bt.slice(Er-1)}),bt[0]=pi(bt[0][1]),Tt=-1,qt=bt.length}}}}function oi(ze){var We,nt=ze.length,lt={},_t={},bt,Tt,qt,sr,Qt;for(We=0;We<nt;++We){if(bt=ze[We],Tt=bt.ring[0],sr=bt.ring[bt.ring.length-1],Tt[0]===sr[0]&&Tt[1]===sr[1]){bt.polygon.push(bt.ring),ze[We]=null;continue}bt.index=We,lt[Tt]=_t[sr]=bt}for(We=0;We<nt;++We)if(bt=ze[We],bt){if(Tt=bt.ring[0],sr=bt.ring[bt.ring.length-1],qt=_t[Tt],Qt=lt[sr],delete lt[Tt],delete _t[sr],Tt[0]===sr[0]&&Tt[1]===sr[1]){bt.polygon.push(bt.ring);continue}qt?(delete _t[Tt],delete lt[qt.ring[0]],qt.ring.pop(),ze[qt.index]=null,bt={index:-1,polygon:qt.polygon,ring:qt.ring.concat(bt.ring)},qt===Qt?bt.polygon.push(bt.ring):(bt.index=nt++,ze.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt))):Qt?(delete lt[sr],delete _t[Qt.ring[Qt.ring.length-1]],bt.ring.pop(),bt={index:nt++,polygon:Qt.polygon,ring:bt.ring.concat(Qt.ring)},ze[Qt.index]=null,ze.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt)):(bt.ring.push(bt.ring[0]),bt.polygon.push(bt.ring))}}function mo(ze){var We={type:"Feature",geometry:to(ze.geometry)};return ze.id!=null&&(We.id=ze.id),ze.bbox!=null&&(We.bbox=ze.bbox),ze.properties!=null&&(We.properties=ze.properties),We}function to(ze){if(ze==null)return ze;var We,nt,lt,_t;switch(ze.type){case"GeometryCollection":We={type:"GeometryCollection",geometries:ze.geometries.map(to)};break;case"Point":We={type:"Point",coordinates:di(ze.coordinates)};break;case"MultiPoint":case"LineString":We={type:ze.type,coordinates:yi(ze.coordinates)};break;case"MultiLineString":We={type:"MultiLineString",coordinates:ze.coordinates.map(yi)};break;case"Polygon":{var bt=[];Ti(ze.coordinates,bt,nt=[]),oi(nt),We={type:"Polygon",coordinates:bt};break}case"MultiPolygon":{nt=[],lt=-1,_t=ze.coordinates.length;for(var Tt=new Array(_t);++lt<_t;)Ti(ze.coordinates[lt],Tt[lt]=[],nt);oi(nt),We={type:"MultiPolygon",coordinates:Tt.filter(Ya)};break}default:return ze}return ze.bbox!=null&&(We.bbox=ze.bbox),We}function Ka(ze){if(ze==null)return ze;switch(ze.type){case"Feature":return mo(ze);case"FeatureCollection":{var We={type:"FeatureCollection",features:ze.features.map(mo)};return ze.bbox!=null&&(We.bbox=ze.bbox),We}default:return to(ze)}}function ga(ze,We){var nt=y(We/2),lt=v(_*nt);return[ze*(.74482-.34588*lt*lt),1.70711*nt]}ga.invert=function(ze,We){var nt=We/1.70711,lt=v(_*nt);return[ze/(.74482-.34588*lt*lt),2*e(nt)]};function mi(){return l.geoProjection(ga).scale(146.153)}function fo(ze,We,nt){var lt=l.geoInterpolate(We,nt),_t=lt(.5),bt=l.geoRotation([-_t[0],-_t[1]])(We),Tt=lt.distance/2,qt=-z(v(bt[1]*k)/v(Tt)),sr=[-_t[0],-_t[1],-(bt[0]>0?m-qt:qt)*S],Qt=l.geoProjection(ze(Tt)).rotate(sr),fr=l.geoRotation(sr),Er=Qt.center;return delete Qt.rotate,Qt.center=function(Hr){return arguments.length?Er(fr(Hr)):fr.invert(Er())},Qt.clipAngle(90)}function po(ze){var We=a(ze);function nt(lt,_t){var bt=l.geoGnomonicRaw(lt,_t);return bt[0]*=We,bt}return nt.invert=function(lt,_t){return l.geoGnomonicRaw.invert(lt/We,_t)},nt}function ds(){return Fs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Fs(ze,We){return fo(po,ze,We)}function Bo(ze){if(!(ze*=2))return l.geoAzimuthalEquidistantRaw;var We=-ze/2,nt=-We,lt=ze*ze,_t=y(nt),bt=.5/v(nt);function Tt(qt,sr){var Qt=I(a(sr)*a(qt-We)),fr=I(a(sr)*a(qt-nt)),Er=sr<0?-1:1;return Qt*=Qt,fr*=fr,[(Qt-fr)/(2*ze),Er*R(4*lt*fr-(lt-Qt+fr)*(lt-Qt+fr))/(2*ze)]}return Tt.invert=function(qt,sr){var Qt=sr*sr,fr=a(R(Qt+(Hr=qt+We)*Hr)),Er=a(R(Qt+(Hr=qt+nt)*Hr)),Hr,en;return[o(en=fr-Er,Hr=(fr+Er)*_t),(sr<0?-1:1)*I(R(Hr*Hr+en*en)*bt)]},Tt}function pl(){return Ms([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ms(ze,We){return fo(Bo,ze,We)}function gs(ze,We){if(w(We)<g)return[ze,0];var nt=w(We/M),lt=z(nt);if(w(ze)<g||w(w(We)-M)<g)return[0,p(We)*m*y(lt/2)];var _t=a(lt),bt=w(m/ze-ze/m)/2,Tt=bt*bt,qt=_t/(nt+_t-1),sr=qt*(2/nt-1),Qt=sr*sr,fr=Qt+Tt,Er=qt-Qt,Hr=Tt+qt;return[p(ze)*m*(bt*Er+R(Tt*Er*Er-fr*(qt*qt-Qt)))/fr,p(We)*m*(sr*Hr-bt*R((Tt+1)*fr-Hr*Hr))/fr]}gs.invert=function(ze,We){if(w(We)<g)return[ze,0];if(w(ze)<g)return[0,M*v(2*e(We/m))];var nt=(ze/=m)*ze,lt=(We/=m)*We,_t=nt+lt,bt=_t*_t,Tt=-w(We)*(1+_t),qt=Tt-2*lt+nt,sr=-2*Tt+1+2*lt+bt,Qt=lt/sr+(2*qt*qt*qt/(sr*sr*sr)-9*Tt*qt/(sr*sr))/27,fr=(Tt-qt*qt/(3*sr))/sr,Er=2*R(-fr/3),Hr=I(3*Qt/(fr*Er))/3;return[m*(_t-1+R(1+2*(nt-lt)+bt))/(2*ze),p(We)*m*(-Er*a(Hr+m/3)-qt/(3*sr))]};function xo(){return l.geoProjection(gs).scale(79.4183)}function cu(ze,We){if(w(We)<g)return[ze,0];var nt=w(We/M),lt=z(nt);if(w(ze)<g||w(w(We)-M)<g)return[0,p(We)*m*y(lt/2)];var _t=a(lt),bt=w(m/ze-ze/m)/2,Tt=bt*bt,qt=_t*(R(1+Tt)-bt*_t)/(1+Tt*nt*nt);return[p(ze)*m*qt,p(We)*m*R(1-qt*(2*bt+qt))]}cu.invert=function(ze,We){if(!ze)return[0,M*v(2*e(We/m))];var nt=w(ze/m),lt=(1-nt*nt-(We/=m)*We)/(2*nt),_t=lt*lt,bt=R(_t+1);return[p(ze)*m*(bt-lt),p(We)*M*v(2*o(R((1-2*lt*nt)*(lt+bt)-nt),R(bt+lt+nt)))]};function Su(){return l.geoProjection(cu).scale(79.4183)}function ys(ze,We){if(w(We)<g)return[ze,0];var nt=We/M,lt=z(nt);if(w(ze)<g||w(w(We)-M)<g)return[0,m*y(lt/2)];var _t=(m/ze-ze/m)/2,bt=nt/(1+a(lt));return[m*(p(ze)*R(_t*_t+1-bt*bt)-_t),m*bt]}ys.invert=function(ze,We){if(!We)return[ze,0];var nt=We/m,lt=(m*m*(1-nt*nt)-ze*ze)/(2*m*ze);return[ze?m*(p(ze)*R(lt*lt+1)-lt):0,M*v(2*e(nt))]};function Ju(){return l.geoProjection(ys).scale(79.4183)}function hu(ze,We){if(!We)return[ze,0];var nt=w(We);if(!ze||nt===M)return[0,We];var lt=nt/M,_t=lt*lt,bt=(8*lt-_t*(_t+2)-5)/(2*_t*(lt-1)),Tt=bt*bt,qt=lt*bt,sr=_t+Tt+2*qt,Qt=lt+3*bt,fr=ze/M,Er=fr+1/fr,Hr=p(w(ze)-M)*R(Er*Er-4),en=Hr*Hr,_n=sr*(_t+Tt*en-1)+(1-_t)*(_t*(Qt*Qt+4*Tt)+12*qt*Tt+4*Tt*Tt),Pn=(Hr*(sr+Tt-1)+2*R(_n))/(4*sr+en);return[p(ze)*M*Pn,p(We)*M*R(1+Hr*w(Pn)-Pn*Pn)]}hu.invert=function(ze,We){var nt;if(!ze||!We)return[ze,We];We/=m;var lt=p(ze)*ze/M,_t=(lt*lt-1+4*We*We)/w(lt),bt=_t*_t,Tt=2*We,qt=50;do{var sr=Tt*Tt,Qt=(8*Tt-sr*(sr+2)-5)/(2*sr*(Tt-1)),fr=(3*Tt-sr*Tt-10)/(2*sr*Tt),Er=Qt*Qt,Hr=Tt*Qt,en=Tt+Qt,_n=en*en,Pn=Tt+3*Qt,Zn=_n*(sr+Er*bt-1)+(1-sr)*(sr*(Pn*Pn+4*Er)+Er*(12*Hr+4*Er)),ma=-2*en*(4*Hr*Er+(1-4*sr+3*sr*sr)*(1+fr)+Er*(-6+14*sr-bt+(-8+8*sr-2*bt)*fr)+Hr*(-8+12*sr+(-10+10*sr-bt)*fr)),ba=R(Zn),Za=_t*(_n+Er-1)+2*ba-lt*(4*_n+bt),Wa=_t*(2*Qt*fr+2*en*(1+fr))+ma/ba-8*en*(_t*(-1+Er+_n)+2*ba)*(1+fr)/(bt+4*_n);Tt-=nt=Za/Wa}while(nt>g&&--qt>0);return[p(ze)*(R(_t*_t+4)+_t)*m/4,M*Tt]};function Lc(){return l.geoProjection(hu).scale(127.16)}function gf(ze,We,nt,lt,_t){function bt(Tt,qt){var sr=nt*v(lt*qt),Qt=R(1-sr*sr),fr=R(2/(1+Qt*a(Tt*=_t)));return[ze*Qt*fr*v(Tt),We*sr*fr]}return bt.invert=function(Tt,qt){var sr=Tt/ze,Qt=qt/We,fr=R(sr*sr+Qt*Qt),Er=2*z(fr/2);return[o(Tt*y(Er),ze*fr)/_t,fr&&z(qt*v(Er)/(We*nt*fr))/lt]},bt}function Qu(ze,We,nt,lt){var _t=m/3;ze=s(ze,g),We=s(We,g),ze=i(ze,M),We=i(We,m-g),nt=s(nt,0),nt=i(nt,100-g),lt=s(lt,g);var bt=nt/100+1,Tt=lt/100,qt=I(bt*a(_t))/_t,sr=v(ze)/v(qt*M),Qt=We/m,fr=R(Tt*v(ze/2)/v(We/2)),Er=fr/R(Qt*sr*qt),Hr=1/(fr*R(Qt*sr*qt));return gf(Er,Hr,sr,qt,Qt)}function yf(){var ze=65*k,We=60*k,nt=20,lt=200,_t=l.geoProjectionMutator(Qu),bt=_t(ze,We,nt,lt);return bt.poleline=function(Tt){return arguments.length?_t(ze=+Tt*k,We,nt,lt):ze*S},bt.parallels=function(Tt){return arguments.length?_t(ze,We=+Tt*k,nt,lt):We*S},bt.inflation=function(Tt){return arguments.length?_t(ze,We,nt=+Tt,lt):nt},bt.ratio=function(Tt){return arguments.length?_t(ze,We,nt,lt=+Tt):lt},bt.scale(163.775)}function Os(){return yf().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Of=4*m+3*R(3),mf=2*R(2*m*R(3)/Of),xf=Ae(mf*R(3)/m,mf,Of/6);function Uo(){return l.geoProjection(xf).scale(176.84)}function bf(ze,We){return[ze*R(1-3*We*We/(m*m)),We]}bf.invert=function(ze,We){return[ze/R(1-3*We*We/(m*m)),We]};function Jf(){return l.geoProjection(bf).scale(152.63)}function Ss(ze,We){var nt=a(We),lt=a(ze)*nt,_t=1-lt,bt=a(ze=o(v(ze)*nt,-v(We))),Tt=v(ze);return nt=R(1-lt*lt),[Tt*nt-bt*_t,-bt*nt-Tt*_t]}Ss.invert=function(ze,We){var nt=(ze*ze+We*We)/-2,lt=R(-nt*(2+nt)),_t=We*nt+ze*lt,bt=ze*nt-We*lt,Tt=R(bt*bt+_t*_t);return[o(lt*_t,Tt*(1+nt)),Tt?-z(lt*bt/Tt):0]};function $u(){return l.geoProjection(Ss).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function qu(ze,We){var nt=V(ze,We);return[(nt[0]+ze/M)/2,(nt[1]+We)/2]}qu.invert=function(ze,We){var nt=ze,lt=We,_t=25;do{var bt=a(lt),Tt=v(lt),qt=v(2*lt),sr=Tt*Tt,Qt=bt*bt,fr=v(nt),Er=a(nt/2),Hr=v(nt/2),en=Hr*Hr,_n=1-Qt*Er*Er,Pn=_n?I(bt*Er)*R(Zn=1/_n):Zn=0,Zn,ma=.5*(2*Pn*bt*Hr+nt/M)-ze,ba=.5*(Pn*Tt+lt)-We,Za=.5*Zn*(Qt*en+Pn*bt*Er*sr)+.5/M,Wa=Zn*(fr*qt/4-Pn*Tt*Hr),ei=.125*Zn*(qt*Hr-Pn*Tt*Qt*fr),fi=.5*Zn*(sr*Er+Pn*en*bt)+.5,oo=Wa*ei-fi*Za,ri=(ba*Wa-ma*fi)/oo,Hi=(ma*ei-ba*Za)/oo;nt-=ri,lt-=Hi}while((w(ri)>g||w(Hi)>g)&&--_t>0);return[nt,lt]};function _f(){return l.geoProjection(qu).scale(158.837)}d.geoNaturalEarth=l.geoNaturalEarth1,d.geoNaturalEarthRaw=l.geoNaturalEarth1Raw,d.geoAiry=$,d.geoAiryRaw=q,d.geoAitoff=K,d.geoAitoffRaw=V,d.geoArmadillo=ue,d.geoArmadilloRaw=se,d.geoAugust=U,d.geoAugustRaw=oe,d.geoBaker=j,d.geoBakerRaw=ee,d.geoBerghaus=ne,d.geoBerghausRaw=Q,d.geoBertin1953=xe,d.geoBertin1953Raw=ye,d.geoBoggs=Ye,d.geoBoggsRaw=Ie,d.geoBonne=dt,d.geoBonneRaw=Ve,d.geoBottomley=Gt,d.geoBottomleyRaw=Dt,d.geoBromley=zt,d.geoBromleyRaw=kt,d.geoChamberlin=Ce,d.geoChamberlinRaw=it,d.geoChamberlinAfrica=Qe,d.geoCollignon=rt,d.geoCollignonRaw=je,d.geoCraig=Pt,d.geoCraigRaw=ut,d.geoCraster=Xt,d.geoCrasterRaw=Nt,d.geoCylindricalEqualArea=Kt,d.geoCylindricalEqualAreaRaw=Ot,d.geoCylindricalStereographic=gt,d.geoCylindricalStereographicRaw=Je,d.geoEckert1=rr,d.geoEckert1Raw=Et,d.geoEckert2=or,d.geoEckert2Raw=vr,d.geoEckert3=Lr,d.geoEckert3Raw=dr,d.geoEckert4=tr,d.geoEckert4Raw=kr,d.geoEckert5=et,d.geoEckert5Raw=Or,d.geoEckert6=Se,d.geoEckert6Raw=we,d.geoEisenlohr=$e,d.geoEisenlohrRaw=Xe,d.geoFahey=pt,d.geoFaheyRaw=st,d.geoFoucaut=Yt,d.geoFoucautRaw=wt,d.geoFoucautSinusoidal=xr,d.geoFoucautSinusoidalRaw=mr,d.geoGilbert=Dr,d.geoGingery=yn,d.geoGingeryRaw=tn,d.geoGinzburg4=nn,d.geoGinzburg4Raw=Ar,d.geoGinzburg5=Xr,d.geoGinzburg5Raw=fn,d.geoGinzburg6=Ft,d.geoGinzburg6Raw=at,d.geoGinzburg8=hr,d.geoGinzburg8Raw=er,d.geoGinzburg9=zr,d.geoGinzburg9Raw=Yr,d.geoGringorten=kn,d.geoGringortenRaw=br,d.geoGuyou=Fn,d.geoGuyouRaw=pr,d.geoHammer=fe,d.geoHammerRaw=ae,d.geoHammerRetroazimuthal=ra,d.geoHammerRetroazimuthalRaw=Nn,d.geoHealpix=wn,d.geoHealpixRaw=ur,d.geoHill=cr,d.geoHillRaw=pn,d.geoHomolosine=Kn,d.geoHomolosineRaw=Vn,d.geoHufnagel=Bn,d.geoHufnagelRaw=jn,d.geoHyperelliptical=la,d.geoHyperellipticalRaw=Yn,d.geoInterrupt=No,d.geoInterruptedBoggs=Ls,d.geoInterruptedHomolosine=Pi,d.geoInterruptedMollweide=Ws,d.geoInterruptedMollweideHemispheres=Ml,d.geoInterruptedSinuMollweide=xu,d.geoInterruptedSinusoidal=ol,d.geoKavrayskiy7=Ui,d.geoKavrayskiy7Raw=Xs,d.geoLagrange=Bl,d.geoLagrangeRaw=So,d.geoLarrivee=Sl,d.geoLarriveeRaw=Di,d.geoLaskowski=Fi,d.geoLaskowskiRaw=Ji,d.geoLittrow=Qi,d.geoLittrowRaw=io,d.geoLoximuthal=sl,d.geoLoximuthalRaw=us,d.geoMiller=rs,d.geoMillerRaw=Bu,d.geoModifiedStereographic=Ds,d.geoModifiedStereographicRaw=Uu,d.geoModifiedStereographicAlaska=nu,d.geoModifiedStereographicGs48=cf,d.geoModifiedStereographicGs50=hf,d.geoModifiedStereographicMiller=ll,d.geoModifiedStereographicLee=au,d.geoMollweide=He,d.geoMollweideRaw=Oe,d.geoMtFlatPolarParabolic=Vu,d.geoMtFlatPolarParabolicRaw=_u,d.geoMtFlatPolarQuartic=vf,d.geoMtFlatPolarQuarticRaw=iu,d.geoMtFlatPolarSinusoidal=wu,d.geoMtFlatPolarSinusoidalRaw=ul,d.geoNaturalEarth2=ws,d.geoNaturalEarth2Raw=ou,d.geoNellHammer=Tu,d.geoNellHammerRaw=Ul,d.geoInterruptedQuarticAuthalic=Gu,d.geoNicolosi=pf,d.geoNicolosiRaw=su,d.geoPatterson=lo,d.geoPattersonRaw=Is,d.geoPolyconic=Hl,d.geoPolyconicRaw=Vl,d.geoPolyhedral=cl,d.geoPolyhedralButterfly=Xl,d.geoPolyhedralCollignon=Ff,d.geoPolyhedralWaterman=Ri,d.geoProject=hs,d.geoGringortenQuincuncial=xt,d.geoPeirceQuincuncial=It,d.geoPierceQuincuncial=It,d.geoQuantize=nr,d.geoQuincuncial=Ku,d.geoRectangularPolyconic=Cr,d.geoRectangularPolyconicRaw=Jt,d.geoRobinson=Tn,d.geoRobinsonRaw=dn,d.geoSatellite=xn,d.geoSatelliteRaw=Hn,d.geoSinuMollweide=En,d.geoSinuMollweideRaw=Jr,d.geoSinusoidal=Re,d.geoSinusoidalRaw=Ue,d.geoStitch=Ka,d.geoTimes=mi,d.geoTimesRaw=ga,d.geoTwoPointAzimuthal=Fs,d.geoTwoPointAzimuthalRaw=po,d.geoTwoPointAzimuthalUsa=ds,d.geoTwoPointEquidistant=Ms,d.geoTwoPointEquidistantRaw=Bo,d.geoTwoPointEquidistantUsa=pl,d.geoVanDerGrinten=xo,d.geoVanDerGrintenRaw=gs,d.geoVanDerGrinten2=Su,d.geoVanDerGrinten2Raw=cu,d.geoVanDerGrinten3=Ju,d.geoVanDerGrinten3Raw=ys,d.geoVanDerGrinten4=Lc,d.geoVanDerGrinten4Raw=hu,d.geoWagner=yf,d.geoWagner7=Os,d.geoWagnerRaw=Qu,d.geoWagner4=Uo,d.geoWagner4Raw=xf,d.geoWagner6=Jf,d.geoWagner6Raw=bf,d.geoWiechel=$u,d.geoWiechelRaw=Ss,d.geoWinkel3=_f,d.geoWinkel3Raw=qu,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(){return new w}function w(){this.reset()}w.prototype={constructor:w,reset:function(){this.s=this.t=0},add:function(xt){o(e,xt,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new w;function o(xt,It,nr){var Jt=xt.s=It+nr,Cr=Jt-It,an=Jt-Cr;xt.t=It-an+(nr-Cr)}var a=1e-6,n=1e-12,r=Math.PI,u=r/2,s=r/4,i=r*2,f=180/r,h=r/180,p=Math.abs,v=Math.atan,y=Math.atan2,g=Math.cos,A=Math.ceil,m=Math.exp,M=Math.log,_=Math.pow,T=Math.sin,x=Math.sign||function(xt){return xt>0?1:xt<0?-1:0},c=Math.sqrt,L=Math.tan;function S(xt){return xt>1?0:xt<-1?r:Math.acos(xt)}function k(xt){return xt>1?u:xt<-1?-u:Math.asin(xt)}function P(xt){return(xt=T(xt/2))*xt}function z(){}function I(xt,It){xt&&D.hasOwnProperty(xt.type)&&D[xt.type](xt,It)}var R={Feature:function(xt,It){I(xt.geometry,It)},FeatureCollection:function(xt,It){for(var nr=xt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)I(nr[Jt].geometry,It)}},D={Sphere:function(xt,It){It.sphere()},Point:function(xt,It){xt=xt.coordinates,It.point(xt[0],xt[1],xt[2])},MultiPoint:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)xt=nr[Jt],It.point(xt[0],xt[1],xt[2])},LineString:function(xt,It){O(xt.coordinates,It,0)},MultiLineString:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)O(nr[Jt],It,0)},Polygon:function(xt,It){F(xt.coordinates,It)},MultiPolygon:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)F(nr[Jt],It)},GeometryCollection:function(xt,It){for(var nr=xt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)I(nr[Jt],It)}};function O(xt,It,nr){var Jt=-1,Cr=xt.length-nr,an;for(It.lineStart();++Jt<Cr;)an=xt[Jt],It.point(an[0],an[1],an[2]);It.lineEnd()}function F(xt,It){var nr=-1,Jt=xt.length;for(It.polygonStart();++nr<Jt;)O(xt[nr],It,1);It.polygonEnd()}function Y(xt,It){xt&&R.hasOwnProperty(xt.type)?R[xt.type](xt,It):I(xt,It)}var X=b(),q=b(),$,V,K,se,ue,oe={point:z,lineStart:z,lineEnd:z,polygonStart:function(){X.reset(),oe.lineStart=U,oe.lineEnd=G},polygonEnd:function(){var xt=+X;q.add(xt<0?i+xt:xt),this.lineStart=this.lineEnd=this.point=z},sphere:function(){q.add(i)}};function U(){oe.point=re}function G(){ee($,V)}function re(xt,It){oe.point=ee,$=xt,V=It,xt*=h,It*=h,K=xt,se=g(It=It/2+s),ue=T(It)}function ee(xt,It){xt*=h,It*=h,It=It/2+s;var nr=xt-K,Jt=nr>=0?1:-1,Cr=Jt*nr,an=g(It),dn=T(It),Tn=ue*dn,Cn=se*an+Tn*g(Cr),Hn=Tn*Jt*T(Cr);X.add(y(Hn,Cn)),K=xt,se=an,ue=dn}function j(xt){return q.reset(),Y(xt,oe),q*2}function Q(xt){return[y(xt[1],xt[0]),k(xt[2])]}function ne(xt){var It=xt[0],nr=xt[1],Jt=g(nr);return[Jt*g(It),Jt*T(It),T(nr)]}function ae(xt,It){return xt[0]*It[0]+xt[1]*It[1]+xt[2]*It[2]}function ie(xt,It){return[xt[1]*It[2]-xt[2]*It[1],xt[2]*It[0]-xt[0]*It[2],xt[0]*It[1]-xt[1]*It[0]]}function fe(xt,It){xt[0]+=It[0],xt[1]+=It[1],xt[2]+=It[2]}function me(xt,It){return[xt[0]*It,xt[1]*It,xt[2]*It]}function ce(xt){var It=c(xt[0]*xt[0]+xt[1]*xt[1]+xt[2]*xt[2]);xt[0]/=It,xt[1]/=It,xt[2]/=It}var ye,xe,ke,Ae,Oe,He,Ge,_e,Ie=b(),Ye,qe,Ue={point:Re,lineStart:dt,lineEnd:Dt,polygonStart:function(){Ue.point=Gt,Ue.lineStart=kt,Ue.lineEnd=zt,Ie.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),Ue.point=Re,Ue.lineStart=dt,Ue.lineEnd=Dt,X<0?(ye=-(ke=180),xe=-(Ae=90)):Ie>a?Ae=90:Ie<-a&&(xe=-90),qe[0]=ye,qe[1]=ke},sphere:function(){ye=-(ke=180),xe=-(Ae=90)}};function Re(xt,It){Ye.push(qe=[ye=xt,ke=xt]),It<xe&&(xe=It),It>Ae&&(Ae=It)}function Ve(xt,It){var nr=ne([xt*h,It*h]);if(_e){var Jt=ie(_e,nr),Cr=[Jt[1],-Jt[0],0],an=ie(Cr,Jt);ce(an),an=Q(an);var dn=xt-Oe,Tn=dn>0?1:-1,Cn=an[0]*f*Tn,Hn,xn=p(dn)>180;xn^(Tn*Oe<Cn&&Cn<Tn*xt)?(Hn=an[1]*f,Hn>Ae&&(Ae=Hn)):(Cn=(Cn+360)%360-180,xn^(Tn*Oe<Cn&&Cn<Tn*xt)?(Hn=-an[1]*f,Hn<xe&&(xe=Hn)):(It<xe&&(xe=It),It>Ae&&(Ae=It))),xn?xt<Oe?Bt(ye,xt)>Bt(ye,ke)&&(ke=xt):Bt(xt,ke)>Bt(ye,ke)&&(ye=xt):ke>=ye?(xt<ye&&(ye=xt),xt>ke&&(ke=xt)):xt>Oe?Bt(ye,xt)>Bt(ye,ke)&&(ke=xt):Bt(xt,ke)>Bt(ye,ke)&&(ye=xt)}else Ye.push(qe=[ye=xt,ke=xt]);It<xe&&(xe=It),It>Ae&&(Ae=It),_e=nr,Oe=xt}function dt(){Ue.point=Ve}function Dt(){qe[0]=ye,qe[1]=ke,Ue.point=Re,_e=null}function Gt(xt,It){if(_e){var nr=xt-Oe;Ie.add(p(nr)>180?nr+(nr>0?360:-360):nr)}else He=xt,Ge=It;oe.point(xt,It),Ve(xt,It)}function kt(){oe.lineStart()}function zt(){Gt(He,Ge),oe.lineEnd(),p(Ie)>a&&(ye=-(ke=180)),qe[0]=ye,qe[1]=ke,_e=null}function Bt(xt,It){return(It-=xt)<0?It+360:It}function Lt(xt,It){return xt[0]-It[0]}function Mt(xt,It){return xt[0]<=xt[1]?xt[0]<=It&&It<=xt[1]:It<xt[0]||xt[1]<It}function it(xt){var It,nr,Jt,Cr,an,dn,Tn;if(Ae=ke=-(ye=xe=1/0),Ye=[],Y(xt,Ue),nr=Ye.length){for(Ye.sort(Lt),It=1,Jt=Ye[0],an=[Jt];It<nr;++It)Cr=Ye[It],Mt(Jt,Cr[0])||Mt(Jt,Cr[1])?(Bt(Jt[0],Cr[1])>Bt(Jt[0],Jt[1])&&(Jt[1]=Cr[1]),Bt(Cr[0],Jt[1])>Bt(Jt[0],Jt[1])&&(Jt[0]=Cr[0])):an.push(Jt=Cr);for(dn=-1/0,nr=an.length-1,It=0,Jt=an[nr];It<=nr;Jt=Cr,++It)Cr=an[It],(Tn=Bt(Jt[1],Cr[0]))>dn&&(dn=Tn,ye=Cr[0],ke=Jt[1])}return Ye=qe=null,ye===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[ye,xe],[ke,Ae]]}var ht,Qe,Ce,je,rt,ut,Pt,St,Nt,Xt,Ot,Kt,Je,gt,Et,rr,vr={sphere:z,point:or,lineStart:Lr,lineEnd:Or,polygonStart:function(){vr.lineStart=et,vr.lineEnd=we},polygonEnd:function(){vr.lineStart=Lr,vr.lineEnd=Or}};function or(xt,It){xt*=h,It*=h;var nr=g(It);dr(nr*g(xt),nr*T(xt),T(It))}function dr(xt,It,nr){++ht,Ce+=(xt-Ce)/ht,je+=(It-je)/ht,rt+=(nr-rt)/ht}function Lr(){vr.point=kr}function kr(xt,It){xt*=h,It*=h;var nr=g(It);gt=nr*g(xt),Et=nr*T(xt),rr=T(It),vr.point=tr,dr(gt,Et,rr)}function tr(xt,It){xt*=h,It*=h;var nr=g(It),Jt=nr*g(xt),Cr=nr*T(xt),an=T(It),dn=y(c((dn=Et*an-rr*Cr)*dn+(dn=rr*Jt-gt*an)*dn+(dn=gt*Cr-Et*Jt)*dn),gt*Jt+Et*Cr+rr*an);Qe+=dn,ut+=dn*(gt+(gt=Jt)),Pt+=dn*(Et+(Et=Cr)),St+=dn*(rr+(rr=an)),dr(gt,Et,rr)}function Or(){vr.point=or}function et(){vr.point=Se}function we(){De(Kt,Je),vr.point=or}function Se(xt,It){Kt=xt,Je=It,xt*=h,It*=h,vr.point=De;var nr=g(It);gt=nr*g(xt),Et=nr*T(xt),rr=T(It),dr(gt,Et,rr)}function De(xt,It){xt*=h,It*=h;var nr=g(It),Jt=nr*g(xt),Cr=nr*T(xt),an=T(It),dn=Et*an-rr*Cr,Tn=rr*Jt-gt*an,Cn=gt*Cr-Et*Jt,Hn=c(dn*dn+Tn*Tn+Cn*Cn),xn=k(Hn),In=Hn&&-xn/Hn;Nt+=In*dn,Xt+=In*Tn,Ot+=In*Cn,Qe+=xn,ut+=xn*(gt+(gt=Jt)),Pt+=xn*(Et+(Et=Cr)),St+=xn*(rr+(rr=an)),dr(gt,Et,rr)}function Xe(xt){ht=Qe=Ce=je=rt=ut=Pt=St=Nt=Xt=Ot=0,Y(xt,vr);var It=Nt,nr=Xt,Jt=Ot,Cr=It*It+nr*nr+Jt*Jt;return Cr<n&&(It=ut,nr=Pt,Jt=St,Qe<a&&(It=Ce,nr=je,Jt=rt),Cr=It*It+nr*nr+Jt*Jt,Cr<n)?[NaN,NaN]:[y(nr,It)*f,k(Jt/c(Cr))*f]}function $e(xt){return function(){return xt}}function ot(xt,It){function nr(Jt,Cr){return Jt=xt(Jt,Cr),It(Jt[0],Jt[1])}return xt.invert&&It.invert&&(nr.invert=function(Jt,Cr){return Jt=It.invert(Jt,Cr),Jt&&xt.invert(Jt[0],Jt[1])}),nr}function st(xt,It){return[p(xt)>r?xt+Math.round(-xt/i)*i:xt,It]}st.invert=st;function pt(xt,It,nr){return(xt%=i)?It||nr?ot(Yt(xt),mr(It,nr)):Yt(xt):It||nr?mr(It,nr):st}function wt(xt){return function(It,nr){return It+=xt,[It>r?It-i:It<-r?It+i:It,nr]}}function Yt(xt){var It=wt(xt);return It.invert=wt(-xt),It}function mr(xt,It){var nr=g(xt),Jt=T(xt),Cr=g(It),an=T(It);function dn(Tn,Cn){var Hn=g(Cn),xn=g(Tn)*Hn,In=T(Tn)*Hn,Ln=T(Cn),Wn=Ln*nr+xn*Jt;return[y(In*Cr-Wn*an,xn*nr-Ln*Jt),k(Wn*Cr+In*an)]}return dn.invert=function(Tn,Cn){var Hn=g(Cn),xn=g(Tn)*Hn,In=T(Tn)*Hn,Ln=T(Cn),Wn=Ln*Cr-In*an;return[y(In*Cr+Ln*an,xn*nr+Wn*Jt),k(Wn*nr-xn*Jt)]},dn}function xr(xt){xt=pt(xt[0]*h,xt[1]*h,xt.length>2?xt[2]*h:0);function It(nr){return nr=xt(nr[0]*h,nr[1]*h),nr[0]*=f,nr[1]*=f,nr}return It.invert=function(nr){return nr=xt.invert(nr[0]*h,nr[1]*h),nr[0]*=f,nr[1]*=f,nr},It}function Tr(xt,It,nr,Jt,Cr,an){if(!!nr){var dn=g(It),Tn=T(It),Cn=Jt*nr;Cr==null?(Cr=It+Jt*i,an=It-Cn/2):(Cr=yr(dn,Cr),an=yr(dn,an),(Jt>0?Cr<an:Cr>an)&&(Cr+=Jt*i));for(var Hn,xn=Cr;Jt>0?xn>an:xn<an;xn-=Cn)Hn=Q([dn,-Tn*g(xn),-Tn*T(xn)]),xt.point(Hn[0],Hn[1])}}function yr(xt,It){It=ne(It),It[0]-=xt,ce(It);var nr=S(-It[1]);return((-It[2]<0?-nr:nr)+i-a)%i}function Dr(){var xt=$e([0,0]),It=$e(90),nr=$e(6),Jt,Cr,an={point:dn};function dn(Cn,Hn){Jt.push(Cn=Cr(Cn,Hn)),Cn[0]*=f,Cn[1]*=f}function Tn(){var Cn=xt.apply(this,arguments),Hn=It.apply(this,arguments)*h,xn=nr.apply(this,arguments)*h;return Jt=[],Cr=pt(-Cn[0]*h,-Cn[1]*h,0).invert,Tr(an,Hn,xn,1),Cn={type:"Polygon",coordinates:[Jt]},Jt=Cr=null,Cn}return Tn.center=function(Cn){return arguments.length?(xt=typeof Cn=="function"?Cn:$e([+Cn[0],+Cn[1]]),Tn):xt},Tn.radius=function(Cn){return arguments.length?(It=typeof Cn=="function"?Cn:$e(+Cn),Tn):It},Tn.precision=function(Cn){return arguments.length?(nr=typeof Cn=="function"?Cn:$e(+Cn),Tn):nr},Tn}function tn(){var xt=[],It;return{point:function(nr,Jt,Cr){It.push([nr,Jt,Cr])},lineStart:function(){xt.push(It=[])},lineEnd:z,rejoin:function(){xt.length>1&&xt.push(xt.pop().concat(xt.shift()))},result:function(){var nr=xt;return xt=[],It=null,nr}}}function wr(xt,It){return p(xt[0]-It[0])<a&&p(xt[1]-It[1])<a}function gr(xt,It,nr,Jt){this.x=xt,this.z=It,this.o=nr,this.e=Jt,this.v=!1,this.n=this.p=null}function yn(xt,It,nr,Jt,Cr){var an=[],dn=[],Tn,Cn;if(xt.forEach(function(qn){if(!((Oa=qn.length-1)<=0)){var Oa,La=qn[0],Na=qn[Oa],Ba;if(wr(La,Na)){if(!La[2]&&!Na[2]){for(Cr.lineStart(),Tn=0;Tn<Oa;++Tn)Cr.point((La=qn[Tn])[0],La[1]);Cr.lineEnd();return}Na[0]+=2*a}an.push(Ba=new gr(La,qn,null,!0)),dn.push(Ba.o=new gr(La,null,Ba,!1)),an.push(Ba=new gr(Na,qn,null,!1)),dn.push(Ba.o=new gr(Na,null,Ba,!0))}}),!!an.length){for(dn.sort(It),Gr(an),Gr(dn),Tn=0,Cn=dn.length;Tn<Cn;++Tn)dn[Tn].e=nr=!nr;for(var Hn=an[0],xn,In;;){for(var Ln=Hn,Wn=!0;Ln.v;)if((Ln=Ln.n)===Hn)return;xn=Ln.z,Cr.lineStart();do{if(Ln.v=Ln.o.v=!0,Ln.e){if(Wn)for(Tn=0,Cn=xn.length;Tn<Cn;++Tn)Cr.point((In=xn[Tn])[0],In[1]);else Jt(Ln.x,Ln.n.x,1,Cr);Ln=Ln.n}else{if(Wn)for(xn=Ln.p.z,Tn=xn.length-1;Tn>=0;--Tn)Cr.point((In=xn[Tn])[0],In[1]);else Jt(Ln.x,Ln.p.x,-1,Cr);Ln=Ln.p}Ln=Ln.o,xn=Ln.z,Wn=!Wn}while(!Ln.v);Cr.lineEnd()}}}function Gr(xt){if(!!(It=xt.length)){for(var It,nr=0,Jt=xt[0],Cr;++nr<It;)Jt.n=Cr=xt[nr],Cr.p=Jt,Jt=Cr;Jt.n=Cr=xt[0],Cr.p=Jt}}var Ar=b();function nn(xt){return p(xt[0])<=r?xt[0]:x(xt[0])*((p(xt[0])+r)%i-r)}function fn(xt,It){var nr=nn(It),Jt=It[1],Cr=T(Jt),an=[T(nr),-g(nr),0],dn=0,Tn=0;Ar.reset(),Cr===1?Jt=u+a:Cr===-1&&(Jt=-u-a);for(var Cn=0,Hn=xt.length;Cn<Hn;++Cn)if(!!(In=(xn=xt[Cn]).length))for(var xn,In,Ln=xn[In-1],Wn=nn(Ln),qn=Ln[1]/2+s,Oa=T(qn),La=g(qn),Na=0;Na<In;++Na,Wn=Qn,Oa=Ya,La=Qa,Ln=Ba){var Ba=xn[Na],Qn=nn(Ba),pa=Ba[1]/2+s,Ya=T(pa),Qa=g(pa),pi=Qn-Wn,di=pi>=0?1:-1,yi=di*pi,Ti=yi>r,oi=Oa*Ya;if(Ar.add(y(oi*di*T(yi),La*Qa+oi*g(yi))),dn+=Ti?pi+di*i:pi,Ti^Wn>=nr^Qn>=nr){var mo=ie(ne(Ln),ne(Ba));ce(mo);var to=ie(an,mo);ce(to);var Ka=(Ti^pi>=0?-1:1)*k(to[2]);(Jt>Ka||Jt===Ka&&(mo[0]||mo[1]))&&(Tn+=Ti^pi>=0?1:-1)}}return(dn<-a||dn<a&&Ar<-a)^Tn&1}function Xr(xt,It,nr,Jt){return function(Cr){var an=It(Cr),dn=tn(),Tn=It(dn),Cn=!1,Hn,xn,In,Ln={point:Wn,lineStart:Oa,lineEnd:La,polygonStart:function(){Ln.point=Na,Ln.lineStart=Ba,Ln.lineEnd=Qn,xn=[],Hn=[]},polygonEnd:function(){Ln.point=Wn,Ln.lineStart=Oa,Ln.lineEnd=La,xn=l.merge(xn);var pa=fn(Hn,Jt);xn.length?(Cn||(Cr.polygonStart(),Cn=!0),yn(xn,Ft,pa,nr,Cr)):pa&&(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd()),Cn&&(Cr.polygonEnd(),Cn=!1),xn=Hn=null},sphere:function(){Cr.polygonStart(),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd(),Cr.polygonEnd()}};function Wn(pa,Ya){xt(pa,Ya)&&Cr.point(pa,Ya)}function qn(pa,Ya){an.point(pa,Ya)}function Oa(){Ln.point=qn,an.lineStart()}function La(){Ln.point=Wn,an.lineEnd()}function Na(pa,Ya){In.push([pa,Ya]),Tn.point(pa,Ya)}function Ba(){Tn.lineStart(),In=[]}function Qn(){Na(In[0][0],In[0][1]),Tn.lineEnd();var pa=Tn.clean(),Ya=dn.result(),Qa,pi=Ya.length,di,yi,Ti;if(In.pop(),Hn.push(In),In=null,!!pi){if(pa&1){if(yi=Ya[0],(di=yi.length-1)>0){for(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),Qa=0;Qa<di;++Qa)Cr.point((Ti=yi[Qa])[0],Ti[1]);Cr.lineEnd()}return}pi>1&&pa&2&&Ya.push(Ya.pop().concat(Ya.shift())),xn.push(Ya.filter(at))}}return Ln}}function at(xt){return xt.length>1}function Ft(xt,It){return((xt=xt.x)[0]<0?xt[1]-u-a:u-xt[1])-((It=It.x)[0]<0?It[1]-u-a:u-It[1])}var er=Xr(function(){return!0},hr,zr,[-r,-u]);function hr(xt){var It=NaN,nr=NaN,Jt=NaN,Cr;return{lineStart:function(){xt.lineStart(),Cr=1},point:function(an,dn){var Tn=an>0?r:-r,Cn=p(an-It);p(Cn-r)<a?(xt.point(It,nr=(nr+dn)/2>0?u:-u),xt.point(Jt,nr),xt.lineEnd(),xt.lineStart(),xt.point(Tn,nr),xt.point(an,nr),Cr=0):Jt!==Tn&&Cn>=r&&(p(It-Jt)<a&&(It-=Jt*a),p(an-Tn)<a&&(an-=Tn*a),nr=Yr(It,nr,an,dn),xt.point(Jt,nr),xt.lineEnd(),xt.lineStart(),xt.point(Tn,nr),Cr=0),xt.point(It=an,nr=dn),Jt=Tn},lineEnd:function(){xt.lineEnd(),It=nr=NaN},clean:function(){return 2-Cr}}}function Yr(xt,It,nr,Jt){var Cr,an,dn=T(xt-nr);return p(dn)>a?v((T(It)*(an=g(Jt))*T(nr)-T(Jt)*(Cr=g(It))*T(xt))/(Cr*an*dn)):(It+Jt)/2}function zr(xt,It,nr,Jt){var Cr;if(xt==null)Cr=nr*u,Jt.point(-r,Cr),Jt.point(0,Cr),Jt.point(r,Cr),Jt.point(r,0),Jt.point(r,-Cr),Jt.point(0,-Cr),Jt.point(-r,-Cr),Jt.point(-r,0),Jt.point(-r,Cr);else if(p(xt[0]-It[0])>a){var an=xt[0]<It[0]?r:-r;Cr=nr*an/2,Jt.point(-an,Cr),Jt.point(0,Cr),Jt.point(an,Cr)}else Jt.point(It[0],It[1])}function Pr(xt){var It=g(xt),nr=6*h,Jt=It>0,Cr=p(It)>a;function an(xn,In,Ln,Wn){Tr(Wn,xt,nr,Ln,xn,In)}function dn(xn,In){return g(xn)*g(In)>It}function Tn(xn){var In,Ln,Wn,qn,Oa;return{lineStart:function(){qn=Wn=!1,Oa=1},point:function(La,Na){var Ba=[La,Na],Qn,pa=dn(La,Na),Ya=Jt?pa?0:Hn(La,Na):pa?Hn(La+(La<0?r:-r),Na):0;if(!In&&(qn=Wn=pa)&&xn.lineStart(),pa!==Wn&&(Qn=Cn(In,Ba),(!Qn||wr(In,Qn)||wr(Ba,Qn))&&(Ba[2]=1)),pa!==Wn)Oa=0,pa?(xn.lineStart(),Qn=Cn(Ba,In),xn.point(Qn[0],Qn[1])):(Qn=Cn(In,Ba),xn.point(Qn[0],Qn[1],2),xn.lineEnd()),In=Qn;else if(Cr&&In&&Jt^pa){var Qa;!(Ya&Ln)&&(Qa=Cn(Ba,In,!0))&&(Oa=0,Jt?(xn.lineStart(),xn.point(Qa[0][0],Qa[0][1]),xn.point(Qa[1][0],Qa[1][1]),xn.lineEnd()):(xn.point(Qa[1][0],Qa[1][1]),xn.lineEnd(),xn.lineStart(),xn.point(Qa[0][0],Qa[0][1],3)))}pa&&(!In||!wr(In,Ba))&&xn.point(Ba[0],Ba[1]),In=Ba,Wn=pa,Ln=Ya},lineEnd:function(){Wn&&xn.lineEnd(),In=null},clean:function(){return Oa|(qn&&Wn)<<1}}}function Cn(xn,In,Ln){var Wn=ne(xn),qn=ne(In),Oa=[1,0,0],La=ie(Wn,qn),Na=ae(La,La),Ba=La[0],Qn=Na-Ba*Ba;if(!Qn)return!Ln&&xn;var pa=It*Na/Qn,Ya=-It*Ba/Qn,Qa=ie(Oa,La),pi=me(Oa,pa),di=me(La,Ya);fe(pi,di);var yi=Qa,Ti=ae(pi,yi),oi=ae(yi,yi),mo=Ti*Ti-oi*(ae(pi,pi)-1);if(!(mo<0)){var to=c(mo),Ka=me(yi,(-Ti-to)/oi);if(fe(Ka,pi),Ka=Q(Ka),!Ln)return Ka;var ga=xn[0],mi=In[0],fo=xn[1],po=In[1],ds;mi<ga&&(ds=ga,ga=mi,mi=ds);var Fs=mi-ga,Bo=p(Fs-r)<a,pl=Bo||Fs<a;if(!Bo&&po<fo&&(ds=fo,fo=po,po=ds),pl?Bo?fo+po>0^Ka[1]<(p(Ka[0]-ga)<a?fo:po):fo<=Ka[1]&&Ka[1]<=po:Fs>r^(ga<=Ka[0]&&Ka[0]<=mi)){var Ms=me(yi,(-Ti+to)/oi);return fe(Ms,pi),[Ka,Q(Ms)]}}}function Hn(xn,In){var Ln=Jt?xt:r-xt,Wn=0;return xn<-Ln?Wn|=1:xn>Ln&&(Wn|=2),In<-Ln?Wn|=4:In>Ln&&(Wn|=8),Wn}return Xr(dn,Tn,an,Jt?[0,-xt]:[-r,xt-r])}function br(xt,It,nr,Jt,Cr,an){var dn=xt[0],Tn=xt[1],Cn=It[0],Hn=It[1],xn=0,In=1,Ln=Cn-dn,Wn=Hn-Tn,qn;if(qn=nr-dn,!(!Ln&&qn>0)){if(qn/=Ln,Ln<0){if(qn<xn)return;qn<In&&(In=qn)}else if(Ln>0){if(qn>In)return;qn>xn&&(xn=qn)}if(qn=Cr-dn,!(!Ln&&qn<0)){if(qn/=Ln,Ln<0){if(qn>In)return;qn>xn&&(xn=qn)}else if(Ln>0){if(qn<xn)return;qn<In&&(In=qn)}if(qn=Jt-Tn,!(!Wn&&qn>0)){if(qn/=Wn,Wn<0){if(qn<xn)return;qn<In&&(In=qn)}else if(Wn>0){if(qn>In)return;qn>xn&&(xn=qn)}if(qn=an-Tn,!(!Wn&&qn<0)){if(qn/=Wn,Wn<0){if(qn>In)return;qn>xn&&(xn=qn)}else if(Wn>0){if(qn<xn)return;qn<In&&(In=qn)}return xn>0&&(xt[0]=dn+xn*Ln,xt[1]=Tn+xn*Wn),In<1&&(It[0]=dn+In*Ln,It[1]=Tn+In*Wn),!0}}}}}var jr=1e9,zn=-jr;function kn(xt,It,nr,Jt){function Cr(Hn,xn){return xt<=Hn&&Hn<=nr&&It<=xn&&xn<=Jt}function an(Hn,xn,In,Ln){var Wn=0,qn=0;if(Hn==null||(Wn=dn(Hn,In))!==(qn=dn(xn,In))||Cn(Hn,xn)<0^In>0)do Ln.point(Wn===0||Wn===3?xt:nr,Wn>1?Jt:It);while((Wn=(Wn+In+4)%4)!==qn);else Ln.point(xn[0],xn[1])}function dn(Hn,xn){return p(Hn[0]-xt)<a?xn>0?0:3:p(Hn[0]-nr)<a?xn>0?2:1:p(Hn[1]-It)<a?xn>0?1:0:xn>0?3:2}function Tn(Hn,xn){return Cn(Hn.x,xn.x)}function Cn(Hn,xn){var In=dn(Hn,1),Ln=dn(xn,1);return In!==Ln?In-Ln:In===0?xn[1]-Hn[1]:In===1?Hn[0]-xn[0]:In===2?Hn[1]-xn[1]:xn[0]-Hn[0]}return function(Hn){var xn=Hn,In=tn(),Ln,Wn,qn,Oa,La,Na,Ba,Qn,pa,Ya,Qa,pi={point:di,lineStart:mo,lineEnd:to,polygonStart:Ti,polygonEnd:oi};function di(ga,mi){Cr(ga,mi)&&xn.point(ga,mi)}function yi(){for(var ga=0,mi=0,fo=Wn.length;mi<fo;++mi)for(var po=Wn[mi],ds=1,Fs=po.length,Bo=po[0],pl,Ms,gs=Bo[0],xo=Bo[1];ds<Fs;++ds)pl=gs,Ms=xo,Bo=po[ds],gs=Bo[0],xo=Bo[1],Ms<=Jt?xo>Jt&&(gs-pl)*(Jt-Ms)>(xo-Ms)*(xt-pl)&&++ga:xo<=Jt&&(gs-pl)*(Jt-Ms)<(xo-Ms)*(xt-pl)&&--ga;return ga}function Ti(){xn=In,Ln=[],Wn=[],Qa=!0}function oi(){var ga=yi(),mi=Qa&&ga,fo=(Ln=l.merge(Ln)).length;(mi||fo)&&(Hn.polygonStart(),mi&&(Hn.lineStart(),an(null,null,1,Hn),Hn.lineEnd()),fo&&yn(Ln,Tn,ga,an,Hn),Hn.polygonEnd()),xn=Hn,Ln=Wn=qn=null}function mo(){pi.point=Ka,Wn&&Wn.push(qn=[]),Ya=!0,pa=!1,Ba=Qn=NaN}function to(){Ln&&(Ka(Oa,La),Na&&pa&&In.rejoin(),Ln.push(In.result())),pi.point=di,pa&&xn.lineEnd()}function Ka(ga,mi){var fo=Cr(ga,mi);if(Wn&&qn.push([ga,mi]),Ya)Oa=ga,La=mi,Na=fo,Ya=!1,fo&&(xn.lineStart(),xn.point(ga,mi));else if(fo&&pa)xn.point(ga,mi);else{var po=[Ba=Math.max(zn,Math.min(jr,Ba)),Qn=Math.max(zn,Math.min(jr,Qn))],ds=[ga=Math.max(zn,Math.min(jr,ga)),mi=Math.max(zn,Math.min(jr,mi))];br(po,ds,xt,It,nr,Jt)?(pa||(xn.lineStart(),xn.point(po[0],po[1])),xn.point(ds[0],ds[1]),fo||xn.lineEnd(),Qa=!1):fo&&(xn.lineStart(),xn.point(ga,mi),Qa=!1)}Ba=ga,Qn=mi,pa=fo}return pi}}function ta(){var xt=0,It=0,nr=960,Jt=500,Cr,an,dn;return dn={stream:function(Tn){return Cr&&an===Tn?Cr:Cr=kn(xt,It,nr,Jt)(an=Tn)},extent:function(Tn){return arguments.length?(xt=+Tn[0][0],It=+Tn[0][1],nr=+Tn[1][0],Jt=+Tn[1][1],Cr=an=null,dn):[[xt,It],[nr,Jt]]}}}var ia=b(),Aa,ya,pr,vn={sphere:z,point:z,lineStart:$r,lineEnd:z,polygonStart:z,polygonEnd:z};function $r(){vn.point=Nn,vn.lineEnd=Fn}function Fn(){vn.point=vn.lineEnd=z}function Nn(xt,It){xt*=h,It*=h,Aa=xt,ya=T(It),pr=g(It),vn.point=ca}function ca(xt,It){xt*=h,It*=h;var nr=T(It),Jt=g(It),Cr=p(xt-Aa),an=g(Cr),dn=T(Cr),Tn=Jt*dn,Cn=pr*nr-ya*Jt*an,Hn=ya*nr+pr*Jt*an;ia.add(y(c(Tn*Tn+Cn*Cn),Hn)),Aa=xt,ya=nr,pr=Jt}function ra(xt){return ia.reset(),Y(xt,vn),+ia}var Un=[null,null],ua={type:"LineString",coordinates:Un};function da(xt,It){return Un[0]=xt,Un[1]=It,ra(ua)}var ur={Feature:function(xt,It){return on(xt.geometry,It)},FeatureCollection:function(xt,It){for(var nr=xt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)if(on(nr[Jt].geometry,It))return!0;return!1}},Rr={Sphere:function(){return!0},Point:function(xt,It){return rn(xt.coordinates,It)},MultiPoint:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(rn(nr[Jt],It))return!0;return!1},LineString:function(xt,It){return gn(xt.coordinates,It)},MultiLineString:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(gn(nr[Jt],It))return!0;return!1},Polygon:function(xt,It){return wn(xt.coordinates,It)},MultiPolygon:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(wn(nr[Jt],It))return!0;return!1},GeometryCollection:function(xt,It){for(var nr=xt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)if(on(nr[Jt],It))return!0;return!1}};function on(xt,It){return xt&&Rr.hasOwnProperty(xt.type)?Rr[xt.type](xt,It):!1}function rn(xt,It){return da(xt,It)===0}function gn(xt,It){for(var nr,Jt,Cr,an=0,dn=xt.length;an<dn;an++){if(Jt=da(xt[an],It),Jt===0||an>0&&(Cr=da(xt[an],xt[an-1]),Cr>0&&nr<=Cr&&Jt<=Cr&&(nr+Jt-Cr)*(1-Math.pow((nr-Jt)/Cr,2))<n*Cr))return!0;nr=Jt}return!1}function wn(xt,It){return!!fn(xt.map(pn),cr(It))}function pn(xt){return xt=xt.map(cr),xt.pop(),xt}function cr(xt){return[xt[0]*h,xt[1]*h]}function ar(xt,It){return(xt&&ur.hasOwnProperty(xt.type)?ur[xt.type]:on)(xt,It)}function Fr(xt,It,nr){var Jt=l.range(xt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(an){return[Cr,an]})}}function Jr(xt,It,nr){var Jt=l.range(xt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(an){return[an,Cr]})}}function En(){var xt,It,nr,Jt,Cr,an,dn,Tn,Cn=10,Hn=Cn,xn=90,In=360,Ln,Wn,qn,Oa,La=2.5;function Na(){return{type:"MultiLineString",coordinates:Ba()}}function Ba(){return l.range(A(Jt/xn)*xn,nr,xn).map(qn).concat(l.range(A(Tn/In)*In,dn,In).map(Oa)).concat(l.range(A(It/Cn)*Cn,xt,Cn).filter(function(Qn){return p(Qn%xn)>a}).map(Ln)).concat(l.range(A(an/Hn)*Hn,Cr,Hn).filter(function(Qn){return p(Qn%In)>a}).map(Wn))}return Na.lines=function(){return Ba().map(function(Qn){return{type:"LineString",coordinates:Qn}})},Na.outline=function(){return{type:"Polygon",coordinates:[qn(Jt).concat(Oa(dn).slice(1),qn(nr).reverse().slice(1),Oa(Tn).reverse().slice(1))]}},Na.extent=function(Qn){return arguments.length?Na.extentMajor(Qn).extentMinor(Qn):Na.extentMinor()},Na.extentMajor=function(Qn){return arguments.length?(Jt=+Qn[0][0],nr=+Qn[1][0],Tn=+Qn[0][1],dn=+Qn[1][1],Jt>nr&&(Qn=Jt,Jt=nr,nr=Qn),Tn>dn&&(Qn=Tn,Tn=dn,dn=Qn),Na.precision(La)):[[Jt,Tn],[nr,dn]]},Na.extentMinor=function(Qn){return arguments.length?(It=+Qn[0][0],xt=+Qn[1][0],an=+Qn[0][1],Cr=+Qn[1][1],It>xt&&(Qn=It,It=xt,xt=Qn),an>Cr&&(Qn=an,an=Cr,Cr=Qn),Na.precision(La)):[[It,an],[xt,Cr]]},Na.step=function(Qn){return arguments.length?Na.stepMajor(Qn).stepMinor(Qn):Na.stepMinor()},Na.stepMajor=function(Qn){return arguments.length?(xn=+Qn[0],In=+Qn[1],Na):[xn,In]},Na.stepMinor=function(Qn){return arguments.length?(Cn=+Qn[0],Hn=+Qn[1],Na):[Cn,Hn]},Na.precision=function(Qn){return arguments.length?(La=+Qn,Ln=Fr(an,Cr,90),Wn=Jr(It,xt,La),qn=Fr(Tn,dn,90),Oa=Jr(Jt,nr,La),Na):La},Na.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function Vn(){return En()()}function Kn(xt,It){var nr=xt[0]*h,Jt=xt[1]*h,Cr=It[0]*h,an=It[1]*h,dn=g(Jt),Tn=T(Jt),Cn=g(an),Hn=T(an),xn=dn*g(nr),In=dn*T(nr),Ln=Cn*g(Cr),Wn=Cn*T(Cr),qn=2*k(c(P(an-Jt)+dn*Cn*P(Cr-nr))),Oa=T(qn),La=qn?function(Na){var Ba=T(Na*=qn)/Oa,Qn=T(qn-Na)/Oa,pa=Qn*xn+Ba*Ln,Ya=Qn*In+Ba*Wn,Qa=Qn*Tn+Ba*Hn;return[y(Ya,pa)*f,y(Qa,c(pa*pa+Ya*Ya))*f]}:function(){return[nr*f,Jt*f]};return La.distance=qn,La}function jn(xt){return xt}var Bn=b(),mn=b(),Rn,Yn,la,Ga,ka={point:z,lineStart:z,lineEnd:z,polygonStart:function(){ka.lineStart=il,ka.lineEnd=Ls},polygonEnd:function(){ka.lineStart=ka.lineEnd=ka.point=z,Bn.add(p(mn)),mn.reset()},result:function(){var xt=Bn/2;return Bn.reset(),xt}};function il(){ka.point=No}function No(xt,It){ka.point=es,Rn=la=xt,Yn=Ga=It}function es(xt,It){mn.add(Ga*xt-la*It),la=xt,Ga=It}function Ls(){es(Rn,Yn)}var eo=1/0,Pi=eo,Ys=-eo,Ws=Ys,ts={point:Ml,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z,result:function(){var xt=[[eo,Pi],[Ys,Ws]];return Ys=Ws=-(Pi=eo=1/0),xt}};function Ml(xt,It){xt<eo&&(eo=xt),xt>Ys&&(Ys=xt),It<Pi&&(Pi=It),It>Ws&&(Ws=It)}var Nl=0,xu=0,hi=0,ol=0,Xs=0,Ui=0,So=0,Bl=0,_s=0,Di,Sl,Ji,Fi,io={point:Qi,lineStart:us,lineEnd:rs,polygonStart:function(){io.lineStart=Uu,io.lineEnd=js},polygonEnd:function(){io.point=Qi,io.lineStart=us,io.lineEnd=rs},result:function(){var xt=_s?[So/_s,Bl/_s]:Ui?[ol/Ui,Xs/Ui]:hi?[Nl/hi,xu/hi]:[NaN,NaN];return Nl=xu=hi=ol=Xs=Ui=So=Bl=_s=0,xt}};function Qi(xt,It){Nl+=xt,xu+=It,++hi}function us(){io.point=sl}function sl(xt,It){io.point=Bu,Qi(Ji=xt,Fi=It)}function Bu(xt,It){var nr=xt-Ji,Jt=It-Fi,Cr=c(nr*nr+Jt*Jt);ol+=Cr*(Ji+xt)/2,Xs+=Cr*(Fi+It)/2,Ui+=Cr,Qi(Ji=xt,Fi=It)}function rs(){io.point=Qi}function Uu(){io.point=ko}function js(){ff(Di,Sl)}function ko(xt,It){io.point=ff,Qi(Di=Ji=xt,Sl=Fi=It)}function ff(xt,It){var nr=xt-Ji,Jt=It-Fi,Cr=c(nr*nr+Jt*Jt);ol+=Cr*(Ji+xt)/2,Xs+=Cr*(Fi+It)/2,Ui+=Cr,Cr=Fi*xt-Ji*It,So+=Cr*(Ji+xt),Bl+=Cr*(Fi+It),_s+=Cr*3,Qi(Ji=xt,Fi=It)}function Zs(xt){this._context=xt}Zs.prototype={_radius:4.5,pointRadius:function(xt){return this._radius=xt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(xt,It){switch(this._point){case 0:{this._context.moveTo(xt,It),this._point=1;break}case 1:{this._context.lineTo(xt,It);break}default:{this._context.moveTo(xt+this._radius,It),this._context.arc(xt,It,this._radius,0,i);break}}},result:z};var Ps=b(),nu,cf,hf,ll,au,Ds={point:z,lineStart:function(){Ds.point=bu},lineEnd:function(){nu&&kl(cf,hf),Ds.point=z},polygonStart:function(){nu=!0},polygonEnd:function(){nu=null},result:function(){var xt=+Ps;return Ps.reset(),xt}};function bu(xt,It){Ds.point=kl,cf=ll=xt,hf=au=It}function kl(xt,It){ll-=xt,au-=It,Ps.add(c(ll*ll+au*au)),ll=xt,au=It}function _u(){this._string=[]}_u.prototype={_radius:4.5,_circle:Vu(4.5),pointRadius:function(xt){return(xt=+xt)!==this._radius&&(this._radius=xt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(xt,It){switch(this._point){case 0:{this._string.push("M",xt,",",It),this._point=1;break}case 1:{this._string.push("L",xt,",",It);break}default:{this._circle==null&&(this._circle=Vu(this._radius)),this._string.push("M",xt,",",It,this._circle);break}}},result:function(){if(this._string.length){var xt=this._string.join("");return this._string=[],xt}else return null}};function Vu(xt){return"m0,"+xt+"a"+xt+","+xt+" 0 1,1 0,"+-2*xt+"a"+xt+","+xt+" 0 1,1 0,"+2*xt+"z"}function iu(xt,It){var nr=4.5,Jt,Cr;function an(dn){return dn&&(typeof nr=="function"&&Cr.pointRadius(+nr.apply(this,arguments)),Y(dn,Jt(Cr))),Cr.result()}return an.area=function(dn){return Y(dn,Jt(ka)),ka.result()},an.measure=function(dn){return Y(dn,Jt(Ds)),Ds.result()},an.bounds=function(dn){return Y(dn,Jt(ts)),ts.result()},an.centroid=function(dn){return Y(dn,Jt(io)),io.result()},an.projection=function(dn){return arguments.length?(Jt=dn==null?(xt=null,jn):(xt=dn).stream,an):xt},an.context=function(dn){return arguments.length?(Cr=dn==null?(It=null,new _u):new Zs(It=dn),typeof nr!="function"&&Cr.pointRadius(nr),an):It},an.pointRadius=function(dn){return arguments.length?(nr=typeof dn=="function"?dn:(Cr.pointRadius(+dn),+dn),an):nr},an.projection(xt).context(It)}function vf(xt){return{stream:ul(xt)}}function ul(xt){return function(It){var nr=new wu;for(var Jt in xt)nr[Jt]=xt[Jt];return nr.stream=It,nr}}function wu(){}wu.prototype={constructor:wu,point:function(xt,It){this.stream.point(xt,It)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ou(xt,It,nr){var Jt=xt.clipExtent&&xt.clipExtent();return xt.scale(150).translate([0,0]),Jt!=null&&xt.clipExtent(null),Y(nr,xt.stream(ts)),It(ts.result()),Jt!=null&&xt.clipExtent(Jt),xt}function ws(xt,It,nr){return ou(xt,function(Jt){var Cr=It[1][0]-It[0][0],an=It[1][1]-It[0][1],dn=Math.min(Cr/(Jt[1][0]-Jt[0][0]),an/(Jt[1][1]-Jt[0][1])),Tn=+It[0][0]+(Cr-dn*(Jt[1][0]+Jt[0][0]))/2,Cn=+It[0][1]+(an-dn*(Jt[1][1]+Jt[0][1]))/2;xt.scale(150*dn).translate([Tn,Cn])},nr)}function Ul(xt,It,nr){return ws(xt,[[0,0],It],nr)}function Tu(xt,It,nr){return ou(xt,function(Jt){var Cr=+It,an=Cr/(Jt[1][0]-Jt[0][0]),dn=(Cr-an*(Jt[1][0]+Jt[0][0]))/2,Tn=-an*Jt[0][1];xt.scale(150*an).translate([dn,Tn])},nr)}function Hu(xt,It,nr){return ou(xt,function(Jt){var Cr=+It,an=Cr/(Jt[1][1]-Jt[0][1]),dn=-an*Jt[0][0],Tn=(Cr-an*(Jt[1][1]+Jt[0][1]))/2;xt.scale(150*an).translate([dn,Tn])},nr)}var Gu=16,su=g(30*h);function pf(xt,It){return+It?ns(xt,It):Yu(xt)}function Yu(xt){return ul({point:function(It,nr){It=xt(It,nr),this.stream.point(It[0],It[1])}})}function ns(xt,It){function nr(Jt,Cr,an,dn,Tn,Cn,Hn,xn,In,Ln,Wn,qn,Oa,La){var Na=Hn-Jt,Ba=xn-Cr,Qn=Na*Na+Ba*Ba;if(Qn>4*It&&Oa--){var pa=dn+Ln,Ya=Tn+Wn,Qa=Cn+qn,pi=c(pa*pa+Ya*Ya+Qa*Qa),di=k(Qa/=pi),yi=p(p(Qa)-1)<a||p(an-In)<a?(an+In)/2:y(Ya,pa),Ti=xt(yi,di),oi=Ti[0],mo=Ti[1],to=oi-Jt,Ka=mo-Cr,ga=Ba*to-Na*Ka;(ga*ga/Qn>It||p((Na*to+Ba*Ka)/Qn-.5)>.3||dn*Ln+Tn*Wn+Cn*qn<su)&&(nr(Jt,Cr,an,dn,Tn,Cn,oi,mo,yi,pa/=pi,Ya/=pi,Qa,Oa,La),La.point(oi,mo),nr(oi,mo,yi,pa,Ya,Qa,Hn,xn,In,Ln,Wn,qn,Oa,La))}}return function(Jt){var Cr,an,dn,Tn,Cn,Hn,xn,In,Ln,Wn,qn,Oa,La={point:Na,lineStart:Ba,lineEnd:pa,polygonStart:function(){Jt.polygonStart(),La.lineStart=Ya},polygonEnd:function(){Jt.polygonEnd(),La.lineStart=Ba}};function Na(di,yi){di=xt(di,yi),Jt.point(di[0],di[1])}function Ba(){In=NaN,La.point=Qn,Jt.lineStart()}function Qn(di,yi){var Ti=ne([di,yi]),oi=xt(di,yi);nr(In,Ln,xn,Wn,qn,Oa,In=oi[0],Ln=oi[1],xn=di,Wn=Ti[0],qn=Ti[1],Oa=Ti[2],Gu,Jt),Jt.point(In,Ln)}function pa(){La.point=Na,Jt.lineEnd()}function Ya(){Ba(),La.point=Qa,La.lineEnd=pi}function Qa(di,yi){Qn(Cr=di,yi),an=In,dn=Ln,Tn=Wn,Cn=qn,Hn=Oa,La.point=Qn}function pi(){nr(In,Ln,xn,Wn,qn,Oa,an,dn,Cr,Tn,Cn,Hn,Gu,Jt),La.lineEnd=pa,pa()}return La}}var El=ul({point:function(xt,It){this.stream.point(xt*h,It*h)}});function Cl(xt){return ul({point:function(It,nr){var Jt=xt(It,nr);return this.stream.point(Jt[0],Jt[1])}})}function Au(xt,It,nr,Jt,Cr){function an(dn,Tn){return dn*=Jt,Tn*=Cr,[It+xt*dn,nr-xt*Tn]}return an.invert=function(dn,Tn){return[(dn-It)/xt*Jt,(nr-Tn)/xt*Cr]},an}function Ts(xt,It,nr,Jt,Cr,an){var dn=g(an),Tn=T(an),Cn=dn*xt,Hn=Tn*xt,xn=dn/xt,In=Tn/xt,Ln=(Tn*nr-dn*It)/xt,Wn=(Tn*It+dn*nr)/xt;function qn(Oa,La){return Oa*=Jt,La*=Cr,[Cn*Oa-Hn*La+It,nr-Hn*Oa-Cn*La]}return qn.invert=function(Oa,La){return[Jt*(xn*Oa-In*La+Ln),Cr*(Wn-In*Oa-xn*La)]},qn}function Eo(xt){return lu(function(){return xt})()}function lu(xt){var It,nr=150,Jt=480,Cr=250,an=0,dn=0,Tn=0,Cn=0,Hn=0,xn,In=0,Ln=1,Wn=1,qn=null,Oa=er,La=null,Na,Ba,Qn,pa=jn,Ya=.5,Qa,pi,di,yi,Ti;function oi(ga){return di(ga[0]*h,ga[1]*h)}function mo(ga){return ga=di.invert(ga[0],ga[1]),ga&&[ga[0]*f,ga[1]*f]}oi.stream=function(ga){return yi&&Ti===ga?yi:yi=El(Cl(xn)(Oa(Qa(pa(Ti=ga)))))},oi.preclip=function(ga){return arguments.length?(Oa=ga,qn=void 0,Ka()):Oa},oi.postclip=function(ga){return arguments.length?(pa=ga,La=Na=Ba=Qn=null,Ka()):pa},oi.clipAngle=function(ga){return arguments.length?(Oa=+ga?Pr(qn=ga*h):(qn=null,er),Ka()):qn*f},oi.clipExtent=function(ga){return arguments.length?(pa=ga==null?(La=Na=Ba=Qn=null,jn):kn(La=+ga[0][0],Na=+ga[0][1],Ba=+ga[1][0],Qn=+ga[1][1]),Ka()):La==null?null:[[La,Na],[Ba,Qn]]},oi.scale=function(ga){return arguments.length?(nr=+ga,to()):nr},oi.translate=function(ga){return arguments.length?(Jt=+ga[0],Cr=+ga[1],to()):[Jt,Cr]},oi.center=function(ga){return arguments.length?(an=ga[0]%360*h,dn=ga[1]%360*h,to()):[an*f,dn*f]},oi.rotate=function(ga){return arguments.length?(Tn=ga[0]%360*h,Cn=ga[1]%360*h,Hn=ga.length>2?ga[2]%360*h:0,to()):[Tn*f,Cn*f,Hn*f]},oi.angle=function(ga){return arguments.length?(In=ga%360*h,to()):In*f},oi.reflectX=function(ga){return arguments.length?(Ln=ga?-1:1,to()):Ln<0},oi.reflectY=function(ga){return arguments.length?(Wn=ga?-1:1,to()):Wn<0},oi.precision=function(ga){return arguments.length?(Qa=pf(pi,Ya=ga*ga),Ka()):c(Ya)},oi.fitExtent=function(ga,mi){return ws(oi,ga,mi)},oi.fitSize=function(ga,mi){return Ul(oi,ga,mi)},oi.fitWidth=function(ga,mi){return Tu(oi,ga,mi)},oi.fitHeight=function(ga,mi){return Hu(oi,ga,mi)};function to(){var ga=Ts(nr,0,0,Ln,Wn,In).apply(null,It(an,dn)),mi=(In?Ts:Au)(nr,Jt-ga[0],Cr-ga[1],Ln,Wn,In);return xn=pt(Tn,Cn,Hn),pi=ot(It,mi),di=ot(xn,pi),Qa=pf(pi,Ya),Ka()}function Ka(){return yi=Ti=null,oi}return function(){return It=xt.apply(this,arguments),oi.invert=It.invert&&mo,to()}}function Rs(xt){var It=0,nr=r/3,Jt=lu(xt),Cr=Jt(It,nr);return Cr.parallels=function(an){return arguments.length?Jt(It=an[0]*h,nr=an[1]*h):[It*f,nr*f]},Cr}function Is(xt){var It=g(xt);function nr(Jt,Cr){return[Jt*It,T(Cr)/It]}return nr.invert=function(Jt,Cr){return[Jt/It,k(Cr*It)]},nr}function lo(xt,It){var nr=T(xt),Jt=(nr+T(It))/2;if(p(Jt)<a)return Is(xt);var Cr=1+nr*(2*Jt-nr),an=c(Cr)/Jt;function dn(Tn,Cn){var Hn=c(Cr-2*Jt*T(Cn))/Jt;return[Hn*T(Tn*=Jt),an-Hn*g(Tn)]}return dn.invert=function(Tn,Cn){var Hn=an-Cn,xn=y(Tn,p(Hn))*x(Hn);return Hn*Jt<0&&(xn-=r*x(Tn)*x(Hn)),[xn/Jt,k((Cr-(Tn*Tn+Hn*Hn)*Jt*Jt)/(2*Jt))]},dn}function Vl(){return Rs(lo).scale(155.424).center([0,33.6442])}function Hl(){return Vl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fl(xt){var It=xt.length;return{point:function(nr,Jt){for(var Cr=-1;++Cr<It;)xt[Cr].point(nr,Jt)},sphere:function(){for(var nr=-1;++nr<It;)xt[nr].sphere()},lineStart:function(){for(var nr=-1;++nr<It;)xt[nr].lineStart()},lineEnd:function(){for(var nr=-1;++nr<It;)xt[nr].lineEnd()},polygonStart:function(){for(var nr=-1;++nr<It;)xt[nr].polygonStart()},polygonEnd:function(){for(var nr=-1;++nr<It;)xt[nr].polygonEnd()}}}function As(){var xt,It,nr=Hl(),Jt,Cr=Vl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),an,dn=Vl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Tn,Cn,Hn={point:function(Ln,Wn){Cn=[Ln,Wn]}};function xn(Ln){var Wn=Ln[0],qn=Ln[1];return Cn=null,Jt.point(Wn,qn),Cn||(an.point(Wn,qn),Cn)||(Tn.point(Wn,qn),Cn)}xn.invert=function(Ln){var Wn=nr.scale(),qn=nr.translate(),Oa=(Ln[0]-qn[0])/Wn,La=(Ln[1]-qn[1])/Wn;return(La>=.12&&La<.234&&Oa>=-.425&&Oa<-.214?Cr:La>=.166&&La<.234&&Oa>=-.214&&Oa<-.115?dn:nr).invert(Ln)},xn.stream=function(Ln){return xt&&It===Ln?xt:xt=fl([nr.stream(It=Ln),Cr.stream(Ln),dn.stream(Ln)])},xn.precision=function(Ln){return arguments.length?(nr.precision(Ln),Cr.precision(Ln),dn.precision(Ln),In()):nr.precision()},xn.scale=function(Ln){return arguments.length?(nr.scale(Ln),Cr.scale(Ln*.35),dn.scale(Ln),xn.translate(nr.translate())):nr.scale()},xn.translate=function(Ln){if(!arguments.length)return nr.translate();var Wn=nr.scale(),qn=+Ln[0],Oa=+Ln[1];return Jt=nr.translate(Ln).clipExtent([[qn-.455*Wn,Oa-.238*Wn],[qn+.455*Wn,Oa+.238*Wn]]).stream(Hn),an=Cr.translate([qn-.307*Wn,Oa+.201*Wn]).clipExtent([[qn-.425*Wn+a,Oa+.12*Wn+a],[qn-.214*Wn-a,Oa+.234*Wn-a]]).stream(Hn),Tn=dn.translate([qn-.205*Wn,Oa+.212*Wn]).clipExtent([[qn-.214*Wn+a,Oa+.166*Wn+a],[qn-.115*Wn-a,Oa+.234*Wn-a]]).stream(Hn),In()},xn.fitExtent=function(Ln,Wn){return ws(xn,Ln,Wn)},xn.fitSize=function(Ln,Wn){return Ul(xn,Ln,Wn)},xn.fitWidth=function(Ln,Wn){return Tu(xn,Ln,Wn)},xn.fitHeight=function(Ln,Wn){return Hu(xn,Ln,Wn)};function In(){return xt=It=null,xn}return xn.scale(1070)}function Gl(xt){return function(It,nr){var Jt=g(It),Cr=g(nr),an=xt(Jt*Cr);return[an*Cr*T(It),an*T(nr)]}}function Ll(xt){return function(It,nr){var Jt=c(It*It+nr*nr),Cr=xt(Jt),an=T(Cr),dn=g(Cr);return[y(It*an,Jt*dn),k(Jt&&nr*an/Jt)]}}var uu=Gl(function(xt){return c(2/(1+xt))});uu.invert=Ll(function(xt){return 2*k(xt/2)});function Yl(){return Eo(uu).scale(124.75).clipAngle(180-.001)}var cl=Gl(function(xt){return(xt=S(xt))&&xt/T(xt)});cl.invert=Ll(function(xt){return xt});function df(){return Eo(cl).scale(79.4188).clipAngle(180-.001)}function fs(xt,It){return[xt,M(L((u+It)/2))]}fs.invert=function(xt,It){return[xt,2*v(m(It))-u]};function zf(){return Mu(fs).scale(961/i)}function Mu(xt){var It=Eo(xt),nr=It.center,Jt=It.scale,Cr=It.translate,an=It.clipExtent,dn=null,Tn,Cn,Hn;It.scale=function(In){return arguments.length?(Jt(In),xn()):Jt()},It.translate=function(In){return arguments.length?(Cr(In),xn()):Cr()},It.center=function(In){return arguments.length?(nr(In),xn()):nr()},It.clipExtent=function(In){return arguments.length?(In==null?dn=Tn=Cn=Hn=null:(dn=+In[0][0],Tn=+In[0][1],Cn=+In[1][0],Hn=+In[1][1]),xn()):dn==null?null:[[dn,Tn],[Cn,Hn]]};function xn(){var In=r*Jt(),Ln=It(xr(It.rotate()).invert([0,0]));return an(dn==null?[[Ln[0]-In,Ln[1]-In],[Ln[0]+In,Ln[1]+In]]:xt===fs?[[Math.max(Ln[0]-In,dn),Tn],[Math.min(Ln[0]+In,Cn),Hn]]:[[dn,Math.max(Ln[1]-In,Tn)],[Cn,Math.min(Ln[1]+In,Hn)]])}return xn()}function Pl(xt){return L((u+xt)/2)}function Wl(xt,It){var nr=g(xt),Jt=xt===It?T(xt):M(nr/g(It))/M(Pl(It)/Pl(xt)),Cr=nr*_(Pl(xt),Jt)/Jt;if(!Jt)return fs;function an(dn,Tn){Cr>0?Tn<-u+a&&(Tn=-u+a):Tn>u-a&&(Tn=u-a);var Cn=Cr/_(Pl(Tn),Jt);return[Cn*T(Jt*dn),Cr-Cn*g(Jt*dn)]}return an.invert=function(dn,Tn){var Cn=Cr-Tn,Hn=x(Jt)*c(dn*dn+Cn*Cn),xn=y(dn,p(Cn))*x(Cn);return Cn*Jt<0&&(xn-=r*x(dn)*x(Cn)),[xn/Jt,2*v(_(Cr/Hn,1/Jt))-u]},an}function hl(){return Rs(Wl).scale(109.5).parallels([30,30])}function Xl(xt,It){return[xt,It]}Xl.invert=Xl;function Wu(){return Eo(Xl).scale(152.63)}function Xu(xt,It){var nr=g(xt),Jt=xt===It?T(xt):(nr-g(It))/(It-xt),Cr=nr/Jt+xt;if(p(Jt)<a)return Xl;function an(dn,Tn){var Cn=Cr-Tn,Hn=Jt*dn;return[Cn*T(Hn),Cr-Cn*g(Hn)]}return an.invert=function(dn,Tn){var Cn=Cr-Tn,Hn=y(dn,p(Cn))*x(Cn);return Cn*Jt<0&&(Hn-=r*x(dn)*x(Cn)),[Hn/Jt,Cr-x(Jt)*c(dn*dn+Cn*Cn)]},an}function Ff(){return Rs(Xu).scale(131.154).center([0,13.9389])}var Ri=1.340264,Dl=-.081106,vl=893e-6,as=.003796,cs=c(3)/2,jl=12;function uo(xt,It){var nr=k(cs*T(It)),Jt=nr*nr,Cr=Jt*Jt*Jt;return[xt*g(nr)/(cs*(Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt))),nr*(Ri+Dl*Jt+Cr*(vl+as*Jt))]}uo.invert=function(xt,It){for(var nr=It,Jt=nr*nr,Cr=Jt*Jt*Jt,an=0,dn,Tn,Cn;an<jl&&(Tn=nr*(Ri+Dl*Jt+Cr*(vl+as*Jt))-It,Cn=Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt),nr-=dn=Tn/Cn,Jt=nr*nr,Cr=Jt*Jt*Jt,!(p(dn)<n));++an);return[cs*xt*(Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt))/g(nr),k(T(nr)/cs)]};function ju(){return Eo(uo).scale(177.158)}function hs(xt,It){var nr=g(It),Jt=g(xt)*nr;return[nr*T(xt)/Jt,T(It)/Jt]}hs.invert=Ll(v);function Ks(){return Eo(hs).scale(144.049).clipAngle(60)}function Js(){var xt=1,It=0,nr=0,Jt=1,Cr=1,an=0,dn,Tn,Cn=null,Hn,xn,In,Ln=1,Wn=1,qn=ul({point:function(pa,Ya){var Qa=Qn([pa,Ya]);this.stream.point(Qa[0],Qa[1])}}),Oa=jn,La,Na;function Ba(){return Ln=xt*Jt,Wn=xt*Cr,La=Na=null,Qn}function Qn(pa){var Ya=pa[0]*Ln,Qa=pa[1]*Wn;if(an){var pi=Qa*dn-Ya*Tn;Ya=Ya*dn+Qa*Tn,Qa=pi}return[Ya+It,Qa+nr]}return Qn.invert=function(pa){var Ya=pa[0]-It,Qa=pa[1]-nr;if(an){var pi=Qa*dn+Ya*Tn;Ya=Ya*dn-Qa*Tn,Qa=pi}return[Ya/Ln,Qa/Wn]},Qn.stream=function(pa){return La&&Na===pa?La:La=qn(Oa(Na=pa))},Qn.postclip=function(pa){return arguments.length?(Oa=pa,Cn=Hn=xn=In=null,Ba()):Oa},Qn.clipExtent=function(pa){return arguments.length?(Oa=pa==null?(Cn=Hn=xn=In=null,jn):kn(Cn=+pa[0][0],Hn=+pa[0][1],xn=+pa[1][0],In=+pa[1][1]),Ba()):Cn==null?null:[[Cn,Hn],[xn,In]]},Qn.scale=function(pa){return arguments.length?(xt=+pa,Ba()):xt},Qn.translate=function(pa){return arguments.length?(It=+pa[0],nr=+pa[1],Ba()):[It,nr]},Qn.angle=function(pa){return arguments.length?(an=pa%360*h,Tn=T(an),dn=g(an),Ba()):an*f},Qn.reflectX=function(pa){return arguments.length?(Jt=pa?-1:1,Ba()):Jt<0},Qn.reflectY=function(pa){return arguments.length?(Cr=pa?-1:1,Ba()):Cr<0},Qn.fitExtent=function(pa,Ya){return ws(Qn,pa,Ya)},Qn.fitSize=function(pa,Ya){return Ul(Qn,pa,Ya)},Qn.fitWidth=function(pa,Ya){return Tu(Qn,pa,Ya)},Qn.fitHeight=function(pa,Ya){return Hu(Qn,pa,Ya)},Qn}function zs(xt,It){var nr=It*It,Jt=nr*nr;return[xt*(.8707-.131979*nr+Jt*(-.013791+Jt*(.003971*nr-.001529*Jt))),It*(1.007226+nr*(.015085+Jt*(-.044475+.028874*nr-.005916*Jt)))]}zs.invert=function(xt,It){var nr=It,Jt=25,Cr;do{var an=nr*nr,dn=an*an;nr-=Cr=(nr*(1.007226+an*(.015085+dn*(-.044475+.028874*an-.005916*dn)))-It)/(1.007226+an*(.015085*3+dn*(-.044475*7+.028874*9*an-.005916*11*dn)))}while(p(Cr)>a&&--Jt>0);return[xt/(.8707+(an=nr*nr)*(-.131979+an*(-.013791+an*an*an*(.003971-.001529*an)))),nr]};function vs(){return Eo(zs).scale(175.295)}function Vi(xt,It){return[g(It)*T(xt),T(It)]}Vi.invert=Ll(k);function Co(){return Eo(Vi).scale(249.5).clipAngle(90+a)}function ps(xt,It){var nr=g(It),Jt=1+g(xt)*nr;return[nr*T(xt)/Jt,T(It)/Jt]}ps.invert=Ll(function(xt){return 2*v(xt)});function Zu(){return Eo(ps).scale(250).clipAngle(142)}function fu(xt,It){return[M(L((u+It)/2)),-xt]}fu.invert=function(xt,It){return[-It,2*v(m(xt))-u]};function Ku(){var xt=Mu(fu),It=xt.center,nr=xt.rotate;return xt.center=function(Jt){return arguments.length?It([-Jt[1],Jt[0]]):(Jt=It(),[Jt[1],-Jt[0]])},xt.rotate=function(Jt){return arguments.length?nr([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):(Jt=nr(),[Jt[0],Jt[1],Jt[2]-90])},nr([0,0,90]).scale(159.155)}d.geoAlbers=Hl,d.geoAlbersUsa=As,d.geoArea=j,d.geoAzimuthalEqualArea=Yl,d.geoAzimuthalEqualAreaRaw=uu,d.geoAzimuthalEquidistant=df,d.geoAzimuthalEquidistantRaw=cl,d.geoBounds=it,d.geoCentroid=Xe,d.geoCircle=Dr,d.geoClipAntimeridian=er,d.geoClipCircle=Pr,d.geoClipExtent=ta,d.geoClipRectangle=kn,d.geoConicConformal=hl,d.geoConicConformalRaw=Wl,d.geoConicEqualArea=Vl,d.geoConicEqualAreaRaw=lo,d.geoConicEquidistant=Ff,d.geoConicEquidistantRaw=Xu,d.geoContains=ar,d.geoDistance=da,d.geoEqualEarth=ju,d.geoEqualEarthRaw=uo,d.geoEquirectangular=Wu,d.geoEquirectangularRaw=Xl,d.geoGnomonic=Ks,d.geoGnomonicRaw=hs,d.geoGraticule=En,d.geoGraticule10=Vn,d.geoIdentity=Js,d.geoInterpolate=Kn,d.geoLength=ra,d.geoMercator=zf,d.geoMercatorRaw=fs,d.geoNaturalEarth1=vs,d.geoNaturalEarth1Raw=zs,d.geoOrthographic=Co,d.geoOrthographicRaw=Vi,d.geoPath=iu,d.geoProjection=Eo,d.geoProjectionMutator=lu,d.geoRotation=xr,d.geoStereographic=Zu,d.geoStereographicRaw=ps,d.geoStream=Y,d.geoTransform=vf,d.geoTransverseMercator=Ku,d.geoTransverseMercatorRaw=fu,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(Qe,Ce){return Qe.parent===Ce.parent?1:2}function b(Qe){return Qe.reduce(w,0)/Qe.length}function w(Qe,Ce){return Qe+Ce.x}function e(Qe){return 1+Qe.reduce(o,0)}function o(Qe,Ce){return Math.max(Qe,Ce.y)}function a(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[0];return Qe}function n(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[Ce.length-1];return Qe}function r(){var Qe=l,Ce=1,je=1,rt=!1;function ut(Pt){var St,Nt=0;Pt.eachAfter(function(gt){var Et=gt.children;Et?(gt.x=b(Et),gt.y=e(Et)):(gt.x=St?Nt+=Qe(gt,St):0,gt.y=0,St=gt)});var Xt=a(Pt),Ot=n(Pt),Kt=Xt.x-Qe(Xt,Ot)/2,Je=Ot.x+Qe(Ot,Xt)/2;return Pt.eachAfter(rt?function(gt){gt.x=(gt.x-Pt.x)*Ce,gt.y=(Pt.y-gt.y)*je}:function(gt){gt.x=(gt.x-Kt)/(Je-Kt)*Ce,gt.y=(1-(Pt.y?gt.y/Pt.y:1))*je})}return ut.separation=function(Pt){return arguments.length?(Qe=Pt,ut):Qe},ut.size=function(Pt){return arguments.length?(rt=!1,Ce=+Pt[0],je=+Pt[1],ut):rt?null:[Ce,je]},ut.nodeSize=function(Pt){return arguments.length?(rt=!0,Ce=+Pt[0],je=+Pt[1],ut):rt?[Ce,je]:null},ut}function u(Qe){var Ce=0,je=Qe.children,rt=je&&je.length;if(!rt)Ce=1;else for(;--rt>=0;)Ce+=je[rt].value;Qe.value=Ce}function s(){return this.eachAfter(u)}function i(Qe){var Ce=this,je,rt=[Ce],ut,Pt,St;do for(je=rt.reverse(),rt=[];Ce=je.pop();)if(Qe(Ce),ut=Ce.children,ut)for(Pt=0,St=ut.length;Pt<St;++Pt)rt.push(ut[Pt]);while(rt.length);return this}function f(Qe){for(var Ce=this,je=[Ce],rt,ut;Ce=je.pop();)if(Qe(Ce),rt=Ce.children,rt)for(ut=rt.length-1;ut>=0;--ut)je.push(rt[ut]);return this}function h(Qe){for(var Ce=this,je=[Ce],rt=[],ut,Pt,St;Ce=je.pop();)if(rt.push(Ce),ut=Ce.children,ut)for(Pt=0,St=ut.length;Pt<St;++Pt)je.push(ut[Pt]);for(;Ce=rt.pop();)Qe(Ce);return this}function p(Qe){return this.eachAfter(function(Ce){for(var je=+Qe(Ce.data)||0,rt=Ce.children,ut=rt&&rt.length;--ut>=0;)je+=rt[ut].value;Ce.value=je})}function v(Qe){return this.eachBefore(function(Ce){Ce.children&&Ce.children.sort(Qe)})}function y(Qe){for(var Ce=this,je=g(Ce,Qe),rt=[Ce];Ce!==je;)Ce=Ce.parent,rt.push(Ce);for(var ut=rt.length;Qe!==je;)rt.splice(ut,0,Qe),Qe=Qe.parent;return rt}function g(Qe,Ce){if(Qe===Ce)return Qe;var je=Qe.ancestors(),rt=Ce.ancestors(),ut=null;for(Qe=je.pop(),Ce=rt.pop();Qe===Ce;)ut=Qe,Qe=je.pop(),Ce=rt.pop();return ut}function A(){for(var Qe=this,Ce=[Qe];Qe=Qe.parent;)Ce.push(Qe);return Ce}function m(){var Qe=[];return this.each(function(Ce){Qe.push(Ce)}),Qe}function M(){var Qe=[];return this.eachBefore(function(Ce){Ce.children||Qe.push(Ce)}),Qe}function _(){var Qe=this,Ce=[];return Qe.each(function(je){je!==Qe&&Ce.push({source:je.parent,target:je})}),Ce}function T(Qe,Ce){var je=new k(Qe),rt=+Qe.value&&(je.value=Qe.value),ut,Pt=[je],St,Nt,Xt,Ot;for(Ce==null&&(Ce=c);ut=Pt.pop();)if(rt&&(ut.value=+ut.data.value),(Nt=Ce(ut.data))&&(Ot=Nt.length))for(ut.children=new Array(Ot),Xt=Ot-1;Xt>=0;--Xt)Pt.push(St=ut.children[Xt]=new k(Nt[Xt])),St.parent=ut,St.depth=ut.depth+1;return je.eachBefore(S)}function x(){return T(this).eachBefore(L)}function c(Qe){return Qe.children}function L(Qe){Qe.data=Qe.data.data}function S(Qe){var Ce=0;do Qe.height=Ce;while((Qe=Qe.parent)&&Qe.height<++Ce)}function k(Qe){this.data=Qe,this.depth=this.height=0,this.parent=null}k.prototype=T.prototype={constructor:k,count:s,each:i,eachAfter:h,eachBefore:f,sum:p,sort:v,path:y,ancestors:A,descendants:m,leaves:M,links:_,copy:x};var P=Array.prototype.slice;function z(Qe){for(var Ce=Qe.length,je,rt;Ce;)rt=Math.random()*Ce--|0,je=Qe[Ce],Qe[Ce]=Qe[rt],Qe[rt]=je;return Qe}function I(Qe){for(var Ce=0,je=(Qe=z(P.call(Qe))).length,rt=[],ut,Pt;Ce<je;)ut=Qe[Ce],Pt&&O(Pt,ut)?++Ce:(Pt=Y(rt=R(rt,ut)),Ce=0);return Pt}function R(Qe,Ce){var je,rt;if(F(Ce,Qe))return[Ce];for(je=0;je<Qe.length;++je)if(D(Ce,Qe[je])&&F(q(Qe[je],Ce),Qe))return[Qe[je],Ce];for(je=0;je<Qe.length-1;++je)for(rt=je+1;rt<Qe.length;++rt)if(D(q(Qe[je],Qe[rt]),Ce)&&D(q(Qe[je],Ce),Qe[rt])&&D(q(Qe[rt],Ce),Qe[je])&&F($(Qe[je],Qe[rt],Ce),Qe))return[Qe[je],Qe[rt],Ce];throw new Error}function D(Qe,Ce){var je=Qe.r-Ce.r,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je<0||je*je<rt*rt+ut*ut}function O(Qe,Ce){var je=Qe.r-Ce.r+1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je>0&&je*je>rt*rt+ut*ut}function F(Qe,Ce){for(var je=0;je<Ce.length;++je)if(!O(Qe,Ce[je]))return!1;return!0}function Y(Qe){switch(Qe.length){case 1:return X(Qe[0]);case 2:return q(Qe[0],Qe[1]);case 3:return $(Qe[0],Qe[1],Qe[2])}}function X(Qe){return{x:Qe.x,y:Qe.y,r:Qe.r}}function q(Qe,Ce){var je=Qe.x,rt=Qe.y,ut=Qe.r,Pt=Ce.x,St=Ce.y,Nt=Ce.r,Xt=Pt-je,Ot=St-rt,Kt=Nt-ut,Je=Math.sqrt(Xt*Xt+Ot*Ot);return{x:(je+Pt+Xt/Je*Kt)/2,y:(rt+St+Ot/Je*Kt)/2,r:(Je+ut+Nt)/2}}function $(Qe,Ce,je){var rt=Qe.x,ut=Qe.y,Pt=Qe.r,St=Ce.x,Nt=Ce.y,Xt=Ce.r,Ot=je.x,Kt=je.y,Je=je.r,gt=rt-St,Et=rt-Ot,rr=ut-Nt,vr=ut-Kt,or=Xt-Pt,dr=Je-Pt,Lr=rt*rt+ut*ut-Pt*Pt,kr=Lr-St*St-Nt*Nt+Xt*Xt,tr=Lr-Ot*Ot-Kt*Kt+Je*Je,Or=Et*rr-gt*vr,et=(rr*tr-vr*kr)/(Or*2)-rt,we=(vr*or-rr*dr)/Or,Se=(Et*kr-gt*tr)/(Or*2)-ut,De=(gt*dr-Et*or)/Or,Xe=we*we+De*De-1,$e=2*(Pt+et*we+Se*De),ot=et*et+Se*Se-Pt*Pt,st=-(Xe?($e+Math.sqrt($e*$e-4*Xe*ot))/(2*Xe):ot/$e);return{x:rt+et+we*st,y:ut+Se+De*st,r:st}}function V(Qe,Ce,je){var rt=Qe.x-Ce.x,ut,Pt,St=Qe.y-Ce.y,Nt,Xt,Ot=rt*rt+St*St;Ot?(Pt=Ce.r+je.r,Pt*=Pt,Xt=Qe.r+je.r,Xt*=Xt,Pt>Xt?(ut=(Ot+Xt-Pt)/(2*Ot),Nt=Math.sqrt(Math.max(0,Xt/Ot-ut*ut)),je.x=Qe.x-ut*rt-Nt*St,je.y=Qe.y-ut*St+Nt*rt):(ut=(Ot+Pt-Xt)/(2*Ot),Nt=Math.sqrt(Math.max(0,Pt/Ot-ut*ut)),je.x=Ce.x+ut*rt-Nt*St,je.y=Ce.y+ut*St+Nt*rt)):(je.x=Ce.x+je.r,je.y=Ce.y)}function K(Qe,Ce){var je=Qe.r+Ce.r-1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je>0&&je*je>rt*rt+ut*ut}function se(Qe){var Ce=Qe._,je=Qe.next._,rt=Ce.r+je.r,ut=(Ce.x*je.r+je.x*Ce.r)/rt,Pt=(Ce.y*je.r+je.y*Ce.r)/rt;return ut*ut+Pt*Pt}function ue(Qe){this._=Qe,this.next=null,this.previous=null}function oe(Qe){if(!(ut=Qe.length))return 0;var Ce,je,rt,ut,Pt,St,Nt,Xt,Ot,Kt,Je;if(Ce=Qe[0],Ce.x=0,Ce.y=0,!(ut>1))return Ce.r;if(je=Qe[1],Ce.x=-je.r,je.x=Ce.r,je.y=0,!(ut>2))return Ce.r+je.r;V(je,Ce,rt=Qe[2]),Ce=new ue(Ce),je=new ue(je),rt=new ue(rt),Ce.next=rt.previous=je,je.next=Ce.previous=rt,rt.next=je.previous=Ce;e:for(Nt=3;Nt<ut;++Nt){V(Ce._,je._,rt=Qe[Nt]),rt=new ue(rt),Xt=je.next,Ot=Ce.previous,Kt=je._.r,Je=Ce._.r;do if(Kt<=Je){if(K(Xt._,rt._)){je=Xt,Ce.next=je,je.previous=Ce,--Nt;continue e}Kt+=Xt._.r,Xt=Xt.next}else{if(K(Ot._,rt._)){Ce=Ot,Ce.next=je,je.previous=Ce,--Nt;continue e}Je+=Ot._.r,Ot=Ot.previous}while(Xt!==Ot.next);for(rt.previous=Ce,rt.next=je,Ce.next=je.previous=je=rt,Pt=se(Ce);(rt=rt.next)!==je;)(St=se(rt))<Pt&&(Ce=rt,Pt=St);je=Ce.next}for(Ce=[je._],rt=je;(rt=rt.next)!==je;)Ce.push(rt._);for(rt=I(Ce),Nt=0;Nt<ut;++Nt)Ce=Qe[Nt],Ce.x-=rt.x,Ce.y-=rt.y;return rt.r}function U(Qe){return oe(Qe),Qe}function G(Qe){return Qe==null?null:re(Qe)}function re(Qe){if(typeof Qe!="function")throw new Error;return Qe}function ee(){return 0}function j(Qe){return function(){return Qe}}function Q(Qe){return Math.sqrt(Qe.value)}function ne(){var Qe=null,Ce=1,je=1,rt=ee;function ut(Pt){return Pt.x=Ce/2,Pt.y=je/2,Qe?Pt.eachBefore(ae(Qe)).eachAfter(ie(rt,.5)).eachBefore(fe(1)):Pt.eachBefore(ae(Q)).eachAfter(ie(ee,1)).eachAfter(ie(rt,Pt.r/Math.min(Ce,je))).eachBefore(fe(Math.min(Ce,je)/(2*Pt.r))),Pt}return ut.radius=function(Pt){return arguments.length?(Qe=G(Pt),ut):Qe},ut.size=function(Pt){return arguments.length?(Ce=+Pt[0],je=+Pt[1],ut):[Ce,je]},ut.padding=function(Pt){return arguments.length?(rt=typeof Pt=="function"?Pt:j(+Pt),ut):rt},ut}function ae(Qe){return function(Ce){Ce.children||(Ce.r=Math.max(0,+Qe(Ce)||0))}}function ie(Qe,Ce){return function(je){if(rt=je.children){var rt,ut,Pt=rt.length,St=Qe(je)*Ce||0,Nt;if(St)for(ut=0;ut<Pt;++ut)rt[ut].r+=St;if(Nt=oe(rt),St)for(ut=0;ut<Pt;++ut)rt[ut].r-=St;je.r=Nt+St}}}function fe(Qe){return function(Ce){var je=Ce.parent;Ce.r*=Qe,je&&(Ce.x=je.x+Qe*Ce.x,Ce.y=je.y+Qe*Ce.y)}}function me(Qe){Qe.x0=Math.round(Qe.x0),Qe.y0=Math.round(Qe.y0),Qe.x1=Math.round(Qe.x1),Qe.y1=Math.round(Qe.y1)}function ce(Qe,Ce,je,rt,ut){for(var Pt=Qe.children,St,Nt=-1,Xt=Pt.length,Ot=Qe.value&&(rt-Ce)/Qe.value;++Nt<Xt;)St=Pt[Nt],St.y0=je,St.y1=ut,St.x0=Ce,St.x1=Ce+=St.value*Ot}function ye(){var Qe=1,Ce=1,je=0,rt=!1;function ut(St){var Nt=St.height+1;return St.x0=St.y0=je,St.x1=Qe,St.y1=Ce/Nt,St.eachBefore(Pt(Ce,Nt)),rt&&St.eachBefore(me),St}function Pt(St,Nt){return function(Xt){Xt.children&&ce(Xt,Xt.x0,St*(Xt.depth+1)/Nt,Xt.x1,St*(Xt.depth+2)/Nt);var Ot=Xt.x0,Kt=Xt.y0,Je=Xt.x1-je,gt=Xt.y1-je;Je<Ot&&(Ot=Je=(Ot+Je)/2),gt<Kt&&(Kt=gt=(Kt+gt)/2),Xt.x0=Ot,Xt.y0=Kt,Xt.x1=Je,Xt.y1=gt}}return ut.round=function(St){return arguments.length?(rt=!!St,ut):rt},ut.size=function(St){return arguments.length?(Qe=+St[0],Ce=+St[1],ut):[Qe,Ce]},ut.padding=function(St){return arguments.length?(je=+St,ut):je},ut}var xe="$",ke={depth:-1},Ae={};function Oe(Qe){return Qe.id}function He(Qe){return Qe.parentId}function Ge(){var Qe=Oe,Ce=He;function je(rt){var ut,Pt,St=rt.length,Nt,Xt,Ot,Kt=new Array(St),Je,gt,Et={};for(Pt=0;Pt<St;++Pt)ut=rt[Pt],Ot=Kt[Pt]=new k(ut),(Je=Qe(ut,Pt,rt))!=null&&(Je+="")&&(gt=xe+(Ot.id=Je),Et[gt]=gt in Et?Ae:Ot);for(Pt=0;Pt<St;++Pt)if(Ot=Kt[Pt],Je=Ce(rt[Pt],Pt,rt),Je==null||!(Je+="")){if(Nt)throw new Error("multiple roots");Nt=Ot}else{if(Xt=Et[xe+Je],!Xt)throw new Error("missing: "+Je);if(Xt===Ae)throw new Error("ambiguous: "+Je);Xt.children?Xt.children.push(Ot):Xt.children=[Ot],Ot.parent=Xt}if(!Nt)throw new Error("no root");if(Nt.parent=ke,Nt.eachBefore(function(rr){rr.depth=rr.parent.depth+1,--St}).eachBefore(S),Nt.parent=null,St>0)throw new Error("cycle");return Nt}return je.id=function(rt){return arguments.length?(Qe=re(rt),je):Qe},je.parentId=function(rt){return arguments.length?(Ce=re(rt),je):Ce},je}function _e(Qe,Ce){return Qe.parent===Ce.parent?1:2}function Ie(Qe){var Ce=Qe.children;return Ce?Ce[0]:Qe.t}function Ye(Qe){var Ce=Qe.children;return Ce?Ce[Ce.length-1]:Qe.t}function qe(Qe,Ce,je){var rt=je/(Ce.i-Qe.i);Ce.c-=rt,Ce.s+=je,Qe.c+=rt,Ce.z+=je,Ce.m+=je}function Ue(Qe){for(var Ce=0,je=0,rt=Qe.children,ut=rt.length,Pt;--ut>=0;)Pt=rt[ut],Pt.z+=Ce,Pt.m+=Ce,Ce+=Pt.s+(je+=Pt.c)}function Re(Qe,Ce,je){return Qe.a.parent===Ce.parent?Qe.a:je}function Ve(Qe,Ce){this._=Qe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ce}Ve.prototype=Object.create(k.prototype);function dt(Qe){for(var Ce=new Ve(Qe,0),je,rt=[Ce],ut,Pt,St,Nt;je=rt.pop();)if(Pt=je._.children)for(je.children=new Array(Nt=Pt.length),St=Nt-1;St>=0;--St)rt.push(ut=je.children[St]=new Ve(Pt[St],St)),ut.parent=je;return(Ce.parent=new Ve(null,0)).children=[Ce],Ce}function Dt(){var Qe=_e,Ce=1,je=1,rt=null;function ut(Ot){var Kt=dt(Ot);if(Kt.eachAfter(Pt),Kt.parent.m=-Kt.z,Kt.eachBefore(St),rt)Ot.eachBefore(Xt);else{var Je=Ot,gt=Ot,Et=Ot;Ot.eachBefore(function(Lr){Lr.x<Je.x&&(Je=Lr),Lr.x>gt.x&&(gt=Lr),Lr.depth>Et.depth&&(Et=Lr)});var rr=Je===gt?1:Qe(Je,gt)/2,vr=rr-Je.x,or=Ce/(gt.x+rr+vr),dr=je/(Et.depth||1);Ot.eachBefore(function(Lr){Lr.x=(Lr.x+vr)*or,Lr.y=Lr.depth*dr})}return Ot}function Pt(Ot){var Kt=Ot.children,Je=Ot.parent.children,gt=Ot.i?Je[Ot.i-1]:null;if(Kt){Ue(Ot);var Et=(Kt[0].z+Kt[Kt.length-1].z)/2;gt?(Ot.z=gt.z+Qe(Ot._,gt._),Ot.m=Ot.z-Et):Ot.z=Et}else gt&&(Ot.z=gt.z+Qe(Ot._,gt._));Ot.parent.A=Nt(Ot,gt,Ot.parent.A||Je[0])}function St(Ot){Ot._.x=Ot.z+Ot.parent.m,Ot.m+=Ot.parent.m}function Nt(Ot,Kt,Je){if(Kt){for(var gt=Ot,Et=Ot,rr=Kt,vr=gt.parent.children[0],or=gt.m,dr=Et.m,Lr=rr.m,kr=vr.m,tr;rr=Ye(rr),gt=Ie(gt),rr&&gt;)vr=Ie(vr),Et=Ye(Et),Et.a=Ot,tr=rr.z+Lr-gt.z-or+Qe(rr._,gt._),tr>0&&(qe(Re(rr,Ot,Je),Ot,tr),or+=tr,dr+=tr),Lr+=rr.m,or+=gt.m,kr+=vr.m,dr+=Et.m;rr&&!Ye(Et)&&(Et.t=rr,Et.m+=Lr-dr),gt&&!Ie(vr)&&(vr.t=gt,vr.m+=or-kr,Je=Ot)}return Je}function Xt(Ot){Ot.x*=Ce,Ot.y=Ot.depth*je}return ut.separation=function(Ot){return arguments.length?(Qe=Ot,ut):Qe},ut.size=function(Ot){return arguments.length?(rt=!1,Ce=+Ot[0],je=+Ot[1],ut):rt?null:[Ce,je]},ut.nodeSize=function(Ot){return arguments.length?(rt=!0,Ce=+Ot[0],je=+Ot[1],ut):rt?[Ce,je]:null},ut}function Gt(Qe,Ce,je,rt,ut){for(var Pt=Qe.children,St,Nt=-1,Xt=Pt.length,Ot=Qe.value&&(ut-je)/Qe.value;++Nt<Xt;)St=Pt[Nt],St.x0=Ce,St.x1=rt,St.y0=je,St.y1=je+=St.value*Ot}var kt=(1+Math.sqrt(5))/2;function zt(Qe,Ce,je,rt,ut,Pt){for(var St=[],Nt=Ce.children,Xt,Ot,Kt=0,Je=0,gt=Nt.length,Et,rr,vr=Ce.value,or,dr,Lr,kr,tr,Or,et;Kt<gt;){Et=ut-je,rr=Pt-rt;do or=Nt[Je++].value;while(!or&&Je<gt);for(dr=Lr=or,Or=Math.max(rr/Et,Et/rr)/(vr*Qe),et=or*or*Or,tr=Math.max(Lr/et,et/dr);Je<gt;++Je){if(or+=Ot=Nt[Je].value,Ot<dr&&(dr=Ot),Ot>Lr&&(Lr=Ot),et=or*or*Or,kr=Math.max(Lr/et,et/dr),kr>tr){or-=Ot;break}tr=kr}St.push(Xt={value:or,dice:Et<rr,children:Nt.slice(Kt,Je)}),Xt.dice?ce(Xt,je,rt,ut,vr?rt+=rr*or/vr:Pt):Gt(Xt,je,rt,vr?je+=Et*or/vr:ut,Pt),vr-=or,Kt=Je}return St}var Bt=function Qe(Ce){function je(rt,ut,Pt,St,Nt){zt(Ce,rt,ut,Pt,St,Nt)}return je.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},je}(kt);function Lt(){var Qe=Bt,Ce=!1,je=1,rt=1,ut=[0],Pt=ee,St=ee,Nt=ee,Xt=ee,Ot=ee;function Kt(gt){return gt.x0=gt.y0=0,gt.x1=je,gt.y1=rt,gt.eachBefore(Je),ut=[0],Ce&&gt.eachBefore(me),gt}function Je(gt){var Et=ut[gt.depth],rr=gt.x0+Et,vr=gt.y0+Et,or=gt.x1-Et,dr=gt.y1-Et;or<rr&&(rr=or=(rr+or)/2),dr<vr&&(vr=dr=(vr+dr)/2),gt.x0=rr,gt.y0=vr,gt.x1=or,gt.y1=dr,gt.children&&(Et=ut[gt.depth+1]=Pt(gt)/2,rr+=Ot(gt)-Et,vr+=St(gt)-Et,or-=Nt(gt)-Et,dr-=Xt(gt)-Et,or<rr&&(rr=or=(rr+or)/2),dr<vr&&(vr=dr=(vr+dr)/2),Qe(gt,rr,vr,or,dr))}return Kt.round=function(gt){return arguments.length?(Ce=!!gt,Kt):Ce},Kt.size=function(gt){return arguments.length?(je=+gt[0],rt=+gt[1],Kt):[je,rt]},Kt.tile=function(gt){return arguments.length?(Qe=re(gt),Kt):Qe},Kt.padding=function(gt){return arguments.length?Kt.paddingInner(gt).paddingOuter(gt):Kt.paddingInner()},Kt.paddingInner=function(gt){return arguments.length?(Pt=typeof gt=="function"?gt:j(+gt),Kt):Pt},Kt.paddingOuter=function(gt){return arguments.length?Kt.paddingTop(gt).paddingRight(gt).paddingBottom(gt).paddingLeft(gt):Kt.paddingTop()},Kt.paddingTop=function(gt){return arguments.length?(St=typeof gt=="function"?gt:j(+gt),Kt):St},Kt.paddingRight=function(gt){return arguments.length?(Nt=typeof gt=="function"?gt:j(+gt),Kt):Nt},Kt.paddingBottom=function(gt){return arguments.length?(Xt=typeof gt=="function"?gt:j(+gt),Kt):Xt},Kt.paddingLeft=function(gt){return arguments.length?(Ot=typeof gt=="function"?gt:j(+gt),Kt):Ot},Kt}function Mt(Qe,Ce,je,rt,ut){var Pt=Qe.children,St,Nt=Pt.length,Xt,Ot=new Array(Nt+1);for(Ot[0]=Xt=St=0;St<Nt;++St)Ot[St+1]=Xt+=Pt[St].value;Kt(0,Nt,Qe.value,Ce,je,rt,ut);function Kt(Je,gt,Et,rr,vr,or,dr){if(Je>=gt-1){var Lr=Pt[Je];Lr.x0=rr,Lr.y0=vr,Lr.x1=or,Lr.y1=dr;return}for(var kr=Ot[Je],tr=Et/2+kr,Or=Je+1,et=gt-1;Or<et;){var we=Or+et>>>1;Ot[we]<tr?Or=we+1:et=we}tr-Ot[Or-1]<Ot[Or]-tr&&Je+1<Or&&--Or;var Se=Ot[Or]-kr,De=Et-Se;if(or-rr>dr-vr){var Xe=(rr*De+or*Se)/Et;Kt(Je,Or,Se,rr,vr,Xe,dr),Kt(Or,gt,De,Xe,vr,or,dr)}else{var $e=(vr*De+dr*Se)/Et;Kt(Je,Or,Se,rr,vr,or,$e),Kt(Or,gt,De,rr,$e,or,dr)}}}function it(Qe,Ce,je,rt,ut){(Qe.depth&1?Gt:ce)(Qe,Ce,je,rt,ut)}var ht=function Qe(Ce){function je(rt,ut,Pt,St,Nt){if((Xt=rt._squarify)&&Xt.ratio===Ce)for(var Xt,Ot,Kt,Je,gt=-1,Et,rr=Xt.length,vr=rt.value;++gt<rr;){for(Ot=Xt[gt],Kt=Ot.children,Je=Ot.value=0,Et=Kt.length;Je<Et;++Je)Ot.value+=Kt[Je].value;Ot.dice?ce(Ot,ut,Pt,St,Pt+=(Nt-Pt)*Ot.value/vr):Gt(Ot,ut,Pt,ut+=(St-ut)*Ot.value/vr,Nt),vr-=Ot.value}else rt._squarify=Xt=zt(Ce,rt,ut,Pt,St,Nt),Xt.ratio=Ce}return je.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},je}(kt);d.cluster=r,d.hierarchy=T,d.pack=ne,d.packEnclose=I,d.packSiblings=U,d.partition=ye,d.stratify=Ge,d.tree=Dt,d.treemap=Lt,d.treemapBinary=Mt,d.treemapDice=ce,d.treemapResquarify=ht,d.treemapSlice=Gt,d.treemapSliceDice=it,d.treemapSquarify=Bt,Object.defineProperty(d,"__esModule",{value:!0})})},{}],116:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-color")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(_e,Ie,Ye,qe,Ue){var Re=_e*_e,Ve=Re*_e;return((1-3*_e+3*Re-Ve)*Ie+(4-6*Re+3*Ve)*Ye+(1+3*_e+3*Re-3*Ve)*qe+Ve*Ue)/6}function w(_e){var Ie=_e.length-1;return function(Ye){var qe=Ye<=0?Ye=0:Ye>=1?(Ye=1,Ie-1):Math.floor(Ye*Ie),Ue=_e[qe],Re=_e[qe+1],Ve=qe>0?_e[qe-1]:2*Ue-Re,dt=qe<Ie-1?_e[qe+2]:2*Re-Ue;return b((Ye-qe/Ie)*Ie,Ve,Ue,Re,dt)}}function e(_e){var Ie=_e.length;return function(Ye){var qe=Math.floor(((Ye%=1)<0?++Ye:Ye)*Ie),Ue=_e[(qe+Ie-1)%Ie],Re=_e[qe%Ie],Ve=_e[(qe+1)%Ie],dt=_e[(qe+2)%Ie];return b((Ye-qe/Ie)*Ie,Ue,Re,Ve,dt)}}function o(_e){return function(){return _e}}function a(_e,Ie){return function(Ye){return _e+Ye*Ie}}function n(_e,Ie,Ye){return _e=Math.pow(_e,Ye),Ie=Math.pow(Ie,Ye)-_e,Ye=1/Ye,function(qe){return Math.pow(_e+qe*Ie,Ye)}}function r(_e,Ie){var Ye=Ie-_e;return Ye?a(_e,Ye>180||Ye<-180?Ye-360*Math.round(Ye/360):Ye):o(isNaN(_e)?Ie:_e)}function u(_e){return(_e=+_e)==1?s:function(Ie,Ye){return Ye-Ie?n(Ie,Ye,_e):o(isNaN(Ie)?Ye:Ie)}}function s(_e,Ie){var Ye=Ie-_e;return Ye?a(_e,Ye):o(isNaN(_e)?Ie:_e)}var i=function _e(Ie){var Ye=u(Ie);function qe(Ue,Re){var Ve=Ye((Ue=l.rgb(Ue)).r,(Re=l.rgb(Re)).r),dt=Ye(Ue.g,Re.g),Dt=Ye(Ue.b,Re.b),Gt=s(Ue.opacity,Re.opacity);return function(kt){return Ue.r=Ve(kt),Ue.g=dt(kt),Ue.b=Dt(kt),Ue.opacity=Gt(kt),Ue+""}}return qe.gamma=_e,qe}(1);function f(_e){return function(Ie){var Ye=Ie.length,qe=new Array(Ye),Ue=new Array(Ye),Re=new Array(Ye),Ve,dt;for(Ve=0;Ve<Ye;++Ve)dt=l.rgb(Ie[Ve]),qe[Ve]=dt.r||0,Ue[Ve]=dt.g||0,Re[Ve]=dt.b||0;return qe=_e(qe),Ue=_e(Ue),Re=_e(Re),dt.opacity=1,function(Dt){return dt.r=qe(Dt),dt.g=Ue(Dt),dt.b=Re(Dt),dt+""}}}var h=f(w),p=f(e);function v(_e,Ie){Ie||(Ie=[]);var Ye=_e?Math.min(Ie.length,_e.length):0,qe=Ie.slice(),Ue;return function(Re){for(Ue=0;Ue<Ye;++Ue)qe[Ue]=_e[Ue]*(1-Re)+Ie[Ue]*Re;return qe}}function y(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function g(_e,Ie){return(y(Ie)?v:A)(_e,Ie)}function A(_e,Ie){var Ye=Ie?Ie.length:0,qe=_e?Math.min(Ye,_e.length):0,Ue=new Array(qe),Re=new Array(Ye),Ve;for(Ve=0;Ve<qe;++Ve)Ue[Ve]=k(_e[Ve],Ie[Ve]);for(;Ve<Ye;++Ve)Re[Ve]=Ie[Ve];return function(dt){for(Ve=0;Ve<qe;++Ve)Re[Ve]=Ue[Ve](dt);return Re}}function m(_e,Ie){var Ye=new Date;return _e=+_e,Ie=+Ie,function(qe){return Ye.setTime(_e*(1-qe)+Ie*qe),Ye}}function M(_e,Ie){return _e=+_e,Ie=+Ie,function(Ye){return _e*(1-Ye)+Ie*Ye}}function _(_e,Ie){var Ye={},qe={},Ue;(_e===null||typeof _e!="object")&&(_e={}),(Ie===null||typeof Ie!="object")&&(Ie={});for(Ue in Ie)Ue in _e?Ye[Ue]=k(_e[Ue],Ie[Ue]):qe[Ue]=Ie[Ue];return function(Re){for(Ue in Ye)qe[Ue]=Ye[Ue](Re);return qe}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(T.source,"g");function c(_e){return function(){return _e}}function L(_e){return function(Ie){return _e(Ie)+""}}function S(_e,Ie){var Ye=T.lastIndex=x.lastIndex=0,qe,Ue,Re,Ve=-1,dt=[],Dt=[];for(_e=_e+"",Ie=Ie+"";(qe=T.exec(_e))&&(Ue=x.exec(Ie));)(Re=Ue.index)>Ye&&(Re=Ie.slice(Ye,Re),dt[Ve]?dt[Ve]+=Re:dt[++Ve]=Re),(qe=qe[0])===(Ue=Ue[0])?dt[Ve]?dt[Ve]+=Ue:dt[++Ve]=Ue:(dt[++Ve]=null,Dt.push({i:Ve,x:M(qe,Ue)})),Ye=x.lastIndex;return Ye<Ie.length&&(Re=Ie.slice(Ye),dt[Ve]?dt[Ve]+=Re:dt[++Ve]=Re),dt.length<2?Dt[0]?L(Dt[0].x):c(Ie):(Ie=Dt.length,function(Gt){for(var kt=0,zt;kt<Ie;++kt)dt[(zt=Dt[kt]).i]=zt.x(Gt);return dt.join("")})}function k(_e,Ie){var Ye=typeof Ie,qe;return Ie==null||Ye==="boolean"?o(Ie):(Ye==="number"?M:Ye==="string"?(qe=l.color(Ie))?(Ie=qe,i):S:Ie instanceof l.color?i:Ie instanceof Date?m:y(Ie)?v:Array.isArray(Ie)?A:typeof Ie.valueOf!="function"&&typeof Ie.toString!="function"||isNaN(Ie)?_:M)(_e,Ie)}function P(_e){var Ie=_e.length;return function(Ye){return _e[Math.max(0,Math.min(Ie-1,Math.floor(Ye*Ie)))]}}function z(_e,Ie){var Ye=r(+_e,+Ie);return function(qe){var Ue=Ye(qe);return Ue-360*Math.floor(Ue/360)}}function I(_e,Ie){return _e=+_e,Ie=+Ie,function(Ye){return Math.round(_e*(1-Ye)+Ie*Ye)}}var R=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(_e,Ie,Ye,qe,Ue,Re){var Ve,dt,Dt;return(Ve=Math.sqrt(_e*_e+Ie*Ie))&&(_e/=Ve,Ie/=Ve),(Dt=_e*Ye+Ie*qe)&&(Ye-=_e*Dt,qe-=Ie*Dt),(dt=Math.sqrt(Ye*Ye+qe*qe))&&(Ye/=dt,qe/=dt,Dt/=dt),_e*qe<Ie*Ye&&(_e=-_e,Ie=-Ie,Dt=-Dt,Ve=-Ve),{translateX:Ue,translateY:Re,rotate:Math.atan2(Ie,_e)*R,skewX:Math.atan(Dt)*R,scaleX:Ve,scaleY:dt}}var F,Y,X,q;function $(_e){return _e==="none"?D:(F||(F=document.createElement("DIV"),Y=document.documentElement,X=document.defaultView),F.style.transform=_e,_e=X.getComputedStyle(Y.appendChild(F),null).getPropertyValue("transform"),Y.removeChild(F),_e=_e.slice(7,-1).split(","),O(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function V(_e){return _e==null||(q||(q=document.createElementNS("http://www.w3.org/2000/svg","g")),q.setAttribute("transform",_e),!(_e=q.transform.baseVal.consolidate()))?D:(_e=_e.matrix,O(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function K(_e,Ie,Ye,qe){function Ue(Gt){return Gt.length?Gt.pop()+" ":""}function Re(Gt,kt,zt,Bt,Lt,Mt){if(Gt!==zt||kt!==Bt){var it=Lt.push("translate(",null,Ie,null,Ye);Mt.push({i:it-4,x:M(Gt,zt)},{i:it-2,x:M(kt,Bt)})}else(zt||Bt)&&Lt.push("translate("+zt+Ie+Bt+Ye)}function Ve(Gt,kt,zt,Bt){Gt!==kt?(Gt-kt>180?kt+=360:kt-Gt>180&&(Gt+=360),Bt.push({i:zt.push(Ue(zt)+"rotate(",null,qe)-2,x:M(Gt,kt)})):kt&&zt.push(Ue(zt)+"rotate("+kt+qe)}function dt(Gt,kt,zt,Bt){Gt!==kt?Bt.push({i:zt.push(Ue(zt)+"skewX(",null,qe)-2,x:M(Gt,kt)}):kt&&zt.push(Ue(zt)+"skewX("+kt+qe)}function Dt(Gt,kt,zt,Bt,Lt,Mt){if(Gt!==zt||kt!==Bt){var it=Lt.push(Ue(Lt)+"scale(",null,",",null,")");Mt.push({i:it-4,x:M(Gt,zt)},{i:it-2,x:M(kt,Bt)})}else(zt!==1||Bt!==1)&&Lt.push(Ue(Lt)+"scale("+zt+","+Bt+")")}return function(Gt,kt){var zt=[],Bt=[];return Gt=_e(Gt),kt=_e(kt),Re(Gt.translateX,Gt.translateY,kt.translateX,kt.translateY,zt,Bt),Ve(Gt.rotate,kt.rotate,zt,Bt),dt(Gt.skewX,kt.skewX,zt,Bt),Dt(Gt.scaleX,Gt.scaleY,kt.scaleX,kt.scaleY,zt,Bt),Gt=kt=null,function(Lt){for(var Mt=-1,it=Bt.length,ht;++Mt<it;)zt[(ht=Bt[Mt]).i]=ht.x(Lt);return zt.join("")}}}var se=K($,"px, ","px)","deg)"),ue=K(V,", ",")",")"),oe=Math.SQRT2,U=2,G=4,re=1e-12;function ee(_e){return((_e=Math.exp(_e))+1/_e)/2}function j(_e){return((_e=Math.exp(_e))-1/_e)/2}function Q(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ne(_e,Ie){var Ye=_e[0],qe=_e[1],Ue=_e[2],Re=Ie[0],Ve=Ie[1],dt=Ie[2],Dt=Re-Ye,Gt=Ve-qe,kt=Dt*Dt+Gt*Gt,zt,Bt;if(kt<re)Bt=Math.log(dt/Ue)/oe,zt=function(Ce){return[Ye+Ce*Dt,qe+Ce*Gt,Ue*Math.exp(oe*Ce*Bt)]};else{var Lt=Math.sqrt(kt),Mt=(dt*dt-Ue*Ue+G*kt)/(2*Ue*U*Lt),it=(dt*dt-Ue*Ue-G*kt)/(2*dt*U*Lt),ht=Math.log(Math.sqrt(Mt*Mt+1)-Mt),Qe=Math.log(Math.sqrt(it*it+1)-it);Bt=(Qe-ht)/oe,zt=function(Ce){var je=Ce*Bt,rt=ee(ht),ut=Ue/(U*Lt)*(rt*Q(oe*je+ht)-j(ht));return[Ye+ut*Dt,qe+ut*Gt,Ue*rt/ee(oe*je+ht)]}}return zt.duration=Bt*1e3,zt}function ae(_e){return function(Ie,Ye){var qe=_e((Ie=l.hsl(Ie)).h,(Ye=l.hsl(Ye)).h),Ue=s(Ie.s,Ye.s),Re=s(Ie.l,Ye.l),Ve=s(Ie.opacity,Ye.opacity);return function(dt){return Ie.h=qe(dt),Ie.s=Ue(dt),Ie.l=Re(dt),Ie.opacity=Ve(dt),Ie+""}}}var ie=ae(r),fe=ae(s);function me(_e,Ie){var Ye=s((_e=l.lab(_e)).l,(Ie=l.lab(Ie)).l),qe=s(_e.a,Ie.a),Ue=s(_e.b,Ie.b),Re=s(_e.opacity,Ie.opacity);return function(Ve){return _e.l=Ye(Ve),_e.a=qe(Ve),_e.b=Ue(Ve),_e.opacity=Re(Ve),_e+""}}function ce(_e){return function(Ie,Ye){var qe=_e((Ie=l.hcl(Ie)).h,(Ye=l.hcl(Ye)).h),Ue=s(Ie.c,Ye.c),Re=s(Ie.l,Ye.l),Ve=s(Ie.opacity,Ye.opacity);return function(dt){return Ie.h=qe(dt),Ie.c=Ue(dt),Ie.l=Re(dt),Ie.opacity=Ve(dt),Ie+""}}}var ye=ce(r),xe=ce(s);function ke(_e){return function Ie(Ye){Ye=+Ye;function qe(Ue,Re){var Ve=_e((Ue=l.cubehelix(Ue)).h,(Re=l.cubehelix(Re)).h),dt=s(Ue.s,Re.s),Dt=s(Ue.l,Re.l),Gt=s(Ue.opacity,Re.opacity);return function(kt){return Ue.h=Ve(kt),Ue.s=dt(kt),Ue.l=Dt(Math.pow(kt,Ye)),Ue.opacity=Gt(kt),Ue+""}}return qe.gamma=Ie,qe}(1)}var Ae=ke(r),Oe=ke(s);function He(_e,Ie){for(var Ye=0,qe=Ie.length-1,Ue=Ie[0],Re=new Array(qe<0?0:qe);Ye<qe;)Re[Ye]=_e(Ue,Ue=Ie[++Ye]);return function(Ve){var dt=Math.max(0,Math.min(qe-1,Math.floor(Ve*=qe)));return Re[dt](Ve-dt)}}function Ge(_e,Ie){for(var Ye=new Array(Ie),qe=0;qe<Ie;++qe)Ye[qe]=_e(qe/(Ie-1));return Ye}d.interpolate=k,d.interpolateArray=g,d.interpolateBasis=w,d.interpolateBasisClosed=e,d.interpolateCubehelix=Ae,d.interpolateCubehelixLong=Oe,d.interpolateDate=m,d.interpolateDiscrete=P,d.interpolateHcl=ye,d.interpolateHclLong=xe,d.interpolateHsl=ie,d.interpolateHslLong=fe,d.interpolateHue=z,d.interpolateLab=me,d.interpolateNumber=M,d.interpolateNumberArray=v,d.interpolateObject=_,d.interpolateRgb=i,d.interpolateRgbBasis=h,d.interpolateRgbBasisClosed=p,d.interpolateRound=I,d.interpolateString=S,d.interpolateTransformCss=se,d.interpolateTransformSvg=ue,d.interpolateZoom=ne,d.piecewise=He,d.quantize=Ge,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=Math.PI,b=2*l,w=1e-6,e=b-w;function o(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new o}o.prototype=a.prototype={constructor:o,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,u,s){this._+="Q"+ +n+","+ +r+","+(this._x1=+u)+","+(this._y1=+s)},bezierCurveTo:function(n,r,u,s,i,f){this._+="C"+ +n+","+ +r+","+ +u+","+ +s+","+(this._x1=+i)+","+(this._y1=+f)},arcTo:function(n,r,u,s,i){n=+n,r=+r,u=+u,s=+s,i=+i;var f=this._x1,h=this._y1,p=u-n,v=s-r,y=f-n,g=h-r,A=y*y+g*g;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(A>w)if(!(Math.abs(g*p-v*y)>w)||!i)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var m=u-f,M=s-h,_=p*p+v*v,T=m*m+M*M,x=Math.sqrt(_),c=Math.sqrt(A),L=i*Math.tan((l-Math.acos((_+A-T)/(2*x*c)))/2),S=L/c,k=L/x;Math.abs(S-1)>w&&(this._+="L"+(n+S*y)+","+(r+S*g)),this._+="A"+i+","+i+",0,0,"+ +(g*m>y*M)+","+(this._x1=n+k*p)+","+(this._y1=r+k*v)}},arc:function(n,r,u,s,i,f){n=+n,r=+r,u=+u,f=!!f;var h=u*Math.cos(s),p=u*Math.sin(s),v=n+h,y=r+p,g=1^f,A=f?s-i:i-s;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+v+","+y:(Math.abs(this._x1-v)>w||Math.abs(this._y1-y)>w)&&(this._+="L"+v+","+y),!!u&&(A<0&&(A=A%b+b),A>e?this._+="A"+u+","+u+",0,1,"+g+","+(n-h)+","+(r-p)+"A"+u+","+u+",0,1,"+g+","+(this._x1=v)+","+(this._y1=y):A>w&&(this._+="A"+u+","+u+",0,"+ +(A>=l)+","+g+","+(this._x1=n+u*Math.cos(i))+","+(this._y1=r+u*Math.sin(i))))},rect:function(n,r,u,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +u+"v"+ +s+"h"+-u+"Z"},toString:function(){return this._}},d.path=a,Object.defineProperty(d,"__esModule",{value:!0})})},{}],118:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(x){var c=+this._x.call(null,x),L=+this._y.call(null,x);return b(this.cover(c,L),c,L,x)}function b(x,c,L,S){if(isNaN(c)||isNaN(L))return x;var k,P=x._root,z={data:S},I=x._x0,R=x._y0,D=x._x1,O=x._y1,F,Y,X,q,$,V,K,se;if(!P)return x._root=z,x;for(;P.length;)if(($=c>=(F=(I+D)/2))?I=F:D=F,(V=L>=(Y=(R+O)/2))?R=Y:O=Y,k=P,!(P=P[K=V<<1|$]))return k[K]=z,x;if(X=+x._x.call(null,P.data),q=+x._y.call(null,P.data),c===X&&L===q)return z.next=P,k?k[K]=z:x._root=z,x;do k=k?k[K]=new Array(4):x._root=new Array(4),($=c>=(F=(I+D)/2))?I=F:D=F,(V=L>=(Y=(R+O)/2))?R=Y:O=Y;while((K=V<<1|$)==(se=(q>=Y)<<1|X>=F));return k[se]=P,k[K]=z,x}function w(x){var c,L,S=x.length,k,P,z=new Array(S),I=new Array(S),R=1/0,D=1/0,O=-1/0,F=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,c=x[L]))||isNaN(P=+this._y.call(null,c))||(z[L]=k,I[L]=P,k<R&&(R=k),k>O&&(O=k),P<D&&(D=P),P>F&&(F=P));if(R>O||D>F)return this;for(this.cover(R,D).cover(O,F),L=0;L<S;++L)b(this,z[L],I[L],x[L]);return this}function e(x,c){if(isNaN(x=+x)||isNaN(c=+c))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(x))+1,P=(S=Math.floor(c))+1;else{for(var z=k-L,I=this._root,R,D;L>x||x>=k||S>c||c>=P;)switch(D=(c<S)<<1|x<L,R=new Array(4),R[D]=I,I=R,z*=2,D){case 0:k=L+z,P=S+z;break;case 1:L=k-z,P=S+z;break;case 2:k=L+z,S=P-z;break;case 3:L=k-z,S=P-z;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function o(){var x=[];return this.visit(function(c){if(!c.length)do x.push(c.data);while(c=c.next)}),x}function a(x){return arguments.length?this.cover(+x[0][0],+x[0][1]).cover(+x[1][0],+x[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(x,c,L,S,k){this.node=x,this.x0=c,this.y0=L,this.x1=S,this.y1=k}function r(x,c,L){var S,k=this._x0,P=this._y0,z,I,R,D,O=this._x1,F=this._y1,Y=[],X=this._root,q,$;for(X&&Y.push(new n(X,k,P,O,F)),L==null?L=1/0:(k=x-L,P=c-L,O=x+L,F=c+L,L*=L);q=Y.pop();)if(!(!(X=q.node)||(z=q.x0)>O||(I=q.y0)>F||(R=q.x1)<k||(D=q.y1)<P))if(X.length){var V=(z+R)/2,K=(I+D)/2;Y.push(new n(X[3],V,K,R,D),new n(X[2],z,K,V,D),new n(X[1],V,I,R,K),new n(X[0],z,I,V,K)),($=(c>=K)<<1|x>=V)&&(q=Y[Y.length-1],Y[Y.length-1]=Y[Y.length-1-$],Y[Y.length-1-$]=q)}else{var se=x-+this._x.call(null,X.data),ue=c-+this._y.call(null,X.data),oe=se*se+ue*ue;if(oe<L){var U=Math.sqrt(L=oe);k=x-U,P=c-U,O=x+U,F=c+U,S=X.data}}return S}function u(x){if(isNaN(O=+this._x.call(null,x))||isNaN(F=+this._y.call(null,x)))return this;var c,L=this._root,S,k,P,z=this._x0,I=this._y0,R=this._x1,D=this._y1,O,F,Y,X,q,$,V,K;if(!L)return this;if(L.length)for(;;){if((q=O>=(Y=(z+R)/2))?z=Y:R=Y,($=F>=(X=(I+D)/2))?I=X:D=X,c=L,!(L=L[V=$<<1|q]))return this;if(!L.length)break;(c[V+1&3]||c[V+2&3]||c[V+3&3])&&(S=c,K=V)}for(;L.data!==x;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):c?(P?c[V]=P:delete c[V],(L=c[0]||c[1]||c[2]||c[3])&&L===(c[3]||c[2]||c[1]||c[0])&&!L.length&&(S?S[K]=L:this._root=L),this):(this._root=P,this)}function s(x){for(var c=0,L=x.length;c<L;++c)this.remove(x[c]);return this}function i(){return this._root}function f(){var x=0;return this.visit(function(c){if(!c.length)do++x;while(c=c.next)}),x}function h(x){var c=[],L,S=this._root,k,P,z,I,R;for(S&&c.push(new n(S,this._x0,this._y0,this._x1,this._y1));L=c.pop();)if(!x(S=L.node,P=L.x0,z=L.y0,I=L.x1,R=L.y1)&&S.length){var D=(P+I)/2,O=(z+R)/2;(k=S[3])&&c.push(new n(k,D,O,I,R)),(k=S[2])&&c.push(new n(k,P,O,D,R)),(k=S[1])&&c.push(new n(k,D,z,I,O)),(k=S[0])&&c.push(new n(k,P,z,D,O))}return this}function p(x){var c=[],L=[],S;for(this._root&&c.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));S=c.pop();){var k=S.node;if(k.length){var P,z=S.x0,I=S.y0,R=S.x1,D=S.y1,O=(z+R)/2,F=(I+D)/2;(P=k[0])&&c.push(new n(P,z,I,O,F)),(P=k[1])&&c.push(new n(P,O,I,R,F)),(P=k[2])&&c.push(new n(P,z,F,O,D)),(P=k[3])&&c.push(new n(P,O,F,R,D))}L.push(S)}for(;S=L.pop();)x(S.node,S.x0,S.y0,S.x1,S.y1);return this}function v(x){return x[0]}function y(x){return arguments.length?(this._x=x,this):this._x}function g(x){return x[1]}function A(x){return arguments.length?(this._y=x,this):this._y}function m(x,c,L){var S=new M(c==null?v:c,L==null?g:L,NaN,NaN,NaN,NaN);return x==null?S:S.addAll(x)}function M(x,c,L,S,k,P){this._x=x,this._y=c,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function _(x){for(var c={data:x.data},L=c;x=x.next;)L=L.next={data:x.data};return c}var T=m.prototype=M.prototype;T.copy=function(){var x=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root,L,S;if(!c)return x;if(!c.length)return x._root=_(c),x;for(L=[{source:c,target:x._root=new Array(4)}];c=L.pop();)for(var k=0;k<4;++k)(S=c.source[k])&&(S.length?L.push({source:S,target:c.target[k]=new Array(4)}):c.target[k]=_(S));return x},T.add=l,T.addAll=w,T.cover=e,T.data=o,T.extent=a,T.find=r,T.remove=u,T.removeAll=s,T.root=i,T.size=f,T.visit=h,T.visitAfter=p,T.x=y,T.y=A,d.quadtree=m,Object.defineProperty(d,"__esModule",{value:!0})})},{}],119:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-path")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(at){return function(){return at}}var w=Math.abs,e=Math.atan2,o=Math.cos,a=Math.max,n=Math.min,r=Math.sin,u=Math.sqrt,s=1e-12,i=Math.PI,f=i/2,h=2*i;function p(at){return at>1?0:at<-1?i:Math.acos(at)}function v(at){return at>=1?f:at<=-1?-f:Math.asin(at)}function y(at){return at.innerRadius}function g(at){return at.outerRadius}function A(at){return at.startAngle}function m(at){return at.endAngle}function M(at){return at&&at.padAngle}function _(at,Ft,er,hr,Yr,zr,Pr,br){var jr=er-at,zn=hr-Ft,kn=Pr-Yr,ta=br-zr,ia=ta*jr-kn*zn;if(!(ia*ia<s))return ia=(kn*(Ft-zr)-ta*(at-Yr))/ia,[at+ia*jr,Ft+ia*zn]}function T(at,Ft,er,hr,Yr,zr,Pr){var br=at-er,jr=Ft-hr,zn=(Pr?zr:-zr)/u(br*br+jr*jr),kn=zn*jr,ta=-zn*br,ia=at+kn,Aa=Ft+ta,ya=er+kn,pr=hr+ta,vn=(ia+ya)/2,$r=(Aa+pr)/2,Fn=ya-ia,Nn=pr-Aa,ca=Fn*Fn+Nn*Nn,ra=Yr-zr,Un=ia*pr-ya*Aa,ua=(Nn<0?-1:1)*u(a(0,ra*ra*ca-Un*Un)),da=(Un*Nn-Fn*ua)/ca,ur=(-Un*Fn-Nn*ua)/ca,Rr=(Un*Nn+Fn*ua)/ca,on=(-Un*Fn+Nn*ua)/ca,rn=da-vn,gn=ur-$r,wn=Rr-vn,pn=on-$r;return rn*rn+gn*gn>wn*wn+pn*pn&&(da=Rr,ur=on),{cx:da,cy:ur,x01:-kn,y01:-ta,x11:da*(Yr/ra-1),y11:ur*(Yr/ra-1)}}function x(){var at=y,Ft=g,er=b(0),hr=null,Yr=A,zr=m,Pr=M,br=null;function jr(){var zn,kn,ta=+at.apply(this,arguments),ia=+Ft.apply(this,arguments),Aa=Yr.apply(this,arguments)-f,ya=zr.apply(this,arguments)-f,pr=w(ya-Aa),vn=ya>Aa;if(br||(br=zn=l.path()),ia<ta&&(kn=ia,ia=ta,ta=kn),!(ia>s))br.moveTo(0,0);else if(pr>h-s)br.moveTo(ia*o(Aa),ia*r(Aa)),br.arc(0,0,ia,Aa,ya,!vn),ta>s&&(br.moveTo(ta*o(ya),ta*r(ya)),br.arc(0,0,ta,ya,Aa,vn));else{var $r=Aa,Fn=ya,Nn=Aa,ca=ya,ra=pr,Un=pr,ua=Pr.apply(this,arguments)/2,da=ua>s&&(hr?+hr.apply(this,arguments):u(ta*ta+ia*ia)),ur=n(w(ia-ta)/2,+er.apply(this,arguments)),Rr=ur,on=ur,rn,gn;if(da>s){var wn=v(da/ta*r(ua)),pn=v(da/ia*r(ua));(ra-=wn*2)>s?(wn*=vn?1:-1,Nn+=wn,ca-=wn):(ra=0,Nn=ca=(Aa+ya)/2),(Un-=pn*2)>s?(pn*=vn?1:-1,$r+=pn,Fn-=pn):(Un=0,$r=Fn=(Aa+ya)/2)}var cr=ia*o($r),ar=ia*r($r),Fr=ta*o(ca),Jr=ta*r(ca);if(ur>s){var En=ia*o(Fn),Vn=ia*r(Fn),Kn=ta*o(Nn),jn=ta*r(Nn),Bn;if(pr<i&&(Bn=_(cr,ar,Kn,jn,En,Vn,Fr,Jr))){var mn=cr-Bn[0],Rn=ar-Bn[1],Yn=En-Bn[0],la=Vn-Bn[1],Ga=1/r(p((mn*Yn+Rn*la)/(u(mn*mn+Rn*Rn)*u(Yn*Yn+la*la)))/2),ka=u(Bn[0]*Bn[0]+Bn[1]*Bn[1]);Rr=n(ur,(ta-ka)/(Ga-1)),on=n(ur,(ia-ka)/(Ga+1))}}Un>s?on>s?(rn=T(Kn,jn,cr,ar,ia,on,vn),gn=T(En,Vn,Fr,Jr,ia,on,vn),br.moveTo(rn.cx+rn.x01,rn.cy+rn.y01),on<ur?br.arc(rn.cx,rn.cy,on,e(rn.y01,rn.x01),e(gn.y01,gn.x01),!vn):(br.arc(rn.cx,rn.cy,on,e(rn.y01,rn.x01),e(rn.y11,rn.x11),!vn),br.arc(0,0,ia,e(rn.cy+rn.y11,rn.cx+rn.x11),e(gn.cy+gn.y11,gn.cx+gn.x11),!vn),br.arc(gn.cx,gn.cy,on,e(gn.y11,gn.x11),e(gn.y01,gn.x01),!vn))):(br.moveTo(cr,ar),br.arc(0,0,ia,$r,Fn,!vn)):br.moveTo(cr,ar),!(ta>s)||!(ra>s)?br.lineTo(Fr,Jr):Rr>s?(rn=T(Fr,Jr,En,Vn,ta,-Rr,vn),gn=T(cr,ar,Kn,jn,ta,-Rr,vn),br.lineTo(rn.cx+rn.x01,rn.cy+rn.y01),Rr<ur?br.arc(rn.cx,rn.cy,Rr,e(rn.y01,rn.x01),e(gn.y01,gn.x01),!vn):(br.arc(rn.cx,rn.cy,Rr,e(rn.y01,rn.x01),e(rn.y11,rn.x11),!vn),br.arc(0,0,ta,e(rn.cy+rn.y11,rn.cx+rn.x11),e(gn.cy+gn.y11,gn.cx+gn.x11),vn),br.arc(gn.cx,gn.cy,Rr,e(gn.y11,gn.x11),e(gn.y01,gn.x01),!vn))):br.arc(0,0,ta,ca,Nn,vn)}if(br.closePath(),zn)return br=null,zn+""||null}return jr.centroid=function(){var zn=(+at.apply(this,arguments)+ +Ft.apply(this,arguments))/2,kn=(+Yr.apply(this,arguments)+ +zr.apply(this,arguments))/2-i/2;return[o(kn)*zn,r(kn)*zn]},jr.innerRadius=function(zn){return arguments.length?(at=typeof zn=="function"?zn:b(+zn),jr):at},jr.outerRadius=function(zn){return arguments.length?(Ft=typeof zn=="function"?zn:b(+zn),jr):Ft},jr.cornerRadius=function(zn){return arguments.length?(er=typeof zn=="function"?zn:b(+zn),jr):er},jr.padRadius=function(zn){return arguments.length?(hr=zn==null?null:typeof zn=="function"?zn:b(+zn),jr):hr},jr.startAngle=function(zn){return arguments.length?(Yr=typeof zn=="function"?zn:b(+zn),jr):Yr},jr.endAngle=function(zn){return arguments.length?(zr=typeof zn=="function"?zn:b(+zn),jr):zr},jr.padAngle=function(zn){return arguments.length?(Pr=typeof zn=="function"?zn:b(+zn),jr):Pr},jr.context=function(zn){return arguments.length?(br=zn==null?null:zn,jr):br},jr}function c(at){this._context=at}c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;default:this._context.lineTo(at,Ft);break}}};function L(at){return new c(at)}function S(at){return at[0]}function k(at){return at[1]}function P(){var at=S,Ft=k,er=b(!0),hr=null,Yr=L,zr=null;function Pr(br){var jr,zn=br.length,kn,ta=!1,ia;for(hr==null&&(zr=Yr(ia=l.path())),jr=0;jr<=zn;++jr)!(jr<zn&&er(kn=br[jr],jr,br))===ta&&((ta=!ta)?zr.lineStart():zr.lineEnd()),ta&&zr.point(+at(kn,jr,br),+Ft(kn,jr,br));if(ia)return zr=null,ia+""||null}return Pr.x=function(br){return arguments.length?(at=typeof br=="function"?br:b(+br),Pr):at},Pr.y=function(br){return arguments.length?(Ft=typeof br=="function"?br:b(+br),Pr):Ft},Pr.defined=function(br){return arguments.length?(er=typeof br=="function"?br:b(!!br),Pr):er},Pr.curve=function(br){return arguments.length?(Yr=br,hr!=null&&(zr=Yr(hr)),Pr):Yr},Pr.context=function(br){return arguments.length?(br==null?hr=zr=null:zr=Yr(hr=br),Pr):hr},Pr}function z(){var at=S,Ft=null,er=b(0),hr=k,Yr=b(!0),zr=null,Pr=L,br=null;function jr(kn){var ta,ia,Aa,ya=kn.length,pr,vn=!1,$r,Fn=new Array(ya),Nn=new Array(ya);for(zr==null&&(br=Pr($r=l.path())),ta=0;ta<=ya;++ta){if(!(ta<ya&&Yr(pr=kn[ta],ta,kn))===vn)if(vn=!vn)ia=ta,br.areaStart(),br.lineStart();else{for(br.lineEnd(),br.lineStart(),Aa=ta-1;Aa>=ia;--Aa)br.point(Fn[Aa],Nn[Aa]);br.lineEnd(),br.areaEnd()}vn&&(Fn[ta]=+at(pr,ta,kn),Nn[ta]=+er(pr,ta,kn),br.point(Ft?+Ft(pr,ta,kn):Fn[ta],hr?+hr(pr,ta,kn):Nn[ta]))}if($r)return br=null,$r+""||null}function zn(){return P().defined(Yr).curve(Pr).context(zr)}return jr.x=function(kn){return arguments.length?(at=typeof kn=="function"?kn:b(+kn),Ft=null,jr):at},jr.x0=function(kn){return arguments.length?(at=typeof kn=="function"?kn:b(+kn),jr):at},jr.x1=function(kn){return arguments.length?(Ft=kn==null?null:typeof kn=="function"?kn:b(+kn),jr):Ft},jr.y=function(kn){return arguments.length?(er=typeof kn=="function"?kn:b(+kn),hr=null,jr):er},jr.y0=function(kn){return arguments.length?(er=typeof kn=="function"?kn:b(+kn),jr):er},jr.y1=function(kn){return arguments.length?(hr=kn==null?null:typeof kn=="function"?kn:b(+kn),jr):hr},jr.lineX0=jr.lineY0=function(){return zn().x(at).y(er)},jr.lineY1=function(){return zn().x(at).y(hr)},jr.lineX1=function(){return zn().x(Ft).y(er)},jr.defined=function(kn){return arguments.length?(Yr=typeof kn=="function"?kn:b(!!kn),jr):Yr},jr.curve=function(kn){return arguments.length?(Pr=kn,zr!=null&&(br=Pr(zr)),jr):Pr},jr.context=function(kn){return arguments.length?(kn==null?zr=br=null:br=Pr(zr=kn),jr):zr},jr}function I(at,Ft){return Ft<at?-1:Ft>at?1:Ft>=at?0:NaN}function R(at){return at}function D(){var at=R,Ft=I,er=null,hr=b(0),Yr=b(h),zr=b(0);function Pr(br){var jr,zn=br.length,kn,ta,ia=0,Aa=new Array(zn),ya=new Array(zn),pr=+hr.apply(this,arguments),vn=Math.min(h,Math.max(-h,Yr.apply(this,arguments)-pr)),$r,Fn=Math.min(Math.abs(vn)/zn,zr.apply(this,arguments)),Nn=Fn*(vn<0?-1:1),ca;for(jr=0;jr<zn;++jr)(ca=ya[Aa[jr]=jr]=+at(br[jr],jr,br))>0&&(ia+=ca);for(Ft!=null?Aa.sort(function(ra,Un){return Ft(ya[ra],ya[Un])}):er!=null&&Aa.sort(function(ra,Un){return er(br[ra],br[Un])}),jr=0,ta=ia?(vn-zn*Nn)/ia:0;jr<zn;++jr,pr=$r)kn=Aa[jr],ca=ya[kn],$r=pr+(ca>0?ca*ta:0)+Nn,ya[kn]={data:br[kn],index:jr,value:ca,startAngle:pr,endAngle:$r,padAngle:Fn};return ya}return Pr.value=function(br){return arguments.length?(at=typeof br=="function"?br:b(+br),Pr):at},Pr.sortValues=function(br){return arguments.length?(Ft=br,er=null,Pr):Ft},Pr.sort=function(br){return arguments.length?(er=br,Ft=null,Pr):er},Pr.startAngle=function(br){return arguments.length?(hr=typeof br=="function"?br:b(+br),Pr):hr},Pr.endAngle=function(br){return arguments.length?(Yr=typeof br=="function"?br:b(+br),Pr):Yr},Pr.padAngle=function(br){return arguments.length?(zr=typeof br=="function"?br:b(+br),Pr):zr},Pr}var O=Y(L);function F(at){this._curve=at}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Ft){this._curve.point(Ft*Math.sin(at),Ft*-Math.cos(at))}};function Y(at){function Ft(er){return new F(at(er))}return Ft._curve=at,Ft}function X(at){var Ft=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(er){return arguments.length?Ft(Y(er)):Ft()._curve},at}function q(){return X(P().curve(O))}function $(){var at=z().curve(O),Ft=at.curve,er=at.lineX0,hr=at.lineX1,Yr=at.lineY0,zr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return X(er())},delete at.lineX0,at.lineEndAngle=function(){return X(hr())},delete at.lineX1,at.lineInnerRadius=function(){return X(Yr())},delete at.lineY0,at.lineOuterRadius=function(){return X(zr())},delete at.lineY1,at.curve=function(Pr){return arguments.length?Ft(Y(Pr)):Ft()._curve},at}function V(at,Ft){return[(Ft=+Ft)*Math.cos(at-=Math.PI/2),Ft*Math.sin(at)]}var K=Array.prototype.slice;function se(at){return at.source}function ue(at){return at.target}function oe(at){var Ft=se,er=ue,hr=S,Yr=k,zr=null;function Pr(){var br,jr=K.call(arguments),zn=Ft.apply(this,jr),kn=er.apply(this,jr);if(zr||(zr=br=l.path()),at(zr,+hr.apply(this,(jr[0]=zn,jr)),+Yr.apply(this,jr),+hr.apply(this,(jr[0]=kn,jr)),+Yr.apply(this,jr)),br)return zr=null,br+""||null}return Pr.source=function(br){return arguments.length?(Ft=br,Pr):Ft},Pr.target=function(br){return arguments.length?(er=br,Pr):er},Pr.x=function(br){return arguments.length?(hr=typeof br=="function"?br:b(+br),Pr):hr},Pr.y=function(br){return arguments.length?(Yr=typeof br=="function"?br:b(+br),Pr):Yr},Pr.context=function(br){return arguments.length?(zr=br==null?null:br,Pr):zr},Pr}function U(at,Ft,er,hr,Yr){at.moveTo(Ft,er),at.bezierCurveTo(Ft=(Ft+hr)/2,er,Ft,Yr,hr,Yr)}function G(at,Ft,er,hr,Yr){at.moveTo(Ft,er),at.bezierCurveTo(Ft,er=(er+Yr)/2,hr,er,hr,Yr)}function re(at,Ft,er,hr,Yr){var zr=V(Ft,er),Pr=V(Ft,er=(er+Yr)/2),br=V(hr,er),jr=V(hr,Yr);at.moveTo(zr[0],zr[1]),at.bezierCurveTo(Pr[0],Pr[1],br[0],br[1],jr[0],jr[1])}function ee(){return oe(U)}function j(){return oe(G)}function Q(){var at=oe(re);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ne={draw:function(at,Ft){var er=Math.sqrt(Ft/i);at.moveTo(er,0),at.arc(0,0,er,0,h)}},ae={draw:function(at,Ft){var er=Math.sqrt(Ft/5)/2;at.moveTo(-3*er,-er),at.lineTo(-er,-er),at.lineTo(-er,-3*er),at.lineTo(er,-3*er),at.lineTo(er,-er),at.lineTo(3*er,-er),at.lineTo(3*er,er),at.lineTo(er,er),at.lineTo(er,3*er),at.lineTo(-er,3*er),at.lineTo(-er,er),at.lineTo(-3*er,er),at.closePath()}},ie=Math.sqrt(1/3),fe=ie*2,me={draw:function(at,Ft){var er=Math.sqrt(Ft/fe),hr=er*ie;at.moveTo(0,-er),at.lineTo(hr,0),at.lineTo(0,er),at.lineTo(-hr,0),at.closePath()}},ce=.8908130915292852,ye=Math.sin(i/10)/Math.sin(7*i/10),xe=Math.sin(h/10)*ye,ke=-Math.cos(h/10)*ye,Ae={draw:function(at,Ft){var er=Math.sqrt(Ft*ce),hr=xe*er,Yr=ke*er;at.moveTo(0,-er),at.lineTo(hr,Yr);for(var zr=1;zr<5;++zr){var Pr=h*zr/5,br=Math.cos(Pr),jr=Math.sin(Pr);at.lineTo(jr*er,-br*er),at.lineTo(br*hr-jr*Yr,jr*hr+br*Yr)}at.closePath()}},Oe={draw:function(at,Ft){var er=Math.sqrt(Ft),hr=-er/2;at.rect(hr,hr,er,er)}},He=Math.sqrt(3),Ge={draw:function(at,Ft){var er=-Math.sqrt(Ft/(He*3));at.moveTo(0,er*2),at.lineTo(-He*er,-er),at.lineTo(He*er,-er),at.closePath()}},_e=-.5,Ie=Math.sqrt(3)/2,Ye=1/Math.sqrt(12),qe=(Ye/2+1)*3,Ue={draw:function(at,Ft){var er=Math.sqrt(Ft/qe),hr=er/2,Yr=er*Ye,zr=hr,Pr=er*Ye+er,br=-zr,jr=Pr;at.moveTo(hr,Yr),at.lineTo(zr,Pr),at.lineTo(br,jr),at.lineTo(_e*hr-Ie*Yr,Ie*hr+_e*Yr),at.lineTo(_e*zr-Ie*Pr,Ie*zr+_e*Pr),at.lineTo(_e*br-Ie*jr,Ie*br+_e*jr),at.lineTo(_e*hr+Ie*Yr,_e*Yr-Ie*hr),at.lineTo(_e*zr+Ie*Pr,_e*Pr-Ie*zr),at.lineTo(_e*br+Ie*jr,_e*jr-Ie*br),at.closePath()}},Re=[ne,ae,me,Oe,Ae,Ge,Ue];function Ve(){var at=b(ne),Ft=b(64),er=null;function hr(){var Yr;if(er||(er=Yr=l.path()),at.apply(this,arguments).draw(er,+Ft.apply(this,arguments)),Yr)return er=null,Yr+""||null}return hr.type=function(Yr){return arguments.length?(at=typeof Yr=="function"?Yr:b(Yr),hr):at},hr.size=function(Yr){return arguments.length?(Ft=typeof Yr=="function"?Yr:b(+Yr),hr):Ft},hr.context=function(Yr){return arguments.length?(er=Yr==null?null:Yr,hr):er},hr}function dt(){}function Dt(at,Ft,er){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+Ft)/6,(at._y0+4*at._y1+er)/6)}function Gt(at){this._context=at}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function kt(at){return new Gt(at)}function zt(at){this._context=at}zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._x2=at,this._y2=Ft;break;case 1:this._point=2,this._x3=at,this._y3=Ft;break;case 2:this._point=3,this._x4=at,this._y4=Ft,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Ft)/6);break;default:Dt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function Bt(at){return new zt(at)}function Lt(at){this._context=at}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var er=(this._x0+4*this._x1+at)/6,hr=(this._y0+4*this._y1+Ft)/6;this._line?this._context.lineTo(er,hr):this._context.moveTo(er,hr);break;case 3:this._point=4;default:Dt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function Mt(at){return new Lt(at)}function it(at,Ft){this._basis=new Gt(at),this._beta=Ft}it.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Ft=this._y,er=at.length-1;if(er>0)for(var hr=at[0],Yr=Ft[0],zr=at[er]-hr,Pr=Ft[er]-Yr,br=-1,jr;++br<=er;)jr=br/er,this._basis.point(this._beta*at[br]+(1-this._beta)*(hr+jr*zr),this._beta*Ft[br]+(1-this._beta)*(Yr+jr*Pr));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Ft){this._x.push(+at),this._y.push(+Ft)}};var ht=function at(Ft){function er(hr){return Ft===1?new Gt(hr):new it(hr,Ft)}return er.beta=function(hr){return at(+hr)},er}(.85);function Qe(at,Ft,er){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-Ft),at._y2+at._k*(at._y1-er),at._x2,at._y2)}function Ce(at,Ft){this._context=at,this._k=(1-Ft)/6}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2,this._x1=at,this._y1=Ft;break;case 2:this._point=3;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var je=function at(Ft){function er(hr){return new Ce(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function rt(at,Ft){this._context=at,this._k=(1-Ft)/6}rt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._x3=at,this._y3=Ft;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ft);break;case 2:this._point=3,this._x5=at,this._y5=Ft;break;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var ut=function at(Ft){function er(hr){return new rt(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function Pt(at,Ft){this._context=at,this._k=(1-Ft)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var St=function at(Ft){function er(hr){return new Pt(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function Nt(at,Ft,er){var hr=at._x1,Yr=at._y1,zr=at._x2,Pr=at._y2;if(at._l01_a>s){var br=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,jr=3*at._l01_a*(at._l01_a+at._l12_a);hr=(hr*br-at._x0*at._l12_2a+at._x2*at._l01_2a)/jr,Yr=(Yr*br-at._y0*at._l12_2a+at._y2*at._l01_2a)/jr}if(at._l23_a>s){var zn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,kn=3*at._l23_a*(at._l23_a+at._l12_a);zr=(zr*zn+at._x1*at._l23_2a-Ft*at._l12_2a)/kn,Pr=(Pr*zn+at._y1*at._l23_2a-er*at._l12_2a)/kn}at._context.bezierCurveTo(hr,Yr,zr,Pr,at._x2,at._y2)}function Xt(at,Ft){this._context=at,this._alpha=Ft}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Ot=function at(Ft){function er(hr){return Ft?new Xt(hr,Ft):new Ce(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function Kt(at,Ft){this._context=at,this._alpha=Ft}Kt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Ft;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ft);break;case 2:this._point=3,this._x5=at,this._y5=Ft;break;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Je=function at(Ft){function er(hr){return Ft?new Kt(hr,Ft):new rt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function gt(at,Ft){this._context=at,this._alpha=Ft}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Et=function at(Ft){function er(hr){return Ft?new gt(hr,Ft):new Pt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function rr(at){this._context=at}rr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Ft){at=+at,Ft=+Ft,this._point?this._context.lineTo(at,Ft):(this._point=1,this._context.moveTo(at,Ft))}};function vr(at){return new rr(at)}function or(at){return at<0?-1:1}function dr(at,Ft,er){var hr=at._x1-at._x0,Yr=Ft-at._x1,zr=(at._y1-at._y0)/(hr||Yr<0&&-0),Pr=(er-at._y1)/(Yr||hr<0&&-0),br=(zr*Yr+Pr*hr)/(hr+Yr);return(or(zr)+or(Pr))*Math.min(Math.abs(zr),Math.abs(Pr),.5*Math.abs(br))||0}function Lr(at,Ft){var er=at._x1-at._x0;return er?(3*(at._y1-at._y0)/er-Ft)/2:Ft}function kr(at,Ft,er){var hr=at._x0,Yr=at._y0,zr=at._x1,Pr=at._y1,br=(zr-hr)/3;at._context.bezierCurveTo(hr+br,Yr+br*Ft,zr-br,Pr-br*er,zr,Pr)}function tr(at){this._context=at}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kr(this,this._t0,Lr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){var er=NaN;if(at=+at,Ft=+Ft,!(at===this._x1&&Ft===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3,kr(this,Lr(this,er=dr(this,at,Ft)),er);break;default:kr(this,this._t0,er=dr(this,at,Ft));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft,this._t0=er}}};function Or(at){this._context=new et(at)}(Or.prototype=Object.create(tr.prototype)).point=function(at,Ft){tr.prototype.point.call(this,Ft,at)};function et(at){this._context=at}et.prototype={moveTo:function(at,Ft){this._context.moveTo(Ft,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Ft){this._context.lineTo(Ft,at)},bezierCurveTo:function(at,Ft,er,hr,Yr,zr){this._context.bezierCurveTo(Ft,at,hr,er,zr,Yr)}};function we(at){return new tr(at)}function Se(at){return new Or(at)}function De(at){this._context=at}De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Ft=this._y,er=at.length;if(er)if(this._line?this._context.lineTo(at[0],Ft[0]):this._context.moveTo(at[0],Ft[0]),er===2)this._context.lineTo(at[1],Ft[1]);else for(var hr=Xe(at),Yr=Xe(Ft),zr=0,Pr=1;Pr<er;++zr,++Pr)this._context.bezierCurveTo(hr[0][zr],Yr[0][zr],hr[1][zr],Yr[1][zr],at[Pr],Ft[Pr]);(this._line||this._line!==0&&er===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Ft){this._x.push(+at),this._y.push(+Ft)}};function Xe(at){var Ft,er=at.length-1,hr,Yr=new Array(er),zr=new Array(er),Pr=new Array(er);for(Yr[0]=0,zr[0]=2,Pr[0]=at[0]+2*at[1],Ft=1;Ft<er-1;++Ft)Yr[Ft]=1,zr[Ft]=4,Pr[Ft]=4*at[Ft]+2*at[Ft+1];for(Yr[er-1]=2,zr[er-1]=7,Pr[er-1]=8*at[er-1]+at[er],Ft=1;Ft<er;++Ft)hr=Yr[Ft]/zr[Ft-1],zr[Ft]-=hr,Pr[Ft]-=hr*Pr[Ft-1];for(Yr[er-1]=Pr[er-1]/zr[er-1],Ft=er-2;Ft>=0;--Ft)Yr[Ft]=(Pr[Ft]-Yr[Ft+1])/zr[Ft];for(zr[er-1]=(at[er]+Yr[er-1])/2,Ft=0;Ft<er-1;++Ft)zr[Ft]=2*at[Ft+1]-Yr[Ft+1];return[Yr,zr]}function $e(at){return new De(at)}function ot(at,Ft){this._context=at,this._t=Ft}ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ft),this._context.lineTo(at,Ft);else{var er=this._x*(1-this._t)+at*this._t;this._context.lineTo(er,this._y),this._context.lineTo(er,Ft)}break}}this._x=at,this._y=Ft}};function st(at){return new ot(at,.5)}function pt(at){return new ot(at,0)}function wt(at){return new ot(at,1)}function Yt(at,Ft){if((Pr=at.length)>1)for(var er=1,hr,Yr,zr=at[Ft[0]],Pr,br=zr.length;er<Pr;++er)for(Yr=zr,zr=at[Ft[er]],hr=0;hr<br;++hr)zr[hr][1]+=zr[hr][0]=isNaN(Yr[hr][1])?Yr[hr][0]:Yr[hr][1]}function mr(at){for(var Ft=at.length,er=new Array(Ft);--Ft>=0;)er[Ft]=Ft;return er}function xr(at,Ft){return at[Ft]}function Tr(){var at=b([]),Ft=mr,er=Yt,hr=xr;function Yr(zr){var Pr=at.apply(this,arguments),br,jr=zr.length,zn=Pr.length,kn=new Array(zn),ta;for(br=0;br<zn;++br){for(var ia=Pr[br],Aa=kn[br]=new Array(jr),ya=0,pr;ya<jr;++ya)Aa[ya]=pr=[0,+hr(zr[ya],ia,ya,zr)],pr.data=zr[ya];Aa.key=ia}for(br=0,ta=Ft(kn);br<zn;++br)kn[ta[br]].index=br;return er(kn,ta),kn}return Yr.keys=function(zr){return arguments.length?(at=typeof zr=="function"?zr:b(K.call(zr)),Yr):at},Yr.value=function(zr){return arguments.length?(hr=typeof zr=="function"?zr:b(+zr),Yr):hr},Yr.order=function(zr){return arguments.length?(Ft=zr==null?mr:typeof zr=="function"?zr:b(K.call(zr)),Yr):Ft},Yr.offset=function(zr){return arguments.length?(er=zr==null?Yt:zr,Yr):er},Yr}function yr(at,Ft){if((hr=at.length)>0){for(var er,hr,Yr=0,zr=at[0].length,Pr;Yr<zr;++Yr){for(Pr=er=0;er<hr;++er)Pr+=at[er][Yr][1]||0;if(Pr)for(er=0;er<hr;++er)at[er][Yr][1]/=Pr}Yt(at,Ft)}}function Dr(at,Ft){if((jr=at.length)>0)for(var er,hr=0,Yr,zr,Pr,br,jr,zn=at[Ft[0]].length;hr<zn;++hr)for(Pr=br=0,er=0;er<jr;++er)(zr=(Yr=at[Ft[er]][hr])[1]-Yr[0])>0?(Yr[0]=Pr,Yr[1]=Pr+=zr):zr<0?(Yr[1]=br,Yr[0]=br+=zr):(Yr[0]=0,Yr[1]=zr)}function tn(at,Ft){if((Yr=at.length)>0){for(var er=0,hr=at[Ft[0]],Yr,zr=hr.length;er<zr;++er){for(var Pr=0,br=0;Pr<Yr;++Pr)br+=at[Pr][er][1]||0;hr[er][1]+=hr[er][0]=-br/2}Yt(at,Ft)}}function wr(at,Ft){if(!(!((Pr=at.length)>0)||!((zr=(Yr=at[Ft[0]]).length)>0))){for(var er=0,hr=1,Yr,zr,Pr;hr<zr;++hr){for(var br=0,jr=0,zn=0;br<Pr;++br){for(var kn=at[Ft[br]],ta=kn[hr][1]||0,ia=kn[hr-1][1]||0,Aa=(ta-ia)/2,ya=0;ya<br;++ya){var pr=at[Ft[ya]],vn=pr[hr][1]||0,$r=pr[hr-1][1]||0;Aa+=vn-$r}jr+=ta,zn+=Aa*ta}Yr[hr-1][1]+=Yr[hr-1][0]=er,jr&&(er-=zn/jr)}Yr[hr-1][1]+=Yr[hr-1][0]=er,Yt(at,Ft)}}function gr(at){var Ft=at.map(yn);return mr(at).sort(function(er,hr){return Ft[er]-Ft[hr]})}function yn(at){for(var Ft=-1,er=0,hr=at.length,Yr,zr=-1/0;++Ft<hr;)(Yr=+at[Ft][1])>zr&&(zr=Yr,er=Ft);return er}function Gr(at){var Ft=at.map(Ar);return mr(at).sort(function(er,hr){return Ft[er]-Ft[hr]})}function Ar(at){for(var Ft=0,er=-1,hr=at.length,Yr;++er<hr;)(Yr=+at[er][1])&&(Ft+=Yr);return Ft}function nn(at){return Gr(at).reverse()}function fn(at){var Ft=at.length,er,hr,Yr=at.map(Ar),zr=gr(at),Pr=0,br=0,jr=[],zn=[];for(er=0;er<Ft;++er)hr=zr[er],Pr<br?(Pr+=Yr[hr],jr.push(hr)):(br+=Yr[hr],zn.push(hr));return zn.reverse().concat(jr)}function Xr(at){return mr(at).reverse()}d.arc=x,d.area=z,d.areaRadial=$,d.curveBasis=kt,d.curveBasisClosed=Bt,d.curveBasisOpen=Mt,d.curveBundle=ht,d.curveCardinal=je,d.curveCardinalClosed=ut,d.curveCardinalOpen=St,d.curveCatmullRom=Ot,d.curveCatmullRomClosed=Je,d.curveCatmullRomOpen=Et,d.curveLinear=L,d.curveLinearClosed=vr,d.curveMonotoneX=we,d.curveMonotoneY=Se,d.curveNatural=$e,d.curveStep=st,d.curveStepAfter=wt,d.curveStepBefore=pt,d.line=P,d.lineRadial=q,d.linkHorizontal=ee,d.linkRadial=Q,d.linkVertical=j,d.pie=D,d.pointRadial=V,d.radialArea=$,d.radialLine=q,d.stack=Tr,d.stackOffsetDiverging=Dr,d.stackOffsetExpand=yr,d.stackOffsetNone=Yt,d.stackOffsetSilhouette=tn,d.stackOffsetWiggle=wr,d.stackOrderAppearance=gr,d.stackOrderAscending=Gr,d.stackOrderDescending=nn,d.stackOrderInsideOut=fn,d.stackOrderNone=mr,d.stackOrderReverse=Xr,d.symbol=Ve,d.symbolCircle=ne,d.symbolCross=ae,d.symbolDiamond=me,d.symbolSquare=Oe,d.symbolStar=Ae,d.symbolTriangle=Ge,d.symbolWye=Ue,d.symbols=Re,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-time")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(it){if(0<=it.y&&it.y<100){var ht=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return ht.setFullYear(it.y),ht}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function w(it){if(0<=it.y&&it.y<100){var ht=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return ht.setUTCFullYear(it.y),ht}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function e(it,ht,Qe){return{y:it,m:ht,d:Qe,H:0,M:0,S:0,L:0}}function o(it){var ht=it.dateTime,Qe=it.date,Ce=it.time,je=it.periods,rt=it.days,ut=it.shortDays,Pt=it.months,St=it.shortMonths,Nt=f(je),Xt=h(je),Ot=f(rt),Kt=h(rt),Je=f(ut),gt=h(ut),Et=f(Pt),rr=h(Pt),vr=f(St),or=h(St),dr={a:wt,A:Yt,b:mr,B:xr,c:null,d:F,e:F,f:V,H:Y,I:X,j:q,L:$,m:K,M:se,p:Tr,q:yr,Q:Ve,s:dt,S:ue,u:oe,U,V:G,w:re,W:ee,x:null,X:null,y:j,Y:Q,Z:ne,"%":Re},Lr={a:Dr,A:tn,b:wr,B:gr,c:null,d:ae,e:ae,f:ye,H:ie,I:fe,j:me,L:ce,m:xe,M:ke,p:yn,q:Gr,Q:Ve,s:dt,S:Ae,u:Oe,U:He,V:Ge,w:_e,W:Ie,x:null,X:null,y:Ye,Y:qe,Z:Ue,"%":Re},kr={a:Se,A:De,b:Xe,B:$e,c:ot,d:c,e:c,f:I,H:S,I:S,j:L,L:z,m:x,M:k,p:we,q:T,Q:D,s:O,S:P,u:v,U:y,V:g,w:p,W:A,x:st,X:pt,y:M,Y:m,Z:_,"%":R};dr.x=tr(Qe,dr),dr.X=tr(Ce,dr),dr.c=tr(ht,dr),Lr.x=tr(Qe,Lr),Lr.X=tr(Ce,Lr),Lr.c=tr(ht,Lr);function tr(Ar,nn){return function(fn){var Xr=[],at=-1,Ft=0,er=Ar.length,hr,Yr,zr;for(fn instanceof Date||(fn=new Date(+fn));++at<er;)Ar.charCodeAt(at)===37&&(Xr.push(Ar.slice(Ft,at)),(Yr=a[hr=Ar.charAt(++at)])!=null?hr=Ar.charAt(++at):Yr=hr==="e"?" ":"0",(zr=nn[hr])&&(hr=zr(fn,Yr)),Xr.push(hr),Ft=at+1);return Xr.push(Ar.slice(Ft,at)),Xr.join("")}}function Or(Ar,nn){return function(fn){var Xr=e(1900,void 0,1),at=et(Xr,Ar,fn+="",0),Ft,er;if(at!=fn.length)return null;if("Q"in Xr)return new Date(Xr.Q);if("s"in Xr)return new Date(Xr.s*1e3+("L"in Xr?Xr.L:0));if(nn&&!("Z"in Xr)&&(Xr.Z=0),"p"in Xr&&(Xr.H=Xr.H%12+Xr.p*12),Xr.m===void 0&&(Xr.m="q"in Xr?Xr.q:0),"V"in Xr){if(Xr.V<1||Xr.V>53)return null;"w"in Xr||(Xr.w=1),"Z"in Xr?(Ft=w(e(Xr.y,0,1)),er=Ft.getUTCDay(),Ft=er>4||er===0?l.utcMonday.ceil(Ft):l.utcMonday(Ft),Ft=l.utcDay.offset(Ft,(Xr.V-1)*7),Xr.y=Ft.getUTCFullYear(),Xr.m=Ft.getUTCMonth(),Xr.d=Ft.getUTCDate()+(Xr.w+6)%7):(Ft=b(e(Xr.y,0,1)),er=Ft.getDay(),Ft=er>4||er===0?l.timeMonday.ceil(Ft):l.timeMonday(Ft),Ft=l.timeDay.offset(Ft,(Xr.V-1)*7),Xr.y=Ft.getFullYear(),Xr.m=Ft.getMonth(),Xr.d=Ft.getDate()+(Xr.w+6)%7)}else("W"in Xr||"U"in Xr)&&("w"in Xr||(Xr.w="u"in Xr?Xr.u%7:"W"in Xr?1:0),er="Z"in Xr?w(e(Xr.y,0,1)).getUTCDay():b(e(Xr.y,0,1)).getDay(),Xr.m=0,Xr.d="W"in Xr?(Xr.w+6)%7+Xr.W*7-(er+5)%7:Xr.w+Xr.U*7-(er+6)%7);return"Z"in Xr?(Xr.H+=Xr.Z/100|0,Xr.M+=Xr.Z%100,w(Xr)):b(Xr)}}function et(Ar,nn,fn,Xr){for(var at=0,Ft=nn.length,er=fn.length,hr,Yr;at<Ft;){if(Xr>=er)return-1;if(hr=nn.charCodeAt(at++),hr===37){if(hr=nn.charAt(at++),Yr=kr[hr in a?nn.charAt(at++):hr],!Yr||(Xr=Yr(Ar,fn,Xr))<0)return-1}else if(hr!=fn.charCodeAt(Xr++))return-1}return Xr}function we(Ar,nn,fn){var Xr=Nt.exec(nn.slice(fn));return Xr?(Ar.p=Xt[Xr[0].toLowerCase()],fn+Xr[0].length):-1}function Se(Ar,nn,fn){var Xr=Je.exec(nn.slice(fn));return Xr?(Ar.w=gt[Xr[0].toLowerCase()],fn+Xr[0].length):-1}function De(Ar,nn,fn){var Xr=Ot.exec(nn.slice(fn));return Xr?(Ar.w=Kt[Xr[0].toLowerCase()],fn+Xr[0].length):-1}function Xe(Ar,nn,fn){var Xr=vr.exec(nn.slice(fn));return Xr?(Ar.m=or[Xr[0].toLowerCase()],fn+Xr[0].length):-1}function $e(Ar,nn,fn){var Xr=Et.exec(nn.slice(fn));return Xr?(Ar.m=rr[Xr[0].toLowerCase()],fn+Xr[0].length):-1}function ot(Ar,nn,fn){return et(Ar,ht,nn,fn)}function st(Ar,nn,fn){return et(Ar,Qe,nn,fn)}function pt(Ar,nn,fn){return et(Ar,Ce,nn,fn)}function wt(Ar){return ut[Ar.getDay()]}function Yt(Ar){return rt[Ar.getDay()]}function mr(Ar){return St[Ar.getMonth()]}function xr(Ar){return Pt[Ar.getMonth()]}function Tr(Ar){return je[+(Ar.getHours()>=12)]}function yr(Ar){return 1+~~(Ar.getMonth()/3)}function Dr(Ar){return ut[Ar.getUTCDay()]}function tn(Ar){return rt[Ar.getUTCDay()]}function wr(Ar){return St[Ar.getUTCMonth()]}function gr(Ar){return Pt[Ar.getUTCMonth()]}function yn(Ar){return je[+(Ar.getUTCHours()>=12)]}function Gr(Ar){return 1+~~(Ar.getUTCMonth()/3)}return{format:function(Ar){var nn=tr(Ar+="",dr);return nn.toString=function(){return Ar},nn},parse:function(Ar){var nn=Or(Ar+="",!1);return nn.toString=function(){return Ar},nn},utcFormat:function(Ar){var nn=tr(Ar+="",Lr);return nn.toString=function(){return Ar},nn},utcParse:function(Ar){var nn=Or(Ar+="",!0);return nn.toString=function(){return Ar},nn}}}var a={"-":"",_:" ","0":"0"},n=/^\s*\d+/,r=/^%/,u=/[\\^$*+?|[\]().{}]/g;function s(it,ht,Qe){var Ce=it<0?"-":"",je=(Ce?-it:it)+"",rt=je.length;return Ce+(rt<Qe?new Array(Qe-rt+1).join(ht)+je:je)}function i(it){return it.replace(u,"\\$&")}function f(it){return new RegExp("^(?:"+it.map(i).join("|")+")","i")}function h(it){for(var ht={},Qe=-1,Ce=it.length;++Qe<Ce;)ht[it[Qe].toLowerCase()]=Qe;return ht}function p(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+1));return Ce?(it.w=+Ce[0],Qe+Ce[0].length):-1}function v(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+1));return Ce?(it.u=+Ce[0],Qe+Ce[0].length):-1}function y(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.U=+Ce[0],Qe+Ce[0].length):-1}function g(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.V=+Ce[0],Qe+Ce[0].length):-1}function A(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.W=+Ce[0],Qe+Ce[0].length):-1}function m(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+4));return Ce?(it.y=+Ce[0],Qe+Ce[0].length):-1}function M(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.y=+Ce[0]+(+Ce[0]>68?1900:2e3),Qe+Ce[0].length):-1}function _(it,ht,Qe){var Ce=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ht.slice(Qe,Qe+6));return Ce?(it.Z=Ce[1]?0:-(Ce[2]+(Ce[3]||"00")),Qe+Ce[0].length):-1}function T(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+1));return Ce?(it.q=Ce[0]*3-3,Qe+Ce[0].length):-1}function x(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.m=Ce[0]-1,Qe+Ce[0].length):-1}function c(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.d=+Ce[0],Qe+Ce[0].length):-1}function L(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+3));return Ce?(it.m=0,it.d=+Ce[0],Qe+Ce[0].length):-1}function S(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.H=+Ce[0],Qe+Ce[0].length):-1}function k(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.M=+Ce[0],Qe+Ce[0].length):-1}function P(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+2));return Ce?(it.S=+Ce[0],Qe+Ce[0].length):-1}function z(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+3));return Ce?(it.L=+Ce[0],Qe+Ce[0].length):-1}function I(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+6));return Ce?(it.L=Math.floor(Ce[0]/1e3),Qe+Ce[0].length):-1}function R(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?Qe+Ce[0].length:-1}function D(it,ht,Qe){var Ce=n.exec(ht.slice(Qe));return Ce?(it.Q=+Ce[0],Qe+Ce[0].length):-1}function O(it,ht,Qe){var Ce=n.exec(ht.slice(Qe));return Ce?(it.s=+Ce[0],Qe+Ce[0].length):-1}function F(it,ht){return s(it.getDate(),ht,2)}function Y(it,ht){return s(it.getHours(),ht,2)}function X(it,ht){return s(it.getHours()%12||12,ht,2)}function q(it,ht){return s(1+l.timeDay.count(l.timeYear(it),it),ht,3)}function $(it,ht){return s(it.getMilliseconds(),ht,3)}function V(it,ht){return $(it,ht)+"000"}function K(it,ht){return s(it.getMonth()+1,ht,2)}function se(it,ht){return s(it.getMinutes(),ht,2)}function ue(it,ht){return s(it.getSeconds(),ht,2)}function oe(it){var ht=it.getDay();return ht===0?7:ht}function U(it,ht){return s(l.timeSunday.count(l.timeYear(it)-1,it),ht,2)}function G(it,ht){var Qe=it.getDay();return it=Qe>=4||Qe===0?l.timeThursday(it):l.timeThursday.ceil(it),s(l.timeThursday.count(l.timeYear(it),it)+(l.timeYear(it).getDay()===4),ht,2)}function re(it){return it.getDay()}function ee(it,ht){return s(l.timeMonday.count(l.timeYear(it)-1,it),ht,2)}function j(it,ht){return s(it.getFullYear()%100,ht,2)}function Q(it,ht){return s(it.getFullYear()%1e4,ht,4)}function ne(it){var ht=it.getTimezoneOffset();return(ht>0?"-":(ht*=-1,"+"))+s(ht/60|0,"0",2)+s(ht%60,"0",2)}function ae(it,ht){return s(it.getUTCDate(),ht,2)}function ie(it,ht){return s(it.getUTCHours(),ht,2)}function fe(it,ht){return s(it.getUTCHours()%12||12,ht,2)}function me(it,ht){return s(1+l.utcDay.count(l.utcYear(it),it),ht,3)}function ce(it,ht){return s(it.getUTCMilliseconds(),ht,3)}function ye(it,ht){return ce(it,ht)+"000"}function xe(it,ht){return s(it.getUTCMonth()+1,ht,2)}function ke(it,ht){return s(it.getUTCMinutes(),ht,2)}function Ae(it,ht){return s(it.getUTCSeconds(),ht,2)}function Oe(it){var ht=it.getUTCDay();return ht===0?7:ht}function He(it,ht){return s(l.utcSunday.count(l.utcYear(it)-1,it),ht,2)}function Ge(it,ht){var Qe=it.getUTCDay();return it=Qe>=4||Qe===0?l.utcThursday(it):l.utcThursday.ceil(it),s(l.utcThursday.count(l.utcYear(it),it)+(l.utcYear(it).getUTCDay()===4),ht,2)}function _e(it){return it.getUTCDay()}function Ie(it,ht){return s(l.utcMonday.count(l.utcYear(it)-1,it),ht,2)}function Ye(it,ht){return s(it.getUTCFullYear()%100,ht,2)}function qe(it,ht){return s(it.getUTCFullYear()%1e4,ht,4)}function Ue(){return"+0000"}function Re(){return"%"}function Ve(it){return+it}function dt(it){return Math.floor(+it/1e3)}var Dt;Gt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gt(it){return Dt=o(it),d.timeFormat=Dt.format,d.timeParse=Dt.parse,d.utcFormat=Dt.utcFormat,d.utcParse=Dt.utcParse,Dt}var kt="%Y-%m-%dT%H:%M:%S.%LZ";function zt(it){return it.toISOString()}var Bt=Date.prototype.toISOString?zt:d.utcFormat(kt);function Lt(it){var ht=new Date(it);return isNaN(ht)?null:ht}var Mt=+new Date("2000-01-01T00:00:00.000Z")?Lt:d.utcParse(kt);d.isoFormat=Bt,d.isoParse=Mt,d.timeFormatDefaultLocale=Gt,d.timeFormatLocale=o,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=new Date,b=new Date;function w(_e,Ie,Ye,qe){function Ue(Re){return _e(Re=arguments.length===0?new Date:new Date(+Re)),Re}return Ue.floor=function(Re){return _e(Re=new Date(+Re)),Re},Ue.ceil=function(Re){return _e(Re=new Date(Re-1)),Ie(Re,1),_e(Re),Re},Ue.round=function(Re){var Ve=Ue(Re),dt=Ue.ceil(Re);return Re-Ve<dt-Re?Ve:dt},Ue.offset=function(Re,Ve){return Ie(Re=new Date(+Re),Ve==null?1:Math.floor(Ve)),Re},Ue.range=function(Re,Ve,dt){var Dt=[],Gt;if(Re=Ue.ceil(Re),dt=dt==null?1:Math.floor(dt),!(Re<Ve)||!(dt>0))return Dt;do Dt.push(Gt=new Date(+Re)),Ie(Re,dt),_e(Re);while(Gt<Re&&Re<Ve);return Dt},Ue.filter=function(Re){return w(function(Ve){if(Ve>=Ve)for(;_e(Ve),!Re(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;Ie(Ve,-1),!Re(Ve););else for(;--dt>=0;)for(;Ie(Ve,1),!Re(Ve););})},Ye&&(Ue.count=function(Re,Ve){return l.setTime(+Re),b.setTime(+Ve),_e(l),_e(b),Math.floor(Ye(l,b))},Ue.every=function(Re){return Re=Math.floor(Re),!isFinite(Re)||!(Re>0)?null:Re>1?Ue.filter(qe?function(Ve){return qe(Ve)%Re==0}:function(Ve){return Ue.count(0,Ve)%Re==0}):Ue}),Ue}var e=w(function(){},function(_e,Ie){_e.setTime(+_e+Ie)},function(_e,Ie){return Ie-_e});e.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?w(function(Ie){Ie.setTime(Math.floor(Ie/_e)*_e)},function(Ie,Ye){Ie.setTime(+Ie+Ye*_e)},function(Ie,Ye){return(Ye-Ie)/_e}):e};var o=e.range,a=1e3,n=6e4,r=36e5,u=864e5,s=6048e5,i=w(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,Ie){_e.setTime(+_e+Ie*a)},function(_e,Ie){return(Ie-_e)/a},function(_e){return _e.getUTCSeconds()}),f=i.range,h=w(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a)},function(_e,Ie){_e.setTime(+_e+Ie*n)},function(_e,Ie){return(Ie-_e)/n},function(_e){return _e.getMinutes()}),p=h.range,v=w(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a-_e.getMinutes()*n)},function(_e,Ie){_e.setTime(+_e+Ie*r)},function(_e,Ie){return(Ie-_e)/r},function(_e){return _e.getHours()}),y=v.range,g=w(function(_e){_e.setHours(0,0,0,0)},function(_e,Ie){_e.setDate(_e.getDate()+Ie)},function(_e,Ie){return(Ie-_e-(Ie.getTimezoneOffset()-_e.getTimezoneOffset())*n)/u},function(_e){return _e.getDate()-1}),A=g.range;function m(_e){return w(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-_e)%7),Ie.setHours(0,0,0,0)},function(Ie,Ye){Ie.setDate(Ie.getDate()+Ye*7)},function(Ie,Ye){return(Ye-Ie-(Ye.getTimezoneOffset()-Ie.getTimezoneOffset())*n)/s})}var M=m(0),_=m(1),T=m(2),x=m(3),c=m(4),L=m(5),S=m(6),k=M.range,P=_.range,z=T.range,I=x.range,R=c.range,D=L.range,O=S.range,F=w(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,Ie){_e.setMonth(_e.getMonth()+Ie)},function(_e,Ie){return Ie.getMonth()-_e.getMonth()+(Ie.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),Y=F.range,X=w(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,Ie){_e.setFullYear(_e.getFullYear()+Ie)},function(_e,Ie){return Ie.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});X.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:w(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/_e)*_e),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,Ye){Ie.setFullYear(Ie.getFullYear()+Ye*_e)})};var q=X.range,$=w(function(_e){_e.setUTCSeconds(0,0)},function(_e,Ie){_e.setTime(+_e+Ie*n)},function(_e,Ie){return(Ie-_e)/n},function(_e){return _e.getUTCMinutes()}),V=$.range,K=w(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,Ie){_e.setTime(+_e+Ie*r)},function(_e,Ie){return(Ie-_e)/r},function(_e){return _e.getUTCHours()}),se=K.range,ue=w(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCDate(_e.getUTCDate()+Ie)},function(_e,Ie){return(Ie-_e)/u},function(_e){return _e.getUTCDate()-1}),oe=ue.range;function U(_e){return w(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-_e)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,Ye){Ie.setUTCDate(Ie.getUTCDate()+Ye*7)},function(Ie,Ye){return(Ye-Ie)/s})}var G=U(0),re=U(1),ee=U(2),j=U(3),Q=U(4),ne=U(5),ae=U(6),ie=G.range,fe=re.range,me=ee.range,ce=j.range,ye=Q.range,xe=ne.range,ke=ae.range,Ae=w(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCMonth(_e.getUTCMonth()+Ie)},function(_e,Ie){return Ie.getUTCMonth()-_e.getUTCMonth()+(Ie.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Oe=Ae.range,He=w(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCFullYear(_e.getUTCFullYear()+Ie)},function(_e,Ie){return Ie.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});He.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:w(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/_e)*_e),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,Ye){Ie.setUTCFullYear(Ie.getUTCFullYear()+Ye*_e)})};var Ge=He.range;d.timeDay=g,d.timeDays=A,d.timeFriday=L,d.timeFridays=D,d.timeHour=v,d.timeHours=y,d.timeInterval=w,d.timeMillisecond=e,d.timeMilliseconds=o,d.timeMinute=h,d.timeMinutes=p,d.timeMonday=_,d.timeMondays=P,d.timeMonth=F,d.timeMonths=Y,d.timeSaturday=S,d.timeSaturdays=O,d.timeSecond=i,d.timeSeconds=f,d.timeSunday=M,d.timeSundays=k,d.timeThursday=c,d.timeThursdays=R,d.timeTuesday=T,d.timeTuesdays=z,d.timeWednesday=x,d.timeWednesdays=I,d.timeWeek=M,d.timeWeeks=k,d.timeYear=X,d.timeYears=q,d.utcDay=ue,d.utcDays=oe,d.utcFriday=ne,d.utcFridays=xe,d.utcHour=K,d.utcHours=se,d.utcMillisecond=e,d.utcMilliseconds=o,d.utcMinute=$,d.utcMinutes=V,d.utcMonday=re,d.utcMondays=fe,d.utcMonth=Ae,d.utcMonths=Oe,d.utcSaturday=ae,d.utcSaturdays=ke,d.utcSecond=i,d.utcSeconds=f,d.utcSunday=G,d.utcSundays=ie,d.utcThursday=Q,d.utcThursdays=ye,d.utcTuesday=ee,d.utcTuesdays=me,d.utcWednesday=j,d.utcWednesdays=ce,d.utcWeek=G,d.utcWeeks=ie,d.utcYear=He,d.utcYears=Ge,Object.defineProperty(d,"__esModule",{value:!0})})},{}],122:[function(t,B,H){arguments[4][121][0].apply(H,arguments)},{dup:121}],123:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=0,b=0,w=0,e=1e3,o,a,n=0,r=0,u=0,s=typeof performance=="object"&&performance.now?performance:Date,i=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(x){setTimeout(x,17)};function f(){return r||(i(h),r=s.now()+u)}function h(){r=0}function p(){this._call=this._time=this._next=null}p.prototype=v.prototype={constructor:p,restart:function(x,c,L){if(typeof x!="function")throw new TypeError("callback is not a function");L=(L==null?f():+L)+(c==null?0:+c),!this._next&&a!==this&&(a?a._next=this:o=this,a=this),this._call=x,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function v(x,c,L){var S=new p;return S.restart(x,c,L),S}function y(){f(),++l;for(var x=o,c;x;)(c=r-x._time)>=0&&x._call.call(null,c),x=x._next;--l}function g(){r=(n=s.now())+u,l=b=0;try{y()}finally{l=0,m(),r=0}}function A(){var x=s.now(),c=x-n;c>e&&(u-=c,n=x)}function m(){for(var x,c=o,L,S=1/0;c;)c._call?(S>c._time&&(S=c._time),x=c,c=c._next):(L=c._next,c._next=null,c=x?x._next=L:o=L);a=x,M(S)}function M(x){if(!l){b&&(b=clearTimeout(b));var c=x-r;c>24?(x<1/0&&(b=setTimeout(g,x-s.now()-u)),w&&(w=clearInterval(w))):(w||(n=s.now(),w=setInterval(A,e)),l=1,i(g))}}function _(x,c,L){var S=new p;return c=c==null?0:+c,S.restart(function(k){S.stop(),x(k+c)},c,L),S}function T(x,c,L){var S=new p,k=c;return c==null?(S.restart(x,c,L),S):(c=+c,L=L==null?f():+L,S.restart(function P(z){z+=k,S.restart(P,k+=c,L),x(z)},c,L),S)}d.interval=T,d.now=f,d.timeout=_,d.timer=v,d.timerFlush=y,Object.defineProperty(d,"__esModule",{value:!0})})},{}],124:[function(t,B,H){B.exports=function(){for(var d=0;d<arguments.length;d++)if(arguments[d]!==void 0)return arguments[d]}},{}],125:[function(t,B,H){B.exports=w;var d=w.canvas=document.createElement("canvas"),l=d.getContext("2d"),b=e([32,126]);w.createPairs=e,w.ascii=b;function w(o,a){Array.isArray(o)&&(o=o.join(", "));var n={},r,u=16,s=.05;a&&(a.length===2&&typeof a[0]=="number"?r=e(a):Array.isArray(a)?r=a:(a.o?r=e(a.o):a.pairs&&(r=a.pairs),a.fontSize&&(u=a.fontSize),a.threshold!=null&&(s=a.threshold))),r||(r=b),l.font=u+"px "+o;for(var i=0;i<r.length;i++){var f=r[i],h=l.measureText(f[0]).width+l.measureText(f[1]).width,p=l.measureText(f).width;if(Math.abs(h-p)>u*s){var v=(p-h)/u;n[f]=v*1e3}}return n}function e(o){for(var a=[],n=o[0];n<=o[1];n++)for(var r=String.fromCharCode(n),u=o[0];u<o[1];u++){var s=String.fromCharCode(u),i=r+s;a.push(i)}return a}},{}],126:[function(t,B,H){var d=t("abs-svg-path"),l=t("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};B.exports=function(w,e){w.beginPath(),l(d(e)).forEach(function(o){var a=o[0],n=o.slice(1);w[b[a]].apply(w,n)}),w.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,B,H){B.exports=function(d){switch(d){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,B,H){function d(w,e,o){var a=w[o]|0;if(a<=0)return[];var n=new Array(a),r;if(o===w.length-1)for(r=0;r<a;++r)n[r]=e;else for(r=0;r<a;++r)n[r]=d(w,e,o+1);return n}function l(w,e){var o,a;for(o=new Array(w),a=0;a<w;++a)o[a]=e;return o}function b(w,e){switch(typeof e=="undefined"&&(e=0),typeof w){case"number":if(w>0)return l(w|0,e);break;case"object":if(typeof w.length=="number")return d(w,e,0);break}return[]}B.exports=b},{}],129:[function(t,B,H){B.exports=d,B.exports.default=d;function d(D,O,F){F=F||2;var Y=O&&O.length,X=Y?O[0]*F:D.length,q=l(D,0,X,F,!0),$=[];if(!q||q.next===q.prev)return $;var V,K,se,ue,oe,U,G;if(Y&&(q=r(D,O,q,F)),D.length>80*F){V=se=D[0],K=ue=D[1];for(var re=F;re<X;re+=F)oe=D[re],U=D[re+1],oe<V&&(V=oe),U<K&&(K=U),oe>se&&(se=oe),U>ue&&(ue=U);G=Math.max(se-V,ue-K),G=G!==0?1/G:0}return w(q,$,F,V,K,G),$}function l(D,O,F,Y,X){var q,$;if(X===R(D,O,F,Y)>0)for(q=O;q<F;q+=Y)$=P(q,D[q],D[q+1],$);else for(q=F-Y;q>=O;q-=Y)$=P(q,D[q],D[q+1],$);return $&&M($,$.next)&&(z($),$=$.next),$}function b(D,O){if(!D)return D;O||(O=D);var F=D,Y;do if(Y=!1,!F.steiner&&(M(F,F.next)||m(F.prev,F,F.next)===0)){if(z(F),F=O=F.prev,F===F.next)break;Y=!0}else F=F.next;while(Y||F!==O);return O}function w(D,O,F,Y,X,q,$){if(!!D){!$&&q&&h(D,Y,X,q);for(var V=D,K,se;D.prev!==D.next;){if(K=D.prev,se=D.next,q?o(D,Y,X,q):e(D)){O.push(K.i/F),O.push(D.i/F),O.push(se.i/F),z(D),D=se.next,V=se.next;continue}if(D=se,D===V){$?$===1?(D=a(b(D),O,F),w(D,O,F,Y,X,q,2)):$===2&&n(D,O,F,Y,X,q):w(b(D),O,F,Y,X,q,1);break}}}}function e(D){var O=D.prev,F=D,Y=D.next;if(m(O,F,Y)>=0)return!1;for(var X=D.next.next;X!==D.prev;){if(g(O.x,O.y,F.x,F.y,Y.x,Y.y,X.x,X.y)&&m(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function o(D,O,F,Y){var X=D.prev,q=D,$=D.next;if(m(X,q,$)>=0)return!1;for(var V=X.x<q.x?X.x<$.x?X.x:$.x:q.x<$.x?q.x:$.x,K=X.y<q.y?X.y<$.y?X.y:$.y:q.y<$.y?q.y:$.y,se=X.x>q.x?X.x>$.x?X.x:$.x:q.x>$.x?q.x:$.x,ue=X.y>q.y?X.y>$.y?X.y:$.y:q.y>$.y?q.y:$.y,oe=v(V,K,O,F,Y),U=v(se,ue,O,F,Y),G=D.prevZ,re=D.nextZ;G&&G.z>=oe&&re&&re.z<=U;){if(G!==D.prev&&G!==D.next&&g(X.x,X.y,q.x,q.y,$.x,$.y,G.x,G.y)&&m(G.prev,G,G.next)>=0||(G=G.prevZ,re!==D.prev&&re!==D.next&&g(X.x,X.y,q.x,q.y,$.x,$.y,re.x,re.y)&&m(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;G&&G.z>=oe;){if(G!==D.prev&&G!==D.next&&g(X.x,X.y,q.x,q.y,$.x,$.y,G.x,G.y)&&m(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;re&&re.z<=U;){if(re!==D.prev&&re!==D.next&&g(X.x,X.y,q.x,q.y,$.x,$.y,re.x,re.y)&&m(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function a(D,O,F){var Y=D;do{var X=Y.prev,q=Y.next.next;!M(X,q)&&_(X,Y,Y.next,q)&&L(X,q)&&L(q,X)&&(O.push(X.i/F),O.push(Y.i/F),O.push(q.i/F),z(Y),z(Y.next),Y=D=q),Y=Y.next}while(Y!==D);return b(Y)}function n(D,O,F,Y,X,q){var $=D;do{for(var V=$.next.next;V!==$.prev;){if($.i!==V.i&&A($,V)){var K=k($,V);$=b($,$.next),K=b(K,K.next),w($,O,F,Y,X,q),w(K,O,F,Y,X,q);return}V=V.next}$=$.next}while($!==D)}function r(D,O,F,Y){var X=[],q,$,V,K,se;for(q=0,$=O.length;q<$;q++)V=O[q]*Y,K=q<$-1?O[q+1]*Y:D.length,se=l(D,V,K,Y,!1),se===se.next&&(se.steiner=!0),X.push(y(se));for(X.sort(u),q=0;q<X.length;q++)s(X[q],F),F=b(F,F.next);return F}function u(D,O){return D.x-O.x}function s(D,O){if(O=i(D,O),O){var F=k(O,D);b(O,O.next),b(F,F.next)}}function i(D,O){var F=O,Y=D.x,X=D.y,q=-1/0,$;do{if(X<=F.y&&X>=F.next.y&&F.next.y!==F.y){var V=F.x+(X-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(V<=Y&&V>q){if(q=V,V===Y){if(X===F.y)return F;if(X===F.next.y)return F.next}$=F.x<F.next.x?F:F.next}}F=F.next}while(F!==O);if(!$)return null;if(Y===q)return $;var K=$,se=$.x,ue=$.y,oe=1/0,U;F=$;do Y>=F.x&&F.x>=se&&Y!==F.x&&g(X<ue?Y:q,X,se,ue,X<ue?q:Y,X,F.x,F.y)&&(U=Math.abs(X-F.y)/(Y-F.x),L(F,D)&&(U<oe||U===oe&&(F.x>$.x||F.x===$.x&&f($,F)))&&($=F,oe=U)),F=F.next;while(F!==K);return $}function f(D,O){return m(D.prev,D,O.prev)<0&&m(O.next,D,D.next)<0}function h(D,O,F,Y){var X=D;do X.z===null&&(X.z=v(X.x,X.y,O,F,Y)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==D);X.prevZ.nextZ=null,X.prevZ=null,p(X)}function p(D){var O,F,Y,X,q,$,V,K,se=1;do{for(F=D,D=null,q=null,$=0;F;){for($++,Y=F,V=0,O=0;O<se&&(V++,Y=Y.nextZ,!!Y);O++);for(K=se;V>0||K>0&&Y;)V!==0&&(K===0||!Y||F.z<=Y.z)?(X=F,F=F.nextZ,V--):(X=Y,Y=Y.nextZ,K--),q?q.nextZ=X:D=X,X.prevZ=q,q=X;F=Y}q.nextZ=null,se*=2}while($>1);return D}function v(D,O,F,Y,X){return D=32767*(D-F)*X,O=32767*(O-Y)*X,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,D|O<<1}function y(D){var O=D,F=D;do(O.x<F.x||O.x===F.x&&O.y<F.y)&&(F=O),O=O.next;while(O!==D);return F}function g(D,O,F,Y,X,q,$,V){return(X-$)*(O-V)-(D-$)*(q-V)>=0&&(D-$)*(Y-V)-(F-$)*(O-V)>=0&&(F-$)*(q-V)-(X-$)*(Y-V)>=0}function A(D,O){return D.next.i!==O.i&&D.prev.i!==O.i&&!c(D,O)&&(L(D,O)&&L(O,D)&&S(D,O)&&(m(D.prev,D,O.prev)||m(D,O.prev,O))||M(D,O)&&m(D.prev,D,D.next)>0&&m(O.prev,O,O.next)>0)}function m(D,O,F){return(O.y-D.y)*(F.x-O.x)-(O.x-D.x)*(F.y-O.y)}function M(D,O){return D.x===O.x&&D.y===O.y}function _(D,O,F,Y){var X=x(m(D,O,F)),q=x(m(D,O,Y)),$=x(m(F,Y,D)),V=x(m(F,Y,O));return!!(X!==q&&$!==V||X===0&&T(D,F,O)||q===0&&T(D,Y,O)||$===0&&T(F,D,Y)||V===0&&T(F,O,Y))}function T(D,O,F){return O.x<=Math.max(D.x,F.x)&&O.x>=Math.min(D.x,F.x)&&O.y<=Math.max(D.y,F.y)&&O.y>=Math.min(D.y,F.y)}function x(D){return D>0?1:D<0?-1:0}function c(D,O){var F=D;do{if(F.i!==D.i&&F.next.i!==D.i&&F.i!==O.i&&F.next.i!==O.i&&_(F,F.next,D,O))return!0;F=F.next}while(F!==D);return!1}function L(D,O){return m(D.prev,D,D.next)<0?m(D,O,D.next)>=0&&m(D,D.prev,O)>=0:m(D,O,D.prev)<0||m(D,D.next,O)<0}function S(D,O){var F=D,Y=!1,X=(D.x+O.x)/2,q=(D.y+O.y)/2;do F.y>q!=F.next.y>q&&F.next.y!==F.y&&X<(F.next.x-F.x)*(q-F.y)/(F.next.y-F.y)+F.x&&(Y=!Y),F=F.next;while(F!==D);return Y}function k(D,O){var F=new I(D.i,D.x,D.y),Y=new I(O.i,O.x,O.y),X=D.next,q=O.prev;return D.next=O,O.prev=D,F.next=X,X.prev=F,Y.next=F,F.prev=Y,q.next=Y,Y.prev=q,Y}function P(D,O,F,Y){var X=new I(D,O,F);return Y?(X.next=Y.next,X.prev=Y,Y.next.prev=X,Y.next=X):(X.prev=X,X.next=X),X}function z(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function I(D,O,F){this.i=D,this.x=O,this.y=F,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}d.deviation=function(D,O,F,Y){var X=O&&O.length,q=X?O[0]*F:D.length,$=Math.abs(R(D,0,q,F));if(X)for(var V=0,K=O.length;V<K;V++){var se=O[V]*F,ue=V<K-1?O[V+1]*F:D.length;$-=Math.abs(R(D,se,ue,F))}var oe=0;for(V=0;V<Y.length;V+=3){var U=Y[V]*F,G=Y[V+1]*F,re=Y[V+2]*F;oe+=Math.abs((D[U]-D[re])*(D[G+1]-D[U+1])-(D[U]-D[G])*(D[re+1]-D[U+1]))}return $===0&&oe===0?0:Math.abs((oe-$)/$)};function R(D,O,F,Y){for(var X=0,q=O,$=F-Y;q<F;q+=Y)X+=(D[$]-D[q])*(D[q+1]+D[$+1]),$=q;return X}d.flatten=function(D){for(var O=D[0][0].length,F={vertices:[],holes:[],dimensions:O},Y=0,X=0;X<D.length;X++){for(var q=0;q<D[X].length;q++)for(var $=0;$<O;$++)F.vertices.push(D[X][q][$]);X>0&&(Y+=D[X-1].length,F.holes.push(Y))}return F}},{}],130:[function(t,B,H){var d=t("strongly-connected-components");B.exports=function(b,w){var e=[],o=[],a=[],n={},r=[],u;function s(M){a[M]=!1,n.hasOwnProperty(M)&&Object.keys(n[M]).forEach(function(_){delete n[M][_],a[_]&&s(_)})}function i(M){var _=!1;o.push(M),a[M]=!0;var T,x;for(T=0;T<r[M].length;T++)x=r[M][T],x===u?(f(u,o),_=!0):a[x]||(_=i(x));if(_)s(M);else for(T=0;T<r[M].length;T++){x=r[M][T];var c=n[x];c||(c={},n[x]=c),c[x]=!0}return o.pop(),_}function f(M,_){var T=[].concat(_).concat(M);w?w(i):e.push(T)}function h(M){for(var _=0;_<b.length;_++)_<M&&(b[_]=[]),b[_]=b[_].filter(function(T){return T>=M})}function p(M){h(M);for(var _=b,T=d(_),x=T.components.filter(function(I){return I.length>1}),c=1/0,L,S=0;S<x.length;S++)for(var k=0;k<x[S].length;k++)x[S][k]<c&&(c=x[S][k],L=S);var P=x[L];if(!P)return!1;var z=b.map(function(I,R){return P.indexOf(R)===-1?[]:I.filter(function(D){return P.indexOf(D)!==-1})});return{leastVertex:c,adjList:z}}u=0;for(var v=b.length;u<v;){var y=p(u);if(u=y.leastVertex,r=y.adjList,r){for(var g=0;g<r.length;g++)for(var A=0;A<r[g].length;A++){var m=r[g][A];a[+m]=!1,n[m]={}}i(u),u=u+1}else u=v}if(!w)return e}},{"strongly-connected-components":306}],131:[function(t,B,H){var d=t("../../object/valid-value");B.exports=function(){return d(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,B,H){B.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,B,H){B.exports=function(){var d=Array.from,l,b;return typeof d!="function"?!1:(l=["raz","dwa"],b=d(l),Boolean(b&&b!==l&&b[1]==="dwa"))}},{}],134:[function(t,B,H){var d=t("es6-symbol").iterator,l=t("../../function/is-arguments"),b=t("../../function/is-function"),w=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),o=t("../../object/valid-value"),a=t("../../object/is-value"),n=t("../../string/is-string"),r=Array.isArray,u=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;B.exports=function(f){var h=arguments[1],p=arguments[2],v,y,g,A,m,M,_,T,x,c;if(f=Object(o(f)),a(h)&&e(h),!this||this===Array||!b(this)){if(!h){if(l(f))return m=f.length,m!==1?Array.apply(null,f):(A=new Array(1),A[0]=f[0],A);if(r(f)){for(A=new Array(m=f.length),y=0;y<m;++y)A[y]=f[y];return A}}A=[]}else v=this;if(!r(f)){if((x=f[d])!==void 0){for(_=e(x).call(f),v&&(A=new v),T=_.next(),y=0;!T.done;)c=h?u.call(h,p,T.value,y):T.value,v?(s.value=c,i(A,y,s)):A[y]=c,T=_.next(),++y;m=y}else if(n(f)){for(m=f.length,v&&(A=new v),y=0,g=0;y<m;++y)c=f[y],y+1<m&&(M=c.charCodeAt(0),M>=55296&&M<=56319&&(c+=f[++y])),c=h?u.call(h,p,c,g):c,v?(s.value=c,i(A,g,s)):A[g]=c,++g;m=g}}if(m===void 0)for(m=w(f.length),v&&(A=new v(m)),y=0;y<m;++y)c=h?u.call(h,p,f[y],y):f[y],v?(s.value=c,i(A,y,s)):A[y]=c;return v&&(s.value=null,A.length=m),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,B,H){var d=Object.prototype.toString,l=d.call(function(){return arguments}());B.exports=function(b){return d.call(b)===l}},{}],136:[function(t,B,H){var d=Object.prototype.toString,l=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);B.exports=function(b){return typeof b=="function"&&l(d.call(b))}},{}],137:[function(t,B,H){B.exports=function(){}},{}],138:[function(t,B,H){B.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,B,H){B.exports=function(){var d=Math.sign;return typeof d!="function"?!1:d(10)===1&&d(-20)===-1}},{}],140:[function(t,B,H){B.exports=function(d){return d=Number(d),isNaN(d)||d===0?d:d>0?1:-1}},{}],141:[function(t,B,H){var d=t("../math/sign"),l=Math.abs,b=Math.floor;B.exports=function(w){return isNaN(w)?0:(w=Number(w),w===0||!isFinite(w)?w:d(w)*b(l(w)))}},{"../math/sign":138}],142:[function(t,B,H){var d=t("./to-integer"),l=Math.max;B.exports=function(b){return l(0,d(b))}},{"./to-integer":141}],143:[function(t,B,H){var d=t("./valid-callable"),l=t("./valid-value"),b=Function.prototype.bind,w=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;B.exports=function(a,n){return function(r,u){var s,i=arguments[2],f=arguments[3];return r=Object(l(r)),d(u),s=e(r),f&&s.sort(typeof f=="function"?b.call(f,r):void 0),typeof a!="function"&&(a=s[a]),w.call(a,s,function(h,p){return o.call(r,h)?w.call(u,i,r[h],h,r,p):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,B,H){B.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,B,H){B.exports=function(){var d=Object.assign,l;return typeof d!="function"?!1:(l={foo:"raz"},d(l,{bar:"dwa"},{trzy:"trzy"}),l.foo+l.bar+l.trzy==="razdwatrzy")}},{}],146:[function(t,B,H){var d=t("../keys"),l=t("../valid-value"),b=Math.max;B.exports=function(w,e){var o,a,n=b(arguments.length,2),r;for(w=Object(l(w)),r=function(u){try{w[u]=e[u]}catch(s){o||(o=s)}},a=1;a<n;++a)e=arguments[a],d(e).forEach(r);if(o!==void 0)throw o;return w}},{"../keys":152,"../valid-value":162}],147:[function(t,B,H){var d=t("../array/from"),l=t("./assign"),b=t("./valid-value");B.exports=function(w){var e=Object(b(w)),o=arguments[1],a=Object(arguments[2]);if(e!==w&&!o)return e;var n={};return o?d(o,function(r){(a.ensure||r in w)&&(n[r]=w[r])}):l(n,w),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,B,H){var d=Object.create,l;t("./set-prototype-of/is-implemented")()||(l=t("./set-prototype-of/shim")),B.exports=function(){var b,w,e;return!l||l.level!==1?d:(b={},w={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){if(o==="__proto__"){w[o]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}w[o]=e}),Object.defineProperties(b,w),Object.defineProperty(l,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:b}),function(o,a){return d(o===null?b:o,a)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,B,H){B.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,B,H){var d=t("./is-value"),l={function:!0,object:!0};B.exports=function(b){return d(b)&&l[typeof b]||!1}},{"./is-value":151}],151:[function(t,B,H){var d=t("../function/noop")();B.exports=function(l){return l!==d&&l!==null}},{"../function/noop":137}],152:[function(t,B,H){B.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,B,H){B.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,B,H){var d=t("../is-value"),l=Object.keys;B.exports=function(b){return l(d(b)?Object(b):b)}},{"../is-value":151}],155:[function(t,B,H){var d=t("./valid-callable"),l=t("./for-each"),b=Function.prototype.call;B.exports=function(w,e){var o={},a=arguments[2];return d(e),l(w,function(n,r,u,s){o[r]=b.call(e,a,n,r,u,s)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(t,B,H){var d=t("./is-value"),l=Array.prototype.forEach,b=Object.create,w=function(e,o){var a;for(a in e)o[a]=e[a]};B.exports=function(e){var o=b(null);return l.call(arguments,function(a){!d(a)||w(Object(a),o)}),o}},{"./is-value":151}],157:[function(t,B,H){B.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,B,H){var d=Object.create,l=Object.getPrototypeOf,b={};B.exports=function(){var w=Object.setPrototypeOf,e=arguments[0]||d;return typeof w!="function"?!1:l(w(e(null),b))===b}},{}],159:[function(t,B,H){var d=t("../is-object"),l=t("../valid-value"),b=Object.prototype.isPrototypeOf,w=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},o;o=function(a,n){if(l(a),n===null||d(n))return a;throw new TypeError("Prototype must be null or an object")},B.exports=function(a){var n,r;return a?(a.level===2?a.set?(r=a.set,n=function(u,s){return r.call(o(u,s),s),u}):n=function(u,s){return o(u,s).__proto__=s,u}:n=function u(s,i){var f;return o(s,i),f=b.call(u.nullPolyfill,s),f&&delete u.nullPolyfill.__proto__,i===null&&(i=u.nullPolyfill),s.__proto__=i,f&&w(u.nullPolyfill,"__proto__",e),s},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),n={},r,u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(u){try{r=u.set,r.call(a,n)}catch{}if(Object.getPrototypeOf(a)===n)return{set:r,level:2}}return a.__proto__=n,Object.getPrototypeOf(a)===n?{level:2}:(a={},a.__proto__=n,Object.getPrototypeOf(a)===n?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,B,H){B.exports=function(d){if(typeof d!="function")throw new TypeError(d+" is not a function");return d}},{}],161:[function(t,B,H){var d=t("./is-object");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not an Object");return l}},{"./is-object":150}],162:[function(t,B,H){var d=t("./is-value");B.exports=function(l){if(!d(l))throw new TypeError("Cannot use null or undefined");return l}},{"./is-value":151}],163:[function(t,B,H){B.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,B,H){var d="razdwatrzy";B.exports=function(){return typeof d.contains!="function"?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],165:[function(t,B,H){var d=String.prototype.indexOf;B.exports=function(l){return d.call(this,l,arguments[1])>-1}},{}],166:[function(t,B,H){var d=Object.prototype.toString,l=d.call("");B.exports=function(b){return typeof b=="string"||b&&typeof b=="object"&&(b instanceof String||d.call(b)===l)||!1}},{}],167:[function(t,B,H){var d=Object.create(null),l=Math.random;B.exports=function(){var b;do b=l().toString(36).slice(2);while(d[b]);return b}},{}],168:[function(t,B,H){var d=t("es5-ext/object/set-prototype-of"),l=t("es5-ext/string/#/contains"),b=t("d"),w=t("es6-symbol"),e=t("./"),o=Object.defineProperty,a;a=B.exports=function(n,r){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");e.call(this,n),r?l.call(r,"key+value")?r="key+value":l.call(r,"key")?r="key":r="value":r="value",o(this,"__kind__",b("",r))},d&&d(a,e),delete a.prototype.constructor,a.prototype=Object.create(e.prototype,{_resolve:b(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),o(a.prototype,w.toStringTag,b("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/object/valid-callable"),b=t("es5-ext/string/is-string"),w=t("./get"),e=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;B.exports=function(n,r){var u,s=arguments[2],i,f,h,p,v,y,g;if(e(n)||d(n)?u="array":b(n)?u="string":n=w(n),l(r),f=function(){h=!0},u==="array"){a.call(n,function(A){return o.call(r,s,A,f),h});return}if(u==="string"){for(v=n.length,p=0;p<v&&(y=n[p],p+1<v&&(g=y.charCodeAt(0),g>=55296&&g<=56319&&(y+=n[++p])),o.call(r,s,y,f),!h);++p);return}for(i=n.next();!i.done;){if(o.call(r,s,i.value,f),h)return;i=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/string/is-string"),b=t("./array"),w=t("./string"),e=t("./valid-iterable"),o=t("es6-symbol").iterator;B.exports=function(a){return typeof e(a)[o]=="function"?a[o]():d(a)?new b(a):l(a)?new w(a):new b(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,B,H){var d=t("es5-ext/array/#/clear"),l=t("es5-ext/object/assign"),b=t("es5-ext/object/valid-callable"),w=t("es5-ext/object/valid-value"),e=t("d"),o=t("d/auto-bind"),a=t("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,u;B.exports=u=function(s,i){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",w(s)),__context__:e("w",i),__nextIndex__:e("w",0)}),!!i&&(b(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete u.prototype.constructor,r(u.prototype,l({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},o({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(i,f){i>=s&&(this.__redo__[f]=++i)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(i=this.__redo__.indexOf(s),i!==-1&&this.__redo__.splice(i,1),this.__redo__.forEach(function(f,h){f>s&&(this.__redo__[h]=--f)},this)))}),_onClear:e(function(){this.__redo__&&d.call(this.__redo__),this.__nextIndex__=0})}))),n(u.prototype,a.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/object/is-value"),b=t("es5-ext/string/is-string"),w=t("es6-symbol").iterator,e=Array.isArray;B.exports=function(o){return l(o)?e(o)||b(o)||d(o)?!0:typeof o[w]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,B,H){var d=t("es5-ext/object/set-prototype-of"),l=t("d"),b=t("es6-symbol"),w=t("./"),e=Object.defineProperty,o;o=B.exports=function(a){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");a=String(a),w.call(this,a),e(this,"__length__",l("",a.length))},d&&d(o,w),delete o.prototype.constructor,o.prototype=Object.create(w.prototype,{_next:l(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:l(function(a){var n=this.__list__[a],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),e(o.prototype,b.toStringTag,l("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,B,H){var d=t("./is-iterable");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not iterable");return l}},{"./is-iterable":172}],175:[function(t,B,H){B.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,B,H){var d=t("ext/global-this"),l={object:!0,symbol:!0};B.exports=function(){var b=d.Symbol,w;if(typeof b!="function")return!1;w=b("test symbol");try{String(w)}catch{return!1}return!(!l[typeof b.iterator]||!l[typeof b.toPrimitive]||!l[typeof b.toStringTag])}},{"ext/global-this":188}],177:[function(t,B,H){B.exports=function(d){return d?typeof d=="symbol"?!0:!d.constructor||d.constructor.name!=="Symbol"?!1:d[d.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,B,H){var d=t("d"),l=Object.create,b=Object.defineProperty,w=Object.prototype,e=l(null);B.exports=function(o){for(var a=0,n,r;e[o+(a||"")];)++a;return o+=a||"",e[o]=!0,n="@@"+o,b(w,n,d.gs(null,function(u){r||(r=!0,b(this,n,d(u)),r=!1)})),n}},{d:106}],179:[function(t,B,H){var d=t("d"),l=t("ext/global-this").Symbol;B.exports=function(b){return Object.defineProperties(b,{hasInstance:d("",l&&l.hasInstance||b("hasInstance")),isConcatSpreadable:d("",l&&l.isConcatSpreadable||b("isConcatSpreadable")),iterator:d("",l&&l.iterator||b("iterator")),match:d("",l&&l.match||b("match")),replace:d("",l&&l.replace||b("replace")),search:d("",l&&l.search||b("search")),species:d("",l&&l.species||b("species")),split:d("",l&&l.split||b("split")),toPrimitive:d("",l&&l.toPrimitive||b("toPrimitive")),toStringTag:d("",l&&l.toStringTag||b("toStringTag")),unscopables:d("",l&&l.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,B,H){var d=t("d"),l=t("../../../validate-symbol"),b=Object.create(null);B.exports=function(w){return Object.defineProperties(w,{for:d(function(e){return b[e]?b[e]:b[e]=w(String(e))}),keyFor:d(function(e){var o;l(e);for(o in b)if(b[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,B,H){var d=t("d"),l=t("./validate-symbol"),b=t("ext/global-this").Symbol,w=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),o=t("./lib/private/setup/symbol-registry"),a=Object.create,n=Object.defineProperties,r=Object.defineProperty,u,s,i;if(typeof b=="function")try{String(b()),i=!0}catch{}else b=null;s=function(h){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return u(h)},B.exports=u=function f(h){var p;if(this instanceof f)throw new TypeError("Symbol is not a constructor");return i?b(h):(p=a(s.prototype),h=h===void 0?"":String(h),n(p,{__description__:d("",h),__name__:d("",w(h))}))},e(u),o(u),n(s.prototype,{constructor:d(u),toString:d("",function(){return this.__name__})}),n(u.prototype,{toString:d(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:d(function(){return l(this)})}),r(u.prototype,u.toPrimitive,d("",function(){var f=l(this);return typeof f=="symbol"?f:f.toString()})),r(u.prototype,u.toStringTag,d("c","Symbol")),r(s.prototype,u.toStringTag,d("c",u.prototype[u.toStringTag])),r(s.prototype,u.toPrimitive,d("c",u.prototype[u.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,B,H){var d=t("./is-symbol");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not a symbol");return l}},{"./is-symbol":177}],183:[function(t,B,H){B.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,B,H){B.exports=function(){var d,l;if(typeof WeakMap!="function")return!1;try{d=new WeakMap([[l={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(d)!=="[object WeakMap]"||typeof d.set!="function"||d.set({},1)!==d||typeof d.delete!="function"||typeof d.has!="function"||d.get(l)!=="one")}},{}],185:[function(t,B,H){B.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,B,H){var d=t("es5-ext/object/is-value"),l=t("es5-ext/object/set-prototype-of"),b=t("es5-ext/object/valid-object"),w=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),o=t("d"),a=t("es6-iterator/get"),n=t("es6-iterator/for-of"),r=t("es6-symbol").toStringTag,u=t("./is-native-implemented"),s=Array.isArray,i=Object.defineProperty,f=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf,p;B.exports=p=function(){var v=arguments[0],y;if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return y=u&&l&&WeakMap!==p?l(new WeakMap,h(this)):this,d(v)&&(s(v)||(v=a(v))),i(y,"__weakMapData__",o("c","$weakMap$"+e())),v&&n(v,function(g){w(g),y.set(g[0],g[1])}),y},u&&(l&&l(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:o(p)})),Object.defineProperties(p.prototype,{delete:o(function(v){return f.call(b(v),this.__weakMapData__)?(delete v[this.__weakMapData__],!0):!1}),get:o(function(v){if(!!f.call(b(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:o(function(v){return f.call(b(v),this.__weakMapData__)}),set:o(function(v,y){return i(b(v),this.__weakMapData__,o("c",y)),this}),toString:o(function(){return"[object WeakMap]"})}),i(p.prototype,r,o("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,B,H){var d=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};B.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return d()}try{return __global__||d()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,B,H){B.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,B,H){B.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,B,H){var d=t("is-string-blank");B.exports=function(l){var b=typeof l;if(b==="string"){var w=l;if(l=+l,l===0&&d(w))return!1}else if(b!=="number")return!1;return l-l<1}},{"is-string-blank":237}],191:[function(t,B,H){var d=t("dtype");B.exports=l;function l(b,w,e){if(!b)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(b)&&b[0]&&typeof b[0][0]=="number"){var o=b[0].length,a=b.length*o,n,r,u,s;(!w||typeof w=="string")&&(w=new(d(w||"float32"))(a+e));var i=w.length-e;if(a!==i)throw new Error("source length "+a+" ("+o+"x"+b.length+") does not match destination length "+i);for(n=0,u=e;n<b.length;n++)for(r=0;r<o;r++)w[u++]=b[n][r]===null?NaN:b[n][r]}else if(!w||typeof w=="string"){var f=d(w||"float32");if(Array.isArray(b)||w==="array")for(w=new f(b.length+e),n=0,u=e,s=w.length;u<s;u++,n++)w[u]=b[n]===null?NaN:b[n];else e===0?w=new f(b):(w=new f(b.length+e),w.set(b,e))}else w.set(b,e);return w}},{dtype:127}],192:[function(t,B,H){var d=t("css-font/stringify"),l=[32,126];B.exports=b;function b(w){w=w||{};var e=w.shape?w.shape:w.canvas?[w.canvas.width,w.canvas.height]:[512,512],o=w.canvas||document.createElement("canvas"),a=w.font,n=typeof w.step=="number"?[w.step,w.step]:w.step||[32,32],r=w.chars||l;if(a&&typeof a!="string"&&(a=d(a)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var u=[],s=r[0],i=0;s<=r[1];s++)u[i++]=String.fromCharCode(s);r=u}e=e.slice(),o.width=e[0],o.height=e[1];var f=o.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,o.width,o.height),f.font=a,f.textAlign="center",f.textBaseline="middle",f.fillStyle="#fff";for(var h=n[0]/2,p=n[1]/2,s=0;s<r.length;s++)f.fillText(r[s],h,p),(h+=n[0])>e[0]-n[0]/2&&(h=n[0]/2,p+=n[1]);return o}},{"css-font/stringify":102}],193:[function(t,B,H){B.exports=d,d.canvas=document.createElement("canvas"),d.cache={};function d(e,o){o||(o={}),(typeof e=="string"||Array.isArray(e))&&(o.family=e);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var n=o.size||o.fontSize||o.em||48,r=o.weight||o.fontWeight||"",u=o.style||o.fontStyle||"",e=[u,r,n].join(" ")+"px "+a,s=o.origin||"top";if(d.cache[a]&&n<=d.cache[a].em)return l(d.cache[a],s);var i=o.canvas||d.canvas,f=i.getContext("2d"),h={upper:o.upper!==void 0?o.upper:"H",lower:o.lower!==void 0?o.lower:"x",descent:o.descent!==void 0?o.descent:"p",ascent:o.ascent!==void 0?o.ascent:"h",tittle:o.tittle!==void 0?o.tittle:"i",overshoot:o.overshoot!==void 0?o.overshoot:"O"},p=Math.ceil(n*1.5);i.height=p,i.width=p*.5,f.font=e;var v="H",y={top:0};f.clearRect(0,0,p,p),f.textBaseline="top",f.fillStyle="black",f.fillText(v,0,0);var g=b(f.getImageData(0,0,p,p));f.clearRect(0,0,p,p),f.textBaseline="bottom",f.fillText(v,0,p);var A=b(f.getImageData(0,0,p,p));y.lineHeight=y.bottom=p-A+g,f.clearRect(0,0,p,p),f.textBaseline="alphabetic",f.fillText(v,0,p);var m=b(f.getImageData(0,0,p,p)),M=p-m-1+g;y.baseline=y.alphabetic=M,f.clearRect(0,0,p,p),f.textBaseline="middle",f.fillText(v,0,p*.5);var _=b(f.getImageData(0,0,p,p));y.median=y.middle=p-_-1+g-p*.5,f.clearRect(0,0,p,p),f.textBaseline="hanging",f.fillText(v,0,p*.5);var T=b(f.getImageData(0,0,p,p));y.hanging=p-T-1+g-p*.5,f.clearRect(0,0,p,p),f.textBaseline="ideographic",f.fillText(v,0,p);var x=b(f.getImageData(0,0,p,p));if(y.ideographic=p-x-1+g,h.upper&&(f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.upper,0,0),y.upper=b(f.getImageData(0,0,p,p)),y.capHeight=y.baseline-y.upper),h.lower&&(f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.lower,0,0),y.lower=b(f.getImageData(0,0,p,p)),y.xHeight=y.baseline-y.lower),h.tittle&&(f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.tittle,0,0),y.tittle=b(f.getImageData(0,0,p,p))),h.ascent&&(f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.ascent,0,0),y.ascent=b(f.getImageData(0,0,p,p))),h.descent&&(f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.descent,0,0),y.descent=w(f.getImageData(0,0,p,p))),h.overshoot){f.clearRect(0,0,p,p),f.textBaseline="top",f.fillText(h.overshoot,0,0);var c=w(f.getImageData(0,0,p,p));y.overshoot=c-M}for(var L in y)y[L]/=n;return y.em=n,d.cache[a]=y,l(y,s)}function l(e,o){var a={};typeof o=="string"&&(o=e[o]);for(var n in e)n!=="em"&&(a[n]=e[n]-o);return a}function b(e){for(var o=e.height,a=e.data,n=3;n<a.length;n+=4)if(a[n]!==0)return Math.floor((n-3)*.25/o)}function w(e){for(var o=e.height,a=e.data,n=a.length-1;n>0;n-=4)if(a[n]!==0)return Math.floor((n-3)*.25/o)}},{}],194:[function(t,B,H){B.exports=d;function d(l,b){if(typeof l!="string")throw new TypeError("must specify type string");if(b=b||{},typeof document=="undefined"&&!b.canvas)return null;var w=b.canvas||document.createElement("canvas");typeof b.width=="number"&&(w.width=b.width),typeof b.height=="number"&&(w.height=b.height);var e=b,o;try{var a=[l];l.indexOf("webgl")===0&&a.push("experimental-"+l);for(var n=0;n<a.length;n++)if(o=w.getContext(a[n],e),o)return o}catch{o=null}return o||null}},{}],195:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],n=b[4],r=b[5],u=b[6],s=b[7],i=b[8],f=b[9],h=b[10],p=b[11],v=b[12],y=b[13],g=b[14],A=b[15];return l[0]=r*(h*A-p*g)-f*(u*A-s*g)+y*(u*p-s*h),l[1]=-(e*(h*A-p*g)-f*(o*A-a*g)+y*(o*p-a*h)),l[2]=e*(u*A-s*g)-r*(o*A-a*g)+y*(o*s-a*u),l[3]=-(e*(u*p-s*h)-r*(o*p-a*h)+f*(o*s-a*u)),l[4]=-(n*(h*A-p*g)-i*(u*A-s*g)+v*(u*p-s*h)),l[5]=w*(h*A-p*g)-i*(o*A-a*g)+v*(o*p-a*h),l[6]=-(w*(u*A-s*g)-n*(o*A-a*g)+v*(o*s-a*u)),l[7]=w*(u*p-s*h)-n*(o*p-a*h)+i*(o*s-a*u),l[8]=n*(f*A-p*y)-i*(r*A-s*y)+v*(r*p-s*f),l[9]=-(w*(f*A-p*y)-i*(e*A-a*y)+v*(e*p-a*f)),l[10]=w*(r*A-s*y)-n*(e*A-a*y)+v*(e*s-a*r),l[11]=-(w*(r*p-s*f)-n*(e*p-a*f)+i*(e*s-a*r)),l[12]=-(n*(f*g-h*y)-i*(r*g-u*y)+v*(r*h-u*f)),l[13]=w*(f*g-h*y)-i*(e*g-o*y)+v*(e*h-o*f),l[14]=-(w*(r*g-u*y)-n*(e*g-o*y)+v*(e*u-o*r)),l[15]=w*(r*h-u*f)-n*(e*h-o*f)+i*(e*u-o*r),l}},{}],196:[function(t,B,H){B.exports=d;function d(l){var b=new Float32Array(16);return b[0]=l[0],b[1]=l[1],b[2]=l[2],b[3]=l[3],b[4]=l[4],b[5]=l[5],b[6]=l[6],b[7]=l[7],b[8]=l[8],b[9]=l[9],b[10]=l[10],b[11]=l[11],b[12]=l[12],b[13]=l[13],b[14]=l[14],b[15]=l[15],b}},{}],197:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3],l[4]=b[4],l[5]=b[5],l[6]=b[6],l[7]=b[7],l[8]=b[8],l[9]=b[9],l[10]=b[10],l[11]=b[11],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15],l}},{}],198:[function(t,B,H){B.exports=d;function d(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],199:[function(t,B,H){B.exports=d;function d(l){var b=l[0],w=l[1],e=l[2],o=l[3],a=l[4],n=l[5],r=l[6],u=l[7],s=l[8],i=l[9],f=l[10],h=l[11],p=l[12],v=l[13],y=l[14],g=l[15],A=b*n-w*a,m=b*r-e*a,M=b*u-o*a,_=w*r-e*n,T=w*u-o*n,x=e*u-o*r,c=s*v-i*p,L=s*y-f*p,S=s*g-h*p,k=i*y-f*v,P=i*g-h*v,z=f*g-h*y;return A*z-m*P+M*k+_*S-T*L+x*c}},{}],200:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],n=w+w,r=e+e,u=o+o,s=w*n,i=e*n,f=e*r,h=o*n,p=o*r,v=o*u,y=a*n,g=a*r,A=a*u;return l[0]=1-f-v,l[1]=i+A,l[2]=h-g,l[3]=0,l[4]=i-A,l[5]=1-s-v,l[6]=p+y,l[7]=0,l[8]=h+g,l[9]=p-y,l[10]=1-s-f,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],201:[function(t,B,H){B.exports=d;function d(l,b,w){var e,o,a,n=w[0],r=w[1],u=w[2],s=Math.sqrt(n*n+r*r+u*u);return Math.abs(s)<1e-6?null:(s=1/s,n*=s,r*=s,u*=s,e=Math.sin(b),o=Math.cos(b),a=1-o,l[0]=n*n*a+o,l[1]=r*n*a+u*e,l[2]=u*n*a-r*e,l[3]=0,l[4]=n*r*a-u*e,l[5]=r*r*a+o,l[6]=u*r*a+n*e,l[7]=0,l[8]=n*u*a+r*e,l[9]=r*u*a-n*e,l[10]=u*u*a+o,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}},{}],202:[function(t,B,H){B.exports=d;function d(l,b,w){var e=b[0],o=b[1],a=b[2],n=b[3],r=e+e,u=o+o,s=a+a,i=e*r,f=e*u,h=e*s,p=o*u,v=o*s,y=a*s,g=n*r,A=n*u,m=n*s;return l[0]=1-(p+y),l[1]=f+m,l[2]=h-A,l[3]=0,l[4]=f-m,l[5]=1-(i+y),l[6]=v+g,l[7]=0,l[8]=h+A,l[9]=v-g,l[10]=1-(i+p),l[11]=0,l[12]=w[0],l[13]=w[1],l[14]=w[2],l[15]=1,l}},{}],203:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=b[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=b[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],204:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=b[0],l[13]=b[1],l[14]=b[2],l[15]=1,l}},{}],205:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=e,l[6]=w,l[7]=0,l[8]=0,l[9]=-w,l[10]=e,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],206:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=e,l[1]=0,l[2]=-w,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=w,l[9]=0,l[10]=e,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],207:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=e,l[1]=w,l[2]=0,l[3]=0,l[4]=-w,l[5]=e,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],208:[function(t,B,H){B.exports=d;function d(l,b,w,e,o,a,n){var r=1/(w-b),u=1/(o-e),s=1/(a-n);return l[0]=a*2*r,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a*2*u,l[6]=0,l[7]=0,l[8]=(w+b)*r,l[9]=(o+e)*u,l[10]=(n+a)*s,l[11]=-1,l[12]=0,l[13]=0,l[14]=n*a*2*s,l[15]=0,l}},{}],209:[function(t,B,H){B.exports=d;function d(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],210:[function(t,B,H){B.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],n=b[4],r=b[5],u=b[6],s=b[7],i=b[8],f=b[9],h=b[10],p=b[11],v=b[12],y=b[13],g=b[14],A=b[15],m=w*r-e*n,M=w*u-o*n,_=w*s-a*n,T=e*u-o*r,x=e*s-a*r,c=o*s-a*u,L=i*y-f*v,S=i*g-h*v,k=i*A-p*v,P=f*g-h*y,z=f*A-p*y,I=h*A-p*g,R=m*I-M*z+_*P+T*k-x*S+c*L;return R?(R=1/R,l[0]=(r*I-u*z+s*P)*R,l[1]=(o*z-e*I-a*P)*R,l[2]=(y*c-g*x+A*T)*R,l[3]=(h*x-f*c-p*T)*R,l[4]=(u*k-n*I-s*S)*R,l[5]=(w*I-o*k+a*S)*R,l[6]=(g*_-v*c-A*M)*R,l[7]=(i*c-h*_+p*M)*R,l[8]=(n*z-r*k+s*L)*R,l[9]=(e*k-w*z-a*L)*R,l[10]=(v*x-y*_+A*m)*R,l[11]=(f*_-i*x-p*m)*R,l[12]=(r*S-n*P-u*L)*R,l[13]=(w*P-e*S+o*L)*R,l[14]=(y*M-v*T-g*m)*R,l[15]=(i*T-f*M+h*m)*R,l):null}},{}],212:[function(t,B,H){var d=t("./identity");B.exports=l;function l(b,w,e,o){var a,n,r,u,s,i,f,h,p,v,y=w[0],g=w[1],A=w[2],m=o[0],M=o[1],_=o[2],T=e[0],x=e[1],c=e[2];return Math.abs(y-T)<1e-6&&Math.abs(g-x)<1e-6&&Math.abs(A-c)<1e-6?d(b):(f=y-T,h=g-x,p=A-c,v=1/Math.sqrt(f*f+h*h+p*p),f*=v,h*=v,p*=v,a=M*p-_*h,n=_*f-m*p,r=m*h-M*f,v=Math.sqrt(a*a+n*n+r*r),v?(v=1/v,a*=v,n*=v,r*=v):(a=0,n=0,r=0),u=h*r-p*n,s=p*a-f*r,i=f*n-h*a,v=Math.sqrt(u*u+s*s+i*i),v?(v=1/v,u*=v,s*=v,i*=v):(u=0,s=0,i=0),b[0]=a,b[1]=u,b[2]=f,b[3]=0,b[4]=n,b[5]=s,b[6]=h,b[7]=0,b[8]=r,b[9]=i,b[10]=p,b[11]=0,b[12]=-(a*y+n*g+r*A),b[13]=-(u*y+s*g+i*A),b[14]=-(f*y+h*g+p*A),b[15]=1,b)}},{"./identity":209}],213:[function(t,B,H){B.exports=d;function d(l,b,w){var e=b[0],o=b[1],a=b[2],n=b[3],r=b[4],u=b[5],s=b[6],i=b[7],f=b[8],h=b[9],p=b[10],v=b[11],y=b[12],g=b[13],A=b[14],m=b[15],M=w[0],_=w[1],T=w[2],x=w[3];return l[0]=M*e+_*r+T*f+x*y,l[1]=M*o+_*u+T*h+x*g,l[2]=M*a+_*s+T*p+x*A,l[3]=M*n+_*i+T*v+x*m,M=w[4],_=w[5],T=w[6],x=w[7],l[4]=M*e+_*r+T*f+x*y,l[5]=M*o+_*u+T*h+x*g,l[6]=M*a+_*s+T*p+x*A,l[7]=M*n+_*i+T*v+x*m,M=w[8],_=w[9],T=w[10],x=w[11],l[8]=M*e+_*r+T*f+x*y,l[9]=M*o+_*u+T*h+x*g,l[10]=M*a+_*s+T*p+x*A,l[11]=M*n+_*i+T*v+x*m,M=w[12],_=w[13],T=w[14],x=w[15],l[12]=M*e+_*r+T*f+x*y,l[13]=M*o+_*u+T*h+x*g,l[14]=M*a+_*s+T*p+x*A,l[15]=M*n+_*i+T*v+x*m,l}},{}],214:[function(t,B,H){B.exports=d;function d(l,b,w,e,o,a,n){var r=1/(b-w),u=1/(e-o),s=1/(a-n);return l[0]=-2*r,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*u,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*s,l[11]=0,l[12]=(b+w)*r,l[13]=(o+e)*u,l[14]=(n+a)*s,l[15]=1,l}},{}],215:[function(t,B,H){B.exports=d;function d(l,b,w,e,o){var a=1/Math.tan(b/2),n=1/(e-o);return l[0]=a/w,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(o+e)*n,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*o*e*n,l[15]=0,l}},{}],216:[function(t,B,H){B.exports=d;function d(l,b,w,e){var o=Math.tan(b.upDegrees*Math.PI/180),a=Math.tan(b.downDegrees*Math.PI/180),n=Math.tan(b.leftDegrees*Math.PI/180),r=Math.tan(b.rightDegrees*Math.PI/180),u=2/(n+r),s=2/(o+a);return l[0]=u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s,l[6]=0,l[7]=0,l[8]=-((n-r)*u*.5),l[9]=(o-a)*s*.5,l[10]=e/(w-e),l[11]=-1,l[12]=0,l[13]=0,l[14]=e*w/(w-e),l[15]=0,l}},{}],217:[function(t,B,H){B.exports=d;function d(l,b,w,e){var o=e[0],a=e[1],n=e[2],r=Math.sqrt(o*o+a*a+n*n),u,s,i,f,h,p,v,y,g,A,m,M,_,T,x,c,L,S,k,P,z,I,R,D;return Math.abs(r)<1e-6?null:(r=1/r,o*=r,a*=r,n*=r,u=Math.sin(w),s=Math.cos(w),i=1-s,f=b[0],h=b[1],p=b[2],v=b[3],y=b[4],g=b[5],A=b[6],m=b[7],M=b[8],_=b[9],T=b[10],x=b[11],c=o*o*i+s,L=a*o*i+n*u,S=n*o*i-a*u,k=o*a*i-n*u,P=a*a*i+s,z=n*a*i+o*u,I=o*n*i+a*u,R=a*n*i-o*u,D=n*n*i+s,l[0]=f*c+y*L+M*S,l[1]=h*c+g*L+_*S,l[2]=p*c+A*L+T*S,l[3]=v*c+m*L+x*S,l[4]=f*k+y*P+M*z,l[5]=h*k+g*P+_*z,l[6]=p*k+A*P+T*z,l[7]=v*k+m*P+x*z,l[8]=f*I+y*R+M*D,l[9]=h*I+g*R+_*D,l[10]=p*I+A*R+T*D,l[11]=v*I+m*R+x*D,b!==l&&(l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l)}},{}],218:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[4],n=b[5],r=b[6],u=b[7],s=b[8],i=b[9],f=b[10],h=b[11];return b!==l&&(l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[4]=a*o+s*e,l[5]=n*o+i*e,l[6]=r*o+f*e,l[7]=u*o+h*e,l[8]=s*o-a*e,l[9]=i*o-n*e,l[10]=f*o-r*e,l[11]=h*o-u*e,l}},{}],219:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[0],n=b[1],r=b[2],u=b[3],s=b[8],i=b[9],f=b[10],h=b[11];return b!==l&&(l[4]=b[4],l[5]=b[5],l[6]=b[6],l[7]=b[7],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[0]=a*o-s*e,l[1]=n*o-i*e,l[2]=r*o-f*e,l[3]=u*o-h*e,l[8]=a*e+s*o,l[9]=n*e+i*o,l[10]=r*e+f*o,l[11]=u*e+h*o,l}},{}],220:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[0],n=b[1],r=b[2],u=b[3],s=b[4],i=b[5],f=b[6],h=b[7];return b!==l&&(l[8]=b[8],l[9]=b[9],l[10]=b[10],l[11]=b[11],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[0]=a*o+s*e,l[1]=n*o+i*e,l[2]=r*o+f*e,l[3]=u*o+h*e,l[4]=s*o-a*e,l[5]=i*o-n*e,l[6]=f*o-r*e,l[7]=h*o-u*e,l}},{}],221:[function(t,B,H){B.exports=d;function d(l,b,w){var e=w[0],o=w[1],a=w[2];return l[0]=b[0]*e,l[1]=b[1]*e,l[2]=b[2]*e,l[3]=b[3]*e,l[4]=b[4]*o,l[5]=b[5]*o,l[6]=b[6]*o,l[7]=b[7]*o,l[8]=b[8]*a,l[9]=b[9]*a,l[10]=b[10]*a,l[11]=b[11]*a,l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15],l}},{}],222:[function(t,B,H){B.exports=d;function d(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}},{}],223:[function(t,B,H){B.exports=d;function d(l,b,w){var e=w[0],o=w[1],a=w[2],n,r,u,s,i,f,h,p,v,y,g,A;return b===l?(l[12]=b[0]*e+b[4]*o+b[8]*a+b[12],l[13]=b[1]*e+b[5]*o+b[9]*a+b[13],l[14]=b[2]*e+b[6]*o+b[10]*a+b[14],l[15]=b[3]*e+b[7]*o+b[11]*a+b[15]):(n=b[0],r=b[1],u=b[2],s=b[3],i=b[4],f=b[5],h=b[6],p=b[7],v=b[8],y=b[9],g=b[10],A=b[11],l[0]=n,l[1]=r,l[2]=u,l[3]=s,l[4]=i,l[5]=f,l[6]=h,l[7]=p,l[8]=v,l[9]=y,l[10]=g,l[11]=A,l[12]=n*e+i*o+v*a+b[12],l[13]=r*e+f*o+y*a+b[13],l[14]=u*e+h*o+g*a+b[14],l[15]=s*e+p*o+A*a+b[15]),l}},{}],224:[function(t,B,H){B.exports=d;function d(l,b){if(l===b){var w=b[1],e=b[2],o=b[3],a=b[6],n=b[7],r=b[11];l[1]=b[4],l[2]=b[8],l[3]=b[12],l[4]=w,l[6]=b[9],l[7]=b[13],l[8]=e,l[9]=a,l[11]=b[14],l[12]=o,l[13]=n,l[14]=r}else l[0]=b[0],l[1]=b[4],l[2]=b[8],l[3]=b[12],l[4]=b[1],l[5]=b[5],l[6]=b[9],l[7]=b[13],l[8]=b[2],l[9]=b[6],l[10]=b[10],l[11]=b[14],l[12]=b[3],l[13]=b[7],l[14]=b[11],l[15]=b[15];return l}},{}],225:[function(t,B,H){var d=t("css-font"),l=t("pick-by-alias"),b=t("regl"),w=t("gl-util/context"),e=t("es6-weak-map"),o=t("color-normalize"),a=t("font-atlas"),n=t("typedarray-pool"),r=t("parse-rect"),u=t("is-plain-obj"),s=t("parse-unit"),i=t("to-px"),f=t("detect-kerning"),h=t("object-assign"),p=t("font-measure"),v=t("flatten-vertex-data"),y=t("bit-twiddle"),g=y.nextPow2,A=new e,m=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(m=!0),document.body.removeChild(M)}var _=function(c){T(c)?(c={regl:c},this.gl=c.regl._gl):this.gl=w(c),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=c.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(u(c)?c:{})};_.prototype.createShader=function(){var c=this.regl,L=c({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:c.prop("count"),offset:c.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:c.this("sizeBuffer")},width:{offset:0,stride:8,buffer:c.this("sizeBuffer")},char:c.this("charBuffer"),position:c.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:c.prop("color"),opacity:c.prop("opacity"),viewport:c.this("viewportArray"),scale:c.this("scale"),align:c.prop("align"),baseline:c.prop("baseline"),translate:c.this("translate"),positionOffset:c.prop("positionOffset")},primitive:"points",viewport:c.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:c,draw:L,atlas:S}},_.prototype.update=function(c){var L=this;if(typeof c=="string")c={text:c};else if(!c)return;c=l(c,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),c.opacity!=null&&(Array.isArray(c.opacity)?this.opacity=c.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(c.opacity)),c.viewport!=null&&(this.viewport=r(c.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),c.kerning!=null&&(this.kerning=c.kerning),c.offset!=null&&(typeof c.offset=="number"&&(c.offset=[c.offset,0]),this.positionOffset=v(c.offset)),c.direction&&(this.direction=c.direction),c.range&&(this.range=c.range,this.scale=[1/(c.range[2]-c.range[0]),1/(c.range[3]-c.range[1])],this.translate=[-c.range[0],-c.range[1]]),c.scale&&(this.scale=c.scale),c.translate&&(this.translate=c.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!c.font&&(c.font=_.baseFontSize+"px sans-serif");var S=!1,k=!1;if(c.font&&(Array.isArray(c.font)?c.font:[c.font]).forEach(function(_e,Ie){if(typeof _e=="string")try{_e=d.parse(_e)}catch{_e=d.parse(_.baseFontSize+"px "+_e)}else _e=d.parse(d.stringify(_e));var Ye=d.stringify({size:_.baseFontSize,family:_e.family,stretch:m?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),qe=s(_e.size),Ue=Math.round(qe[0]*i(qe[1]));if(Ue!==L.fontSize[Ie]&&(k=!0,L.fontSize[Ie]=Ue),(!L.font[Ie]||Ye!=L.font[Ie].baseString)&&(S=!0,L.font[Ie]=_.fonts[Ye],!L.font[Ie])){var Re=_e.family.join(", "),Ve=[_e.style];_e.style!=_e.variant&&Ve.push(_e.variant),_e.variant!=_e.weight&&Ve.push(_e.weight),m&&_e.weight!=_e.stretch&&Ve.push(_e.stretch),L.font[Ie]={baseString:Ye,family:Re,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:p(Re,{origin:"top",fontSize:_.baseFontSize,fontStyle:Ve.join(" ")})},_.fonts[Ye]=L.font[Ie]}}),(S||k)&&this.font.forEach(function(_e,Ie){var Ye=d.stringify({size:L.fontSize[Ie],family:_e.family,stretch:m?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(L.fontAtlas[Ie]=L.shader.atlas[Ye],!L.fontAtlas[Ie]){var qe=_e.metrics;L.shader.atlas[Ye]=L.fontAtlas[Ie]={fontString:Ye,step:Math.ceil(L.fontSize[Ie]*qe.bottom*.5)*2,em:L.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}c.text==null&&(c.text=L.text)}),typeof c.text=="string"&&c.position&&c.position.length>2){for(var P=Array(c.position.length*.5),z=0;z<P.length;z++)P[z]=c.text;c.text=P}var I;if(c.text!=null||S){if(this.textOffsets=[0],Array.isArray(c.text)){this.count=c.text[0].length,this.counts=[this.count];for(var R=1;R<c.text.length;R++)this.textOffsets[R]=this.textOffsets[R-1]+c.text[R-1].length,this.count+=c.text[R].length,this.counts.push(c.text[R].length);this.text=c.text.join("")}else this.text=c.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(_e,Ie){_.atlasContext.font=_e.baseString;for(var Ye=L.fontAtlas[Ie],qe=0;qe<L.text.length;qe++){var Ue=L.text.charAt(qe);if(Ye.ids[Ue]==null&&(Ye.ids[Ue]=Ye.chars.length,Ye.chars.push(Ue),I.push(Ue)),_e.width[Ue]==null&&(_e.width[Ue]=_.atlasContext.measureText(Ue).width/_.baseFontSize,L.kerning)){var Re=[];for(var Ve in _e.width)Re.push(Ve+Ue,Ue+Ve);h(_e.kerning,f(_e.family,{pairs:Re}))}}})}if(c.position)if(c.position.length>2){for(var D=!c.position[0].length,O=n.mallocFloat(this.count*2),F=0,Y=0;F<this.counts.length;F++){var X=this.counts[F];if(D)for(var q=0;q<X;q++)O[Y++]=c.position[F*2],O[Y++]=c.position[F*2+1];else for(var $=0;$<X;$++)O[Y++]=c.position[F][0],O[Y++]=c.position[F][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),n.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:c.position};if(c.text||S){var V=n.mallocUint8(this.count),K=n.mallocFloat(this.count*2);this.textWidth=[];for(var se=0,ue=0;se<this.counts.length;se++){for(var oe=this.counts[se],U=this.font[se]||this.font[0],G=this.fontAtlas[se]||this.fontAtlas[0],re=0;re<oe;re++){var ee=this.text.charAt(ue),j=this.text.charAt(ue-1);if(V[ue]=G.ids[ee],K[ue*2]=U.width[ee],re){var Q=K[ue*2-2],ne=K[ue*2],ae=K[ue*2-1],ie=ae+Q*.5+ne*.5;if(this.kerning){var fe=U.kerning[j+ee];fe&&(ie+=fe*.001)}K[ue*2+1]=ie}else K[ue*2+1]=K[ue*2]*.5;ue++}this.textWidth.push(K.length?K[ue*2-2]*.5+K[ue*2-1]:0)}c.align||(c.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),n.freeUint8(V),n.freeFloat(K),I.length&&this.font.forEach(function(_e,Ie){var Ye=L.fontAtlas[Ie],qe=Ye.step,Ue=Math.floor(_.maxAtlasSize/qe),Re=Math.min(Ue,Ye.chars.length),Ve=Math.ceil(Ye.chars.length/Re),dt=g(Re*qe),Dt=g(Ve*qe);Ye.width=dt,Ye.height=Dt,Ye.rows=Ve,Ye.cols=Re,!!Ye.em&&Ye.texture({data:a({canvas:_.atlasCanvas,font:Ye.fontString,chars:Ye.chars,shape:[dt,Dt],step:[qe,qe]})})})}if(c.align&&(this.align=c.align,this.alignOffset=this.textWidth.map(function(_e,Ie){var Ye=Array.isArray(L.align)?L.align.length>1?L.align[Ie]:L.align[0]:L.align;if(typeof Ye=="number")return Ye;switch(Ye){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&c.baseline==null&&(c.baseline=0),c.baseline!=null&&(this.baseline=c.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,Ie){var Ye=(L.font[Ie]||L.font[0]).metrics,qe=0;return qe+=Ye.bottom*.5,typeof _e=="number"?qe+=_e-Ye.baseline:qe+=-Ye[_e],qe*=-1,qe})),c.color!=null)if(c.color||(c.color="transparent"),typeof c.color=="string"||!isNaN(c.color))this.color=o(c.color,"uint8");else{var me;if(typeof c.color[0]=="number"&&c.color.length>this.counts.length){var ce=c.color.length;me=n.mallocUint8(ce);for(var ye=(c.color.subarray||c.color.slice).bind(c.color),xe=0;xe<ce;xe+=4)me.set(o(ye(xe,xe+4),"uint8"),xe)}else{var ke=c.color.length;me=n.mallocUint8(ke*4);for(var Ae=0;Ae<ke;Ae++)me.set(o(c.color[Ae]||0,"uint8"),Ae*4)}this.color=me}if(c.position||c.text||c.color||c.baseline||c.align||c.font||c.offset||c.opacity){var Oe=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Oe){var He=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(He);for(var Ge=0;Ge<this.batch.length;Ge++)this.batch[Ge]={count:this.counts.length>1?this.counts[Ge]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ge]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ge*4,Ge*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ge]:this.opacity,baseline:this.baselineOffset[Ge]!=null?this.baselineOffset[Ge]:this.baselineOffset[0],align:this.align?this.alignOffset[Ge]!=null?this.alignOffset[Ge]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ge]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ge*2,Ge*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function T(x){return typeof x=="function"&&x._gl&&x.prop&&x.texture&&x.buffer}B.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(t,B,H){(function(d){(function(){var l=t("pick-by-alias");B.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},w(r)?r={container:r}:e(r)?r={container:r}:o(r)?r={gl:r}:r=l(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=d.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var u=document.querySelector(r.container);if(!u)throw Error("Element "+r.container+" is not found");r.container=u}w(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=a(),r.container.appendChild(r.canvas),b(r))}else if(!r.canvas)if(typeof document!="undefined")r.container=document.body||document.documentElement,r.canvas=a(),r.container.appendChild(r.canvas),b(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function b(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*d.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*d.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function w(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function e(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function o(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function a(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(t,B,H){B.exports=function(d){typeof d=="string"&&(d=[d]);for(var l=[].slice.call(arguments,1),b=[],w=0;w<d.length-1;w++)b.push(d[w],l[w]||"");return b.push(d[w]),b.join("")}},{}],228:[function(t,B,H){(function(d){(function(){var l=t("is-browser"),b;typeof d.matchMedia=="function"?b=!d.matchMedia("(hover: none)").matches:b=l,B.exports=b}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(t,B,H){var d=t("is-browser");function l(){var b=!1;try{var w=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,w),window.removeEventListener("test",null,w)}catch{b=!1}return b}B.exports=d&&l()},{"is-browser":232}],230:[function(t,B,H){H.read=function(d,l,b,w,e){var o,a,n=e*8-w-1,r=(1<<n)-1,u=r>>1,s=-7,i=b?e-1:0,f=b?-1:1,h=d[l+i];for(i+=f,o=h&(1<<-s)-1,h>>=-s,s+=n;s>0;o=o*256+d[l+i],i+=f,s-=8);for(a=o&(1<<-s)-1,o>>=-s,s+=w;s>0;a=a*256+d[l+i],i+=f,s-=8);if(o===0)o=1-u;else{if(o===r)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,w),o=o-u}return(h?-1:1)*a*Math.pow(2,o-w)},H.write=function(d,l,b,w,e,o){var a,n,r,u=o*8-e-1,s=(1<<u)-1,i=s>>1,f=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=w?0:o-1,p=w?1:-1,v=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(n=isNaN(l)?1:0,a=s):(a=Math.floor(Math.log(l)/Math.LN2),l*(r=Math.pow(2,-a))<1&&(a--,r*=2),a+i>=1?l+=f/r:l+=f*Math.pow(2,1-i),l*r>=2&&(a++,r/=2),a+i>=s?(n=0,a=s):a+i>=1?(n=(l*r-1)*Math.pow(2,e),a=a+i):(n=l*Math.pow(2,i-1)*Math.pow(2,e),a=0));e>=8;d[b+h]=n&255,h+=p,n/=256,e-=8);for(a=a<<e|n,u+=e;u>0;d[b+h]=a&255,h+=p,a/=256,u-=8);d[b+h-p]|=v*128}},{}],231:[function(t,B,H){typeof Object.create=="function"?B.exports=function(l,b){b&&(l.super_=b,l.prototype=Object.create(b.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:B.exports=function(l,b){if(b){l.super_=b;var w=function(){};w.prototype=b.prototype,l.prototype=new w,l.prototype.constructor=l}}},{}],232:[function(t,B,H){B.exports=!0},{}],233:[function(t,B,H){B.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,B,H){B.exports=b,B.exports.isMobile=b,B.exports.default=b;var d=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(w){w||(w={});var e=w.ua;if(!e&&typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var o=w.tablet?l.test(e):d.test(e);return!o&&w.tablet&&w.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(o=!0),o}},{}],235:[function(t,B,H){B.exports=function(d){var l=typeof d;return d!==null&&(l==="object"||l==="function")}},{}],236:[function(t,B,H){var d=Object.prototype.toString;B.exports=function(l){var b;return d.call(l)==="[object Object]"&&(b=Object.getPrototypeOf(l),b===null||b===Object.getPrototypeOf({}))}},{}],237:[function(t,B,H){B.exports=function(d){for(var l=d.length,b,w=0;w<l;w++)if(b=d.charCodeAt(w),(b<9||b>13)&&b!==32&&b!==133&&b!==160&&b!==5760&&b!==6158&&(b<8192||b>8205)&&b!==8232&&b!==8233&&b!==8239&&b!==8287&&b!==8288&&b!==12288&&b!==65279)return!1;return!0}},{}],238:[function(t,B,H){B.exports=function(l){return typeof l!="string"?!1:(l=l.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(l)&&/[\dz]$/i.test(l)&&l.length>4))}},{}],239:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?B.exports=l():(d=d||self,d.mapboxgl=l())})(this,function(){var d,l,b;function w(e,o){if(!d)d=o;else if(!l)l=o;else{var a="var sharedChunk = {}; ("+d+")(sharedChunk); ("+l+")(sharedChunk);",n={};d(n),b=o(n),b.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return w(["exports"],function(e){function o(E,C){return C={exports:{}},E(C,C.exports),C.exports}var a="1.10.1",n=r;function r(E,C,N,te){this.cx=3*E,this.bx=3*(N-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(te-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=te,this.p2x=N,this.p2y=te}r.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},r.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},r.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},r.prototype.solveCurveX=function(E,C){typeof C=="undefined"&&(C=1e-6);var N,te,pe,be,Me;for(pe=E,Me=0;Me<8;Me++){if(be=this.sampleCurveX(pe)-E,Math.abs(be)<C)return pe;var Fe=this.sampleCurveDerivativeX(pe);if(Math.abs(Fe)<1e-6)break;pe=pe-be/Fe}if(N=0,te=1,pe=E,pe<N)return N;if(pe>te)return te;for(;N<te;){if(be=this.sampleCurveX(pe),Math.abs(be-E)<C)return pe;E>be?N=pe:te=pe,pe=(te-N)*.5+N}return pe},r.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var u=s;function s(E,C){this.x=E,this.y=C}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,N=E.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,N=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=N,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),N=Math.sin(E),te=C*this.x-N*this.y,pe=N*this.x+C*this.y;return this.x=te,this.y=pe,this},_rotateAround:function(E,C){var N=Math.cos(E),te=Math.sin(E),pe=C.x+N*(this.x-C.x)-te*(this.y-C.y),be=C.y+te*(this.x-C.x)+N*(this.y-C.y);return this.x=pe,this.y=be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(E){return E instanceof s?E:Array.isArray(E)?new s(E[0],E[1]):E};function i(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var N=0;N<E.length;N++)if(!i(E[N],C[N]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var te=Object.keys(E);if(te.length!==Object.keys(C).length)return!1;for(var pe in E)if(!i(E[pe],C[pe]))return!1;return!0}return E===C}function f(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,N=C*E;return 4*(E<.5?N:3*(E-C)+N-.75)}function h(E,C,N,te){var pe=new n(E,C,N,te);return function(be){return pe.solve(be)}}var p=h(.25,.1,.25,1);function v(E,C,N){return Math.min(N,Math.max(C,E))}function y(E,C,N){var te=N-C,pe=((E-C)%te+te)%te+C;return pe===C?N:pe}function g(E,C,N){if(!E.length)return N(null,[]);var te=E.length,pe=new Array(E.length),be=null;E.forEach(function(Me,Fe){C(Me,function(tt,ct){tt&&(be=tt),pe[Fe]=ct,--te==0&&N(be,pe)})})}function A(E){var C=[];for(var N in E)C.push(E[N]);return C}function m(E,C){var N=[];for(var te in E)te in C||N.push(te);return N}function M(E){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];for(var Me in be)E[Me]=be[Me]}return E}function _(E,C){for(var N={},te=0;te<C.length;te++){var pe=C[te];pe in E&&(N[pe]=E[pe])}return N}var T=1;function x(){return T++}function c(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(N){!C[N]||(C[N]=C[N].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,N){var te={};for(var pe in E)te[pe]=C.call(N||this,E[pe],pe,E);return te}function z(E,C,N){var te={};for(var pe in E)C.call(N||this,E[pe],pe,E)&&(te[pe]=E[pe]);return te}function I(E){return Array.isArray(E)?E.map(I):typeof E=="object"&&E?P(E,I):E}function R(E,C){for(var N=0;N<E.length;N++)if(C.indexOf(E[N])>=0)return!0;return!1}var D={};function O(E){D[E]||(typeof console!="undefined"&&console.warn(E),D[E]=!0)}function F(E,C,N){return(N.y-E.y)*(C.x-E.x)>(C.y-E.y)*(N.x-E.x)}function Y(E){for(var C=0,N=0,te=E.length,pe=te-1,be=void 0,Me=void 0;N<te;pe=N++)be=E[N],Me=E[pe],C+=(Me.x-be.x)*(be.y+Me.y);return C}function X(E){var C=E[0],N=E[1],te=E[2];return N+=90,N*=Math.PI/180,te*=Math.PI/180,{x:C*Math.cos(N)*Math.sin(te),y:C*Math.sin(N)*Math.sin(te),z:C*Math.cos(te)}}function q(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function $(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(E.replace(C,function(pe,be,Me,Fe){var tt=Me||Fe;return N[be]=tt?tt.toLowerCase():!0,""}),N["max-age"]){var te=parseInt(N["max-age"],10);isNaN(te)?delete N["max-age"]:N["max-age"]=te}return N}var V=null;function K(E){if(V==null){var C=E.navigator?E.navigator.userAgent:null;V=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return V}function se(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function ue(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,N){return String.fromCharCode(Number("0x"+N))}))}function oe(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),G=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,re=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ee,j,Q={now:U,frame:function(C){var N=G(C);return{cancel:function(){return re(N)}}},getImageData:function(C,N){N===void 0&&(N=0);var te=self.document.createElement("canvas"),pe=te.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return te.width=C.width,te.height=C.height,pe.drawImage(C,0,0,C.width,C.height),pe.getImageData(-N,-N,C.width+2*N,C.height+2*N)},resolveURL:function(C){return ee||(ee=self.document.createElement("a")),ee.href=C,ee.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(j==null&&(j=self.matchMedia("(prefers-reduced-motion: reduce)")),j.matches):!1}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ae={supported:!1,testSupport:ye},ie,fe=!1,me,ce=!1;self.document&&(me=self.document.createElement("img"),me.onload=function(){ie&&xe(ie),ie=null,ce=!0},me.onerror=function(){fe=!0,ie=null},me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ye(E){fe||!me||(ce?xe(E):ie=E)}function xe(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,me),E.isContextLost())return;ae.supported=!0}catch{}E.deleteTexture(C),fe=!0}var ke="01";function Ae(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",te=0;te<10;te++)N+=C[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,be=[E,ke,N].join(""),Me=Date.now()+pe;return{token:be,tokenExpiresAt:Me}}var Oe=function(C,N){this._transformRequestFn=C,this._customAccessToken=N,this._createSkuToken()};Oe.prototype._createSkuToken=function(){var C=Ae();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},Oe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Oe.prototype.transformRequest=function(C,N){return this._transformRequestFn?this._transformRequestFn(C,N)||{url:C}:{url:C}},Oe.prototype.normalizeStyleURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Oe.prototype.normalizeGlyphsURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Oe.prototype.normalizeSourceURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||N)},Oe.prototype.normalizeSpriteURL=function(C,N,te,pe){var be=Ue(C);return He(C)?(be.path="/styles/v1"+be.path+"/sprite"+N+te,this._makeAPIURL(be,this._customAccessToken||pe)):(be.path+=""+N+te,Re(be))},Oe.prototype.normalizeTileURL=function(C,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!He(C))return C;var te=Ue(C),pe=/(\.(png|jpg)\d*)(?=$)/,be=/^.+\/v4\//,Me=Q.devicePixelRatio>=2||N===512?"@2x":"",Fe=ae.supported?".webp":"$1";te.path=te.path.replace(pe,""+Me+Fe),te.path=te.path.replace(be,"/"),te.path="/v4"+te.path;var tt=this._customAccessToken||Ye(te.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,tt)},Oe.prototype.canonicalizeTileURL=function(C,N){var te="/v4/",pe=/\.[\w]+$/,be=Ue(C);if(!be.path.match(/(^\/v4\/)/)||!be.path.match(pe))return C;var Me="mapbox://tiles/";Me+=be.path.replace(te,"");var Fe=be.params;return N&&(Fe=Fe.filter(function(tt){return!tt.match(/^access_token=/)})),Fe.length&&(Me+="?"+Fe.join("&")),Me},Oe.prototype.canonicalizeTileset=function(C,N){for(var te=N?He(N):!1,pe=[],be=0,Me=C.tiles||[];be<Me.length;be+=1){var Fe=Me[be];_e(Fe)?pe.push(this.canonicalizeTileURL(Fe,te)):pe.push(Fe)}return pe},Oe.prototype._makeAPIURL=function(C,N){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=Ue(ne.API_URL);if(C.protocol=pe.protocol,C.authority=pe.authority,pe.path!=="/"&&(C.path=""+pe.path+C.path),!ne.REQUIRE_ACCESS_TOKEN)return Re(C);if(N=N||ne.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+te);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return C.params=C.params.filter(function(be){return be.indexOf("access_token")===-1}),C.params.push("access_token="+N),Re(C)};function He(E){return E.indexOf("mapbox:")===0}var Ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(E){return Ge.test(E)}function Ie(E){return E.indexOf("sku=")>0&&_e(E)}function Ye(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C],pe=te.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(E){var C=E.match(qe);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Re(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var Ve="mapbox.eventData";function dt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var N=JSON.parse(oe(C[1]));return N}catch{return null}}var Dt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Dt.prototype.getStorageKey=function(C){var N=dt(ne.ACCESS_TOKEN),te="";return N&&N.u?te=ue(N.u):te=ne.ACCESS_TOKEN||"",C?Ve+"."+C+":"+te:Ve+":"+te},Dt.prototype.fetchEventData=function(){var C=se("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{var pe=self.localStorage.getItem(N);pe&&(this.eventData=JSON.parse(pe));var be=self.localStorage.getItem(te);be&&(this.anonId=be)}catch{O("Unable to read from LocalStorage")}},Dt.prototype.saveEventData=function(){var C=se("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Dt.prototype.processRequests=function(C){},Dt.prototype.postEvent=function(C,N,te,pe){var be=this;if(!!ne.EVENTS_URL){var Me=Ue(ne.EVENTS_URL);Me.params.push("access_token="+(pe||ne.ACCESS_TOKEN||""));var Fe={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:a,skuId:ke,userId:this.anonId},tt=N?M(Fe,N):Fe,ct={url:Re(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Xe(ct,function(yt){be.pendingRequest=null,te(yt),be.saveEventData(),be.processRequests(pe)})}},Dt.prototype.queueRequest=function(C,N){this.queue.push(C),this.processRequests(N)};var Gt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(te,pe,be,Me){this.skuToken=be,(ne.EVENTS_URL&&Me||ne.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Fe){return He(Fe)||_e(Fe)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Me)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var be=this.queue.shift(),Me=be.id,Fe=be.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=c()),this.postEvent(Fe,{skuToken:this.skuToken},function(tt){tt||Me&&(pe.success[Me]=!0)},te))}},C}(Dt),kt=function(E){function C(N){E.call(this,"appUserTurnstile"),this._customAccessToken=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(te,pe){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(be){return He(be)||_e(be)})&&this.queueRequest(Date.now(),pe)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var be=dt(ne.ACCESS_TOKEN),Me=be?be.u:ne.ACCESS_TOKEN,Fe=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=c(),Fe=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),yt=new Date(tt),Rt=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Fe=Fe||Rt>=1||Rt<-1||ct.getDate()!==yt.getDate()}else Fe=!0;if(!Fe)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(Zt){Zt||(pe.eventData.lastSuccess=tt,pe.eventData.tokenU=Me)},te)}},C}(Dt),zt=new kt,Bt=zt.postTurnstileEvent.bind(zt),Lt=new Gt,Mt=Lt.postMapLoadEvent.bind(Lt),it="mapbox-tiles",ht=500,Qe=50,Ce=1e3*60*7,je;function rt(){self.caches&&!je&&(je=self.caches.open(it))}var ut;function Pt(E,C){if(ut===void 0)try{new Response(new ReadableStream),ut=!0}catch{ut=!1}ut?C(E.body):E.blob().then(C)}function St(E,C,N){if(rt(),!!je){var te={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Me,Fe){return te.headers.set(Fe,Me)});var pe=$(C.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&te.headers.set("Expires",new Date(N+pe["max-age"]*1e3).toUTCString());var be=new Date(te.headers.get("Expires")).getTime()-N;be<Ce||Pt(C,function(Me){var Fe=new self.Response(Me,te);rt(),!!je&&je.then(function(tt){return tt.put(Nt(E.url),Fe)}).catch(function(tt){return O(tt.message)})})}}}function Nt(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function Xt(E,C){if(rt(),!je)return C(null);var N=Nt(E.url);je.then(function(te){te.match(N).then(function(pe){var be=Ot(pe);te.delete(N),be&&te.put(N,pe.clone()),C(null,pe,be)}).catch(C)}).catch(C)}function Ot(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),N=$(E.headers.get("Cache-Control")||"");return C>Date.now()&&!N["no-cache"]}var Kt=1/0;function Je(E){Kt++,Kt>Qe&&(E.getActor().send("enforceCacheSizeLimit",ht),Kt=0)}function gt(E){rt(),!!je&&je.then(function(C){C.keys().then(function(N){for(var te=0;te<N.length-E;te++)C.delete(N[te])})})}function Et(E){var C=self.caches.delete(it);E&&C.catch(E).then(function(){return E()})}function rr(E,C){ht=E,Qe=C}var vr;function or(){return vr==null&&(vr=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),vr}var dr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(dr);var Lr=function(E){function C(N,te,pe){te===401&&_e(pe)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,N),this.status=te,this.url=pe,this.name=this.constructor.name,this.message=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),kr=q()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},tr=function(E){return/^file:/.test(E)||/^file:/.test(kr())&&!/^\w+:/.test(E)};function Or(E,C){var N=new self.AbortController,te=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:kr(),signal:N.signal}),pe=!1,be=!1,Me=Ie(te.url);E.type==="json"&&te.headers.set("Accept","application/json");var Fe=function(ct,yt,Rt){if(!be){if(ct&&ct.message!=="SecurityError"&&O(ct),yt&&Rt)return tt(yt);var Zt=Date.now();self.fetch(te).then(function(Ht){if(Ht.ok){var lr=Me?Ht.clone():null;return tt(Ht,lr,Zt)}else return C(new Lr(Ht.statusText,Ht.status,E.url))}).catch(function(Ht){Ht.code!==20&&C(new Error(Ht.message))})}},tt=function(ct,yt,Rt){(E.type==="arrayBuffer"?ct.arrayBuffer():E.type==="json"?ct.json():ct.text()).then(function(Zt){be||(yt&&Rt&&St(te,yt,Rt),pe=!0,C(null,Zt,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(function(Zt){be||C(new Error(Zt.message))})};return Me?Xt(te,Fe):Fe(null,null),{cancel:function(){be=!0,pe||N.abort()}}}function et(E,C){var N=new self.XMLHttpRequest;N.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var te in E.headers)N.setRequestHeader(te,E.headers[te]);return E.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=E.credentials==="include",N.onerror=function(){C(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var pe=N.response;if(E.type==="json")try{pe=JSON.parse(N.response)}catch(be){return C(be)}C(null,pe,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else C(new Lr(N.statusText,N.status,E.url))},N.send(E.body),{cancel:function(){return N.abort()}}}var we=function(E,C){if(!tr(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Or(E,C);if(q()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",E,C,void 0,N)}}return et(E,C)},Se=function(E,C){return we(M(E,{type:"json"}),C)},De=function(E,C){return we(M(E,{type:"arrayBuffer"}),C)},Xe=function(E,C){return we(M(E,{method:"POST"}),C)};function $e(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function st(E,C,N,te){var pe=new self.Image,be=self.URL;pe.onload=function(){C(null,pe),be.revokeObjectURL(pe.src)},pe.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(E)],{type:"image/png"});pe.cacheControl=N,pe.expires=te,pe.src=E.byteLength?be.createObjectURL(Me):ot}function pt(E,C){var N=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(N).then(function(te){C(null,te)}).catch(function(te){C(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var wt,Yt,mr=function(){wt=[],Yt=0};mr();var xr=function(E,C){if(ae.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),Yt>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return wt.push(N),N}Yt++;var te=!1,pe=function(){if(!te)for(te=!0,Yt--;wt.length&&Yt<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=wt.shift(),Fe=Me.requestParameters,tt=Me.callback,ct=Me.cancelled;ct||(Me.cancel=xr(Fe,tt).cancel)}},be=De(E,function(Me,Fe,tt,ct){pe(),Me?C(Me):Fe&&(or()?pt(Fe,C):st(Fe,C,tt,ct))});return{cancel:function(){be.cancel(),pe()}}},Tr=function(E,C){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){C(null,N)};for(var te=0;te<E.length;te++){var pe=self.document.createElement("source");$e(E[te])||(N.crossOrigin="Anonymous"),pe.src=E[te],N.appendChild(pe)}return{cancel:function(){}}};function yr(E,C,N){var te=N[E]&&N[E].indexOf(C)!==-1;te||(N[E]=N[E]||[],N[E].push(C))}function Dr(E,C,N){if(N&&N[E]){var te=N[E].indexOf(C);te!==-1&&N[E].splice(te,1)}}var tn=function(C,N){N===void 0&&(N={}),M(this,N),this.type=C},wr=function(E){function C(N,te){te===void 0&&(te={}),E.call(this,"error",M({error:N},te))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(tn),gr=function(){};gr.prototype.on=function(C,N){return this._listeners=this._listeners||{},yr(C,N,this._listeners),this},gr.prototype.off=function(C,N){return Dr(C,N,this._listeners),Dr(C,N,this._oneTimeListeners),this},gr.prototype.once=function(C,N){return this._oneTimeListeners=this._oneTimeListeners||{},yr(C,N,this._oneTimeListeners),this},gr.prototype.fire=function(C,N){typeof C=="string"&&(C=new tn(C,N||{}));var te=C.type;if(this.listens(te)){C.target=this;for(var pe=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],be=0,Me=pe;be<Me.length;be+=1){var Fe=Me[be];Fe.call(this,C)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],ct=0,yt=tt;ct<yt.length;ct+=1){var Rt=yt[ct];Dr(te,Rt,this._oneTimeListeners),Rt.call(this,C)}var Zt=this._eventedParent;Zt&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Zt.fire(C))}else C instanceof wr&&console.error(C.error);return this},gr.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},gr.prototype.setEventedParent=function(C,N){return this._eventedParent=C,this._eventedParentData=N,this};var yn=8,Gr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ar={"*":{type:"source"}},nn=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],fn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Xr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Ft={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},er={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Yr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},zr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Pr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},br={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ta={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ia={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Aa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ya={type:"array",value:"*"},pr={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},vn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},$r={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Fn={type:"array",value:"*",minimum:1},Nn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ca={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ra=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Un={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},ua={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},da={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ur={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rr={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},on={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wn={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},pn={"*":{type:"string"}},cr={$version:yn,$root:Gr,sources:Ar,source:nn,source_vector:fn,source_raster:Xr,source_raster_dem:at,source_geojson:Ft,source_video:er,source_image:hr,layer:Yr,layout:zr,layout_background:Pr,layout_fill:br,layout_circle:jr,layout_heatmap:zn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:kn,layout_symbol:ta,layout_raster:ia,layout_hillshade:Aa,filter:ya,filter_operator:pr,geometry_type:vn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:$r,expression:Fn,expression_name:Nn,light:ca,paint:ra,paint_fill:Un,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:ua,paint_circle:da,paint_heatmap:ur,paint_symbol:Rr,paint_raster:on,paint_hillshade:rn,paint_background:gn,transition:wn,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:pn},ar=function(C,N,te,pe){this.message=(C?C+": ":"")+te,pe&&(this.identifier=pe),N!=null&&N.__line__&&(this.line=N.__line__)};function Fr(E){var C=E.key,N=E.value;return N?[new ar(C,N,"constants have been deprecated as of v8")]:[]}function Jr(E){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];for(var Me in be)E[Me]=be[Me]}return E}function En(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function Vn(E){if(Array.isArray(E))return E.map(Vn);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var N in E)C[N]=Vn(E[N]);return C}return En(E)}var Kn=function(E){function C(N,te){E.call(this,te),this.message=te,this.key=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),jn=function(C,N){N===void 0&&(N=[]),this.parent=C,this.bindings={};for(var te=0,pe=N;te<pe.length;te+=1){var be=pe[te],Me=be[0],Fe=be[1];this.bindings[Me]=Fe}};jn.prototype.concat=function(C){return new jn(this,C)},jn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},jn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var Bn={kind:"null"},mn={kind:"number"},Rn={kind:"string"},Yn={kind:"boolean"},la={kind:"color"},Ga={kind:"object"},ka={kind:"value"},il={kind:"error"},No={kind:"collator"},es={kind:"formatted"},Ls={kind:"resolvedImage"};function eo(E,C){return{kind:"array",itemType:E,N:C}}function Pi(E){if(E.kind==="array"){var C=Pi(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var Ys=[Bn,mn,Rn,Yn,la,es,Ga,eo(ka),Ls];function Ws(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!Ws(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var N=0,te=Ys;N<te.length;N+=1){var pe=te[N];if(!Ws(pe,C))return null}}return"Expected "+Pi(E)+" but found "+Pi(C)+" instead."}function ts(E,C){return C.some(function(N){return N.kind===E.kind})}function Ml(E,C){return C.some(function(N){return N==="null"?E===null:N==="array"?Array.isArray(E):N==="object"?E&&!Array.isArray(E)&&typeof E=="object":N===typeof E})}var Nl=o(function(E,C){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(ct){return ct=Math.round(ct),ct<0?0:ct>255?255:ct}function pe(ct){return ct<0?0:ct>1?1:ct}function be(ct){return ct[ct.length-1]==="%"?te(parseFloat(ct)/100*255):te(parseInt(ct))}function Me(ct){return ct[ct.length-1]==="%"?pe(parseFloat(ct)/100):pe(parseFloat(ct))}function Fe(ct,yt,Rt){return Rt<0?Rt+=1:Rt>1&&(Rt-=1),Rt*6<1?ct+(yt-ct)*Rt*6:Rt*2<1?yt:Rt*3<2?ct+(yt-ct)*(2/3-Rt)*6:ct}function tt(ct){var yt=ct.replace(/ /g,"").toLowerCase();if(yt in N)return N[yt].slice();if(yt[0]==="#"){if(yt.length===4){var Rt=parseInt(yt.substr(1),16);return Rt>=0&&Rt<=4095?[(Rt&3840)>>4|(Rt&3840)>>8,Rt&240|(Rt&240)>>4,Rt&15|(Rt&15)<<4,1]:null}else if(yt.length===7){var Rt=parseInt(yt.substr(1),16);return Rt>=0&&Rt<=16777215?[(Rt&16711680)>>16,(Rt&65280)>>8,Rt&255,1]:null}return null}var Zt=yt.indexOf("("),Ht=yt.indexOf(")");if(Zt!==-1&&Ht+1===yt.length){var lr=yt.substr(0,Zt),Ir=yt.substr(Zt+1,Ht-(Zt+1)).split(","),ln=1;switch(lr){case"rgba":if(Ir.length!==4)return null;ln=Me(Ir.pop());case"rgb":return Ir.length!==3?null:[be(Ir[0]),be(Ir[1]),be(Ir[2]),ln];case"hsla":if(Ir.length!==4)return null;ln=Me(Ir.pop());case"hsl":if(Ir.length!==3)return null;var qr=(parseFloat(Ir[0])%360+360)%360/360,Mn=Me(Ir[1]),bn=Me(Ir[2]),An=bn<=.5?bn*(Mn+1):bn+Mn-bn*Mn,Dn=bn*2-An;return[te(Fe(Dn,An,qr+1/3)*255),te(Fe(Dn,An,qr)*255),te(Fe(Dn,An,qr-1/3)*255),ln];default:return null}}return null}try{C.parseCSSColor=tt}catch{}}),xu=Nl.parseCSSColor,hi=function(C,N,te,pe){pe===void 0&&(pe=1),this.r=C,this.g=N,this.b=te,this.a=pe};hi.parse=function(C){if(!!C){if(C instanceof hi)return C;if(typeof C=="string"){var N=xu(C);if(!!N)return new hi(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},hi.prototype.toString=function(){var C=this.toArray(),N=C[0],te=C[1],pe=C[2],be=C[3];return"rgba("+Math.round(N)+","+Math.round(te)+","+Math.round(pe)+","+be+")"},hi.prototype.toArray=function(){var C=this,N=C.r,te=C.g,pe=C.b,be=C.a;return be===0?[0,0,0,0]:[N*255/be,te*255/be,pe*255/be,be]},hi.black=new hi(0,0,0,1),hi.white=new hi(1,1,1,1),hi.transparent=new hi(0,0,0,0),hi.red=new hi(1,0,0,1);var ol=function(C,N,te){C?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ol.prototype.compare=function(C,N){return this.collator.compare(C,N)},ol.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Xs=function(C,N,te,pe,be){this.text=C,this.image=N,this.scale=te,this.fontStack=pe,this.textColor=be},Ui=function(C){this.sections=C};Ui.fromString=function(C){return new Ui([new Xs(C,null,null,null,null)])},Ui.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Ui.factory=function(C){return C instanceof Ui?C:Ui.fromString(C)},Ui.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Ui.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];if(pe.image){C.push(["image",pe.image.name]);continue}C.push(pe.text);var be={};pe.fontStack&&(be["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(be["font-scale"]=pe.scale),pe.textColor&&(be["text-color"]=["rgba"].concat(pe.textColor.toArray())),C.push(be)}return C};var So=function(C){this.name=C.name,this.available=C.available};So.prototype.toString=function(){return this.name},So.fromString=function(C){return C?new So({name:C,available:!1}):null},So.prototype.serialize=function(){return["image",this.name]};function Bl(E,C,N,te){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof N=="number"&&N>=0&&N<=255)){var pe=typeof te=="number"?[E,C,N,te]:[E,C,N];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te=="undefined"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[E,C,N,te].join(", ")+"]: 'a' must be between 0 and 1."}function _s(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof hi)return!0;if(E instanceof ol)return!0;if(E instanceof Ui)return!0;if(E instanceof So)return!0;if(Array.isArray(E)){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(!_s(te))return!1}return!0}else if(typeof E=="object"){for(var pe in E)if(!_s(E[pe]))return!1;return!0}else return!1}function Di(E){if(E===null)return Bn;if(typeof E=="string")return Rn;if(typeof E=="boolean")return Yn;if(typeof E=="number")return mn;if(E instanceof hi)return la;if(E instanceof ol)return No;if(E instanceof Ui)return es;if(E instanceof So)return Ls;if(Array.isArray(E)){for(var C=E.length,N,te=0,pe=E;te<pe.length;te+=1){var be=pe[te],Me=Di(be);if(!N)N=Me;else{if(N===Me)continue;N=ka;break}}return eo(N||ka,C)}else return Ga}function Sl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof hi||E instanceof Ui||E instanceof So?E.toString():JSON.stringify(E)}var Ji=function(C,N){this.type=C,this.value=N};Ji.parse=function(C,N){if(C.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!_s(C[1]))return N.error("invalid value");var te=C[1],pe=Di(te),be=N.expectedType;return pe.kind==="array"&&pe.N===0&&be&&be.kind==="array"&&(typeof be.N!="number"||be.N===0)&&(pe=be),new Ji(pe,te)},Ji.prototype.evaluate=function(){return this.value},Ji.prototype.eachChild=function(){},Ji.prototype.outputDefined=function(){return!0},Ji.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hi?["rgba"].concat(this.value.toArray()):this.value instanceof Ui?this.value.serialize():this.value};var Fi=function(C){this.name="ExpressionEvaluationError",this.message=C};Fi.prototype.toJSON=function(){return this.message};var io={string:Rn,number:mn,boolean:Yn,object:Ga},Qi=function(C,N){this.type=C,this.args=N};Qi.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=1,pe,be=C[0];if(be==="array"){var Me;if(C.length>2){var Fe=C[1];if(typeof Fe!="string"||!(Fe in io)||Fe==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);Me=io[Fe],te++}else Me=ka;var tt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return N.error('The length argument to "array" must be a positive integer literal',2);tt=C[2],te++}pe=eo(Me,tt)}else pe=io[be];for(var ct=[];te<C.length;te++){var yt=N.parse(C[te],te,ka);if(!yt)return null;ct.push(yt)}return new Qi(pe,ct)},Qi.prototype.evaluate=function(C){for(var N=0;N<this.args.length;N++){var te=this.args[N].evaluate(C),pe=Ws(this.type,Di(te));if(pe){if(N===this.args.length-1)throw new Fi("Expected value to be of type "+Pi(this.type)+", but found "+Pi(Di(te))+" instead.")}else return te}return null},Qi.prototype.eachChild=function(C){this.args.forEach(C)},Qi.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Qi.prototype.serialize=function(){var C=this.type,N=[C.kind];if(C.kind==="array"){var te=C.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){N.push(te.kind);var pe=C.N;(typeof pe=="number"||this.args.length>1)&&N.push(pe)}}return N.concat(this.args.map(function(be){return be.serialize()}))};var us=function(C){this.type=es,this.sections=C};us.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[1];if(!Array.isArray(te)&&typeof te=="object")return N.error("First argument must be an image or text section.");for(var pe=[],be=!1,Me=1;Me<=C.length-1;++Me){var Fe=C[Me];if(be&&typeof Fe=="object"&&!Array.isArray(Fe)){be=!1;var tt=null;if(Fe["font-scale"]&&(tt=N.parse(Fe["font-scale"],1,mn),!tt))return null;var ct=null;if(Fe["text-font"]&&(ct=N.parse(Fe["text-font"],1,eo(Rn)),!ct))return null;var yt=null;if(Fe["text-color"]&&(yt=N.parse(Fe["text-color"],1,la),!yt))return null;var Rt=pe[pe.length-1];Rt.scale=tt,Rt.font=ct,Rt.textColor=yt}else{var Zt=N.parse(C[Me],1,ka);if(!Zt)return null;var Ht=Zt.type.kind;if(Ht!=="string"&&Ht!=="value"&&Ht!=="null"&&Ht!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,pe.push({content:Zt,scale:null,font:null,textColor:null})}}return new us(pe)},us.prototype.evaluate=function(C){var N=function(te){var pe=te.content.evaluate(C);return Di(pe)===Ls?new Xs("",pe,null,null,null):new Xs(Sl(pe),null,te.scale?te.scale.evaluate(C):null,te.font?te.font.evaluate(C).join(","):null,te.textColor?te.textColor.evaluate(C):null)};return new Ui(this.sections.map(N))},us.prototype.eachChild=function(C){for(var N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];C(pe.content),pe.scale&&C(pe.scale),pe.font&&C(pe.font),pe.textColor&&C(pe.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];C.push(pe.content.serialize());var be={};pe.scale&&(be["font-scale"]=pe.scale.serialize()),pe.font&&(be["text-font"]=pe.font.serialize()),pe.textColor&&(be["text-color"]=pe.textColor.serialize()),C.push(be)}return C};var sl=function(C){this.type=Ls,this.input=C};sl.parse=function(C,N){if(C.length!==2)return N.error("Expected two arguments.");var te=N.parse(C[1],1,Rn);return te?new sl(te):N.error("No image name provided.")},sl.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=So.fromString(N);return te&&C.availableImages&&(te.available=C.availableImages.indexOf(N)>-1),te},sl.prototype.eachChild=function(C){C(this.input)},sl.prototype.outputDefined=function(){return!1},sl.prototype.serialize=function(){return["image",this.input.serialize()]};var Bu={"to-boolean":Yn,"to-color":la,"to-number":mn,"to-string":Rn},rs=function(C,N){this.type=C,this.args=N};rs.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[0];if((te==="to-boolean"||te==="to-string")&&C.length!==2)return N.error("Expected one argument.");for(var pe=Bu[te],be=[],Me=1;Me<C.length;Me++){var Fe=N.parse(C[Me],Me,ka);if(!Fe)return null;be.push(Fe)}return new rs(pe,be)},rs.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var N,te,pe=0,be=this.args;pe<be.length;pe+=1){var Me=be[pe];if(N=Me.evaluate(C),te=null,N instanceof hi)return N;if(typeof N=="string"){var Fe=C.parseColor(N);if(Fe)return Fe}else if(Array.isArray(N)&&(N.length<3||N.length>4?te="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":te=Bl(N[0],N[1],N[2],N[3]),!te))return new hi(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Fi(te||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ct=0,yt=this.args;ct<yt.length;ct+=1){var Rt=yt[ct];if(tt=Rt.evaluate(C),tt===null)return 0;var Zt=Number(tt);if(!isNaN(Zt))return Zt}throw new Fi("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?Ui.fromString(Sl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?So.fromString(Sl(this.args[0].evaluate(C))):Sl(this.args[0].evaluate(C))},rs.prototype.eachChild=function(C){this.args.forEach(C)},rs.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},rs.prototype.serialize=function(){if(this.type.kind==="formatted")return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new sl(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(N){C.push(N.serialize())}),C};var Uu=["Unknown","Point","LineString","Polygon"],js=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};js.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},js.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Uu[this.feature.type]:this.feature.type:null},js.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},js.prototype.canonicalID=function(){return this.canonical},js.prototype.properties=function(){return this.feature&&this.feature.properties||{}},js.prototype.parseColor=function(C){var N=this._parseColorCache[C];return N||(N=this._parseColorCache[C]=hi.parse(C)),N};var ko=function(C,N,te,pe){this.name=C,this.type=N,this._evaluate=te,this.args=pe};ko.prototype.evaluate=function(C){return this._evaluate(C,this.args)},ko.prototype.eachChild=function(C){this.args.forEach(C)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},ko.parse=function(C,N){var te,pe=C[0],be=ko.definitions[pe];if(!be)return N.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(be)?be[0]:be.type,Fe=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,tt=Fe.filter(function(Da){var Ia=Da[0];return!Array.isArray(Ia)||Ia.length===C.length-1}),ct=null,yt=0,Rt=tt;yt<Rt.length;yt+=1){var Zt=Rt[yt],Ht=Zt[0],lr=Zt[1];ct=new Eo(N.registry,N.path,null,N.scope);for(var Ir=[],ln=!1,qr=1;qr<C.length;qr++){var Mn=C[qr],bn=Array.isArray(Ht)?Ht[qr-1]:Ht.type,An=ct.parse(Mn,1+Ir.length,bn);if(!An){ln=!0;break}Ir.push(An)}if(!ln){if(Array.isArray(Ht)&&Ht.length!==Ir.length){ct.error("Expected "+Ht.length+" arguments, but found "+Ir.length+" instead.");continue}for(var Dn=0;Dn<Ir.length;Dn++){var Xn=Array.isArray(Ht)?Ht[Dn]:Ht.type,sa=Ir[Dn];ct.concat(Dn+1).checkSubtype(Xn,sa.type)}if(ct.errors.length===0)return new ko(pe,Me,lr,Ir)}}if(tt.length===1)(te=N.errors).push.apply(te,ct.errors);else{for(var aa=tt.length?tt:Fe,za=aa.map(function(Da){var Ia=Da[0];return ff(Ia)}).join(" | "),Ta=[],Sa=1;Sa<C.length;Sa++){var ti=N.parse(C[Sa],1+Ta.length);if(!ti)return null;Ta.push(Pi(ti.type))}N.error("Expected arguments of type "+za+", but found ("+Ta.join(", ")+") instead.")}return null},ko.register=function(C,N){ko.definitions=N;for(var te in N)C[te]=ko};function ff(E){return Array.isArray(E)?"("+E.map(Pi).join(", ")+")":"("+Pi(E.type)+"...)"}var Zs=function(C,N,te){this.type=No,this.locale=te,this.caseSensitive=C,this.diacriticSensitive=N};Zs.parse=function(C,N){if(C.length!==2)return N.error("Expected one argument.");var te=C[1];if(typeof te!="object"||Array.isArray(te))return N.error("Collator options argument must be an object.");var pe=N.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,Yn);if(!pe)return null;var be=N.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,Yn);if(!be)return null;var Me=null;return te.locale&&(Me=N.parse(te.locale,1,Rn),!Me)?null:new Zs(pe,be,Me)},Zs.prototype.evaluate=function(C){return new ol(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},Zs.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},Zs.prototype.outputDefined=function(){return!1},Zs.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Ps=8192;function nu(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function cf(E){return(180+E)/360}function hf(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function ll(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function au(E,C){var N=cf(E[0]),te=hf(E[1]),pe=Math.pow(2,C.z);return[Math.round(N*pe*Ps),Math.round(te*pe*Ps)]}function Ds(E,C,N){var te=E[0]-C[0],pe=E[1]-C[1],be=E[0]-N[0],Me=E[1]-N[1];return te*Me-be*pe==0&&te*be<=0&&pe*Me<=0}function bu(E,C,N){return C[1]>E[1]!=N[1]>E[1]&&E[0]<(N[0]-C[0])*(E[1]-C[1])/(N[1]-C[1])+C[0]}function kl(E,C){for(var N=!1,te=0,pe=C.length;te<pe;te++)for(var be=C[te],Me=0,Fe=be.length;Me<Fe-1;Me++){if(Ds(E,be[Me],be[Me+1]))return!1;bu(E,be[Me],be[Me+1])&&(N=!N)}return N}function _u(E,C){for(var N=0;N<C.length;N++)if(kl(E,C[N]))return!0;return!1}function Vu(E,C){return E[0]*C[1]-E[1]*C[0]}function iu(E,C,N,te){var pe=E[0]-N[0],be=E[1]-N[1],Me=C[0]-N[0],Fe=C[1]-N[1],tt=te[0]-N[0],ct=te[1]-N[1],yt=pe*ct-tt*be,Rt=Me*ct-tt*Fe;return yt>0&&Rt<0||yt<0&&Rt>0}function vf(E,C,N,te){var pe=[C[0]-E[0],C[1]-E[1]],be=[te[0]-N[0],te[1]-N[1]];return Vu(be,pe)===0?!1:!!(iu(E,C,N,te)&&iu(N,te,E,C))}function ul(E,C,N){for(var te=0,pe=N;te<pe.length;te+=1)for(var be=pe[te],Me=0;Me<be.length-1;++Me)if(vf(E,C,be[Me],be[Me+1]))return!0;return!1}function wu(E,C){for(var N=0;N<E.length;++N)if(!kl(E[N],C))return!1;for(var te=0;te<E.length-1;++te)if(ul(E[te],E[te+1],C))return!1;return!0}function ou(E,C){for(var N=0;N<C.length;N++)if(wu(E,C[N]))return!0;return!1}function ws(E,C,N){for(var te=[],pe=0;pe<E.length;pe++){for(var be=[],Me=0;Me<E[pe].length;Me++){var Fe=au(E[pe][Me],N);nu(C,Fe),be.push(Fe)}te.push(be)}return te}function Ul(E,C,N){for(var te=[],pe=0;pe<E.length;pe++){var be=ws(E[pe],C,N);te.push(be)}return te}function Tu(E,C,N,te){if(E[0]<N[0]||E[0]>N[2]){var pe=te*.5,be=E[0]-N[0]>pe?-te:N[0]-E[0]>pe?te:0;be===0&&(be=E[0]-N[2]>pe?-te:N[2]-E[0]>pe?te:0),E[0]+=be}nu(C,E)}function Hu(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function Gu(E,C,N,te){for(var pe=Math.pow(2,te.z)*Ps,be=[te.x*Ps,te.y*Ps],Me=[],Fe=0,tt=E;Fe<tt.length;Fe+=1)for(var ct=tt[Fe],yt=0,Rt=ct;yt<Rt.length;yt+=1){var Zt=Rt[yt],Ht=[Zt.x+be[0],Zt.y+be[1]];Tu(Ht,C,N,pe),Me.push(Ht)}return Me}function su(E,C,N,te){for(var pe=Math.pow(2,te.z)*Ps,be=[te.x*Ps,te.y*Ps],Me=[],Fe=0,tt=E;Fe<tt.length;Fe+=1){for(var ct=tt[Fe],yt=[],Rt=0,Zt=ct;Rt<Zt.length;Rt+=1){var Ht=Zt[Rt],lr=[Ht.x+be[0],Ht.y+be[1]];nu(C,lr),yt.push(lr)}Me.push(yt)}if(C[2]-C[0]<=pe/2){Hu(C);for(var Ir=0,ln=Me;Ir<ln.length;Ir+=1)for(var qr=ln[Ir],Mn=0,bn=qr;Mn<bn.length;Mn+=1){var An=bn[Mn];Tu(An,C,N,pe)}}return Me}function pf(E,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=ws(C.coordinates,te,pe),Me=Gu(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Fe=0,tt=Me;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!kl(ct,be))return!1}}if(C.type==="MultiPolygon"){var yt=Ul(C.coordinates,te,pe),Rt=Gu(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Zt=0,Ht=Rt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(!_u(lr,yt))return!1}}return!0}function Yu(E,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=ws(C.coordinates,te,pe),Me=su(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Fe=0,tt=Me;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!wu(ct,be))return!1}}if(C.type==="MultiPolygon"){var yt=Ul(C.coordinates,te,pe),Rt=su(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Zt=0,Ht=Rt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(!ou(lr,yt))return!1}}return!0}var ns=function(C,N){this.type=Yn,this.geojson=C,this.geometries=N};ns.parse=function(C,N){if(C.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(_s(C[1])){var te=C[1];if(te.type==="FeatureCollection")for(var pe=0;pe<te.features.length;++pe){var be=te.features[pe].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new ns(te,te.features[pe].geometry)}else if(te.type==="Feature"){var Me=te.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new ns(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new ns(te,te)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ns.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return pf(C,this.geometries);if(C.geometryType()==="LineString")return Yu(C,this.geometries)}return!1},ns.prototype.eachChild=function(){},ns.prototype.outputDefined=function(){return!0},ns.prototype.serialize=function(){return["within",this.geojson]};function El(E){if(E instanceof ko){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof ns)return!1;var C=!0;return E.eachChild(function(N){C&&!El(N)&&(C=!1)}),C}function Cl(E){if(E instanceof ko&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(N){C&&!Cl(N)&&(C=!1)}),C}function Au(E,C){if(E instanceof ko&&C.indexOf(E.name)>=0)return!1;var N=!0;return E.eachChild(function(te){N&&!Au(te,C)&&(N=!1)}),N}var Ts=function(C,N){this.type=N.type,this.name=C,this.boundExpression=N};Ts.parse=function(C,N){if(C.length!==2||typeof C[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var te=C[1];return N.scope.has(te)?new Ts(te,N.scope.get(te)):N.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},Ts.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},Ts.prototype.eachChild=function(){},Ts.prototype.outputDefined=function(){return!1},Ts.prototype.serialize=function(){return["var",this.name]};var Eo=function(C,N,te,pe,be){N===void 0&&(N=[]),pe===void 0&&(pe=new jn),be===void 0&&(be=[]),this.registry=C,this.path=N,this.key=N.map(function(Me){return"["+Me+"]"}).join(""),this.scope=pe,this.errors=be,this.expectedType=te};Eo.prototype.parse=function(C,N,te,pe,be){return be===void 0&&(be={}),N?this.concat(N,te,pe)._parse(C,be):this._parse(C,be)},Eo.prototype._parse=function(C,N){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function te(yt,Rt,Zt){return Zt==="assert"?new Qi(Rt,[yt]):Zt==="coerce"?new rs(Rt,[yt]):yt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=C[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[pe];if(be){var Me=be.parse(C,this);if(!Me)return null;if(this.expectedType){var Fe=this.expectedType,tt=Me.type;if((Fe.kind==="string"||Fe.kind==="number"||Fe.kind==="boolean"||Fe.kind==="object"||Fe.kind==="array")&&tt.kind==="value")Me=te(Me,Fe,N.typeAnnotation||"assert");else if((Fe.kind==="color"||Fe.kind==="formatted"||Fe.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Me=te(Me,Fe,N.typeAnnotation||"coerce");else if(this.checkSubtype(Fe,tt))return null}if(!(Me instanceof Ji)&&Me.type.kind!=="resolvedImage"&&lu(Me)){var ct=new js;try{Me=new Ji(Me.type,Me.evaluate(ct))}catch(yt){return this.error(yt.message),null}}return Me}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Eo.prototype.concat=function(C,N,te){var pe=typeof C=="number"?this.path.concat(C):this.path,be=te?this.scope.concat(te):this.scope;return new Eo(this.registry,pe,N||null,be,this.errors)},Eo.prototype.error=function(C){for(var N=[],te=arguments.length-1;te-- >0;)N[te]=arguments[te+1];var pe=""+this.key+N.map(function(be){return"["+be+"]"}).join("");this.errors.push(new Kn(pe,C))},Eo.prototype.checkSubtype=function(C,N){var te=Ws(C,N);return te&&this.error(te),te};function lu(E){if(E instanceof Ts)return lu(E.boundExpression);if(E instanceof ko&&E.name==="error")return!1;if(E instanceof Zs)return!1;if(E instanceof ns)return!1;var C=E instanceof rs||E instanceof Qi,N=!0;return E.eachChild(function(te){C?N=N&&lu(te):N=N&&te instanceof Ji}),N?El(E)&&Au(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Rs(E,C){for(var N=E.length-1,te=0,pe=N,be=0,Me,Fe;te<=pe;)if(be=Math.floor((te+pe)/2),Me=E[be],Fe=E[be+1],Me<=C){if(be===N||C<Fe)return be;te=be+1}else if(Me>C)pe=be-1;else throw new Fi("Input is not a number.");return 0}var Is=function(C,N,te){this.type=C,this.input=N,this.labels=[],this.outputs=[];for(var pe=0,be=te;pe<be.length;pe+=1){var Me=be[pe],Fe=Me[0],tt=Me[1];this.labels.push(Fe),this.outputs.push(tt)}};Is.parse=function(C,N){if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return N.error("Expected an even number of arguments.");var te=N.parse(C[1],1,mn);if(!te)return null;var pe=[],be=null;N.expectedType&&N.expectedType.kind!=="value"&&(be=N.expectedType);for(var Me=1;Me<C.length;Me+=2){var Fe=Me===1?-1/0:C[Me],tt=C[Me+1],ct=Me,yt=Me+1;if(typeof Fe!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(pe.length&&pe[pe.length-1][0]>=Fe)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Rt=N.parse(tt,yt,be);if(!Rt)return null;be=be||Rt.type,pe.push([Fe,Rt])}return new Is(be,te,pe)},Is.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=N[0])return te[0].evaluate(C);var be=N.length;if(pe>=N[be-1])return te[be-1].evaluate(C);var Me=Rs(N,pe);return te[Me].evaluate(C)},Is.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var pe=te[N];C(pe)}},Is.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Is.prototype.serialize=function(){for(var C=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&C.push(this.labels[N]),C.push(this.outputs[N].serialize());return C};function lo(E,C,N){return E*(1-N)+C*N}function Vl(E,C,N){return new hi(lo(E.r,C.r,N),lo(E.g,C.g,N),lo(E.b,C.b,N),lo(E.a,C.a,N))}function Hl(E,C,N){return E.map(function(te,pe){return lo(te,C[pe],N)})}var fl=Object.freeze({__proto__:null,number:lo,color:Vl,array:Hl}),As=.95047,Gl=1,Ll=1.08883,uu=4/29,Yl=6/29,cl=3*Yl*Yl,df=Yl*Yl*Yl,fs=Math.PI/180,zf=180/Math.PI;function Mu(E){return E>df?Math.pow(E,1/3):E/cl+uu}function Pl(E){return E>Yl?E*E*E:cl*(E-uu)}function Wl(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function hl(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function Xl(E){var C=hl(E.r),N=hl(E.g),te=hl(E.b),pe=Mu((.4124564*C+.3575761*N+.1804375*te)/As),be=Mu((.2126729*C+.7151522*N+.072175*te)/Gl),Me=Mu((.0193339*C+.119192*N+.9503041*te)/Ll);return{l:116*be-16,a:500*(pe-be),b:200*(be-Me),alpha:E.a}}function Wu(E){var C=(E.l+16)/116,N=isNaN(E.a)?C:C+E.a/500,te=isNaN(E.b)?C:C-E.b/200;return C=Gl*Pl(C),N=As*Pl(N),te=Ll*Pl(te),new hi(Wl(3.2404542*N-1.5371385*C-.4985314*te),Wl(-.969266*N+1.8760108*C+.041556*te),Wl(.0556434*N-.2040259*C+1.0572252*te),E.alpha)}function Xu(E,C,N){return{l:lo(E.l,C.l,N),a:lo(E.a,C.a,N),b:lo(E.b,C.b,N),alpha:lo(E.alpha,C.alpha,N)}}function Ff(E){var C=Xl(E),N=C.l,te=C.a,pe=C.b,be=Math.atan2(pe,te)*zf;return{h:be<0?be+360:be,c:Math.sqrt(te*te+pe*pe),l:N,alpha:E.a}}function Ri(E){var C=E.h*fs,N=E.c,te=E.l;return Wu({l:te,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:E.alpha})}function Dl(E,C,N){var te=C-E;return E+N*(te>180||te<-180?te-360*Math.round(te/360):te)}function vl(E,C,N){return{h:Dl(E.h,C.h,N),c:lo(E.c,C.c,N),l:lo(E.l,C.l,N),alpha:lo(E.alpha,C.alpha,N)}}var as={forward:Xl,reverse:Wu,interpolate:Xu},cs={forward:Ff,reverse:Ri,interpolate:vl},jl=Object.freeze({__proto__:null,lab:as,hcl:cs}),uo=function(C,N,te,pe,be){this.type=C,this.operator=N,this.interpolation=te,this.input=pe,this.labels=[],this.outputs=[];for(var Me=0,Fe=be;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt[0],yt=tt[1];this.labels.push(ct),this.outputs.push(yt)}};uo.interpolationFactor=function(C,N,te,pe){var be=0;if(C.name==="exponential")be=ju(N,C.base,te,pe);else if(C.name==="linear")be=ju(N,1,te,pe);else if(C.name==="cubic-bezier"){var Me=C.controlPoints,Fe=new n(Me[0],Me[1],Me[2],Me[3]);be=Fe.solve(ju(N,1,te,pe))}return be},uo.parse=function(C,N){var te=C[0],pe=C[1],be=C[2],Me=C.slice(3);if(!Array.isArray(pe)||pe.length===0)return N.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Fe=pe[1];if(typeof Fe!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Fe}}else if(pe[0]==="cubic-bezier"){var tt=pe.slice(1);if(tt.length!==4||tt.some(function(qr){return typeof qr!="number"||qr<0||qr>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:tt}}else return N.error("Unknown interpolation type "+String(pe[0]),1,0);if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return N.error("Expected an even number of arguments.");if(be=N.parse(be,2,mn),!be)return null;var ct=[],yt=null;te==="interpolate-hcl"||te==="interpolate-lab"?yt=la:N.expectedType&&N.expectedType.kind!=="value"&&(yt=N.expectedType);for(var Rt=0;Rt<Me.length;Rt+=2){var Zt=Me[Rt],Ht=Me[Rt+1],lr=Rt+3,Ir=Rt+4;if(typeof Zt!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lr);if(ct.length&&ct[ct.length-1][0]>=Zt)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lr);var ln=N.parse(Ht,Ir,yt);if(!ln)return null;yt=yt||ln.type,ct.push([Zt,ln])}return yt.kind!=="number"&&yt.kind!=="color"&&!(yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number")?N.error("Type "+Pi(yt)+" is not interpolatable."):new uo(yt,te,pe,be,ct)},uo.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=N[0])return te[0].evaluate(C);var be=N.length;if(pe>=N[be-1])return te[be-1].evaluate(C);var Me=Rs(N,pe),Fe=N[Me],tt=N[Me+1],ct=uo.interpolationFactor(this.interpolation,pe,Fe,tt),yt=te[Me].evaluate(C),Rt=te[Me+1].evaluate(C);return this.operator==="interpolate"?fl[this.type.kind.toLowerCase()](yt,Rt,ct):this.operator==="interpolate-hcl"?cs.reverse(cs.interpolate(cs.forward(yt),cs.forward(Rt),ct)):as.reverse(as.interpolate(as.forward(yt),as.forward(Rt),ct))},uo.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var pe=te[N];C(pe)}},uo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},uo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,C,this.input.serialize()],te=0;te<this.labels.length;te++)N.push(this.labels[te],this.outputs[te].serialize());return N};function ju(E,C,N,te){var pe=te-N,be=E-N;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var hs=function(C,N){this.type=C,this.args=N};hs.parse=function(C,N){if(C.length<2)return N.error("Expectected at least one argument.");var te=null,pe=N.expectedType;pe&&pe.kind!=="value"&&(te=pe);for(var be=[],Me=0,Fe=C.slice(1);Me<Fe.length;Me+=1){var tt=Fe[Me],ct=N.parse(tt,1+be.length,te,void 0,{typeAnnotation:"omit"});if(!ct)return null;te=te||ct.type,be.push(ct)}var yt=pe&&be.some(function(Rt){return Ws(pe,Rt.type)});return yt?new hs(ka,be):new hs(te,be)},hs.prototype.evaluate=function(C){for(var N=null,te=0,pe,be=0,Me=this.args;be<Me.length;be+=1){var Fe=Me[be];if(te++,N=Fe.evaluate(C),N&&N instanceof So&&!N.available&&(pe||(pe=N.name),N=null,te===this.args.length&&(N=pe)),N!==null)break}return N},hs.prototype.eachChild=function(C){this.args.forEach(C)},hs.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},hs.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(N){C.push(N.serialize())}),C};var Ks=function(C,N){this.type=N.type,this.bindings=[].concat(C),this.result=N};Ks.prototype.evaluate=function(C){return this.result.evaluate(C)},Ks.prototype.eachChild=function(C){for(var N=0,te=this.bindings;N<te.length;N+=1){var pe=te[N];C(pe[1])}C(this.result)},Ks.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var te=[],pe=1;pe<C.length-1;pe+=2){var be=C[pe];if(typeof be!="string")return N.error("Expected string, but found "+typeof be+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(be))return N.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Me=N.parse(C[pe+1],pe+1);if(!Me)return null;te.push([be,Me])}var Fe=N.parse(C[C.length-1],C.length-1,N.expectedType,te);return Fe?new Ks(te,Fe):null},Ks.prototype.outputDefined=function(){return this.result.outputDefined()},Ks.prototype.serialize=function(){for(var C=["let"],N=0,te=this.bindings;N<te.length;N+=1){var pe=te[N],be=pe[0],Me=pe[1];C.push(be,Me.serialize())}return C.push(this.result.serialize()),C};var Js=function(C,N,te){this.type=C,this.index=N,this.input=te};Js.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,mn),pe=N.parse(C[2],2,eo(N.expectedType||ka));if(!te||!pe)return null;var be=pe.type;return new Js(be.itemType,te,pe)},Js.prototype.evaluate=function(C){var N=this.index.evaluate(C),te=this.input.evaluate(C);if(N<0)throw new Fi("Array index out of bounds: "+N+" < 0.");if(N>=te.length)throw new Fi("Array index out of bounds: "+N+" > "+(te.length-1)+".");if(N!==Math.floor(N))throw new Fi("Array index must be an integer, but found "+N+" instead.");return te[N]},Js.prototype.eachChild=function(C){C(this.index),C(this.input)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var zs=function(C,N){this.type=Yn,this.needle=C,this.haystack=N};zs.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,ka);return!te||!pe?null:ts(te.type,[Yn,Rn,mn,Bn,ka])?new zs(te,pe):N.error("Expected first argument to be of type boolean, string, number or null, but found "+Pi(te.type)+" instead")},zs.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!te)return!1;if(!Ml(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Pi(Di(N))+" instead.");if(!Ml(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Pi(Di(te))+" instead.");return te.indexOf(N)>=0},zs.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},zs.prototype.outputDefined=function(){return!0},zs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vs=function(C,N,te){this.type=mn,this.needle=C,this.haystack=N,this.fromIndex=te};vs.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,ka);if(!te||!pe)return null;if(!ts(te.type,[Yn,Rn,mn,Bn,ka]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+Pi(te.type)+" instead");if(C.length===4){var be=N.parse(C[3],3,mn);return be?new vs(te,pe,be):null}else return new vs(te,pe)},vs.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!Ml(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Pi(Di(N))+" instead.");if(!Ml(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Pi(Di(te))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(C);return te.indexOf(N,pe)}return te.indexOf(N)},vs.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Vi=function(C,N,te,pe,be,Me){this.inputType=C,this.type=N,this.input=te,this.cases=pe,this.outputs=be,this.otherwise=Me};Vi.parse=function(C,N){if(C.length<5)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return N.error("Expected an even number of arguments.");var te,pe;N.expectedType&&N.expectedType.kind!=="value"&&(pe=N.expectedType);for(var be={},Me=[],Fe=2;Fe<C.length-1;Fe+=2){var tt=C[Fe],ct=C[Fe+1];Array.isArray(tt)||(tt=[tt]);var yt=N.concat(Fe);if(tt.length===0)return yt.error("Expected at least one branch label.");for(var Rt=0,Zt=tt;Rt<Zt.length;Rt+=1){var Ht=Zt[Rt];if(typeof Ht!="number"&&typeof Ht!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof Ht=="number"&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ht=="number"&&Math.floor(Ht)!==Ht)return yt.error("Numeric branch labels must be integer values.");if(!te)te=Di(Ht);else if(yt.checkSubtype(te,Di(Ht)))return null;if(typeof be[String(Ht)]!="undefined")return yt.error("Branch labels must be unique.");be[String(Ht)]=Me.length}var lr=N.parse(ct,Fe,pe);if(!lr)return null;pe=pe||lr.type,Me.push(lr)}var Ir=N.parse(C[1],1,ka);if(!Ir)return null;var ln=N.parse(C[C.length-1],C.length-1,pe);return!ln||Ir.type.kind!=="value"&&N.concat(1).checkSubtype(te,Ir.type)?null:new Vi(te,pe,Ir,be,Me,ln)},Vi.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=Di(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return te.evaluate(C)},Vi.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Vi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Vi.prototype.serialize=function(){for(var C=this,N=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),pe=[],be={},Me=0,Fe=te;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=be[this.cases[tt]];ct===void 0?(be[this.cases[tt]]=pe.length,pe.push([this.cases[tt],[tt]])):pe[ct][1].push(tt)}for(var yt=function(Ir){return C.inputType.kind==="number"?Number(Ir):Ir},Rt=0,Zt=pe;Rt<Zt.length;Rt+=1){var Ht=Zt[Rt],ct=Ht[0],lr=Ht[1];lr.length===1?N.push(yt(lr[0])):N.push(lr.map(yt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Co=function(C,N,te){this.type=C,this.branches=N,this.otherwise=te};Co.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return N.error("Expected an odd number of arguments.");var te;N.expectedType&&N.expectedType.kind!=="value"&&(te=N.expectedType);for(var pe=[],be=1;be<C.length-1;be+=2){var Me=N.parse(C[be],be,Yn);if(!Me)return null;var Fe=N.parse(C[be+1],be+1,te);if(!Fe)return null;pe.push([Me,Fe]),te=te||Fe.type}var tt=N.parse(C[C.length-1],C.length-1,te);return tt?new Co(te,pe,tt):null},Co.prototype.evaluate=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var pe=te[N],be=pe[0],Me=pe[1];if(be.evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},Co.prototype.eachChild=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var pe=te[N],be=pe[0],Me=pe[1];C(be),C(Me)}C(this.otherwise)},Co.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var N=C[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Co.prototype.serialize=function(){var C=["case"];return this.eachChild(function(N){C.push(N.serialize())}),C};var ps=function(C,N,te,pe){this.type=C,this.input=N,this.beginIndex=te,this.endIndex=pe};ps.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,mn);if(!te||!pe)return null;if(!ts(te.type,[eo(ka),Rn,ka]))return N.error("Expected first argument to be of type array or string, but found "+Pi(te.type)+" instead");if(C.length===4){var be=N.parse(C[3],3,mn);return be?new ps(te.type,te,pe,be):null}else return new ps(te.type,te,pe)},ps.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=this.beginIndex.evaluate(C);if(!Ml(N,["string","array"]))throw new Fi("Expected first argument to be of type array or string, but found "+Pi(Di(N))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(C);return N.slice(te,pe)}return N.slice(te)},ps.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Zu(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function fu(E,C,N){return C===N}function Ku(E,C,N){return C!==N}function xt(E,C,N){return C<N}function It(E,C,N){return C>N}function nr(E,C,N){return C<=N}function Jt(E,C,N){return C>=N}function Cr(E,C,N,te){return te.compare(C,N)===0}function an(E,C,N,te){return!Cr(E,C,N,te)}function dn(E,C,N,te){return te.compare(C,N)<0}function Tn(E,C,N,te){return te.compare(C,N)>0}function Cn(E,C,N,te){return te.compare(C,N)<=0}function Hn(E,C,N,te){return te.compare(C,N)>=0}function xn(E,C,N){var te=E!=="=="&&E!=="!=";return function(){function pe(be,Me,Fe){this.type=Yn,this.lhs=be,this.rhs=Me,this.collator=Fe,this.hasUntypedArgument=be.type.kind==="value"||Me.type.kind==="value"}return pe.parse=function(Me,Fe){if(Me.length!==3&&Me.length!==4)return Fe.error("Expected two or three arguments.");var tt=Me[0],ct=Fe.parse(Me[1],1,ka);if(!ct)return null;if(!Zu(tt,ct.type))return Fe.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Pi(ct.type)+"'.");var yt=Fe.parse(Me[2],2,ka);if(!yt)return null;if(!Zu(tt,yt.type))return Fe.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Pi(yt.type)+"'.");if(ct.type.kind!==yt.type.kind&&ct.type.kind!=="value"&&yt.type.kind!=="value")return Fe.error("Cannot compare types '"+Pi(ct.type)+"' and '"+Pi(yt.type)+"'.");te&&(ct.type.kind==="value"&&yt.type.kind!=="value"?ct=new Qi(yt.type,[ct]):ct.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new Qi(ct.type,[yt])));var Rt=null;if(Me.length===4){if(ct.type.kind!=="string"&&yt.type.kind!=="string"&&ct.type.kind!=="value"&&yt.type.kind!=="value")return Fe.error("Cannot use collator to compare non-string types.");if(Rt=Fe.parse(Me[3],3,No),!Rt)return null}return new pe(ct,yt,Rt)},pe.prototype.evaluate=function(Me){var Fe=this.lhs.evaluate(Me),tt=this.rhs.evaluate(Me);if(te&&this.hasUntypedArgument){var ct=Di(Fe),yt=Di(tt);if(ct.kind!==yt.kind||!(ct.kind==="string"||ct.kind==="number"))throw new Fi('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+yt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Rt=Di(Fe),Zt=Di(tt);if(Rt.kind!=="string"||Zt.kind!=="string")return C(Me,Fe,tt)}return this.collator?N(Me,Fe,tt,this.collator.evaluate(Me)):C(Me,Fe,tt)},pe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Me=[E];return this.eachChild(function(Fe){Me.push(Fe.serialize())}),Me},pe}()}var In=xn("==",fu,Cr),Ln=xn("!=",Ku,an),Wn=xn("<",xt,dn),qn=xn(">",It,Tn),Oa=xn("<=",nr,Cn),La=xn(">=",Jt,Hn),Na=function(C,N,te,pe,be){this.type=Rn,this.number=C,this.locale=N,this.currency=te,this.minFractionDigits=pe,this.maxFractionDigits=be};Na.parse=function(C,N){if(C.length!==3)return N.error("Expected two arguments.");var te=N.parse(C[1],1,mn);if(!te)return null;var pe=C[2];if(typeof pe!="object"||Array.isArray(pe))return N.error("NumberFormat options argument must be an object.");var be=null;if(pe.locale&&(be=N.parse(pe.locale,1,Rn),!be))return null;var Me=null;if(pe.currency&&(Me=N.parse(pe.currency,1,Rn),!Me))return null;var Fe=null;if(pe["min-fraction-digits"]&&(Fe=N.parse(pe["min-fraction-digits"],1,mn),!Fe))return null;var tt=null;return pe["max-fraction-digits"]&&(tt=N.parse(pe["max-fraction-digits"],1,mn),!tt)?null:new Na(te,be,Me,Fe,tt)},Na.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Na.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Ba=function(C){this.type=mn,this.input=C};Ba.parse=function(C,N){if(C.length!==2)return N.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+Pi(te.type)+" instead."):new Ba(te):null},Ba.prototype.evaluate=function(C){var N=this.input.evaluate(C);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Fi("Expected value to be of type string or array, but found "+Pi(Di(N))+" instead.")},Ba.prototype.eachChild=function(C){C(this.input)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){var C=["length"];return this.eachChild(function(N){C.push(N.serialize())}),C};var Qn={"==":In,"!=":Ln,">":qn,"<":Wn,">=":La,"<=":Oa,array:Qi,at:Js,boolean:Qi,case:Co,coalesce:hs,collator:Zs,format:us,image:sl,in:zs,"index-of":vs,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:Ba,let:Ks,literal:Ji,match:Vi,number:Qi,"number-format":Na,object:Qi,slice:ps,step:Is,string:Qi,"to-boolean":rs,"to-color":rs,"to-number":rs,"to-string":rs,var:Ts,within:ns};function pa(E,C){var N=C[0],te=C[1],pe=C[2],be=C[3];N=N.evaluate(E),te=te.evaluate(E),pe=pe.evaluate(E);var Me=be?be.evaluate(E):1,Fe=Bl(N,te,pe,Me);if(Fe)throw new Fi(Fe);return new hi(N/255*Me,te/255*Me,pe/255*Me,Me)}function Ya(E,C){return E in C}function Qa(E,C){var N=C[E];return typeof N=="undefined"?null:N}function pi(E,C,N,te){for(;N<=te;){var pe=N+te>>1;if(C[pe]===E)return!0;C[pe]>E?te=pe-1:N=pe+1}return!1}function di(E){return{type:E}}ko.register(Qn,{error:[il,[Rn],function(E,C){var N=C[0];throw new Fi(N.evaluate(E))}],typeof:[Rn,[ka],function(E,C){var N=C[0];return Pi(Di(N.evaluate(E)))}],"to-rgba":[eo(mn,4),[la],function(E,C){var N=C[0];return N.evaluate(E).toArray()}],rgb:[la,[mn,mn,mn],pa],rgba:[la,[mn,mn,mn,mn],pa],has:{type:Yn,overloads:[[[Rn],function(E,C){var N=C[0];return Ya(N.evaluate(E),E.properties())}],[[Rn,Ga],function(E,C){var N=C[0],te=C[1];return Ya(N.evaluate(E),te.evaluate(E))}]]},get:{type:ka,overloads:[[[Rn],function(E,C){var N=C[0];return Qa(N.evaluate(E),E.properties())}],[[Rn,Ga],function(E,C){var N=C[0],te=C[1];return Qa(N.evaluate(E),te.evaluate(E))}]]},"feature-state":[ka,[Rn],function(E,C){var N=C[0];return Qa(N.evaluate(E),E.featureState||{})}],properties:[Ga,[],function(E){return E.properties()}],"geometry-type":[Rn,[],function(E){return E.geometryType()}],id:[ka,[],function(E){return E.id()}],zoom:[mn,[],function(E){return E.globals.zoom}],"heatmap-density":[mn,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[mn,[],function(E){return E.globals.lineProgress||0}],accumulated:[ka,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[mn,di(mn),function(E,C){for(var N=0,te=0,pe=C;te<pe.length;te+=1){var be=pe[te];N+=be.evaluate(E)}return N}],"*":[mn,di(mn),function(E,C){for(var N=1,te=0,pe=C;te<pe.length;te+=1){var be=pe[te];N*=be.evaluate(E)}return N}],"-":{type:mn,overloads:[[[mn,mn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)-te.evaluate(E)}],[[mn],function(E,C){var N=C[0];return-N.evaluate(E)}]]},"/":[mn,[mn,mn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)/te.evaluate(E)}],"%":[mn,[mn,mn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)%te.evaluate(E)}],ln2:[mn,[],function(){return Math.LN2}],pi:[mn,[],function(){return Math.PI}],e:[mn,[],function(){return Math.E}],"^":[mn,[mn,mn],function(E,C){var N=C[0],te=C[1];return Math.pow(N.evaluate(E),te.evaluate(E))}],sqrt:[mn,[mn],function(E,C){var N=C[0];return Math.sqrt(N.evaluate(E))}],log10:[mn,[mn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))/Math.LN10}],ln:[mn,[mn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))}],log2:[mn,[mn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))/Math.LN2}],sin:[mn,[mn],function(E,C){var N=C[0];return Math.sin(N.evaluate(E))}],cos:[mn,[mn],function(E,C){var N=C[0];return Math.cos(N.evaluate(E))}],tan:[mn,[mn],function(E,C){var N=C[0];return Math.tan(N.evaluate(E))}],asin:[mn,[mn],function(E,C){var N=C[0];return Math.asin(N.evaluate(E))}],acos:[mn,[mn],function(E,C){var N=C[0];return Math.acos(N.evaluate(E))}],atan:[mn,[mn],function(E,C){var N=C[0];return Math.atan(N.evaluate(E))}],min:[mn,di(mn),function(E,C){return Math.min.apply(Math,C.map(function(N){return N.evaluate(E)}))}],max:[mn,di(mn),function(E,C){return Math.max.apply(Math,C.map(function(N){return N.evaluate(E)}))}],abs:[mn,[mn],function(E,C){var N=C[0];return Math.abs(N.evaluate(E))}],round:[mn,[mn],function(E,C){var N=C[0],te=N.evaluate(E);return te<0?-Math.round(-te):Math.round(te)}],floor:[mn,[mn],function(E,C){var N=C[0];return Math.floor(N.evaluate(E))}],ceil:[mn,[mn],function(E,C){var N=C[0];return Math.ceil(N.evaluate(E))}],"filter-==":[Yn,[Rn,ka],function(E,C){var N=C[0],te=C[1];return E.properties()[N.value]===te.value}],"filter-id-==":[Yn,[ka],function(E,C){var N=C[0];return E.id()===N.value}],"filter-type-==":[Yn,[Rn],function(E,C){var N=C[0];return E.geometryType()===N.value}],"filter-<":[Yn,[Rn,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe<be}],"filter-id-<":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te<pe}],"filter->":[Yn,[Rn,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe>be}],"filter-id->":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te>pe}],"filter-<=":[Yn,[Rn,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe<=be}],"filter-id-<=":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te<=pe}],"filter->=":[Yn,[Rn,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe>=be}],"filter-id->=":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te>=pe}],"filter-has":[Yn,[ka],function(E,C){var N=C[0];return N.value in E.properties()}],"filter-has-id":[Yn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[Yn,[eo(Rn)],function(E,C){var N=C[0];return N.value.indexOf(E.geometryType())>=0}],"filter-id-in":[Yn,[eo(ka)],function(E,C){var N=C[0];return N.value.indexOf(E.id())>=0}],"filter-in-small":[Yn,[Rn,eo(ka)],function(E,C){var N=C[0],te=C[1];return te.value.indexOf(E.properties()[N.value])>=0}],"filter-in-large":[Yn,[Rn,eo(ka)],function(E,C){var N=C[0],te=C[1];return pi(E.properties()[N.value],te.value,0,te.value.length-1)}],all:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)&&te.evaluate(E)}],[di(Yn),function(E,C){for(var N=0,te=C;N<te.length;N+=1){var pe=te[N];if(!pe.evaluate(E))return!1}return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)||te.evaluate(E)}],[di(Yn),function(E,C){for(var N=0,te=C;N<te.length;N+=1){var pe=te[N];if(pe.evaluate(E))return!0}return!1}]]},"!":[Yn,[Yn],function(E,C){var N=C[0];return!N.evaluate(E)}],"is-supported-script":[Yn,[Rn],function(E,C){var N=C[0],te=E.globals&&E.globals.isSupportedScript;return te?te(N.evaluate(E)):!0}],upcase:[Rn,[Rn],function(E,C){var N=C[0];return N.evaluate(E).toUpperCase()}],downcase:[Rn,[Rn],function(E,C){var N=C[0];return N.evaluate(E).toLowerCase()}],concat:[Rn,di(ka),function(E,C){return C.map(function(N){return Sl(N.evaluate(E))}).join("")}],"resolved-locale":[Rn,[No],function(E,C){var N=C[0];return N.evaluate(E).resolvedLocale()}]});function yi(E){return{result:"success",value:E}}function Ti(E){return{result:"error",value:E}}function oi(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function mo(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function to(E){return!!E.expression&&E.expression.interpolated}function Ka(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function ga(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function mi(E){return E}function fo(E,C){var N=C.type==="color",te=E.stops&&typeof E.stops[0][0]=="object",pe=te||E.property!==void 0,be=te||!pe,Me=E.type||(to(C)?"exponential":"interval");if(N&&(E=Jr({},E),E.stops&&(E.stops=E.stops.map(function(aa){return[aa[0],hi.parse(aa[1])]})),E.default?E.default=hi.parse(E.default):E.default=hi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!jl[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Fe,tt,ct;if(Me==="exponential")Fe=Bo;else if(Me==="interval")Fe=Fs;else if(Me==="categorical"){Fe=ds,tt=Object.create(null);for(var yt=0,Rt=E.stops;yt<Rt.length;yt+=1){var Zt=Rt[yt];tt[Zt[0]]=Zt[1]}ct=typeof E.stops[0][0]}else if(Me==="identity")Fe=pl;else throw new Error('Unknown function type "'+Me+'"');if(te){for(var Ht={},lr=[],Ir=0;Ir<E.stops.length;Ir++){var ln=E.stops[Ir],qr=ln[0].zoom;Ht[qr]===void 0&&(Ht[qr]={zoom:qr,type:E.type,property:E.property,default:E.default,stops:[]},lr.push(qr)),Ht[qr].stops.push([ln[0].value,ln[1]])}for(var Mn=[],bn=0,An=lr;bn<An.length;bn+=1){var Dn=An[bn];Mn.push([Ht[Dn].zoom,fo(Ht[Dn],C)])}var Xn={name:"linear"};return{kind:"composite",interpolationType:Xn,interpolationFactor:uo.interpolationFactor.bind(void 0,Xn),zoomStops:Mn.map(function(aa){return aa[0]}),evaluate:function(za,Ta){var Sa=za.zoom;return Bo({stops:Mn,base:E.base},C,Sa).evaluate(Sa,Ta)}}}else if(be){var sa=Me==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:sa,interpolationFactor:uo.interpolationFactor.bind(void 0,sa),zoomStops:E.stops.map(function(aa){return aa[0]}),evaluate:function(aa){var za=aa.zoom;return Fe(E,C,za,tt,ct)}}}else return{kind:"source",evaluate:function(za,Ta){var Sa=Ta&&Ta.properties?Ta.properties[E.property]:void 0;return Sa===void 0?po(E.default,C.default):Fe(E,C,Sa,tt,ct)}}}function po(E,C,N){if(E!==void 0)return E;if(C!==void 0)return C;if(N!==void 0)return N}function ds(E,C,N,te,pe){var be=typeof N===pe?te[N]:void 0;return po(be,E.default,C.default)}function Fs(E,C,N){if(Ka(N)!=="number")return po(E.default,C.default);var te=E.stops.length;if(te===1||N<=E.stops[0][0])return E.stops[0][1];if(N>=E.stops[te-1][0])return E.stops[te-1][1];var pe=Rs(E.stops.map(function(be){return be[0]}),N);return E.stops[pe][1]}function Bo(E,C,N){var te=E.base!==void 0?E.base:1;if(Ka(N)!=="number")return po(E.default,C.default);var pe=E.stops.length;if(pe===1||N<=E.stops[0][0])return E.stops[0][1];if(N>=E.stops[pe-1][0])return E.stops[pe-1][1];var be=Rs(E.stops.map(function(Rt){return Rt[0]}),N),Me=Ms(N,te,E.stops[be][0],E.stops[be+1][0]),Fe=E.stops[be][1],tt=E.stops[be+1][1],ct=fl[C.type]||mi;if(E.colorSpace&&E.colorSpace!=="rgb"){var yt=jl[E.colorSpace];ct=function(Rt,Zt){return yt.reverse(yt.interpolate(yt.forward(Rt),yt.forward(Zt),Me))}}return typeof Fe.evaluate=="function"?{evaluate:function(){for(var Zt=[],Ht=arguments.length;Ht--;)Zt[Ht]=arguments[Ht];var lr=Fe.evaluate.apply(void 0,Zt),Ir=tt.evaluate.apply(void 0,Zt);if(!(lr===void 0||Ir===void 0))return ct(lr,Ir,Me)}}:ct(Fe,tt,Me)}function pl(E,C,N){return C.type==="color"?N=hi.parse(N):C.type==="formatted"?N=Ui.fromString(N.toString()):C.type==="resolvedImage"?N=So.fromString(N.toString()):Ka(N)!==C.type&&(C.type!=="enum"||!C.values[N])&&(N=void 0),po(N,E.default,C.default)}function Ms(E,C,N,te){var pe=te-N,be=E-N;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var gs=function(C,N){this.expression=C,this._warningHistory={},this._evaluator=new js,this._defaultValue=N?yf(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};gs.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Me){return this._evaluator.globals=C,this._evaluator.feature=N,this._evaluator.featureState=te,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},gs.prototype.evaluate=function(C,N,te,pe,be,Me){this._evaluator.globals=C,this._evaluator.feature=N||null,this._evaluator.featureState=te||null,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me||null;try{var Fe=this.expression.evaluate(this._evaluator);if(Fe==null||typeof Fe=="number"&&Fe!==Fe)return this._defaultValue;if(this._enumValues&&!(Fe in this._enumValues))throw new Fi("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Fe)+" instead.");return Fe}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console!="undefined"&&console.warn(tt.message)),this._defaultValue}};function xo(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in Qn}function cu(E,C){var N=new Eo(Qn,[],C?Qu(C):void 0),te=N.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?yi(new gs(te,C)):Ti(N.errors)}var Su=function(C,N){this.kind=C,this._styleExpression=N,this.isStateDependent=C!=="constant"&&!Cl(N.expression)};Su.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,pe,be,Me)},Su.prototype.evaluate=function(C,N,te,pe,be,Me){return this._styleExpression.evaluate(C,N,te,pe,be,Me)};var ys=function(C,N,te,pe){this.kind=C,this.zoomStops=te,this._styleExpression=N,this.isStateDependent=C!=="camera"&&!Cl(N.expression),this.interpolationType=pe};ys.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,pe,be,Me)},ys.prototype.evaluate=function(C,N,te,pe,be,Me){return this._styleExpression.evaluate(C,N,te,pe,be,Me)},ys.prototype.interpolationFactor=function(C,N,te){return this.interpolationType?uo.interpolationFactor(this.interpolationType,C,N,te):0};function Ju(E,C){if(E=cu(E,C),E.result==="error")return E;var N=E.value.expression,te=El(N);if(!te&&!oi(C))return Ti([new Kn("","data expressions not supported")]);var pe=Au(N,["zoom"]);if(!pe&&!mo(C))return Ti([new Kn("","zoom expressions not supported")]);var be=gf(N);if(!be&&!pe)return Ti([new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(be instanceof Kn)return Ti([be]);if(be instanceof uo&&!to(C))return Ti([new Kn("",'"interpolate" expressions cannot be used with this property')]);if(!be)return yi(te?new Su("constant",E.value):new Su("source",E.value));var Me=be instanceof uo?be.interpolation:void 0;return yi(te?new ys("camera",E.value,be.labels,Me):new ys("composite",E.value,be.labels,Me))}var hu=function(C,N){this._parameters=C,this._specification=N,Jr(this,fo(this._parameters,this._specification))};hu.deserialize=function(C){return new hu(C._parameters,C._specification)},hu.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function Lc(E,C){if(ga(E))return new hu(E,C);if(xo(E)){var N=Ju(E,C);if(N.result==="error")throw new Error(N.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return N.value}else{var te=E;return typeof E=="string"&&C.type==="color"&&(te=hi.parse(E)),{kind:"constant",evaluate:function(){return te}}}}function gf(E){var C=null;if(E instanceof Ks)C=gf(E.result);else if(E instanceof hs)for(var N=0,te=E.args;N<te.length;N+=1){var pe=te[N];if(C=gf(pe),C)break}else(E instanceof Is||E instanceof uo)&&E.input instanceof ko&&E.input.name==="zoom"&&(C=E);return C instanceof Kn||E.eachChild(function(be){var Me=gf(be);Me instanceof Kn?C=Me:!C&&Me?C=new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Me&&C!==Me&&(C=new Kn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function Qu(E){var C={color:la,string:Rn,number:mn,enum:Rn,boolean:Yn,formatted:es,resolvedImage:Ls};return E.type==="array"?eo(C[E.value]||ka,E.length):C[E.type]}function yf(E){return E.type==="color"&&ga(E.default)?new hi(0,0,0,0):E.type==="color"?hi.parse(E.default)||null:E.default===void 0?null:E.default}function Os(E){var C=E.key,N=E.value,te=E.valueSpec||{},pe=E.objectElementValidators||{},be=E.style,Me=E.styleSpec,Fe=[],tt=Ka(N);if(tt!=="object")return[new ar(C,N,"object expected, "+tt+" found")];for(var ct in N){var yt=ct.split(".")[0],Rt=te[yt]||te["*"],Zt=void 0;if(pe[yt])Zt=pe[yt];else if(te[yt])Zt=fi;else if(pe["*"])Zt=pe["*"];else if(te["*"])Zt=fi;else{Fe.push(new ar(C,N[ct],'unknown property "'+ct+'"'));continue}Fe=Fe.concat(Zt({key:(C&&C+".")+ct,value:N[ct],valueSpec:Rt,style:be,styleSpec:Me,object:N,objectKey:ct},N))}for(var Ht in te)pe[Ht]||te[Ht].required&&te[Ht].default===void 0&&N[Ht]===void 0&&Fe.push(new ar(C,N,'missing required property "'+Ht+'"'));return Fe}function Of(E){var C=E.value,N=E.valueSpec,te=E.style,pe=E.styleSpec,be=E.key,Me=E.arrayElementValidator||fi;if(Ka(C)!=="array")return[new ar(be,C,"array expected, "+Ka(C)+" found")];if(N.length&&C.length!==N.length)return[new ar(be,C,"array length "+N.length+" expected, length "+C.length+" found")];if(N["min-length"]&&C.length<N["min-length"])return[new ar(be,C,"array length at least "+N["min-length"]+" expected, length "+C.length+" found")];var Fe={type:N.value,values:N.values};pe.$version<7&&(Fe.function=N.function),Ka(N.value)==="object"&&(Fe=N.value);for(var tt=[],ct=0;ct<C.length;ct++)tt=tt.concat(Me({array:C,arrayIndex:ct,value:C[ct],valueSpec:Fe,style:te,styleSpec:pe,key:be+"["+ct+"]"}));return tt}function mf(E){var C=E.key,N=E.value,te=E.valueSpec,pe=Ka(N);return pe==="number"&&N!==N&&(pe="NaN"),pe!=="number"?[new ar(C,N,"number expected, "+pe+" found")]:"minimum"in te&&N<te.minimum?[new ar(C,N,N+" is less than the minimum value "+te.minimum)]:"maximum"in te&&N>te.maximum?[new ar(C,N,N+" is greater than the maximum value "+te.maximum)]:[]}function xf(E){var C=E.valueSpec,N=En(E.value.type),te,pe={},be,Me,Fe=N!=="categorical"&&E.value.property===void 0,tt=!Fe,ct=Ka(E.value.stops)==="array"&&Ka(E.value.stops[0])==="array"&&Ka(E.value.stops[0][0])==="object",yt=Os({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Rt,default:lr}});return N==="identity"&&Fe&&yt.push(new ar(E.key,E.value,'missing required property "property"')),N!=="identity"&&!E.value.stops&&yt.push(new ar(E.key,E.value,'missing required property "stops"')),N==="exponential"&&E.valueSpec.expression&&!to(E.valueSpec)&&yt.push(new ar(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(tt&&!oi(E.valueSpec)?yt.push(new ar(E.key,E.value,"property functions not supported")):Fe&&!mo(E.valueSpec)&&yt.push(new ar(E.key,E.value,"zoom functions not supported"))),(N==="categorical"||ct)&&E.value.property===void 0&&yt.push(new ar(E.key,E.value,'"property" property is required')),yt;function Rt(Ir){if(N==="identity")return[new ar(Ir.key,Ir.value,'identity function may not have a "stops" property')];var ln=[],qr=Ir.value;return ln=ln.concat(Of({key:Ir.key,value:qr,valueSpec:Ir.valueSpec,style:Ir.style,styleSpec:Ir.styleSpec,arrayElementValidator:Zt})),Ka(qr)==="array"&&qr.length===0&&ln.push(new ar(Ir.key,qr,"array must have at least one stop")),ln}function Zt(Ir){var ln=[],qr=Ir.value,Mn=Ir.key;if(Ka(qr)!=="array")return[new ar(Mn,qr,"array expected, "+Ka(qr)+" found")];if(qr.length!==2)return[new ar(Mn,qr,"array length 2 expected, length "+qr.length+" found")];if(ct){if(Ka(qr[0])!=="object")return[new ar(Mn,qr,"object expected, "+Ka(qr[0])+" found")];if(qr[0].zoom===void 0)return[new ar(Mn,qr,"object stop key must have zoom")];if(qr[0].value===void 0)return[new ar(Mn,qr,"object stop key must have value")];if(Me&&Me>En(qr[0].zoom))return[new ar(Mn,qr[0].zoom,"stop zoom values must appear in ascending order")];En(qr[0].zoom)!==Me&&(Me=En(qr[0].zoom),be=void 0,pe={}),ln=ln.concat(Os({key:Mn+"[0]",value:qr[0],valueSpec:{zoom:{}},style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{zoom:mf,value:Ht}}))}else ln=ln.concat(Ht({key:Mn+"[0]",value:qr[0],valueSpec:{},style:Ir.style,styleSpec:Ir.styleSpec},qr));return xo(Vn(qr[1]))?ln.concat([new ar(Mn+"[1]",qr[1],"expressions are not allowed in function stops.")]):ln.concat(fi({key:Mn+"[1]",value:qr[1],valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec}))}function Ht(Ir,ln){var qr=Ka(Ir.value),Mn=En(Ir.value),bn=Ir.value!==null?Ir.value:ln;if(!te)te=qr;else if(qr!==te)return[new ar(Ir.key,bn,qr+" stop domain type must match previous stop domain type "+te)];if(qr!=="number"&&qr!=="string"&&qr!=="boolean")return[new ar(Ir.key,bn,"stop domain value must be a number, string, or boolean")];if(qr!=="number"&&N!=="categorical"){var An="number expected, "+qr+" found";return oi(C)&&N===void 0&&(An+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ar(Ir.key,bn,An)]}return N==="categorical"&&qr==="number"&&(!isFinite(Mn)||Math.floor(Mn)!==Mn)?[new ar(Ir.key,bn,"integer expected, found "+Mn)]:N!=="categorical"&&qr==="number"&&be!==void 0&&Mn<be?[new ar(Ir.key,bn,"stop domain values must appear in ascending order")]:(be=Mn,N==="categorical"&&Mn in pe?[new ar(Ir.key,bn,"stop domain values must be unique")]:(pe[Mn]=!0,[]))}function lr(Ir){return fi({key:Ir.key,value:Ir.value,valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec})}}function Uo(E){var C=(E.expressionContext==="property"?Ju:cu)(Vn(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function(te){return new ar(""+E.key+te.key,E.value,te.message)});var N=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!N.outputDefined())return[new ar(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Cl(N))return[new ar(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Cl(N))return[new ar(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!Au(N,["zoom","feature-state"]))return[new ar(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!El(N))return[new ar(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bf(E){var C=E.value,N=E.key,te=Ka(C);return te!=="boolean"?[new ar(N,C,"boolean expected, "+te+" found")]:[]}function Jf(E){var C=E.key,N=E.value,te=Ka(N);return te!=="string"?[new ar(C,N,"color expected, "+te+" found")]:xu(N)===null?[new ar(C,N,'color expected, "'+N+'" found')]:[]}function Ss(E){var C=E.key,N=E.value,te=E.valueSpec,pe=[];return Array.isArray(te.values)?te.values.indexOf(En(N))===-1&&pe.push(new ar(C,N,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys(te.values).indexOf(En(N))===-1&&pe.push(new ar(C,N,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(N)+" found")),pe}function $u(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,N=E.slice(1);C<N.length;C+=1){var te=N[C];if(!$u(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var qu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _f(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};$u(E)||(E=nt(E));var C=cu(E,qu);if(C.result==="error")throw new Error(C.value.map(function(te){return te.key+": "+te.message}).join(", "));var N=We(E);return{filter:function(te,pe,be){return C.value.evaluate(te,pe,{},be)},needGeometry:N}}function ze(E,C){return E<C?-1:E>C?1:0}function We(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(We(E[C]))return!0;return!1}function nt(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var N=C==="=="?lt(E[1],E[2],"=="):C==="!="?qt(lt(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?lt(E[1],E[2],C):C==="any"?_t(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(nt)):C==="none"?["all"].concat(E.slice(1).map(nt).map(qt)):C==="in"?bt(E[1],E.slice(2)):C==="!in"?qt(bt(E[1],E.slice(2))):C==="has"?Tt(E[1]):C==="!has"?qt(Tt(E[1])):C==="within"?E:!0;return N}function lt(E,C,N){switch(E){case"$type":return["filter-type-"+N,C];case"$id":return["filter-id-"+N,C];default:return["filter-"+N,E,C]}}function _t(E){return["any"].concat(E.map(nt))}function bt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(N){return typeof N!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(ze)]]:["filter-in-small",E,["literal",C]]}}function Tt(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function qt(E){return["!",E]}function sr(E){return $u(Vn(E.value))?Uo(Jr({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qt(E)}function Qt(E){var C=E.value,N=E.key;if(Ka(C)!=="array")return[new ar(N,C,"array expected, "+Ka(C)+" found")];var te=E.styleSpec,pe,be=[];if(C.length<1)return[new ar(N,C,"filter array must have at least 1 element")];switch(be=be.concat(Ss({key:N+"[0]",value:C[0],valueSpec:te.filter_operator,style:E.style,styleSpec:E.styleSpec})),En(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&En(C[1])==="$type"&&be.push(new ar(N,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&be.push(new ar(N,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(pe=Ka(C[1]),pe!=="string"&&be.push(new ar(N+"[1]",C[1],"string expected, "+pe+" found")));for(var Me=2;Me<C.length;Me++)pe=Ka(C[Me]),En(C[1])==="$type"?be=be.concat(Ss({key:N+"["+Me+"]",value:C[Me],valueSpec:te.geometry_type,style:E.style,styleSpec:E.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&be.push(new ar(N+"["+Me+"]",C[Me],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Fe=1;Fe<C.length;Fe++)be=be.concat(Qt({key:N+"["+Fe+"]",value:C[Fe],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":pe=Ka(C[1]),C.length!==2?be.push(new ar(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="string"&&be.push(new ar(N+"[1]",C[1],"string expected, "+pe+" found"));break;case"within":pe=Ka(C[1]),C.length!==2?be.push(new ar(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="object"&&be.push(new ar(N+"[1]",C[1],"object expected, "+pe+" found"));break}return be}function fr(E,C){var N=E.key,te=E.style,pe=E.styleSpec,be=E.value,Me=E.objectKey,Fe=pe[C+"_"+E.layerType];if(!Fe)return[];var tt=Me.match(/^(.*)-transition$/);if(C==="paint"&&tt&&Fe[tt[1]]&&Fe[tt[1]].transition)return fi({key:N,value:be,valueSpec:pe.transition,style:te,styleSpec:pe});var ct=E.valueSpec||Fe[Me];if(!ct)return[new ar(N,be,'unknown property "'+Me+'"')];var yt;if(Ka(be)==="string"&&oi(ct)&&!ct.tokens&&(yt=/^{([^}]+)}$/.exec(be)))return[new ar(N,be,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Rt=[];return E.layerType==="symbol"&&(Me==="text-field"&&te&&!te.glyphs&&Rt.push(new ar(N,be,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&ga(Vn(be))&&En(be.type)==="identity"&&Rt.push(new ar(N,be,'"text-font" does not support identity functions'))),Rt.concat(fi({key:E.key,value:be,valueSpec:ct,style:te,styleSpec:pe,expressionContext:"property",propertyType:C,propertyKey:Me}))}function Er(E){return fr(E,"paint")}function Hr(E){return fr(E,"layout")}function en(E){var C=[],N=E.value,te=E.key,pe=E.style,be=E.styleSpec;!N.type&&!N.ref&&C.push(new ar(te,N,'either "type" or "ref" is required'));var Me=En(N.type),Fe=En(N.ref);if(N.id)for(var tt=En(N.id),ct=0;ct<E.arrayIndex;ct++){var yt=pe.layers[ct];En(yt.id)===tt&&C.push(new ar(te,N.id,'duplicate layer id "'+N.id+'", previously used at line '+yt.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(lr){lr in N&&C.push(new ar(te,N[lr],'"'+lr+'" is prohibited for ref layers'))});var Rt;pe.layers.forEach(function(lr){En(lr.id)===Fe&&(Rt=lr)}),Rt?Rt.ref?C.push(new ar(te,N.ref,"ref cannot reference another ref layer")):Me=En(Rt.type):C.push(new ar(te,N.ref,'ref layer "'+Fe+'" not found'))}else if(Me!=="background")if(!N.source)C.push(new ar(te,N,'missing required property "source"'));else{var Zt=pe.sources&&pe.sources[N.source],Ht=Zt&&En(Zt.type);Zt?Ht==="vector"&&Me==="raster"?C.push(new ar(te,N.source,'layer "'+N.id+'" requires a raster source')):Ht==="raster"&&Me!=="raster"?C.push(new ar(te,N.source,'layer "'+N.id+'" requires a vector source')):Ht==="vector"&&!N["source-layer"]?C.push(new ar(te,N,'layer "'+N.id+'" must specify a "source-layer"')):Ht==="raster-dem"&&Me!=="hillshade"?C.push(new ar(te,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&N.paint&&N.paint["line-gradient"]&&(Ht!=="geojson"||!Zt.lineMetrics)&&C.push(new ar(te,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new ar(te,N.source,'source "'+N.source+'" not found'))}return C=C.concat(Os({key:te,value:N,valueSpec:be.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return fi({key:te+".type",value:N.type,valueSpec:be.layer.type,style:E.style,styleSpec:E.styleSpec,object:N,objectKey:"type"})},filter:sr,layout:function(Ir){return Os({layer:N,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return Hr(Jr({layerType:Me},qr))}}})},paint:function(Ir){return Os({layer:N,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return Er(Jr({layerType:Me},qr))}}})}}})),C}function _n(E){var C=E.value,N=E.key,te=Ka(C);return te!=="string"?[new ar(N,C,"string expected, "+te+" found")]:[]}var Pn={promoteId:ma};function Zn(E){var C=E.value,N=E.key,te=E.styleSpec,pe=E.style;if(!C.type)return[new ar(N,C,'"type" is required')];var be=En(C.type),Me;switch(be){case"vector":case"raster":case"raster-dem":return Me=Os({key:N,value:C,valueSpec:te["source_"+be.replace("-","_")],style:E.style,styleSpec:te,objectElementValidators:Pn}),Me;case"geojson":if(Me=Os({key:N,value:C,valueSpec:te.source_geojson,style:pe,styleSpec:te,objectElementValidators:Pn}),C.cluster)for(var Fe in C.clusterProperties){var tt=C.clusterProperties[Fe],ct=tt[0],yt=tt[1],Rt=typeof ct=="string"?[ct,["accumulated"],["get",Fe]]:ct;Me.push.apply(Me,Uo({key:N+"."+Fe+".map",value:yt,expressionContext:"cluster-map"})),Me.push.apply(Me,Uo({key:N+"."+Fe+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return Me;case"video":return Os({key:N,value:C,valueSpec:te.source_video,style:pe,styleSpec:te});case"image":return Os({key:N,value:C,valueSpec:te.source_image,style:pe,styleSpec:te});case"canvas":return[new ar(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ss({key:N+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:te})}}function ma(E){var C=E.key,N=E.value;if(Ka(N)==="string")return _n({key:C,value:N});var te=[];for(var pe in N)te.push.apply(te,_n({key:C+"."+pe,value:N[pe]}));return te}function ba(E){var C=E.value,N=E.styleSpec,te=N.light,pe=E.style,be=[],Me=Ka(C);if(C===void 0)return be;if(Me!=="object")return be=be.concat([new ar("light",C,"object expected, "+Me+" found")]),be;for(var Fe in C){var tt=Fe.match(/^(.*)-transition$/);tt&&te[tt[1]]&&te[tt[1]].transition?be=be.concat(fi({key:Fe,value:C[Fe],valueSpec:N.transition,style:pe,styleSpec:N})):te[Fe]?be=be.concat(fi({key:Fe,value:C[Fe],valueSpec:te[Fe],style:pe,styleSpec:N})):be=be.concat([new ar(Fe,C[Fe],'unknown property "'+Fe+'"')])}return be}function Za(E){return _n(E).length===0?[]:Uo(E)}function Wa(E){return _n(E).length===0?[]:Uo(E)}var ei={"*":function(){return[]},array:Of,boolean:bf,number:mf,color:Jf,constants:Fr,enum:Ss,filter:sr,function:xf,layer:en,object:Os,source:Zn,light:ba,string:_n,formatted:Za,resolvedImage:Wa};function fi(E){var C=E.value,N=E.valueSpec,te=E.styleSpec;if(N.expression&&ga(En(C)))return xf(E);if(N.expression&&xo(Vn(C)))return Uo(E);if(N.type&&ei[N.type])return ei[N.type](E);var pe=Os(Jr({},E,{valueSpec:N.type?te[N.type]:N}));return pe}function oo(E){var C=E.value,N=E.key,te=_n(E);return te.length||(C.indexOf("{fontstack}")===-1&&te.push(new ar(N,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&te.push(new ar(N,C,'"glyphs" url must include a "{range}" token'))),te}function ri(E,C){C===void 0&&(C=cr);var N=[];return N=N.concat(fi({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:oo,"*":function(){return[]}}})),E.constants&&(N=N.concat(Fr({key:"constants",value:E.constants,style:E,styleSpec:C}))),Hi(N)}ri.source=co(Zn),ri.light=co(ba),ri.layer=co(en),ri.filter=co(sr),ri.paintProperty=co(Er),ri.layoutProperty=co(Hr);function Hi(E){return[].concat(E).sort(function(C,N){return C.line-N.line})}function co(E){return function(){for(var C=[],N=arguments.length;N--;)C[N]=arguments[N];return Hi(E.apply(this,C))}}var _o=ri,xi=_o.light,Ai=_o.paintProperty,ms=_o.layoutProperty;function go(E,C){var N=!1;if(C&&C.length)for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];E.fire(new wr(new Error(be.message))),N=!0}return N}var Io=he,jo=3;function he(E,C,N){var te=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var pe=new Int32Array(this.arrayBuffer);E=pe[0],C=pe[1],N=pe[2],this.d=C+2*N;for(var be=0;be<this.d*this.d;be++){var Me=pe[jo+be],Fe=pe[jo+be+1];te.push(Me===Fe?null:pe.subarray(Me,Fe))}var tt=pe[jo+te.length],ct=pe[jo+te.length+1];this.keys=pe.subarray(tt,ct),this.bboxes=pe.subarray(ct),this.insert=this._insertReadonly}else{this.d=C+2*N;for(var yt=0;yt<this.d*this.d;yt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=N,this.scale=C/E,this.uid=0;var Rt=N/C*E;this.min=-Rt,this.max=E+Rt}he.prototype.insert=function(E,C,N,te,pe){this._forEachCell(C,N,te,pe,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(te),this.bboxes.push(pe)},he.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},he.prototype._insertCell=function(E,C,N,te,pe,be){this.cells[pe].push(be)},he.prototype.query=function(E,C,N,te,pe){var be=this.min,Me=this.max;if(E<=be&&C<=be&&Me<=N&&Me<=te&&!pe)return Array.prototype.slice.call(this.keys);var Fe=[],tt={};return this._forEachCell(E,C,N,te,this._queryCell,Fe,tt,pe),Fe},he.prototype._queryCell=function(E,C,N,te,pe,be,Me,Fe){var tt=this.cells[pe];if(tt!==null)for(var ct=this.keys,yt=this.bboxes,Rt=0;Rt<tt.length;Rt++){var Zt=tt[Rt];if(Me[Zt]===void 0){var Ht=Zt*4;(Fe?Fe(yt[Ht+0],yt[Ht+1],yt[Ht+2],yt[Ht+3]):E<=yt[Ht+2]&&C<=yt[Ht+3]&&N>=yt[Ht+0]&&te>=yt[Ht+1])?(Me[Zt]=!0,be.push(ct[Zt])):Me[Zt]=!1}}},he.prototype._forEachCell=function(E,C,N,te,pe,be,Me,Fe){for(var tt=this._convertToCellCoord(E),ct=this._convertToCellCoord(C),yt=this._convertToCellCoord(N),Rt=this._convertToCellCoord(te),Zt=tt;Zt<=yt;Zt++)for(var Ht=ct;Ht<=Rt;Ht++){var lr=this.d*Ht+Zt;if(!(Fe&&!Fe(this._convertFromCellCoord(Zt),this._convertFromCellCoord(Ht),this._convertFromCellCoord(Zt+1),this._convertFromCellCoord(Ht+1)))&&pe.call(this,E,C,N,te,lr,be,Me,Fe))return}},he.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},he.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},he.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=jo+this.cells.length+1+1,N=0,te=0;te<this.cells.length;te++)N+=this.cells[te].length;var pe=new Int32Array(C+N+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var be=C,Me=0;Me<E.length;Me++){var Fe=E[Me];pe[jo+Me]=be,pe.set(Fe,be),be+=Fe.length}return pe[jo+E.length]=be,pe.set(this.keys,be),be+=this.keys.length,pe[jo+E.length+1]=be,pe.set(this.bboxes,be),be+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Le=self.ImageBitmap,Be={};function Ne(E,C,N){N===void 0&&(N={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Be[E]={klass:C,omit:N.omit||[],shallow:N.shallow||[]}}Ne("Object",Object),Io.serialize=function(C,N){var te=C.toArrayBuffer();return N&&N.push(te),{buffer:te}},Io.deserialize=function(C){return new Io(C.buffer)},Ne("Grid",Io),Ne("Color",hi),Ne("Error",Error),Ne("ResolvedImage",So),Ne("StylePropertyFunction",hu),Ne("StyleExpression",gs,{omit:["_evaluator"]}),Ne("ZoomDependentExpression",ys),Ne("ZoomConstantExpression",Su),Ne("CompoundExpression",ko,{omit:["_evaluate"]});for(var Ke in Qn)Qn[Ke]._classRegistryKey||Ne("Expression_"+Ke,Qn[Ke]);function mt(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function vt(E){return Le&&E instanceof Le}function Ct(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(mt(E)||vt(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var N=E;return C&&C.push(N.buffer),N}if(E instanceof Te)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var te=[],pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe];te.push(Ct(Me,C))}return te}if(typeof E=="object"){var Fe=E.constructor,tt=Fe._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ct=Fe.serialize?Fe.serialize(E,C):{};if(!Fe.serialize){for(var yt in E)if(!!E.hasOwnProperty(yt)&&!(Be[tt].omit.indexOf(yt)>=0)){var Rt=E[yt];ct[yt]=Be[tt].shallow.indexOf(yt)>=0?Rt:Ct(Rt,C)}E instanceof Error&&(ct.message=E.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ct.$name=tt),ct}throw new Error("can't serialize object of type "+typeof E)}function Ut(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||mt(E)||vt(E)||ArrayBuffer.isView(E)||E instanceof Te)return E;if(Array.isArray(E))return E.map(Ut);if(typeof E=="object"){var C=E.$name||"Object",N=Be[C],te=N.klass;if(!te)throw new Error("can't deserialize unregistered class "+C);if(te.deserialize)return te.deserialize(E);for(var pe=Object.create(te.prototype),be=0,Me=Object.keys(E);be<Me.length;be+=1){var Fe=Me[be];if(Fe!=="$name"){var tt=E[Fe];pe[Fe]=Be[C].shallow.indexOf(Fe)>=0?tt:Ut(tt)}}return pe}throw new Error("can't deserialize object of type "+typeof E)}var Wt=function(){this.first=!0};Wt.prototype.update=function(C,N){var te=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=N),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=te,!0):!1)};var jt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function _r(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(Ur(te.charCodeAt(0)))return!0}return!1}function Qr(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(!cn(te.charCodeAt(0)))return!1}return!0}function cn(E){return!(jt.Arabic(E)||jt["Arabic Supplement"](E)||jt["Arabic Extended-A"](E)||jt["Arabic Presentation Forms-A"](E)||jt["Arabic Presentation Forms-B"](E))}function Mr(E){return E<11904?!1:!!(jt["Bopomofo Extended"](E)||jt.Bopomofo(E)||jt["CJK Compatibility Forms"](E)||jt["CJK Compatibility Ideographs"](E)||jt["CJK Compatibility"](E)||jt["CJK Radicals Supplement"](E)||jt["CJK Strokes"](E)||jt["CJK Symbols and Punctuation"](E)||jt["CJK Unified Ideographs Extension A"](E)||jt["CJK Unified Ideographs"](E)||jt["Enclosed CJK Letters and Months"](E)||jt["Halfwidth and Fullwidth Forms"](E)||jt.Hiragana(E)||jt["Ideographic Description Characters"](E)||jt["Kangxi Radicals"](E)||jt["Katakana Phonetic Extensions"](E)||jt.Katakana(E)||jt["Vertical Forms"](E)||jt["Yi Radicals"](E)||jt["Yi Syllables"](E))}function Ur(E){return E===746||E===747?!0:E<4352?!1:!!(jt["Bopomofo Extended"](E)||jt.Bopomofo(E)||jt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||jt["CJK Compatibility Ideographs"](E)||jt["CJK Compatibility"](E)||jt["CJK Radicals Supplement"](E)||jt["CJK Strokes"](E)||jt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||jt["CJK Unified Ideographs Extension A"](E)||jt["CJK Unified Ideographs"](E)||jt["Enclosed CJK Letters and Months"](E)||jt["Hangul Compatibility Jamo"](E)||jt["Hangul Jamo Extended-A"](E)||jt["Hangul Jamo Extended-B"](E)||jt["Hangul Jamo"](E)||jt["Hangul Syllables"](E)||jt.Hiragana(E)||jt["Ideographic Description Characters"](E)||jt.Kanbun(E)||jt["Kangxi Radicals"](E)||jt["Katakana Phonetic Extensions"](E)||jt.Katakana(E)&&E!==12540||jt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||jt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||jt["Unified Canadian Aboriginal Syllabics"](E)||jt["Unified Canadian Aboriginal Syllabics Extended"](E)||jt["Vertical Forms"](E)||jt["Yijing Hexagram Symbols"](E)||jt["Yi Syllables"](E)||jt["Yi Radicals"](E))}function Wr(E){return!!(jt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||jt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||jt["Letterlike Symbols"](E)||jt["Number Forms"](E)||jt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||jt["Control Pictures"](E)&&E!==9251||jt["Optical Character Recognition"](E)||jt["Enclosed Alphanumerics"](E)||jt["Geometric Shapes"](E)||jt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||jt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||jt["CJK Symbols and Punctuation"](E)||jt.Katakana(E)||jt["Private Use Area"](E)||jt["CJK Compatibility Forms"](E)||jt["Small Form Variants"](E)||jt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function sn(E){return!(Ur(E)||Wr(E))}function un(E){return jt.Arabic(E)||jt["Arabic Supplement"](E)||jt["Arabic Extended-A"](E)||jt["Arabic Presentation Forms-A"](E)||jt["Arabic Presentation Forms-B"](E)}function Zr(E){return E>=1424&&E<=2303||jt["Arabic Presentation Forms-A"](E)||jt["Arabic Presentation Forms-B"](E)}function Gn(E,C){return!(!C&&Zr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||jt.Khmer(E))}function na(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(Zr(te.charCodeAt(0)))return!0}return!1}function wa(E,C){for(var N=0,te=E;N<te.length;N+=1){var pe=te[N];if(!Gn(pe.charCodeAt(0),C))return!1}return!0}var oa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ea=null,fa=oa.unavailable,Va=null,Ra=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(fa=oa.error),Ea&&Ea(E)};function $a(){gi.fire(new tn("pluginStateChange",{pluginStatus:fa,pluginURL:Va}))}var gi=new gr,ho=function(){return fa},Ii=function(E){return E({pluginStatus:fa,pluginURL:Va}),gi.on("pluginStateChange",E),E},ha=function(E,C,N){if(N===void 0&&(N=!1),fa===oa.deferred||fa===oa.loading||fa===oa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=Q.resolveURL(E),fa=oa.deferred,Ea=C,$a(),N||ai()},ai=function(){if(fa!==oa.deferred||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fa=oa.loading,$a(),Va&&De({url:Va},function(E){E?Ra(E):(fa=oa.loaded,$a())})},Xa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return fa===oa.loaded||Xa.applyArabicShaping!=null},isLoading:function(){return fa===oa.loading},setState:function(C){fa=C.pluginStatus,Va=C.pluginURL},isParsed:function(){return Xa.applyArabicShaping!=null&&Xa.processBidirectionalText!=null&&Xa.processStyledBidirectionalText!=null},getPluginURL:function(){return Va}},Mi=function(){!Xa.isLoading()&&!Xa.isLoaded()&&ho()==="deferred"&&ai()},si=function(C,N){this.zoom=C,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wt,this.transition={})};si.prototype.isSupportedScript=function(C){return wa(C,Xa.isLoaded())},si.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},si.prototype.getCrossfadeParameters=function(){var C=this.zoom,N=C-Math.floor(C),te=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*N}};var so=function(C,N){this.property=C,this.value=N,this.expression=Lc(N===void 0?C.specification.default:N,C.specification)};so.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},so.prototype.possiblyEvaluate=function(C,N,te){return this.property.possiblyEvaluate(this,C,N,te)};var $i=function(C){this.property=C,this.value=new so(C,void 0)};$i.prototype.transitioned=function(C,N){return new Zo(this.property,this.value,N,M({},C.transition,this.transition),C.now)},$i.prototype.untransitioned=function(){return new Zo(this.property,this.value,null,{},0)};var yo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};yo.prototype.getValue=function(C){return I(this._values[C].value.value)},yo.prototype.setValue=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new $i(this._values[C].property)),this._values[C].value=new so(this._values[C].property,N===null?void 0:I(N))},yo.prototype.getTransition=function(C){return I(this._values[C].transition)},yo.prototype.setTransition=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new $i(this._values[C].property)),this._values[C].transition=I(N)||void 0},yo.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N],be=this.getValue(pe);be!==void 0&&(C[pe]=be);var Me=this.getTransition(pe);Me!==void 0&&(C[pe+"-transition"]=Me)}return C},yo.prototype.transitioned=function(C,N){for(var te=new Vo(this._properties),pe=0,be=Object.keys(this._values);pe<be.length;pe+=1){var Me=be[pe];te._values[Me]=this._values[Me].transitioned(C,N._values[Me])}return te},yo.prototype.untransitioned=function(){for(var C=new Vo(this._properties),N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N];C._values[pe]=this._values[pe].untransitioned()}return C};var Zo=function(C,N,te,pe,be){this.property=C,this.value=N,this.begin=be+pe.delay||0,this.end=this.begin+pe.duration||0,C.specification.transition&&(pe.delay||pe.duration)&&(this.prior=te)};Zo.prototype.possiblyEvaluate=function(C,N,te){var pe=C.now||0,be=this.value.possiblyEvaluate(C,N,te),Me=this.prior;if(Me){if(pe>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(pe<this.begin)return Me.possiblyEvaluate(C,N,te);var Fe=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,N,te),be,f(Fe))}else return be};var Vo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};Vo.prototype.possiblyEvaluate=function(C,N,te){for(var pe=new Ni(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Fe=Me[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,N,te)}return pe},Vo.prototype.hasTransition=function(){for(var C=0,N=Object.keys(this._values);C<N.length;C+=1){var te=N[C];if(this._values[te].prior)return!0}return!1};var Ko=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Ko.prototype.getValue=function(C){return I(this._values[C].value)},Ko.prototype.setValue=function(C,N){this._values[C]=new so(this._values[C].property,N===null?void 0:I(N))},Ko.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N],be=this.getValue(pe);be!==void 0&&(C[pe]=be)}return C},Ko.prototype.possiblyEvaluate=function(C,N,te){for(var pe=new Ni(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Fe=Me[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,N,te)}return pe};var Gi=function(C,N,te){this.property=C,this.value=N,this.parameters=te};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Gi.prototype.evaluate=function(C,N,te,pe){return this.property.evaluate(this.value,this.parameters,C,N,te,pe)};var Ni=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Ni.prototype.get=function(C){return this._values[C]};var Fa=function(C){this.specification=C};Fa.prototype.possiblyEvaluate=function(C,N){return C.expression.evaluate(N)},Fa.prototype.interpolate=function(C,N,te){var pe=fl[this.specification.type];return pe?pe(C,N,te):C};var ja=function(C,N){this.specification=C,this.overrides=N};ja.prototype.possiblyEvaluate=function(C,N,te,pe){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Gi(this,{kind:"constant",value:C.expression.evaluate(N,null,{},te,pe)},N):new Gi(this,C.expression,N)},ja.prototype.interpolate=function(C,N,te){if(C.value.kind!=="constant"||N.value.kind!=="constant")return C;if(C.value.value===void 0||N.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},C.parameters);var pe=fl[this.specification.type];return pe?new Gi(this,{kind:"constant",value:pe(C.value.value,N.value.value,te)},C.parameters):C},ja.prototype.evaluate=function(C,N,te,pe,be,Me){return C.kind==="constant"?C.value:C.evaluate(N,te,pe,be,Me)};var bo=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe,be,Me){if(te.value===void 0)return new Gi(this,{kind:"constant",value:void 0},pe);if(te.expression.kind==="constant"){var Fe=te.expression.evaluate(pe,null,{},be,Me),tt=te.property.specification.type==="resolvedImage",ct=tt&&typeof Fe!="string"?Fe.name:Fe,yt=this._calculate(ct,ct,ct,pe);return new Gi(this,{kind:"constant",value:yt},pe)}else if(te.expression.kind==="camera"){var Rt=this._calculate(te.expression.evaluate({zoom:pe.zoom-1}),te.expression.evaluate({zoom:pe.zoom}),te.expression.evaluate({zoom:pe.zoom+1}),pe);return new Gi(this,{kind:"constant",value:Rt},pe)}else return new Gi(this,te.expression,pe)},C.prototype.evaluate=function(te,pe,be,Me,Fe,tt){if(te.kind==="source"){var ct=te.evaluate(pe,be,Me,Fe,tt);return this._calculate(ct,ct,ct,pe)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(pe.zoom)-1},be,Me),te.evaluate({zoom:Math.floor(pe.zoom)},be,Me),te.evaluate({zoom:Math.floor(pe.zoom)+1},be,Me),pe):te.value},C.prototype._calculate=function(te,pe,be,Me){var Fe=Me.zoom;return Fe>Me.zoomHistory.lastIntegerZoom?{from:te,to:pe}:{from:be,to:pe}},C.prototype.interpolate=function(te){return te},C}(ja),ro=function(C){this.specification=C};ro.prototype.possiblyEvaluate=function(C,N,te,pe){if(C.value!==void 0)if(C.expression.kind==="constant"){var be=C.expression.evaluate(N,null,{},te,pe);return this._calculate(be,be,be,N)}else return this._calculate(C.expression.evaluate(new si(Math.floor(N.zoom-1),N)),C.expression.evaluate(new si(Math.floor(N.zoom),N)),C.expression.evaluate(new si(Math.floor(N.zoom+1),N)),N)},ro.prototype._calculate=function(C,N,te,pe){var be=pe.zoom;return be>pe.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:te,to:N}},ro.prototype.interpolate=function(C){return C};var zo=function(C){this.specification=C};zo.prototype.possiblyEvaluate=function(C,N,te,pe){return!!C.expression.evaluate(N,null,{},te,pe)},zo.prototype.interpolate=function(){return!1};var Xi=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in C){var te=C[N];te.specification.overridable&&this.overridableProperties.push(N);var pe=this.defaultPropertyValues[N]=new so(te,void 0),be=this.defaultTransitionablePropertyValues[N]=new $i(te);this.defaultTransitioningPropertyValues[N]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=pe.possiblyEvaluate({})}};Ne("DataDrivenProperty",ja),Ne("DataConstantProperty",Fa),Ne("CrossFadedDataDrivenProperty",bo),Ne("CrossFadedProperty",ro),Ne("ColorRampProperty",zo);var Jo="-transition",ks=function(E){function C(N,te){if(E.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),te.layout&&(this._unevaluatedLayout=new Ko(te.layout)),te.paint)){this._transitionablePaint=new yo(te.paint);for(var pe in N.paint)this.setPaintProperty(pe,N.paint[pe],{validate:!1});for(var be in N.layout)this.setLayoutProperty(be,N.layout[be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ni(te.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},C.prototype.setLayoutProperty=function(te,pe,be){if(be===void 0&&(be={}),pe!=null){var Me="layers."+this.id+".layout."+te;if(this._validate(ms,Me,te,pe,be))return}if(te==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(te,pe)},C.prototype.getPaintProperty=function(te){return k(te,Jo)?this._transitionablePaint.getTransition(te.slice(0,-Jo.length)):this._transitionablePaint.getValue(te)},C.prototype.setPaintProperty=function(te,pe,be){if(be===void 0&&(be={}),pe!=null){var Me="layers."+this.id+".paint."+te;if(this._validate(Ai,Me,te,pe,be))return!1}if(k(te,Jo))return this._transitionablePaint.setTransition(te.slice(0,-Jo.length),pe||void 0),!1;var Fe=this._transitionablePaint._values[te],tt=Fe.property.specification["property-type"]==="cross-faded-data-driven",ct=Fe.value.isDataDriven(),yt=Fe.value;this._transitionablePaint.setValue(te,pe),this._handleSpecialPaintPropertyUpdate(te);var Rt=this._transitionablePaint._values[te].value,Zt=Rt.isDataDriven();return Zt||ct||tt||this._handleOverridablePaintPropertyUpdate(te,yt,Rt)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,be){return!1},C.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(te,pe){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,pe)},C.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),z(te,function(pe,be){return pe!==void 0&&!(be==="layout"&&!Object.keys(pe).length)&&!(be==="paint"&&!Object.keys(pe).length)})},C.prototype._validate=function(te,pe,be,Me,Fe){return Fe===void 0&&(Fe={}),Fe&&Fe.validate===!1?!1:go(this,te.call(_o,{key:pe,layerType:this.type,objectKey:be,value:Me,styleSpec:cr,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var te in this.paint._values){var pe=this.paint.get(te);if(!(!(pe instanceof Gi)||!oi(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},C}(gr),vu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ji=function(C,N){this._structArray=C,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qf=128,Zl=5,Oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Oi.serialize=function(C,N){return C._trim(),N&&(C.isTransferred=!0,N.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Oi.deserialize=function(C){var N=Object.create(this.prototype);return N.arrayBuffer=C.arrayBuffer,N.length=C.length,N.capacity=C.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},Oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Oi.prototype.clear=function(){this.length=0},Oi.prototype.resize=function(C){this.reserve(C),this.length=C},Oi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*Zl),Qf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},Oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Fo(E,C){C===void 0&&(C=1);var N=0,te=0,pe=E.map(function(Me){var Fe=i0(Me.type),tt=N=rh(N,Math.max(C,Fe)),ct=Me.components||1;return te=Math.max(te,Fe),N+=Fe*ct,{name:Me.name,type:Me.type,components:ct,offset:tt}}),be=rh(N,Math.max(te,C));return{members:pe,size:be,alignment:C}}function i0(E){return vu[E].BYTES_PER_ELEMENT}function rh(E,C){return Math.ceil(E/C)*C}var Pc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Me=te*2;return this.int16[Me+0]=pe,this.int16[Me+1]=be,te},C}(Oi);Pc.prototype.bytesPerElement=4,Ne("StructArrayLayout2i4",Pc);var wf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Me)},C.prototype.emplace=function(te,pe,be,Me,Fe){var tt=te*4;return this.int16[tt+0]=pe,this.int16[tt+1]=be,this.int16[tt+2]=Me,this.int16[tt+3]=Fe,te},C}(Oi);wf.prototype.bytesPerElement=8,Ne("StructArrayLayout4i8",wf);var $f=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Me,Fe,tt)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct){var yt=te*6;return this.int16[yt+0]=pe,this.int16[yt+1]=be,this.int16[yt+2]=Me,this.int16[yt+3]=Fe,this.int16[yt+4]=tt,this.int16[yt+5]=ct,te},C}(Oi);$f.prototype.bytesPerElement=12,Ne("StructArrayLayout2i4i12",$f);var nh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Me,Fe,tt)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct){var yt=te*4,Rt=te*8;return this.int16[yt+0]=pe,this.int16[yt+1]=be,this.uint8[Rt+4]=Me,this.uint8[Rt+5]=Fe,this.uint8[Rt+6]=tt,this.uint8[Rt+7]=ct,te},C}(Oi);nh.prototype.bytesPerElement=8,Ne("StructArrayLayout2i4ub8",nh);var Qs=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht){var lr=te*9,Ir=te*18;return this.uint16[lr+0]=pe,this.uint16[lr+1]=be,this.uint16[lr+2]=Me,this.uint16[lr+3]=Fe,this.uint16[lr+4]=tt,this.uint16[lr+5]=ct,this.uint16[lr+6]=yt,this.uint16[lr+7]=Rt,this.uint8[Ir+16]=Zt,this.uint8[Ir+17]=Ht,te},C}(Oi);Qs.prototype.bytesPerElement=18,Ne("StructArrayLayout8ui2ub18",Qs);var Tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir){var ln=te*12;return this.int16[ln+0]=pe,this.int16[ln+1]=be,this.int16[ln+2]=Me,this.int16[ln+3]=Fe,this.uint16[ln+4]=tt,this.uint16[ln+5]=ct,this.uint16[ln+6]=yt,this.uint16[ln+7]=Rt,this.int16[ln+8]=Zt,this.int16[ln+9]=Ht,this.int16[ln+10]=lr,this.int16[ln+11]=Ir,te},C}(Oi);Tf.prototype.bytesPerElement=24,Ne("StructArrayLayout4i4ui4i24",Tf);var iv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,be)},C.prototype.emplace=function(te,pe,be,Me){var Fe=te*3;return this.float32[Fe+0]=pe,this.float32[Fe+1]=be,this.float32[Fe+2]=Me,te},C}(Oi);iv.prototype.bytesPerElement=12,Ne("StructArrayLayout3f12",iv);var ov=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.uint32[be+0]=pe,te},C}(Oi);ov.prototype.bytesPerElement=4,Ne("StructArrayLayout1ul4",ov);var Dc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt,ct,yt,Rt){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,te,pe,be,Me,Fe,tt,ct,yt,Rt)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt){var Ht=te*10,lr=te*5;return this.int16[Ht+0]=pe,this.int16[Ht+1]=be,this.int16[Ht+2]=Me,this.int16[Ht+3]=Fe,this.int16[Ht+4]=tt,this.int16[Ht+5]=ct,this.uint32[lr+3]=yt,this.uint16[Ht+8]=Rt,this.uint16[Ht+9]=Zt,te},C}(Oi);Dc.prototype.bytesPerElement=20,Ne("StructArrayLayout6i1ul2ui20",Dc);var ah=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Me,Fe,tt)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct){var yt=te*6;return this.int16[yt+0]=pe,this.int16[yt+1]=be,this.int16[yt+2]=Me,this.int16[yt+3]=Fe,this.int16[yt+4]=tt,this.int16[yt+5]=ct,te},C}(Oi);ah.prototype.bytesPerElement=12,Ne("StructArrayLayout2i2i2i12",ah);var ef=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe){var tt=this.length;return this.resize(tt+1),this.emplace(tt,te,pe,be,Me,Fe)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt){var ct=te*4,yt=te*8;return this.float32[ct+0]=pe,this.float32[ct+1]=be,this.float32[ct+2]=Me,this.int16[yt+6]=Fe,this.int16[yt+7]=tt,te},C}(Oi);ef.prototype.bytesPerElement=16,Ne("StructArrayLayout2f1f2i16",ef);var dl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Me)},C.prototype.emplace=function(te,pe,be,Me,Fe){var tt=te*12,ct=te*3;return this.uint8[tt+0]=pe,this.uint8[tt+1]=be,this.float32[ct+1]=Me,this.float32[ct+2]=Fe,te},C}(Oi);dl.prototype.bytesPerElement=12,Ne("StructArrayLayout2ub2f12",dl);var tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,be)},C.prototype.emplace=function(te,pe,be,Me){var Fe=te*3;return this.uint16[Fe+0]=pe,this.uint16[Fe+1]=be,this.uint16[Fe+2]=Me,te},C}(Oi);tf.prototype.bytesPerElement=6,Ne("StructArrayLayout3ui6",tf);var Rc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn){var An=this.length;return this.resize(An+1),this.emplace(An,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An){var Dn=te*24,Xn=te*12,sa=te*48;return this.int16[Dn+0]=pe,this.int16[Dn+1]=be,this.uint16[Dn+2]=Me,this.uint16[Dn+3]=Fe,this.uint32[Xn+2]=tt,this.uint32[Xn+3]=ct,this.uint32[Xn+4]=yt,this.uint16[Dn+10]=Rt,this.uint16[Dn+11]=Zt,this.uint16[Dn+12]=Ht,this.float32[Xn+7]=lr,this.float32[Xn+8]=Ir,this.uint8[sa+36]=ln,this.uint8[sa+37]=qr,this.uint8[sa+38]=Mn,this.uint32[Xn+10]=bn,this.int16[Dn+22]=An,te},C}(Oi);Rc.prototype.bytesPerElement=48,Ne("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Rc);var ih=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Dn,Xn,sa,aa,za,Ta,Sa,ti,Da,Ia){var ui=this.length;return this.resize(ui+1),this.emplace(ui,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Dn,Xn,sa,aa,za,Ta,Sa,ti,Da,Ia)},C.prototype.emplace=function(te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Dn,Xn,sa,aa,za,Ta,Sa,ti,Da,Ia,ui){var qa=te*34,Si=te*17;return this.int16[qa+0]=pe,this.int16[qa+1]=be,this.int16[qa+2]=Me,this.int16[qa+3]=Fe,this.int16[qa+4]=tt,this.int16[qa+5]=ct,this.int16[qa+6]=yt,this.int16[qa+7]=Rt,this.uint16[qa+8]=Zt,this.uint16[qa+9]=Ht,this.uint16[qa+10]=lr,this.uint16[qa+11]=Ir,this.uint16[qa+12]=ln,this.uint16[qa+13]=qr,this.uint16[qa+14]=Mn,this.uint16[qa+15]=bn,this.uint16[qa+16]=An,this.uint16[qa+17]=Dn,this.uint16[qa+18]=Xn,this.uint16[qa+19]=sa,this.uint16[qa+20]=aa,this.uint16[qa+21]=za,this.uint16[qa+22]=Ta,this.uint32[Si+12]=Sa,this.float32[Si+13]=ti,this.float32[Si+14]=Da,this.float32[Si+15]=Ia,this.float32[Si+16]=ui,te},C}(Oi);ih.prototype.bytesPerElement=68,Ne("StructArrayLayout8i15ui1ul4f68",ih);var qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.float32[be+0]=pe,te},C}(Oi);qf.prototype.bytesPerElement=4,Ne("StructArrayLayout1f4",qf);var sv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,be)},C.prototype.emplace=function(te,pe,be,Me){var Fe=te*3;return this.int16[Fe+0]=pe,this.int16[Fe+1]=be,this.int16[Fe+2]=Me,te},C}(Oi);sv.prototype.bytesPerElement=6,Ne("StructArrayLayout3i6",sv);var Af=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,be)},C.prototype.emplace=function(te,pe,be,Me){var Fe=te*2,tt=te*4;return this.uint32[Fe+0]=pe,this.uint16[tt+2]=be,this.uint16[tt+3]=Me,te},C}(Oi);Af.prototype.bytesPerElement=8,Ne("StructArrayLayout1ul2ui8",Af);var Ic=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Me=te*2;return this.uint16[Me+0]=pe,this.uint16[Me+1]=be,te},C}(Oi);Ic.prototype.bytesPerElement=4,Ne("StructArrayLayout2ui4",Ic);var ec=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.uint16[be+0]=pe,te},C}(Oi);ec.prototype.bytesPerElement=2,Ne("StructArrayLayout1ui2",ec);var Mf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Me=te*2;return this.float32[Me+0]=pe,this.float32[Me+1]=be,te},C}(Oi);Mf.prototype.bytesPerElement=8,Ne("StructArrayLayout2f8",Mf);var lv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Me)},C.prototype.emplace=function(te,pe,be,Me,Fe){var tt=te*4;return this.float32[tt+0]=pe,this.float32[tt+1]=be,this.float32[tt+2]=Me,this.float32[tt+3]=Fe,te},C}(Oi);lv.prototype.bytesPerElement=16,Ne("StructArrayLayout4f16",lv);var Ap=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,N),C}(ji);Ap.prototype.size=20;var Sf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Ap(this,te)},C}(Dc);Ne("CollisionBoxArray",Sf);var uv=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,N),C}(ji);uv.prototype.size=48;var tc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new uv(this,te)},C}(Rc);Ne("PlacedSymbolArray",tc);var Mp=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,N),C}(ji);Mp.prototype.size=68;var Sp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Mp(this,te)},C}(ih);Ne("SymbolInstanceArray",Sp);var pu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(te){return this.float32[te*1+0]},C}(qf);Ne("GlyphOffsetArray",pu);var kp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function(te){return this.int16[te*3+0]},C.prototype.gety=function(te){return this.int16[te*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},C}(sv);Ne("SymbolLineVertexArray",kp);var Ep=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,N),C}(ji);Ep.prototype.size=8;var fv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Ep(this,te)},C}(Af);Ne("FeatureIndexArray",fv);var Cp=Fo([{name:"a_pos",components:2,type:"Int16"}],4),ve=Cp.members,W=function(C){C===void 0&&(C=[]),this.segments=C};W.prototype.prepareSegment=function(C,N,te,pe){var be=this.segments[this.segments.length-1];return C>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!be||be.vertexLength+C>W.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==pe)&&(be={vertexOffset:N.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(be.sortKey=pe),this.segments.push(be)),be},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var C=0,N=this.segments;C<N.length;C+=1){var te=N[C];for(var pe in te.vaos)te.vaos[pe].destroy()}},W.simpleSegment=function(C,N,te,pe){return new W([{vertexOffset:C,primitiveOffset:N,vertexLength:te,primitiveLength:pe,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ne("SegmentVector",W);function de(E,C){return E=v(Math.floor(E),0,255),C=v(Math.floor(C),0,255),256*E+C}var J=Fo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=o(function(E){function C(N,te){var pe,be,Me,Fe,tt,ct,yt,Rt;for(pe=N.length&3,be=N.length-pe,Me=te,tt=3432918353,ct=461845907,Rt=0;Rt<be;)yt=N.charCodeAt(Rt)&255|(N.charCodeAt(++Rt)&255)<<8|(N.charCodeAt(++Rt)&255)<<16|(N.charCodeAt(++Rt)&255)<<24,++Rt,yt=(yt&65535)*tt+(((yt>>>16)*tt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*ct+(((yt>>>16)*ct&65535)<<16)&4294967295,Me^=yt,Me=Me<<13|Me>>>19,Fe=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Fe&65535)+27492+(((Fe>>>16)+58964&65535)<<16);switch(yt=0,pe){case 3:yt^=(N.charCodeAt(Rt+2)&255)<<16;case 2:yt^=(N.charCodeAt(Rt+1)&255)<<8;case 1:yt^=N.charCodeAt(Rt)&255,yt=(yt&65535)*tt+(((yt>>>16)*tt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*ct+(((yt>>>16)*ct&65535)<<16)&4294967295,Me^=yt}return Me^=N.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}E.exports=C}),Ee=o(function(E){function C(N,te){for(var pe=N.length,be=te^pe,Me=0,Fe;pe>=4;)Fe=N.charCodeAt(Me)&255|(N.charCodeAt(++Me)&255)<<8|(N.charCodeAt(++Me)&255)<<16|(N.charCodeAt(++Me)&255)<<24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),Fe^=Fe>>>24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)^Fe,pe-=4,++Me;switch(pe){case 3:be^=(N.charCodeAt(Me+2)&255)<<16;case 2:be^=(N.charCodeAt(Me+1)&255)<<8;case 1:be^=N.charCodeAt(Me)&255,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)}return be^=be>>>13,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16),be^=be>>>15,be>>>0}E.exports=C}),Pe=ge,Ze=ge,ft=Ee;Pe.murmur3=Ze,Pe.murmur2=ft;var At=function(){this.ids=[],this.positions=[],this.indexed=!1};At.prototype.add=function(C,N,te,pe){this.ids.push($t(C)),this.positions.push(N,te,pe)},At.prototype.getPositions=function(C){for(var N=$t(C),te=0,pe=this.ids.length-1;te<pe;){var be=te+pe>>1;this.ids[be]>=N?pe=be:te=be+1}for(var Me=[];this.ids[te]===N;){var Fe=this.positions[3*te],tt=this.positions[3*te+1],ct=this.positions[3*te+2];Me.push({index:Fe,start:tt,end:ct}),te++}return Me},At.serialize=function(C,N){var te=new Float64Array(C.ids),pe=new Uint32Array(C.positions);return ir(te,pe,0,te.length-1),N&&N.push(te.buffer,pe.buffer),{ids:te,positions:pe}},At.deserialize=function(C){var N=new At;return N.ids=C.ids,N.positions=C.positions,N.indexed=!0,N};var Vt=Math.pow(2,53)-1;function $t(E){var C=+E;return!isNaN(C)&&C<=Vt?C:Pe(String(E))}function ir(E,C,N,te){for(;N<te;){for(var pe=E[N+te>>1],be=N-1,Me=te+1;;){do be++;while(E[be]<pe);do Me--;while(E[Me]>pe);if(be>=Me)break;Sr(E,be,Me),Sr(C,3*be,3*Me),Sr(C,3*be+1,3*Me+1),Sr(C,3*be+2,3*Me+2)}Me-N<te-Me?(ir(E,C,N,Me),N=Me+1):(ir(E,C,Me+1,te),te=Me)}}function Sr(E,C,N){var te=E[C];E[C]=E[N],E[N]=te}Ne("FeaturePositionMap",At);var Br=function(C,N){this.gl=C.gl,this.location=N},Vr=function(E){function C(N,te){E.call(this,N,te),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},C}(Br),Nr=function(E){function C(N,te){E.call(this,N,te),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},C}(Br),Kr=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},C}(Br),hn=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},C}(Br),Sn=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},C}(Br),On=function(E){function C(N,te){E.call(this,N,te),this.current=hi.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},C}(Br),Jn=new Float32Array(16),ea=function(E){function C(N,te){E.call(this,N,te),this.current=Jn}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var pe=1;pe<16;pe++)if(te[pe]!==this.current[pe]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},C}(Br);function $n(E){return[de(255*E.r,255*E.g),de(255*E.b,255*E.a)]}var va=function(C,N,te){this.value=C,this.uniformNames=N.map(function(pe){return"u_"+pe}),this.type=te};va.prototype.setUniform=function(C,N,te){C.set(te.constantOr(this.value))},va.prototype.getBinding=function(C,N,te){return this.type==="color"?new On(C,N):new Nr(C,N)};var _a=function(C,N){this.uniformNames=N.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_a.prototype.setConstantPatternPositions=function(C,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=C.tlbr},_a.prototype.setUniform=function(C,N,te,pe){var be=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&C.set(be)},_a.prototype.getBinding=function(C,N,te){return te.substr(0,9)==="u_pattern"?new Sn(C,N):new Nr(C,N)};var xa=function(C,N,te,pe){this.expression=C,this.type=te,this.maxValue=0,this.paintVertexAttributes=N.map(function(be){return{name:"a_"+be,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};xa.prototype.populatePaintArray=function(C,N,te,pe,be){var Me=this.paintVertexArray.length,Fe=this.expression.evaluate(new si(0),N,{},pe,[],be);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Fe)},xa.prototype.updatePaintArray=function(C,N,te,pe){var be=this.expression.evaluate({zoom:0},te,pe);this._setPaintValue(C,N,be)},xa.prototype._setPaintValue=function(C,N,te){if(this.type==="color")for(var pe=$n(te),be=C;be<N;be++)this.paintVertexArray.emplace(be,pe[0],pe[1]);else{for(var Me=C;Me<N;Me++)this.paintVertexArray.emplace(Me,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},xa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(C,N,te,pe,be,Me){this.expression=C,this.uniformNames=N.map(function(Fe){return"u_"+Fe+"_t"}),this.type=te,this.useIntegerZoom=pe,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=N.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Ma.prototype.populatePaintArray=function(C,N,te,pe,be){var Me=this.expression.evaluate(new si(this.zoom),N,{},pe,[],be),Fe=this.expression.evaluate(new si(this.zoom+1),N,{},pe,[],be),tt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(tt,C,Me,Fe)},Ma.prototype.updatePaintArray=function(C,N,te,pe){var be=this.expression.evaluate({zoom:this.zoom},te,pe),Me=this.expression.evaluate({zoom:this.zoom+1},te,pe);this._setPaintValue(C,N,be,Me)},Ma.prototype._setPaintValue=function(C,N,te,pe){if(this.type==="color")for(var be=$n(te),Me=$n(pe),Fe=C;Fe<N;Fe++)this.paintVertexArray.emplace(Fe,be[0],be[1],Me[0],Me[1]);else{for(var tt=C;tt<N;tt++)this.paintVertexArray.emplace(tt,te,pe);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(pe))}},Ma.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(C,N){var te=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,pe=v(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);C.set(pe)},Ma.prototype.getBinding=function(C,N,te){return new Nr(C,N)};var Pa=function(C,N,te,pe,be,Me){this.expression=C,this.type=N,this.useIntegerZoom=te,this.zoom=pe,this.layerId=Me,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};Pa.prototype.populatePaintArray=function(C,N,te){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(pe,C,N.patterns&&N.patterns[this.layerId],te)},Pa.prototype.updatePaintArray=function(C,N,te,pe,be){this._setPaintValues(C,N,te.patterns&&te.patterns[this.layerId],be)},Pa.prototype._setPaintValues=function(C,N,te,pe){if(!(!pe||!te)){var be=te.min,Me=te.mid,Fe=te.max,tt=pe[be],ct=pe[Me],yt=pe[Fe];if(!(!tt||!ct||!yt))for(var Rt=C;Rt<N;Rt++)this.zoomInPaintVertexArray.emplace(Rt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Rt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],ct.pixelRatio,yt.pixelRatio)}},Pa.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ha=function(C,N,te,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var be=[];for(var Me in C.paint._values)if(!!te(Me)){var Fe=C.paint.get(Me);if(!(!(Fe instanceof Gi)||!oi(Fe.property.specification))){var tt=Ci(Me,C.type),ct=Fe.value,yt=Fe.property.specification.type,Rt=Fe.property.useIntegerZoom,Zt=Fe.property.specification["property-type"],Ht=Zt==="cross-faded"||Zt==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[Me]=Ht?new _a(ct.value,tt):new va(ct.value,tt,yt),be.push("/u_"+Me);else if(ct.kind==="source"||Ht){var lr=vi(Me,yt,"source");this.binders[Me]=Ht?new Pa(ct,yt,Rt,N,lr,C.id):new xa(ct,tt,yt,lr),be.push("/a_"+Me)}else{var Ir=vi(Me,yt,"composite");this.binders[Me]=new Ma(ct,tt,yt,Rt,N,Ir),be.push("/z_"+Me)}}}this.cacheKey=be.sort().join("")};Ha.prototype.getMaxValue=function(C){var N=this.binders[C];return N instanceof xa||N instanceof Ma?N.maxValue:0},Ha.prototype.populatePaintArrays=function(C,N,te,pe,be){for(var Me in this.binders){var Fe=this.binders[Me];(Fe instanceof xa||Fe instanceof Ma||Fe instanceof Pa)&&Fe.populatePaintArray(C,N,te,pe,be)}},Ha.prototype.setConstantPatternPositions=function(C,N){for(var te in this.binders){var pe=this.binders[te];pe instanceof _a&&pe.setConstantPatternPositions(C,N)}},Ha.prototype.updatePaintArrays=function(C,N,te,pe,be){var Me=!1;for(var Fe in C)for(var tt=N.getPositions(Fe),ct=0,yt=tt;ct<yt.length;ct+=1){var Rt=yt[ct],Zt=te.feature(Rt.index);for(var Ht in this.binders){var lr=this.binders[Ht];if((lr instanceof xa||lr instanceof Ma||lr instanceof Pa)&&lr.expression.isStateDependent===!0){var Ir=pe.paint.get(Ht);lr.expression=Ir.value,lr.updatePaintArray(Rt.start,Rt.end,Zt,C[Fe],be),Me=!0}}}return Me},Ha.prototype.defines=function(){var C=[];for(var N in this.binders){var te=this.binders[N];(te instanceof va||te instanceof _a)&&C.push.apply(C,te.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return C},Ha.prototype.getPaintVertexBuffers=function(){return this._buffers},Ha.prototype.getUniforms=function(C,N){var te=[];for(var pe in this.binders){var be=this.binders[pe];if(be instanceof va||be instanceof _a||be instanceof Ma)for(var Me=0,Fe=be.uniformNames;Me<Fe.length;Me+=1){var tt=Fe[Me];if(N[tt]){var ct=be.getBinding(C,N[tt],tt);te.push({name:tt,property:pe,binding:ct})}}}return te},Ha.prototype.setUniforms=function(C,N,te,pe){for(var be=0,Me=N;be<Me.length;be+=1){var Fe=Me[be],tt=Fe.name,ct=Fe.property,yt=Fe.binding;this.binders[ct].setUniform(yt,pe,te.get(ct),tt)}},Ha.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var N in this.binders){var te=this.binders[N];if(C&&te instanceof Pa){var pe=C.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(te instanceof xa||te instanceof Ma)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},Ha.prototype.upload=function(C){for(var N in this.binders){var te=this.binders[N];(te instanceof xa||te instanceof Ma||te instanceof Pa)&&te.upload(C)}this.updatePaintBuffers()},Ha.prototype.destroy=function(){for(var C in this.binders){var N=this.binders[C];(N instanceof xa||N instanceof Ma||N instanceof Pa)&&N.destroy()}};var ni=function(C,N,te,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var be=0,Me=N;be<Me.length;be+=1){var Fe=Me[be];this.programConfigurations[Fe.id]=new Ha(Fe,te,pe,C)}this.needsUpload=!1,this._featureMap=new At,this._bufferOffset=0};ni.prototype.populatePaintArrays=function(C,N,te,pe,be,Me){for(var Fe in this.programConfigurations)this.programConfigurations[Fe].populatePaintArrays(C,N,pe,be,Me);N.id!==void 0&&this._featureMap.add(N.id,te,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},ni.prototype.updatePaintArrays=function(C,N,te,pe){for(var be=0,Me=te;be<Me.length;be+=1){var Fe=Me[be];this.needsUpload=this.programConfigurations[Fe.id].updatePaintArrays(C,this._featureMap,N,Fe,pe)||this.needsUpload}},ni.prototype.get=function(C){return this.programConfigurations[C]},ni.prototype.upload=function(C){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(C);this.needsUpload=!1}},ni.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Ci(E,C){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function li(E){var C={"line-pattern":{source:Qs,composite:Qs},"fill-pattern":{source:Qs,composite:Qs},"fill-extrusion-pattern":{source:Qs,composite:Qs}};return C[E]}function vi(E,C,N){var te={color:{source:Mf,composite:lv},number:{source:qf,composite:Mf}},pe=li(E);return pe&&pe[N]||te[C][N]}Ne("ConstantBinder",va),Ne("CrossFadedConstantBinder",_a),Ne("SourceExpressionBinder",xa),Ne("CrossFadedCompositeBinder",Pa),Ne("CompositeExpressionBinder",Ma),Ne("ProgramConfiguration",Ha,{omit:["_buffers"]}),Ne("ProgramConfigurationSet",ni);var Ua=8192;function Li(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var zi=Li(15);function Bi(E){for(var C=Ua/E.extent,N=E.loadGeometry(),te=0;te<N.length;te++)for(var pe=N[te],be=0;be<pe.length;be++){var Me=pe[be];Me.x=Math.round(Me.x*C),Me.y=Math.round(Me.y*C),(Me.x<zi.min||Me.x>zi.max||Me.y<zi.min||Me.y>zi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=v(Me.x,zi.min,zi.max),Me.y=v(Me.y,zi.min,zi.max))}return N}function bi(E,C,N,te,pe){E.emplaceBack(C*2+(te+1)/2,N*2+(pe+1)/2)}var Zi=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Pc,this.indexArray=new tf,this.segments=new W,this.programConfigurations=new ni(ve,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Zi.prototype.populate=function(C,N,te){var pe=this.layers[0],be=[],Me=null;pe.type==="circle"&&(Me=pe.layout.get("circle-sort-key"));for(var Fe=0,tt=C;Fe<tt.length;Fe+=1){var ct=tt[Fe],yt=ct.feature,Rt=ct.id,Zt=ct.index,Ht=ct.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,Ir={type:yt.type,id:Rt,properties:yt.properties,geometry:lr?Bi(yt):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),Ir,te)){lr||(Ir.geometry=Bi(yt));var ln=Me?Me.evaluate(Ir,{},te):void 0,qr={id:Rt,properties:yt.properties,type:yt.type,sourceLayerIndex:Ht,index:Zt,geometry:Ir.geometry,patterns:{},sortKey:ln};be.push(qr)}}Me&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var Mn=0,bn=be;Mn<bn.length;Mn+=1){var An=bn[Mn],Dn=An,Xn=Dn.geometry,sa=Dn.index,aa=Dn.sourceLayerIndex,za=C[sa].feature;this.addFeature(An,Xn,sa,te),N.featureIndex.insert(za,Xn,sa,aa,this.index)}},Zi.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},Zi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zi.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Zi.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zi.prototype.addFeature=function(C,N,te,pe){for(var be=0,Me=N;be<Me.length;be+=1)for(var Fe=Me[be],tt=0,ct=Fe;tt<ct.length;tt+=1){var yt=ct[tt],Rt=yt.x,Zt=yt.y;if(!(Rt<0||Rt>=Ua||Zt<0||Zt>=Ua)){var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),lr=Ht.vertexLength;bi(this.layoutVertexArray,Rt,Zt,-1,-1),bi(this.layoutVertexArray,Rt,Zt,1,-1),bi(this.layoutVertexArray,Rt,Zt,1,1),bi(this.layoutVertexArray,Rt,Zt,-1,1),this.indexArray.emplaceBack(lr,lr+1,lr+2),this.indexArray.emplaceBack(lr,lr+3,lr+2),Ht.vertexLength+=4,Ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,{},pe)},Ne("CircleBucket",Zi,{omit:["layers"]});function ii(E,C){for(var N=0;N<E.length;N++)if($s(C,E[N]))return!0;for(var te=0;te<C.length;te++)if($s(E,C[te]))return!0;return!!Jl(E,C)}function _i(E,C,N){return!!($s(E,C)||Eu(C,E,N))}function wo(E,C){if(E.length===1)return Cu(C,E[0]);for(var N=0;N<C.length;N++)for(var te=C[N],pe=0;pe<te.length;pe++)if($s(E,te[pe]))return!0;for(var be=0;be<E.length;be++)if(Cu(C,E[be]))return!0;for(var Me=0;Me<C.length;Me++)if(Jl(E,C[Me]))return!0;return!1}function Ho(E,C,N){for(var te=0;te<C.length;te++){var pe=C[te];if(E.length>=3){for(var be=0;be<pe.length;be++)if($s(E,pe[be]))return!0}if(Kl(E,pe,N))return!0}return!1}function Kl(E,C,N){if(E.length>1){if(Jl(E,C))return!0;for(var te=0;te<C.length;te++)if(Eu(C[te],E,N))return!0}for(var pe=0;pe<E.length;pe++)if(Eu(E[pe],C,N))return!0;return!1}function Jl(E,C){if(E.length===0||C.length===0)return!1;for(var N=0;N<E.length-1;N++)for(var te=E[N],pe=E[N+1],be=0;be<C.length-1;be++){var Me=C[be],Fe=C[be+1];if(ku(te,pe,Me,Fe))return!0}return!1}function ku(E,C,N,te){return F(E,N,te)!==F(C,N,te)&&F(E,C,N)!==F(E,C,te)}function Eu(E,C,N){var te=N*N;if(C.length===1)return E.distSqr(C[0])<te;for(var pe=1;pe<C.length;pe++){var be=C[pe-1],Me=C[pe];if(rf(E,be,Me)<te)return!0}return!1}function rf(E,C,N){var te=C.distSqr(N);if(te===0)return E.distSqr(C);var pe=((E.x-C.x)*(N.x-C.x)+(E.y-C.y)*(N.y-C.y))/te;return pe<0?E.distSqr(C):pe>1?E.distSqr(N):E.distSqr(N.sub(C)._mult(pe)._add(C))}function Cu(E,C){for(var N=!1,te,pe,be,Me=0;Me<E.length;Me++){te=E[Me];for(var Fe=0,tt=te.length-1;Fe<te.length;tt=Fe++)pe=te[Fe],be=te[tt],pe.y>C.y!=be.y>C.y&&C.x<(be.x-pe.x)*(C.y-pe.y)/(be.y-pe.y)+pe.x&&(N=!N)}return N}function $s(E,C){for(var N=!1,te=0,pe=E.length-1;te<E.length;pe=te++){var be=E[te],Me=E[pe];be.y>C.y!=Me.y>C.y&&C.x<(Me.x-be.x)*(C.y-be.y)/(Me.y-be.y)+be.x&&(N=!N)}return N}function kf(E,C,N,te,pe){for(var be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be];if(C<=Fe.x&&N<=Fe.y&&te>=Fe.x&&pe>=Fe.y)return!0}var tt=[new u(C,N),new u(C,pe),new u(te,pe),new u(te,N)];if(E.length>2)for(var ct=0,yt=tt;ct<yt.length;ct+=1){var Rt=yt[ct];if($s(E,Rt))return!0}for(var Zt=0;Zt<E.length-1;Zt++){var Ht=E[Zt],lr=E[Zt+1];if(Es(Ht,lr,tt))return!0}return!1}function Es(E,C,N){var te=N[0],pe=N[2];if(E.x<te.x&&C.x<te.x||E.x>pe.x&&C.x>pe.x||E.y<te.y&&C.y<te.y||E.y>pe.y&&C.y>pe.y)return!1;var be=F(E,C,N[0]);return be!==F(E,C,N[1])||be!==F(E,C,N[2])||be!==F(E,C,N[3])}function Rl(E,C,N){var te=C.paint.get(E).value;return te.kind==="constant"?te.value:N.programConfigurations.get(C.id).getMaxValue(E)}function Lu(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function du(E,C,N,te,pe){if(!C[0]&&!C[1])return E;var be=u.convert(C)._mult(pe);N==="viewport"&&be._rotate(-te);for(var Me=[],Fe=0;Fe<E.length;Fe++){var tt=E[Fe];Me.push(tt.sub(be))}return Me}var Pu=new Xi({"circle-sort-key":new ja(cr.layout_circle["circle-sort-key"])}),oh=new Xi({"circle-radius":new ja(cr.paint_circle["circle-radius"]),"circle-color":new ja(cr.paint_circle["circle-color"]),"circle-blur":new ja(cr.paint_circle["circle-blur"]),"circle-opacity":new ja(cr.paint_circle["circle-opacity"]),"circle-translate":new Fa(cr.paint_circle["circle-translate"]),"circle-translate-anchor":new Fa(cr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fa(cr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fa(cr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ja(cr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ja(cr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ja(cr.paint_circle["circle-stroke-opacity"])}),Nf={paint:oh,layout:Pu},xs=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,N=arguments.length;N--;)C+=E[N]*E[N];return Math.sqrt(C)});function zc(){var E=new xs(4);return xs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function Ns(E,C,N){var te=C[0],pe=C[1],be=C[2],Me=C[3],Fe=Math.sin(N),tt=Math.cos(N);return E[0]=te*tt+be*Fe,E[1]=pe*tt+Me*Fe,E[2]=te*-Fe+be*tt,E[3]=pe*-Fe+Me*tt,E}function Fc(){var E=new xs(9);return xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function sh(E,C){var N=Math.sin(C),te=Math.cos(C);return E[0]=te,E[1]=N,E[2]=0,E[3]=-N,E[4]=te,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function lh(){var E=new xs(16);return xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function Lp(E){var C=new xs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function uh(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function rc(E,C){var N=C[0],te=C[1],pe=C[2],be=C[3],Me=C[4],Fe=C[5],tt=C[6],ct=C[7],yt=C[8],Rt=C[9],Zt=C[10],Ht=C[11],lr=C[12],Ir=C[13],ln=C[14],qr=C[15],Mn=N*Fe-te*Me,bn=N*tt-pe*Me,An=N*ct-be*Me,Dn=te*tt-pe*Fe,Xn=te*ct-be*Fe,sa=pe*ct-be*tt,aa=yt*Ir-Rt*lr,za=yt*ln-Zt*lr,Ta=yt*qr-Ht*lr,Sa=Rt*ln-Zt*Ir,ti=Rt*qr-Ht*Ir,Da=Zt*qr-Ht*ln,Ia=Mn*Da-bn*ti+An*Sa+Dn*Ta-Xn*za+sa*aa;return Ia?(Ia=1/Ia,E[0]=(Fe*Da-tt*ti+ct*Sa)*Ia,E[1]=(pe*ti-te*Da-be*Sa)*Ia,E[2]=(Ir*sa-ln*Xn+qr*Dn)*Ia,E[3]=(Zt*Xn-Rt*sa-Ht*Dn)*Ia,E[4]=(tt*Ta-Me*Da-ct*za)*Ia,E[5]=(N*Da-pe*Ta+be*za)*Ia,E[6]=(ln*An-lr*sa-qr*bn)*Ia,E[7]=(yt*sa-Zt*An+Ht*bn)*Ia,E[8]=(Me*ti-Fe*Ta+ct*aa)*Ia,E[9]=(te*Ta-N*ti-be*aa)*Ia,E[10]=(lr*Xn-Ir*An+qr*Mn)*Ia,E[11]=(Rt*An-yt*Xn-Ht*Mn)*Ia,E[12]=(Fe*za-Me*Sa-tt*aa)*Ia,E[13]=(N*Sa-te*za+pe*aa)*Ia,E[14]=(Ir*bn-lr*Dn-ln*Mn)*Ia,E[15]=(yt*Dn-Rt*bn+Zt*Mn)*Ia,E):null}function nc(E,C,N){var te=C[0],pe=C[1],be=C[2],Me=C[3],Fe=C[4],tt=C[5],ct=C[6],yt=C[7],Rt=C[8],Zt=C[9],Ht=C[10],lr=C[11],Ir=C[12],ln=C[13],qr=C[14],Mn=C[15],bn=N[0],An=N[1],Dn=N[2],Xn=N[3];return E[0]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[1]=bn*pe+An*tt+Dn*Zt+Xn*ln,E[2]=bn*be+An*ct+Dn*Ht+Xn*qr,E[3]=bn*Me+An*yt+Dn*lr+Xn*Mn,bn=N[4],An=N[5],Dn=N[6],Xn=N[7],E[4]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[5]=bn*pe+An*tt+Dn*Zt+Xn*ln,E[6]=bn*be+An*ct+Dn*Ht+Xn*qr,E[7]=bn*Me+An*yt+Dn*lr+Xn*Mn,bn=N[8],An=N[9],Dn=N[10],Xn=N[11],E[8]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[9]=bn*pe+An*tt+Dn*Zt+Xn*ln,E[10]=bn*be+An*ct+Dn*Ht+Xn*qr,E[11]=bn*Me+An*yt+Dn*lr+Xn*Mn,bn=N[12],An=N[13],Dn=N[14],Xn=N[15],E[12]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[13]=bn*pe+An*tt+Dn*Zt+Xn*ln,E[14]=bn*be+An*ct+Dn*Ht+Xn*qr,E[15]=bn*Me+An*yt+Dn*lr+Xn*Mn,E}function Lo(E,C,N){var te=N[0],pe=N[1],be=N[2],Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr;return C===E?(E[12]=C[0]*te+C[4]*pe+C[8]*be+C[12],E[13]=C[1]*te+C[5]*pe+C[9]*be+C[13],E[14]=C[2]*te+C[6]*pe+C[10]*be+C[14],E[15]=C[3]*te+C[7]*pe+C[11]*be+C[15]):(Me=C[0],Fe=C[1],tt=C[2],ct=C[3],yt=C[4],Rt=C[5],Zt=C[6],Ht=C[7],lr=C[8],Ir=C[9],ln=C[10],qr=C[11],E[0]=Me,E[1]=Fe,E[2]=tt,E[3]=ct,E[4]=yt,E[5]=Rt,E[6]=Zt,E[7]=Ht,E[8]=lr,E[9]=Ir,E[10]=ln,E[11]=qr,E[12]=Me*te+yt*pe+lr*be+C[12],E[13]=Fe*te+Rt*pe+Ir*be+C[13],E[14]=tt*te+Zt*pe+ln*be+C[14],E[15]=ct*te+Ht*pe+qr*be+C[15]),E}function yl(E,C,N){var te=N[0],pe=N[1],be=N[2];return E[0]=C[0]*te,E[1]=C[1]*te,E[2]=C[2]*te,E[3]=C[3]*te,E[4]=C[4]*pe,E[5]=C[5]*pe,E[6]=C[6]*pe,E[7]=C[7]*pe,E[8]=C[8]*be,E[9]=C[9]*be,E[10]=C[10]*be,E[11]=C[11]*be,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function ml(E,C,N){var te=Math.sin(N),pe=Math.cos(N),be=C[4],Me=C[5],Fe=C[6],tt=C[7],ct=C[8],yt=C[9],Rt=C[10],Zt=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=be*pe+ct*te,E[5]=Me*pe+yt*te,E[6]=Fe*pe+Rt*te,E[7]=tt*pe+Zt*te,E[8]=ct*pe-be*te,E[9]=yt*pe-Me*te,E[10]=Rt*pe-Fe*te,E[11]=Zt*pe-tt*te,E}function fh(E,C,N){var te=Math.sin(N),pe=Math.cos(N),be=C[0],Me=C[1],Fe=C[2],tt=C[3],ct=C[4],yt=C[5],Rt=C[6],Zt=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=be*pe+ct*te,E[1]=Me*pe+yt*te,E[2]=Fe*pe+Rt*te,E[3]=tt*pe+Zt*te,E[4]=ct*pe-be*te,E[5]=yt*pe-Me*te,E[6]=Rt*pe-Fe*te,E[7]=Zt*pe-tt*te,E}function cv(E,C,N,te,pe){var be=1/Math.tan(C/2),Me;return E[0]=be/N,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=be,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,pe!=null&&pe!==1/0?(Me=1/(te-pe),E[10]=(pe+te)*Me,E[14]=2*pe*te*Me):(E[10]=-1,E[14]=-2*te),E}function o0(E,C,N,te,pe,be,Me){var Fe=1/(C-N),tt=1/(te-pe),ct=1/(be-Me);return E[0]=-2*Fe,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*tt,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*ct,E[11]=0,E[12]=(C+N)*Fe,E[13]=(pe+te)*tt,E[14]=(Me+be)*ct,E[15]=1,E}var s0=nc;function Oc(){var E=new xs(3);return xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function l0(E){var C=new xs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function ch(E,C,N){return E[0]=C[0]+N[0],E[1]=C[1]+N[1],E[2]=C[2]+N[2],E}function u0(E,C,N){return E[0]=C[0]-N[0],E[1]=C[1]-N[1],E[2]=C[2]-N[2],E}function f0(E,C,N){return E[0]=C[0]*N,E[1]=C[1]*N,E[2]=C[2]*N,E}function hv(E,C){var N=C[0],te=C[1],pe=C[2],be=N*N+te*te+pe*pe;return be>0&&(be=1/Math.sqrt(be)),E[0]=C[0]*be,E[1]=C[1]*be,E[2]=C[2]*be,E}function g2(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function y2(E,C,N){var te=C[0],pe=C[1],be=C[2],Me=N[0],Fe=N[1],tt=N[2];return E[0]=pe*tt-be*Fe,E[1]=be*Me-te*tt,E[2]=te*Fe-pe*Me,E}function m2(E,C,N){var te=C[0],pe=C[1],be=C[2];return E[0]=te*N[0]+pe*N[3]+be*N[6],E[1]=te*N[1]+pe*N[4]+be*N[7],E[2]=te*N[2]+pe*N[5]+be*N[8],E}var x2=u0;(function(){var E=Oc();return function(C,N,te,pe,be,Me){var Fe,tt;for(N||(N=3),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2];return C}})();function b2(){var E=new xs(4);return xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function _2(E,C,N){return E[0]=C[0]*N,E[1]=C[1]*N,E[2]=C[2]*N,E[3]=C[3]*N,E}function w2(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function Pp(E,C,N){var te=C[0],pe=C[1],be=C[2],Me=C[3];return E[0]=N[0]*te+N[4]*pe+N[8]*be+N[12]*Me,E[1]=N[1]*te+N[5]*pe+N[9]*be+N[13]*Me,E[2]=N[2]*te+N[6]*pe+N[10]*be+N[14]*Me,E[3]=N[3]*te+N[7]*pe+N[11]*be+N[15]*Me,E}(function(){var E=b2();return function(C,N,te,pe,be,Me){var Fe,tt;for(N||(N=4),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],E[3]=C[Fe+3],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2],C[Fe+3]=E[3];return C}})();function T2(){var E=new xs(2);return xs!=Float32Array&&(E[0]=0,E[1]=0),E}function A2(E){var C=E[0],N=E[1];return C*C+N*N}var M2=A2;(function(){var E=T2();return function(C,N,te,pe,be,Me){var Fe,tt;for(N||(N=2),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1];return C}})();var S2=function(E){function C(N){E.call(this,N,Nf)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new Zi(te)},C.prototype.queryRadius=function(te){var pe=te;return Rl("circle-radius",this,pe)+Rl("circle-stroke-width",this,pe)+Lu(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Me,Fe,tt,ct,yt){for(var Rt=du(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),Zt=this.paint.get("circle-radius").evaluate(pe,be),Ht=this.paint.get("circle-stroke-width").evaluate(pe,be),lr=Zt+Ht,Ir=this.paint.get("circle-pitch-alignment")==="map",ln=Ir?Rt:k2(Rt,yt),qr=Ir?lr*ct:lr,Mn=0,bn=Me;Mn<bn.length;Mn+=1)for(var An=bn[Mn],Dn=0,Xn=An;Dn<Xn.length;Dn+=1){var sa=Xn[Dn],aa=Ir?sa:Gy(sa,yt),za=qr,Ta=Pp([],[sa.x,sa.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?za*=Ta[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(za*=tt.cameraToCenterDistance/Ta[3]),_i(ln,aa,za))return!0}return!1},C}(ks);function Gy(E,C){var N=Pp([],[E.x,E.y,0,1],C);return new u(N[0]/N[3],N[1]/N[3])}function k2(E,C){return E.map(function(N){return Gy(N,C)})}var Yy=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Zi);Ne("HeatmapBucket",Yy,{omit:["layers"]});function c0(E,C,N,te){var pe=C.width,be=C.height;if(!te)te=new Uint8Array(pe*be*N);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==pe*be*N)throw new RangeError("mismatched image size");return E.width=pe,E.height=be,E.data=te,E}function Wy(E,C,N){var te=C.width,pe=C.height;if(!(te===E.width&&pe===E.height)){var be=c0({},{width:te,height:pe},N);h0(E,be,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,te),height:Math.min(E.height,pe)},N),E.width=te,E.height=pe,E.data=be.data}}function h0(E,C,N,te,pe,be){if(pe.width===0||pe.height===0)return C;if(pe.width>E.width||pe.height>E.height||N.x>E.width-pe.width||N.y>E.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>C.width||pe.height>C.height||te.x>C.width-pe.width||te.y>C.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=E.data,Fe=C.data,tt=0;tt<pe.height;tt++)for(var ct=((N.y+tt)*E.width+N.x)*be,yt=((te.y+tt)*C.width+te.x)*be,Rt=0;Rt<pe.width*be;Rt++)Fe[yt+Rt]=Me[ct+Rt];return C}var Nc=function(C,N){c0(this,C,1,N)};Nc.prototype.resize=function(C){Wy(this,C,1)},Nc.prototype.clone=function(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))},Nc.copy=function(C,N,te,pe,be){h0(C,N,te,pe,be,1)};var xl=function(C,N){c0(this,C,4,N)};xl.prototype.resize=function(C){Wy(this,C,4)},xl.prototype.replace=function(C,N){N?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},xl.prototype.clone=function(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))},xl.copy=function(C,N,te,pe,be){h0(C,N,te,pe,be,4)},Ne("AlphaImage",Nc),Ne("RGBAImage",xl);var E2=new Xi({"heatmap-radius":new ja(cr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ja(cr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fa(cr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zo(cr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fa(cr.paint_heatmap["heatmap-opacity"])}),C2={paint:E2};function Xy(E,C){for(var N=new Uint8Array(256*4),te={},pe=0,be=0;pe<256;pe++,be+=4){te[C]=pe/255;var Me=E.evaluate(te);N[be+0]=Math.floor(Me.r*255/Me.a),N[be+1]=Math.floor(Me.g*255/Me.a),N[be+2]=Math.floor(Me.b*255/Me.a),N[be+3]=Math.floor(Me.a*255)}return new xl({width:256,height:1},N)}var L2=function(E){function C(N){E.call(this,N,C2),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new Yy(te)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Xy(te,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(ks),P2=new Xi({"hillshade-illumination-direction":new Fa(cr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fa(cr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fa(cr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fa(cr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fa(cr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fa(cr.paint_hillshade["hillshade-accent-color"])}),D2={paint:P2},R2=function(E){function C(N){E.call(this,N,D2)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(ks),I2=Fo([{name:"a_pos",components:2,type:"Int16"}],4),jy=I2.members,v0=Dp,z2=Dp;function Dp(E,C,N){N=N||2;var te=C&&C.length,pe=te?C[0]*N:E.length,be=Zy(E,0,pe,N,!0),Me=[];if(!be||be.next===be.prev)return Me;var Fe,tt,ct,yt,Rt,Zt,Ht;if(te&&(be=U2(E,C,be,N)),E.length>80*N){Fe=ct=E[0],tt=yt=E[1];for(var lr=N;lr<pe;lr+=N)Rt=E[lr],Zt=E[lr+1],Rt<Fe&&(Fe=Rt),Zt<tt&&(tt=Zt),Rt>ct&&(ct=Rt),Zt>yt&&(yt=Zt);Ht=Math.max(ct-Fe,yt-tt),Ht=Ht!==0?1/Ht:0}return vv(be,Me,N,Fe,tt,Ht),Me}function Zy(E,C,N,te,pe){var be,Me;if(pe===g0(E,C,N,te)>0)for(be=C;be<N;be+=te)Me=Qy(be,E[be],E[be+1],Me);else for(be=N-te;be>=C;be-=te)Me=Qy(be,E[be],E[be+1],Me);return Me&&Rp(Me,Me.next)&&(dv(Me),Me=Me.next),Me}function ac(E,C){if(!E)return E;C||(C=E);var N=E,te;do if(te=!1,!N.steiner&&(Rp(N,N.next)||Go(N.prev,N,N.next)===0)){if(dv(N),N=C=N.prev,N===N.next)break;te=!0}else N=N.next;while(te||N!==C);return C}function vv(E,C,N,te,pe,be,Me){if(!!E){!Me&&be&&W2(E,te,pe,be);for(var Fe=E,tt,ct;E.prev!==E.next;){if(tt=E.prev,ct=E.next,be?O2(E,te,pe,be):F2(E)){C.push(tt.i/N),C.push(E.i/N),C.push(ct.i/N),dv(E),E=ct.next,Fe=ct.next;continue}if(E=ct,E===Fe){Me?Me===1?(E=N2(ac(E),C,N),vv(E,C,N,te,pe,be,2)):Me===2&&B2(E,C,N,te,pe,be):vv(ac(E),C,N,te,pe,be,1);break}}}}function F2(E){var C=E.prev,N=E,te=E.next;if(Go(C,N,te)>=0)return!1;for(var pe=E.next.next;pe!==E.prev;){if(hh(C.x,C.y,N.x,N.y,te.x,te.y,pe.x,pe.y)&&Go(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function O2(E,C,N,te){var pe=E.prev,be=E,Me=E.next;if(Go(pe,be,Me)>=0)return!1;for(var Fe=pe.x<be.x?pe.x<Me.x?pe.x:Me.x:be.x<Me.x?be.x:Me.x,tt=pe.y<be.y?pe.y<Me.y?pe.y:Me.y:be.y<Me.y?be.y:Me.y,ct=pe.x>be.x?pe.x>Me.x?pe.x:Me.x:be.x>Me.x?be.x:Me.x,yt=pe.y>be.y?pe.y>Me.y?pe.y:Me.y:be.y>Me.y?be.y:Me.y,Rt=p0(Fe,tt,C,N,te),Zt=p0(ct,yt,C,N,te),Ht=E.prevZ,lr=E.nextZ;Ht&&Ht.z>=Rt&&lr&&lr.z<=Zt;){if(Ht!==E.prev&&Ht!==E.next&&hh(pe.x,pe.y,be.x,be.y,Me.x,Me.y,Ht.x,Ht.y)&&Go(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,lr!==E.prev&&lr!==E.next&&hh(pe.x,pe.y,be.x,be.y,Me.x,Me.y,lr.x,lr.y)&&Go(lr.prev,lr,lr.next)>=0))return!1;lr=lr.nextZ}for(;Ht&&Ht.z>=Rt;){if(Ht!==E.prev&&Ht!==E.next&&hh(pe.x,pe.y,be.x,be.y,Me.x,Me.y,Ht.x,Ht.y)&&Go(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;lr&&lr.z<=Zt;){if(lr!==E.prev&&lr!==E.next&&hh(pe.x,pe.y,be.x,be.y,Me.x,Me.y,lr.x,lr.y)&&Go(lr.prev,lr,lr.next)>=0)return!1;lr=lr.nextZ}return!0}function N2(E,C,N){var te=E;do{var pe=te.prev,be=te.next.next;!Rp(pe,be)&&Ky(pe,te,te.next,be)&&pv(pe,be)&&pv(be,pe)&&(C.push(pe.i/N),C.push(te.i/N),C.push(be.i/N),dv(te),dv(te.next),te=E=be),te=te.next}while(te!==E);return ac(te)}function B2(E,C,N,te,pe,be){var Me=E;do{for(var Fe=Me.next.next;Fe!==Me.prev;){if(Me.i!==Fe.i&&Z2(Me,Fe)){var tt=Jy(Me,Fe);Me=ac(Me,Me.next),tt=ac(tt,tt.next),vv(Me,C,N,te,pe,be),vv(tt,C,N,te,pe,be);return}Fe=Fe.next}Me=Me.next}while(Me!==E)}function U2(E,C,N,te){var pe=[],be,Me,Fe,tt,ct;for(be=0,Me=C.length;be<Me;be++)Fe=C[be]*te,tt=be<Me-1?C[be+1]*te:E.length,ct=Zy(E,Fe,tt,te,!1),ct===ct.next&&(ct.steiner=!0),pe.push(j2(ct));for(pe.sort(V2),be=0;be<pe.length;be++)H2(pe[be],N),N=ac(N,N.next);return N}function V2(E,C){return E.x-C.x}function H2(E,C){if(C=G2(E,C),C){var N=Jy(C,E);ac(C,C.next),ac(N,N.next)}}function G2(E,C){var N=C,te=E.x,pe=E.y,be=-1/0,Me;do{if(pe<=N.y&&pe>=N.next.y&&N.next.y!==N.y){var Fe=N.x+(pe-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Fe<=te&&Fe>be){if(be=Fe,Fe===te){if(pe===N.y)return N;if(pe===N.next.y)return N.next}Me=N.x<N.next.x?N:N.next}}N=N.next}while(N!==C);if(!Me)return null;if(te===be)return Me;var tt=Me,ct=Me.x,yt=Me.y,Rt=1/0,Zt;N=Me;do te>=N.x&&N.x>=ct&&te!==N.x&&hh(pe<yt?te:be,pe,ct,yt,pe<yt?be:te,pe,N.x,N.y)&&(Zt=Math.abs(pe-N.y)/(te-N.x),pv(N,E)&&(Zt<Rt||Zt===Rt&&(N.x>Me.x||N.x===Me.x&&Y2(Me,N)))&&(Me=N,Rt=Zt)),N=N.next;while(N!==tt);return Me}function Y2(E,C){return Go(E.prev,E,C.prev)<0&&Go(C.next,E,E.next)<0}function W2(E,C,N,te){var pe=E;do pe.z===null&&(pe.z=p0(pe.x,pe.y,C,N,te)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==E);pe.prevZ.nextZ=null,pe.prevZ=null,X2(pe)}function X2(E){var C,N,te,pe,be,Me,Fe,tt,ct=1;do{for(N=E,E=null,be=null,Me=0;N;){for(Me++,te=N,Fe=0,C=0;C<ct&&(Fe++,te=te.nextZ,!!te);C++);for(tt=ct;Fe>0||tt>0&&te;)Fe!==0&&(tt===0||!te||N.z<=te.z)?(pe=N,N=N.nextZ,Fe--):(pe=te,te=te.nextZ,tt--),be?be.nextZ=pe:E=pe,pe.prevZ=be,be=pe;N=te}be.nextZ=null,ct*=2}while(Me>1);return E}function p0(E,C,N,te,pe){return E=32767*(E-N)*pe,C=32767*(C-te)*pe,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function j2(E){var C=E,N=E;do(C.x<N.x||C.x===N.x&&C.y<N.y)&&(N=C),C=C.next;while(C!==E);return N}function hh(E,C,N,te,pe,be,Me,Fe){return(pe-Me)*(C-Fe)-(E-Me)*(be-Fe)>=0&&(E-Me)*(te-Fe)-(N-Me)*(C-Fe)>=0&&(N-Me)*(be-Fe)-(pe-Me)*(te-Fe)>=0}function Z2(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!K2(E,C)&&(pv(E,C)&&pv(C,E)&&J2(E,C)&&(Go(E.prev,E,C.prev)||Go(E,C.prev,C))||Rp(E,C)&&Go(E.prev,E,E.next)>0&&Go(C.prev,C,C.next)>0)}function Go(E,C,N){return(C.y-E.y)*(N.x-C.x)-(C.x-E.x)*(N.y-C.y)}function Rp(E,C){return E.x===C.x&&E.y===C.y}function Ky(E,C,N,te){var pe=zp(Go(E,C,N)),be=zp(Go(E,C,te)),Me=zp(Go(N,te,E)),Fe=zp(Go(N,te,C));return!!(pe!==be&&Me!==Fe||pe===0&&Ip(E,N,C)||be===0&&Ip(E,te,C)||Me===0&&Ip(N,E,te)||Fe===0&&Ip(N,C,te))}function Ip(E,C,N){return C.x<=Math.max(E.x,N.x)&&C.x>=Math.min(E.x,N.x)&&C.y<=Math.max(E.y,N.y)&&C.y>=Math.min(E.y,N.y)}function zp(E){return E>0?1:E<0?-1:0}function K2(E,C){var N=E;do{if(N.i!==E.i&&N.next.i!==E.i&&N.i!==C.i&&N.next.i!==C.i&&Ky(N,N.next,E,C))return!0;N=N.next}while(N!==E);return!1}function pv(E,C){return Go(E.prev,E,E.next)<0?Go(E,C,E.next)>=0&&Go(E,E.prev,C)>=0:Go(E,C,E.prev)<0||Go(E,E.next,C)<0}function J2(E,C){var N=E,te=!1,pe=(E.x+C.x)/2,be=(E.y+C.y)/2;do N.y>be!=N.next.y>be&&N.next.y!==N.y&&pe<(N.next.x-N.x)*(be-N.y)/(N.next.y-N.y)+N.x&&(te=!te),N=N.next;while(N!==E);return te}function Jy(E,C){var N=new d0(E.i,E.x,E.y),te=new d0(C.i,C.x,C.y),pe=E.next,be=C.prev;return E.next=C,C.prev=E,N.next=pe,pe.prev=N,te.next=N,N.prev=te,be.next=te,te.prev=be,te}function Qy(E,C,N,te){var pe=new d0(E,C,N);return te?(pe.next=te.next,pe.prev=te,te.next.prev=pe,te.next=pe):(pe.prev=pe,pe.next=pe),pe}function dv(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function d0(E,C,N){this.i=E,this.x=C,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Dp.deviation=function(E,C,N,te){var pe=C&&C.length,be=pe?C[0]*N:E.length,Me=Math.abs(g0(E,0,be,N));if(pe)for(var Fe=0,tt=C.length;Fe<tt;Fe++){var ct=C[Fe]*N,yt=Fe<tt-1?C[Fe+1]*N:E.length;Me-=Math.abs(g0(E,ct,yt,N))}var Rt=0;for(Fe=0;Fe<te.length;Fe+=3){var Zt=te[Fe]*N,Ht=te[Fe+1]*N,lr=te[Fe+2]*N;Rt+=Math.abs((E[Zt]-E[lr])*(E[Ht+1]-E[Zt+1])-(E[Zt]-E[Ht])*(E[lr+1]-E[Zt+1]))}return Me===0&&Rt===0?0:Math.abs((Rt-Me)/Me)};function g0(E,C,N,te){for(var pe=0,be=C,Me=N-te;be<N;be+=te)pe+=(E[Me]-E[be])*(E[be+1]+E[Me+1]),Me=be;return pe}Dp.flatten=function(E){for(var C=E[0][0].length,N={vertices:[],holes:[],dimensions:C},te=0,pe=0;pe<E.length;pe++){for(var be=0;be<E[pe].length;be++)for(var Me=0;Me<C;Me++)N.vertices.push(E[pe][be][Me]);pe>0&&(te+=E[pe-1].length,N.holes.push(te))}return N},v0.default=z2;function Q2(E,C,N,te,pe){$y(E,C,N||0,te||E.length-1,pe||$2)}function $y(E,C,N,te,pe){for(;te>N;){if(te-N>600){var be=te-N+1,Me=C-N+1,Fe=Math.log(be),tt=.5*Math.exp(2*Fe/3),ct=.5*Math.sqrt(Fe*tt*(be-tt)/be)*(Me-be/2<0?-1:1),yt=Math.max(N,Math.floor(C-Me*tt/be+ct)),Rt=Math.min(te,Math.floor(C+(be-Me)*tt/be+ct));$y(E,C,yt,Rt,pe)}var Zt=E[C],Ht=N,lr=te;for(gv(E,N,C),pe(E[te],Zt)>0&&gv(E,N,te);Ht<lr;){for(gv(E,Ht,lr),Ht++,lr--;pe(E[Ht],Zt)<0;)Ht++;for(;pe(E[lr],Zt)>0;)lr--}pe(E[N],Zt)===0?gv(E,N,lr):(lr++,gv(E,lr,te)),lr<=C&&(N=lr+1),C<=lr&&(te=lr-1)}}function gv(E,C,N){var te=E[C];E[C]=E[N],E[N]=te}function $2(E,C){return E<C?-1:E>C?1:0}function y0(E,C){var N=E.length;if(N<=1)return[E];for(var te=[],pe,be,Me=0;Me<N;Me++){var Fe=Y(E[Me]);Fe!==0&&(E[Me].area=Math.abs(Fe),be===void 0&&(be=Fe<0),be===Fe<0?(pe&&te.push(pe),pe=[E[Me]]):pe.push(E[Me]))}if(pe&&te.push(pe),C>1)for(var tt=0;tt<te.length;tt++)te[tt].length<=C||(Q2(te[tt],C,1,te[tt].length-1,q2),te[tt]=te[tt].slice(0,C));return te}function q2(E,C){return C.area-E.area}function m0(E,C,N){for(var te=N.patternDependencies,pe=!1,be=0,Me=C;be<Me.length;be+=1){var Fe=Me[be],tt=Fe.paint.get(E+"-pattern");tt.isConstant()||(pe=!0);var ct=tt.constantOr(null);ct&&(pe=!0,te[ct.to]=!0,te[ct.from]=!0)}return pe}function x0(E,C,N,te,pe){for(var be=pe.patternDependencies,Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.paint.get(E+"-pattern"),yt=ct.value;if(yt.kind!=="constant"){var Rt=yt.evaluate({zoom:te-1},N,{},pe.availableImages),Zt=yt.evaluate({zoom:te},N,{},pe.availableImages),Ht=yt.evaluate({zoom:te+1},N,{},pe.availableImages);Rt=Rt&&Rt.name?Rt.name:Rt,Zt=Zt&&Zt.name?Zt.name:Zt,Ht=Ht&&Ht.name?Ht.name:Ht,be[Rt]=!0,be[Zt]=!0,be[Ht]=!0,N.patterns[tt.id]={min:Rt,mid:Zt,max:Ht}}}return N}var e_=500,nf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pc,this.indexArray=new tf,this.indexArray2=new Ic,this.programConfigurations=new ni(jy,C.layers,C.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};nf.prototype.populate=function(C,N,te){this.hasPattern=m0("fill",this.layers,N);for(var pe=this.layers[0].layout.get("fill-sort-key"),be=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.feature,yt=tt.id,Rt=tt.index,Zt=tt.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:yt,properties:ct.properties,geometry:Ht?Bi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),lr,te)){Ht||(lr.geometry=Bi(ct));var Ir=pe?pe.evaluate(lr,{},te,N.availableImages):void 0,ln={id:yt,properties:ct.properties,type:ct.type,sourceLayerIndex:Zt,index:Rt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(ln)}}pe&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Dn=An.geometry,Xn=An.index,sa=An.sourceLayerIndex;if(this.hasPattern){var aa=x0("fill",this.layers,bn,this.zoom,N);this.patternFeatures.push(aa)}else this.addFeature(bn,Dn,Xn,te,{});var za=C[Xn].feature;N.featureIndex.insert(za,Dn,Xn,sa,this.index)}},nf.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},nf.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Me=be[pe];this.addFeature(Me,Me.geometry,Me.index,N,te)}},nf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,jy),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},nf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},nf.prototype.addFeature=function(C,N,te,pe,be){for(var Me=0,Fe=y0(N,e_);Me<Fe.length;Me+=1){for(var tt=Fe[Me],ct=0,yt=0,Rt=tt;yt<Rt.length;yt+=1){var Zt=Rt[yt];ct+=Zt.length}for(var Ht=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),lr=Ht.vertexLength,Ir=[],ln=[],qr=0,Mn=tt;qr<Mn.length;qr+=1){var bn=Mn[qr];if(bn.length!==0){bn!==tt[0]&&ln.push(Ir.length/2);var An=this.segments2.prepareSegment(bn.length,this.layoutVertexArray,this.indexArray2),Dn=An.vertexLength;this.layoutVertexArray.emplaceBack(bn[0].x,bn[0].y),this.indexArray2.emplaceBack(Dn+bn.length-1,Dn),Ir.push(bn[0].x),Ir.push(bn[0].y);for(var Xn=1;Xn<bn.length;Xn++)this.layoutVertexArray.emplaceBack(bn[Xn].x,bn[Xn].y),this.indexArray2.emplaceBack(Dn+Xn-1,Dn+Xn),Ir.push(bn[Xn].x),Ir.push(bn[Xn].y);An.vertexLength+=bn.length,An.primitiveLength+=bn.length}}for(var sa=v0(Ir,ln),aa=0;aa<sa.length;aa+=3)this.indexArray.emplaceBack(lr+sa[aa],lr+sa[aa+1],lr+sa[aa+2]);Ht.vertexLength+=ct,Ht.primitiveLength+=sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},Ne("FillBucket",nf,{omit:["layers","patternFeatures"]});var t_=new Xi({"fill-sort-key":new ja(cr.layout_fill["fill-sort-key"])}),r_=new Xi({"fill-antialias":new Fa(cr.paint_fill["fill-antialias"]),"fill-opacity":new ja(cr.paint_fill["fill-opacity"]),"fill-color":new ja(cr.paint_fill["fill-color"]),"fill-outline-color":new ja(cr.paint_fill["fill-outline-color"]),"fill-translate":new Fa(cr.paint_fill["fill-translate"]),"fill-translate-anchor":new Fa(cr.paint_fill["fill-translate-anchor"]),"fill-pattern":new bo(cr.paint_fill["fill-pattern"])}),n_={paint:r_,layout:t_},a_=function(E){function C(N){E.call(this,N,n_)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){E.prototype.recalculate.call(this,te,pe);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(te){return new nf(te)},C.prototype.queryRadius=function(){return Lu(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Me,Fe,tt,ct){var yt=du(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct);return wo(yt,Me)},C.prototype.isTileClipped=function(){return!0},C}(ks),i_=Fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qy=i_.members,em=vh;function vh(E,C,N,te,pe){this.properties={},this.extent=N,this.type=0,this._pbf=E,this._geometry=-1,this._keys=te,this._values=pe,E.readFields(o_,this,C)}function o_(E,C,N){E==1?C.id=N.readVarint():E==2?s_(N,C):E==3?C.type=N.readVarint():E==4&&(C._geometry=N.pos)}function s_(E,C){for(var N=E.readVarint()+E.pos;E.pos<N;){var te=C._keys[E.readVarint()],pe=C._values[E.readVarint()];C.properties[te]=pe}}vh.types=["Unknown","Point","LineString","Polygon"],vh.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,N=1,te=0,pe=0,be=0,Me=[],Fe;E.pos<C;){if(te<=0){var tt=E.readVarint();N=tt&7,te=tt>>3}if(te--,N===1||N===2)pe+=E.readSVarint(),be+=E.readSVarint(),N===1&&(Fe&&Me.push(Fe),Fe=[]),Fe.push(new u(pe,be));else if(N===7)Fe&&Fe.push(Fe[0].clone());else throw new Error("unknown command "+N)}return Fe&&Me.push(Fe),Me},vh.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,N=1,te=0,pe=0,be=0,Me=1/0,Fe=-1/0,tt=1/0,ct=-1/0;E.pos<C;){if(te<=0){var yt=E.readVarint();N=yt&7,te=yt>>3}if(te--,N===1||N===2)pe+=E.readSVarint(),be+=E.readSVarint(),pe<Me&&(Me=pe),pe>Fe&&(Fe=pe),be<tt&&(tt=be),be>ct&&(ct=be);else if(N!==7)throw new Error("unknown command "+N)}return[Me,tt,Fe,ct]},vh.prototype.toGeoJSON=function(E,C,N){var te=this.extent*Math.pow(2,N),pe=this.extent*E,be=this.extent*C,Me=this.loadGeometry(),Fe=vh.types[this.type],tt,ct;function yt(Ht){for(var lr=0;lr<Ht.length;lr++){var Ir=Ht[lr],ln=180-(Ir.y+be)*360/te;Ht[lr]=[(Ir.x+pe)*360/te-180,360/Math.PI*Math.atan(Math.exp(ln*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(tt=0;tt<Me.length;tt++)Rt[tt]=Me[tt][0];Me=Rt,yt(Me);break;case 2:for(tt=0;tt<Me.length;tt++)yt(Me[tt]);break;case 3:for(Me=l_(Me),tt=0;tt<Me.length;tt++)for(ct=0;ct<Me[tt].length;ct++)yt(Me[tt][ct]);break}Me.length===1?Me=Me[0]:Fe="Multi"+Fe;var Zt={type:"Feature",geometry:{type:Fe,coordinates:Me},properties:this.properties};return"id"in this&&(Zt.id=this.id),Zt};function l_(E){var C=E.length;if(C<=1)return[E];for(var N=[],te,pe,be=0;be<C;be++){var Me=u_(E[be]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(te&&N.push(te),te=[E[be]]):te.push(E[be]))}return te&&N.push(te),N}function u_(E){for(var C=0,N=0,te=E.length,pe=te-1,be,Me;N<te;pe=N++)be=E[N],Me=E[pe],C+=(Me.x-be.x)*(be.y+Me.y);return C}var tm=rm;function rm(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(f_,this,C),this.length=this._features.length}function f_(E,C,N){E===15?C.version=N.readVarint():E===1?C.name=N.readString():E===5?C.extent=N.readVarint():E===2?C._features.push(N.pos):E===3?C._keys.push(N.readString()):E===4&&C._values.push(c_(N))}function c_(E){for(var C=null,N=E.readVarint()+E.pos;E.pos<N;){var te=E.readVarint()>>3;C=te===1?E.readString():te===2?E.readFloat():te===3?E.readDouble():te===4?E.readVarint64():te===5?E.readVarint():te===6?E.readSVarint():te===7?E.readBoolean():null}return C}rm.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new em(this._pbf,C,this.extent,this._keys,this._values)};var h_=v_;function v_(E,C){this.layers=E.readFields(p_,{},C)}function p_(E,C,N){if(E===3){var te=new tm(N,N.readVarint()+N.pos);te.length&&(C[te.name]=te)}}var d_=h_,g_=em,y_=tm,ph={VectorTile:d_,VectorTileFeature:g_,VectorTileLayer:y_},m_=ph.VectorTileFeature.types,x_=500,b0=Math.pow(2,13);function yv(E,C,N,te,pe,be,Me,Fe){E.emplaceBack(C,N,Math.floor(te*b0)*2+Me,pe*b0*2,be*b0*2,Math.round(Fe))}var af=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new $f,this.indexArray=new tf,this.programConfigurations=new ni(qy,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};af.prototype.populate=function(C,N,te){this.features=[],this.hasPattern=m0("fill-extrusion",this.layers,N);for(var pe=0,be=C;pe<be.length;pe+=1){var Me=be[pe],Fe=Me.feature,tt=Me.id,ct=Me.index,yt=Me.sourceLayerIndex,Rt=this.layers[0]._featureFilter.needGeometry,Zt={type:Fe.type,id:tt,properties:Fe.properties,geometry:Rt?Bi(Fe):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),Zt,te)){var Ht={id:tt,sourceLayerIndex:yt,index:ct,geometry:Rt?Zt.geometry:Bi(Fe),properties:Fe.properties,type:Fe.type,patterns:{}};typeof Fe.id!="undefined"&&(Ht.id=Fe.id),this.hasPattern?this.features.push(x0("fill-extrusion",this.layers,Ht,this.zoom,N)):this.addFeature(Ht,Ht.geometry,ct,te,{}),N.featureIndex.insert(Fe,Ht.geometry,ct,yt,this.index,!0)}}},af.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.features;pe<be.length;pe+=1){var Me=be[pe],Fe=Me.geometry;this.addFeature(Me,Fe,Me.index,N,te)}},af.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},af.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},af.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},af.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,qy),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},af.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},af.prototype.addFeature=function(C,N,te,pe,be){for(var Me=0,Fe=y0(N,x_);Me<Fe.length;Me+=1){for(var tt=Fe[Me],ct=0,yt=0,Rt=tt;yt<Rt.length;yt+=1){var Zt=Rt[yt];ct+=Zt.length}for(var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),lr=0,Ir=tt;lr<Ir.length;lr+=1){var ln=Ir[lr];if(ln.length!==0&&!__(ln))for(var qr=0,Mn=0;Mn<ln.length;Mn++){var bn=ln[Mn];if(Mn>=1){var An=ln[Mn-1];if(!b_(bn,An)){Ht.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Dn=bn.sub(An)._perp()._unit(),Xn=An.dist(bn);qr+Xn>32768&&(qr=0),yv(this.layoutVertexArray,bn.x,bn.y,Dn.x,Dn.y,0,0,qr),yv(this.layoutVertexArray,bn.x,bn.y,Dn.x,Dn.y,0,1,qr),qr+=Xn,yv(this.layoutVertexArray,An.x,An.y,Dn.x,Dn.y,0,0,qr),yv(this.layoutVertexArray,An.x,An.y,Dn.x,Dn.y,0,1,qr);var sa=Ht.vertexLength;this.indexArray.emplaceBack(sa,sa+2,sa+1),this.indexArray.emplaceBack(sa+1,sa+2,sa+3),Ht.vertexLength+=4,Ht.primitiveLength+=2}}}}if(Ht.vertexLength+ct>W.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),m_[C.type]==="Polygon"){for(var aa=[],za=[],Ta=Ht.vertexLength,Sa=0,ti=tt;Sa<ti.length;Sa+=1){var Da=ti[Sa];if(Da.length!==0){Da!==tt[0]&&za.push(aa.length/2);for(var Ia=0;Ia<Da.length;Ia++){var ui=Da[Ia];yv(this.layoutVertexArray,ui.x,ui.y,0,0,1,1,0),aa.push(ui.x),aa.push(ui.y)}}}for(var qa=v0(aa,za),Si=0;Si<qa.length;Si+=3)this.indexArray.emplaceBack(Ta+qa[Si],Ta+qa[Si+2],Ta+qa[Si+1]);Ht.primitiveLength+=qa.length/3,Ht.vertexLength+=ct}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},Ne("FillExtrusionBucket",af,{omit:["layers","features"]});function b_(E,C){return E.x===C.x&&(E.x<0||E.x>Ua)||E.y===C.y&&(E.y<0||E.y>Ua)}function __(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Ua})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Ua})}var w_=new Xi({"fill-extrusion-opacity":new Fa(cr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ja(cr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fa(cr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fa(cr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bo(cr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ja(cr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ja(cr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fa(cr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),T_={paint:w_},A_=function(E){function C(N){E.call(this,N,T_)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new af(te)},C.prototype.queryRadius=function(){return Lu(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(te,pe,be,Me,Fe,tt,ct,yt){var Rt=du(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),Zt=this.paint.get("fill-extrusion-height").evaluate(pe,be),Ht=this.paint.get("fill-extrusion-base").evaluate(pe,be),lr=k_(Rt,yt,tt,0),Ir=S_(Me,Ht,Zt,yt),ln=Ir[0],qr=Ir[1];return M_(ln,qr,lr)},C}(ks);function mv(E,C){return E.x*C.x+E.y*C.y}function nm(E,C){if(E.length===1){for(var N=0,te=C[N++],pe;!pe||te.equals(pe);)if(pe=C[N++],!pe)return 1/0;for(;N<C.length;N++){var be=C[N],Me=E[0],Fe=pe.sub(te),tt=be.sub(te),ct=Me.sub(te),yt=mv(Fe,Fe),Rt=mv(Fe,tt),Zt=mv(tt,tt),Ht=mv(ct,Fe),lr=mv(ct,tt),Ir=yt*Zt-Rt*Rt,ln=(Zt*Ht-Rt*lr)/Ir,qr=(yt*lr-Rt*Ht)/Ir,Mn=1-ln-qr,bn=te.z*Mn+pe.z*ln+be.z*qr;if(isFinite(bn))return bn}return 1/0}else{for(var An=1/0,Dn=0,Xn=C;Dn<Xn.length;Dn+=1){var sa=Xn[Dn];An=Math.min(An,sa.z)}return An}}function M_(E,C,N){var te=1/0;wo(N,C)&&(te=nm(N,C[0]));for(var pe=0;pe<C.length;pe++)for(var be=C[pe],Me=E[pe],Fe=0;Fe<be.length-1;Fe++){var tt=be[Fe],ct=be[Fe+1],yt=Me[Fe],Rt=Me[Fe+1],Zt=[tt,ct,Rt,yt,tt];ii(N,Zt)&&(te=Math.min(te,nm(N,Zt)))}return te===1/0?!1:te}function S_(E,C,N,te){for(var pe=[],be=[],Me=te[8]*C,Fe=te[9]*C,tt=te[10]*C,ct=te[11]*C,yt=te[8]*N,Rt=te[9]*N,Zt=te[10]*N,Ht=te[11]*N,lr=0,Ir=E;lr<Ir.length;lr+=1){for(var ln=Ir[lr],qr=[],Mn=[],bn=0,An=ln;bn<An.length;bn+=1){var Dn=An[bn],Xn=Dn.x,sa=Dn.y,aa=te[0]*Xn+te[4]*sa+te[12],za=te[1]*Xn+te[5]*sa+te[13],Ta=te[2]*Xn+te[6]*sa+te[14],Sa=te[3]*Xn+te[7]*sa+te[15],ti=aa+Me,Da=za+Fe,Ia=Ta+tt,ui=Sa+ct,qa=aa+yt,Si=za+Rt,Wi=Ta+Zt,ki=Sa+Ht,Ei=new u(ti/ui,Da/ui);Ei.z=Ia/ui,qr.push(Ei);var wi=new u(qa/ki,Si/ki);wi.z=Wi/ki,Mn.push(wi)}pe.push(qr),be.push(Mn)}return[pe,be]}function k_(E,C,N,te){for(var pe=[],be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be],tt=[Fe.x,Fe.y,te,1];Pp(tt,tt,C),pe.push(new u(tt[0]/tt[3],tt[1]/tt[3]))}return pe}var E_=Fo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),am=E_.members,C_=ph.VectorTileFeature.types,im=63,L_=Math.cos(75/2*(Math.PI/180)),P_=15,D_=20,R_=15,om=1/2,sm=Math.pow(2,R_-1)/om,bl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nh,this.indexArray=new tf,this.programConfigurations=new ni(am,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};bl.prototype.populate=function(C,N,te){this.hasPattern=m0("line",this.layers,N);for(var pe=this.layers[0].layout.get("line-sort-key"),be=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.feature,yt=tt.id,Rt=tt.index,Zt=tt.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:yt,properties:ct.properties,geometry:Ht?Bi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),lr,te)){Ht||(lr.geometry=Bi(ct));var Ir=pe?pe.evaluate(lr,{},te):void 0,ln={id:yt,properties:ct.properties,type:ct.type,sourceLayerIndex:Zt,index:Rt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(ln)}}pe&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Dn=An.geometry,Xn=An.index,sa=An.sourceLayerIndex;if(this.hasPattern){var aa=x0("line",this.layers,bn,this.zoom,N);this.patternFeatures.push(aa)}else this.addFeature(bn,Dn,Xn,te,{});var za=C[Xn].feature;N.featureIndex.insert(za,Dn,Xn,sa,this.index)}},bl.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},bl.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Me=be[pe];this.addFeature(Me,Me.geometry,Me.index,N,te)}},bl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,am),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},bl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bl.prototype.addFeature=function(C,N,te,pe,be){for(var Me=this.layers[0].layout,Fe=Me.get("line-join").evaluate(C,{}),tt=Me.get("line-cap"),ct=Me.get("line-miter-limit"),yt=Me.get("line-round-limit"),Rt=0,Zt=N;Rt<Zt.length;Rt+=1){var Ht=Zt[Rt];this.addLine(Ht,C,Fe,tt,ct,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},bl.prototype.addLine=function(C,N,te,pe,be,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Fe=0;Fe<C.length-1;Fe++)this.totalDistance+=C[Fe].dist(C[Fe+1]);this.updateScaledDistance()}for(var tt=C_[N.type]==="Polygon",ct=C.length;ct>=2&&C[ct-1].equals(C[ct-2]);)ct--;for(var yt=0;yt<ct-1&&C[yt].equals(C[yt+1]);)yt++;if(!(ct<(tt?3:2))){te==="bevel"&&(be=1.05);var Rt=this.overscaling<=16?P_*Ua/(512*this.overscaling):0,Zt=this.segments.prepareSegment(ct*10,this.layoutVertexArray,this.indexArray),Ht,lr=void 0,Ir=void 0,ln=void 0,qr=void 0;this.e1=this.e2=-1,tt&&(Ht=C[ct-2],qr=C[yt].sub(Ht)._unit()._perp());for(var Mn=yt;Mn<ct;Mn++)if(Ir=Mn===ct-1?tt?C[yt+1]:void 0:C[Mn+1],!(Ir&&C[Mn].equals(Ir))){qr&&(ln=qr),Ht&&(lr=Ht),Ht=C[Mn],qr=Ir?Ir.sub(Ht)._unit()._perp():ln,ln=ln||qr;var bn=ln.add(qr);(bn.x!==0||bn.y!==0)&&bn._unit();var An=ln.x*qr.x+ln.y*qr.y,Dn=bn.x*qr.x+bn.y*qr.y,Xn=Dn!==0?1/Dn:1/0,sa=2*Math.sqrt(2-2*Dn),aa=Dn<L_&&lr&&Ir,za=ln.x*qr.y-ln.y*qr.x>0;if(aa&&Mn>yt){var Ta=Ht.dist(lr);if(Ta>2*Rt){var Sa=Ht.sub(Ht.sub(lr)._mult(Rt/Ta)._round());this.updateDistance(lr,Sa),this.addCurrentVertex(Sa,ln,0,0,Zt),lr=Sa}}var ti=lr&&Ir,Da=ti?te:tt?"butt":pe;if(ti&&Da==="round"&&(Xn<Me?Da="miter":Xn<=2&&(Da="fakeround")),Da==="miter"&&Xn>be&&(Da="bevel"),Da==="bevel"&&(Xn>2&&(Da="flipbevel"),Xn<be&&(Da="miter")),lr&&this.updateDistance(lr,Ht),Da==="miter")bn._mult(Xn),this.addCurrentVertex(Ht,bn,0,0,Zt);else if(Da==="flipbevel"){if(Xn>100)bn=qr.mult(-1);else{var Ia=Xn*ln.add(qr).mag()/ln.sub(qr).mag();bn._perp()._mult(Ia*(za?-1:1))}this.addCurrentVertex(Ht,bn,0,0,Zt),this.addCurrentVertex(Ht,bn.mult(-1),0,0,Zt)}else if(Da==="bevel"||Da==="fakeround"){var ui=-Math.sqrt(Xn*Xn-1),qa=za?ui:0,Si=za?0:ui;if(lr&&this.addCurrentVertex(Ht,ln,qa,Si,Zt),Da==="fakeround")for(var Wi=Math.round(sa*180/Math.PI/D_),ki=1;ki<Wi;ki++){var Ei=ki/Wi;if(Ei!==.5){var wi=Ei-.5,qi=1.0904+An*(-3.2452+An*(3.55645-An*1.43519)),ao=.848013+An*(-1.06021+An*.215638);Ei=Ei+Ei*wi*(Ei-1)*(qi*wi*wi+ao)}var To=qr.sub(ln)._mult(Ei)._add(ln)._unit()._mult(za?-1:1);this.addHalfVertex(Ht,To.x,To.y,!1,za,0,Zt)}Ir&&this.addCurrentVertex(Ht,qr,-qa,-Si,Zt)}else if(Da==="butt")this.addCurrentVertex(Ht,bn,0,0,Zt);else if(Da==="square"){var Po=lr?1:-1;this.addCurrentVertex(Ht,bn,Po,Po,Zt)}else Da==="round"&&(lr&&(this.addCurrentVertex(Ht,ln,0,0,Zt),this.addCurrentVertex(Ht,ln,1,1,Zt,!0)),Ir&&(this.addCurrentVertex(Ht,qr,-1,-1,Zt,!0),this.addCurrentVertex(Ht,qr,0,0,Zt)));if(aa&&Mn<ct-1){var os=Ht.dist(Ir);if(os>2*Rt){var Xo=Ht.add(Ir.sub(Ht)._mult(Rt/os)._round());this.updateDistance(Ht,Xo),this.addCurrentVertex(Xo,qr,0,0,Zt),Ht=Xo}}}}},bl.prototype.addCurrentVertex=function(C,N,te,pe,be,Me){Me===void 0&&(Me=!1);var Fe=N.x+N.y*te,tt=N.y-N.x*te,ct=-N.x+N.y*pe,yt=-N.y-N.x*pe;this.addHalfVertex(C,Fe,tt,Me,!1,te,be),this.addHalfVertex(C,ct,yt,Me,!0,-pe,be),this.distance>sm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,N,te,pe,be,Me))},bl.prototype.addHalfVertex=function(C,N,te,pe,be,Me,Fe){var tt=C.x,ct=C.y,yt=this.scaledDistance*om;this.layoutVertexArray.emplaceBack((tt<<1)+(pe?1:0),(ct<<1)+(be?1:0),Math.round(im*N)+128,Math.round(im*te)+128,(Me===0?0:Me<0?-1:1)+1|(yt&63)<<2,yt>>6);var Rt=Fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Fe.primitiveLength++),be?this.e2=Rt:this.e1=Rt},bl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(sm-1):this.distance},bl.prototype.updateDistance=function(C,N){this.distance+=C.dist(N),this.updateScaledDistance()},Ne("LineBucket",bl,{omit:["layers","patternFeatures"]});var I_=new Xi({"line-cap":new Fa(cr.layout_line["line-cap"]),"line-join":new ja(cr.layout_line["line-join"]),"line-miter-limit":new Fa(cr.layout_line["line-miter-limit"]),"line-round-limit":new Fa(cr.layout_line["line-round-limit"]),"line-sort-key":new ja(cr.layout_line["line-sort-key"])}),z_=new Xi({"line-opacity":new ja(cr.paint_line["line-opacity"]),"line-color":new ja(cr.paint_line["line-color"]),"line-translate":new Fa(cr.paint_line["line-translate"]),"line-translate-anchor":new Fa(cr.paint_line["line-translate-anchor"]),"line-width":new ja(cr.paint_line["line-width"]),"line-gap-width":new ja(cr.paint_line["line-gap-width"]),"line-offset":new ja(cr.paint_line["line-offset"]),"line-blur":new ja(cr.paint_line["line-blur"]),"line-dasharray":new ro(cr.paint_line["line-dasharray"]),"line-pattern":new bo(cr.paint_line["line-pattern"]),"line-gradient":new zo(cr.paint_line["line-gradient"])}),lm={paint:z_,layout:I_},F_=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe){return pe=new si(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),E.prototype.possiblyEvaluate.call(this,te,pe)},C.prototype.evaluate=function(te,pe,be,Me){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),E.prototype.evaluate.call(this,te,pe,be,Me)},C}(ja),um=new F_(lm.paint.properties["line-width"].specification);um.useIntegerZoom=!0;var O_=function(E){function C(N){E.call(this,N,lm)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Xy(te,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(te,pe){E.prototype.recalculate.call(this,te,pe),this.paint._values["line-floorwidth"]=um.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},C.prototype.createBucket=function(te){return new bl(te)},C.prototype.queryRadius=function(te){var pe=te,be=fm(Rl("line-width",this,pe),Rl("line-gap-width",this,pe)),Me=Rl("line-offset",this,pe);return be/2+Math.abs(Me)+Lu(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Me,Fe,tt,ct){var yt=du(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),Rt=ct/2*fm(this.paint.get("line-width").evaluate(pe,be),this.paint.get("line-gap-width").evaluate(pe,be)),Zt=this.paint.get("line-offset").evaluate(pe,be);return Zt&&(Me=N_(Me,Zt*ct)),Ho(yt,Me,Rt)},C.prototype.isTileClipped=function(){return!0},C}(ks);function fm(E,C){return C>0?C+2*E:E}function N_(E,C){for(var N=[],te=new u(0,0),pe=0;pe<E.length;pe++){for(var be=E[pe],Me=[],Fe=0;Fe<be.length;Fe++){var tt=be[Fe-1],ct=be[Fe],yt=be[Fe+1],Rt=Fe===0?te:ct.sub(tt)._unit()._perp(),Zt=Fe===be.length-1?te:yt.sub(ct)._unit()._perp(),Ht=Rt._add(Zt)._unit(),lr=Ht.x*Zt.x+Ht.y*Zt.y;Ht._mult(1/lr),Me.push(Ht._mult(C)._add(ct))}N.push(Me)}return N}var _0=Fo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B_=Fo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var U_=Fo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Fo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var cm=Fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),V_=Fo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fo([{name:"triangle",components:3,type:"Uint16"}]),Fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fo([{type:"Float32",name:"offsetX"}]),Fo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function H_(E,C,N){var te=C.layout.get("text-transform").evaluate(N,{});return te==="uppercase"?E=E.toLocaleUpperCase():te==="lowercase"&&(E=E.toLocaleLowerCase()),Xa.applyArabicShaping&&(E=Xa.applyArabicShaping(E)),E}function G_(E,C,N){return E.sections.forEach(function(te){te.text=H_(te.text,C,N)}),E}function Y_(E){var C={},N={},te=[],pe=0;function be(qr){te.push(E[qr]),pe++}function Me(qr,Mn,bn){var An=N[qr];return delete N[qr],N[Mn]=An,te[An].geometry[0].pop(),te[An].geometry[0]=te[An].geometry[0].concat(bn[0]),An}function Fe(qr,Mn,bn){var An=C[Mn];return delete C[Mn],C[qr]=An,te[An].geometry[0].shift(),te[An].geometry[0]=bn[0].concat(te[An].geometry[0]),An}function tt(qr,Mn,bn){var An=bn?Mn[0][Mn[0].length-1]:Mn[0][0];return qr+":"+An.x+":"+An.y}for(var ct=0;ct<E.length;ct++){var yt=E[ct],Rt=yt.geometry,Zt=yt.text?yt.text.toString():null;if(!Zt){be(ct);continue}var Ht=tt(Zt,Rt),lr=tt(Zt,Rt,!0);if(Ht in N&&lr in C&&N[Ht]!==C[lr]){var Ir=Fe(Ht,lr,Rt),ln=Me(Ht,lr,te[Ir].geometry);delete C[Ht],delete N[lr],N[tt(Zt,te[ln].geometry,!0)]=ln,te[Ir].geometry=null}else Ht in N?Me(Ht,lr,Rt):lr in C?Fe(Ht,lr,Rt):(be(ct),C[Ht]=pe-1,N[lr]=pe-1)}return te.filter(function(qr){return qr.geometry})}var xv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function W_(E){for(var C="",N=0;N<E.length;N++){var te=E.charCodeAt(N+1)||null,pe=E.charCodeAt(N-1)||null,be=(!te||!sn(te)||xv[E[N+1]])&&(!pe||!sn(pe)||xv[E[N-1]]);be&&xv[E[N]]?C+=xv[E[N]]:C+=E[N]}return C}var bs=24,X_=function(E,C,N,te,pe){var be,Me,Fe=pe*8-te-1,tt=(1<<Fe)-1,ct=tt>>1,yt=-7,Rt=N?pe-1:0,Zt=N?-1:1,Ht=E[C+Rt];for(Rt+=Zt,be=Ht&(1<<-yt)-1,Ht>>=-yt,yt+=Fe;yt>0;be=be*256+E[C+Rt],Rt+=Zt,yt-=8);for(Me=be&(1<<-yt)-1,be>>=-yt,yt+=te;yt>0;Me=Me*256+E[C+Rt],Rt+=Zt,yt-=8);if(be===0)be=1-ct;else{if(be===tt)return Me?NaN:(Ht?-1:1)*(1/0);Me=Me+Math.pow(2,te),be=be-ct}return(Ht?-1:1)*Me*Math.pow(2,be-te)},j_=function(E,C,N,te,pe,be){var Me,Fe,tt,ct=be*8-pe-1,yt=(1<<ct)-1,Rt=yt>>1,Zt=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ht=te?0:be-1,lr=te?1:-1,Ir=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Fe=isNaN(C)?1:0,Me=yt):(Me=Math.floor(Math.log(C)/Math.LN2),C*(tt=Math.pow(2,-Me))<1&&(Me--,tt*=2),Me+Rt>=1?C+=Zt/tt:C+=Zt*Math.pow(2,1-Rt),C*tt>=2&&(Me++,tt/=2),Me+Rt>=yt?(Fe=0,Me=yt):Me+Rt>=1?(Fe=(C*tt-1)*Math.pow(2,pe),Me=Me+Rt):(Fe=C*Math.pow(2,Rt-1)*Math.pow(2,pe),Me=0));pe>=8;E[N+Ht]=Fe&255,Ht+=lr,Fe/=256,pe-=8);for(Me=Me<<pe|Fe,ct+=pe;ct>0;E[N+Ht]=Me&255,Ht+=lr,Me/=256,ct-=8);E[N+Ht-lr]|=Ir*128},Fp={read:X_,write:j_},Op=no;function no(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}no.Varint=0,no.Fixed64=1,no.Bytes=2,no.Fixed32=5;var w0=(1<<16)*(1<<16),hm=1/w0,Z_=12,vm=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");no.prototype={destroy:function(){this.buf=null},readFields:function(E,C,N){for(N=N||this.length;this.pos<N;){var te=this.readVarint(),pe=te>>3,be=this.pos;this.type=te&7,E(pe,C,this),this.pos===be&&this.skip(te)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=Np(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=dm(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Np(this.buf,this.pos)+Np(this.buf,this.pos+4)*w0;return this.pos+=8,E},readSFixed64:function(){var E=Np(this.buf,this.pos)+dm(this.buf,this.pos+4)*w0;return this.pos+=8,E},readFloat:function(){var E=Fp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Fp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,N,te;return te=C[this.pos++],N=te&127,te<128||(te=C[this.pos++],N|=(te&127)<<7,te<128)||(te=C[this.pos++],N|=(te&127)<<14,te<128)||(te=C[this.pos++],N|=(te&127)<<21,te<128)?N:(te=C[this.pos],N|=(te&15)<<28,K_(N,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=Z_&&vm?uw(this.buf,C,E):lw(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==no.Bytes)return E.push(this.readVarint(C));var N=Bf(this);for(E=E||[];this.pos<N;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==no.Bytes)return E.push(this.readSVarint());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==no.Bytes)return E.push(this.readBoolean());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==no.Bytes)return E.push(this.readFloat());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==no.Bytes)return E.push(this.readDouble());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==no.Bytes)return E.push(this.readFixed32());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==no.Bytes)return E.push(this.readSFixed32());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==no.Bytes)return E.push(this.readFixed64());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==no.Bytes)return E.push(this.readSFixed64());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===no.Varint)for(;this.buf[this.pos++]>127;);else if(C===no.Bytes)this.pos=this.readVarint()+this.pos;else if(C===no.Fixed32)this.pos+=4;else if(C===no.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),gh(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),gh(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),gh(this.buf,E&-1,this.pos),gh(this.buf,Math.floor(E*hm),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),gh(this.buf,E&-1,this.pos),gh(this.buf,Math.floor(E*hm),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){J_(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=fw(this.buf,E,this.pos);var N=this.pos-C;N>=128&&pm(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(E){this.realloc(4),Fp.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),Fp.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=E[N]},writeRawMessage:function(E,C){this.pos++;var N=this.pos;E(C,this);var te=this.pos-N;te>=128&&pm(N,te,this),this.pos=N-1,this.writeVarint(te),this.pos+=te},writeMessage:function(E,C,N){this.writeTag(E,no.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,q_,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,ew,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,nw,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,tw,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,rw,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,aw,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,iw,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,ow,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,sw,C)},writeBytesField:function(E,C){this.writeTag(E,no.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,no.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,no.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,no.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,no.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,no.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,no.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,no.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,no.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,no.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function K_(E,C,N){var te=N.buf,pe,be;if(be=te[N.pos++],pe=(be&112)>>4,be<128||(be=te[N.pos++],pe|=(be&127)<<3,be<128)||(be=te[N.pos++],pe|=(be&127)<<10,be<128)||(be=te[N.pos++],pe|=(be&127)<<17,be<128)||(be=te[N.pos++],pe|=(be&127)<<24,be<128)||(be=te[N.pos++],pe|=(be&1)<<31,be<128))return dh(E,pe,C);throw new Error("Expected varint not more than 10 bytes")}function Bf(E){return E.type===no.Bytes?E.readVarint()+E.pos:E.pos+1}function dh(E,C,N){return N?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function J_(E,C){var N,te;if(E>=0?(N=E%4294967296|0,te=E/4294967296|0):(N=~(-E%4294967296),te=~(-E/4294967296),N^4294967295?N=N+1|0:(N=0,te=te+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),Q_(N,te,C),$_(te,C)}function Q_(E,C,N){N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos]=E&127}function $_(E,C){var N=(E&7)<<4;C.buf[C.pos++]|=N|((E>>>=3)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127)))))}function pm(E,C,N){var te=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));N.realloc(te);for(var pe=N.pos-1;pe>=E;pe--)N.buf[pe+te]=N.buf[pe]}function q_(E,C){for(var N=0;N<E.length;N++)C.writeVarint(E[N])}function ew(E,C){for(var N=0;N<E.length;N++)C.writeSVarint(E[N])}function tw(E,C){for(var N=0;N<E.length;N++)C.writeFloat(E[N])}function rw(E,C){for(var N=0;N<E.length;N++)C.writeDouble(E[N])}function nw(E,C){for(var N=0;N<E.length;N++)C.writeBoolean(E[N])}function aw(E,C){for(var N=0;N<E.length;N++)C.writeFixed32(E[N])}function iw(E,C){for(var N=0;N<E.length;N++)C.writeSFixed32(E[N])}function ow(E,C){for(var N=0;N<E.length;N++)C.writeFixed64(E[N])}function sw(E,C){for(var N=0;N<E.length;N++)C.writeSFixed64(E[N])}function Np(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function gh(E,C,N){E[N]=C,E[N+1]=C>>>8,E[N+2]=C>>>16,E[N+3]=C>>>24}function dm(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function lw(E,C,N){for(var te="",pe=C;pe<N;){var be=E[pe],Me=null,Fe=be>239?4:be>223?3:be>191?2:1;if(pe+Fe>N)break;var tt,ct,yt;Fe===1?be<128&&(Me=be):Fe===2?(tt=E[pe+1],(tt&192)==128&&(Me=(be&31)<<6|tt&63,Me<=127&&(Me=null))):Fe===3?(tt=E[pe+1],ct=E[pe+2],(tt&192)==128&&(ct&192)==128&&(Me=(be&15)<<12|(tt&63)<<6|ct&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Fe===4&&(tt=E[pe+1],ct=E[pe+2],yt=E[pe+3],(tt&192)==128&&(ct&192)==128&&(yt&192)==128&&(Me=(be&15)<<18|(tt&63)<<12|(ct&63)<<6|yt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Fe=1):Me>65535&&(Me-=65536,te+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),te+=String.fromCharCode(Me),pe+=Fe}return te}function uw(E,C,N){return vm.decode(E.subarray(C,N))}function fw(E,C,N){for(var te=0,pe,be;te<C.length;te++){if(pe=C.charCodeAt(te),pe>55295&&pe<57344)if(be)if(pe<56320){E[N++]=239,E[N++]=191,E[N++]=189,be=pe;continue}else pe=be-55296<<10|pe-56320|65536,be=null;else{pe>56319||te+1===C.length?(E[N++]=239,E[N++]=191,E[N++]=189):be=pe;continue}else be&&(E[N++]=239,E[N++]=191,E[N++]=189,be=null);pe<128?E[N++]=pe:(pe<2048?E[N++]=pe>>6|192:(pe<65536?E[N++]=pe>>12|224:(E[N++]=pe>>18|240,E[N++]=pe>>12&63|128),E[N++]=pe>>6&63|128),E[N++]=pe&63|128)}return N}var T0=3;function cw(E,C,N){E===1&&N.readMessage(hw,C)}function hw(E,C,N){if(E===3){var te=N.readMessage(vw,{}),pe=te.id,be=te.bitmap,Me=te.width,Fe=te.height,tt=te.left,ct=te.top,yt=te.advance;C.push({id:pe,bitmap:new Nc({width:Me+2*T0,height:Fe+2*T0},be),metrics:{width:Me,height:Fe,left:tt,top:ct,advance:yt}})}}function vw(E,C,N){E===1?C.id=N.readVarint():E===2?C.bitmap=N.readBytes():E===3?C.width=N.readVarint():E===4?C.height=N.readVarint():E===5?C.left=N.readSVarint():E===6?C.top=N.readSVarint():E===7&&(C.advance=N.readVarint())}function pw(E){return new Op(E).readFields(cw,[])}var gm=T0;function ym(E){for(var C=0,N=0,te=0,pe=E;te<pe.length;te+=1){var be=pe[te];C+=be.w*be.h,N=Math.max(N,be.w)}E.sort(function(ln,qr){return qr.h-ln.h});for(var Me=Math.max(Math.ceil(Math.sqrt(C/.95)),N),Fe=[{x:0,y:0,w:Me,h:1/0}],tt=0,ct=0,yt=0,Rt=E;yt<Rt.length;yt+=1)for(var Zt=Rt[yt],Ht=Fe.length-1;Ht>=0;Ht--){var lr=Fe[Ht];if(!(Zt.w>lr.w||Zt.h>lr.h)){if(Zt.x=lr.x,Zt.y=lr.y,ct=Math.max(ct,Zt.y+Zt.h),tt=Math.max(tt,Zt.x+Zt.w),Zt.w===lr.w&&Zt.h===lr.h){var Ir=Fe.pop();Ht<Fe.length&&(Fe[Ht]=Ir)}else Zt.h===lr.h?(lr.x+=Zt.w,lr.w-=Zt.w):Zt.w===lr.w?(lr.y+=Zt.h,lr.h-=Zt.h):(Fe.push({x:lr.x+Zt.w,y:lr.y,w:lr.w-Zt.w,h:Zt.h}),lr.y+=Zt.h,lr.h-=Zt.h);break}}return{w:tt,h:ct,fill:C/(tt*ct)||0}}var Il=1,Bp=function(C,N){var te=N.pixelRatio,pe=N.version,be=N.stretchX,Me=N.stretchY,Fe=N.content;this.paddedRect=C,this.pixelRatio=te,this.stretchX=be,this.stretchY=Me,this.content=Fe,this.version=pe},bv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bv.tl.get=function(){return[this.paddedRect.x+Il,this.paddedRect.y+Il]},bv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Il,this.paddedRect.y+this.paddedRect.h-Il]},bv.tlbr.get=function(){return this.tl.concat(this.br)},bv.displaySize.get=function(){return[(this.paddedRect.w-Il*2)/this.pixelRatio,(this.paddedRect.h-Il*2)/this.pixelRatio]},Object.defineProperties(Bp.prototype,bv);var _v=function(C,N){var te={},pe={};this.haveRenderCallbacks=[];var be=[];this.addImages(C,te,be),this.addImages(N,pe,be);var Me=ym(be),Fe=Me.w,tt=Me.h,ct=new xl({width:Fe||1,height:tt||1});for(var yt in C){var Rt=C[yt],Zt=te[yt].paddedRect;xl.copy(Rt.data,ct,{x:0,y:0},{x:Zt.x+Il,y:Zt.y+Il},Rt.data)}for(var Ht in N){var lr=N[Ht],Ir=pe[Ht].paddedRect,ln=Ir.x+Il,qr=Ir.y+Il,Mn=lr.data.width,bn=lr.data.height;xl.copy(lr.data,ct,{x:0,y:0},{x:ln,y:qr},lr.data),xl.copy(lr.data,ct,{x:0,y:bn-1},{x:ln,y:qr-1},{width:Mn,height:1}),xl.copy(lr.data,ct,{x:0,y:0},{x:ln,y:qr+bn},{width:Mn,height:1}),xl.copy(lr.data,ct,{x:Mn-1,y:0},{x:ln-1,y:qr},{width:1,height:bn}),xl.copy(lr.data,ct,{x:0,y:0},{x:ln+Mn,y:qr},{width:1,height:bn})}this.image=ct,this.iconPositions=te,this.patternPositions=pe};_v.prototype.addImages=function(C,N,te){for(var pe in C){var be=C[pe],Me={x:0,y:0,w:be.data.width+2*Il,h:be.data.height+2*Il};te.push(Me),N[pe]=new Bp(Me,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},_v.prototype.patchUpdatedImages=function(C,N){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in C.updatedImages)this.patchUpdatedImage(this.iconPositions[te],C.getImage(te),N),this.patchUpdatedImage(this.patternPositions[te],C.getImage(te),N)},_v.prototype.patchUpdatedImage=function(C,N,te){if(!(!C||!N)&&C.version!==N.version){C.version=N.version;var pe=C.tl,be=pe[0],Me=pe[1];te.update(N.data,void 0,{x:be,y:Me})}},Ne("ImagePosition",Bp),Ne("ImageAtlas",_v);var Ql={horizontal:1,vertical:2,horizontalOnly:3},wv=-17;function dw(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(te.positionedGlyphs.length!==0)return!1}return!0}var mm=57344,xm=63743,yh=function(){this.scale=1,this.fontStack="",this.imageName=null};yh.forText=function(C,N){var te=new yh;return te.scale=C||1,te.fontStack=N,te},yh.forImage=function(C){var N=new yh;return N.imageName=C,N};var Bs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Bs.fromFeature=function(C,N){for(var te=new Bs,pe=0;pe<C.sections.length;pe++){var be=C.sections[pe];be.image?te.addImageSection(be):te.addTextSection(be,N)}return te},Bs.prototype.length=function(){return this.text.length},Bs.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},Bs.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},Bs.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},Bs.prototype.verticalizePunctuation=function(){this.text=W_(this.text)},Bs.prototype.trim=function(){for(var C=0,N=0;N<this.text.length&&Ef[this.text.charCodeAt(N)];N++)C++;for(var te=this.text.length,pe=this.text.length-1;pe>=0&&pe>=C&&Ef[this.text.charCodeAt(pe)];pe--)te--;this.text=this.text.substring(C,te),this.sectionIndex=this.sectionIndex.slice(C,te)},Bs.prototype.substring=function(C,N){var te=new Bs;return te.text=this.text.substring(C,N),te.sectionIndex=this.sectionIndex.slice(C,N),te.sections=this.sections,te},Bs.prototype.toString=function(){return this.text},Bs.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(N,te){return Math.max(N,C.sections[te].scale)},0)},Bs.prototype.addTextSection=function(C,N){this.text+=C.text,this.sections.push(yh.forText(C.scale,C.fontStack||N));for(var te=this.sections.length-1,pe=0;pe<C.text.length;++pe)this.sectionIndex.push(te)},Bs.prototype.addImageSection=function(C){var N=C.image?C.image.name:"";if(N.length===0){O("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){O("Reached maximum number of images "+(xm-mm+2));return}this.text+=String.fromCharCode(te),this.sections.push(yh.forImage(N)),this.sectionIndex.push(this.sections.length-1)},Bs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=xm?null:++this.imageSectionID:(this.imageSectionID=mm,this.imageSectionID)};function gw(E,C){for(var N=[],te=E.text,pe=0,be=0,Me=C;be<Me.length;be+=1){var Fe=Me[be];N.push(E.substring(pe,Fe)),pe=Fe}return pe<te.length&&N.push(E.substring(pe,te.length)),N}function Up(E,C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir){var ln=Bs.fromFeature(E,pe);Rt===Ql.vertical&&ln.verticalizePunctuation();var qr,Mn=Xa.processBidirectionalText,bn=Xa.processStyledBidirectionalText;if(Mn&&ln.sections.length===1){qr=[];for(var An=Mn(ln.toString(),A0(ln,ct,be,C,te,Ht,lr)),Dn=0,Xn=An;Dn<Xn.length;Dn+=1){var sa=Xn[Dn],aa=new Bs;aa.text=sa,aa.sections=ln.sections;for(var za=0;za<sa.length;za++)aa.sectionIndex.push(0);qr.push(aa)}}else if(bn){qr=[];for(var Ta=bn(ln.text,ln.sectionIndex,A0(ln,ct,be,C,te,Ht,lr)),Sa=0,ti=Ta;Sa<ti.length;Sa+=1){var Da=ti[Sa],Ia=new Bs;Ia.text=Da[0],Ia.sectionIndex=Da[1],Ia.sections=ln.sections,qr.push(Ia)}}else qr=gw(ln,A0(ln,ct,be,C,te,Ht,lr));var ui=[],qa={positionedLines:ui,text:ln.toString(),top:yt[1],bottom:yt[1],left:yt[0],right:yt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return xw(qa,C,N,te,qr,Me,Fe,tt,Rt,ct,Zt,Ir),dw(ui)?!1:qa}var Ef={};Ef[9]=!0,Ef[10]=!0,Ef[11]=!0,Ef[12]=!0,Ef[13]=!0,Ef[32]=!0;var zl={};zl[10]=!0,zl[32]=!0,zl[38]=!0,zl[40]=!0,zl[41]=!0,zl[43]=!0,zl[45]=!0,zl[47]=!0,zl[173]=!0,zl[183]=!0,zl[8203]=!0,zl[8208]=!0,zl[8211]=!0,zl[8231]=!0;function bm(E,C,N,te,pe,be){if(C.imageName){var tt=te[C.imageName];return tt?tt.displaySize[0]*C.scale*bs/be+pe:0}else{var Me=N[C.fontStack],Fe=Me&&Me[E];return Fe?Fe.metrics.advance*C.scale+pe:0}}function yw(E,C,N,te,pe,be){for(var Me=0,Fe=0;Fe<E.length();Fe++){var tt=E.getSection(Fe);Me+=bm(E.getCharCode(Fe),tt,te,pe,C,be)}var ct=Math.max(1,Math.ceil(Me/N));return Me/ct}function _m(E,C,N,te){var pe=Math.pow(E-C,2);return te?E<C?pe/2:pe*2:pe+Math.abs(N)*N}function mw(E,C,N){var te=0;return E===10&&(te-=1e4),N&&(te+=150),(E===40||E===65288)&&(te+=50),(C===41||C===65289)&&(te+=50),te}function wm(E,C,N,te,pe,be){for(var Me=null,Fe=_m(C,N,pe,be),tt=0,ct=te;tt<ct.length;tt+=1){var yt=ct[tt],Rt=C-yt.x,Zt=_m(Rt,N,pe,be)+yt.badness;Zt<=Fe&&(Me=yt,Fe=Zt)}return{index:E,x:C,priorBreak:Me,badness:Fe}}function Tm(E){return E?Tm(E.priorBreak).concat(E.index):[]}function A0(E,C,N,te,pe,be,Me){if(be!=="point")return[];if(!E)return[];for(var Fe=[],tt=yw(E,C,N,te,pe,Me),ct=E.text.indexOf("\u200B")>=0,yt=0,Rt=0;Rt<E.length();Rt++){var Zt=E.getSection(Rt),Ht=E.getCharCode(Rt);if(Ef[Ht]||(yt+=bm(Ht,Zt,te,pe,C,Me)),Rt<E.length()-1){var lr=Mr(Ht);(zl[Ht]||lr||Zt.imageName)&&Fe.push(wm(Rt+1,yt,tt,Fe,mw(Ht,E.getCharCode(Rt+1),lr&&ct),!1))}}return Tm(wm(E.length(),yt,tt,Fe,0,!0))}function M0(E){var C=.5,N=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:C,verticalAlign:N}}function xw(E,C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt){for(var Zt=0,Ht=wv,lr=0,Ir=0,ln=Fe==="right"?1:Fe==="left"?0:.5,qr=0,Mn=0,bn=pe;Mn<bn.length;Mn+=1){var An=bn[Mn];An.trim();var Dn=An.getMaxScale(),Xn=(Dn-1)*bs,sa={positionedGlyphs:[],lineOffset:0};E.positionedLines[qr]=sa;var aa=sa.positionedGlyphs,za=0;if(!An.length()){Ht+=be,++qr;continue}for(var Ta=0;Ta<An.length();Ta++){var Sa=An.getSection(Ta),ti=An.getSectionIndex(Ta),Da=An.getCharCode(Ta),Ia=0,ui=null,qa=null,Si=null,Wi=bs,ki=!(tt===Ql.horizontal||!yt&&!Ur(Da)||yt&&(Ef[Da]||un(Da)));if(Sa.imageName){var To=te[Sa.imageName];if(!To)continue;Si=Sa.imageName,E.iconsInText=E.iconsInText||!0,qa=To.paddedRect;var Po=To.displaySize;Sa.scale=Sa.scale*bs/Rt,ui={width:Po[0],height:Po[1],left:Il,top:-gm,advance:ki?Po[1]:Po[0]};var os=bs-Po[1]*Sa.scale;Ia=Xn+os,Wi=ui.advance;var Xo=ki?Po[0]*Sa.scale-bs*Dn:Po[1]*Sa.scale-bs*Dn;Xo>0&&Xo>za&&(za=Xo)}else{var Ei=N[Sa.fontStack],wi=Ei&&Ei[Da];if(wi&&wi.rect)qa=wi.rect,ui=wi.metrics;else{var qi=C[Sa.fontStack],ao=qi&&qi[Da];if(!ao)continue;ui=ao.metrics}Ia=(Dn-Sa.scale)*bs}ki?(E.verticalizable=!0,aa.push({glyph:Da,imageName:Si,x:Zt,y:Ht+Ia,vertical:ki,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ti,metrics:ui,rect:qa}),Zt+=Wi*Sa.scale+ct):(aa.push({glyph:Da,imageName:Si,x:Zt,y:Ht+Ia,vertical:ki,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ti,metrics:ui,rect:qa}),Zt+=ui.advance*Sa.scale+ct)}if(aa.length!==0){var Us=Zt-ct;lr=Math.max(Us,lr),bw(aa,0,aa.length-1,ln,za)}Zt=0;var Vs=be*Dn+za;sa.lineOffset=Math.max(za,Xn),Ht+=Vs,Ir=Math.max(Vs,Ir),++qr}var ss=Ht-wv,qs=M0(Me),el=qs.horizontalAlign,Qo=qs.verticalAlign;_w(E.positionedLines,ln,el,Qo,lr,Ir,be,ss,pe.length),E.top+=-Qo*ss,E.bottom=E.top+ss,E.left+=-el*lr,E.right=E.left+lr}function bw(E,C,N,te,pe){if(!(!te&&!pe))for(var be=E[N],Me=be.metrics.advance*be.scale,Fe=(E[N].x+Me)*te,tt=C;tt<=N;tt++)E[tt].x-=Fe,E[tt].y+=pe}function _w(E,C,N,te,pe,be,Me,Fe,tt){var ct=(C-N)*pe,yt=0;be!==Me?yt=-Fe*te-wv:yt=(-te*tt+.5)*Me;for(var Rt=0,Zt=E;Rt<Zt.length;Rt+=1)for(var Ht=Zt[Rt],lr=0,Ir=Ht.positionedGlyphs;lr<Ir.length;lr+=1){var ln=Ir[lr];ln.x+=ct,ln.y+=yt}}function ww(E,C,N){var te=M0(N),pe=te.horizontalAlign,be=te.verticalAlign,Me=C[0],Fe=C[1],tt=Me-E.displaySize[0]*pe,ct=tt+E.displaySize[0],yt=Fe-E.displaySize[1]*be,Rt=yt+E.displaySize[1];return{image:E,top:yt,bottom:Rt,left:tt,right:ct}}function Am(E,C,N,te,pe,be){var Me=E.image,Fe;if(Me.content){var tt=Me.content,ct=Me.pixelRatio||1;Fe=[tt[0]/ct,tt[1]/ct,Me.displaySize[0]-tt[2]/ct,Me.displaySize[1]-tt[3]/ct]}var yt=C.left*be,Rt=C.right*be,Zt,Ht,lr,Ir;N==="width"||N==="both"?(Ir=pe[0]+yt-te[3],Ht=pe[0]+Rt+te[1]):(Ir=pe[0]+(yt+Rt-Me.displaySize[0])/2,Ht=Ir+Me.displaySize[0]);var ln=C.top*be,qr=C.bottom*be;return N==="height"||N==="both"?(Zt=pe[1]+ln-te[0],lr=pe[1]+qr+te[2]):(Zt=pe[1]+(ln+qr-Me.displaySize[1])/2,lr=Zt+Me.displaySize[1]),{image:Me,top:Zt,right:Ht,bottom:lr,left:Ir,collisionPadding:Fe}}var mh=function(E){function C(N,te,pe,be){E.call(this,N,te),this.angle=pe,be!==void 0&&(this.segment=be)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(u);Ne("Anchor",mh);var of=128;function S0(E,C){var N=C.expression;if(N.kind==="constant"){var te=N.evaluate(new si(E+1));return{kind:"constant",layoutSize:te}}else{if(N.kind==="source")return{kind:"source"};for(var pe=N.zoomStops,be=N.interpolationType,Me=0;Me<pe.length&&pe[Me]<=E;)Me++;Me=Math.max(0,Me-1);for(var Fe=Me;Fe<pe.length&&pe[Fe]<E+1;)Fe++;Fe=Math.min(pe.length-1,Fe);var tt=pe[Me],ct=pe[Fe];if(N.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:be};var yt=N.evaluate(new si(tt)),Rt=N.evaluate(new si(ct));return{kind:"camera",minZoom:tt,maxZoom:ct,minSize:yt,maxSize:Rt,interpolationType:be}}}function Mm(E,C,N){var te=C.uSize,pe=C.uSizeT,be=N.lowerSize,Me=N.upperSize;return E.kind==="source"?be/of:E.kind==="composite"?lo(be/of,Me/of,pe):te}function Sm(E,C){var N=0,te=0;if(E.kind==="constant")te=E.layoutSize;else if(E.kind!=="source"){var pe=E.interpolationType,be=E.minZoom,Me=E.maxZoom,Fe=pe?v(uo.interpolationFactor(pe,C,be,Me),0,1):0;E.kind==="camera"?te=lo(E.minSize,E.maxSize,Fe):N=Fe}return{uSizeT:N,uSize:te}}var Tw=Object.freeze({__proto__:null,getSizeData:S0,evaluateSizeForFeature:Mm,evaluateSizeForZoom:Sm,SIZE_PACK_FACTOR:of});function km(E,C,N,te,pe){if(C.segment===void 0)return!0;for(var be=C,Me=C.segment+1,Fe=0;Fe>-N/2;){if(Me--,Me<0)return!1;Fe-=E[Me].dist(be),be=E[Me]}Fe+=E[Me].dist(E[Me+1]),Me++;for(var tt=[],ct=0;Fe<N/2;){var yt=E[Me-1],Rt=E[Me],Zt=E[Me+1];if(!Zt)return!1;var Ht=yt.angleTo(Rt)-Rt.angleTo(Zt);for(Ht=Math.abs((Ht+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Fe,angleDelta:Ht}),ct+=Ht;Fe-tt[0].distance>te;)ct-=tt.shift().angleDelta;if(ct>pe)return!1;Me++,Fe+=Rt.dist(Zt)}return!0}function Em(E){for(var C=0,N=0;N<E.length-1;N++)C+=E[N].dist(E[N+1]);return C}function Cm(E,C,N){return E?3/5*C*N:0}function Lm(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function Aw(E,C,N,te,pe,be){for(var Me=Cm(N,pe,be),Fe=Lm(N,te)*be,tt=0,ct=Em(E)/2,yt=0;yt<E.length-1;yt++){var Rt=E[yt],Zt=E[yt+1],Ht=Rt.dist(Zt);if(tt+Ht>ct){var lr=(ct-tt)/Ht,Ir=lo(Rt.x,Zt.x,lr),ln=lo(Rt.y,Zt.y,lr),qr=new mh(Ir,ln,Zt.angleTo(Rt),yt);return qr._round(),!Me||km(E,qr,Fe,Me,C)?qr:void 0}tt+=Ht}}function Mw(E,C,N,te,pe,be,Me,Fe,tt){var ct=Cm(te,be,Me),yt=Lm(te,pe),Rt=yt*Me,Zt=E[0].x===0||E[0].x===tt||E[0].y===0||E[0].y===tt;C-Rt<C/4&&(C=Rt+C/4);var Ht=be*2,lr=Zt?C/2*Fe%C:(yt/2+Ht)*Me*Fe%C;return Pm(E,lr,C,ct,N,Rt,Zt,!1,tt)}function Pm(E,C,N,te,pe,be,Me,Fe,tt){for(var ct=be/2,yt=Em(E),Rt=0,Zt=C-N,Ht=[],lr=0;lr<E.length-1;lr++){for(var Ir=E[lr],ln=E[lr+1],qr=Ir.dist(ln),Mn=ln.angleTo(Ir);Zt+N<Rt+qr;){Zt+=N;var bn=(Zt-Rt)/qr,An=lo(Ir.x,ln.x,bn),Dn=lo(Ir.y,ln.y,bn);if(An>=0&&An<tt&&Dn>=0&&Dn<tt&&Zt-ct>=0&&Zt+ct<=yt){var Xn=new mh(An,Dn,Mn,lr);Xn._round(),(!te||km(E,Xn,be,te,pe))&&Ht.push(Xn)}}Rt+=qr}return!Fe&&!Ht.length&&!Me&&(Ht=Pm(E,Rt/2,N,te,pe,be,Me,!0,tt)),Ht}function Dm(E,C,N,te,pe){for(var be=[],Me=0;Me<E.length;Me++)for(var Fe=E[Me],tt=void 0,ct=0;ct<Fe.length-1;ct++){var yt=Fe[ct],Rt=Fe[ct+1];yt.x<C&&Rt.x<C||(yt.x<C?yt=new u(C,yt.y+(Rt.y-yt.y)*((C-yt.x)/(Rt.x-yt.x)))._round():Rt.x<C&&(Rt=new u(C,yt.y+(Rt.y-yt.y)*((C-yt.x)/(Rt.x-yt.x)))._round()),!(yt.y<N&&Rt.y<N)&&(yt.y<N?yt=new u(yt.x+(Rt.x-yt.x)*((N-yt.y)/(Rt.y-yt.y)),N)._round():Rt.y<N&&(Rt=new u(yt.x+(Rt.x-yt.x)*((N-yt.y)/(Rt.y-yt.y)),N)._round()),!(yt.x>=te&&Rt.x>=te)&&(yt.x>=te?yt=new u(te,yt.y+(Rt.y-yt.y)*((te-yt.x)/(Rt.x-yt.x)))._round():Rt.x>=te&&(Rt=new u(te,yt.y+(Rt.y-yt.y)*((te-yt.x)/(Rt.x-yt.x)))._round()),!(yt.y>=pe&&Rt.y>=pe)&&(yt.y>=pe?yt=new u(yt.x+(Rt.x-yt.x)*((pe-yt.y)/(Rt.y-yt.y)),pe)._round():Rt.y>=pe&&(Rt=new u(yt.x+(Rt.x-yt.x)*((pe-yt.y)/(Rt.y-yt.y)),pe)._round()),(!tt||!yt.equals(tt[tt.length-1]))&&(tt=[yt],be.push(tt)),tt.push(Rt)))))}return be}var xh=Il;function Rm(E,C,N,te){var pe=[],be=E.image,Me=be.pixelRatio,Fe=be.paddedRect.w-2*xh,tt=be.paddedRect.h-2*xh,ct=E.right-E.left,yt=E.bottom-E.top,Rt=be.stretchX||[[0,Fe]],Zt=be.stretchY||[[0,tt]],Ht=function(Ei,wi){return Ei+wi[1]-wi[0]},lr=Rt.reduce(Ht,0),Ir=Zt.reduce(Ht,0),ln=Fe-lr,qr=tt-Ir,Mn=0,bn=lr,An=0,Dn=Ir,Xn=0,sa=ln,aa=0,za=qr;if(be.content&&te){var Ta=be.content;Mn=Vp(Rt,0,Ta[0]),An=Vp(Zt,0,Ta[1]),bn=Vp(Rt,Ta[0],Ta[2]),Dn=Vp(Zt,Ta[1],Ta[3]),Xn=Ta[0]-Mn,aa=Ta[1]-An,sa=Ta[2]-Ta[0]-bn,za=Ta[3]-Ta[1]-Dn}var Sa=function(Ei,wi,qi,ao){var To=Hp(Ei.stretch-Mn,bn,ct,E.left),Po=Gp(Ei.fixed-Xn,sa,Ei.stretch,lr),os=Hp(wi.stretch-An,Dn,yt,E.top),Xo=Gp(wi.fixed-aa,za,wi.stretch,Ir),Us=Hp(qi.stretch-Mn,bn,ct,E.left),Vs=Gp(qi.fixed-Xn,sa,qi.stretch,lr),ss=Hp(ao.stretch-An,Dn,yt,E.top),qs=Gp(ao.fixed-aa,za,ao.stretch,Ir),el=new u(To,os),Qo=new u(Us,os),tl=new u(Us,ss),$l=new u(To,ss),Hf=new u(Po/Me,Xo/Me),sc=new u(Vs/Me,qs/Me),lc=C*Math.PI/180;if(lc){var uc=Math.sin(lc),kh=Math.cos(lc),Du=[kh,-uc,uc,kh];el._matMult(Du),Qo._matMult(Du),$l._matMult(Du),tl._matMult(Du)}var Kp=Ei.stretch+Ei.fixed,I0=qi.stretch+qi.fixed,Jp=wi.stretch+wi.fixed,z0=ao.stretch+ao.fixed,gu={x:be.paddedRect.x+xh+Kp,y:be.paddedRect.y+xh+Jp,w:I0-Kp,h:z0-Jp},Eh=sa/Me/ct,Qp=za/Me/yt;return{tl:el,tr:Qo,bl:$l,br:tl,tex:gu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hf,pixelOffsetBR:sc,minFontScaleX:Eh,minFontScaleY:Qp,isSDF:N}};if(!te||!be.stretchX&&!be.stretchY)pe.push(Sa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Fe+1},{fixed:0,stretch:tt+1}));else for(var ti=Im(Rt,ln,lr),Da=Im(Zt,qr,Ir),Ia=0;Ia<ti.length-1;Ia++)for(var ui=ti[Ia],qa=ti[Ia+1],Si=0;Si<Da.length-1;Si++){var Wi=Da[Si],ki=Da[Si+1];pe.push(Sa(ui,Wi,qa,ki))}return pe}function Vp(E,C,N){for(var te=0,pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe];te+=Math.max(C,Math.min(N,Me[1]))-Math.max(C,Math.min(N,Me[0]))}return te}function Im(E,C,N){for(var te=[{fixed:-xh,stretch:0}],pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe],Fe=Me[0],tt=Me[1],ct=te[te.length-1];te.push({fixed:Fe-ct.stretch,stretch:ct.stretch}),te.push({fixed:Fe-ct.stretch,stretch:ct.stretch+(tt-Fe)})}return te.push({fixed:C+xh,stretch:N}),te}function Hp(E,C,N,te){return E/C*N+te}function Gp(E,C,N,te){return E-C*N/te}function Sw(E,C,N,te,pe,be,Me,Fe){for(var tt=te.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,ct=[],yt=0,Rt=C.positionedLines;yt<Rt.length;yt+=1)for(var Zt=Rt[yt],Ht=0,lr=Zt.positionedGlyphs;Ht<lr.length;Ht+=1){var Ir=lr[Ht];if(!!Ir.rect){var ln=Ir.rect||{},qr=1,Mn=gm+qr,bn=!0,An=1,Dn=0,Xn=(pe||Fe)&&Ir.vertical,sa=Ir.metrics.advance*Ir.scale/2;if(Fe&&C.verticalizable){var aa=(Ir.scale-1)*bs,za=(bs-Ir.metrics.width*Ir.scale)/2;Dn=Zt.lineOffset/2-(Ir.imageName?-za:aa)}if(Ir.imageName){var Ta=Me[Ir.imageName];bn=Ta.sdf,An=Ta.pixelRatio,Mn=Il/An}var Sa=pe?[Ir.x+sa,Ir.y]:[0,0],ti=pe?[0,0]:[Ir.x+sa+N[0],Ir.y+N[1]-Dn],Da=[0,0];Xn&&(Da=ti,ti=[0,0]);var Ia=(Ir.metrics.left-Mn)*Ir.scale-sa+ti[0],ui=(-Ir.metrics.top-Mn)*Ir.scale+ti[1],qa=Ia+ln.w*Ir.scale/An,Si=ui+ln.h*Ir.scale/An,Wi=new u(Ia,ui),ki=new u(qa,ui),Ei=new u(Ia,Si),wi=new u(qa,Si);if(Xn){var qi=new u(-sa,sa-wv),ao=-Math.PI/2,To=bs/2-sa,Po=Ir.imageName?To:0,os=new u(5-wv-To,-Po),Xo=new(Function.prototype.bind.apply(u,[null].concat(Da)));Wi._rotateAround(ao,qi)._add(os)._add(Xo),ki._rotateAround(ao,qi)._add(os)._add(Xo),Ei._rotateAround(ao,qi)._add(os)._add(Xo),wi._rotateAround(ao,qi)._add(os)._add(Xo)}if(tt){var Us=Math.sin(tt),Vs=Math.cos(tt),ss=[Vs,-Us,Us,Vs];Wi._matMult(ss),ki._matMult(ss),Ei._matMult(ss),wi._matMult(ss)}var qs=new u(0,0),el=new u(0,0),Qo=0,tl=0;ct.push({tl:Wi,tr:ki,bl:Ei,br:wi,tex:ln,writingMode:C.writingMode,glyphOffset:Sa,sectionIndex:Ir.sectionIndex,isSDF:bn,pixelOffsetTL:qs,pixelOffsetBR:el,minFontScaleX:Qo,minFontScaleY:tl})}}return ct}var Yp=function(C,N,te,pe,be,Me,Fe,tt,ct,yt){if(this.boxStartIndex=C.length,ct){var Rt=Me.top,Zt=Me.bottom,Ht=Me.collisionPadding;Ht&&(Rt-=Ht[1],Zt+=Ht[3]);var lr=Zt-Rt;lr>0&&(lr=Math.max(10,lr),this.circleDiameter=lr)}else{var Ir=Me.top*Fe-tt,ln=Me.bottom*Fe+tt,qr=Me.left*Fe-tt,Mn=Me.right*Fe+tt,bn=Me.collisionPadding;if(bn&&(qr-=bn[0]*Fe,Ir-=bn[1]*Fe,Mn+=bn[2]*Fe,ln+=bn[3]*Fe),yt){var An=new u(qr,Ir),Dn=new u(Mn,Ir),Xn=new u(qr,ln),sa=new u(Mn,ln),aa=yt*Math.PI/180;An._rotate(aa),Dn._rotate(aa),Xn._rotate(aa),sa._rotate(aa),qr=Math.min(An.x,Dn.x,Xn.x,sa.x),Mn=Math.max(An.x,Dn.x,Xn.x,sa.x),Ir=Math.min(An.y,Dn.y,Xn.y,sa.y),ln=Math.max(An.y,Dn.y,Xn.y,sa.y)}C.emplaceBack(N.x,N.y,qr,Ir,Mn,ln,te,pe,be)}this.boxEndIndex=C.length},bh=function(C,N){if(C===void 0&&(C=[]),N===void 0&&(N=kw),this.data=C,this.length=this.data.length,this.compare=N,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};bh.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},bh.prototype.pop=function(){if(this.length!==0){var C=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),C}},bh.prototype.peek=function(){return this.data[0]},bh.prototype._up=function(C){for(var N=this,te=N.data,pe=N.compare,be=te[C];C>0;){var Me=C-1>>1,Fe=te[Me];if(pe(be,Fe)>=0)break;te[C]=Fe,C=Me}te[C]=be},bh.prototype._down=function(C){for(var N=this,te=N.data,pe=N.compare,be=this.length>>1,Me=te[C];C<be;){var Fe=(C<<1)+1,tt=te[Fe],ct=Fe+1;if(ct<this.length&&pe(te[ct],tt)<0&&(Fe=ct,tt=te[ct]),pe(tt,Me)>=0)break;te[C]=tt,C=Fe}te[C]=Me};function kw(E,C){return E<C?-1:E>C?1:0}function Ew(E,C,N){C===void 0&&(C=1),N===void 0&&(N=!1);for(var te=1/0,pe=1/0,be=-1/0,Me=-1/0,Fe=E[0],tt=0;tt<Fe.length;tt++){var ct=Fe[tt];(!tt||ct.x<te)&&(te=ct.x),(!tt||ct.y<pe)&&(pe=ct.y),(!tt||ct.x>be)&&(be=ct.x),(!tt||ct.y>Me)&&(Me=ct.y)}var yt=be-te,Rt=Me-pe,Zt=Math.min(yt,Rt),Ht=Zt/2,lr=new bh([],Cw);if(Zt===0)return new u(te,pe);for(var Ir=te;Ir<be;Ir+=Zt)for(var ln=pe;ln<Me;ln+=Zt)lr.push(new _h(Ir+Ht,ln+Ht,Ht,E));for(var qr=Pw(E),Mn=lr.length;lr.length;){var bn=lr.pop();(bn.d>qr.d||!qr.d)&&(qr=bn,N&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,Mn)),!(bn.max-qr.d<=C)&&(Ht=bn.h/2,lr.push(new _h(bn.p.x-Ht,bn.p.y-Ht,Ht,E)),lr.push(new _h(bn.p.x+Ht,bn.p.y-Ht,Ht,E)),lr.push(new _h(bn.p.x-Ht,bn.p.y+Ht,Ht,E)),lr.push(new _h(bn.p.x+Ht,bn.p.y+Ht,Ht,E)),Mn+=4)}return N&&(console.log("num probes: "+Mn),console.log("best distance: "+qr.d)),qr.p}function Cw(E,C){return C.max-E.max}function _h(E,C,N,te){this.p=new u(E,C),this.h=N,this.d=Lw(this.p,te),this.max=this.d+this.h*Math.SQRT2}function Lw(E,C){for(var N=!1,te=1/0,pe=0;pe<C.length;pe++)for(var be=C[pe],Me=0,Fe=be.length,tt=Fe-1;Me<Fe;tt=Me++){var ct=be[Me],yt=be[tt];ct.y>E.y!=yt.y>E.y&&E.x<(yt.x-ct.x)*(E.y-ct.y)/(yt.y-ct.y)+ct.x&&(N=!N),te=Math.min(te,rf(E,ct,yt))}return(N?1:-1)*Math.sqrt(te)}function Pw(E){for(var C=0,N=0,te=0,pe=E[0],be=0,Me=pe.length,Fe=Me-1;be<Me;Fe=be++){var tt=pe[be],ct=pe[Fe],yt=tt.x*ct.y-ct.x*tt.y;N+=(tt.x+ct.x)*yt,te+=(tt.y+ct.y)*yt,C+=yt*3}return new _h(N/C,te/C,0,E)}var wh=7,k0=Number.POSITIVE_INFINITY;function zm(E,C){function N(pe,be){var Me=0,Fe=0;be<0&&(be=0);var tt=be/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Fe=tt-wh;break;case"bottom-right":case"bottom-left":Fe=-tt+wh;break;case"bottom":Fe=-be+wh;break;case"top":Fe=be-wh;break}switch(pe){case"top-right":case"bottom-right":Me=-tt;break;case"top-left":case"bottom-left":Me=tt;break;case"left":Me=be;break;case"right":Me=-be;break}return[Me,Fe]}function te(pe,be,Me){var Fe=0,tt=0;switch(be=Math.abs(be),Me=Math.abs(Me),pe){case"top-right":case"top-left":case"top":tt=Me-wh;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Me+wh;break}switch(pe){case"top-right":case"bottom-right":case"right":Fe=-be;break;case"top-left":case"bottom-left":case"left":Fe=be;break}return[Fe,tt]}return C[1]!==k0?te(E,C[0],C[1]):N(E,C[0])}function Dw(E,C,N,te,pe,be,Me){E.createArrays();var Fe=512*E.overscaling;E.tilePixelRatio=Ua/Fe,E.compareText={},E.iconsNeedLinear=!1;var tt=E.layers[0].layout,ct=E.layers[0]._unevaluatedLayout._values,yt={};if(E.textSizeData.kind==="composite"){var Rt=E.textSizeData,Zt=Rt.minZoom,Ht=Rt.maxZoom;yt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new si(Zt),Me),ct["text-size"].possiblyEvaluate(new si(Ht),Me)]}if(E.iconSizeData.kind==="composite"){var lr=E.iconSizeData,Ir=lr.minZoom,ln=lr.maxZoom;yt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new si(Ir),Me),ct["icon-size"].possiblyEvaluate(new si(ln),Me)]}yt.layoutTextSize=ct["text-size"].possiblyEvaluate(new si(E.zoom+1),Me),yt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new si(E.zoom+1),Me),yt.textMaxSize=ct["text-size"].possiblyEvaluate(new si(18));for(var qr=tt.get("text-line-height")*bs,Mn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",bn=tt.get("text-keep-upright"),An=tt.get("text-size"),Dn=function(){var aa=sa[Xn],za=tt.get("text-font").evaluate(aa,{},Me).join(","),Ta=An.evaluate(aa,{},Me),Sa=yt.layoutTextSize.evaluate(aa,{},Me),ti=yt.layoutIconSize.evaluate(aa,{},Me),Da={horizontal:{},vertical:void 0},Ia=aa.text,ui=[0,0];if(Ia){var qa=Ia.toString(),Si=tt.get("text-letter-spacing").evaluate(aa,{},Me)*bs,Wi=Qr(qa)?Si:0,ki=tt.get("text-anchor").evaluate(aa,{},Me),Ei=tt.get("text-variable-anchor");if(!Ei){var wi=tt.get("text-radial-offset").evaluate(aa,{},Me);wi?ui=zm(ki,[wi*bs,k0]):ui=tt.get("text-offset").evaluate(aa,{},Me).map(function(Hf){return Hf*bs})}var qi=Mn?"center":tt.get("text-justify").evaluate(aa,{},Me),ao=tt.get("symbol-placement"),To=ao==="point"?tt.get("text-max-width").evaluate(aa,{},Me)*bs:0,Po=function(){E.allowVerticalPlacement&&_r(qa)&&(Da.vertical=Up(Ia,C,N,pe,za,To,qr,ki,"left",Wi,ui,Ql.vertical,!0,ao,Sa,Ta))};if(!Mn&&Ei){for(var os=qi==="auto"?Ei.map(function(Hf){return E0(Hf)}):[qi],Xo=!1,Us=0;Us<os.length;Us++){var Vs=os[Us];if(!Da.horizontal[Vs])if(Xo)Da.horizontal[Vs]=Da.horizontal[0];else{var ss=Up(Ia,C,N,pe,za,To,qr,"center",Vs,Wi,ui,Ql.horizontal,!1,ao,Sa,Ta);ss&&(Da.horizontal[Vs]=ss,Xo=ss.positionedLines.length===1)}}Po()}else{qi==="auto"&&(qi=E0(ki));var qs=Up(Ia,C,N,pe,za,To,qr,ki,qi,Wi,ui,Ql.horizontal,!1,ao,Sa,Ta);qs&&(Da.horizontal[qi]=qs),Po(),_r(qa)&&Mn&&bn&&(Da.vertical=Up(Ia,C,N,pe,za,To,qr,ki,qi,Wi,ui,Ql.vertical,!1,ao,Sa,Ta))}}var el=void 0,Qo=!1;if(aa.icon&&aa.icon.name){var tl=te[aa.icon.name];tl&&(el=ww(pe[aa.icon.name],tt.get("icon-offset").evaluate(aa,{},Me),tt.get("icon-anchor").evaluate(aa,{},Me)),Qo=tl.sdf,E.sdfIcons===void 0?E.sdfIcons=tl.sdf:E.sdfIcons!==tl.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tl.pixelRatio!==E.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var $l=Om(Da.horizontal)||Da.vertical;E.iconsInText=$l?$l.iconsInText:!1,($l||el)&&Rw(E,aa,Da,el,te,yt,Sa,ti,ui,Qo,Me)},Xn=0,sa=E.features;Xn<sa.length;Xn+=1)Dn();be&&E.generateCollisionDebugBuffers()}function E0(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rw(E,C,N,te,pe,be,Me,Fe,tt,ct,yt){var Rt=be.textMaxSize.evaluate(C,{});Rt===void 0&&(Rt=Me);var Zt=E.layers[0].layout,Ht=Zt.get("icon-offset").evaluate(C,{},yt),lr=Om(N.horizontal),Ir=24,ln=Me/Ir,qr=E.tilePixelRatio*ln,Mn=E.tilePixelRatio*Rt/Ir,bn=E.tilePixelRatio*Fe,An=E.tilePixelRatio*Zt.get("symbol-spacing"),Dn=Zt.get("text-padding")*E.tilePixelRatio,Xn=Zt.get("icon-padding")*E.tilePixelRatio,sa=Zt.get("text-max-angle")/180*Math.PI,aa=Zt.get("text-rotation-alignment")==="map"&&Zt.get("symbol-placement")!=="point",za=Zt.get("icon-rotation-alignment")==="map"&&Zt.get("symbol-placement")!=="point",Ta=Zt.get("symbol-placement"),Sa=An/2,ti=Zt.get("icon-text-fit"),Da;te&&ti!=="none"&&(E.allowVerticalPlacement&&N.vertical&&(Da=Am(te,N.vertical,ti,Zt.get("icon-text-fit-padding"),Ht,ln)),lr&&(te=Am(te,lr,ti,Zt.get("icon-text-fit-padding"),Ht,ln)));var Ia=function(kh,Du){Du.x<0||Du.x>=Ua||Du.y<0||Du.y>=Ua||Iw(E,Du,kh,N,te,pe,Da,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,qr,Dn,aa,tt,bn,Xn,za,Ht,C,be,ct,yt,Me)};if(Ta==="line")for(var ui=0,qa=Dm(C.geometry,0,0,Ua,Ua);ui<qa.length;ui+=1)for(var Si=qa[ui],Wi=Mw(Si,An,sa,N.vertical||lr,te,Ir,Mn,E.overscaling,Ua),ki=0,Ei=Wi;ki<Ei.length;ki+=1){var wi=Ei[ki],qi=lr;(!qi||!zw(E,qi.text,Sa,wi))&&Ia(Si,wi)}else if(Ta==="line-center")for(var ao=0,To=C.geometry;ao<To.length;ao+=1){var Po=To[ao];if(Po.length>1){var os=Aw(Po,sa,N.vertical||lr,te,Ir,Mn);os&&Ia(Po,os)}}else if(C.type==="Polygon")for(var Xo=0,Us=y0(C.geometry,0);Xo<Us.length;Xo+=1){var Vs=Us[Xo],ss=Ew(Vs,16);Ia(Vs[0],new mh(ss.x,ss.y,0))}else if(C.type==="LineString")for(var qs=0,el=C.geometry;qs<el.length;qs+=1){var Qo=el[qs];Ia(Qo,new mh(Qo[0].x,Qo[0].y,0))}else if(C.type==="Point")for(var tl=0,$l=C.geometry;tl<$l.length;tl+=1)for(var Hf=$l[tl],sc=0,lc=Hf;sc<lc.length;sc+=1){var uc=lc[sc];Ia([uc],new mh(uc.x,uc.y,0))}}var Tv=255,ic=Tv*of;function Fm(E,C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr){var Ir=Sw(C,N,Fe,pe,be,Me,te,E.allowVerticalPlacement),ln=E.textSizeData,qr=null;ln.kind==="source"?(qr=[of*pe.layout.get("text-size").evaluate(Me,{})],qr[0]>ic&&O(E.layerIds[0]+': Value for "text-size" is >= '+Tv+'. Reduce your "text-size".')):ln.kind==="composite"&&(qr=[of*Ht.compositeTextSizes[0].evaluate(Me,{},lr),of*Ht.compositeTextSizes[1].evaluate(Me,{},lr)],(qr[0]>ic||qr[1]>ic)&&O(E.layerIds[0]+': Value for "text-size" is >= '+Tv+'. Reduce your "text-size".')),E.addSymbols(E.text,Ir,qr,Fe,be,Me,ct,C,tt.lineStartIndex,tt.lineLength,Zt,lr);for(var Mn=0,bn=yt;Mn<bn.length;Mn+=1){var An=bn[Mn];Rt[An]=E.text.placedSymbolArray.length-1}return Ir.length*4}function Om(E){for(var C in E)return E[C];return null}function Iw(E,C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Dn,Xn,sa,aa){var za,Ta=E.addToLineVertexArray(C,N),Sa,ti,Da,Ia,ui=0,qa=0,Si=0,Wi=0,ki=-1,Ei=-1,wi={},qi=Pe(""),ao=0,To=0;if(Fe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(za=Fe.layout.get("text-offset").evaluate(An,{},sa).map(function(Sv){return Sv*bs}),ao=za[0],To=za[1]):(ao=Fe.layout.get("text-radial-offset").evaluate(An,{},sa)*bs,To=k0),E.allowVerticalPlacement&&te.vertical){var Po=Fe.layout.get("text-rotate").evaluate(An,{},sa),os=Po+90,Xo=te.vertical;Da=new Yp(tt,C,ct,yt,Rt,Xo,Zt,Ht,lr,os),Me&&(Ia=new Yp(tt,C,ct,yt,Rt,Me,ln,qr,lr,os))}if(pe){var Us=Fe.layout.get("icon-rotate").evaluate(An,{}),Vs=Fe.layout.get("icon-text-fit")!=="none",ss=Rm(pe,Us,Xn,Vs),qs=Me?Rm(Me,Us,Xn,Vs):void 0;ti=new Yp(tt,C,ct,yt,Rt,pe,ln,qr,!1,Us),ui=ss.length*4;var el=E.iconSizeData,Qo=null;el.kind==="source"?(Qo=[of*Fe.layout.get("icon-size").evaluate(An,{})],Qo[0]>ic&&O(E.layerIds[0]+': Value for "icon-size" is >= '+Tv+'. Reduce your "icon-size".')):el.kind==="composite"&&(Qo=[of*Dn.compositeIconSizes[0].evaluate(An,{},sa),of*Dn.compositeIconSizes[1].evaluate(An,{},sa)],(Qo[0]>ic||Qo[1]>ic)&&O(E.layerIds[0]+': Value for "icon-size" is >= '+Tv+'. Reduce your "icon-size".')),E.addSymbols(E.icon,ss,Qo,bn,Mn,An,!1,C,Ta.lineStartIndex,Ta.lineLength,-1,sa),ki=E.icon.placedSymbolArray.length-1,qs&&(qa=qs.length*4,E.addSymbols(E.icon,qs,Qo,bn,Mn,An,Ql.vertical,C,Ta.lineStartIndex,Ta.lineLength,-1,sa),Ei=E.icon.placedSymbolArray.length-1)}for(var tl in te.horizontal){var $l=te.horizontal[tl];if(!Sa){qi=Pe($l.text);var Hf=Fe.layout.get("text-rotate").evaluate(An,{},sa);Sa=new Yp(tt,C,ct,yt,Rt,$l,Zt,Ht,lr,Hf)}var sc=$l.positionedLines.length===1;if(Si+=Fm(E,C,$l,be,Fe,lr,An,Ir,Ta,te.vertical?Ql.horizontal:Ql.horizontalOnly,sc?Object.keys(te.horizontal):[tl],wi,ki,Dn,sa),sc)break}te.vertical&&(Wi+=Fm(E,C,te.vertical,be,Fe,lr,An,Ir,Ta,Ql.vertical,["vertical"],wi,Ei,Dn,sa));var lc=Sa?Sa.boxStartIndex:E.collisionBoxArray.length,uc=Sa?Sa.boxEndIndex:E.collisionBoxArray.length,kh=Da?Da.boxStartIndex:E.collisionBoxArray.length,Du=Da?Da.boxEndIndex:E.collisionBoxArray.length,Kp=ti?ti.boxStartIndex:E.collisionBoxArray.length,I0=ti?ti.boxEndIndex:E.collisionBoxArray.length,Jp=Ia?Ia.boxStartIndex:E.collisionBoxArray.length,z0=Ia?Ia.boxEndIndex:E.collisionBoxArray.length,gu=-1,Eh=function(Sv,qm){return Sv&&Sv.circleDiameter?Math.max(Sv.circleDiameter,qm):qm};gu=Eh(Sa,gu),gu=Eh(Da,gu),gu=Eh(ti,gu),gu=Eh(Ia,gu);var Qp=gu>-1?1:0;Qp&&(gu*=aa/bs),E.glyphOffsetArray.length>=Yi.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),An.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,An.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,wi.right>=0?wi.right:-1,wi.center>=0?wi.center:-1,wi.left>=0?wi.left:-1,wi.vertical||-1,ki,Ei,qi,lc,uc,kh,Du,Kp,I0,Jp,z0,ct,Si,Wi,ui,qa,Qp,0,Zt,ao,To,gu)}function zw(E,C,N,te){var pe=E.compareText;if(!(C in pe))pe[C]=[];else for(var be=pe[C],Me=be.length-1;Me>=0;Me--)if(te.dist(be[Me])<N)return!0;return pe[C].push(te),!1}var Fw=ph.VectorTileFeature.types,Ow=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wp(E,C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt){var Ht=Fe?Math.min(ic,Math.round(Fe[0])):0,lr=Fe?Math.min(ic,Math.round(Fe[1])):0;E.emplaceBack(C,N,Math.round(te*32),Math.round(pe*32),be,Me,(Ht<<1)+(tt?1:0),lr,ct*16,yt*16,Rt*256,Zt*256)}function C0(E,C,N){E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N)}function Nw(E){for(var C=0,N=E.sections;C<N.length;C+=1){var te=N[C];if(na(te.text))return!0}return!1}var Th=function(C){this.layoutVertexArray=new Tf,this.indexArray=new tf,this.programConfigurations=C,this.segments=new W,this.dynamicLayoutVertexArray=new iv,this.opacityVertexArray=new ov,this.placedSymbolArray=new tc};Th.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Th.prototype.upload=function(C,N,te,pe){this.isEmpty()||(te&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,_0.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,B_.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,Ow,!0),this.opacityVertexBuffer.itemSize=1),(te||pe)&&this.programConfigurations.upload(C))},Th.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ne("SymbolBuffers",Th);var Av=function(C,N,te){this.layoutVertexArray=new C,this.layoutAttributes=N,this.indexArray=new te,this.segments=new W,this.collisionVertexArray=new dl};Av.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,U_.members,!0)},Av.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ne("CollisionBuffers",Av);var Yi=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uh([]),this.placementViewportMatrix=uh([]);var N=this.layers[0],te=N._unevaluatedLayout._values;this.textSizeData=S0(this.zoom,te["text-size"]),this.iconSizeData=S0(this.zoom,te["icon-size"]);var pe=this.layers[0].layout,be=pe.get("symbol-sort-key"),Me=pe.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&be.constantOr(1)!==void 0;var Fe=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Fe&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(tt){return Ql[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=C.sourceID};Yi.prototype.createArrays=function(){this.text=new Th(new ni(_0.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Th(new ni(_0.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new pu,this.lineVertexArray=new kp,this.symbolInstances=new Sp},Yi.prototype.calculateGlyphDependencies=function(C,N,te,pe,be){for(var Me=0;Me<C.length;Me++)if(N[C.charCodeAt(Me)]=!0,(te||pe)&&be){var Fe=xv[C.charAt(Me)];Fe&&(N[Fe.charCodeAt(0)]=!0)}},Yi.prototype.populate=function(C,N,te){var pe=this.layers[0],be=pe.layout,Me=be.get("text-font"),Fe=be.get("text-field"),tt=be.get("icon-image"),ct=(Fe.value.kind!=="constant"||Fe.value.value instanceof Ui&&!Fe.value.value.isEmpty()||Fe.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),yt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Rt=be.get("symbol-sort-key");if(this.features=[],!(!ct&&!yt)){for(var Zt=N.iconDependencies,Ht=N.glyphDependencies,lr=N.availableImages,Ir=new si(this.zoom),ln=0,qr=C;ln<qr.length;ln+=1){var Mn=qr[ln],bn=Mn.feature,An=Mn.id,Dn=Mn.index,Xn=Mn.sourceLayerIndex,sa=pe._featureFilter.needGeometry,aa={type:bn.type,id:An,properties:bn.properties,geometry:sa?Bi(bn):[]};if(!!pe._featureFilter.filter(Ir,aa,te)){sa||(aa.geometry=Bi(bn));var za=void 0;if(ct){var Ta=pe.getValueAndResolveTokens("text-field",aa,te,lr),Sa=Ui.factory(Ta);Nw(Sa)&&(this.hasRTLText=!0),(!this.hasRTLText||ho()==="unavailable"||this.hasRTLText&&Xa.isParsed())&&(za=G_(Sa,pe,aa))}var ti=void 0;if(yt){var Da=pe.getValueAndResolveTokens("icon-image",aa,te,lr);Da instanceof So?ti=Da:ti=So.fromString(Da)}if(!(!za&&!ti)){var Ia=this.sortFeaturesByKey?Rt.evaluate(aa,{},te):void 0,ui={id:An,text:za,icon:ti,index:Dn,sourceLayerIndex:Xn,geometry:Bi(bn),properties:bn.properties,type:Fw[bn.type],sortKey:Ia};if(this.features.push(ui),ti&&(Zt[ti.name]=!0),za){var qa=Me.evaluate(aa,{},te).join(","),Si=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ql.vertical)>=0;for(var Wi=0,ki=za.sections;Wi<ki.length;Wi+=1){var Ei=ki[Wi];if(Ei.image)Zt[Ei.image.name]=!0;else{var wi=_r(za.toString()),qi=Ei.fontStack||qa,ao=Ht[qi]=Ht[qi]||{};this.calculateGlyphDependencies(Ei.text,ao,Si,this.allowVerticalPlacement,wi)}}}}}}be.get("symbol-placement")==="line"&&(this.features=Y_(this.features)),this.sortFeaturesByKey&&this.features.sort(function(To,Po){return To.sortKey-Po.sortKey})}},Yi.prototype.update=function(C,N,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,N,this.layers,te),this.icon.programConfigurations.updatePaintArrays(C,N,this.layers,te))},Yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yi.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Yi.prototype.addToLineVertexArray=function(C,N){var te=this.lineVertexArray.length;if(C.segment!==void 0){for(var pe=C.dist(N[C.segment+1]),be=C.dist(N[C.segment]),Me={},Fe=C.segment+1;Fe<N.length;Fe++)Me[Fe]={x:N[Fe].x,y:N[Fe].y,tileUnitDistanceFromAnchor:pe},Fe<N.length-1&&(pe+=N[Fe+1].dist(N[Fe]));for(var tt=C.segment||0;tt>=0;tt--)Me[tt]={x:N[tt].x,y:N[tt].y,tileUnitDistanceFromAnchor:be},tt>0&&(be+=N[tt-1].dist(N[tt]));for(var ct=0;ct<N.length;ct++){var yt=Me[ct];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},Yi.prototype.addSymbols=function(C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt,Zt){for(var Ht=C.indexArray,lr=C.layoutVertexArray,Ir=C.segments.prepareSegment(4*N.length,lr,Ht,Me.sortKey),ln=this.glyphOffsetArray.length,qr=Ir.vertexLength,Mn=this.allowVerticalPlacement&&Fe===Ql.vertical?Math.PI/2:0,bn=Me.text&&Me.text.sections,An=0;An<N.length;An++){var Dn=N[An],Xn=Dn.tl,sa=Dn.tr,aa=Dn.bl,za=Dn.br,Ta=Dn.tex,Sa=Dn.pixelOffsetTL,ti=Dn.pixelOffsetBR,Da=Dn.minFontScaleX,Ia=Dn.minFontScaleY,ui=Dn.glyphOffset,qa=Dn.isSDF,Si=Dn.sectionIndex,Wi=Ir.vertexLength,ki=ui[1];Wp(lr,tt.x,tt.y,Xn.x,ki+Xn.y,Ta.x,Ta.y,te,qa,Sa.x,Sa.y,Da,Ia),Wp(lr,tt.x,tt.y,sa.x,ki+sa.y,Ta.x+Ta.w,Ta.y,te,qa,ti.x,Sa.y,Da,Ia),Wp(lr,tt.x,tt.y,aa.x,ki+aa.y,Ta.x,Ta.y+Ta.h,te,qa,Sa.x,ti.y,Da,Ia),Wp(lr,tt.x,tt.y,za.x,ki+za.y,Ta.x+Ta.w,Ta.y+Ta.h,te,qa,ti.x,ti.y,Da,Ia),C0(C.dynamicLayoutVertexArray,tt,Mn),Ht.emplaceBack(Wi,Wi+1,Wi+2),Ht.emplaceBack(Wi+1,Wi+2,Wi+3),Ir.vertexLength+=4,Ir.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ui[0]),(An===N.length-1||Si!==N[An+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(lr.length,Me,Me.index,{},Zt,bn&&bn[Si])}C.placedSymbolArray.emplaceBack(tt.x,tt.y,ln,this.glyphOffsetArray.length-ln,qr,ct,yt,tt.segment,te?te[0]:0,te?te[1]:0,pe[0],pe[1],Fe,0,!1,0,Rt)},Yi.prototype._addCollisionDebugVertex=function(C,N,te,pe,be,Me){return N.emplaceBack(0,0),C.emplaceBack(te.x,te.y,pe,be,Math.round(Me.x),Math.round(Me.y))},Yi.prototype.addCollisionDebugVertices=function(C,N,te,pe,be,Me,Fe){var tt=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ct=tt.vertexLength,yt=be.layoutVertexArray,Rt=be.collisionVertexArray,Zt=Fe.anchorX,Ht=Fe.anchorY;this._addCollisionDebugVertex(yt,Rt,Me,Zt,Ht,new u(C,N)),this._addCollisionDebugVertex(yt,Rt,Me,Zt,Ht,new u(te,N)),this._addCollisionDebugVertex(yt,Rt,Me,Zt,Ht,new u(te,pe)),this._addCollisionDebugVertex(yt,Rt,Me,Zt,Ht,new u(C,pe)),tt.vertexLength+=4;var lr=be.indexArray;lr.emplaceBack(ct,ct+1),lr.emplaceBack(ct+1,ct+2),lr.emplaceBack(ct+2,ct+3),lr.emplaceBack(ct+3,ct),tt.primitiveLength+=4},Yi.prototype.addDebugCollisionBoxes=function(C,N,te,pe){for(var be=C;be<N;be++){var Me=this.collisionBoxArray.get(be),Fe=Me.x1,tt=Me.y1,ct=Me.x2,yt=Me.y2;this.addCollisionDebugVertices(Fe,tt,ct,yt,pe?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,te)}},Yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Av(ah,cm.members,Ic),this.iconCollisionBox=new Av(ah,cm.members,Ic);for(var C=0;C<this.symbolInstances.length;C++){var N=this.symbolInstances.get(C);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},Yi.prototype._deserializeCollisionBoxesForSymbol=function(C,N,te,pe,be,Me,Fe,tt,ct){for(var yt={},Rt=N;Rt<te;Rt++){var Zt=C.get(Rt);yt.textBox={x1:Zt.x1,y1:Zt.y1,x2:Zt.x2,y2:Zt.y2,anchorPointX:Zt.anchorPointX,anchorPointY:Zt.anchorPointY},yt.textFeatureIndex=Zt.featureIndex;break}for(var Ht=pe;Ht<be;Ht++){var lr=C.get(Ht);yt.verticalTextBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},yt.verticalTextFeatureIndex=lr.featureIndex;break}for(var Ir=Me;Ir<Fe;Ir++){var ln=C.get(Ir);yt.iconBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},yt.iconFeatureIndex=ln.featureIndex;break}for(var qr=tt;qr<ct;qr++){var Mn=C.get(qr);yt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},yt.verticalIconFeatureIndex=Mn.featureIndex;break}return yt},Yi.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var te=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},Yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Yi.prototype.addIndicesForPlacedSymbol=function(C,N){for(var te=C.placedSymbolArray.get(N),pe=te.vertexStartIndex+te.numGlyphs*4,be=te.vertexStartIndex;be<pe;be+=4)C.indexArray.emplaceBack(be,be+1,be+2),C.indexArray.emplaceBack(be+1,be+2,be+3)},Yi.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(C),te=Math.cos(C),pe=[],be=[],Me=[],Fe=0;Fe<this.symbolInstances.length;++Fe){Me.push(Fe);var tt=this.symbolInstances.get(Fe);pe.push(Math.round(N*tt.anchorX+te*tt.anchorY)|0),be.push(tt.featureIndex)}return Me.sort(function(ct,yt){return pe[ct]-pe[yt]||be[yt]-be[ct]}),Me},Yi.prototype.addToSortKeyRanges=function(C,N){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===N?te.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Yi.prototype.sortFeatures=function(C){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,pe=this.symbolInstanceIndexes;te<pe.length;te+=1){var be=pe[te],Me=this.symbolInstances.get(be);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Fe,tt,ct){Fe>=0&&ct.indexOf(Fe)===tt&&N.addIndicesForPlacedSymbol(N.text,Fe)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ne("SymbolBucket",Yi,{omit:["layers","collisionBoxArray","features","compareText"]}),Yi.MAX_GLYPHS=65535,Yi.addDynamicAttributes=C0;function Bw(E,C){return C.replace(/{([^{}]+)}/g,function(N,te){return te in E?String(E[te]):""})}var Uw=new Xi({"symbol-placement":new Fa(cr.layout_symbol["symbol-placement"]),"symbol-spacing":new Fa(cr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fa(cr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ja(cr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fa(cr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fa(cr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fa(cr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fa(cr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fa(cr.layout_symbol["icon-rotation-alignment"]),"icon-size":new ja(cr.layout_symbol["icon-size"]),"icon-text-fit":new Fa(cr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fa(cr.layout_symbol["icon-text-fit-padding"]),"icon-image":new ja(cr.layout_symbol["icon-image"]),"icon-rotate":new ja(cr.layout_symbol["icon-rotate"]),"icon-padding":new Fa(cr.layout_symbol["icon-padding"]),"icon-keep-upright":new Fa(cr.layout_symbol["icon-keep-upright"]),"icon-offset":new ja(cr.layout_symbol["icon-offset"]),"icon-anchor":new ja(cr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fa(cr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fa(cr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fa(cr.layout_symbol["text-rotation-alignment"]),"text-field":new ja(cr.layout_symbol["text-field"]),"text-font":new ja(cr.layout_symbol["text-font"]),"text-size":new ja(cr.layout_symbol["text-size"]),"text-max-width":new ja(cr.layout_symbol["text-max-width"]),"text-line-height":new Fa(cr.layout_symbol["text-line-height"]),"text-letter-spacing":new ja(cr.layout_symbol["text-letter-spacing"]),"text-justify":new ja(cr.layout_symbol["text-justify"]),"text-radial-offset":new ja(cr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fa(cr.layout_symbol["text-variable-anchor"]),"text-anchor":new ja(cr.layout_symbol["text-anchor"]),"text-max-angle":new Fa(cr.layout_symbol["text-max-angle"]),"text-writing-mode":new Fa(cr.layout_symbol["text-writing-mode"]),"text-rotate":new ja(cr.layout_symbol["text-rotate"]),"text-padding":new Fa(cr.layout_symbol["text-padding"]),"text-keep-upright":new Fa(cr.layout_symbol["text-keep-upright"]),"text-transform":new ja(cr.layout_symbol["text-transform"]),"text-offset":new ja(cr.layout_symbol["text-offset"]),"text-allow-overlap":new Fa(cr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fa(cr.layout_symbol["text-ignore-placement"]),"text-optional":new Fa(cr.layout_symbol["text-optional"])}),Vw=new Xi({"icon-opacity":new ja(cr.paint_symbol["icon-opacity"]),"icon-color":new ja(cr.paint_symbol["icon-color"]),"icon-halo-color":new ja(cr.paint_symbol["icon-halo-color"]),"icon-halo-width":new ja(cr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ja(cr.paint_symbol["icon-halo-blur"]),"icon-translate":new Fa(cr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fa(cr.paint_symbol["icon-translate-anchor"]),"text-opacity":new ja(cr.paint_symbol["text-opacity"]),"text-color":new ja(cr.paint_symbol["text-color"],{runtimeType:la,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new ja(cr.paint_symbol["text-halo-color"]),"text-halo-width":new ja(cr.paint_symbol["text-halo-width"]),"text-halo-blur":new ja(cr.paint_symbol["text-halo-blur"]),"text-translate":new Fa(cr.paint_symbol["text-translate"]),"text-translate-anchor":new Fa(cr.paint_symbol["text-translate-anchor"])}),L0={paint:Vw,layout:Uw},Ah=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:Bn,this.defaultValue=C};Ah.prototype.evaluate=function(C){if(C.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(C.formattedSection))return N.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Ah.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;C(N._styleExpression.expression)}},Ah.prototype.outputDefined=function(){return!1},Ah.prototype.serialize=function(){return null},Ne("FormatSectionOverride",Ah,{omit:["defaultValue"]});var Hw=function(E){function C(N){E.call(this,N,L0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){if(E.prototype.recalculate.call(this,te,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Me=[],Fe=0,tt=be;Fe<tt.length;Fe+=1){var ct=tt[Fe];Me.indexOf(ct)<0&&Me.push(ct)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(te,pe,be,Me){var Fe=this.layout.get(te).evaluate(pe,{},be,Me),tt=this._unevaluatedLayout._values[te];return!tt.isDataDriven()&&!xo(tt.value)&&Fe?Bw(pe.properties,Fe):Fe},C.prototype.createBucket=function(te){return new Yi(te)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var te=0,pe=L0.paint.overridableProperties;te<pe.length;te+=1){var be=pe[te];if(!!C.hasPaintOverride(this.layout,be)){var Me=this.paint.get(be),Fe=new Ah(Me),tt=new gs(Fe,Me.property.specification),ct=null;Me.value.kind==="constant"||Me.value.kind==="source"?ct=new Su("source",tt):ct=new ys("composite",tt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[be]=new Gi(Me.property,ct,Me.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,be){return!this.layout||pe.isDataDriven()||be.isDataDriven()?!1:C.hasPaintOverride(this.layout,te)},C.hasPaintOverride=function(te,pe){var be=te.get("text-field"),Me=L0.paint.properties[pe],Fe=!1,tt=function(Rt){for(var Zt=0,Ht=Rt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(Me.overrides&&Me.overrides.hasOverride(lr)){Fe=!0;return}}};if(be.value.kind==="constant"&&be.value.value instanceof Ui)tt(be.value.value.sections);else if(be.value.kind==="source"){var ct=function(Rt){if(!Fe)if(Rt instanceof Ji&&Di(Rt.value)===es){var Zt=Rt.value;tt(Zt.sections)}else Rt instanceof us?tt(Rt.sections):Rt.eachChild(ct)},yt=be.value;yt._styleExpression&&ct(yt._styleExpression.expression)}return Fe},C}(ks),Gw=new Xi({"background-color":new Fa(cr.paint_background["background-color"]),"background-pattern":new ro(cr.paint_background["background-pattern"]),"background-opacity":new Fa(cr.paint_background["background-opacity"])}),Yw={paint:Gw},Ww=function(E){function C(N){E.call(this,N,Yw)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ks),Xw=new Xi({"raster-opacity":new Fa(cr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fa(cr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fa(cr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fa(cr.paint_raster["raster-brightness-max"]),"raster-saturation":new Fa(cr.paint_raster["raster-saturation"]),"raster-contrast":new Fa(cr.paint_raster["raster-contrast"]),"raster-resampling":new Fa(cr.paint_raster["raster-resampling"]),"raster-fade-duration":new Fa(cr.paint_raster["raster-fade-duration"])}),jw={paint:Xw},Zw=function(E){function C(N){E.call(this,N,jw)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ks);function Kw(E){var C=[],N=E.id;return N===void 0&&C.push({message:"layers."+N+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+N+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),C}var Jw=function(E){function C(N){E.call(this,N,{}),this.implementation=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},C.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},C}(ks),Qw={circle:S2,heatmap:L2,hillshade:R2,fill:a_,"fill-extrusion":A_,line:O_,symbol:Hw,background:Ww,raster:Zw};function $w(E){return E.type==="custom"?new Jw(E):new Qw[E.type](E)}var Nm=self.HTMLImageElement,Bm=self.HTMLCanvasElement,Um=self.HTMLVideoElement,Vm=self.ImageData,Xp=self.ImageBitmap,Bc=function(C,N,te,pe){this.context=C,this.format=te,this.texture=C.gl.createTexture(),this.update(N,pe)};Bc.prototype.update=function(C,N,te){var pe=C.width,be=C.height,Me=(!this.size||this.size[0]!==pe||this.size[1]!==be)&&!te,Fe=this,tt=Fe.context,ct=tt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),ct.bindTexture(ct.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ct.RGBA&&(!N||N.premultiply!==!1)),Me)this.size=[pe,be],C instanceof Nm||C instanceof Bm||C instanceof Um||C instanceof Vm||Xp&&C instanceof Xp?ct.texImage2D(ct.TEXTURE_2D,0,this.format,this.format,ct.UNSIGNED_BYTE,C):ct.texImage2D(ct.TEXTURE_2D,0,this.format,pe,be,0,this.format,ct.UNSIGNED_BYTE,C.data);else{var yt=te||{x:0,y:0},Rt=yt.x,Zt=yt.y;C instanceof Nm||C instanceof Bm||C instanceof Um||C instanceof Vm||Xp&&C instanceof Xp?ct.texSubImage2D(ct.TEXTURE_2D,0,Rt,Zt,ct.RGBA,ct.UNSIGNED_BYTE,C):ct.texSubImage2D(ct.TEXTURE_2D,0,Rt,Zt,pe,be,ct.RGBA,ct.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ct.generateMipmap(ct.TEXTURE_2D)},Bc.prototype.bind=function(C,N,te){var pe=this,be=pe.context,Me=be.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),te===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Me.LINEAR),C!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,C),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,te||C),this.filter=C),N!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,N),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,N),this.wrap=N)},Bc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Bc.prototype.destroy=function(){var C=this.context,N=C.gl;N.deleteTexture(this.texture),this.texture=null};var P0=function(C){var N=this;this._callback=C,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};P0.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},P0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mh=function(C,N,te){this.target=C,this.parent=N,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new P0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?C:self};Mh.prototype.send=function(C,N,te,pe,be){var Me=this;be===void 0&&(be=!1);var Fe=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Fe]=te);var tt=K(this.globalScope)?void 0:[];return this.target.postMessage({id:Fe,type:C,hasCallback:!!te,targetMapId:pe,mustQueue:be,sourceMapId:this.mapId,data:Ct(N,tt)},tt),{cancel:function(){te&&delete Me.callbacks[Fe],Me.target.postMessage({id:Fe,type:"<cancel>",targetMapId:pe,sourceMapId:Me.mapId})}}},Mh.prototype.receive=function(C){var N=C.data,te=N.id;if(!!te&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[te];var pe=this.cancelCallbacks[te];delete this.cancelCallbacks[te],pe&&pe()}else q()||N.mustQueue?(this.tasks[te]=N,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,N)},Mh.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),N=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),!!N&&this.processTask(C,N)}},Mh.prototype.processTask=function(C,N){var te=this;if(N.type==="<response>"){var pe=this.callbacks[C];delete this.callbacks[C],pe&&(N.error?pe(Ut(N.error)):pe(null,Ut(N.data)))}else{var be=!1,Me=K(this.globalScope)?void 0:[],Fe=N.hasCallback?function(Zt,Ht){be=!0,delete te.cancelCallbacks[C],te.target.postMessage({id:C,type:"<response>",sourceMapId:te.mapId,error:Zt?Ct(Zt):null,data:Ct(Ht,Me)},Me)}:function(Zt){be=!0},tt=null,ct=Ut(N.data);if(this.parent[N.type])tt=this.parent[N.type](N.sourceMapId,ct,Fe);else if(this.parent.getWorkerSource){var yt=N.type.split("."),Rt=this.parent.getWorkerSource(N.sourceMapId,yt[0],ct.source);tt=Rt[yt[1]](ct,Fe)}else Fe(new Error("Could not find function "+N.type));!be&&tt&&tt.cancel&&(this.cancelCallbacks[C]=tt.cancel)}},Mh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function qw(E,C,N){C=Math.pow(2,N)-C-1;var te=Hm(E*256,C*256,N),pe=Hm((E+1)*256,(C+1)*256,N);return te[0]+","+te[1]+","+pe[0]+","+pe[1]}function Hm(E,C,N){var te=2*Math.PI*6378137/256/Math.pow(2,N),pe=E*te-2*Math.PI*6378137/2,be=C*te-2*Math.PI*6378137/2;return[pe,be]}var Yo=function(C,N){C&&(N?this.setSouthWest(C).setNorthEast(N):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};Yo.prototype.setNorthEast=function(C){return this._ne=C instanceof vo?new vo(C.lng,C.lat):vo.convert(C),this},Yo.prototype.setSouthWest=function(C){return this._sw=C instanceof vo?new vo(C.lng,C.lat):vo.convert(C),this},Yo.prototype.extend=function(C){var N=this._sw,te=this._ne,pe,be;if(C instanceof vo)pe=C,be=C;else if(C instanceof Yo){if(pe=C._sw,be=C._ne,!pe||!be)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Me=C;return this.extend(Yo.convert(Me))}else{var Fe=C;return this.extend(vo.convert(Fe))}return this}return!N&&!te?(this._sw=new vo(pe.lng,pe.lat),this._ne=new vo(be.lng,be.lat)):(N.lng=Math.min(pe.lng,N.lng),N.lat=Math.min(pe.lat,N.lat),te.lng=Math.max(be.lng,te.lng),te.lat=Math.max(be.lat,te.lat)),this},Yo.prototype.getCenter=function(){return new vo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Yo.prototype.getSouthWest=function(){return this._sw},Yo.prototype.getNorthEast=function(){return this._ne},Yo.prototype.getNorthWest=function(){return new vo(this.getWest(),this.getNorth())},Yo.prototype.getSouthEast=function(){return new vo(this.getEast(),this.getSouth())},Yo.prototype.getWest=function(){return this._sw.lng},Yo.prototype.getSouth=function(){return this._sw.lat},Yo.prototype.getEast=function(){return this._ne.lng},Yo.prototype.getNorth=function(){return this._ne.lat},Yo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Yo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Yo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Yo.prototype.contains=function(C){var N=vo.convert(C),te=N.lng,pe=N.lat,be=this._sw.lat<=pe&&pe<=this._ne.lat,Me=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=te&&te>=this._ne.lng),be&&Me},Yo.convert=function(C){return!C||C instanceof Yo?C:new Yo(C)};var Gm=63710088e-1,vo=function(C,N){if(isNaN(C)||isNaN(N))throw new Error("Invalid LngLat object: ("+C+", "+N+")");if(this.lng=+C,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};vo.prototype.wrap=function(){return new vo(y(this.lng,-180,180),this.lat)},vo.prototype.toArray=function(){return[this.lng,this.lat]},vo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},vo.prototype.distanceTo=function(C){var N=Math.PI/180,te=this.lat*N,pe=C.lat*N,be=Math.sin(te)*Math.sin(pe)+Math.cos(te)*Math.cos(pe)*Math.cos((C.lng-this.lng)*N),Me=Gm*Math.acos(Math.min(be,1));return Me},vo.prototype.toBounds=function(C){C===void 0&&(C=0);var N=40075017,te=360*C/N,pe=te/Math.cos(Math.PI/180*this.lat);return new Yo(new vo(this.lng-pe,this.lat-te),new vo(this.lng+pe,this.lat+te))},vo.convert=function(C){if(C instanceof vo)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new vo(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new vo(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ym=2*Math.PI*Gm;function Wm(E){return Ym*Math.cos(E*Math.PI/180)}function Xm(E){return(180+E)/360}function jm(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Zm(E,C){return E/Wm(C)}function e3(E){return E*360-180}function D0(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function t3(E,C){return E*Wm(D0(C))}function r3(E){return 1/Math.cos(E*Math.PI/180)}var Uc=function(C,N,te){te===void 0&&(te=0),this.x=+C,this.y=+N,this.z=+te};Uc.fromLngLat=function(C,N){N===void 0&&(N=0);var te=vo.convert(C);return new Uc(Xm(te.lng),jm(te.lat),Zm(N,te.lat))},Uc.prototype.toLngLat=function(){return new vo(e3(this.x),D0(this.y))},Uc.prototype.toAltitude=function(){return t3(this.z,this.y)},Uc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ym*r3(D0(this.y))};var Vc=function(C,N,te){this.z=C,this.x=N,this.y=te,this.key=Mv(0,C,C,N,te)};Vc.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Vc.prototype.url=function(C,N){var te=qw(this.x,this.y,this.z),pe=n3(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",te)},Vc.prototype.getTilePoint=function(C){var N=Math.pow(2,this.z);return new u((C.x*N-this.x)*Ua,(C.y*N-this.y)*Ua)},Vc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Km=function(C,N){this.wrap=C,this.canonical=N,this.key=Mv(C,N.z,N.z,N.x,N.y)},Wo=function(C,N,te,pe,be){this.overscaledZ=C,this.wrap=N,this.canonical=new Vc(te,+pe,+be),this.key=Mv(N,C,te,pe,be)};Wo.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},Wo.prototype.scaledTo=function(C){var N=this.canonical.z-C;return C>this.canonical.z?new Wo(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(C,this.wrap,C,this.canonical.x>>N,this.canonical.y>>N)},Wo.prototype.calculateScaledKey=function(C,N){var te=this.canonical.z-C;return C>this.canonical.z?Mv(this.wrap*+N,C,this.canonical.z,this.canonical.x,this.canonical.y):Mv(this.wrap*+N,C,C,this.canonical.x>>te,this.canonical.y>>te)},Wo.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var N=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>N&&C.canonical.y===this.canonical.y>>N},Wo.prototype.children=function(C){if(this.overscaledZ>=C)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,te=this.canonical.x*2,pe=this.canonical.y*2;return[new Wo(N,this.wrap,N,te,pe),new Wo(N,this.wrap,N,te+1,pe),new Wo(N,this.wrap,N,te,pe+1),new Wo(N,this.wrap,N,te+1,pe+1)]},Wo.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},Wo.prototype.wrapped=function(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wo.prototype.unwrapTo=function(C){return new Wo(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},Wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wo.prototype.toUnwrapped=function(){return new Km(this.wrap,this.canonical)},Wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wo.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new Uc(C.x-this.wrap,C.y))};function Mv(E,C,N,te,pe){E*=2,E<0&&(E=E*-1-1);var be=1<<N;return(be*be*E+be*pe+te).toString(36)+N.toString(36)+C.toString(36)}function n3(E,C,N){for(var te="",pe,be=E;be>0;be--)pe=1<<be-1,te+=(C&pe?1:0)+(N&pe?2:0);return te}Ne("CanonicalTileID",Vc),Ne("OverscaledTileID",Wo,{omit:["posMatrix"]});var Uf=function(C,N,te){if(this.uid=C,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return O('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var pe=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=te||"mapbox";for(var be=0;be<pe;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(pe,be)]=this.data[this._idx(pe-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,pe)]=this.data[this._idx(be,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};Uf.prototype.get=function(C,N){var te=new Uint8Array(this.data.buffer),pe=this._idx(C,N)*4,be=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return be(te[pe],te[pe+1],te[pe+2])},Uf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Uf.prototype._idx=function(C,N){if(C<-1||C>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(C+1)},Uf.prototype._unpackMapbox=function(C,N,te){return(C*256*256+N*256+te)/10-1e4},Uf.prototype._unpackTerrarium=function(C,N,te){return C*256+N+te/256-32768},Uf.prototype.getPixels=function(){return new xl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Uf.prototype.backfillBorder=function(C,N,te){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var pe=N*this.dim,be=N*this.dim+this.dim,Me=te*this.dim,Fe=te*this.dim+this.dim;switch(N){case-1:pe=be-1;break;case 1:be=pe+1;break}switch(te){case-1:Me=Fe-1;break;case 1:Fe=Me+1;break}for(var tt=-N*this.dim,ct=-te*this.dim,yt=Me;yt<Fe;yt++)for(var Rt=pe;Rt<be;Rt++)this.data[this._idx(Rt,yt)]=C.data[this._idx(Rt+tt,yt+ct)]},Ne("DEMData",Uf);function a3(E,C){var N={};if(!C)return N;for(var te=function(){var Me=be[pe],Fe=Me.layerIds.map(function(Rt){return C.getLayer(Rt)}).filter(Boolean);if(Fe.length!==0){Me.layers=Fe,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Rt){return Fe.filter(function(Zt){return Zt.id===Rt})[0]}));for(var tt=0,ct=Fe;tt<ct.length;tt+=1){var yt=ct[tt];N[yt.id]=Me}}},pe=0,be=E;pe<be.length;pe+=1)te();return N}var jp=function(C){this._stringToNumber={},this._numberToString=[];for(var N=0;N<C.length;N++){var te=C[N];this._stringToNumber[te]=N,this._numberToString[N]=te}};jp.prototype.encode=function(C){return this._stringToNumber[C]},jp.prototype.decode=function(C){return this._numberToString[C]};var Zp=function(C,N,te,pe,be){this.type="Feature",this._vectorTileFeature=C,C._z=N,C._x=te,C._y=pe,this.properties=C.properties,this.id=be},R0={geometry:{configurable:!0}};R0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},R0.geometry.set=function(E){this._geometry=E},Zp.prototype.toJSON=function(){var C={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(C[N]=this[N]);return C},Object.defineProperties(Zp.prototype,R0);var Sh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Sh.prototype.updateState=function(C,N,te){var pe=String(N);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][pe]=this.stateChanges[C][pe]||{},M(this.stateChanges[C][pe],te),this.deletedStates[C]===null){this.deletedStates[C]={};for(var be in this.state[C])be!==pe&&(this.deletedStates[C][be]=null)}else{var Me=this.deletedStates[C]&&this.deletedStates[C][pe]===null;if(Me){this.deletedStates[C][pe]={};for(var Fe in this.state[C][pe])te[Fe]||(this.deletedStates[C][pe][Fe]=null)}else for(var tt in te){var ct=this.deletedStates[C]&&this.deletedStates[C][pe]&&this.deletedStates[C][pe][tt]===null;ct&&delete this.deletedStates[C][pe][tt]}}},Sh.prototype.removeFeatureState=function(C,N,te){var pe=this.deletedStates[C]===null;if(!pe){var be=String(N);if(this.deletedStates[C]=this.deletedStates[C]||{},te&&N!==void 0)this.deletedStates[C][be]!==null&&(this.deletedStates[C][be]=this.deletedStates[C][be]||{},this.deletedStates[C][be][te]=null);else if(N!==void 0){var Me=this.stateChanges[C]&&this.stateChanges[C][be];if(Me){this.deletedStates[C][be]={};for(te in this.stateChanges[C][be])this.deletedStates[C][be][te]=null}else this.deletedStates[C][be]=null}else this.deletedStates[C]=null}},Sh.prototype.getState=function(C,N){var te=String(N),pe=this.state[C]||{},be=this.stateChanges[C]||{},Me=M({},pe[te],be[te]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Fe=this.deletedStates[C][N];if(Fe===null)return{};for(var tt in Fe)delete Me[tt]}return Me},Sh.prototype.initializeTileState=function(C,N){C.setFeatureState(this.state,N)},Sh.prototype.coalesceChanges=function(C,N){var te={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var be={};for(var Me in this.stateChanges[pe])this.state[pe][Me]||(this.state[pe][Me]={}),M(this.state[pe][Me],this.stateChanges[pe][Me]),be[Me]=this.state[pe][Me];te[pe]=be}for(var Fe in this.deletedStates){this.state[Fe]=this.state[Fe]||{};var tt={};if(this.deletedStates[Fe]===null)for(var ct in this.state[Fe])tt[ct]={},this.state[Fe][ct]={};else for(var yt in this.deletedStates[Fe]){var Rt=this.deletedStates[Fe][yt]===null;if(Rt)this.state[Fe][yt]={};else for(var Zt=0,Ht=Object.keys(this.deletedStates[Fe][yt]);Zt<Ht.length;Zt+=1){var lr=Ht[Zt];delete this.state[Fe][yt][lr]}tt[yt]=this.state[Fe][yt]}te[Fe]=te[Fe]||{},M(te[Fe],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Ir in C){var ln=C[Ir];ln.setFeatureState(te,N)}};var Vf=function(C,N){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Io(Ua,16,0),this.grid3D=new Io(Ua,16,0),this.featureIndexArray=new fv,this.promoteId=N};Vf.prototype.insert=function(C,N,te,pe,be,Me){var Fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,pe,be);for(var tt=Me?this.grid3D:this.grid,ct=0;ct<N.length;ct++){for(var yt=N[ct],Rt=[1/0,1/0,-1/0,-1/0],Zt=0;Zt<yt.length;Zt++){var Ht=yt[Zt];Rt[0]=Math.min(Rt[0],Ht.x),Rt[1]=Math.min(Rt[1],Ht.y),Rt[2]=Math.max(Rt[2],Ht.x),Rt[3]=Math.max(Rt[3],Ht.y)}Rt[0]<Ua&&Rt[1]<Ua&&Rt[2]>=0&&Rt[3]>=0&&tt.insert(Fe,Rt[0],Rt[1],Rt[2],Rt[3])}},Vf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ph.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new jp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Vf.prototype.query=function(C,N,te,pe){var be=this;this.loadVTLayers();for(var Me=C.params||{},Fe=Ua/C.tileSize/C.scale,tt=_f(Me.filter),ct=C.queryGeometry,yt=C.queryPadding*Fe,Rt=Qm(ct),Zt=this.grid.query(Rt.minX-yt,Rt.minY-yt,Rt.maxX+yt,Rt.maxY+yt),Ht=Qm(C.cameraQueryGeometry),lr=this.grid3D.query(Ht.minX-yt,Ht.minY-yt,Ht.maxX+yt,Ht.maxY+yt,function(Xn,sa,aa,za){return kf(C.cameraQueryGeometry,Xn-yt,sa-yt,aa+yt,za+yt)}),Ir=0,ln=lr;Ir<ln.length;Ir+=1){var qr=ln[Ir];Zt.push(qr)}Zt.sort(i3);for(var Mn={},bn,An=function(Xn){var sa=Zt[Xn];if(sa!==bn){bn=sa;var aa=be.featureIndexArray.get(sa),za=null;be.loadMatchingFeature(Mn,aa.bucketIndex,aa.sourceLayerIndex,aa.featureIndex,tt,Me.layers,Me.availableImages,N,te,pe,function(Ta,Sa,ti){return za||(za=Bi(Ta)),Sa.queryIntersectsFeature(ct,Ta,ti,za,be.z,C.transform,Fe,C.pixelPosMatrix)})}},Dn=0;Dn<Zt.length;Dn++)An(Dn);return Mn},Vf.prototype.loadMatchingFeature=function(C,N,te,pe,be,Me,Fe,tt,ct,yt,Rt){var Zt=this.bucketLayerIDs[N];if(!(Me&&!R(Me,Zt))){var Ht=this.sourceLayerCoder.decode(te),lr=this.vtLayers[Ht],Ir=lr.feature(pe);if(!!be.filter(new si(this.tileID.overscaledZ),Ir))for(var ln=this.getId(Ir,Ht),qr=0;qr<Zt.length;qr++){var Mn=Zt[qr];if(!(Me&&Me.indexOf(Mn)<0)){var bn=tt[Mn];if(!!bn){var An={};ln!==void 0&&yt&&(An=yt.getState(bn.sourceLayer||"_geojsonTileLayer",ln));var Dn=ct[Mn];Dn.paint=Jm(Dn.paint,bn.paint,Ir,An,Fe),Dn.layout=Jm(Dn.layout,bn.layout,Ir,An,Fe);var Xn=!Rt||Rt(Ir,bn,An);if(!!Xn){var sa=new Zp(Ir,this.z,this.x,this.y,ln);sa.layer=Dn;var aa=C[Mn];aa===void 0&&(aa=C[Mn]=[]),aa.push({featureIndex:pe,feature:sa,intersectionZ:Xn})}}}}}},Vf.prototype.lookupSymbolFeatures=function(C,N,te,pe,be,Me,Fe,tt){var ct={};this.loadVTLayers();for(var yt=_f(be),Rt=0,Zt=C;Rt<Zt.length;Rt+=1){var Ht=Zt[Rt];this.loadMatchingFeature(ct,te,pe,Ht,yt,Me,Fe,tt,N)}return ct},Vf.prototype.hasLayer=function(C){for(var N=0,te=this.bucketLayerIDs;N<te.length;N+=1)for(var pe=te[N],be=0,Me=pe;be<Me.length;be+=1){var Fe=Me[be];if(C===Fe)return!0}return!1},Vf.prototype.getId=function(C,N){var te=C.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];te=C.properties[pe],typeof te=="boolean"&&(te=Number(te))}return te},Ne("FeatureIndex",Vf,{omit:["rawTileData","sourceLayerCoder"]});function Jm(E,C,N,te,pe){return P(E,function(be,Me){var Fe=C instanceof Ni?C.get(Me):null;return Fe&&Fe.evaluate?Fe.evaluate(N,te,pe):Fe})}function Qm(E){for(var C=1/0,N=1/0,te=-1/0,pe=-1/0,be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be];C=Math.min(C,Fe.x),N=Math.min(N,Fe.y),te=Math.max(te,Fe.x),pe=Math.max(pe,Fe.y)}return{minX:C,minY:N,maxX:te,maxY:pe}}function i3(E,C){return C-E}var o3=3e4,is=function(C,N){this.tileID=C,this.uid=x(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};is.prototype.registerFadeDuration=function(C){var N=C+this.timeAdded;N<Q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},is.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},is.prototype.loadVectorData=function(C,N,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Sf;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=a3(C.buckets,N.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var be=this.buckets[pe];if(be instanceof Yi)if(this.hasSymbolBuckets=!0,te)be.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Fe=this.buckets[Me];if(Fe instanceof Yi&&Fe.hasRTLText){this.hasRTLText=!0,Mi();break}}this.queryPadding=0;for(var tt in this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(tt).queryRadius(ct))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},is.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},is.prototype.getBucket=function(C){return this.buckets[C.id]},is.prototype.upload=function(C){for(var N in this.buckets){var te=this.buckets[N];te.uploadPending()&&te.upload(C)}var pe=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Bc(C,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Bc(C,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},is.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},is.prototype.queryRenderedFeatures=function(C,N,te,pe,be,Me,Fe,tt,ct,yt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:be,scale:Me,tileSize:this.tileSize,pixelPosMatrix:yt,transform:tt,params:Fe,queryPadding:this.queryPadding*ct},C,N,te)},is.prototype.querySourceFeatures=function(C,N){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var pe=te.loadVTLayers(),be=N?N.sourceLayer:"",Me=pe._geojsonTileLayer||pe[be];if(!!Me)for(var Fe=_f(N&&N.filter),tt=this.tileID.canonical,ct=tt.z,yt=tt.x,Rt=tt.y,Zt={z:ct,x:yt,y:Rt},Ht=0;Ht<Me.length;Ht++){var lr=Me.feature(Ht);if(Fe.filter(new si(this.tileID.overscaledZ),lr)){var Ir=te.getId(lr,be),ln=new Zp(lr,ct,yt,Rt,Ir);ln.tile=Zt,C.push(ln)}}}},is.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},is.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},is.prototype.setExpiryData=function(C){var N=this.expirationTime;if(C.cacheControl){var te=$(C.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var pe=Date.now(),be=!1;if(this.expirationTime>pe)be=!1;else if(!N)be=!0;else if(this.expirationTime<N)be=!0;else{var Me=this.expirationTime-N;Me?this.expirationTime=pe+Math.max(Me,o3):be=!0}be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},is.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},is.prototype.setFeatureState=function(C,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!N.style.hasLayer(pe)){var be=this.buckets[pe],Me=be.layers[0].sourceLayer||"_geojsonTileLayer",Fe=te[Me],tt=C[Me];if(!(!Fe||!tt||Object.keys(tt).length===0)){be.update(tt,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=N&&N.style&&N.style.getLayer(pe);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(be)))}}}},is.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},is.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},is.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},is.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=Q.now()+C},is.prototype.setDependencies=function(C,N){for(var te={},pe=0,be=N;pe<be.length;pe+=1){var Me=be[pe];te[Me]=!0}this.dependencies[C]=te},is.prototype.hasDependency=function(C,N){for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te],Me=this.dependencies[be];if(Me)for(var Fe=0,tt=N;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(Me[ct])return!0}}return!1};var s3=["type","source","source-layer","minzoom","maxzoom","filter","layout"],oc=self.performance,$m=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},oc.mark(this._marks.start)};$m.prototype.finish=function(){oc.mark(this._marks.end);var C=oc.getEntriesByName(this._marks.measure);return C.length===0&&(oc.measure(this._marks.measure,this._marks.start,this._marks.end),C=oc.getEntriesByName(this._marks.measure),oc.clearMarks(this._marks.start),oc.clearMarks(this._marks.end),oc.clearMeasures(this._marks.measure)),C},e.Actor=Mh,e.AlphaImage=Nc,e.CanonicalTileID=Vc,e.CollisionBoxArray=Sf,e.Color=hi,e.DEMData=Uf,e.DataConstantProperty=Fa,e.DictionaryCoder=jp,e.EXTENT=Ua,e.ErrorEvent=wr,e.EvaluationParameters=si,e.Event=tn,e.Evented=gr,e.FeatureIndex=Vf,e.FillBucket=nf,e.FillExtrusionBucket=af,e.ImageAtlas=_v,e.ImagePosition=Bp,e.LineBucket=bl,e.LngLat=vo,e.LngLatBounds=Yo,e.MercatorCoordinate=Uc,e.ONE_EM=bs,e.OverscaledTileID=Wo,e.Point=u,e.Point$1=u,e.Properties=Xi,e.Protobuf=Op,e.RGBAImage=xl,e.RequestManager=Oe,e.RequestPerformance=$m,e.ResourceType=dr,e.SegmentVector=W,e.SourceFeatureState=Sh,e.StructArrayLayout1ui2=ec,e.StructArrayLayout2f1f2i16=ef,e.StructArrayLayout2i4=Pc,e.StructArrayLayout3ui6=tf,e.StructArrayLayout4i8=wf,e.SymbolBucket=Yi,e.Texture=Bc,e.Tile=is,e.Transitionable=yo,e.Uniform1f=Nr,e.Uniform1i=Vr,e.Uniform2f=Kr,e.Uniform3f=hn,e.Uniform4f=Sn,e.UniformColor=On,e.UniformMatrix4f=ea,e.UnwrappedTileID=Km,e.ValidationError=ar,e.WritingMode=Ql,e.ZoomHistory=Wt,e.add=ch,e.addDynamicAttributes=C0,e.asyncAll=g,e.bezier=h,e.bindAll=S,e.browser=Q,e.cacheEntryPossiblyAdded=Je,e.clamp=v,e.clearTileCache=Et,e.clipLine=Dm,e.clone=Lp,e.clone$1=I,e.clone$2=l0,e.collisionCircleLayout=V_,e.config=ne,e.create=lh,e.create$1=Fc,e.create$2=zc,e.createCommonjsModule=o,e.createExpression=cu,e.createLayout=Fo,e.createStyleLayer=$w,e.cross=y2,e.deepEqual=i,e.dot=g2,e.dot$1=w2,e.ease=p,e.emitValidationErrors=go,e.endsWith=k,e.enforceCacheSizeLimit=gt,e.evaluateSizeForFeature=Mm,e.evaluateSizeForZoom=Sm,e.evaluateVariableOffset=zm,e.evented=gi,e.extend=M,e.featureFilter=_f,e.filterObject=z,e.fromRotation=sh,e.getAnchorAlignment=M0,e.getAnchorJustification=E0,e.getArrayBuffer=De,e.getImage=xr,e.getJSON=Se,e.getRTLTextPluginStatus=ho,e.getReferrer=kr,e.getVideo=Tr,e.identity=uh,e.invert=rc,e.isChar=jt,e.isMapboxURL=He,e.keysDifference=m,e.makeRequest=we,e.mapObject=P,e.mercatorXfromLng=Xm,e.mercatorYfromLat=jm,e.mercatorZfromAltitude=Zm,e.mul=s0,e.multiply=nc,e.mvt=ph,e.normalize=hv,e.number=lo,e.offscreenCanvasSupported=or,e.ortho=o0,e.parseGlyphPBF=pw,e.pbf=Op,e.performSymbolLayout=Dw,e.perspective=cv,e.pick=_,e.plugin=Xa,e.polygonIntersectsPolygon=ii,e.postMapLoadEvent=Mt,e.postTurnstileEvent=Bt,e.potpack=ym,e.refProperties=s3,e.register=Ne,e.registerForPluginStateChange=Ii,e.rotate=Ns,e.rotateX=ml,e.rotateZ=fh,e.scale=yl,e.scale$1=_2,e.scale$2=f0,e.setCacheLimits=rr,e.setRTLTextPlugin=ha,e.sphericalToCartesian=X,e.sqrLen=M2,e.styleSpec=cr,e.sub=x2,e.symbolSize=Tw,e.transformMat3=m2,e.transformMat4=Pp,e.translate=Lo,e.triggerPluginCompletionEvent=Ra,e.uniqueId=x,e.validateCustomStyleLayer=Kw,e.validateLight=xi,e.validateStyle=_o,e.values=A,e.vectorTile=ph,e.version=a,e.warnOnce=O,e.webpSupported=ae,e.window=self,e.wrap=y}),w(["./shared"],function(e){function o(et){var we=typeof et;if(we==="number"||we==="boolean"||we==="string"||et===void 0||et===null)return JSON.stringify(et);if(Array.isArray(et)){for(var Se="[",De=0,Xe=et;De<Xe.length;De+=1){var $e=Xe[De];Se+=o($e)+","}return Se+"]"}for(var ot=Object.keys(et).sort(),st="{",pt=0;pt<ot.length;pt++)st+=JSON.stringify(ot[pt])+":"+o(et[ot[pt]])+",";return st+"}"}function a(et){for(var we="",Se=0,De=e.refProperties;Se<De.length;Se+=1){var Xe=De[Se];we+="/"+o(et[Xe])}return we}function n(et,we){for(var Se={},De=0;De<et.length;De++){var Xe=we&&we[et[De].id]||a(et[De]);we&&(we[et[De].id]=Xe);var $e=Se[Xe];$e||($e=Se[Xe]=[]),$e.push(et[De])}var ot=[];for(var st in Se)ot.push(Se[st]);return ot}var r=function(we){this.keyCache={},we&&this.replace(we)};r.prototype.replace=function(we){this._layerConfigs={},this._layers={},this.update(we,[])},r.prototype.update=function(we,Se){for(var De=this,Xe=0,$e=we;Xe<$e.length;Xe+=1){var ot=$e[Xe];this._layerConfigs[ot.id]=ot;var st=this._layers[ot.id]=e.createStyleLayer(ot);st._featureFilter=e.featureFilter(st.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var pt=0,wt=Se;pt<wt.length;pt+=1){var Yt=wt[pt];delete this.keyCache[Yt],delete this._layerConfigs[Yt],delete this._layers[Yt]}this.familiesBySource={};for(var mr=n(e.values(this._layerConfigs),this.keyCache),xr=0,Tr=mr;xr<Tr.length;xr+=1){var yr=Tr[xr],Dr=yr.map(function(Ar){return De._layers[Ar.id]}),tn=Dr[0];if(tn.visibility!=="none"){var wr=tn.source||"",gr=this.familiesBySource[wr];gr||(gr=this.familiesBySource[wr]={});var yn=tn.sourceLayer||"_geojsonTileLayer",Gr=gr[yn];Gr||(Gr=gr[yn]=[]),Gr.push(Dr)}}};var u=1,s=function(we){var Se={},De=[];for(var Xe in we){var $e=we[Xe],ot=Se[Xe]={};for(var st in $e){var pt=$e[+st];if(!(!pt||pt.bitmap.width===0||pt.bitmap.height===0)){var wt={x:0,y:0,w:pt.bitmap.width+2*u,h:pt.bitmap.height+2*u};De.push(wt),ot[st]={rect:wt,metrics:pt.metrics}}}}var Yt=e.potpack(De),mr=Yt.w,xr=Yt.h,Tr=new e.AlphaImage({width:mr||1,height:xr||1});for(var yr in we){var Dr=we[yr];for(var tn in Dr){var wr=Dr[+tn];if(!(!wr||wr.bitmap.width===0||wr.bitmap.height===0)){var gr=Se[yr][tn].rect;e.AlphaImage.copy(wr.bitmap,Tr,{x:0,y:0},{x:gr.x+u,y:gr.y+u},wr.bitmap)}}}this.image=Tr,this.positions=Se};e.register("GlyphAtlas",s);var i=function(we){this.tileID=new e.OverscaledTileID(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.uid=we.uid,this.zoom=we.zoom,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=we.showCollisionBoxes,this.collectResourceTiming=!!we.collectResourceTiming,this.returnDependencies=!!we.returnDependencies,this.promoteId=we.promoteId};i.prototype.parse=function(we,Se,De,Xe,$e){var ot=this;this.status="parsing",this.data=we,this.collisionBoxArray=new e.CollisionBoxArray;var st=new e.DictionaryCoder(Object.keys(we.layers).sort()),pt=new e.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var wt={},Yt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:De},mr=Se.familiesBySource[this.source];for(var xr in mr){var Tr=we.layers[xr];if(!!Tr){Tr.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+xr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var yr=st.encode(xr),Dr=[],tn=0;tn<Tr.length;tn++){var wr=Tr.feature(tn),gr=pt.getId(wr,xr);Dr.push({feature:wr,id:gr,index:tn,sourceLayerIndex:yr})}for(var yn=0,Gr=mr[xr];yn<Gr.length;yn+=1){var Ar=Gr[yn],nn=Ar[0];if(!(nn.minzoom&&this.zoom<Math.floor(nn.minzoom))&&!(nn.maxzoom&&this.zoom>=nn.maxzoom)&&nn.visibility!=="none"){f(Ar,this.zoom,De);var fn=wt[nn.id]=nn.createBucket({index:pt.bucketLayerIDs.length,layers:Ar,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yr,sourceID:this.source});fn.populate(Dr,Yt,this.tileID.canonical),pt.bucketLayerIDs.push(Ar.map(function(br){return br.id}))}}}}var Xr,at,Ft,er,hr=e.mapObject(Yt.glyphDependencies,function(br){return Object.keys(br).map(Number)});Object.keys(hr).length?Xe.send("getGlyphs",{uid:this.uid,stacks:hr},function(br,jr){Xr||(Xr=br,at=jr,Pr.call(ot))}):at={};var Yr=Object.keys(Yt.iconDependencies);Yr.length?Xe.send("getImages",{icons:Yr,source:this.source,tileID:this.tileID,type:"icons"},function(br,jr){Xr||(Xr=br,Ft=jr,Pr.call(ot))}):Ft={};var zr=Object.keys(Yt.patternDependencies);zr.length?Xe.send("getImages",{icons:zr,source:this.source,tileID:this.tileID,type:"patterns"},function(br,jr){Xr||(Xr=br,er=jr,Pr.call(ot))}):er={},Pr.call(this);function Pr(){if(Xr)return $e(Xr);if(at&&Ft&&er){var br=new s(at),jr=new e.ImageAtlas(Ft,er);for(var zn in wt){var kn=wt[zn];kn instanceof e.SymbolBucket?(f(kn.layers,this.zoom,De),e.performSymbolLayout(kn,at,br.positions,Ft,jr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kn.hasPattern&&(kn instanceof e.LineBucket||kn instanceof e.FillBucket||kn instanceof e.FillExtrusionBucket)&&(f(kn.layers,this.zoom,De),kn.addFeatures(Yt,this.tileID.canonical,jr.patternPositions))}this.status="done",$e(null,{buckets:e.values(wt).filter(function(ta){return!ta.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,imageAtlas:jr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Ft:null,glyphPositions:this.returnDependencies?br.positions:null})}}};function f(et,we,Se){for(var De=new e.EvaluationParameters(we),Xe=0,$e=et;Xe<$e.length;Xe+=1){var ot=$e[Xe];ot.recalculate(De,Se)}}function h(et,we){var Se=e.getArrayBuffer(et.request,function(De,Xe,$e,ot){De?we(De):Xe&&we(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Xe)),rawData:Xe,cacheControl:$e,expires:ot})});return function(){Se.cancel(),we()}}var p=function(we,Se,De,Xe){this.actor=we,this.layerIndex=Se,this.availableImages=De,this.loadVectorData=Xe||h,this.loading={},this.loaded={}};p.prototype.loadTile=function(we,Se){var De=this,Xe=we.uid;this.loading||(this.loading={});var $e=we&&we.request&&we.request.collectResourceTiming?new e.RequestPerformance(we.request):!1,ot=this.loading[Xe]=new i(we);ot.abort=this.loadVectorData(we,function(st,pt){if(delete De.loading[Xe],st||!pt)return ot.status="done",De.loaded[Xe]=ot,Se(st);var wt=pt.rawData,Yt={};pt.expires&&(Yt.expires=pt.expires),pt.cacheControl&&(Yt.cacheControl=pt.cacheControl);var mr={};if($e){var xr=$e.finish();xr&&(mr.resourceTiming=JSON.parse(JSON.stringify(xr)))}ot.vectorTile=pt.vectorTile,ot.parse(pt.vectorTile,De.layerIndex,De.availableImages,De.actor,function(Tr,yr){if(Tr||!yr)return Se(Tr);Se(null,e.extend({rawTileData:wt.slice(0)},yr,Yt,mr))}),De.loaded=De.loaded||{},De.loaded[Xe]=ot})},p.prototype.reloadTile=function(we,Se){var De=this,Xe=this.loaded,$e=we.uid,ot=this;if(Xe&&Xe[$e]){var st=Xe[$e];st.showCollisionBoxes=we.showCollisionBoxes;var pt=function(wt,Yt){var mr=st.reloadCallback;mr&&(delete st.reloadCallback,st.parse(st.vectorTile,ot.layerIndex,De.availableImages,ot.actor,mr)),Se(wt,Yt)};st.status==="parsing"?st.reloadCallback=pt:st.status==="done"&&(st.vectorTile?st.parse(st.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},p.prototype.abortTile=function(we,Se){var De=this.loading,Xe=we.uid;De&&De[Xe]&&De[Xe].abort&&(De[Xe].abort(),delete De[Xe]),Se()},p.prototype.removeTile=function(we,Se){var De=this.loaded,Xe=we.uid;De&&De[Xe]&&delete De[Xe],Se()};var v=e.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(we,Se){var De=we.uid,Xe=we.encoding,$e=we.rawImageData,ot=v&&$e instanceof v?this.getImageData($e):$e,st=new e.DEMData(De,ot,Xe);this.loaded=this.loaded||{},this.loaded[De]=st,Se(null,st)},y.prototype.getImageData=function(we){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);var Se=this.offscreenCanvasContext.getImageData(-1,-1,we.width+2,we.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Se.width,height:Se.height},Se.data)},y.prototype.removeTile=function(we){var Se=this.loaded,De=we.uid;Se&&Se[De]&&delete Se[De]};var g=A;function A(et,we){var Se=et&&et.type,De;if(Se==="FeatureCollection")for(De=0;De<et.features.length;De++)A(et.features[De],we);else if(Se==="GeometryCollection")for(De=0;De<et.geometries.length;De++)A(et.geometries[De],we);else if(Se==="Feature")A(et.geometry,we);else if(Se==="Polygon")m(et.coordinates,we);else if(Se==="MultiPolygon")for(De=0;De<et.coordinates.length;De++)m(et.coordinates[De],we);return et}function m(et,we){if(et.length!==0){M(et[0],we);for(var Se=1;Se<et.length;Se++)M(et[Se],!we)}}function M(et,we){for(var Se=0,De=0,Xe=et.length,$e=Xe-1;De<Xe;$e=De++)Se+=(et[De][0]-et[$e][0])*(et[$e][1]+et[De][1]);Se>=0!=!!we&&et.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(we){this._feature=we,this.extent=e.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var we=[],Se=0,De=this._feature.geometry;Se<De.length;Se+=1){var Xe=De[Se];we.push([new e.Point$1(Xe[0],Xe[1])])}return we}else{for(var $e=[],ot=0,st=this._feature.geometry;ot<st.length;ot+=1){for(var pt=st[ot],wt=[],Yt=0,mr=pt;Yt<mr.length;Yt+=1){var xr=mr[Yt];wt.push(new e.Point$1(xr[0],xr[1]))}$e.push(wt)}return $e}},T.prototype.toGeoJSON=function(we,Se,De){return _.call(this,we,Se,De)};var x=function(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=we.length,this._features=we};x.prototype.feature=function(we){return new T(this._features[we])};var c=e.vectorTile.VectorTileFeature,L=S;function S(et,we){this.options=we||{},this.features=et,this.length=et.length}S.prototype.feature=function(et){return new k(this.features[et],this.options.extent)};function k(et,we){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=we||4096}k.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var we=0;we<et.length;we++){for(var Se=et[we],De=[],Xe=0;Xe<Se.length;Xe++)De.push(new e.Point$1(Se[Xe][0],Se[Xe][1]));this.geometry.push(De)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,we=1/0,Se=-1/0,De=1/0,Xe=-1/0,$e=0;$e<et.length;$e++)for(var ot=et[$e],st=0;st<ot.length;st++){var pt=ot[st];we=Math.min(we,pt.x),Se=Math.max(Se,pt.x),De=Math.min(De,pt.y),Xe=Math.max(Xe,pt.y)}return[we,De,Se,Xe]},k.prototype.toGeoJSON=c.prototype.toGeoJSON;var P=D,z=D,I=O,R=L;function D(et){var we=new e.pbf;return F(et,we),we.finish()}function O(et,we){we=we||{};var Se={};for(var De in et)Se[De]=new L(et[De].features,we),Se[De].name=De,Se[De].version=we.version,Se[De].extent=we.extent;return D({layers:Se})}function F(et,we){for(var Se in et.layers)we.writeMessage(3,Y,et.layers[Se])}function Y(et,we){we.writeVarintField(15,et.version||1),we.writeStringField(1,et.name||""),we.writeVarintField(5,et.extent||4096);var Se,De={keys:[],values:[],keycache:{},valuecache:{}};for(Se=0;Se<et.length;Se++)De.feature=et.feature(Se),we.writeMessage(2,X,De);var Xe=De.keys;for(Se=0;Se<Xe.length;Se++)we.writeStringField(3,Xe[Se]);var $e=De.values;for(Se=0;Se<$e.length;Se++)we.writeMessage(4,se,$e[Se])}function X(et,we){var Se=et.feature;Se.id!==void 0&&we.writeVarintField(1,Se.id),we.writeMessage(2,q,et),we.writeVarintField(3,Se.type),we.writeMessage(4,K,Se)}function q(et,we){var Se=et.feature,De=et.keys,Xe=et.values,$e=et.keycache,ot=et.valuecache;for(var st in Se.properties){var pt=$e[st];typeof pt=="undefined"&&(De.push(st),pt=De.length-1,$e[st]=pt),we.writeVarint(pt);var wt=Se.properties[st],Yt=typeof wt;Yt!=="string"&&Yt!=="boolean"&&Yt!=="number"&&(wt=JSON.stringify(wt));var mr=Yt+":"+wt,xr=ot[mr];typeof xr=="undefined"&&(Xe.push(wt),xr=Xe.length-1,ot[mr]=xr),we.writeVarint(xr)}}function $(et,we){return(we<<3)+(et&7)}function V(et){return et<<1^et>>31}function K(et,we){for(var Se=et.loadGeometry(),De=et.type,Xe=0,$e=0,ot=Se.length,st=0;st<ot;st++){var pt=Se[st],wt=1;De===1&&(wt=pt.length),we.writeVarint($(1,wt));for(var Yt=De===3?pt.length-1:pt.length,mr=0;mr<Yt;mr++){mr===1&&De!==1&&we.writeVarint($(2,Yt-1));var xr=pt[mr].x-Xe,Tr=pt[mr].y-$e;we.writeVarint(V(xr)),we.writeVarint(V(Tr)),Xe+=xr,$e+=Tr}De===3&&we.writeVarint($(7,1))}}function se(et,we){var Se=typeof et;Se==="string"?we.writeStringField(1,et):Se==="boolean"?we.writeBooleanField(7,et):Se==="number"&&(et%1!=0?we.writeDoubleField(3,et):et<0?we.writeSVarintField(6,et):we.writeVarintField(5,et))}P.fromVectorTileJs=z,P.fromGeojsonVt=I,P.GeoJSONWrapper=R;function ue(et,we,Se,De,Xe,$e){if(!(Xe-De<=Se)){var ot=De+Xe>>1;oe(et,we,ot,De,Xe,$e%2),ue(et,we,Se,De,ot-1,$e+1),ue(et,we,Se,ot+1,Xe,$e+1)}}function oe(et,we,Se,De,Xe,$e){for(;Xe>De;){if(Xe-De>600){var ot=Xe-De+1,st=Se-De+1,pt=Math.log(ot),wt=.5*Math.exp(2*pt/3),Yt=.5*Math.sqrt(pt*wt*(ot-wt)/ot)*(st-ot/2<0?-1:1),mr=Math.max(De,Math.floor(Se-st*wt/ot+Yt)),xr=Math.min(Xe,Math.floor(Se+(ot-st)*wt/ot+Yt));oe(et,we,Se,mr,xr,$e)}var Tr=we[2*Se+$e],yr=De,Dr=Xe;for(U(et,we,De,Se),we[2*Xe+$e]>Tr&&U(et,we,De,Xe);yr<Dr;){for(U(et,we,yr,Dr),yr++,Dr--;we[2*yr+$e]<Tr;)yr++;for(;we[2*Dr+$e]>Tr;)Dr--}we[2*De+$e]===Tr?U(et,we,De,Dr):(Dr++,U(et,we,Dr,Xe)),Dr<=Se&&(De=Dr+1),Se<=Dr&&(Xe=Dr-1)}}function U(et,we,Se,De){G(et,Se,De),G(we,2*Se,2*De),G(we,2*Se+1,2*De+1)}function G(et,we,Se){var De=et[we];et[we]=et[Se],et[Se]=De}function re(et,we,Se,De,Xe,$e,ot){for(var st=[0,et.length-1,0],pt=[],wt,Yt;st.length;){var mr=st.pop(),xr=st.pop(),Tr=st.pop();if(xr-Tr<=ot){for(var yr=Tr;yr<=xr;yr++)wt=we[2*yr],Yt=we[2*yr+1],wt>=Se&&wt<=Xe&&Yt>=De&&Yt<=$e&&pt.push(et[yr]);continue}var Dr=Math.floor((Tr+xr)/2);wt=we[2*Dr],Yt=we[2*Dr+1],wt>=Se&&wt<=Xe&&Yt>=De&&Yt<=$e&&pt.push(et[Dr]);var tn=(mr+1)%2;(mr===0?Se<=wt:De<=Yt)&&(st.push(Tr),st.push(Dr-1),st.push(tn)),(mr===0?Xe>=wt:$e>=Yt)&&(st.push(Dr+1),st.push(xr),st.push(tn))}return pt}function ee(et,we,Se,De,Xe,$e){for(var ot=[0,et.length-1,0],st=[],pt=Xe*Xe;ot.length;){var wt=ot.pop(),Yt=ot.pop(),mr=ot.pop();if(Yt-mr<=$e){for(var xr=mr;xr<=Yt;xr++)j(we[2*xr],we[2*xr+1],Se,De)<=pt&&st.push(et[xr]);continue}var Tr=Math.floor((mr+Yt)/2),yr=we[2*Tr],Dr=we[2*Tr+1];j(yr,Dr,Se,De)<=pt&&st.push(et[Tr]);var tn=(wt+1)%2;(wt===0?Se-Xe<=yr:De-Xe<=Dr)&&(ot.push(mr),ot.push(Tr-1),ot.push(tn)),(wt===0?Se+Xe>=yr:De+Xe>=Dr)&&(ot.push(Tr+1),ot.push(Yt),ot.push(tn))}return st}function j(et,we,Se,De){var Xe=et-Se,$e=we-De;return Xe*Xe+$e*$e}var Q=function(et){return et[0]},ne=function(et){return et[1]},ae=function(we,Se,De,Xe,$e){Se===void 0&&(Se=Q),De===void 0&&(De=ne),Xe===void 0&&(Xe=64),$e===void 0&&($e=Float64Array),this.nodeSize=Xe,this.points=we;for(var ot=we.length<65536?Uint16Array:Uint32Array,st=this.ids=new ot(we.length),pt=this.coords=new $e(we.length*2),wt=0;wt<we.length;wt++)st[wt]=wt,pt[2*wt]=Se(we[wt]),pt[2*wt+1]=De(we[wt]);ue(st,pt,Xe,0,st.length-1,0)};ae.prototype.range=function(we,Se,De,Xe){return re(this.ids,this.coords,we,Se,De,Xe,this.nodeSize)},ae.prototype.within=function(we,Se,De){return ee(this.ids,this.coords,we,Se,De,this.nodeSize)};var ie={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},fe=function(we){this.options=Ge(Object.create(ie),we),this.trees=new Array(this.options.maxZoom+1)};fe.prototype.load=function(we){var Se=this.options,De=Se.log,Xe=Se.minZoom,$e=Se.maxZoom,ot=Se.nodeSize;De&&console.time("total time");var st="prepare "+we.length+" points";De&&console.time(st),this.points=we;for(var pt=[],wt=0;wt<we.length;wt++)!we[wt].geometry||pt.push(ce(we[wt],wt));this.trees[$e+1]=new ae(pt,_e,Ie,ot,Float32Array),De&&console.timeEnd(st);for(var Yt=$e;Yt>=Xe;Yt--){var mr=+Date.now();pt=this._cluster(pt,Yt),this.trees[Yt]=new ae(pt,_e,Ie,ot,Float32Array),De&&console.log("z%d: %d clusters in %dms",Yt,pt.length,+Date.now()-mr)}return De&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(we,Se){var De=((we[0]+180)%360+360)%360-180,Xe=Math.max(-90,Math.min(90,we[1])),$e=we[2]===180?180:((we[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)De=-180,$e=180;else if(De>$e){var st=this.getClusters([De,Xe,180,ot],Se),pt=this.getClusters([-180,Xe,$e,ot],Se);return st.concat(pt)}for(var wt=this.trees[this._limitZoom(Se)],Yt=wt.range(ke(De),Ae(ot),ke($e),Ae(Xe)),mr=[],xr=0,Tr=Yt;xr<Tr.length;xr+=1){var yr=Tr[xr],Dr=wt.points[yr];mr.push(Dr.numPoints?ye(Dr):this.points[Dr.index])}return mr},fe.prototype.getChildren=function(we){var Se=this._getOriginId(we),De=this._getOriginZoom(we),Xe="No cluster with the specified id.",$e=this.trees[De];if(!$e)throw new Error(Xe);var ot=$e.points[Se];if(!ot)throw new Error(Xe);for(var st=this.options.radius/(this.options.extent*Math.pow(2,De-1)),pt=$e.within(ot.x,ot.y,st),wt=[],Yt=0,mr=pt;Yt<mr.length;Yt+=1){var xr=mr[Yt],Tr=$e.points[xr];Tr.parentId===we&&wt.push(Tr.numPoints?ye(Tr):this.points[Tr.index])}if(wt.length===0)throw new Error(Xe);return wt},fe.prototype.getLeaves=function(we,Se,De){Se=Se||10,De=De||0;var Xe=[];return this._appendLeaves(Xe,we,Se,De,0),Xe},fe.prototype.getTile=function(we,Se,De){var Xe=this.trees[this._limitZoom(we)],$e=Math.pow(2,we),ot=this.options,st=ot.extent,pt=ot.radius,wt=pt/st,Yt=(De-wt)/$e,mr=(De+1+wt)/$e,xr={features:[]};return this._addTileFeatures(Xe.range((Se-wt)/$e,Yt,(Se+1+wt)/$e,mr),Xe.points,Se,De,$e,xr),Se===0&&this._addTileFeatures(Xe.range(1-wt/$e,Yt,1,mr),Xe.points,$e,De,$e,xr),Se===$e-1&&this._addTileFeatures(Xe.range(0,Yt,wt/$e,mr),Xe.points,-1,De,$e,xr),xr.features.length?xr:null},fe.prototype.getClusterExpansionZoom=function(we){for(var Se=this._getOriginZoom(we)-1;Se<=this.options.maxZoom;){var De=this.getChildren(we);if(Se++,De.length!==1)break;we=De[0].properties.cluster_id}return Se},fe.prototype._appendLeaves=function(we,Se,De,Xe,$e){for(var ot=this.getChildren(Se),st=0,pt=ot;st<pt.length;st+=1){var wt=pt[st],Yt=wt.properties;if(Yt&&Yt.cluster?$e+Yt.point_count<=Xe?$e+=Yt.point_count:$e=this._appendLeaves(we,Yt.cluster_id,De,Xe,$e):$e<Xe?$e++:we.push(wt),we.length===De)break}return $e},fe.prototype._addTileFeatures=function(we,Se,De,Xe,$e,ot){for(var st=0,pt=we;st<pt.length;st+=1){var wt=pt[st],Yt=Se[wt],mr=Yt.numPoints,xr={type:1,geometry:[[Math.round(this.options.extent*(Yt.x*$e-De)),Math.round(this.options.extent*(Yt.y*$e-Xe))]],tags:mr?xe(Yt):this.points[Yt.index].properties},Tr=void 0;mr?Tr=Yt.id:this.options.generateId?Tr=Yt.index:this.points[Yt.index].id&&(Tr=this.points[Yt.index].id),Tr!==void 0&&(xr.id=Tr),ot.features.push(xr)}},fe.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(we,this.options.maxZoom+1))},fe.prototype._cluster=function(we,Se){for(var De=[],Xe=this.options,$e=Xe.radius,ot=Xe.extent,st=Xe.reduce,pt=$e/(ot*Math.pow(2,Se)),wt=0;wt<we.length;wt++){var Yt=we[wt];if(!(Yt.zoom<=Se)){Yt.zoom=Se;for(var mr=this.trees[Se+1],xr=mr.within(Yt.x,Yt.y,pt),Tr=Yt.numPoints||1,yr=Yt.x*Tr,Dr=Yt.y*Tr,tn=st&&Tr>1?this._map(Yt,!0):null,wr=(wt<<5)+(Se+1)+this.points.length,gr=0,yn=xr;gr<yn.length;gr+=1){var Gr=yn[gr],Ar=mr.points[Gr];if(!(Ar.zoom<=Se)){Ar.zoom=Se;var nn=Ar.numPoints||1;yr+=Ar.x*nn,Dr+=Ar.y*nn,Tr+=nn,Ar.parentId=wr,st&&(tn||(tn=this._map(Yt,!0)),st(tn,this._map(Ar)))}}Tr===1?De.push(Yt):(Yt.parentId=wr,De.push(me(yr/Tr,Dr/Tr,wr,Tr,tn)))}}return De},fe.prototype._getOriginId=function(we){return we-this.points.length>>5},fe.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},fe.prototype._map=function(we,Se){if(we.numPoints)return Se?Ge({},we.properties):we.properties;var De=this.points[we.index].properties,Xe=this.options.map(De);return Se&&Xe===De?Ge({},Xe):Xe};function me(et,we,Se,De,Xe){return{x:et,y:we,zoom:1/0,id:Se,parentId:-1,numPoints:De,properties:Xe}}function ce(et,we){var Se=et.geometry.coordinates,De=Se[0],Xe=Se[1];return{x:ke(De),y:Ae(Xe),zoom:1/0,index:we,parentId:-1}}function ye(et){return{type:"Feature",id:et.id,properties:xe(et),geometry:{type:"Point",coordinates:[Oe(et.x),He(et.y)]}}}function xe(et){var we=et.numPoints,Se=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ge(Ge({},et.properties),{cluster:!0,cluster_id:et.id,point_count:we,point_count_abbreviated:Se})}function ke(et){return et/360+.5}function Ae(et){var we=Math.sin(et*Math.PI/180),Se=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Se<0?0:Se>1?1:Se}function Oe(et){return(et-.5)*360}function He(et){var we=(180-et*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ge(et,we){for(var Se in we)et[Se]=we[Se];return et}function _e(et){return et.x}function Ie(et){return et.y}function Ye(et,we,Se,De){for(var Xe=De,$e=Se-we>>1,ot=Se-we,st,pt=et[we],wt=et[we+1],Yt=et[Se],mr=et[Se+1],xr=we+3;xr<Se;xr+=3){var Tr=qe(et[xr],et[xr+1],pt,wt,Yt,mr);if(Tr>Xe)st=xr,Xe=Tr;else if(Tr===Xe){var yr=Math.abs(xr-$e);yr<ot&&(st=xr,ot=yr)}}Xe>De&&(st-we>3&&Ye(et,we,st,De),et[st+2]=Xe,Se-st>3&&Ye(et,st,Se,De))}function qe(et,we,Se,De,Xe,$e){var ot=Xe-Se,st=$e-De;if(ot!==0||st!==0){var pt=((et-Se)*ot+(we-De)*st)/(ot*ot+st*st);pt>1?(Se=Xe,De=$e):pt>0&&(Se+=ot*pt,De+=st*pt)}return ot=et-Se,st=we-De,ot*ot+st*st}function Ue(et,we,Se,De){var Xe={id:typeof et=="undefined"?null:et,type:we,geometry:Se,tags:De,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Re(Xe),Xe}function Re(et){var we=et.geometry,Se=et.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Ve(et,we);else if(Se==="Polygon"||Se==="MultiLineString")for(var De=0;De<we.length;De++)Ve(et,we[De]);else if(Se==="MultiPolygon")for(De=0;De<we.length;De++)for(var Xe=0;Xe<we[De].length;Xe++)Ve(et,we[De][Xe])}function Ve(et,we){for(var Se=0;Se<we.length;Se+=3)et.minX=Math.min(et.minX,we[Se]),et.minY=Math.min(et.minY,we[Se+1]),et.maxX=Math.max(et.maxX,we[Se]),et.maxY=Math.max(et.maxY,we[Se+1])}function dt(et,we){var Se=[];if(et.type==="FeatureCollection")for(var De=0;De<et.features.length;De++)Dt(Se,et.features[De],we,De);else et.type==="Feature"?Dt(Se,et,we):Dt(Se,{geometry:et},we);return Se}function Dt(et,we,Se,De){if(!!we.geometry){var Xe=we.geometry.coordinates,$e=we.geometry.type,ot=Math.pow(Se.tolerance/((1<<Se.maxZoom)*Se.extent),2),st=[],pt=we.id;if(Se.promoteId?pt=we.properties[Se.promoteId]:Se.generateId&&(pt=De||0),$e==="Point")Gt(Xe,st);else if($e==="MultiPoint")for(var wt=0;wt<Xe.length;wt++)Gt(Xe[wt],st);else if($e==="LineString")kt(Xe,st,ot,!1);else if($e==="MultiLineString")if(Se.lineMetrics){for(wt=0;wt<Xe.length;wt++)st=[],kt(Xe[wt],st,ot,!1),et.push(Ue(pt,"LineString",st,we.properties));return}else zt(Xe,st,ot,!1);else if($e==="Polygon")zt(Xe,st,ot,!0);else if($e==="MultiPolygon")for(wt=0;wt<Xe.length;wt++){var Yt=[];zt(Xe[wt],Yt,ot,!0),st.push(Yt)}else if($e==="GeometryCollection"){for(wt=0;wt<we.geometry.geometries.length;wt++)Dt(et,{id:pt,geometry:we.geometry.geometries[wt],properties:we.properties},Se,De);return}else throw new Error("Input data is not a valid GeoJSON object.");et.push(Ue(pt,$e,st,we.properties))}}function Gt(et,we){we.push(Bt(et[0])),we.push(Lt(et[1])),we.push(0)}function kt(et,we,Se,De){for(var Xe,$e,ot=0,st=0;st<et.length;st++){var pt=Bt(et[st][0]),wt=Lt(et[st][1]);we.push(pt),we.push(wt),we.push(0),st>0&&(De?ot+=(Xe*wt-pt*$e)/2:ot+=Math.sqrt(Math.pow(pt-Xe,2)+Math.pow(wt-$e,2))),Xe=pt,$e=wt}var Yt=we.length-3;we[2]=1,Ye(we,0,Yt,Se),we[Yt+2]=1,we.size=Math.abs(ot),we.start=0,we.end=we.size}function zt(et,we,Se,De){for(var Xe=0;Xe<et.length;Xe++){var $e=[];kt(et[Xe],$e,Se,De),we.push($e)}}function Bt(et){return et/360+.5}function Lt(et){var we=Math.sin(et*Math.PI/180),Se=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Se<0?0:Se>1?1:Se}function Mt(et,we,Se,De,Xe,$e,ot,st){if(Se/=we,De/=we,$e>=Se&&ot<De)return et;if(ot<Se||$e>=De)return null;for(var pt=[],wt=0;wt<et.length;wt++){var Yt=et[wt],mr=Yt.geometry,xr=Yt.type,Tr=Xe===0?Yt.minX:Yt.minY,yr=Xe===0?Yt.maxX:Yt.maxY;if(Tr>=Se&&yr<De){pt.push(Yt);continue}else if(yr<Se||Tr>=De)continue;var Dr=[];if(xr==="Point"||xr==="MultiPoint")it(mr,Dr,Se,De,Xe);else if(xr==="LineString")ht(mr,Dr,Se,De,Xe,!1,st.lineMetrics);else if(xr==="MultiLineString")Ce(mr,Dr,Se,De,Xe,!1);else if(xr==="Polygon")Ce(mr,Dr,Se,De,Xe,!0);else if(xr==="MultiPolygon")for(var tn=0;tn<mr.length;tn++){var wr=[];Ce(mr[tn],wr,Se,De,Xe,!0),wr.length&&Dr.push(wr)}if(Dr.length){if(st.lineMetrics&&xr==="LineString"){for(tn=0;tn<Dr.length;tn++)pt.push(Ue(Yt.id,xr,Dr[tn],Yt.tags));continue}(xr==="LineString"||xr==="MultiLineString")&&(Dr.length===1?(xr="LineString",Dr=Dr[0]):xr="MultiLineString"),(xr==="Point"||xr==="MultiPoint")&&(xr=Dr.length===3?"Point":"MultiPoint"),pt.push(Ue(Yt.id,xr,Dr,Yt.tags))}}return pt.length?pt:null}function it(et,we,Se,De,Xe){for(var $e=0;$e<et.length;$e+=3){var ot=et[$e+Xe];ot>=Se&&ot<=De&&(we.push(et[$e]),we.push(et[$e+1]),we.push(et[$e+2]))}}function ht(et,we,Se,De,Xe,$e,ot){for(var st=Qe(et),pt=Xe===0?rt:ut,wt=et.start,Yt,mr,xr=0;xr<et.length-3;xr+=3){var Tr=et[xr],yr=et[xr+1],Dr=et[xr+2],tn=et[xr+3],wr=et[xr+4],gr=Xe===0?Tr:yr,yn=Xe===0?tn:wr,Gr=!1;ot&&(Yt=Math.sqrt(Math.pow(Tr-tn,2)+Math.pow(yr-wr,2))),gr<Se?yn>Se&&(mr=pt(st,Tr,yr,tn,wr,Se),ot&&(st.start=wt+Yt*mr)):gr>De?yn<De&&(mr=pt(st,Tr,yr,tn,wr,De),ot&&(st.start=wt+Yt*mr)):je(st,Tr,yr,Dr),yn<Se&&gr>=Se&&(mr=pt(st,Tr,yr,tn,wr,Se),Gr=!0),yn>De&&gr<=De&&(mr=pt(st,Tr,yr,tn,wr,De),Gr=!0),!$e&&Gr&&(ot&&(st.end=wt+Yt*mr),we.push(st),st=Qe(et)),ot&&(wt+=Yt)}var Ar=et.length-3;Tr=et[Ar],yr=et[Ar+1],Dr=et[Ar+2],gr=Xe===0?Tr:yr,gr>=Se&&gr<=De&&je(st,Tr,yr,Dr),Ar=st.length-3,$e&&Ar>=3&&(st[Ar]!==st[0]||st[Ar+1]!==st[1])&&je(st,st[0],st[1],st[2]),st.length&&we.push(st)}function Qe(et){var we=[];return we.size=et.size,we.start=et.start,we.end=et.end,we}function Ce(et,we,Se,De,Xe,$e){for(var ot=0;ot<et.length;ot++)ht(et[ot],we,Se,De,Xe,$e,!1)}function je(et,we,Se,De){et.push(we),et.push(Se),et.push(De)}function rt(et,we,Se,De,Xe,$e){var ot=($e-we)/(De-we);return et.push($e),et.push(Se+(Xe-Se)*ot),et.push(1),ot}function ut(et,we,Se,De,Xe,$e){var ot=($e-Se)/(Xe-Se);return et.push(we+(De-we)*ot),et.push($e),et.push(1),ot}function Pt(et,we){var Se=we.buffer/we.extent,De=et,Xe=Mt(et,1,-1-Se,Se,0,-1,2,we),$e=Mt(et,1,1-Se,2+Se,0,-1,2,we);return(Xe||$e)&&(De=Mt(et,1,-Se,1+Se,0,-1,2,we)||[],Xe&&(De=St(Xe,1).concat(De)),$e&&(De=De.concat(St($e,-1)))),De}function St(et,we){for(var Se=[],De=0;De<et.length;De++){var Xe=et[De],$e=Xe.type,ot;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")ot=Nt(Xe.geometry,we);else if($e==="MultiLineString"||$e==="Polygon"){ot=[];for(var st=0;st<Xe.geometry.length;st++)ot.push(Nt(Xe.geometry[st],we))}else if($e==="MultiPolygon")for(ot=[],st=0;st<Xe.geometry.length;st++){for(var pt=[],wt=0;wt<Xe.geometry[st].length;wt++)pt.push(Nt(Xe.geometry[st][wt],we));ot.push(pt)}Se.push(Ue(Xe.id,$e,ot,Xe.tags))}return Se}function Nt(et,we){var Se=[];Se.size=et.size,et.start!==void 0&&(Se.start=et.start,Se.end=et.end);for(var De=0;De<et.length;De+=3)Se.push(et[De]+we,et[De+1],et[De+2]);return Se}function Xt(et,we){if(et.transformed)return et;var Se=1<<et.z,De=et.x,Xe=et.y,$e,ot,st;for($e=0;$e<et.features.length;$e++){var pt=et.features[$e],wt=pt.geometry,Yt=pt.type;if(pt.geometry=[],Yt===1)for(ot=0;ot<wt.length;ot+=2)pt.geometry.push(Ot(wt[ot],wt[ot+1],we,Se,De,Xe));else for(ot=0;ot<wt.length;ot++){var mr=[];for(st=0;st<wt[ot].length;st+=2)mr.push(Ot(wt[ot][st],wt[ot][st+1],we,Se,De,Xe));pt.geometry.push(mr)}}return et.transformed=!0,et}function Ot(et,we,Se,De,Xe,$e){return[Math.round(Se*(et*De-Xe)),Math.round(Se*(we*De-$e))]}function Kt(et,we,Se,De,Xe){for(var $e=we===Xe.maxZoom?0:Xe.tolerance/((1<<we)*Xe.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Se,y:De,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<et.length;st++){ot.numFeatures++,Je(ot,et[st],$e,Xe);var pt=et[st].minX,wt=et[st].minY,Yt=et[st].maxX,mr=et[st].maxY;pt<ot.minX&&(ot.minX=pt),wt<ot.minY&&(ot.minY=wt),Yt>ot.maxX&&(ot.maxX=Yt),mr>ot.maxY&&(ot.maxY=mr)}return ot}function Je(et,we,Se,De){var Xe=we.geometry,$e=we.type,ot=[];if($e==="Point"||$e==="MultiPoint")for(var st=0;st<Xe.length;st+=3)ot.push(Xe[st]),ot.push(Xe[st+1]),et.numPoints++,et.numSimplified++;else if($e==="LineString")gt(ot,Xe,et,Se,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(st=0;st<Xe.length;st++)gt(ot,Xe[st],et,Se,$e==="Polygon",st===0);else if($e==="MultiPolygon")for(var pt=0;pt<Xe.length;pt++){var wt=Xe[pt];for(st=0;st<wt.length;st++)gt(ot,wt[st],et,Se,!0,st===0)}if(ot.length){var Yt=we.tags||null;if($e==="LineString"&&De.lineMetrics){Yt={};for(var mr in we.tags)Yt[mr]=we.tags[mr];Yt.mapbox_clip_start=Xe.start/Xe.size,Yt.mapbox_clip_end=Xe.end/Xe.size}var xr={geometry:ot,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:Yt};we.id!==null&&(xr.id=we.id),et.features.push(xr)}}function gt(et,we,Se,De,Xe,$e){var ot=De*De;if(De>0&&we.size<(Xe?ot:De)){Se.numPoints+=we.length/3;return}for(var st=[],pt=0;pt<we.length;pt+=3)(De===0||we[pt+2]>ot)&&(Se.numSimplified++,st.push(we[pt]),st.push(we[pt+1])),Se.numPoints++;Xe&&Et(st,$e),et.push(st)}function Et(et,we){for(var Se=0,De=0,Xe=et.length,$e=Xe-2;De<Xe;$e=De,De+=2)Se+=(et[De]-et[$e])*(et[De+1]+et[$e+1]);if(Se>0===we)for(De=0,Xe=et.length;De<Xe/2;De+=2){var ot=et[De],st=et[De+1];et[De]=et[Xe-2-De],et[De+1]=et[Xe-1-De],et[Xe-2-De]=ot,et[Xe-1-De]=st}}function rr(et,we){return new vr(et,we)}function vr(et,we){we=this.options=dr(Object.create(this.options),we);var Se=we.debug;if(Se&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var De=dt(et,we);this.tiles={},this.tileCoords=[],Se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=Pt(De,we),De.length&&this.splitTile(De,0,0,0),Se&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}vr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vr.prototype.splitTile=function(et,we,Se,De,Xe,$e,ot){for(var st=[et,we,Se,De],pt=this.options,wt=pt.debug;st.length;){De=st.pop(),Se=st.pop(),we=st.pop(),et=st.pop();var Yt=1<<we,mr=or(we,Se,De),xr=this.tiles[mr];if(!xr&&(wt>1&&console.time("creation"),xr=this.tiles[mr]=Kt(et,we,Se,De,pt),this.tileCoords.push({z:we,x:Se,y:De}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Se,De,xr.numFeatures,xr.numPoints,xr.numSimplified),console.timeEnd("creation"));var Tr="z"+we;this.stats[Tr]=(this.stats[Tr]||0)+1,this.total++}if(xr.source=et,Xe){if(we===pt.maxZoom||we===Xe)continue;var yr=1<<Xe-we;if(Se!==Math.floor($e/yr)||De!==Math.floor(ot/yr))continue}else if(we===pt.indexMaxZoom||xr.numPoints<=pt.indexMaxPoints)continue;if(xr.source=null,et.length!==0){wt>1&&console.time("clipping");var Dr=.5*pt.buffer/pt.extent,tn=.5-Dr,wr=.5+Dr,gr=1+Dr,yn,Gr,Ar,nn,fn,Xr;yn=Gr=Ar=nn=null,fn=Mt(et,Yt,Se-Dr,Se+wr,0,xr.minX,xr.maxX,pt),Xr=Mt(et,Yt,Se+tn,Se+gr,0,xr.minX,xr.maxX,pt),et=null,fn&&(yn=Mt(fn,Yt,De-Dr,De+wr,1,xr.minY,xr.maxY,pt),Gr=Mt(fn,Yt,De+tn,De+gr,1,xr.minY,xr.maxY,pt),fn=null),Xr&&(Ar=Mt(Xr,Yt,De-Dr,De+wr,1,xr.minY,xr.maxY,pt),nn=Mt(Xr,Yt,De+tn,De+gr,1,xr.minY,xr.maxY,pt),Xr=null),wt>1&&console.timeEnd("clipping"),st.push(yn||[],we+1,Se*2,De*2),st.push(Gr||[],we+1,Se*2,De*2+1),st.push(Ar||[],we+1,Se*2+1,De*2),st.push(nn||[],we+1,Se*2+1,De*2+1)}}},vr.prototype.getTile=function(et,we,Se){var De=this.options,Xe=De.extent,$e=De.debug;if(et<0||et>24)return null;var ot=1<<et;we=(we%ot+ot)%ot;var st=or(et,we,Se);if(this.tiles[st])return Xt(this.tiles[st],Xe);$e>1&&console.log("drilling down to z%d-%d-%d",et,we,Se);for(var pt=et,wt=we,Yt=Se,mr;!mr&&pt>0;)pt--,wt=Math.floor(wt/2),Yt=Math.floor(Yt/2),mr=this.tiles[or(pt,wt,Yt)];return!mr||!mr.source?null:($e>1&&console.log("found parent tile z%d-%d-%d",pt,wt,Yt),$e>1&&console.time("drilling down"),this.splitTile(mr.source,pt,wt,Yt,et,we,Se),$e>1&&console.timeEnd("drilling down"),this.tiles[st]?Xt(this.tiles[st],Xe):null)};function or(et,we,Se){return((1<<et)*Se+we)*32+et}function dr(et,we){for(var Se in we)et[Se]=we[Se];return et}function Lr(et,we){var Se=et.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);var De=this._geoJSONIndex.getTile(Se.z,Se.x,Se.y);if(!De)return we(null,null);var Xe=new x(De.features),$e=P(Xe);($e.byteOffset!==0||$e.byteLength!==$e.buffer.byteLength)&&($e=new Uint8Array($e)),we(null,{vectorTile:Xe,rawData:$e.buffer})}var kr=function(et){function we(Se,De,Xe,$e){et.call(this,Se,De,Xe,Lr),$e&&(this.loadGeoJSON=$e)}return et&&(we.__proto__=et),we.prototype=Object.create(et&&et.prototype),we.prototype.constructor=we,we.prototype.loadData=function(De,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Xe,this._pendingLoadDataParams=De,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},we.prototype._loadData=function(){var De=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Xe=this._pendingCallback,$e=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=$e&&$e.request&&$e.request.collectResourceTiming?new e.RequestPerformance($e.request):!1;this.loadGeoJSON($e,function(st,pt){if(st||!pt)return Xe(st);if(typeof pt!="object")return Xe(new Error("Input data given to '"+$e.source+"' is not a valid GeoJSON object."));g(pt,!0);try{De._geoJSONIndex=$e.cluster?new fe(tr($e)).load(pt.features):rr(pt,$e.geojsonVtOptions)}catch(mr){return Xe(mr)}De.loaded={};var wt={};if(ot){var Yt=ot.finish();Yt&&(wt.resourceTiming={},wt.resourceTiming[$e.source]=JSON.parse(JSON.stringify(Yt)))}Xe(null,wt)})}},we.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},we.prototype.reloadTile=function(De,Xe){var $e=this.loaded,ot=De.uid;return $e&&$e[ot]?et.prototype.reloadTile.call(this,De,Xe):this.loadTile(De,Xe)},we.prototype.loadGeoJSON=function(De,Xe){if(De.request)e.getJSON(De.request,Xe);else if(typeof De.data=="string")try{return Xe(null,JSON.parse(De.data))}catch{return Xe(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."))}else return Xe(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."))},we.prototype.removeSource=function(De,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Xe()},we.prototype.getClusterExpansionZoom=function(De,Xe){try{Xe(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch($e){Xe($e)}},we.prototype.getClusterChildren=function(De,Xe){try{Xe(null,this._geoJSONIndex.getChildren(De.clusterId))}catch($e){Xe($e)}},we.prototype.getClusterLeaves=function(De,Xe){try{Xe(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch($e){Xe($e)}},we}(p);function tr(et){var we=et.superclusterOptions,Se=et.clusterProperties;if(!Se||!we)return we;for(var De={},Xe={},$e={accumulated:null,zoom:0},ot={properties:null},st=Object.keys(Se),pt=0,wt=st;pt<wt.length;pt+=1){var Yt=wt[pt],mr=Se[Yt],xr=mr[0],Tr=mr[1],yr=e.createExpression(Tr),Dr=e.createExpression(typeof xr=="string"?[xr,["accumulated"],["get",Yt]]:xr);De[Yt]=yr.value,Xe[Yt]=Dr.value}return we.map=function(tn){ot.properties=tn;for(var wr={},gr=0,yn=st;gr<yn.length;gr+=1){var Gr=yn[gr];wr[Gr]=De[Gr].evaluate($e,ot)}return wr},we.reduce=function(tn,wr){ot.properties=wr;for(var gr=0,yn=st;gr<yn.length;gr+=1){var Gr=yn[gr];$e.accumulated=tn[Gr],tn[Gr]=Xe[Gr].evaluate($e,ot)}},we}var Or=function(we){var Se=this;this.self=we,this.actor=new e.Actor(we,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:kr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(De,Xe){if(Se.workerSourceTypes[De])throw new Error('Worker source with name "'+De+'" already registered.');Se.workerSourceTypes[De]=Xe},this.self.registerRTLTextPlugin=function(De){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=De.applyArabicShaping,e.plugin.processBidirectionalText=De.processBidirectionalText,e.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}};return Or.prototype.setReferrer=function(we,Se){this.referrer=Se},Or.prototype.setImages=function(we,Se,De){this.availableImages[we]=Se;for(var Xe in this.workerSources[we]){var $e=this.workerSources[we][Xe];for(var ot in $e)$e[ot].availableImages=Se}De()},Or.prototype.setLayers=function(we,Se,De){this.getLayerIndex(we).replace(Se),De()},Or.prototype.updateLayers=function(we,Se,De){this.getLayerIndex(we).update(Se.layers,Se.removedIds),De()},Or.prototype.loadTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).loadTile(Se,De)},Or.prototype.loadDEMTile=function(we,Se,De){this.getDEMWorkerSource(we,Se.source).loadTile(Se,De)},Or.prototype.reloadTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).reloadTile(Se,De)},Or.prototype.abortTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).abortTile(Se,De)},Or.prototype.removeTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).removeTile(Se,De)},Or.prototype.removeDEMTile=function(we,Se){this.getDEMWorkerSource(we,Se.source).removeTile(Se)},Or.prototype.removeSource=function(we,Se,De){if(!(!this.workerSources[we]||!this.workerSources[we][Se.type]||!this.workerSources[we][Se.type][Se.source])){var Xe=this.workerSources[we][Se.type][Se.source];delete this.workerSources[we][Se.type][Se.source],Xe.removeSource!==void 0?Xe.removeSource(Se,De):De()}},Or.prototype.loadWorkerSource=function(we,Se,De){try{this.self.importScripts(Se.url),De()}catch(Xe){De(Xe.toString())}},Or.prototype.syncRTLPluginState=function(we,Se,De){try{e.plugin.setState(Se);var Xe=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);var $e=e.plugin.isParsed(),ot=$e?void 0:new Error("RTL Text Plugin failed to import scripts from "+Xe);De(ot,$e)}}catch(st){De(st.toString())}},Or.prototype.getAvailableImages=function(we){var Se=this.availableImages[we];return Se||(Se=[]),Se},Or.prototype.getLayerIndex=function(we){var Se=this.layerIndexes[we];return Se||(Se=this.layerIndexes[we]=new r),Se},Or.prototype.getWorkerSource=function(we,Se,De){var Xe=this;if(this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][Se]||(this.workerSources[we][Se]={}),!this.workerSources[we][Se][De]){var $e={send:function(ot,st,pt){Xe.actor.send(ot,st,pt,we)}};this.workerSources[we][Se][De]=new this.workerSourceTypes[Se]($e,this.getLayerIndex(we),this.getAvailableImages(we))}return this.workerSources[we][Se][De]},Or.prototype.getDEMWorkerSource=function(we,Se){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Se]||(this.demWorkerSources[we][Se]=new y),this.demWorkerSources[we][Se]},Or.prototype.enforceCacheSizeLimit=function(we,Se){e.enforceCacheSizeLimit(Se)},typeof WorkerGlobalScope!="undefined"&&typeof e.window!="undefined"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Or(e.window)),Or}),w(["./shared"],function(e){var o=e.createCommonjsModule(function(ve){ve.exports?ve.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=de);function W(Nr){return!de(Nr)}function de(Nr){if(!J())return"not a browser";if(!ge())return"insufficent Array support";if(!Ee())return"insufficient Function support";if(!Pe())return"insufficient Object support";if(!Ze())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!At())return"insufficient Uint8ClampedArray support";if(!Vt())return"insufficient ArrayBuffer support";if(!$t())return"insufficient Canvas/getImageData support";if(!Sr(Nr&&Nr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function J(){return typeof window!="undefined"&&typeof document!="undefined"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ee(){return Function.prototype&&Function.prototype.bind}function Pe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ze(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Nr=new Blob([""],{type:"text/javascript"}),Kr=URL.createObjectURL(Nr),hn,Sn;try{Sn=new Worker(Kr),hn=!0}catch{hn=!1}return Sn&&Sn.terminate(),URL.revokeObjectURL(Kr),hn}function At(){return"Uint8ClampedArray"in window}function Vt(){return ArrayBuffer.isView}function $t(){var Nr=document.createElement("canvas");Nr.width=Nr.height=1;var Kr=Nr.getContext("2d");if(!Kr)return!1;var hn=Kr.getImageData(0,0,1,1);return hn&&hn.width===Nr.width}var ir={};function Sr(Nr){return ir[Nr]===void 0&&(ir[Nr]=Vr(Nr)),ir[Nr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Br(Nr){var Kr=document.createElement("canvas"),hn=Object.create(W.webGLContextAttributes);return hn.failIfMajorPerformanceCaveat=Nr,Kr.probablySupportsContext?Kr.probablySupportsContext("webgl",hn)||Kr.probablySupportsContext("experimental-webgl",hn):Kr.supportsContext?Kr.supportsContext("webgl",hn)||Kr.supportsContext("experimental-webgl",hn):Kr.getContext("webgl",hn)||Kr.getContext("experimental-webgl",hn)}function Vr(Nr){var Kr=Br(Nr);if(!Kr)return!1;var hn=Kr.createShader(Kr.VERTEX_SHADER);return!hn||Kr.isContextLost()?!1:(Kr.shaderSource(hn,"void main() {}"),Kr.compileShader(hn),Kr.getShaderParameter(hn,Kr.COMPILE_STATUS)===!0)}}),a={};a.create=function(ve,W,de){var J=e.window.document.createElement(ve);return W!==void 0&&(J.className=W),de&&de.appendChild(J),J},a.createNS=function(ve,W){var de=e.window.document.createElementNS(ve,W);return de};var n=e.window.document.documentElement.style;function r(ve){if(!n)return ve[0];for(var W=0;W<ve.length;W++)if(ve[W]in n)return ve[W];return ve[0]}var u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;a.disableDrag=function(){n&&u&&(s=n[u],n[u]="none")},a.enableDrag=function(){n&&u&&(n[u]=s)};var i=r(["transform","WebkitTransform"]);a.setTransform=function(ve,W){ve.style[i]=W};var f=!1;try{var h=Object.defineProperty({},"passive",{get:function(){f=!0}});e.window.addEventListener("test",h,h),e.window.removeEventListener("test",h,h)}catch{f=!1}a.addEventListener=function(ve,W,de,J){J===void 0&&(J={}),"passive"in J&&f?ve.addEventListener(W,de,J):ve.addEventListener(W,de,J.capture)},a.removeEventListener=function(ve,W,de,J){J===void 0&&(J={}),"passive"in J&&f?ve.removeEventListener(W,de,J):ve.removeEventListener(W,de,J.capture)};var p=function(ve){ve.preventDefault(),ve.stopPropagation(),e.window.removeEventListener("click",p,!0)};a.suppressClick=function(){e.window.addEventListener("click",p,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",p,!0)},0)},a.mousePos=function(ve,W){var de=ve.getBoundingClientRect();return new e.Point(W.clientX-de.left-ve.clientLeft,W.clientY-de.top-ve.clientTop)},a.touchPos=function(ve,W){for(var de=ve.getBoundingClientRect(),J=[],ge=0;ge<W.length;ge++)J.push(new e.Point(W[ge].clientX-de.left-ve.clientLeft,W[ge].clientY-de.top-ve.clientTop));return J},a.mouseButton=function(ve){return typeof e.window.InstallTrigger!="undefined"&&ve.button===2&&ve.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},a.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function v(ve,W,de){var J,ge,Ee,Pe=e.browser.devicePixelRatio>1?"@2x":"",Ze=e.getJSON(W.transformRequest(W.normalizeSpriteURL(ve,Pe,".json"),e.ResourceType.SpriteJSON),function(Vt,$t){Ze=null,Ee||(Ee=Vt,J=$t,At())}),ft=e.getImage(W.transformRequest(W.normalizeSpriteURL(ve,Pe,".png"),e.ResourceType.SpriteImage),function(Vt,$t){ft=null,Ee||(Ee=Vt,ge=$t,At())});function At(){if(Ee)de(Ee);else if(J&&ge){var Vt=e.browser.getImageData(ge),$t={};for(var ir in J){var Sr=J[ir],Br=Sr.width,Vr=Sr.height,Nr=Sr.x,Kr=Sr.y,hn=Sr.sdf,Sn=Sr.pixelRatio,On=Sr.stretchX,Jn=Sr.stretchY,ea=Sr.content,$n=new e.RGBAImage({width:Br,height:Vr});e.RGBAImage.copy(Vt,$n,{x:Nr,y:Kr},{x:0,y:0},{width:Br,height:Vr}),$t[ir]={data:$n,pixelRatio:Sn,sdf:hn,stretchX:On,stretchY:Jn,content:ea}}de(null,$t)}}return{cancel:function(){Ze&&(Ze.cancel(),Ze=null),ft&&(ft.cancel(),ft=null)}}}function y(ve){var W=ve.userImage;if(W&&W.render){var de=W.render();if(de)return ve.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var g=1,A=function(ve){function W(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var ge=0,Ee=this.requestors;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe.ids,ft=Pe.callback;this._notify(Ze,ft)}this.requestors=[]}},W.prototype.getImage=function(J){return this.images[J]},W.prototype.addImage=function(J,ge){this._validate(J,ge)&&(this.images[J]=ge)},W.prototype._validate=function(J,ge){var Ee=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),Ee=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),Ee=!1),this._validateContent(ge.content,ge)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),Ee=!1),Ee},W.prototype._validateStretch=function(J,ge){if(!J)return!0;for(var Ee=0,Pe=0,Ze=J;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];if(ft[0]<Ee||ft[1]<ft[0]||ge<ft[1])return!1;Ee=ft[1]}return!0},W.prototype._validateContent=function(J,ge){return J?!(J.length!==4||J[0]<0||ge.data.width<J[0]||J[1]<0||ge.data.height<J[1]||J[2]<0||ge.data.width<J[2]||J[3]<0||ge.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},W.prototype.updateImage=function(J,ge){var Ee=this.images[J];ge.version=Ee.version+1,this.images[J]=ge,this.updatedImages[J]=!0},W.prototype.removeImage=function(J){var ge=this.images[J];delete this.images[J],delete this.patterns[J],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(J,ge){var Ee=!0;if(!this.isLoaded())for(var Pe=0,Ze=J;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||(Ee=!1)}this.isLoaded()||Ee?this._notify(J,ge):this.requestors.push({ids:J,callback:ge})},W.prototype._notify=function(J,ge){for(var Ee={},Pe=0,Ze=J;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||this.fire(new e.Event("styleimagemissing",{id:ft}));var At=this.images[ft];At?Ee[ft]={data:At.data.clone(),pixelRatio:At.pixelRatio,sdf:At.sdf,version:At.version,stretchX:At.stretchX,stretchY:At.stretchY,content:At.content,hasRenderCallback:Boolean(At.userImage&&At.userImage.render)}:e.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ee)},W.prototype.getPixelSize=function(){var J=this.atlasImage,ge=J.width,Ee=J.height;return{width:ge,height:Ee}},W.prototype.getPattern=function(J){var ge=this.patterns[J],Ee=this.getImage(J);if(!Ee)return null;if(ge&&ge.position.version===Ee.version)return ge.position;if(ge)ge.position.version=Ee.version;else{var Pe=Ee.data.width+g*2,Ze=Ee.data.height+g*2,ft={w:Pe,h:Ze,x:0,y:0},At=new e.ImagePosition(ft,Ee);this.patterns[J]={bin:ft,position:At}}return this._updatePatternAtlas(),this.patterns[J].position},W.prototype.bind=function(J){var ge=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(J,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var J=[];for(var ge in this.patterns)J.push(this.patterns[ge].bin);var Ee=e.potpack(J),Pe=Ee.w,Ze=Ee.h,ft=this.atlasImage;ft.resize({width:Pe||1,height:Ze||1});for(var At in this.patterns){var Vt=this.patterns[At],$t=Vt.bin,ir=$t.x+g,Sr=$t.y+g,Br=this.images[At].data,Vr=Br.width,Nr=Br.height;e.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir,y:Sr},{width:Vr,height:Nr}),e.RGBAImage.copy(Br,ft,{x:0,y:Nr-1},{x:ir,y:Sr-1},{width:Vr,height:1}),e.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir,y:Sr+Nr},{width:Vr,height:1}),e.RGBAImage.copy(Br,ft,{x:Vr-1,y:0},{x:ir-1,y:Sr},{width:1,height:Nr}),e.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir+Vr,y:Sr},{width:1,height:Nr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(J){for(var ge=0,Ee=J;ge<Ee.length;ge+=1){var Pe=Ee[ge];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var Ze=this.images[Pe],ft=y(Ze);ft&&this.updateImage(Pe,Ze)}}},W}(e.Evented);function m(ve,W,de,J,ge){var Ee=W*256,Pe=Ee+255,Ze=J.transformRequest(J.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ee+"-"+Pe),e.ResourceType.Glyphs);e.getArrayBuffer(Ze,function(ft,At){if(ft)ge(ft);else if(At){for(var Vt={},$t=0,ir=e.parseGlyphPBF(At);$t<ir.length;$t+=1){var Sr=ir[$t];Vt[Sr.id]=Sr}ge(null,Vt)}})}var M=x,_=x,T=1e20;function x(ve,W,de,J,ge,Ee){this.fontSize=ve||24,this.buffer=W===void 0?3:W,this.cutoff=J||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ee||"normal",this.radius=de||8;var Pe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.d=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Int16Array(Pe),this.middle=Math.round(Pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}x.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),J=0;J<this.size*this.size;J++){var ge=W.data[J*4+3]/255;this.gridOuter[J]=ge===1?0:ge===0?T:Math.pow(Math.max(0,.5-ge),2),this.gridInner[J]=ge===1?T:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(c(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),c(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),J=0;J<this.size*this.size;J++){var Ee=this.gridOuter[J]-this.gridInner[J];de[J]=Math.max(0,Math.min(255,Math.round(255-255*(Ee/this.radius+this.cutoff))))}return de};function c(ve,W,de,J,ge,Ee,Pe){for(var Ze=0;Ze<W;Ze++){for(var ft=0;ft<de;ft++)J[ft]=ve[ft*W+Ze];for(L(J,ge,Ee,Pe,de),ft=0;ft<de;ft++)ve[ft*W+Ze]=ge[ft]}for(ft=0;ft<de;ft++){for(Ze=0;Ze<W;Ze++)J[Ze]=ve[ft*W+Ze];for(L(J,ge,Ee,Pe,W),Ze=0;Ze<W;Ze++)ve[ft*W+Ze]=Math.sqrt(ge[Ze])}}function L(ve,W,de,J,ge){de[0]=0,J[0]=-T,J[1]=+T;for(var Ee=1,Pe=0;Ee<ge;Ee++){for(var Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Ze<=J[Pe];)Pe--,Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Pe++,de[Pe]=Ee,J[Pe]=Ze,J[Pe+1]=+T}for(Ee=0,Pe=0;Ee<ge;Ee++){for(;J[Pe+1]<Ee;)Pe++;W[Ee]=(Ee-de[Pe])*(Ee-de[Pe])+ve[de[Pe]]}}M.default=_;var S=function(W,de){this.requestManager=W,this.localIdeographFontFamily=de,this.entries={}};S.prototype.setURL=function(W){this.url=W},S.prototype.getGlyphs=function(W,de){var J=this,ge=[];for(var Ee in W)for(var Pe=0,Ze=W[Ee];Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ge.push({stack:Ee,id:ft})}e.asyncAll(ge,function(At,Vt){var $t=At.stack,ir=At.id,Sr=J.entries[$t];Sr||(Sr=J.entries[$t]={glyphs:{},requests:{},ranges:{}});var Br=Sr.glyphs[ir];if(Br!==void 0){Vt(null,{stack:$t,id:ir,glyph:Br});return}if(Br=J._tinySDF(Sr,$t,ir),Br){Sr.glyphs[ir]=Br,Vt(null,{stack:$t,id:ir,glyph:Br});return}var Vr=Math.floor(ir/256);if(Vr*256>65535){Vt(new Error("glyphs > 65535 not supported"));return}if(Sr.ranges[Vr]){Vt(null,{stack:$t,id:ir,glyph:Br});return}var Nr=Sr.requests[Vr];Nr||(Nr=Sr.requests[Vr]=[],S.loadGlyphRange($t,Vr,J.url,J.requestManager,function(Kr,hn){if(hn){for(var Sn in hn)J._doesCharSupportLocalGlyph(+Sn)||(Sr.glyphs[+Sn]=hn[+Sn]);Sr.ranges[Vr]=!0}for(var On=0,Jn=Nr;On<Jn.length;On+=1){var ea=Jn[On];ea(Kr,hn)}delete Sr.requests[Vr]})),Nr.push(function(Kr,hn){Kr?Vt(Kr):hn&&Vt(null,{stack:$t,id:ir,glyph:hn[ir]||null})})},function(At,Vt){if(At)de(At);else if(Vt){for(var $t={},ir=0,Sr=Vt;ir<Sr.length;ir+=1){var Br=Sr[ir],Vr=Br.stack,Nr=Br.id,Kr=Br.glyph;($t[Vr]||($t[Vr]={}))[Nr]=Kr&&{id:Kr.id,bitmap:Kr.bitmap.clone(),metrics:Kr.metrics}}de(null,$t)}})},S.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},S.prototype._tinySDF=function(W,de,J){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph(J)){var Ee=W.tinySDF;if(!Ee){var Pe="400";/bold/i.test(de)?Pe="900":/medium/i.test(de)?Pe="500":/light/i.test(de)&&(Pe="200"),Ee=W.tinySDF=new S.TinySDF(24,3,8,.25,ge,Pe)}return{id:J,bitmap:new e.AlphaImage({width:30,height:30},Ee.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=m,S.TinySDF=M;var k=function(){this.specification=e.styleSpec.light.position};k.prototype.possiblyEvaluate=function(W,de){return e.sphericalToCartesian(W.expression.evaluate(de))},k.prototype.interpolate=function(W,de,J){return{x:e.number(W.x,de.x,J),y:e.number(W.y,de.y,J),z:e.number(W.z,de.z,J)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new k,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),z="-transition",I=function(ve){function W(de){ve.call(this),this._transitionable=new e.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(J,ge){if(ge===void 0&&(ge={}),!this._validate(e.validateLight,J,ge))for(var Ee in J){var Pe=J[Ee];e.endsWith(Ee,z)?this._transitionable.setTransition(Ee.slice(0,-z.length),Pe):this._transitionable.setValue(Ee,Pe)}},W.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},W.prototype._validate=function(J,ge,Ee){return Ee&&Ee.validate===!1?!1:e.emitValidationErrors(this,J.call(e.validateStyle,e.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),R=function(W,de){this.width=W,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(W,de){var J=W.join(",")+String(de);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(W,de)),this.dashEntry[J]},R.prototype.getDashRanges=function(W,de,J){var ge=W.length%2==1,Ee=[],Pe=ge?-W[W.length-1]*J:0,Ze=W[0]*J,ft=!0;Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:W[0]===0});for(var At=W[0],Vt=1;Vt<W.length;Vt++){ft=!ft;var $t=W[Vt];Pe=At*J,At+=$t,Ze=At*J,Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:$t===0})}return Ee},R.prototype.addRoundDash=function(W,de,J){for(var ge=de/2,Ee=-J;Ee<=J;Ee++)for(var Pe=this.nextRow+J+Ee,Ze=this.width*Pe,ft=0,At=W[ft],Vt=0;Vt<this.width;Vt++){Vt/At.right>1&&(At=W[++ft]);var $t=Math.abs(Vt-At.left),ir=Math.abs(Vt-At.right),Sr=Math.min($t,ir),Br=void 0,Vr=Ee/J*(ge+1);if(At.isDash){var Nr=ge-Math.abs(Vr);Br=Math.sqrt(Sr*Sr+Nr*Nr)}else Br=ge-Math.sqrt(Sr*Sr+Vr*Vr);this.data[Ze+Vt]=Math.max(0,Math.min(255,Br+128))}},R.prototype.addRegularDash=function(W){for(var de=W.length-1;de>=0;--de){var J=W[de],ge=W[de+1];J.zeroLength?W.splice(de,1):ge&&ge.isDash===J.isDash&&(ge.left=J.left,W.splice(de,1))}var Ee=W[0],Pe=W[W.length-1];Ee.isDash===Pe.isDash&&(Ee.left=Pe.left-this.width,Pe.right=Ee.right+this.width);for(var Ze=this.width*this.nextRow,ft=0,At=W[ft],Vt=0;Vt<this.width;Vt++){Vt/At.right>1&&(At=W[++ft]);var $t=Math.abs(Vt-At.left),ir=Math.abs(Vt-At.right),Sr=Math.min($t,ir),Br=At.isDash?Sr:-Sr;this.data[Ze+Vt]=Math.max(0,Math.min(255,Br+128))}},R.prototype.addDash=function(W,de){var J=de?7:0,ge=2*J+1;if(this.nextRow+ge>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ee=0,Pe=0;Pe<W.length;Pe++)Ee+=W[Pe];if(Ee!==0){var Ze=this.width/Ee,ft=this.getDashRanges(W,this.width,Ze);de?this.addRoundDash(ft,Ze,J):this.addRegularDash(ft)}var At={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:Ee};return this.nextRow+=ge,this.dirty=!0,At},R.prototype.bind=function(W){var de=W.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var D=function ve(W,de){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var J=this.workerPool.acquire(this.id),ge=0;ge<J.length;ge++){var Ee=J[ge],Pe=new ve.Actor(Ee,de,this.id);Pe.name="Worker "+ge,this.actors.push(Pe)}};D.prototype.broadcast=function(W,de,J){J=J||function(){},e.asyncAll(this.actors,function(ge,Ee){ge.send(W,de,Ee)},J)},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=e.Actor;function O(ve,W,de){var J=function(ge,Ee){if(ge)return de(ge);if(Ee){var Pe=e.pick(e.extend(Ee,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ee.vector_layers&&(Pe.vectorLayers=Ee.vector_layers,Pe.vectorLayerIds=Pe.vectorLayers.map(function(Ze){return Ze.id})),Pe.tiles=W.canonicalizeTileset(Pe,ve.url),de(null,Pe)}};return ve.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(ve.url),e.ResourceType.Source),J):e.browser.frame(function(){return J(null,ve)})}var F=function(W,de,J){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=de||0,this.maxzoom=J||24};F.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},F.prototype.contains=function(W){var de=Math.pow(2,W.z),J={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*de)},ge=W.x>=J.minX&&W.x<J.maxX&&W.y>=J.minY&&W.y<J.maxY;return ge};var Y=function(ve){function W(de,J,ge,Ee){if(ve.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(J,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},J),this._collectResourceTiming=J.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ee)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ee){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ee&&(e.extend(J,Ee),Ee.bounds&&(J.tileBounds=new F(Ee.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ee.tiles,J.map._requestManager._customAccessToken),e.postMapLoadEvent(Ee.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function(J,ge){var Ee=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Pe.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Pe,Ze.bind(this))):J.state==="loading"?J.reloadCallback=ge:J.request=J.actor.send("reloadTile",Pe,Ze.bind(this));function Ze(ft,At){if(delete J.request,J.aborted)return ge(null);if(ft&&ft.status!==404)return ge(ft);At&&At.resourceTiming&&(J.resourceTiming=At.resourceTiming),this.map._refreshExpiredTiles&&At&&J.setExpiryData(At),J.loadVectorData(At,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ge(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),X=function(ve){function W(de,J,ge,Ee){ve.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},J),e.extend(this,e.pick(J,["url","scheme","tileSize"]))}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ee){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ee&&(e.extend(J,Ee),Ee.bounds&&(J.tileBounds=new F(Ee.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ee.tiles),e.postMapLoadEvent(Ee.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.loadTile=function(J,ge){var Ee=this,Pe=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Pe,e.ResourceType.Tile),function(Ze,ft){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if(Ze)J.state="errored",ge(Ze);else if(ft){Ee.map._refreshExpiredTiles&&J.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var At=Ee.map.painter.context,Vt=At.gl;J.texture=Ee.map.painter.getTileTexture(ft.width),J.texture?J.texture.update(ft,{useMipmap:!0}):(J.texture=new e.Texture(At,ft,Vt.RGBA,{useMipmap:!0}),J.texture.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE,Vt.LINEAR_MIPMAP_NEAREST),At.extTextureFilterAnisotropic&&Vt.texParameterf(Vt.TEXTURE_2D,At.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,At.extTextureFilterAnisotropicMax)),J.state="loaded",e.cacheEntryPossiblyAdded(Ee.dispatcher),ge(null)}})},W.prototype.abortTile=function(J,ge){J.request&&(J.request.cancel(),delete J.request),ge()},W.prototype.unloadTile=function(J,ge){J.texture&&this.map.painter.saveTileTexture(J.texture),ge()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),q=function(ve){function W(de,J,ge,Ee){ve.call(this,de,J,ge,Ee),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},J),this.encoding=J.encoding||"mapbox"}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(J,ge){var Ee=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),Pe.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Pe(ft,At){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if(ft)J.state="errored",ge(ft);else if(At){this.map._refreshExpiredTiles&&J.setExpiryData(At),delete At.cacheControl,delete At.expires;var Vt=e.window.ImageBitmap&&At instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),$t=Vt?At:e.browser.getImageData(At,1),ir={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:$t,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",ir,Ze.bind(this)))}}function Ze(ft,At){ft&&(J.state="errored",ge(ft)),At&&(J.dem=At,J.needsHillshadePrepare=!0,J.state="loaded",ge(null))}},W.prototype._getNeighboringTiles=function(J){var ge=J.canonical,Ee=Math.pow(2,ge.z),Pe=(ge.x-1+Ee)%Ee,Ze=ge.x===0?J.wrap-1:J.wrap,ft=(ge.x+1+Ee)%Ee,At=ge.x+1===Ee?J.wrap+1:J.wrap,Vt={};return Vt[new e.OverscaledTileID(J.overscaledZ,Ze,ge.z,Pe,ge.y).key]={backfilled:!1},Vt[new e.OverscaledTileID(J.overscaledZ,At,ge.z,ft,ge.y).key]={backfilled:!1},ge.y>0&&(Vt[new e.OverscaledTileID(J.overscaledZ,Ze,ge.z,Pe,ge.y-1).key]={backfilled:!1},Vt[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},Vt[new e.OverscaledTileID(J.overscaledZ,At,ge.z,ft,ge.y-1).key]={backfilled:!1}),ge.y+1<Ee&&(Vt[new e.OverscaledTileID(J.overscaledZ,Ze,ge.z,Pe,ge.y+1).key]={backfilled:!1},Vt[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},Vt[new e.OverscaledTileID(J.overscaledZ,At,ge.z,ft,ge.y+1).key]={backfilled:!1}),Vt},W.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},W}(X),$=function(ve){function W(de,J,ge,Ee){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ee),this._data=J.data,this._options=e.extend({},J),this._collectResourceTiming=J.collectResourceTiming,this._resourceTiming=[],J.maxzoom!==void 0&&(this.maxzoom=J.maxzoom),J.type&&(this.type=J.type),J.attribution&&(this.attribution=J.attribution),this.promoteId=J.promoteId;var Pe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:J.cluster||!1,geojsonVtOptions:{buffer:(J.buffer!==void 0?J.buffer:128)*Pe,tolerance:(J.tolerance!==void 0?J.tolerance:.375)*Pe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:J.lineMetrics||!1,generateId:J.generateId||!1},superclusterOptions:{maxZoom:J.clusterMaxZoom!==void 0?Math.min(J.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(J.clusterRadius||50)*Pe,log:!1,generateId:J.generateId||!1},clusterProperties:J.clusterProperties},J.workerOptions)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){J.fire(new e.ErrorEvent(ge));return}var Ee={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(Ee.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new e.Event("data",Ee))})},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setData=function(J){var ge=this;return this._data=J,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ee){if(Ee){ge.fire(new e.ErrorEvent(Ee));return}var Pe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Pe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new e.Event("data",Pe))}),this},W.prototype.getClusterExpansionZoom=function(J,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterChildren=function(J,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterLeaves=function(J,ge,Ee,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:ge,offset:Ee},Pe),this},W.prototype._updateWorkerData=function(J){var ge=this;this._loaded=!1;var Ee=e.extend({},this.workerOptions),Pe=this._data;typeof Pe=="string"?(Ee.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Pe),e.ResourceType.Source),Ee.request.collectResourceTiming=this._collectResourceTiming):Ee.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",Ee,function(Ze,ft){ge._removed||ft&&ft.abandoned||(ge._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ge.id]&&(ge._resourceTiming=ft.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ee.source},null),J(Ze))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(J,ge){var Ee=this,Pe=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var Ze={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Pe,Ze,function(ft,At){return delete J.request,J.unloadVectorData(),J.aborted?ge(null):ft?ge(ft):(J.loadVectorData(At,Ee.map.painter,Pe==="reloadTile"),ge(null))})},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},W.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),V=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),K=function(ve){function W(de,J,ge,Ee){ve.call(this),this.id=de,this.dispatcher=ge,this.coordinates=J.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ee),this.options=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(J,ge){var Ee=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Pe,Ze){Ee._loaded=!0,Pe?Ee.fire(new e.ErrorEvent(Pe)):Ze&&(Ee.image=Ze,J&&(Ee.coordinates=J),ge&&ge(),Ee._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(J){var ge=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){ge.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setCoordinates=function(J){var ge=this;this.coordinates=J;var Ee=J.map(e.MercatorCoordinate.fromLngLat);this.tileID=se(Ee),this.minzoom=this.maxzoom=this.tileID.z;var Pe=Ee.map(function(Ze){return ge.tileID.getTilePoint(Ze)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(J,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},W.prototype.loadTile=function(J,ge){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},ge(null)):(J.state="errored",ge(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function se(ve){for(var W=1/0,de=1/0,J=-1/0,ge=-1/0,Ee=0,Pe=ve;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];W=Math.min(W,Ze.x),de=Math.min(de,Ze.y),J=Math.max(J,Ze.x),ge=Math.max(ge,Ze.y)}var ft=J-W,At=ge-de,Vt=Math.max(ft,At),$t=Math.max(0,Math.floor(-Math.log(Vt)/Math.LN2)),ir=Math.pow(2,$t);return new e.CanonicalTileID($t,Math.floor((W+J)/2*ir),Math.floor((de+ge)/2*ir))}var ue=function(ve){function W(de,J,ge,Ee){ve.call(this,de,J,ge,Ee),this.roundZoom=!0,this.type="video",this.options=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ee=0,Pe=ge.urls;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];this.urls.push(this.map._requestManager.transformRequest(Ze,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ft,At){J._loaded=!0,ft?J.fire(new e.ErrorEvent(ft)):At&&(J.video=At,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(J){if(this.video){var ge=this.video.seekable;J<ge.start(0)||J>ge.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=J}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(J,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(K),oe=function(ve){function W(de,J,ge,Ee){ve.call(this,de,J,ge,Ee),J.coordinates?(!Array.isArray(J.coordinates)||J.coordinates.length!==4||J.coordinates.some(function(Pe){return!Array.isArray(Pe)||Pe.length!==2||Pe.some(function(Ze){return typeof Ze!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "coordinates"'))),J.animate&&typeof J.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),J.canvas?typeof J.canvas!="string"&&!(J.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=J,this.animate=J.animate!==void 0?J.animate:!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ee=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,V.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ge,this.canvas,Ee.RGBA,{premultiply:!0});for(var Pe in this.tiles){var Ze=this.tiles[Pe];Ze.state!=="loaded"&&(Ze.state="loaded",Ze.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var J=0,ge=[this.canvas.width,this.canvas.height];J<ge.length;J+=1){var Ee=ge[J];if(isNaN(Ee)||Ee<=0)return!0}return!1},W}(K),U={vector:Y,raster:X,"raster-dem":q,geojson:$,video:ue,image:K,canvas:oe},G=function(ve,W,de,J){var ge=new U[W.type](ve,W,de,J);if(ge.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ge.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},re=function(ve){return U[ve]},ee=function(ve,W){U[ve]=W};function j(ve,W){var de=e.identity([]);return e.translate(de,de,[1,1,0]),e.scale(de,de,[ve.width*.5,ve.height*.5,1]),e.multiply(de,de,ve.calculatePosMatrix(W.toUnwrapped()))}function Q(ve,W,de){if(ve)for(var J=0,ge=ve;J<ge.length;J+=1){var Ee=ge[J],Pe=W[Ee];if(Pe&&Pe.source===de&&Pe.type==="fill-extrusion")return!0}else for(var Ze in W){var ft=W[Ze];if(ft.source===de&&ft.type==="fill-extrusion")return!0}return!1}function ne(ve,W,de,J,ge,Ee){var Pe=Q(ge&&ge.layers,W,ve.id),Ze=Ee.maxPitchScaleFactor(),ft=ve.tilesIn(J,Ze,Pe);ft.sort(fe);for(var At=[],Vt=0,$t=ft;Vt<$t.length;Vt+=1){var ir=$t[Vt];At.push({wrappedTileID:ir.tileID.wrapped().key,queryResults:ir.tile.queryRenderedFeatures(W,de,ve._state,ir.queryGeometry,ir.cameraQueryGeometry,ir.scale,ge,Ee,Ze,j(ve.transform,ir.tileID))})}var Sr=me(At);for(var Br in Sr)Sr[Br].forEach(function(Vr){var Nr=Vr.feature,Kr=ve.getFeatureState(Nr.layer["source-layer"],Nr.id);Nr.source=Nr.layer.source,Nr.layer["source-layer"]&&(Nr.sourceLayer=Nr.layer["source-layer"]),Nr.state=Kr});return Sr}function ae(ve,W,de,J,ge,Ee,Pe){for(var Ze={},ft=Ee.queryRenderedSymbols(J),At=[],Vt=0,$t=Object.keys(ft).map(Number);Vt<$t.length;Vt+=1){var ir=$t[Vt];At.push(Pe[ir])}At.sort(fe);for(var Sr=function(){var hn=Vr[Br],Sn=hn.featureIndex.lookupSymbolFeatures(ft[hn.bucketInstanceId],W,hn.bucketIndex,hn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,ve);for(var On in Sn){var Jn=Ze[On]=Ze[On]||[],ea=Sn[On];ea.sort(function(xa,Ma){var Pa=hn.featureSortOrder;if(Pa){var Ha=Pa.indexOf(xa.featureIndex),ni=Pa.indexOf(Ma.featureIndex);return ni-Ha}else return Ma.featureIndex-xa.featureIndex});for(var $n=0,va=ea;$n<va.length;$n+=1){var _a=va[$n];Jn.push(_a)}}},Br=0,Vr=At;Br<Vr.length;Br+=1)Sr();var Nr=function(hn){Ze[hn].forEach(function(Sn){var On=Sn.feature,Jn=ve[hn],ea=de[Jn.source],$n=ea.getFeatureState(On.layer["source-layer"],On.id);On.source=On.layer.source,On.layer["source-layer"]&&(On.sourceLayer=On.layer["source-layer"]),On.state=$n})};for(var Kr in Ze)Nr(Kr);return Ze}function ie(ve,W){for(var de=ve.getRenderableIds().map(function(ft){return ve.getTileByID(ft)}),J=[],ge={},Ee=0;Ee<de.length;Ee++){var Pe=de[Ee],Ze=Pe.tileID.canonical.key;ge[Ze]||(ge[Ze]=!0,Pe.querySourceFeatures(J,W))}return J}function fe(ve,W){var de=ve.tileID,J=W.tileID;return de.overscaledZ-J.overscaledZ||de.canonical.y-J.canonical.y||de.wrap-J.wrap||de.canonical.x-J.canonical.x}function me(ve){for(var W={},de={},J=0,ge=ve;J<ge.length;J+=1){var Ee=ge[J],Pe=Ee.queryResults,Ze=Ee.wrappedTileID,ft=de[Ze]=de[Ze]||{};for(var At in Pe)for(var Vt=Pe[At],$t=ft[At]=ft[At]||{},ir=W[At]=W[At]||[],Sr=0,Br=Vt;Sr<Br.length;Sr+=1){var Vr=Br[Sr];$t[Vr.featureIndex]||($t[Vr.featureIndex]=!0,ir.push(Vr))}}return W}var ce=function(W,de){this.max=W,this.onRemove=de,this.reset()};ce.prototype.reset=function(){for(var W in this.data)for(var de=0,J=this.data[W];de<J.length;de+=1){var ge=J[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},ce.prototype.add=function(W,de,J){var ge=this,Ee=W.wrapped().key;this.data[Ee]===void 0&&(this.data[Ee]=[]);var Pe={value:de,timeout:void 0};if(J!==void 0&&(Pe.timeout=setTimeout(function(){ge.remove(W,Pe)},J)),this.data[Ee].push(Pe),this.order.push(Ee),this.order.length>this.max){var Ze=this._getAndRemoveByKey(this.order[0]);Ze&&this.onRemove(Ze)}return this},ce.prototype.has=function(W){return W.wrapped().key in this.data},ce.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(W){var de=this.data[W].shift();return de.timeout&&clearTimeout(de.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),de.value},ce.prototype.getByKey=function(W){var de=this.data[W];return de?de[0].value:null},ce.prototype.get=function(W){if(!this.has(W))return null;var de=this.data[W.wrapped().key][0];return de.value},ce.prototype.remove=function(W,de){if(!this.has(W))return this;var J=W.wrapped().key,ge=de===void 0?0:this.data[J].indexOf(de),Ee=this.data[J][ge];return this.data[J].splice(ge,1),Ee.timeout&&clearTimeout(Ee.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(Ee.value),this.order.splice(this.order.indexOf(J),1),this},ce.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},ce.prototype.filter=function(W){var de=[];for(var J in this.data)for(var ge=0,Ee=this.data[J];ge<Ee.length;ge+=1){var Pe=Ee[ge];W(Pe.value)||de.push(Pe)}for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var At=ft[Ze];this.remove(At.value.tileID,At)}};var ye=function(W,de,J){this.context=W;var ge=W.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean(J),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ye.prototype.updateData=function(W){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},ye.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ke=function(W,de,J,ge){this.length=de.length,this.attributes=J,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=W;var Ee=W.gl;this.buffer=Ee.createBuffer(),W.bindVertexBuffer.set(this.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ee.DYNAMIC_DRAW:Ee.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ke.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ke.prototype.updateData=function(W){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,W.arrayBuffer)},ke.prototype.enableAttributes=function(W,de){for(var J=0;J<this.attributes.length;J++){var ge=this.attributes[J],Ee=de.attributes[ge.name];Ee!==void 0&&W.enableVertexAttribArray(Ee)}},ke.prototype.setVertexAttribPointers=function(W,de,J){for(var ge=0;ge<this.attributes.length;ge++){var Ee=this.attributes[ge],Pe=de.attributes[Ee.name];Pe!==void 0&&W.vertexAttribPointer(Pe,Ee.components,W[xe[Ee.type]],!1,this.itemSize,Ee.offset+this.itemSize*(J||0))}},ke.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var Ae=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(W){},Ae.prototype.getDefault=function(){return this.default},Ae.prototype.setDefault=function(){this.set(this.default)};var Oe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(Ae),He=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},W}(Ae),Ge=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},W}(Ae),_e=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(Ae),Ie=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},W}(Ae),Ye=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},W}(Ae),qe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(J){var ge=this.current;J.func===ge.func&&J.ref===ge.ref&&J.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},W}(Ae),Ue=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},W}(Ae),Re=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=J,this.dirty=!1}},W}(Ae),Ve=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},W}(Ae),dt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=J,this.dirty=!1}},W}(Ae),Dt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},W}(Ae),Gt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=J,this.dirty=!1}},W}(Ae),kt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},W}(Ae),zt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(Ae),Bt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},W}(Ae),Lt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=J,this.dirty=!1}},W}(Ae),Mt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},W}(Ae),it=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},W}(Ae),ht=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},W}(Ae),Qe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},W}(Ae),Ce=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(Ae),je=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},W}(Ae),rt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(Ae),ut=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,J),this.current=J,this.dirty=!1}},W}(Ae),Pt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},W}(Ae),St=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},W}(Ae),Nt=function(ve){function W(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},W}(Ae),Xt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},W}(Ae),Ot=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},W}(Ae),Kt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},W}(Ae),Je=function(ve){function W(de,J){ve.call(this,de),this.context=de,this.parent=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(Ae),gt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},W}(Je),Et=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(Je),rr=function(W,de,J,ge){this.context=W,this.width=de,this.height=J;var Ee=W.gl,Pe=this.framebuffer=Ee.createFramebuffer();this.colorAttachment=new gt(W,Pe),ge&&(this.depthAttachment=new Et(W,Pe))};rr.prototype.destroy=function(){var W=this.context.gl,de=this.colorAttachment.get();if(de&&W.deleteTexture(de),this.depthAttachment){var J=this.depthAttachment.get();J&&W.deleteRenderbuffer(J)}W.deleteFramebuffer(this.framebuffer)};var vr=519,or=function(W,de,J){this.func=W,this.mask=de,this.range=J};or.ReadOnly=!1,or.ReadWrite=!0,or.disabled=new or(vr,or.ReadOnly,[0,1]);var dr=519,Lr=7680,kr=function(W,de,J,ge,Ee,Pe){this.test=W,this.ref=de,this.mask=J,this.fail=ge,this.depthFail=Ee,this.pass=Pe};kr.disabled=new kr({func:dr,mask:0},0,0,Lr,Lr,Lr);var tr=0,Or=1,et=771,we=function(W,de,J){this.blendFunction=W,this.blendColor=de,this.mask=J};we.Replace=[Or,tr],we.disabled=new we(we.Replace,e.Color.transparent,[!1,!1,!1,!1]),we.unblended=new we(we.Replace,e.Color.transparent,[!0,!0,!0,!0]),we.alphaBlended=new we([Or,et],e.Color.transparent,[!0,!0,!0,!0]);var Se=1029,De=2305,Xe=function(W,de,J){this.enable=W,this.mode=de,this.frontFace=J};Xe.disabled=new Xe(!1,Se,De),Xe.backCCW=new Xe(!0,Se,De);var $e=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oe(this),this.clearDepth=new He(this),this.clearStencil=new Ge(this),this.colorMask=new _e(this),this.depthMask=new Ie(this),this.stencilMask=new Ye(this),this.stencilFunc=new qe(this),this.stencilOp=new Ue(this),this.stencilTest=new Re(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Dt(this),this.blend=new Gt(this),this.blendFunc=new kt(this),this.blendColor=new zt(this),this.blendEquation=new Bt(this),this.cullFace=new Lt(this),this.cullFaceSide=new Mt(this),this.frontFace=new it(this),this.program=new ht(this),this.activeTexture=new Qe(this),this.viewport=new Ce(this),this.bindFramebuffer=new je(this),this.bindRenderbuffer=new rt(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new St(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Nt(this),this.pixelStoreUnpack=new Xt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ot(this),this.pixelStoreUnpackFlipY=new Kt(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};$e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$e.prototype.createIndexBuffer=function(W,de){return new ye(this,W,de)},$e.prototype.createVertexBuffer=function(W,de,J){return new ke(this,W,de,J)},$e.prototype.createRenderbuffer=function(W,de,J){var ge=this.gl,Ee=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ee),ge.renderbufferStorage(ge.RENDERBUFFER,W,de,J),this.bindRenderbuffer.set(null),Ee},$e.prototype.createFramebuffer=function(W,de,J){return new rr(this,W,de,J)},$e.prototype.clear=function(W){var de=W.color,J=W.depth,ge=this.gl,Ee=0;de&&(Ee|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof J!="undefined"&&(Ee|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),ge.clear(Ee)},$e.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},$e.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},$e.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},$e.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,we.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},$e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(ve){function W(de,J,ge){var Ee=this;ve.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Pe){Pe.dataType==="source"&&Pe.sourceDataType==="metadata"&&(Ee._sourceLoaded=!0),Ee._sourceLoaded&&!Ee._paused&&Pe.dataType==="source"&&Pe.sourceDataType==="content"&&(Ee.reload(),Ee.transform&&Ee.update(Ee.transform))}),this.on("error",function(){Ee._sourceErrored=!0}),this._source=G(de,J,ge,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},W.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var ge=this._tiles[J];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(J,ge){return this._source.loadTile(J,ge)},W.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},W.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ee=this._tiles[ge];Ee.upload(J),Ee.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function(J){return J.tileID}).sort(st).map(function(J){return J.key})},W.prototype.getRenderableIds=function(J){var ge=this,Ee=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,J)&&Ee.push(this._tiles[Pe]);return J?Ee.sort(function(Ze,ft){var At=Ze.tileID,Vt=ft.tileID,$t=new e.Point(At.canonical.x,At.canonical.y)._rotate(ge.transform.angle),ir=new e.Point(Vt.canonical.x,Vt.canonical.y)._rotate(ge.transform.angle);return At.overscaledZ-Vt.overscaledZ||ir.y-$t.y||ir.x-$t.x}).map(function(Ze){return Ze.tileID.key}):Ee.map(function(Ze){return Ze.tileID}).sort(st).map(function(Ze){return Ze.key})},W.prototype.hasRenderableParent=function(J){var ge=this.findLoadedParent(J,0);return ge?this._isIdRenderable(ge.tileID.key):!1},W.prototype._isIdRenderable=function(J,ge){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(ge||!this._tiles[J].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},W.prototype._reloadTile=function(J,ge){var Ee=this._tiles[J];!Ee||(Ee.state!=="loading"&&(Ee.state=ge),this._loadTile(Ee,this._tileLoaded.bind(this,Ee,J,ge)))},W.prototype._tileLoaded=function(J,ge,Ee,Pe){if(Pe){J.state="errored",Pe.status!==404?this._source.fire(new e.ErrorEvent(Pe,{tile:J})):this.update(this.transform);return}J.timeAdded=e.browser.now(),Ee==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},W.prototype._backfillDEM=function(J){for(var ge=this.getRenderableIds(),Ee=0;Ee<ge.length;Ee++){var Pe=ge[Ee];if(J.neighboringTiles&&J.neighboringTiles[Pe]){var Ze=this.getTileByID(Pe);ft(J,Ze),ft(Ze,J)}}function ft(At,Vt){At.needsHillshadePrepare=!0;var $t=Vt.tileID.canonical.x-At.tileID.canonical.x,ir=Vt.tileID.canonical.y-At.tileID.canonical.y,Sr=Math.pow(2,At.tileID.canonical.z),Br=Vt.tileID.key;$t===0&&ir===0||Math.abs(ir)>1||(Math.abs($t)>1&&(Math.abs($t+Sr)===1?$t+=Sr:Math.abs($t-Sr)===1&&($t-=Sr)),!(!Vt.dem||!At.dem)&&(At.dem.backfillBorder(Vt.dem,$t,ir),At.neighboringTiles&&At.neighboringTiles[Br]&&(At.neighboringTiles[Br].backfilled=!0)))}},W.prototype.getTile=function(J){return this.getTileByID(J.key)},W.prototype.getTileByID=function(J){return this._tiles[J]},W.prototype._retainLoadedChildren=function(J,ge,Ee,Pe){for(var Ze in this._tiles){var ft=this._tiles[Ze];if(!(Pe[Ze]||!ft.hasData()||ft.tileID.overscaledZ<=ge||ft.tileID.overscaledZ>Ee)){for(var At=ft.tileID;ft&&ft.tileID.overscaledZ>ge+1;){var Vt=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[Vt.key],ft&&ft.hasData()&&(At=Vt)}for(var $t=At;$t.overscaledZ>ge;)if($t=$t.scaledTo($t.overscaledZ-1),J[$t.key]){Pe[At.key]=At;break}}}},W.prototype.findLoadedParent=function(J,ge){if(J.key in this._loadedParentTiles){var Ee=this._loadedParentTiles[J.key];return Ee&&Ee.tileID.overscaledZ>=ge?Ee:null}for(var Pe=J.overscaledZ-1;Pe>=ge;Pe--){var Ze=J.scaledTo(Pe),ft=this._getLoadedTile(Ze);if(ft)return ft}},W.prototype._getLoadedTile=function(J){var ge=this._tiles[J.key];if(ge&&ge.hasData())return ge;var Ee=this._cache.getByKey(J.wrapped().key);return Ee},W.prototype.updateCacheSize=function(J){var ge=Math.ceil(J.width/this._source.tileSize)+1,Ee=Math.ceil(J.height/this._source.tileSize)+1,Pe=ge*Ee,Ze=5,ft=Math.floor(Pe*Ze),At=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(At)},W.prototype.handleWrapJump=function(J){var ge=this._prevLng===void 0?J:this._prevLng,Ee=J-ge,Pe=Ee/360,Ze=Math.round(Pe);if(this._prevLng=J,Ze){var ft={};for(var At in this._tiles){var Vt=this._tiles[At];Vt.tileID=Vt.tileID.unwrapTo(Vt.tileID.wrap+Ze),ft[Vt.tileID.key]=Vt}this._tiles=ft;for(var $t in this._timers)clearTimeout(this._timers[$t]),delete this._timers[$t];for(var ir in this._tiles){var Sr=this._tiles[ir];this._setTileReloadTimer(ir,Sr)}}},W.prototype.update=function(J){var ge=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ee;this.used?this._source.tileID?Ee=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(xa){return new e.OverscaledTileID(xa.canonical.z,xa.wrap,xa.canonical.z,xa.canonical.x,xa.canonical.y)}):(Ee=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ee=Ee.filter(function(xa){return ge._source.hasTile(xa)}))):Ee=[];var Pe=J.coveringZoomLevel(this._source),Ze=Math.max(Pe-W.maxOverzooming,this._source.minzoom),ft=Math.max(Pe+W.maxUnderzooming,this._source.minzoom),At=this._updateRetainedTiles(Ee,Pe);if(pt(this._source.type)){for(var Vt={},$t={},ir=Object.keys(At),Sr=0,Br=ir;Sr<Br.length;Sr+=1){var Vr=Br[Sr],Nr=At[Vr],Kr=this._tiles[Vr];if(!(!Kr||Kr.fadeEndTime&&Kr.fadeEndTime<=e.browser.now())){var hn=this.findLoadedParent(Nr,Ze);hn&&(this._addTile(hn.tileID),Vt[hn.tileID.key]=hn.tileID),$t[Vr]=Nr}}this._retainLoadedChildren($t,Pe,ft,At);for(var Sn in Vt)At[Sn]||(this._coveredTiles[Sn]=!0,At[Sn]=Vt[Sn])}for(var On in At)this._tiles[On].clearFadeHold();for(var Jn=e.keysDifference(this._tiles,At),ea=0,$n=Jn;ea<$n.length;ea+=1){var va=$n[ea],_a=this._tiles[va];_a.hasSymbolBuckets&&!_a.holdingForFade()?_a.setHoldDuration(this.map._fadeDuration):(!_a.hasSymbolBuckets||_a.symbolFadeFinished())&&this._removeTile(va)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},W.prototype._updateRetainedTiles=function(J,ge){for(var Ee={},Pe={},Ze=Math.max(ge-W.maxOverzooming,this._source.minzoom),ft=Math.max(ge+W.maxUnderzooming,this._source.minzoom),At={},Vt=0,$t=J;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=this._addTile(ir);Ee[ir.key]=ir,!Sr.hasData()&&ge<this._source.maxzoom&&(At[ir.key]=ir)}this._retainLoadedChildren(At,ge,ft,Ee);for(var Br=0,Vr=J;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=this._tiles[Nr.key];if(!Kr.hasData()){if(ge+1>this._source.maxzoom){var hn=Nr.children(this._source.maxzoom)[0],Sn=this.getTile(hn);if(!!Sn&&Sn.hasData()){Ee[hn.key]=hn;continue}}else{var On=Nr.children(this._source.maxzoom);if(Ee[On[0].key]&&Ee[On[1].key]&&Ee[On[2].key]&&Ee[On[3].key])continue}for(var Jn=Kr.wasRequested(),ea=Nr.overscaledZ-1;ea>=Ze;--ea){var $n=Nr.scaledTo(ea);if(Pe[$n.key]||(Pe[$n.key]=!0,Kr=this.getTile($n),!Kr&&Jn&&(Kr=this._addTile($n)),Kr&&(Ee[$n.key]=$n,Jn=Kr.wasRequested(),Kr.hasData())))break}}}return Ee},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var ge=[],Ee=void 0,Pe=this._tiles[J].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){Ee=this._loadedParentTiles[Pe.key];break}ge.push(Pe.key);var Ze=Pe.scaledTo(Pe.overscaledZ-1);if(Ee=this._getLoadedTile(Ze),Ee)break;Pe=Ze}for(var ft=0,At=ge;ft<At.length;ft+=1){var Vt=At[ft];this._loadedParentTiles[Vt]=Ee}}},W.prototype._addTile=function(J){var ge=this._tiles[J.key];if(ge)return ge;ge=this._cache.getAndRemove(J),ge&&(this._setTileReloadTimer(J.key,ge),ge.tileID=J,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,ge)));var Ee=Boolean(ge);return Ee||(ge=new e.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,J.key,ge.state))),ge?(ge.uses++,this._tiles[J.key]=ge,Ee||this._source.fire(new e.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},W.prototype._setTileReloadTimer=function(J,ge){var Ee=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Pe=ge.getExpiryTimeout();Pe&&(this._timers[J]=setTimeout(function(){Ee._reloadTile(J,"expired"),delete Ee._timers[J]},Pe))},W.prototype._removeTile=function(J){var ge=this._tiles[J];!ge||(ge.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},W.prototype.tilesIn=function(J,ge,Ee){var Pe=this,Ze=[],ft=this.transform;if(!ft)return Ze;for(var At=Ee?ft.getCameraQueryGeometry(J):J,Vt=J.map(function(ea){return ft.pointCoordinate(ea)}),$t=At.map(function(ea){return ft.pointCoordinate(ea)}),ir=this.getIds(),Sr=1/0,Br=1/0,Vr=-1/0,Nr=-1/0,Kr=0,hn=$t;Kr<hn.length;Kr+=1){var Sn=hn[Kr];Sr=Math.min(Sr,Sn.x),Br=Math.min(Br,Sn.y),Vr=Math.max(Vr,Sn.x),Nr=Math.max(Nr,Sn.y)}for(var On=function(ea){var $n=Pe._tiles[ir[ea]];if(!$n.holdingForFade()){var va=$n.tileID,_a=Math.pow(2,ft.zoom-$n.tileID.overscaledZ),xa=ge*$n.queryPadding*e.EXTENT/$n.tileSize/_a,Ma=[va.getTilePoint(new e.MercatorCoordinate(Sr,Br)),va.getTilePoint(new e.MercatorCoordinate(Vr,Nr))];if(Ma[0].x-xa<e.EXTENT&&Ma[0].y-xa<e.EXTENT&&Ma[1].x+xa>=0&&Ma[1].y+xa>=0){var Pa=Vt.map(function(ni){return va.getTilePoint(ni)}),Ha=$t.map(function(ni){return va.getTilePoint(ni)});Ze.push({tile:$n,tileID:va,queryGeometry:Pa,cameraQueryGeometry:Ha,scale:_a})}}},Jn=0;Jn<ir.length;Jn++)On(Jn);return Ze},W.prototype.getVisibleCoordinates=function(J){for(var ge=this,Ee=this.getRenderableIds(J).map(function(At){return ge._tiles[At].tileID}),Pe=0,Ze=Ee;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Ee},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(pt(this._source.type))for(var J in this._tiles){var ge=this._tiles[J];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function(J,ge,Ee){J=J||"_geojsonTileLayer",this._state.updateState(J,ge,Ee)},W.prototype.removeFeatureState=function(J,ge,Ee){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,ge,Ee)},W.prototype.getFeatureState=function(J,ge){return J=J||"_geojsonTileLayer",this._state.getState(J,ge)},W.prototype.setDependencies=function(J,ge,Ee){var Pe=this._tiles[J];Pe&&Pe.setDependencies(ge,Ee)},W.prototype.reloadTilesForDependencies=function(J,ge){for(var Ee in this._tiles){var Pe=this._tiles[Ee];Pe.hasDependency(J,ge)&&this._reloadTile(Ee,"reloading")}this._cache.filter(function(Ze){return!Ze.hasDependency(J,ge)})},W}(e.Evented);ot.maxOverzooming=10,ot.maxUnderzooming=3;function st(ve,W){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),J=Math.abs(W.wrap*2)-+(W.wrap<0);return ve.overscaledZ-W.overscaledZ||J-de||W.canonical.y-ve.canonical.y||W.canonical.x-ve.canonical.x}function pt(ve){return ve==="raster"||ve==="image"||ve==="video"}function wt(){return new e.window.Worker(Cp.workerUrl)}var Yt="mapboxgl_preloaded_worker_pool",mr=function(){this.active={}};mr.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<mr.workerCount;)this.workers.push(new wt);return this.active[W]=!0,this.workers.slice()},mr.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},mr.prototype.isPreloaded=function(){return!!this.active[Yt]},mr.prototype.numActive=function(){return Object.keys(this.active).length};var xr=Math.floor(e.browser.hardwareConcurrency/2);mr.workerCount=Math.max(Math.min(xr,6),1);var Tr;function yr(){return Tr||(Tr=new mr),Tr}function Dr(){var ve=yr();ve.acquire(Yt)}function tn(){var ve=Tr;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(Yt),Tr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function wr(ve,W){var de={};for(var J in ve)J!=="ref"&&(de[J]=ve[J]);return e.refProperties.forEach(function(ge){ge in W&&(de[ge]=W[ge])}),de}function gr(ve){ve=ve.slice();for(var W=Object.create(null),de=0;de<ve.length;de++)W[ve[de].id]=ve[de];for(var J=0;J<ve.length;J++)"ref"in ve[J]&&(ve[J]=wr(ve[J],W[ve[J].ref]));return ve}function yn(){var ve={},W=e.styleSpec.$version;for(var de in e.styleSpec.$root){var J=e.styleSpec.$root[de];if(J.required){var ge=null;de==="version"?ge=W:J.type==="array"?ge=[]:ge={},ge!=null&&(ve[de]=ge)}}return ve}var Gr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ar(ve,W,de){de.push({command:Gr.addSource,args:[ve,W[ve]]})}function nn(ve,W,de){W.push({command:Gr.removeSource,args:[ve]}),de[ve]=!0}function fn(ve,W,de,J){nn(ve,de,J),Ar(ve,W,de)}function Xr(ve,W,de){var J;for(J in ve[de])if(!!ve[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(ve[de][J],W[de][J]))return!1;for(J in W[de])if(!!W[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(ve[de][J],W[de][J]))return!1;return!0}function at(ve,W,de,J){ve=ve||{},W=W||{};var ge;for(ge in ve)!ve.hasOwnProperty(ge)||W.hasOwnProperty(ge)||nn(ge,de,J);for(ge in W)!W.hasOwnProperty(ge)||(ve.hasOwnProperty(ge)?e.deepEqual(ve[ge],W[ge])||(ve[ge].type==="geojson"&&W[ge].type==="geojson"&&Xr(ve,W,ge)?de.push({command:Gr.setGeoJSONSourceData,args:[ge,W[ge].data]}):fn(ge,W,de,J)):Ar(ge,W,de))}function Ft(ve,W,de,J,ge,Ee){ve=ve||{},W=W||{};var Pe;for(Pe in ve)!ve.hasOwnProperty(Pe)||e.deepEqual(ve[Pe],W[Pe])||de.push({command:Ee,args:[J,Pe,W[Pe],ge]});for(Pe in W)!W.hasOwnProperty(Pe)||ve.hasOwnProperty(Pe)||e.deepEqual(ve[Pe],W[Pe])||de.push({command:Ee,args:[J,Pe,W[Pe],ge]})}function er(ve){return ve.id}function hr(ve,W){return ve[W.id]=W,ve}function Yr(ve,W,de){ve=ve||[],W=W||[];var J=ve.map(er),ge=W.map(er),Ee=ve.reduce(hr,{}),Pe=W.reduce(hr,{}),Ze=J.slice(),ft=Object.create(null),At,Vt,$t,ir,Sr,Br,Vr;for(At=0,Vt=0;At<J.length;At++)$t=J[At],Pe.hasOwnProperty($t)?Vt++:(de.push({command:Gr.removeLayer,args:[$t]}),Ze.splice(Ze.indexOf($t,Vt),1));for(At=0,Vt=0;At<ge.length;At++)$t=ge[ge.length-1-At],Ze[Ze.length-1-At]!==$t&&(Ee.hasOwnProperty($t)?(de.push({command:Gr.removeLayer,args:[$t]}),Ze.splice(Ze.lastIndexOf($t,Ze.length-Vt),1)):Vt++,Br=Ze[Ze.length-At],de.push({command:Gr.addLayer,args:[Pe[$t],Br]}),Ze.splice(Ze.length-At,0,$t),ft[$t]=!0);for(At=0;At<ge.length;At++)if($t=ge[At],ir=Ee[$t],Sr=Pe[$t],!(ft[$t]||e.deepEqual(ir,Sr))){if(!e.deepEqual(ir.source,Sr.source)||!e.deepEqual(ir["source-layer"],Sr["source-layer"])||!e.deepEqual(ir.type,Sr.type)){de.push({command:Gr.removeLayer,args:[$t]}),Br=Ze[Ze.lastIndexOf($t)+1],de.push({command:Gr.addLayer,args:[Sr,Br]});continue}Ft(ir.layout,Sr.layout,de,$t,null,Gr.setLayoutProperty),Ft(ir.paint,Sr.paint,de,$t,null,Gr.setPaintProperty),e.deepEqual(ir.filter,Sr.filter)||de.push({command:Gr.setFilter,args:[$t,Sr.filter]}),(!e.deepEqual(ir.minzoom,Sr.minzoom)||!e.deepEqual(ir.maxzoom,Sr.maxzoom))&&de.push({command:Gr.setLayerZoomRange,args:[$t,Sr.minzoom,Sr.maxzoom]});for(Vr in ir)!ir.hasOwnProperty(Vr)||Vr==="layout"||Vr==="paint"||Vr==="filter"||Vr==="metadata"||Vr==="minzoom"||Vr==="maxzoom"||(Vr.indexOf("paint.")===0?Ft(ir[Vr],Sr[Vr],de,$t,Vr.slice(6),Gr.setPaintProperty):e.deepEqual(ir[Vr],Sr[Vr])||de.push({command:Gr.setLayerProperty,args:[$t,Vr,Sr[Vr]]}));for(Vr in Sr)!Sr.hasOwnProperty(Vr)||ir.hasOwnProperty(Vr)||Vr==="layout"||Vr==="paint"||Vr==="filter"||Vr==="metadata"||Vr==="minzoom"||Vr==="maxzoom"||(Vr.indexOf("paint.")===0?Ft(ir[Vr],Sr[Vr],de,$t,Vr.slice(6),Gr.setPaintProperty):e.deepEqual(ir[Vr],Sr[Vr])||de.push({command:Gr.setLayerProperty,args:[$t,Vr,Sr[Vr]]}))}}function zr(ve,W){if(!ve)return[{command:Gr.setStyle,args:[W]}];var de=[];try{if(!e.deepEqual(ve.version,W.version))return[{command:Gr.setStyle,args:[W]}];e.deepEqual(ve.center,W.center)||de.push({command:Gr.setCenter,args:[W.center]}),e.deepEqual(ve.zoom,W.zoom)||de.push({command:Gr.setZoom,args:[W.zoom]}),e.deepEqual(ve.bearing,W.bearing)||de.push({command:Gr.setBearing,args:[W.bearing]}),e.deepEqual(ve.pitch,W.pitch)||de.push({command:Gr.setPitch,args:[W.pitch]}),e.deepEqual(ve.sprite,W.sprite)||de.push({command:Gr.setSprite,args:[W.sprite]}),e.deepEqual(ve.glyphs,W.glyphs)||de.push({command:Gr.setGlyphs,args:[W.glyphs]}),e.deepEqual(ve.transition,W.transition)||de.push({command:Gr.setTransition,args:[W.transition]}),e.deepEqual(ve.light,W.light)||de.push({command:Gr.setLight,args:[W.light]});var J={},ge=[];at(ve.sources,W.sources,ge,J);var Ee=[];ve.layers&&ve.layers.forEach(function(Pe){J[Pe.source]?de.push({command:Gr.removeLayer,args:[Pe.id]}):Ee.push(Pe)}),de=de.concat(ge),Yr(Ee,W.layers,de)}catch(Pe){console.warn("Unable to compute style diff:",Pe),de=[{command:Gr.setStyle,args:[W]}]}return de}var Pr=function(W,de){this.reset(W,de)};Pr.prototype.reset=function(W,de){this.points=W||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Pr.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var de=1,J=this._distances[de],ge=W*this.paddedLength+this.padding;J<ge&&de<this._distances.length;)J=this._distances[++de];var Ee=de-1,Pe=this._distances[Ee],Ze=J-Pe,ft=Ze>0?(ge-Pe)/Ze:0;return this.points[Ee].mult(1-ft).add(this.points[de].mult(ft))};var br=function(W,de,J){var ge=this.boxCells=[],Ee=this.circleCells=[];this.xCellCount=Math.ceil(W/J),this.yCellCount=Math.ceil(de/J);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)ge.push([]),Ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=de,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};br.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},br.prototype.insert=function(W,de,J,ge,Ee){this._forEachCell(de,J,ge,Ee,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(de),this.bboxes.push(J),this.bboxes.push(ge),this.bboxes.push(Ee)},br.prototype.insertCircle=function(W,de,J,ge){this._forEachCell(de-ge,J-ge,de+ge,J+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(de),this.circles.push(J),this.circles.push(ge)},br.prototype._insertBoxCell=function(W,de,J,ge,Ee,Pe){this.boxCells[Ee].push(Pe)},br.prototype._insertCircleCell=function(W,de,J,ge,Ee,Pe){this.circleCells[Ee].push(Pe)},br.prototype._query=function(W,de,J,ge,Ee,Pe){if(J<0||W>this.width||ge<0||de>this.height)return Ee?!1:[];var Ze=[];if(W<=0&&de<=0&&this.width<=J&&this.height<=ge){if(Ee)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Ze.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var At=0;At<this.circleKeys.length;At++){var Vt=this.circles[At*3],$t=this.circles[At*3+1],ir=this.circles[At*3+2];Ze.push({key:this.circleKeys[At],x1:Vt-ir,y1:$t-ir,x2:Vt+ir,y2:$t+ir})}return Pe?Ze.filter(Pe):Ze}else{var Sr={hitTest:Ee,seenUids:{box:{},circle:{}}};return this._forEachCell(W,de,J,ge,this._queryCell,Ze,Sr,Pe),Ee?Ze.length>0:Ze}},br.prototype._queryCircle=function(W,de,J,ge,Ee){var Pe=W-J,Ze=W+J,ft=de-J,At=de+J;if(Ze<0||Pe>this.width||At<0||ft>this.height)return ge?!1:[];var Vt=[],$t={hitTest:ge,circle:{x:W,y:de,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Pe,ft,Ze,At,this._queryCellCircle,Vt,$t,Ee),ge?Vt.length>0:Vt},br.prototype.query=function(W,de,J,ge,Ee){return this._query(W,de,J,ge,!1,Ee)},br.prototype.hitTest=function(W,de,J,ge,Ee){return this._query(W,de,J,ge,!0,Ee)},br.prototype.hitTestCircle=function(W,de,J,ge){return this._queryCircle(W,de,J,!0,ge)},br.prototype._queryCell=function(W,de,J,ge,Ee,Pe,Ze,ft){var At=Ze.seenUids,Vt=this.boxCells[Ee];if(Vt!==null)for(var $t=this.bboxes,ir=0,Sr=Vt;ir<Sr.length;ir+=1){var Br=Sr[ir];if(!At.box[Br]){At.box[Br]=!0;var Vr=Br*4;if(W<=$t[Vr+2]&&de<=$t[Vr+3]&&J>=$t[Vr+0]&&ge>=$t[Vr+1]&&(!ft||ft(this.boxKeys[Br]))){if(Ze.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[Br],x1:$t[Vr],y1:$t[Vr+1],x2:$t[Vr+2],y2:$t[Vr+3]})}}}var Nr=this.circleCells[Ee];if(Nr!==null)for(var Kr=this.circles,hn=0,Sn=Nr;hn<Sn.length;hn+=1){var On=Sn[hn];if(!At.circle[On]){At.circle[On]=!0;var Jn=On*3;if(this._circleAndRectCollide(Kr[Jn],Kr[Jn+1],Kr[Jn+2],W,de,J,ge)&&(!ft||ft(this.circleKeys[On]))){if(Ze.hitTest)return Pe.push(!0),!0;var ea=Kr[Jn],$n=Kr[Jn+1],va=Kr[Jn+2];Pe.push({key:this.circleKeys[On],x1:ea-va,y1:$n-va,x2:ea+va,y2:$n+va})}}}},br.prototype._queryCellCircle=function(W,de,J,ge,Ee,Pe,Ze,ft){var At=Ze.circle,Vt=Ze.seenUids,$t=this.boxCells[Ee];if($t!==null)for(var ir=this.bboxes,Sr=0,Br=$t;Sr<Br.length;Sr+=1){var Vr=Br[Sr];if(!Vt.box[Vr]){Vt.box[Vr]=!0;var Nr=Vr*4;if(this._circleAndRectCollide(At.x,At.y,At.radius,ir[Nr+0],ir[Nr+1],ir[Nr+2],ir[Nr+3])&&(!ft||ft(this.boxKeys[Vr])))return Pe.push(!0),!0}}var Kr=this.circleCells[Ee];if(Kr!==null)for(var hn=this.circles,Sn=0,On=Kr;Sn<On.length;Sn+=1){var Jn=On[Sn];if(!Vt.circle[Jn]){Vt.circle[Jn]=!0;var ea=Jn*3;if(this._circlesCollide(hn[ea],hn[ea+1],hn[ea+2],At.x,At.y,At.radius)&&(!ft||ft(this.circleKeys[Jn])))return Pe.push(!0),!0}}},br.prototype._forEachCell=function(W,de,J,ge,Ee,Pe,Ze,ft){for(var At=this._convertToXCellCoord(W),Vt=this._convertToYCellCoord(de),$t=this._convertToXCellCoord(J),ir=this._convertToYCellCoord(ge),Sr=At;Sr<=$t;Sr++)for(var Br=Vt;Br<=ir;Br++){var Vr=this.xCellCount*Br+Sr;if(Ee.call(this,W,de,J,ge,Vr,Pe,Ze,ft))return}},br.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},br.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},br.prototype._circlesCollide=function(W,de,J,ge,Ee,Pe){var Ze=ge-W,ft=Ee-de,At=J+Pe;return At*At>Ze*Ze+ft*ft},br.prototype._circleAndRectCollide=function(W,de,J,ge,Ee,Pe,Ze){var ft=(Pe-ge)/2,At=Math.abs(W-(ge+ft));if(At>ft+J)return!1;var Vt=(Ze-Ee)/2,$t=Math.abs(de-(Ee+Vt));if($t>Vt+J)return!1;if(At<=ft||$t<=Vt)return!0;var ir=At-ft,Sr=$t-Vt;return ir*ir+Sr*Sr<=J*J};function jr(ve,W,de,J,ge){var Ee=e.create();return W?(e.scale(Ee,Ee,[1/ge,1/ge,1]),de||e.rotateZ(Ee,Ee,J.angle)):e.multiply(Ee,J.labelPlaneMatrix,ve),Ee}function zn(ve,W,de,J,ge){if(W){var Ee=e.clone(ve);return e.scale(Ee,Ee,[ge,ge,1]),de||e.rotateZ(Ee,Ee,-J.angle),Ee}else return J.glCoordMatrix}function kn(ve,W){var de=[ve.x,ve.y,0,1];ra(de,de,W);var J=de[3];return{point:new e.Point(de[0]/J,de[1]/J),signedDistanceFromCamera:J}}function ta(ve,W){return .5+.5*(ve/W)}function ia(ve,W){var de=ve[0]/ve[3],J=ve[1]/ve[3],ge=de>=-W[0]&&de<=W[0]&&J>=-W[1]&&J<=W[1];return ge}function Aa(ve,W,de,J,ge,Ee,Pe,Ze){var ft=J?ve.textSizeData:ve.iconSizeData,At=e.evaluateSizeForZoom(ft,de.transform.zoom),Vt=[256/de.width*2+1,256/de.height*2+1],$t=J?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;$t.clear();for(var ir=ve.lineVertexArray,Sr=J?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Br=de.transform.width/de.transform.height,Vr=!1,Nr=0;Nr<Sr.length;Nr++){var Kr=Sr.get(Nr);if(Kr.hidden||Kr.writingMode===e.WritingMode.vertical&&!Vr){ca(Kr.numGlyphs,$t);continue}Vr=!1;var hn=[Kr.anchorX,Kr.anchorY,0,1];if(e.transformMat4(hn,hn,W),!ia(hn,Vt)){ca(Kr.numGlyphs,$t);continue}var Sn=hn[3],On=ta(de.transform.cameraToCenterDistance,Sn),Jn=e.evaluateSizeForFeature(ft,At,Kr),ea=Pe?Jn/On:Jn*On,$n=new e.Point(Kr.anchorX,Kr.anchorY),va=kn($n,ge).point,_a={},xa=vn(Kr,ea,!1,Ze,W,ge,Ee,ve.glyphOffsetArray,ir,$t,va,$n,_a,Br);Vr=xa.useVertical,(xa.notEnoughRoom||Vr||xa.needsFlipping&&vn(Kr,ea,!0,Ze,W,ge,Ee,ve.glyphOffsetArray,ir,$t,va,$n,_a,Br).notEnoughRoom)&&ca(Kr.numGlyphs,$t)}J?ve.text.dynamicLayoutVertexBuffer.updateData($t):ve.icon.dynamicLayoutVertexBuffer.updateData($t)}function ya(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt){var $t=Ze.glyphStartIndex+Ze.numGlyphs,ir=Ze.lineStartIndex,Sr=Ze.lineStartIndex+Ze.lineLength,Br=W.getoffsetX(Ze.glyphStartIndex),Vr=W.getoffsetX($t-1),Nr=Fn(ve*Br,de,J,ge,Ee,Pe,Ze.segment,ir,Sr,ft,At,Vt);if(!Nr)return null;var Kr=Fn(ve*Vr,de,J,ge,Ee,Pe,Ze.segment,ir,Sr,ft,At,Vt);return Kr?{first:Nr,last:Kr}:null}function pr(ve,W,de,J){if(ve===e.WritingMode.horizontal){var ge=Math.abs(de.y-W.y),Ee=Math.abs(de.x-W.x)*J;if(ge>Ee)return{useVertical:!0}}return(ve===e.WritingMode.vertical?W.y<de.y:W.x>de.x)?{needsFlipping:!0}:null}function vn(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr){var Br=W/24,Vr=ve.lineOffsetX*Br,Nr=ve.lineOffsetY*Br,Kr;if(ve.numGlyphs>1){var hn=ve.glyphStartIndex+ve.numGlyphs,Sn=ve.lineStartIndex,On=ve.lineStartIndex+ve.lineLength,Jn=ya(Br,Ze,Vr,Nr,de,Vt,$t,ve,ft,Ee,ir);if(!Jn)return{notEnoughRoom:!0};var ea=kn(Jn.first.point,Pe).point,$n=kn(Jn.last.point,Pe).point;if(J&&!de){var va=pr(ve.writingMode,ea,$n,Sr);if(va)return va}Kr=[Jn.first];for(var _a=ve.glyphStartIndex+1;_a<hn-1;_a++)Kr.push(Fn(Br*Ze.getoffsetX(_a),Vr,Nr,de,Vt,$t,ve.segment,Sn,On,ft,Ee,ir));Kr.push(Jn.last)}else{if(J&&!de){var xa=kn($t,ge).point,Ma=ve.lineStartIndex+ve.segment+1,Pa=new e.Point(ft.getx(Ma),ft.gety(Ma)),Ha=kn(Pa,ge),ni=Ha.signedDistanceFromCamera>0?Ha.point:$r($t,Pa,xa,1,ge),Ci=pr(ve.writingMode,xa,ni,Sr);if(Ci)return Ci}var li=Fn(Br*Ze.getoffsetX(ve.glyphStartIndex),Vr,Nr,de,Vt,$t,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ft,Ee,ir);if(!li)return{notEnoughRoom:!0};Kr=[li]}for(var vi=0,Ua=Kr;vi<Ua.length;vi+=1){var Li=Ua[vi];e.addDynamicAttributes(At,Li.point,Li.angle)}return{}}function $r(ve,W,de,J,ge){var Ee=kn(ve.add(ve.sub(W)._unit()),ge).point,Pe=de.sub(Ee);return de.add(Pe._mult(J/Pe.mag()))}function Fn(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t){var ir=J?ve-W:ve+W,Sr=ir>0?1:-1,Br=0;J&&(Sr*=-1,Br=Math.PI),Sr<0&&(Br+=Math.PI);for(var Vr=Sr>0?Ze+Pe:Ze+Pe+1,Nr=ge,Kr=ge,hn=0,Sn=0,On=Math.abs(ir),Jn=[];hn+Sn<=On;){if(Vr+=Sr,Vr<Ze||Vr>=ft)return null;if(Kr=Nr,Jn.push(Nr),Nr=$t[Vr],Nr===void 0){var ea=new e.Point(At.getx(Vr),At.gety(Vr)),$n=kn(ea,Vt);if($n.signedDistanceFromCamera>0)Nr=$t[Vr]=$n.point;else{var va=Vr-Sr,_a=hn===0?Ee:new e.Point(At.getx(va),At.gety(va));Nr=$r(_a,ea,Kr,On-hn+1,Vt)}}hn+=Sn,Sn=Kr.dist(Nr)}var xa=(On-hn)/Sn,Ma=Nr.sub(Kr),Pa=Ma.mult(xa)._add(Kr);Pa._add(Ma._unit()._perp()._mult(de*Sr));var Ha=Br+Math.atan2(Nr.y-Kr.y,Nr.x-Kr.x);return Jn.push(Pa),{point:Pa,angle:Ha,path:Jn}}var Nn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ca(ve,W){for(var de=0;de<ve;de++){var J=W.length;W.resize(J+4),W.float32.set(Nn,J*3)}}function ra(ve,W,de){var J=W[0],ge=W[1];return ve[0]=de[0]*J+de[4]*ge+de[12],ve[1]=de[1]*J+de[5]*ge+de[13],ve[3]=de[3]*J+de[7]*ge+de[15],ve}var Un=100,ua=function(W,de,J){de===void 0&&(de=new br(W.width+2*Un,W.height+2*Un,25)),J===void 0&&(J=new br(W.width+2*Un,W.height+2*Un,25)),this.transform=W,this.grid=de,this.ignoredGrid=J,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+Un,this.screenBottomBoundary=W.height+Un,this.gridRightBoundary=W.width+2*Un,this.gridBottomBoundary=W.height+2*Un};ua.prototype.placeCollisionBox=function(W,de,J,ge,Ee){var Pe=this.projectAndGetPerspectiveRatio(ge,W.anchorPointX,W.anchorPointY),Ze=J*Pe.perspectiveRatio,ft=W.x1*Ze+Pe.point.x,At=W.y1*Ze+Pe.point.y,Vt=W.x2*Ze+Pe.point.x,$t=W.y2*Ze+Pe.point.y;return!this.isInsideGrid(ft,At,Vt,$t)||!de&&this.grid.hitTest(ft,At,Vt,$t,Ee)?{box:[],offscreen:!1}:{box:[ft,At,Vt,$t],offscreen:this.isOffscreen(ft,At,Vt,$t)}},ua.prototype.placeCollisionCircles=function(W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr){var Br=[],Vr=new e.Point(de.anchorX,de.anchorY),Nr=kn(Vr,Pe),Kr=ta(this.transform.cameraToCenterDistance,Nr.signedDistanceFromCamera),hn=Vt?Ee/Kr:Ee*Kr,Sn=hn/e.ONE_EM,On=kn(Vr,Ze).point,Jn={},ea=de.lineOffsetX*Sn,$n=de.lineOffsetY*Sn,va=ya(Sn,ge,ea,$n,!1,On,Vr,de,J,Ze,Jn),_a=!1,xa=!1,Ma=!0;if(va){for(var Pa=ir*.5*Kr+Sr,Ha=new e.Point(-Un,-Un),ni=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Ci=new Pr,li=va.first,vi=va.last,Ua=[],Li=li.path.length-1;Li>=1;Li--)Ua.push(li.path[Li]);for(var zi=1;zi<vi.path.length;zi++)Ua.push(vi.path[zi]);var Bi=Pa*2.5;if(ft){var bi=Ua.map(function(Pu){return kn(Pu,ft)});bi.some(function(Pu){return Pu.signedDistanceFromCamera<=0})?Ua=[]:Ua=bi.map(function(Pu){return Pu.point})}var Zi=[];if(Ua.length>0){for(var ii=Ua[0].clone(),_i=Ua[0].clone(),wo=1;wo<Ua.length;wo++)ii.x=Math.min(ii.x,Ua[wo].x),ii.y=Math.min(ii.y,Ua[wo].y),_i.x=Math.max(_i.x,Ua[wo].x),_i.y=Math.max(_i.y,Ua[wo].y);ii.x>=Ha.x&&_i.x<=ni.x&&ii.y>=Ha.y&&_i.y<=ni.y?Zi=[Ua]:_i.x<Ha.x||ii.x>ni.x||_i.y<Ha.y||ii.y>ni.y?Zi=[]:Zi=e.clipLine([Ua],Ha.x,Ha.y,ni.x,ni.y)}for(var Ho=0,Kl=Zi;Ho<Kl.length;Ho+=1){var Jl=Kl[Ho];Ci.reset(Jl,Pa*.25);var ku=0;Ci.length<=.5*Pa?ku=1:ku=Math.ceil(Ci.paddedLength/Bi)+1;for(var Eu=0;Eu<ku;Eu++){var rf=Eu/Math.max(ku-1,1),Cu=Ci.lerp(rf),$s=Cu.x+Un,kf=Cu.y+Un;Br.push($s,kf,Pa,0);var Es=$s-Pa,Rl=kf-Pa,Lu=$s+Pa,du=kf+Pa;if(Ma=Ma&&this.isOffscreen(Es,Rl,Lu,du),xa=xa||this.isInsideGrid(Es,Rl,Lu,du),!W&&this.grid.hitTestCircle($s,kf,Pa,$t)&&(_a=!0,!At))return{circles:[],offscreen:!1,collisionDetected:_a}}}}return{circles:!At&&_a||!xa?[]:Br,offscreen:Ma,collisionDetected:_a}},ua.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],J=1/0,ge=1/0,Ee=-1/0,Pe=-1/0,Ze=0,ft=W;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=new e.Point(At.x+Un,At.y+Un);J=Math.min(J,Vt.x),ge=Math.min(ge,Vt.y),Ee=Math.max(Ee,Vt.x),Pe=Math.max(Pe,Vt.y),de.push(Vt)}for(var $t=this.grid.query(J,ge,Ee,Pe).concat(this.ignoredGrid.query(J,ge,Ee,Pe)),ir={},Sr={},Br=0,Vr=$t;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=Nr.key;if(ir[Kr.bucketInstanceId]===void 0&&(ir[Kr.bucketInstanceId]={}),!ir[Kr.bucketInstanceId][Kr.featureIndex]){var hn=[new e.Point(Nr.x1,Nr.y1),new e.Point(Nr.x2,Nr.y1),new e.Point(Nr.x2,Nr.y2),new e.Point(Nr.x1,Nr.y2)];!e.polygonIntersectsPolygon(de,hn)||(ir[Kr.bucketInstanceId][Kr.featureIndex]=!0,Sr[Kr.bucketInstanceId]===void 0&&(Sr[Kr.bucketInstanceId]=[]),Sr[Kr.bucketInstanceId].push(Kr.featureIndex))}}return Sr},ua.prototype.insertCollisionBox=function(W,de,J,ge,Ee){var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ee};Pe.insert(Ze,W[0],W[1],W[2],W[3])},ua.prototype.insertCollisionCircles=function(W,de,J,ge,Ee){for(var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ee},ft=0;ft<W.length;ft+=4)Pe.insertCircle(Ze,W[ft],W[ft+1],W[ft+2])},ua.prototype.projectAndGetPerspectiveRatio=function(W,de,J){var ge=[de,J,0,1];ra(ge,ge,W);var Ee=new e.Point((ge[0]/ge[3]+1)/2*this.transform.width+Un,(-ge[1]/ge[3]+1)/2*this.transform.height+Un);return{point:Ee,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},ua.prototype.isOffscreen=function(W,de,J,ge){return J<Un||W>=this.screenRightBoundary||ge<Un||de>this.screenBottomBoundary},ua.prototype.isInsideGrid=function(W,de,J,ge){return J>=0&&W<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},ua.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-Un,-Un,0]),W};function da(ve,W,de){return W*(e.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var ur=function(W,de,J,ge){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?de:-de))):this.opacity=ge&&J?1:0,this.placed=J};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Rr=function(W,de,J,ge,Ee){this.text=new ur(W?W.text:null,de,J,Ee),this.icon=new ur(W?W.icon:null,de,ge,Ee)};Rr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var on=function(W,de,J){this.text=W,this.icon=de,this.skipFade=J},rn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},gn=function(W,de,J,ge,Ee){this.bucketInstanceId=W,this.featureIndex=de,this.sourceLayerIndex=J,this.bucketIndex=ge,this.tileID=Ee},wn=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};wn.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var de=++this.maxGroupID;this.collisionGroups[W]={ID:de,predicate:function(J){return J.collisionGroupID===de}}}return this.collisionGroups[W]};function pn(ve,W,de,J,ge){var Ee=e.getAnchorAlignment(ve),Pe=Ee.horizontalAlign,Ze=Ee.verticalAlign,ft=-(Pe-.5)*W,At=-(Ze-.5)*de,Vt=e.evaluateVariableOffset(ve,J);return new e.Point(ft+Vt[0]*ge,At+Vt[1]*ge)}function cr(ve,W,de,J,ge,Ee){var Pe=ve.x1,Ze=ve.x2,ft=ve.y1,At=ve.y2,Vt=ve.anchorPointX,$t=ve.anchorPointY,ir=new e.Point(W,de);return J&&ir._rotate(ge?Ee:-Ee),{x1:Pe+ir.x,y1:ft+ir.y,x2:Ze+ir.x,y2:At+ir.y,anchorPointX:Vt,anchorPointY:$t}}var ar=function(W,de,J,ge){this.transform=W.clone(),this.collisionIndex=new ua(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new wn(J),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};ar.prototype.getBucketParts=function(W,de,J,ge){var Ee=J.getBucket(de),Pe=J.latestFeatureIndex;if(!(!Ee||!Pe||de.id!==Ee.layerIds[0])){var Ze=J.collisionBoxArray,ft=Ee.layers[0].layout,At=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),Vt=J.tileSize/e.EXTENT,$t=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),ir=ft.get("text-pitch-alignment")==="map",Sr=ft.get("text-rotation-alignment")==="map",Br=da(J,1,this.transform.zoom),Vr=jr($t,ir,Sr,this.transform,Br),Nr=null;if(ir){var Kr=zn($t,ir,Sr,this.transform,Br);Nr=e.multiply([],this.transform.labelPlaneMatrix,Kr)}this.retainedQueryData[Ee.bucketInstanceId]=new gn(Ee.bucketInstanceId,Pe,Ee.sourceLayerIndex,Ee.index,J.tileID);var hn={bucket:Ee,layout:ft,posMatrix:$t,textLabelPlaneMatrix:Vr,labelToScreenMatrix:Nr,scale:At,textPixelRatio:Vt,holdingForFade:J.holdingForFade(),collisionBoxArray:Ze,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ee.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ee.sourceID)};if(ge)for(var Sn=0,On=Ee.sortKeyRanges;Sn<On.length;Sn+=1){var Jn=On[Sn],ea=Jn.sortKey,$n=Jn.symbolInstanceStart,va=Jn.symbolInstanceEnd;W.push({sortKey:ea,symbolInstanceStart:$n,symbolInstanceEnd:va,parameters:hn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Ee.symbolInstances.length,parameters:hn})}},ar.prototype.attemptAnchorPlacement=function(W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr,Br,Vr){var Nr=[ir.textOffset0,ir.textOffset1],Kr=pn(W,J,ge,Nr,Ee),hn=this.collisionIndex.placeCollisionBox(cr(de,Kr.x,Kr.y,Pe,Ze,this.transform.angle),$t,ft,At,Vt.predicate);if(Vr){var Sn=this.collisionIndex.placeCollisionBox(cr(Vr,Kr.x,Kr.y,Pe,Ze,this.transform.angle),$t,ft,At,Vt.predicate);if(Sn.box.length===0)return}if(hn.box.length>0){var On;return this.prevPlacement&&this.prevPlacement.variableOffsets[ir.crossTileID]&&this.prevPlacement.placements[ir.crossTileID]&&this.prevPlacement.placements[ir.crossTileID].text&&(On=this.prevPlacement.variableOffsets[ir.crossTileID].anchor),this.variableOffsets[ir.crossTileID]={textOffset:Nr,width:J,height:ge,anchor:W,textBoxScale:Ee,prevAnchor:On},this.markUsedJustification(Sr,W,ir,Br),Sr.allowVerticalPlacement&&(this.markUsedOrientation(Sr,Br,ir),this.placedOrientations[ir.crossTileID]=Br),{shift:Kr,placedGlyphBoxes:hn}}},ar.prototype.placeLayerBucketPart=function(W,de,J){var ge=this,Ee=W.parameters,Pe=Ee.bucket,Ze=Ee.layout,ft=Ee.posMatrix,At=Ee.textLabelPlaneMatrix,Vt=Ee.labelToScreenMatrix,$t=Ee.textPixelRatio,ir=Ee.holdingForFade,Sr=Ee.collisionBoxArray,Br=Ee.partiallyEvaluatedTextSize,Vr=Ee.collisionGroup,Nr=Ze.get("text-optional"),Kr=Ze.get("icon-optional"),hn=Ze.get("text-allow-overlap"),Sn=Ze.get("icon-allow-overlap"),On=Ze.get("text-rotation-alignment")==="map",Jn=Ze.get("text-pitch-alignment")==="map",ea=Ze.get("icon-text-fit")!=="none",$n=Ze.get("symbol-z-order")==="viewport-y",va=hn&&(Sn||!Pe.hasIconData()||Kr),_a=Sn&&(hn||!Pe.hasTextData()||Nr);!Pe.collisionArrays&&Sr&&Pe.deserializeCollisionBoxes(Sr);var xa=function(li,vi){if(!de[li.crossTileID]){if(ir){ge.placements[li.crossTileID]=new on(!1,!1,!1);return}var Ua=!1,Li=!1,zi=!0,Bi=null,bi={box:null,offscreen:null},Zi={box:null,offscreen:null},ii=null,_i=null,wo=null,Ho=0,Kl=0,Jl=0;vi.textFeatureIndex?Ho=vi.textFeatureIndex:li.useRuntimeCollisionCircles&&(Ho=li.featureIndex),vi.verticalTextFeatureIndex&&(Kl=vi.verticalTextFeatureIndex);var ku=vi.textBox;if(ku){var Eu=function(Lo){var yl=e.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Lo&&ge.prevPlacement){var ml=ge.prevPlacement.placedOrientations[li.crossTileID];ml&&(ge.placedOrientations[li.crossTileID]=ml,yl=ml,ge.markUsedOrientation(Pe,yl,li))}return yl},rf=function(Lo,yl){if(Pe.allowVerticalPlacement&&li.numVerticalGlyphVertices>0&&vi.verticalTextBox)for(var ml=0,fh=Pe.writingModes;ml<fh.length;ml+=1){var cv=fh[ml];if(cv===e.WritingMode.vertical?(bi=yl(),Zi=bi):bi=Lo(),bi&&bi.box&&bi.box.length)break}else bi=Lo()};if(Ze.get("text-variable-anchor")){var Es=Ze.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[li.crossTileID]){var Rl=ge.prevPlacement.variableOffsets[li.crossTileID];Es.indexOf(Rl.anchor)>0&&(Es=Es.filter(function(Lo){return Lo!==Rl.anchor}),Es.unshift(Rl.anchor))}var Lu=function(Lo,yl,ml){for(var fh=Lo.x2-Lo.x1,cv=Lo.y2-Lo.y1,o0=li.textBoxScale,s0=ea&&!Sn?yl:null,Oc={box:[],offscreen:!1},l0=hn?Es.length*2:Es.length,ch=0;ch<l0;++ch){var u0=Es[ch%Es.length],f0=ch>=Es.length,hv=ge.attemptAnchorPlacement(u0,Lo,fh,cv,o0,On,Jn,$t,ft,Vr,f0,li,Pe,ml,s0);if(hv&&(Oc=hv.placedGlyphBoxes,Oc&&Oc.box&&Oc.box.length)){Ua=!0,Bi=hv.shift;break}}return Oc},du=function(){return Lu(ku,vi.iconBox,e.WritingMode.horizontal)},Pu=function(){var Lo=vi.verticalTextBox,yl=bi&&bi.box&&bi.box.length;return Pe.allowVerticalPlacement&&!yl&&li.numVerticalGlyphVertices>0&&Lo?Lu(Lo,vi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};rf(du,Pu),bi&&(Ua=bi.box,zi=bi.offscreen);var oh=Eu(bi&&bi.box);if(!Ua&&ge.prevPlacement){var Nf=ge.prevPlacement.variableOffsets[li.crossTileID];Nf&&(ge.variableOffsets[li.crossTileID]=Nf,ge.markUsedJustification(Pe,Nf.anchor,li,oh))}}else{var Cu=function(Lo,yl){var ml=ge.collisionIndex.placeCollisionBox(Lo,hn,$t,ft,Vr.predicate);return ml&&ml.box&&ml.box.length&&(ge.markUsedOrientation(Pe,yl,li),ge.placedOrientations[li.crossTileID]=yl),ml},$s=function(){return Cu(ku,e.WritingMode.horizontal)},kf=function(){var Lo=vi.verticalTextBox;return Pe.allowVerticalPlacement&&li.numVerticalGlyphVertices>0&&Lo?Cu(Lo,e.WritingMode.vertical):{box:null,offscreen:null}};rf($s,kf),Eu(bi&&bi.box&&bi.box.length)}}if(ii=bi,Ua=ii&&ii.box&&ii.box.length>0,zi=ii&&ii.offscreen,li.useRuntimeCollisionCircles){var xs=Pe.text.placedSymbolArray.get(li.centerJustifiedTextSymbolIndex),zc=e.evaluateSizeForFeature(Pe.textSizeData,Br,xs),Ns=Ze.get("text-padding"),Fc=li.collisionCircleDiameter;_i=ge.collisionIndex.placeCollisionCircles(hn,xs,Pe.lineVertexArray,Pe.glyphOffsetArray,zc,ft,At,Vt,J,Jn,Vr.predicate,Fc,Ns),Ua=hn||_i.circles.length>0&&!_i.collisionDetected,zi=zi&&_i.offscreen}if(vi.iconFeatureIndex&&(Jl=vi.iconFeatureIndex),vi.iconBox){var sh=function(Lo){var yl=ea&&Bi?cr(Lo,Bi.x,Bi.y,On,Jn,ge.transform.angle):Lo;return ge.collisionIndex.placeCollisionBox(yl,Sn,$t,ft,Vr.predicate)};Zi&&Zi.box&&Zi.box.length&&vi.verticalIconBox?(wo=sh(vi.verticalIconBox),Li=wo.box.length>0):(wo=sh(vi.iconBox),Li=wo.box.length>0),zi=zi&&wo.offscreen}var lh=Nr||li.numHorizontalGlyphVertices===0&&li.numVerticalGlyphVertices===0,Lp=Kr||li.numIconVertices===0;if(!lh&&!Lp?Li=Ua=Li&&Ua:Lp?lh||(Li=Li&&Ua):Ua=Li&&Ua,Ua&&ii&&ii.box&&(Zi&&Zi.box&&Kl?ge.collisionIndex.insertCollisionBox(ii.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Kl,Vr.ID):ge.collisionIndex.insertCollisionBox(ii.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Ho,Vr.ID)),Li&&wo&&ge.collisionIndex.insertCollisionBox(wo.box,Ze.get("icon-ignore-placement"),Pe.bucketInstanceId,Jl,Vr.ID),_i&&(Ua&&ge.collisionIndex.insertCollisionCircles(_i.circles,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Ho,Vr.ID),J)){var uh=Pe.bucketInstanceId,rc=ge.collisionCircleArrays[uh];rc===void 0&&(rc=ge.collisionCircleArrays[uh]=new rn);for(var nc=0;nc<_i.circles.length;nc+=4)rc.circles.push(_i.circles[nc+0]),rc.circles.push(_i.circles[nc+1]),rc.circles.push(_i.circles[nc+2]),rc.circles.push(_i.collisionDetected?1:0)}ge.placements[li.crossTileID]=new on(Ua||va,Li||_a,zi||Pe.justReloaded),de[li.crossTileID]=!0}};if($n)for(var Ma=Pe.getSortedSymbolIndexes(this.transform.angle),Pa=Ma.length-1;Pa>=0;--Pa){var Ha=Ma[Pa];xa(Pe.symbolInstances.get(Ha),Pe.collisionArrays[Ha])}else for(var ni=W.symbolInstanceStart;ni<W.symbolInstanceEnd;ni++)xa(Pe.symbolInstances.get(ni),Pe.collisionArrays[ni]);if(J&&Pe.bucketInstanceId in this.collisionCircleArrays){var Ci=this.collisionCircleArrays[Pe.bucketInstanceId];e.invert(Ci.invProjMatrix,ft),Ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},ar.prototype.markUsedJustification=function(W,de,J,ge){var Ee={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Pe;ge===e.WritingMode.vertical?Pe=J.verticalPlacedTextSymbolIndex:Pe=Ee[e.getAnchorJustification(de)];for(var Ze=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],ft=0,At=Ze;ft<At.length;ft+=1){var Vt=At[ft];Vt>=0&&(Pe>=0&&Vt!==Pe?W.text.placedSymbolArray.get(Vt).crossTileID=0:W.text.placedSymbolArray.get(Vt).crossTileID=J.crossTileID)}},ar.prototype.markUsedOrientation=function(W,de,J){for(var ge=de===e.WritingMode.horizontal||de===e.WritingMode.horizontalOnly?de:0,Ee=de===e.WritingMode.vertical?de:0,Pe=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var At=ft[Ze];W.text.placedSymbolArray.get(At).placedOrientation=ge}J.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=Ee)},ar.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,J=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(W):1,Ee=de?de.opacities:{},Pe=de?de.variableOffsets:{},Ze=de?de.placedOrientations:{};for(var ft in this.placements){var At=this.placements[ft],Vt=Ee[ft];Vt?(this.opacities[ft]=new Rr(Vt,ge,At.text,At.icon),J=J||At.text!==Vt.text.placed||At.icon!==Vt.icon.placed):(this.opacities[ft]=new Rr(null,ge,At.text,At.icon,At.skipFade),J=J||At.text||At.icon)}for(var $t in Ee){var ir=Ee[$t];if(!this.opacities[$t]){var Sr=new Rr(ir,ge,!1,!1);Sr.isHidden()||(this.opacities[$t]=Sr,J=J||ir.text.placed||ir.icon.placed)}}for(var Br in Pe)!this.variableOffsets[Br]&&this.opacities[Br]&&!this.opacities[Br].isHidden()&&(this.variableOffsets[Br]=Pe[Br]);for(var Vr in Ze)!this.placedOrientations[Vr]&&this.opacities[Vr]&&!this.opacities[Vr].isHidden()&&(this.placedOrientations[Vr]=Ze[Vr]);J?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:W)},ar.prototype.updateLayerOpacities=function(W,de){for(var J={},ge=0,Ee=de;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe.getBucket(W);Ze&&Pe.latestFeatureIndex&&W.id===Ze.layerIds[0]&&this.updateBucketOpacities(Ze,J,Pe.collisionBoxArray)}},ar.prototype.updateBucketOpacities=function(W,de,J){var ge=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Ee=W.layers[0].layout,Pe=new Rr(null,0,!1,!1,!0),Ze=Ee.get("text-allow-overlap"),ft=Ee.get("icon-allow-overlap"),At=Ee.get("text-variable-anchor"),Vt=Ee.get("text-rotation-alignment")==="map",$t=Ee.get("text-pitch-alignment")==="map",ir=Ee.get("icon-text-fit")!=="none",Sr=new Rr(null,0,Ze&&(ft||!W.hasIconData()||Ee.get("icon-optional")),ft&&(Ze||!W.hasTextData()||Ee.get("text-optional")),!0);!W.collisionArrays&&J&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(J);for(var Br=function(hn,Sn,On){for(var Jn=0;Jn<Sn/4;Jn++)hn.opacityVertexArray.emplaceBack(On)},Vr=function(hn){var Sn=W.symbolInstances.get(hn),On=Sn.numHorizontalGlyphVertices,Jn=Sn.numVerticalGlyphVertices,ea=Sn.crossTileID,$n=de[ea],va=ge.opacities[ea];$n?va=Pe:va||(va=Sr,ge.opacities[ea]=va),de[ea]=!0;var _a=On>0||Jn>0,xa=Sn.numIconVertices>0,Ma=ge.placedOrientations[Sn.crossTileID],Pa=Ma===e.WritingMode.vertical,Ha=Ma===e.WritingMode.horizontal||Ma===e.WritingMode.horizontalOnly;if(_a){var ni=Rn(va.text),Ci=Pa?Yn:ni;Br(W.text,On,Ci);var li=Ha?Yn:ni;Br(W.text,Jn,li);var vi=va.text.isHidden();[Sn.rightJustifiedTextSymbolIndex,Sn.centerJustifiedTextSymbolIndex,Sn.leftJustifiedTextSymbolIndex].forEach(function(Jl){Jl>=0&&(W.text.placedSymbolArray.get(Jl).hidden=vi||Pa?1:0)}),Sn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Sn.verticalPlacedTextSymbolIndex).hidden=vi||Ha?1:0);var Ua=ge.variableOffsets[Sn.crossTileID];Ua&&ge.markUsedJustification(W,Ua.anchor,Sn,Ma);var Li=ge.placedOrientations[Sn.crossTileID];Li&&(ge.markUsedJustification(W,"left",Sn,Li),ge.markUsedOrientation(W,Li,Sn))}if(xa){var zi=Rn(va.icon),Bi=!(ir&&Sn.verticalPlacedIconSymbolIndex&&Pa);if(Sn.placedIconSymbolIndex>=0){var bi=Bi?zi:Yn;Br(W.icon,Sn.numIconVertices,bi),W.icon.placedSymbolArray.get(Sn.placedIconSymbolIndex).hidden=va.icon.isHidden()}if(Sn.verticalPlacedIconSymbolIndex>=0){var Zi=Bi?Yn:zi;Br(W.icon,Sn.numVerticalIconVertices,Zi),W.icon.placedSymbolArray.get(Sn.verticalPlacedIconSymbolIndex).hidden=va.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var ii=W.collisionArrays[hn];if(ii){var _i=new e.Point(0,0);if(ii.textBox||ii.verticalTextBox){var wo=!0;if(At){var Ho=ge.variableOffsets[ea];Ho?(_i=pn(Ho.anchor,Ho.width,Ho.height,Ho.textOffset,Ho.textBoxScale),Vt&&_i._rotate($t?ge.transform.angle:-ge.transform.angle)):wo=!1}ii.textBox&&Fr(W.textCollisionBox.collisionVertexArray,va.text.placed,!wo||Pa,_i.x,_i.y),ii.verticalTextBox&&Fr(W.textCollisionBox.collisionVertexArray,va.text.placed,!wo||Ha,_i.x,_i.y)}var Kl=Boolean(!Ha&&ii.verticalIconBox);ii.iconBox&&Fr(W.iconCollisionBox.collisionVertexArray,va.icon.placed,Kl,ir?_i.x:0,ir?_i.y:0),ii.verticalIconBox&&Fr(W.iconCollisionBox.collisionVertexArray,va.icon.placed,!Kl,ir?_i.x:0,ir?_i.y:0)}}},Nr=0;Nr<W.symbolInstances.length;Nr++)Vr(Nr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var Kr=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=Kr.invProjMatrix,W.placementViewportMatrix=Kr.viewportMatrix,W.collisionCircleArray=Kr.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},ar.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ar.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},ar.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},ar.prototype.stillRecent=function(W,de){var J=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*J>W},ar.prototype.setStale=function(){this.stale=!0};function Fr(ve,W,de,J,ge){ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0)}var Jr=Math.pow(2,25),En=Math.pow(2,24),Vn=Math.pow(2,17),Kn=Math.pow(2,16),jn=Math.pow(2,9),Bn=Math.pow(2,8),mn=Math.pow(2,1);function Rn(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var W=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*Jr+W*En+de*Vn+W*Kn+de*jn+W*Bn+de*mn+W}var Yn=0,la=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};la.prototype.continuePlacement=function(W,de,J,ge,Ee){for(var Pe=this._bucketParts;this._currentTileIndex<W.length;){var Ze=W[this._currentTileIndex];if(de.getBucketParts(Pe,ge,Ze,this._sortAcrossTiles),this._currentTileIndex++,Ee())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(At,Vt){return At.sortKey-Vt.sortKey}));this._currentPartIndex<Pe.length;){var ft=Pe[this._currentPartIndex];if(de.placeLayerBucketPart(ft,this._seenCrossTileIDs,J),this._currentPartIndex++,Ee())return!0}return!1};var Ga=function(W,de,J,ge,Ee,Pe,Ze){this.placement=new ar(W,Ee,Pe,Ze),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=ge,this._done=!1};Ga.prototype.isDone=function(){return this._done},Ga.prototype.continuePlacement=function(W,de,J){for(var ge=this,Ee=e.browser.now(),Pe=function(){var $t=e.browser.now()-Ee;return ge._forceFullPlacement?!1:$t>2};this._currentPlacementIndex>=0;){var Ze=W[this._currentPlacementIndex],ft=de[Ze],At=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=At)&&(!ft.maxzoom||ft.maxzoom>At)){this._inProgressLayer||(this._inProgressLayer=new la(ft));var Vt=this._inProgressLayer.continuePlacement(J[ft.source],this.placement,this._showCollisionBoxes,ft,Pe);if(Vt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ga.prototype.commit=function(W){return this.placement.commit(W),this.placement};var ka=512/e.EXTENT/2,il=function(W,de,J){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var ge=0;ge<de.length;ge++){var Ee=de.get(ge),Pe=Ee.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:Ee.crossTileID,coord:this.getScaledCoordinates(Ee,W)})}};il.prototype.getScaledCoordinates=function(W,de){var J=de.canonical.z-this.tileID.canonical.z,ge=ka/Math.pow(2,J);return{x:Math.floor((de.canonical.x*e.EXTENT+W.anchorX)*ge),y:Math.floor((de.canonical.y*e.EXTENT+W.anchorY)*ge)}},il.prototype.findMatches=function(W,de,J){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ee=0;Ee<W.length;Ee++){var Pe=W.get(Ee);if(!Pe.crossTileID){var Ze=this.indexedSymbolInstances[Pe.key];if(!!Ze)for(var ft=this.getScaledCoordinates(Pe,de),At=0,Vt=Ze;At<Vt.length;At+=1){var $t=Vt[At];if(Math.abs($t.coord.x-ft.x)<=ge&&Math.abs($t.coord.y-ft.y)<=ge&&!J[$t.crossTileID]){J[$t.crossTileID]=!0,Pe.crossTileID=$t.crossTileID;break}}}}};var No=function(){this.maxCrossTileID=0};No.prototype.generate=function(){return++this.maxCrossTileID};var es=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};es.prototype.handleWrapJump=function(W){var de=Math.round((W-this.lng)/360);if(de!==0)for(var J in this.indexes){var ge=this.indexes[J],Ee={};for(var Pe in ge){var Ze=ge[Pe];Ze.tileID=Ze.tileID.unwrapTo(Ze.tileID.wrap+de),Ee[Ze.tileID.key]=Ze}this.indexes[J]=Ee}this.lng=W},es.prototype.addBucket=function(W,de,J){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ee=de.symbolInstances.get(ge);Ee.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Pe=this.usedCrossTileIDs[W.overscaledZ];for(var Ze in this.indexes){var ft=this.indexes[Ze];if(Number(Ze)>W.overscaledZ)for(var At in ft){var Vt=ft[At];Vt.tileID.isChildOf(W)&&Vt.findMatches(de.symbolInstances,W,Pe)}else{var $t=W.scaledTo(Number(Ze)),ir=ft[$t.key];ir&&ir.findMatches(de.symbolInstances,W,Pe)}}for(var Sr=0;Sr<de.symbolInstances.length;Sr++){var Br=de.symbolInstances.get(Sr);Br.crossTileID||(Br.crossTileID=J.generate(),Pe[Br.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new il(W,de.symbolInstances,de.bucketInstanceId),!0},es.prototype.removeBucketCrossTileIDs=function(W,de){for(var J in de.indexedSymbolInstances)for(var ge=0,Ee=de.indexedSymbolInstances[J];ge<Ee.length;ge+=1){var Pe=Ee[ge];delete this.usedCrossTileIDs[W][Pe.crossTileID]}},es.prototype.removeStaleBuckets=function(W){var de=!1;for(var J in this.indexes){var ge=this.indexes[J];for(var Ee in ge)W[ge[Ee].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,ge[Ee]),delete ge[Ee],de=!0)}return de};var Ls=function(){this.layerIndexes={},this.crossTileIDs=new No,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ls.prototype.addLayer=function(W,de,J){var ge=this.layerIndexes[W.id];ge===void 0&&(ge=this.layerIndexes[W.id]=new es);var Ee=!1,Pe={};ge.handleWrapJump(J);for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=At.getBucket(W);!Vt||W.id!==Vt.layerIds[0]||(Vt.bucketInstanceId||(Vt.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(At.tileID,Vt,this.crossTileIDs)&&(Ee=!0),Pe[Vt.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Pe)&&(Ee=!0),Ee},Ls.prototype.pruneUnusedLayers=function(W){var de={};W.forEach(function(ge){de[ge]=!0});for(var J in this.layerIndexes)de[J]||delete this.layerIndexes[J]};var eo=function(ve,W){return e.emitValidationErrors(ve,W&&W.filter(function(de){return de.identifier!=="source.canvas"}))},Pi=e.pick(Gr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ys=e.pick(Gr,["setCenter","setZoom","setBearing","setPitch"]),Ws=yn(),ts=function(ve){function W(de,J){var ge=this;J===void 0&&(J={}),ve.call(this),this.map=de,this.dispatcher=new D(yr(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new S(de._requestManager,J.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new Ls,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ee=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Pe){var Ze={pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL};Ee.dispatcher.broadcast("syncRTLPluginState",Ze,function(ft,At){if(e.triggerPluginCompletionEvent(ft),At){var Vt=At.every(function(ir){return ir});if(Vt)for(var $t in Ee.sourceCaches)Ee.sourceCaches[$t].reload()}})}),this.on("data",function(Pe){if(!(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")){var Ze=ge.sourceCaches[Pe.sourceId];if(!!Ze){var ft=Ze.getSource();if(!(!ft||!ft.vectorLayerIds))for(var At in ge._layers){var Vt=ge._layers[At];Vt.source===ft.id&&ge._validateLayer(Vt)}}}})}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(J,ge){var Ee=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Pe=typeof ge.validate=="boolean"?ge.validate:!e.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,ge.accessToken);var Ze=this.map._requestManager.transformRequest(J,e.ResourceType.Style);this._request=e.getJSON(Ze,function(ft,At){Ee._request=null,ft?Ee.fire(new e.ErrorEvent(ft)):At&&Ee._load(At,Pe)})},W.prototype.loadJSON=function(J,ge){var Ee=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ee._request=null,Ee._load(J,ge.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ws,!1)},W.prototype._load=function(J,ge){if(!(ge&&eo(this,e.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var Ee in J.sources)this.addSource(Ee,J.sources[Ee],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Pe=gr(this.stylesheet.layers);this._order=Pe.map(function(Vt){return Vt.id}),this._layers={},this._serializedLayers={};for(var Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var At=ft[Ze];At=e.createStyleLayer(At),At.setEventedParent(this,{layer:{id:At.id}}),this._layers[At.id]=At,this._serializedLayers[At.id]=At.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function(J){var ge=this;this._spriteRequest=v(J,this.map._requestManager,function(Ee,Pe){if(ge._spriteRequest=null,Ee)ge.fire(new e.ErrorEvent(Ee));else if(Pe)for(var Ze in Pe)ge.imageManager.addImage(Ze,Pe[Ze]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(J){var ge=this.sourceCaches[J.source];if(!!ge){var Ee=J.sourceLayer;if(!!Ee){var Pe=ge.getSource();(Pe.type==="geojson"||Pe.vectorLayerIds&&Pe.vectorLayerIds.indexOf(Ee)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ee+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+J.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(J){for(var ge=[],Ee=0,Pe=J;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee],ft=this._layers[Ze];ft.type!=="custom"&&ge.push(ft.serialize())}return ge},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(J){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ee=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);(Ee.length||Pe.length)&&this._updateWorkerLayers(Ee,Pe);for(var Ze in this._updatedSources){var ft=this._updatedSources[Ze];ft==="reload"?this._reloadSource(Ze):ft==="clear"&&this._clearSource(Ze)}this._updateTilesForChangedImages();for(var At in this._updatedPaintProps)this._layers[At].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var Vt in this.sourceCaches)this.sourceCaches[Vt].used=!1;for(var $t=0,ir=this._order;$t<ir.length;$t+=1){var Sr=ir[$t],Br=this._layers[Sr];Br.recalculate(J,this._availableImages),!Br.isHidden(J.zoom)&&Br.source&&(this.sourceCaches[Br.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,ge&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},W.prototype._updateWorkerLayers=function(J,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:ge})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(J){var ge=this;if(this._checkLoaded(),eo(this,e.validateStyle(J)))return!1;J=e.clone$1(J),J.layers=gr(J.layers);var Ee=zr(this.serialize(),J).filter(function(Ze){return!(Ze.command in Ys)});if(Ee.length===0)return!1;var Pe=Ee.filter(function(Ze){return!(Ze.command in Pi)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(Ze){return Ze.command}).join(", ")+".");return Ee.forEach(function(Ze){Ze.command!=="setTransition"&&ge[Ze.command].apply(ge,Ze.args)}),this.stylesheet=J,!0},W.prototype.addImage=function(J,ge){if(this.getImage(J))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(J,ge){this.imageManager.updateImage(J,ge)},W.prototype.getImage=function(J){return this.imageManager.getImage(J)},W.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(J,ge,Ee){var Pe=this;if(Ee===void 0&&(Ee={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var Ze=["vector","raster","geojson","video","image"],ft=Ze.indexOf(ge.type)>=0;if(!(ft&&this._validate(e.validateStyle.source,"sources."+J,ge,null,Ee))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var At=this.sourceCaches[J]=new ot(J,ge,this.dispatcher);At.style=this,At.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:At.serialize(),sourceId:J}}),At.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===J)return this.fire(new e.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+ge+'" is using it.')));var Ee=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],Ee.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),Ee.setEventedParent(null),Ee.clearTiles(),Ee.onRemove&&Ee.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(J,ge){this._checkLoaded();var Ee=this.sourceCaches[J].getSource();Ee.setData(ge),this._changed=!0},W.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},W.prototype.addLayer=function(J,ge,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=J.id;if(this.getLayer(Pe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));return}var Ze;if(J.type==="custom"){if(eo(this,e.validateCustomStyleLayer(J)))return;Ze=e.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Pe,J.source),J=e.clone$1(J),J=e.extend(J,{source:Pe})),this._validate(e.validateStyle.layer,"layers."+Pe,J,{arrayIndex:-1},Ee))return;Ze=e.createStyleLayer(J),this._validateLayer(Ze),Ze.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Ze.id]=Ze.serialize()}var ft=ge?this._order.indexOf(ge):this._order.length;if(ge&&ft===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Ze,this._removedLayers[Pe]&&Ze.source&&Ze.type!=="custom"){var At=this._removedLayers[Pe];delete this._removedLayers[Pe],At.type!==Ze.type?this._updatedSources[Ze.source]="clear":(this._updatedSources[Ze.source]="reload",this.sourceCaches[Ze.source].pause())}this._updateLayer(Ze),Ze.onAdd&&Ze.onAdd(this.map)},W.prototype.moveLayer=function(J,ge){this._checkLoaded(),this._changed=!0;var Ee=this._layers[J];if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==ge){var Pe=this._order.indexOf(J);this._order.splice(Pe,1);var Ze=ge?this._order.indexOf(ge):this._order.length;if(ge&&Ze===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice(Ze,0,J),this._layerOrderChanged=!0}},W.prototype.removeLayer=function(J){this._checkLoaded();var ge=this._layers[J];if(!ge){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ee=this._order.indexOf(J);this._order.splice(Ee,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=ge,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],ge.onRemove&&ge.onRemove(this.map)},W.prototype.getLayer=function(J){return this._layers[J]},W.prototype.hasLayer=function(J){return J in this._layers},W.prototype.setLayerZoomRange=function(J,ge,Ee){this._checkLoaded();var Pe=this.getLayer(J);if(!Pe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Pe.minzoom===ge&&Pe.maxzoom===Ee||(ge!=null&&(Pe.minzoom=ge),Ee!=null&&(Pe.maxzoom=Ee),this._updateLayer(Pe))},W.prototype.setFilter=function(J,ge,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=this.getLayer(J);if(!Pe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Pe.filter,ge)){if(ge==null){Pe.filter=void 0,this._updateLayer(Pe);return}this._validate(e.validateStyle.filter,"layers."+Pe.id+".filter",ge,null,Ee)||(Pe.filter=e.clone$1(ge),this._updateLayer(Pe))}},W.prototype.getFilter=function(J){return e.clone$1(this.getLayer(J).filter)},W.prototype.setLayoutProperty=function(J,ge,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(J);if(!Ze){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Ze.getLayoutProperty(ge),Ee)||(Ze.setLayoutProperty(ge,Ee,Pe),this._updateLayer(Ze))},W.prototype.getLayoutProperty=function(J,ge){var Ee=this.getLayer(J);if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return Ee.getLayoutProperty(ge)},W.prototype.setPaintProperty=function(J,ge,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(J);if(!Ze){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Ze.getPaintProperty(ge),Ee)){var ft=Ze.setPaintProperty(ge,Ee,Pe);ft&&this._updateLayer(Ze),this._changed=!0,this._updatedPaintProps[J]=!0}},W.prototype.getPaintProperty=function(J,ge){return this.getLayer(J).getPaintProperty(ge)},W.prototype.setFeatureState=function(J,ge){this._checkLoaded();var Ee=J.source,Pe=J.sourceLayer,Ze=this.sourceCaches[Ee];if(Ze===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var ft=Ze.getSource().type;if(ft==="geojson"&&Pe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Pe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ze.setFeatureState(Pe,J.id,ge)},W.prototype.removeFeatureState=function(J,ge){this._checkLoaded();var Ee=J.source,Pe=this.sourceCaches[Ee];if(Pe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type,ft=Ze==="vector"?J.sourceLayer:void 0;if(Ze==="vector"&&!ft){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Pe.removeFeatureState(ft,J.id,ge)},W.prototype.getFeatureState=function(J){this._checkLoaded();var ge=J.source,Ee=J.sourceLayer,Pe=this.sourceCaches[ge];if(Pe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type;if(Ze==="vector"&&!Ee){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(Ee,J.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},W.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(J){for(var ge=this,Ee=function(Ha){return ge._layers[Ha].type==="fill-extrusion"},Pe={},Ze=[],ft=this._order.length-1;ft>=0;ft--){var At=this._order[ft];if(Ee(At)){Pe[At]=ft;for(var Vt=0,$t=J;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=ir[At];if(Sr)for(var Br=0,Vr=Sr;Br<Vr.length;Br+=1){var Nr=Vr[Br];Ze.push(Nr)}}}}Ze.sort(function(Ha,ni){return ni.intersectionZ-Ha.intersectionZ});for(var Kr=[],hn=this._order.length-1;hn>=0;hn--){var Sn=this._order[hn];if(Ee(Sn))for(var On=Ze.length-1;On>=0;On--){var Jn=Ze[On].feature;if(Pe[Jn.layer.id]<hn)break;Kr.push(Jn),Ze.pop()}else for(var ea=0,$n=J;ea<$n.length;ea+=1){var va=$n[ea],_a=va[Sn];if(_a)for(var xa=0,Ma=_a;xa<Ma.length;xa+=1){var Pa=Ma[xa];Kr.push(Pa.feature)}}}return Kr},W.prototype.queryRenderedFeatures=function(J,ge,Ee){ge&&ge.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Pe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ze=0,ft=ge.layers;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=this._layers[At];if(!Vt)return this.fire(new e.ErrorEvent(new Error("The layer '"+At+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[Vt.source]=!0}}var $t=[];ge.availableImages=this._availableImages;for(var ir in this.sourceCaches)ge.layers&&!Pe[ir]||$t.push(ne(this.sourceCaches[ir],this._layers,this._serializedLayers,J,ge,Ee));return this.placement&&$t.push(ae(this._layers,this._serializedLayers,this.sourceCaches,J,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($t)},W.prototype.querySourceFeatures=function(J,ge){ge&&ge.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ee=this.sourceCaches[J];return Ee?ie(Ee,ge):[]},W.prototype.addSourceType=function(J,ge,Ee){if(W.getSourceType(J))return Ee(new Error('A source type called "'+J+'" already exists.'));if(W.setSourceType(J,ge),!ge.workerSourceURL)return Ee(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:ge.workerSourceURL},Ee)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(J,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ee=this.light.getLight(),Pe=!1;for(var Ze in J)if(!e.deepEqual(J[Ze],Ee[Ze])){Pe=!0;break}if(!!Pe){var ft={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,ge),this.light.updateTransitions(ft)}},W.prototype._validate=function(J,ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),Ze&&Ze.validate===!1?!1:eo(this,J.call(e.validateStyle,e.extend({key:ge,style:this.serialize(),value:Ee,styleSpec:e.styleSpec},Pe)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var ge=this._layers[J];ge.setEventedParent(null)}for(var Ee in this.sourceCaches)this.sourceCaches[Ee].clearTiles(),this.sourceCaches[Ee].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},W.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},W.prototype._updateSources=function(J){for(var ge in this.sourceCaches)this.sourceCaches[ge].update(J)},W.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},W.prototype._updatePlacement=function(J,ge,Ee,Pe,Ze){Ze===void 0&&(Ze=!1);for(var ft=!1,At=!1,Vt={},$t=0,ir=this._order;$t<ir.length;$t+=1){var Sr=ir[$t],Br=this._layers[Sr];if(Br.type==="symbol"){if(!Vt[Br.source]){var Vr=this.sourceCaches[Br.source];Vt[Br.source]=Vr.getRenderableIds(!0).map(function(ea){return Vr.getTileByID(ea)}).sort(function(ea,$n){return $n.tileID.overscaledZ-ea.tileID.overscaledZ||(ea.tileID.isLessThan($n.tileID)?-1:1)})}var Nr=this.crossTileSymbolIndex.addLayer(Br,Vt[Br.source],J.center.lng);ft=ft||Nr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ze=Ze||this._layerOrderChanged||Ee===0,(Ze||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),J.zoom))&&(this.pauseablePlacement=new Ga(J,this._order,Ze,ge,Ee,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),At=!0),ft&&this.pauseablePlacement.placement.setStale()),At||ft)for(var Kr=0,hn=this._order;Kr<hn.length;Kr+=1){var Sn=hn[Kr],On=this._layers[Sn];On.type==="symbol"&&this.placement.updateLayerOpacities(On,Vt[On.source])}var Jn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return Jn},W.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},W.prototype.getImages=function(J,ge,Ee){this.imageManager.getImages(ge.icons,Ee),this._updateTilesForChangedImages();var Pe=this.sourceCaches[ge.source];Pe&&Pe.setDependencies(ge.tileID.key,ge.type,ge.icons)},W.prototype.getGlyphs=function(J,ge,Ee){this.glyphManager.getGlyphs(ge.stacks,Ee)},W.prototype.getResource=function(J,ge,Ee){return e.makeRequest(ge,Ee)},W}(e.Evented);ts.getSourceType=re,ts.setSourceType=ee,ts.registerForPluginStateChange=e.registerForPluginStateChange;var Ml=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Nl=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,xu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,hi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ol="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Xs=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ui="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",So=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,_s="void main() {gl_FragColor=vec4(1.0);}",Di="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Sl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ji=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,io="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Qi="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",us="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",sl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Bu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",rs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Uu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",js=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ko=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,ff=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zs=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Ps=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,cf=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,ll=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Ds=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,kl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_u="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Vu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",vf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ul=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,wu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,ws=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ul=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Tu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Gu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",pf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ns=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,El=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Cl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Ts=Ri(Nl,xu),Eo=Ri(hi,ol),lu=Ri(Xs,Ui),Rs=Ri(So,Bl),Is=Ri(_s,Di),lo=Ri(Sl,Ji),Vl=Ri(Fi,io),Hl=Ri(Qi,us),fl=Ri(sl,Bu),As=Ri(rs,Uu),Gl=Ri(js,ko),Ll=Ri(ff,Zs),uu=Ri(Ps,nu),Yl=Ri(cf,hf),cl=Ri(ll,au),df=Ri(Ds,bu),fs=Ri(kl,_u),zf=Ri(Vu,iu),Mu=Ri(vf,ul),Pl=Ri(wu,ou),Wl=Ri(ws,Ul),hl=Ri(Tu,Hu),Xl=Ri(Gu,su),Wu=Ri(pf,Yu),Xu=Ri(ns,El),Ff=Ri(Cl,Au);function Ri(ve,W){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,J={};return ve=ve.replace(de,function(ge,Ee,Pe,Ze,ft){return J[ft]=!0,Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),W=W.replace(de,function(ge,Ee,Pe,Ze,ft){var At=Ze==="float"?"vec2":"vec4",Vt=ft.match(/color/)?"color":At;return J[ft]?Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+At+" a_"+ft+`;
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+Vt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+At+" a_"+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = unpack_mix_"+Vt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:ve,vertexSource:W}}var Dl=Object.freeze({__proto__:null,prelude:Ts,background:Eo,backgroundPattern:lu,circle:Rs,clippingMask:Is,heatmap:lo,heatmapTexture:Vl,collisionBox:Hl,collisionCircle:fl,debug:As,fill:Gl,fillOutline:Ll,fillOutlinePattern:uu,fillPattern:Yl,fillExtrusion:cl,fillExtrusionPattern:df,hillshadePrepare:fs,hillshade:zf,line:Mu,lineGradient:Pl,linePattern:Wl,lineSDF:hl,raster:Xl,symbolIcon:Wu,symbolSDF:Xu,symbolTextAndIcon:Ff}),vl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};vl.prototype.bind=function(W,de,J,ge,Ee,Pe,Ze,ft){this.context=W;for(var At=this.boundPaintVertexBuffers.length!==ge.length,Vt=0;!At&&Vt<ge.length;Vt++)this.boundPaintVertexBuffers[Vt]!==ge[Vt]&&(At=!0);var $t=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==J||At||this.boundIndexBuffer!==Ee||this.boundVertexOffset!==Pe||this.boundDynamicVertexBuffer!==Ze||this.boundDynamicVertexBuffer2!==ft;!W.extVertexArrayObject||$t?this.freshBind(de,J,ge,Ee,Pe,Ze,ft):(W.bindVertexArrayOES.set(this.vao),Ze&&Ze.bind(),Ee&&Ee.dynamicDraw&&Ee.bind(),ft&&ft.bind())},vl.prototype.freshBind=function(W,de,J,ge,Ee,Pe,Ze){var ft,At=W.numAttributes,Vt=this.context,$t=Vt.gl;if(Vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Vt.extVertexArrayObject.createVertexArrayOES(),Vt.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=W,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=ge,this.boundVertexOffset=Ee,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=Ze;else{ft=Vt.currentNumAttributes||0;for(var ir=At;ir<ft;ir++)$t.disableVertexAttribArray(ir)}de.enableAttributes($t,W);for(var Sr=0,Br=J;Sr<Br.length;Sr+=1){var Vr=Br[Sr];Vr.enableAttributes($t,W)}Pe&&Pe.enableAttributes($t,W),Ze&&Ze.enableAttributes($t,W),de.bind(),de.setVertexAttribPointers($t,W,Ee);for(var Nr=0,Kr=J;Nr<Kr.length;Nr+=1){var hn=Kr[Nr];hn.bind(),hn.setVertexAttribPointers($t,W,Ee)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers($t,W,Ee)),ge&&ge.bind(),Ze&&(Ze.bind(),Ze.setVertexAttribPointers($t,W,Ee)),Vt.currentNumAttributes=At},vl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var as=function(W,de,J,ge,Ee){var Pe=W.gl;this.program=Pe.createProgram();var Ze=J?J.defines():[];Ee&&Ze.push("#define OVERDRAW_INSPECTOR;");var ft=Ze.concat(Ts.fragmentSource,de.fragmentSource).join(`
`),At=Ze.concat(Ts.vertexSource,de.vertexSource).join(`
`),Vt=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource(Vt,ft),Pe.compileShader(Vt),Pe.attachShader(this.program,Vt);var $t=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource($t,At),Pe.compileShader($t),Pe.attachShader(this.program,$t);for(var ir=J?J.layoutAttributes:[],Sr=0;Sr<ir.length;Sr++)Pe.bindAttribLocation(this.program,Sr,ir[Sr].name);Pe.linkProgram(this.program),Pe.deleteShader($t),Pe.deleteShader(Vt),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Br={},Vr=0;Vr<this.numAttributes;Vr++){var Nr=Pe.getActiveAttrib(this.program,Vr);Nr&&(this.attributes[Nr.name]=Pe.getAttribLocation(this.program,Nr.name))}for(var Kr=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),hn=0;hn<Kr;hn++){var Sn=Pe.getActiveUniform(this.program,hn);Sn&&(Br[Sn.name]=Pe.getUniformLocation(this.program,Sn.name))}this.fixedUniforms=ge(W,Br),this.binderUniforms=J?J.getUniforms(W,Br):[]};as.prototype.draw=function(W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr,Br,Vr,Nr){var Kr,hn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(J),W.setStencilMode(ge),W.setColorMode(Ee),W.setCullFace(Pe);for(var Sn in this.fixedUniforms)this.fixedUniforms[Sn].set(Ze[Sn]);Br&&Br.setUniforms(W,this.binderUniforms,ir,{zoom:Sr});for(var On=(Kr={},Kr[hn.LINES]=2,Kr[hn.TRIANGLES]=3,Kr[hn.LINE_STRIP]=1,Kr)[de],Jn=0,ea=$t.get();Jn<ea.length;Jn+=1){var $n=ea[Jn],va=$n.vaos||($n.vaos={}),_a=va[ft]||(va[ft]=new vl);_a.bind(W,this,At,Br?Br.getPaintVertexBuffers():[],Vt,$n.vertexOffset,Vr,Nr),hn.drawElements(de,$n.primitiveLength*On,hn.UNSIGNED_SHORT,$n.primitiveOffset*On*2)}}};function cs(ve,W,de){var J=1/da(de,1,W.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ee=de.tileSize*Math.pow(2,W.transform.tileZoom)/ge,Pe=Ee*(de.tileID.canonical.x+de.tileID.wrap*ge),Ze=Ee*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[J,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Pe>>16,Ze>>16],u_pixel_coord_lower:[Pe&65535,Ze&65535]}}function jl(ve,W,de,J){var ge=de.imageManager.getPattern(ve.from.toString()),Ee=de.imageManager.getPattern(ve.to.toString()),Pe=de.imageManager.getPixelSize(),Ze=Pe.width,ft=Pe.height,At=Math.pow(2,J.tileID.overscaledZ),Vt=J.tileSize*Math.pow(2,de.transform.tileZoom)/At,$t=Vt*(J.tileID.canonical.x+J.tileID.wrap*At),ir=Vt*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ee.tl,u_pattern_br_b:Ee.br,u_texsize:[Ze,ft],u_mix:W.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ee.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/da(J,1,de.transform.tileZoom),u_pixel_coord_upper:[$t>>16,ir>>16],u_pixel_coord_lower:[$t&65535,ir&65535]}}var uo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},ju=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(ve,W.u_height_factor),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},hs=function(ve,W,de,J){var ge=W.style.light,Ee=ge.properties.get("position"),Pe=[Ee.x,Ee.y,Ee.z],Ze=e.create$1();ge.properties.get("anchor")==="viewport"&&e.fromRotation(Ze,-W.transform.angle),e.transformMat3(Pe,Pe,Ze);var ft=ge.properties.get("color");return{u_matrix:ve,u_lightpos:Pe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+de,u_opacity:J}},Ks=function(ve,W,de,J,ge,Ee,Pe){return e.extend(hs(ve,W,de,J),cs(Ee,W,Pe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Pe.tileSize/8})},Js=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},zs=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},vs=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world)}},Vi=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Co=function(ve){return{u_matrix:ve}},ps=function(ve,W,de,J){return e.extend(Co(ve),cs(de,W,J))},Zu=function(ve,W){return{u_matrix:ve,u_world:W}},fu=function(ve,W,de,J,ge){return e.extend(ps(ve,W,de,J),{u_world:ge})},Ku=function(ve,W){return{u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ve,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},xt=function(ve,W,de,J){var ge=ve.transform,Ee,Pe;if(J.paint.get("circle-pitch-alignment")==="map"){var Ze=da(de,1,ge.zoom);Ee=!0,Pe=[Ze,Ze]}else Ee=!1,Pe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(J.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(W.posMatrix,de,J.paint.get("circle-translate"),J.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ee,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Pe}},It=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ve,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ve,W.u_overscale_factor)}},nr=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ve,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ve,W.u_viewport_size)}},Jt=function(ve,W,de){var J=da(de,1,W.zoom),ge=Math.pow(2,W.zoom-de.tileID.overscaledZ),Ee=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:J,u_extrude_scale:[W.pixelsToGLUnits[0]/(J*ge),W.pixelsToGLUnits[1]/(J*ge)],u_overscale_factor:Ee}},Cr=function(ve,W,de){return{u_matrix:ve,u_inv_matrix:W,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},an=function(ve,W){return{u_color:new e.UniformColor(ve,W.u_color),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_overlay:new e.Uniform1i(ve,W.u_overlay),u_overlay_scale:new e.Uniform1f(ve,W.u_overlay_scale)}},dn=function(ve,W,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:W,u_overlay:0,u_overlay_scale:de}},Tn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},Cn=function(ve){return{u_matrix:ve}},Hn=function(ve,W){return{u_extrude_scale:new e.Uniform1f(ve,W.u_extrude_scale),u_intensity:new e.Uniform1f(ve,W.u_intensity),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},xn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_color_ramp:new e.Uniform1i(ve,W.u_color_ramp),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},In=function(ve,W,de,J){return{u_matrix:ve,u_extrude_scale:da(W,1,de),u_intensity:J}},Ln=function(ve,W,de,J){var ge=e.create();e.ortho(ge,0,ve.width,ve.height,0,0,1);var Ee=ve.context.gl;return{u_matrix:ge,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:de,u_color_ramp:J,u_opacity:W.paint.get("heatmap-opacity")}},Wn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_latrange:new e.Uniform2f(ve,W.u_latrange),u_light:new e.Uniform2f(ve,W.u_light),u_shadow:new e.UniformColor(ve,W.u_shadow),u_highlight:new e.UniformColor(ve,W.u_highlight),u_accent:new e.UniformColor(ve,W.u_accent)}},qn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_dimension:new e.Uniform2f(ve,W.u_dimension),u_zoom:new e.Uniform1f(ve,W.u_zoom),u_maxzoom:new e.Uniform1f(ve,W.u_maxzoom),u_unpack:new e.Uniform4f(ve,W.u_unpack)}},Oa=function(ve,W,de){var J=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ee=de.paint.get("hillshade-accent-color"),Pe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pe-=ve.transform.angle);var Ze=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:Na(ve,W.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Pe],u_shadow:J,u_highlight:ge,u_accent:Ee}},La=function(ve,W,de){var J=W.stride,ge=e.create();return e.ortho(ge,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ge,ge,[0,-e.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[J,J],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:W.getUnpackVector()}};function Na(ve,W){var de=Math.pow(2,W.canonical.z),J=W.canonical.y;return[new e.MercatorCoordinate(0,J/de).toLngLat().lat,new e.MercatorCoordinate(0,(J+1)/de).toLngLat().lat]}var Ba=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels)}},Qn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_image:new e.Uniform1i(ve,W.u_image)}},pa=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_image:new e.Uniform1i(ve,W.u_image),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Ya=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ve,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ve,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ve,W.u_sdfgamma),u_image:new e.Uniform1i(ve,W.u_image),u_tex_y_a:new e.Uniform1f(ve,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ve,W.u_tex_y_b),u_mix:new e.Uniform1f(ve,W.u_mix)}},Qa=function(ve,W,de){var J=ve.transform;return{u_matrix:oi(ve,W,de),u_ratio:1/da(W,1,J.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}},pi=function(ve,W,de){return e.extend(Qa(ve,W,de),{u_image:0})},di=function(ve,W,de,J){var ge=ve.transform,Ee=Ti(W,ge);return{u_matrix:oi(ve,W,de),u_texsize:W.imageAtlasTexture.size,u_ratio:1/da(W,1,ge.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ee,J.fromScale,J.toScale],u_fade:J.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},yi=function(ve,W,de,J,ge){var Ee=ve.transform,Pe=ve.lineAtlas,Ze=Ti(W,Ee),ft=de.layout.get("line-cap")==="round",At=Pe.getDash(J.from,ft),Vt=Pe.getDash(J.to,ft),$t=At.width*ge.fromScale,ir=Vt.width*ge.toScale;return e.extend(Qa(ve,W,de),{u_patternscale_a:[Ze/$t,-At.height/2],u_patternscale_b:[Ze/ir,-Vt.height/2],u_sdfgamma:Pe.width/(Math.min($t,ir)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:At.y,u_tex_y_b:Vt.y,u_mix:ge.t})};function Ti(ve,W){return 1/da(ve,1,W.tileZoom)}function oi(ve,W,de){return ve.translatePosMatrix(W.tileID.posMatrix,W,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var mo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_tl_parent:new e.Uniform2f(ve,W.u_tl_parent),u_scale_parent:new e.Uniform1f(ve,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(ve,W.u_buffer_scale),u_fade_t:new e.Uniform1f(ve,W.u_fade_t),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image0:new e.Uniform1i(ve,W.u_image0),u_image1:new e.Uniform1i(ve,W.u_image1),u_brightness_low:new e.Uniform1f(ve,W.u_brightness_low),u_brightness_high:new e.Uniform1f(ve,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(ve,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ve,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(ve,W.u_spin_weights)}},to=function(ve,W,de,J,ge){return{u_matrix:ve,u_tl_parent:W,u_scale_parent:de,u_buffer_scale:1,u_fade_t:J.mix,u_opacity:J.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:mi(ge.paint.get("raster-saturation")),u_contrast_factor:ga(ge.paint.get("raster-contrast")),u_spin_weights:Ka(ge.paint.get("raster-hue-rotate"))}};function Ka(ve){ve*=Math.PI/180;var W=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*W-de+1)/3,(Math.sqrt(3)*W-de+1)/3]}function ga(ve){return ve>0?1/(1-ve):1+ve}function mi(ve){return ve>0?1-1/(1.001-ve):-ve}var fo=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture)}},po=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},ds=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texsize_icon:new e.Uniform2f(ve,W.u_texsize_icon),u_texture:new e.Uniform1i(ve,W.u_texture),u_texture_icon:new e.Uniform1i(ve,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},Fs=function(ve,W,de,J,ge,Ee,Pe,Ze,ft,At){var Vt=ge.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:Vt.cameraToCenterDistance,u_pitch:Vt.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:Vt.width/Vt.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ee,u_label_plane_matrix:Pe,u_coord_matrix:Ze,u_is_text:+ft,u_pitch_with_map:+J,u_texsize:At,u_texture:0}},Bo=function(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt){var $t=ge.transform;return e.extend(Fs(ve,W,de,J,ge,Ee,Pe,Ze,ft,At),{u_gamma_scale:J?Math.cos($t._pitch)*$t.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Vt})},pl=function(ve,W,de,J,ge,Ee,Pe,Ze,ft,At){return e.extend(Bo(ve,W,de,J,ge,Ee,Pe,Ze,!0,ft,!0),{u_texsize_icon:At,u_texture_icon:1})},Ms=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_color:new e.UniformColor(ve,W.u_color)}},gs=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image:new e.Uniform1i(ve,W.u_image),u_pattern_tl_a:new e.Uniform2f(ve,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ve,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ve,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ve,W.u_pattern_br_b),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_mix:new e.Uniform1f(ve,W.u_mix),u_pattern_size_a:new e.Uniform2f(ve,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ve,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(ve,W.u_scale_a),u_scale_b:new e.Uniform1f(ve,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ve,W.u_tile_units_to_pixels)}},xo=function(ve,W,de){return{u_matrix:ve,u_opacity:W,u_color:de}},cu=function(ve,W,de,J,ge,Ee){return e.extend(jl(J,Ee,de,ge),{u_matrix:ve,u_opacity:W})},Su={fillExtrusion:uo,fillExtrusionPattern:ju,fill:Js,fillPattern:zs,fillOutline:vs,fillOutlinePattern:Vi,circle:Ku,collisionBox:It,collisionCircle:nr,debug:an,clippingMask:Tn,heatmap:Hn,heatmapTexture:xn,hillshade:Wn,hillshadePrepare:qn,line:Ba,lineGradient:Qn,linePattern:pa,lineSDF:Ya,raster:mo,symbolIcon:fo,symbolSDF:po,symbolTextAndIcon:ds,background:Ms,backgroundPattern:gs},ys;function Ju(ve,W,de,J,ge,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,At=ve.useProgram("collisionBox"),Vt=[],$t=0,ir=0,Sr=0;Sr<J.length;Sr++){var Br=J[Sr],Vr=W.getTile(Br),Nr=Vr.getBucket(de);if(!!Nr){var Kr=Br.posMatrix;(ge[0]!==0||ge[1]!==0)&&(Kr=ve.translatePosMatrix(Br.posMatrix,Vr,ge,Ee));var hn=Pe?Nr.textCollisionBox:Nr.iconCollisionBox,Sn=Nr.collisionCircleArray;if(Sn.length>0){var On=e.create(),Jn=Kr;e.mul(On,Nr.placementInvProjMatrix,ve.transform.glCoordMatrix),e.mul(On,On,Nr.placementViewportMatrix),Vt.push({circleArray:Sn,circleOffset:ir,transform:Jn,invTransform:On}),$t+=Sn.length/4,ir=$t}!hn||At.draw(Ze,ft.LINES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Jt(Kr,ve.transform,Vr),de.id,hn.layoutVertexBuffer,hn.indexBuffer,hn.segments,null,ve.transform.zoom,null,null,hn.collisionVertexBuffer)}}if(!(!Pe||!Vt.length)){var ea=ve.useProgram("collisionCircle"),$n=new e.StructArrayLayout2f1f2i16;$n.resize($t*4),$n._trim();for(var va=0,_a=0,xa=Vt;_a<xa.length;_a+=1)for(var Ma=xa[_a],Pa=0;Pa<Ma.circleArray.length/4;Pa++){var Ha=Pa*4,ni=Ma.circleArray[Ha+0],Ci=Ma.circleArray[Ha+1],li=Ma.circleArray[Ha+2],vi=Ma.circleArray[Ha+3];$n.emplace(va++,ni,Ci,li,vi,0),$n.emplace(va++,ni,Ci,li,vi,1),$n.emplace(va++,ni,Ci,li,vi,2),$n.emplace(va++,ni,Ci,li,vi,3)}(!ys||ys.length<$t*2)&&(ys=hu($t));for(var Ua=Ze.createIndexBuffer(ys,!0),Li=Ze.createVertexBuffer($n,e.collisionCircleLayout.members,!0),zi=0,Bi=Vt;zi<Bi.length;zi+=1){var bi=Bi[zi],Zi=Cr(bi.transform,bi.invTransform,ve.transform);ea.draw(Ze,ft.TRIANGLES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Zi,de.id,Li,Ua,e.SegmentVector.simpleSegment(0,bi.circleOffset*2,bi.circleArray.length,bi.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Li.destroy(),Ua.destroy()}}function hu(ve){var W=ve*2,de=new e.StructArrayLayout3ui6;de.resize(W),de._trim();for(var J=0;J<W;J++){var ge=J*6;de.uint16[ge+0]=J*4+0,de.uint16[ge+1]=J*4+1,de.uint16[ge+2]=J*4+2,de.uint16[ge+3]=J*4+2,de.uint16[ge+4]=J*4+3,de.uint16[ge+5]=J*4+0}return de}var Lc=e.identity(new Float32Array(16));function gf(ve,W,de,J,ge){if(ve.renderPass==="translucent"){var Ee=kr.disabled,Pe=ve.colorModeForRenderPass(),Ze=de.layout.get("text-variable-anchor");Ze&&yf(J,ve,de,W,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&mf(ve,W,de,J,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ee,Pe),de.paint.get("text-opacity").constantOr(1)!==0&&mf(ve,W,de,J,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ee,Pe),W.map.showCollisionBoxes&&(Ju(ve,W,de,J,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),Ju(ve,W,de,J,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function Qu(ve,W,de,J,ge,Ee){var Pe=e.getAnchorAlignment(ve),Ze=Pe.horizontalAlign,ft=Pe.verticalAlign,At=-(Ze-.5)*W,Vt=-(ft-.5)*de,$t=e.evaluateVariableOffset(ve,J);return new e.Point((At/ge+$t[0])*Ee,(Vt/ge+$t[1])*Ee)}function yf(ve,W,de,J,ge,Ee,Pe){for(var Ze=W.transform,ft=ge==="map",At=Ee==="map",Vt=0,$t=ve;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=J.getTile(ir),Br=Sr.getBucket(de);if(!(!Br||!Br.text||!Br.text.segments.get().length)){var Vr=Br.textSizeData,Nr=e.evaluateSizeForZoom(Vr,Ze.zoom),Kr=da(Sr,1,W.transform.zoom),hn=jr(ir.posMatrix,At,ft,W.transform,Kr),Sn=de.layout.get("icon-text-fit")!=="none"&&Br.hasIconData();if(Nr){var On=Math.pow(2,Ze.zoom-Sr.tileID.overscaledZ);Os(Br,ft,At,Pe,e.symbolSize,Ze,hn,ir.posMatrix,On,Nr,Sn)}}}}function Os(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt){var $t=ve.text.placedSymbolArray,ir=ve.text.dynamicLayoutVertexArray,Sr=ve.icon.dynamicLayoutVertexArray,Br={};ir.clear();for(var Vr=0;Vr<$t.length;Vr++){var Nr=$t.get(Vr),Kr=ve.allowVerticalPlacement&&!Nr.placedOrientation,hn=!Nr.hidden&&Nr.crossTileID&&!Kr?J[Nr.crossTileID]:null;if(!hn)ca(Nr.numGlyphs,ir);else{var Sn=new e.Point(Nr.anchorX,Nr.anchorY),On=kn(Sn,de?Ze:Pe),Jn=ta(Ee.cameraToCenterDistance,On.signedDistanceFromCamera),ea=ge.evaluateSizeForFeature(ve.textSizeData,At,Nr)*Jn/e.ONE_EM;de&&(ea*=ve.tilePixelRatio/ft);for(var $n=hn.width,va=hn.height,_a=hn.anchor,xa=hn.textOffset,Ma=hn.textBoxScale,Pa=Qu(_a,$n,va,xa,Ma,ea),Ha=de?kn(Sn.add(Pa),Pe).point:On.point.add(W?Pa.rotate(-Ee.angle):Pa),ni=ve.allowVerticalPlacement&&Nr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Ci=0;Ci<Nr.numGlyphs;Ci++)e.addDynamicAttributes(ir,Ha,ni);Vt&&Nr.associatedIconIndex>=0&&(Br[Nr.associatedIconIndex]={shiftedAnchor:Ha,angle:ni})}}if(Vt){Sr.clear();for(var li=ve.icon.placedSymbolArray,vi=0;vi<li.length;vi++){var Ua=li.get(vi);if(Ua.hidden)ca(Ua.numGlyphs,Sr);else{var Li=Br[vi];if(!Li)ca(Ua.numGlyphs,Sr);else for(var zi=0;zi<Ua.numGlyphs;zi++)e.addDynamicAttributes(Sr,Li.shiftedAnchor,Li.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Sr)}ve.text.dynamicLayoutVertexBuffer.updateData(ir)}function Of(ve,W,de){return de.iconsInText&&W?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function mf(ve,W,de,J,ge,Ee,Pe,Ze,ft,At,Vt,$t){for(var ir=ve.context,Sr=ir.gl,Br=ve.transform,Vr=Ze==="map",Nr=ft==="map",Kr=Vr&&de.layout.get("symbol-placement")!=="point",hn=Vr&&!Nr&&!Kr,Sn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,On=ve.depthModeForSublayer(0,or.ReadOnly),Jn=de.layout.get("text-variable-anchor"),ea=[],$n=0,va=J;$n<va.length;$n+=1){var _a=va[$n],xa=W.getTile(_a),Ma=xa.getBucket(de);if(!!Ma){var Pa=ge?Ma.text:Ma.icon;if(!(!Pa||!Pa.segments.get().length)){var Ha=Pa.programConfigurations.get(de.id),ni=ge||Ma.sdfIcons,Ci=ge?Ma.textSizeData:Ma.iconSizeData,li=Nr||Br.pitch!==0,vi=ve.useProgram(Of(ni,ge,Ma),Ha),Ua=e.evaluateSizeForZoom(Ci,Br.zoom),Li=void 0,zi=[0,0],Bi=void 0,bi=void 0,Zi=null,ii=void 0;if(ge){if(Bi=xa.glyphAtlasTexture,bi=Sr.LINEAR,Li=xa.glyphAtlasTexture.size,Ma.iconsInText){zi=xa.imageAtlasTexture.size,Zi=xa.imageAtlasTexture;var _i=Ci.kind==="composite"||Ci.kind==="camera";ii=li||ve.options.rotating||ve.options.zooming||_i?Sr.LINEAR:Sr.NEAREST}}else{var wo=de.layout.get("icon-size").constantOr(0)!==1||Ma.iconsNeedLinear;Bi=xa.imageAtlasTexture,bi=ni||ve.options.rotating||ve.options.zooming||wo||li?Sr.LINEAR:Sr.NEAREST,Li=xa.imageAtlasTexture.size}var Ho=da(xa,1,ve.transform.zoom),Kl=jr(_a.posMatrix,Nr,Vr,ve.transform,Ho),Jl=zn(_a.posMatrix,Nr,Vr,ve.transform,Ho),ku=Jn&&Ma.hasTextData(),Eu=de.layout.get("icon-text-fit")!=="none"&&ku&&Ma.hasIconData();Kr&&Aa(Ma,_a.posMatrix,ve,ge,Kl,Jl,Nr,At);var rf=ve.translatePosMatrix(_a.posMatrix,xa,Ee,Pe),Cu=Kr||ge&&Jn||Eu?Lc:Kl,$s=ve.translatePosMatrix(Jl,xa,Ee,Pe,!0),kf=ni&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Es=void 0;ni?Ma.iconsInText?Es=pl(Ci.kind,Ua,hn,Nr,ve,rf,Cu,$s,Li,zi):Es=Bo(Ci.kind,Ua,hn,Nr,ve,rf,Cu,$s,ge,Li,!0):Es=Fs(Ci.kind,Ua,hn,Nr,ve,rf,Cu,$s,ge,Li);var Rl={program:vi,buffers:Pa,uniformValues:Es,atlasTexture:Bi,atlasTextureIcon:Zi,atlasInterpolation:bi,atlasInterpolationIcon:ii,isSDF:ni,hasHalo:kf};if(Sn)for(var Lu=Pa.segments.get(),du=0,Pu=Lu;du<Pu.length;du+=1){var oh=Pu[du];ea.push({segments:new e.SegmentVector([oh]),sortKey:oh.sortKey,state:Rl})}else ea.push({segments:Pa.segments,sortKey:0,state:Rl})}}}Sn&&ea.sort(function(sh,lh){return sh.sortKey-lh.sortKey});for(var Nf=0,xs=ea;Nf<xs.length;Nf+=1){var zc=xs[Nf],Ns=zc.state;if(ir.activeTexture.set(Sr.TEXTURE0),Ns.atlasTexture.bind(Ns.atlasInterpolation,Sr.CLAMP_TO_EDGE),Ns.atlasTextureIcon&&(ir.activeTexture.set(Sr.TEXTURE1),Ns.atlasTextureIcon&&Ns.atlasTextureIcon.bind(Ns.atlasInterpolationIcon,Sr.CLAMP_TO_EDGE)),Ns.isSDF){var Fc=Ns.uniformValues;Ns.hasHalo&&(Fc.u_is_halo=1,xf(Ns.buffers,zc.segments,de,ve,Ns.program,On,Vt,$t,Fc)),Fc.u_is_halo=0}xf(Ns.buffers,zc.segments,de,ve,Ns.program,On,Vt,$t,Ns.uniformValues)}}function xf(ve,W,de,J,ge,Ee,Pe,Ze,ft){var At=J.context,Vt=At.gl;ge.draw(At,Vt.TRIANGLES,Ee,Pe,Ze,Xe.disabled,ft,de.id,ve.layoutVertexBuffer,ve.indexBuffer,W,de.paint,J.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function Uo(ve,W,de,J){if(ve.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ee=de.paint.get("circle-stroke-width"),Pe=de.paint.get("circle-stroke-opacity"),Ze=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ee.constantOr(1)===0||Pe.constantOr(1)===0))){for(var ft=ve.context,At=ft.gl,Vt=ve.depthModeForSublayer(0,or.ReadOnly),$t=kr.disabled,ir=ve.colorModeForRenderPass(),Sr=[],Br=0;Br<J.length;Br++){var Vr=J[Br],Nr=W.getTile(Vr),Kr=Nr.getBucket(de);if(!!Kr){var hn=Kr.programConfigurations.get(de.id),Sn=ve.useProgram("circle",hn),On=Kr.layoutVertexBuffer,Jn=Kr.indexBuffer,ea=xt(ve,Vr,Nr,de),$n={programConfiguration:hn,program:Sn,layoutVertexBuffer:On,indexBuffer:Jn,uniformValues:ea};if(Ze)for(var va=Kr.segments.get(),_a=0,xa=va;_a<xa.length;_a+=1){var Ma=xa[_a];Sr.push({segments:new e.SegmentVector([Ma]),sortKey:Ma.sortKey,state:$n})}else Sr.push({segments:Kr.segments,sortKey:0,state:$n})}}Ze&&Sr.sort(function(bi,Zi){return bi.sortKey-Zi.sortKey});for(var Pa=0,Ha=Sr;Pa<Ha.length;Pa+=1){var ni=Ha[Pa],Ci=ni.state,li=Ci.programConfiguration,vi=Ci.program,Ua=Ci.layoutVertexBuffer,Li=Ci.indexBuffer,zi=Ci.uniformValues,Bi=ni.segments;vi.draw(ft,At.TRIANGLES,Vt,$t,ir,Xe.disabled,zi,de.id,Ua,Li,Bi,de.paint,ve.transform.zoom,li)}}}}function bf(ve,W,de,J){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ge=ve.context,Ee=ge.gl,Pe=kr.disabled,Ze=new we([Ee.ONE,Ee.ONE],e.Color.transparent,[!0,!0,!0,!0]);Jf(ge,ve,de),ge.clear({color:e.Color.transparent});for(var ft=0;ft<J.length;ft++){var At=J[ft];if(!W.hasRenderableParent(At)){var Vt=W.getTile(At),$t=Vt.getBucket(de);if(!!$t){var ir=$t.programConfigurations.get(de.id),Sr=ve.useProgram("heatmap",ir),Br=ve.transform,Vr=Br.zoom;Sr.draw(ge,Ee.TRIANGLES,or.disabled,Pe,Ze,Xe.disabled,In(At.posMatrix,Vt,Vr,de.paint.get("heatmap-intensity")),de.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,de.paint,ve.transform.zoom,ir)}}}ge.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),$u(ve,de))}function Jf(ve,W,de){var J=ve.gl;ve.activeTexture.set(J.TEXTURE1),ve.viewport.set([0,0,W.width/4,W.height/4]);var ge=de.heatmapFbo;if(ge)J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),ve.bindFramebuffer.set(ge.framebuffer);else{var Ee=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ee),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ge=de.heatmapFbo=ve.createFramebuffer(W.width/4,W.height/4,!1),Ss(ve,W,Ee,ge)}}function Ss(ve,W,de,J){var ge=ve.gl,Ee=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,W.width/4,W.height/4,0,ge.RGBA,Ee,null),J.colorAttachment.set(de)}function $u(ve,W){var de=ve.context,J=de.gl,ge=W.heatmapFbo;if(!!ge){de.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set(J.TEXTURE1);var Ee=W.colorRampTexture;Ee||(Ee=W.colorRampTexture=new e.Texture(de,W.colorRamp,J.RGBA)),Ee.bind(J.LINEAR,J.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,J.TRIANGLES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Ln(ve,W,0,1),W.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,W.paint,ve.transform.zoom)}}function qu(ve,W,de,J){if(ve.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ee=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ee.constantOr(1)===0)){var Pe=ve.depthModeForSublayer(0,or.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=de.paint.get("line-dasharray"),At=de.paint.get("line-pattern"),Vt=At.constantOr(1),$t=de.paint.get("line-gradient"),ir=de.getCrossfadeParameters(),Sr=Vt?"linePattern":ft?"lineSDF":$t?"lineGradient":"line",Br=ve.context,Vr=Br.gl,Nr=!0;if($t){Br.activeTexture.set(Vr.TEXTURE0);var Kr=de.gradientTexture;if(!de.gradient)return;Kr||(Kr=de.gradientTexture=new e.Texture(Br,de.gradient,Vr.RGBA)),Kr.bind(Vr.LINEAR,Vr.CLAMP_TO_EDGE)}for(var hn=0,Sn=J;hn<Sn.length;hn+=1){var On=Sn[hn],Jn=W.getTile(On);if(!(Vt&&!Jn.patternsLoaded())){var ea=Jn.getBucket(de);if(!!ea){var $n=ea.programConfigurations.get(de.id),va=ve.context.program.get(),_a=ve.useProgram(Sr,$n),xa=Nr||_a.program!==va,Ma=At.constantOr(null);if(Ma&&Jn.imageAtlas){var Pa=Jn.imageAtlas,Ha=Pa.patternPositions[Ma.to.toString()],ni=Pa.patternPositions[Ma.from.toString()];Ha&&ni&&$n.setConstantPatternPositions(Ha,ni)}var Ci=Vt?di(ve,Jn,de,ir):ft?yi(ve,Jn,de,ft,ir):$t?pi(ve,Jn,de):Qa(ve,Jn,de);Vt?(Br.activeTexture.set(Vr.TEXTURE0),Jn.imageAtlasTexture.bind(Vr.LINEAR,Vr.CLAMP_TO_EDGE),$n.updatePaintBuffers(ir)):ft&&(xa||ve.lineAtlas.dirty)&&(Br.activeTexture.set(Vr.TEXTURE0),ve.lineAtlas.bind(Br)),_a.draw(Br,Vr.TRIANGLES,Pe,ve.stencilModeForClipping(On),Ze,Xe.disabled,Ci,de.id,ea.layoutVertexBuffer,ea.indexBuffer,ea.segments,de.paint,ve.transform.zoom,$n),Nr=!1}}}}}}function _f(ve,W,de,J){var ge=de.paint.get("fill-color"),Ee=de.paint.get("fill-opacity");if(Ee.constantOr(1)!==0){var Pe=ve.colorModeForRenderPass(),Ze=de.paint.get("fill-pattern"),ft=ve.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ge.constantOr(e.Color.transparent).a===1&&Ee.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ft){var At=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?or.ReadWrite:or.ReadOnly);ze(ve,W,de,J,At,Pe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var Vt=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,or.ReadOnly);ze(ve,W,de,J,Vt,Pe,!0)}}}function ze(ve,W,de,J,ge,Ee,Pe){var Ze=ve.context.gl,ft=de.paint.get("fill-pattern"),At=ft&&ft.constantOr(1),Vt=de.getCrossfadeParameters(),$t,ir,Sr,Br,Vr;Pe?(ir=At&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$t=Ze.LINES):(ir=At?"fillPattern":"fill",$t=Ze.TRIANGLES);for(var Nr=0,Kr=J;Nr<Kr.length;Nr+=1){var hn=Kr[Nr],Sn=W.getTile(hn);if(!(At&&!Sn.patternsLoaded())){var On=Sn.getBucket(de);if(!!On){var Jn=On.programConfigurations.get(de.id),ea=ve.useProgram(ir,Jn);At&&(ve.context.activeTexture.set(Ze.TEXTURE0),Sn.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Jn.updatePaintBuffers(Vt));var $n=ft.constantOr(null);if($n&&Sn.imageAtlas){var va=Sn.imageAtlas,_a=va.patternPositions[$n.to.toString()],xa=va.patternPositions[$n.from.toString()];_a&&xa&&Jn.setConstantPatternPositions(_a,xa)}var Ma=ve.translatePosMatrix(hn.posMatrix,Sn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Pe)Br=On.indexBuffer,Vr=On.segments,Sr=At?ps(Ma,ve,Vt,Sn):Co(Ma);else{Br=On.indexBuffer2,Vr=On.segments2;var Pa=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Sr=ir==="fillOutlinePattern"&&At?fu(Ma,ve,Vt,Sn,Pa):Zu(Ma,Pa)}ea.draw(ve.context,$t,ge,ve.stencilModeForClipping(hn),Ee,Xe.disabled,Sr,de.id,On.layoutVertexBuffer,Br,Vr,de.paint,ve.transform.zoom,Jn)}}}}function We(ve,W,de,J){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&ve.renderPass==="translucent"){var Ee=new or(ve.context.gl.LEQUAL,or.ReadWrite,ve.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Pe=ve.colorModeForRenderPass();nt(ve,W,de,J,Ee,kr.disabled,Pe)}else nt(ve,W,de,J,Ee,kr.disabled,we.disabled),nt(ve,W,de,J,Ee,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,W,de,J,ge,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,At=de.paint.get("fill-extrusion-pattern"),Vt=At.constantOr(1),$t=de.getCrossfadeParameters(),ir=de.paint.get("fill-extrusion-opacity"),Sr=0,Br=J;Sr<Br.length;Sr+=1){var Vr=Br[Sr],Nr=W.getTile(Vr),Kr=Nr.getBucket(de);if(!!Kr){var hn=Kr.programConfigurations.get(de.id),Sn=ve.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",hn);Vt&&(ve.context.activeTexture.set(ft.TEXTURE0),Nr.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),hn.updatePaintBuffers($t));var On=At.constantOr(null);if(On&&Nr.imageAtlas){var Jn=Nr.imageAtlas,ea=Jn.patternPositions[On.to.toString()],$n=Jn.patternPositions[On.from.toString()];ea&&$n&&hn.setConstantPatternPositions(ea,$n)}var va=ve.translatePosMatrix(Vr.posMatrix,Nr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),_a=de.paint.get("fill-extrusion-vertical-gradient"),xa=Vt?Ks(va,ve,_a,ir,Vr,$t,Nr):hs(va,ve,_a,ir);Sn.draw(Ze,Ze.gl.TRIANGLES,ge,Ee,Pe,Xe.backCCW,xa,de.id,Kr.layoutVertexBuffer,Kr.indexBuffer,Kr.segments,de.paint,ve.transform.zoom,hn)}}}function lt(ve,W,de,J){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ge=ve.context,Ee=W.getSource().maxzoom,Pe=ve.depthModeForSublayer(0,or.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=ve.renderPass==="translucent"?ve.stencilConfigForOverlap(J):[{},J],At=ft[0],Vt=ft[1],$t=0,ir=Vt;$t<ir.length;$t+=1){var Sr=ir[$t],Br=W.getTile(Sr);Br.needsHillshadePrepare&&ve.renderPass==="offscreen"?bt(ve,Br,de,Ee,Pe,kr.disabled,Ze):ve.renderPass==="translucent"&&_t(ve,Br,de,Pe,At[Sr.overscaledZ],Ze)}ge.viewport.set([0,0,ve.width,ve.height])}}function _t(ve,W,de,J,ge,Ee){var Pe=ve.context,Ze=Pe.gl,ft=W.fbo;if(!!ft){var At=ve.useProgram("hillshade");Pe.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,ft.colorAttachment.get());var Vt=Oa(ve,W,de);At.draw(Pe,Ze.TRIANGLES,J,ge,Ee,Xe.disabled,Vt,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function bt(ve,W,de,J,ge,Ee,Pe){var Ze=ve.context,ft=Ze.gl,At=W.dem;if(At&&At.data){var Vt=At.dim,$t=At.stride,ir=At.getPixels();if(Ze.activeTexture.set(ft.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||ve.getTileTexture($t),W.demTexture){var Sr=W.demTexture;Sr.update(ir,{premultiply:!1}),Sr.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture(Ze,ir,ft.RGBA,{premultiply:!1}),W.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ze.activeTexture.set(ft.TEXTURE0);var Br=W.fbo;if(!Br){var Vr=new e.Texture(Ze,{width:Vt,height:Vt,data:null},ft.RGBA);Vr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Br=W.fbo=Ze.createFramebuffer(Vt,Vt,!0),Br.colorAttachment.set(Vr.texture)}Ze.bindFramebuffer.set(Br.framebuffer),Ze.viewport.set([0,0,Vt,Vt]),ve.useProgram("hillshadePrepare").draw(Ze,ft.TRIANGLES,ge,Ee,Pe,Xe.disabled,La(W.tileID,At,J),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function Tt(ve,W,de,J){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!J.length)for(var ge=ve.context,Ee=ge.gl,Pe=W.getSource(),Ze=ve.useProgram("raster"),ft=ve.colorModeForRenderPass(),At=Pe instanceof K?[{},J]:ve.stencilConfigForOverlap(J),Vt=At[0],$t=At[1],ir=$t[$t.length-1].overscaledZ,Sr=!ve.options.moving,Br=0,Vr=$t;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=ve.depthModeForSublayer(Nr.overscaledZ-ir,de.paint.get("raster-opacity")===1?or.ReadWrite:or.ReadOnly,Ee.LESS),hn=W.getTile(Nr),Sn=ve.transform.calculatePosMatrix(Nr.toUnwrapped(),Sr);hn.registerFadeDuration(de.paint.get("raster-fade-duration"));var On=W.findLoadedParent(Nr,0),Jn=qt(hn,On,W,de,ve.transform),ea=void 0,$n=void 0,va=de.paint.get("raster-resampling")==="nearest"?Ee.NEAREST:Ee.LINEAR;ge.activeTexture.set(Ee.TEXTURE0),hn.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ee.TEXTURE1),On?(On.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ea=Math.pow(2,On.tileID.overscaledZ-hn.tileID.overscaledZ),$n=[hn.tileID.canonical.x*ea%1,hn.tileID.canonical.y*ea%1]):hn.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);var _a=to(Sn,$n||[0,0],ea||1,Jn,de);Pe instanceof K?Ze.draw(ge,Ee.TRIANGLES,Kr,kr.disabled,ft,Xe.disabled,_a,de.id,Pe.boundsBuffer,ve.quadTriangleIndexBuffer,Pe.boundsSegments):Ze.draw(ge,Ee.TRIANGLES,Kr,Vt[Nr.overscaledZ],ft,Xe.disabled,_a,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function qt(ve,W,de,J,ge){var Ee=J.paint.get("raster-fade-duration");if(Ee>0){var Pe=e.browser.now(),Ze=(Pe-ve.timeAdded)/Ee,ft=W?(Pe-W.timeAdded)/Ee:-1,At=de.getSource(),Vt=ge.coveringZoomLevel({tileSize:At.tileSize,roundZoom:At.roundZoom}),$t=!W||Math.abs(W.tileID.overscaledZ-Vt)>Math.abs(ve.tileID.overscaledZ-Vt),ir=$t&&ve.refreshedUponExpiration?1:e.clamp($t?Ze:1-ft,0,1);return ve.refreshedUponExpiration&&Ze>=1&&(ve.refreshedUponExpiration=!1),W?{opacity:1,mix:1-ir}:{opacity:ir,mix:0}}else return{opacity:1,mix:0}}function sr(ve,W,de){var J=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ee=ve.context,Pe=Ee.gl,Ze=ve.transform,ft=Ze.tileSize,At=de.paint.get("background-pattern");if(!ve.isPatternMissing(At)){var Vt=!At&&J.a===1&&ge===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===Vt){var $t=kr.disabled,ir=ve.depthModeForSublayer(0,Vt==="opaque"?or.ReadWrite:or.ReadOnly),Sr=ve.colorModeForRenderPass(),Br=ve.useProgram(At?"backgroundPattern":"background"),Vr=Ze.coveringTiles({tileSize:ft});At&&(Ee.activeTexture.set(Pe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Nr=de.getCrossfadeParameters(),Kr=0,hn=Vr;Kr<hn.length;Kr+=1){var Sn=hn[Kr],On=ve.transform.calculatePosMatrix(Sn.toUnwrapped()),Jn=At?cu(On,ge,ve,At,{tileID:Sn,tileSize:ft},Nr):xo(On,ge,J);Br.draw(Ee,Pe.TRIANGLES,ir,$t,Sr,Xe.disabled,Jn,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var Qt=new e.Color(1,0,0,1),fr=new e.Color(0,1,0,1),Er=new e.Color(0,0,1,1),Hr=new e.Color(1,0,1,1),en=new e.Color(0,1,1,1);function _n(ve){var W=ve.transform.padding,de=3;Zn(ve,ve.transform.height-(W.top||0),de,Qt),Zn(ve,W.bottom||0,de,fr),ma(ve,W.left||0,de,Er),ma(ve,ve.transform.width-(W.right||0),de,Hr);var J=ve.transform.centerPoint;Pn(ve,J.x,ve.transform.height-J.y,en)}function Pn(ve,W,de,J){var ge=20,Ee=2;ba(ve,W-Ee/2,de-ge/2,Ee,ge,J),ba(ve,W-ge/2,de-Ee/2,ge,Ee,J)}function Zn(ve,W,de,J){ba(ve,0,W+de/2,ve.transform.width,de,J)}function ma(ve,W,de,J){ba(ve,W-de/2,0,de,ve.transform.height,J)}function ba(ve,W,de,J,ge,Ee){var Pe=ve.context,Ze=Pe.gl;Ze.enable(Ze.SCISSOR_TEST),Ze.scissor(W*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio,J*e.browser.devicePixelRatio,ge*e.browser.devicePixelRatio),Pe.clear({color:Ee}),Ze.disable(Ze.SCISSOR_TEST)}function Za(ve,W,de){for(var J=0;J<de.length;J++)Wa(ve,W,de[J])}function Wa(ve,W,de){var J=ve.context,ge=J.gl,Ee=de.posMatrix,Pe=ve.useProgram("debug"),Ze=or.disabled,ft=kr.disabled,At=ve.colorModeForRenderPass(),Vt="$debug";J.activeTexture.set(ge.TEXTURE0),ve.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Pe.draw(J,ge.LINE_STRIP,Ze,ft,At,Xe.disabled,dn(Ee,e.Color.red),Vt,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var $t=W.getTileByID(de.key).latestRawTileData,ir=$t&&$t.byteLength||0,Sr=Math.floor(ir/1024),Br=W.getTile(de).tileSize,Vr=512/Math.min(Br,512)*(de.overscaledZ/ve.transform.zoom)*.5,Nr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Nr+=" => "+de.overscaledZ);var Kr=Nr+" "+Sr+"kb";ei(ve,Kr),Pe.draw(J,ge.TRIANGLES,Ze,ft,we.alphaBlended,Xe.disabled,dn(Ee,e.Color.transparent,Vr),Vt,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ei(ve,W){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,J=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(W,5,5),ge.strokeText(W,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE)}function fi(ve,W,de){var J=ve.context,ge=de.implementation;if(ve.renderPass==="offscreen"){var Ee=ge.prerender;Ee&&(ve.setCustomLayerDefaults(),J.setColorMode(ve.colorModeForRenderPass()),Ee.call(ge,J.gl,ve.transform.customLayerMatrix()),J.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),J.setColorMode(ve.colorModeForRenderPass()),J.setStencilMode(kr.disabled);var Pe=ge.renderingMode==="3d"?new or(ve.context.gl.LEQUAL,or.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,or.ReadOnly);J.setDepthMode(Pe),ge.render(J.gl,ve.transform.customLayerMatrix()),J.setDirty(),ve.setBaseState(),J.bindFramebuffer.set(null)}}var oo={symbol:gf,circle:Uo,heatmap:bf,line:qu,fill:_f,"fill-extrusion":We,hillshade:lt,raster:Tt,background:sr,debug:Za,custom:fi},ri=function(W,de){this.context=new $e(W),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ls,this.gpuTimers={}};ri.prototype.resize=function(W,de){if(this.width=W*e.browser.devicePixelRatio,this.height=de*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,ge=this.style._order;J<ge.length;J+=1){var Ee=ge[J];this.style._layers[Ee].resize()}},ri.prototype.setup=function(){var W=this.context,de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(e.EXTENT,0),de.emplaceBack(0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(de,Ml.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var J=new e.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(e.EXTENT,0),J.emplaceBack(0,e.EXTENT),J.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer(J,Ml.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ge=new e.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(e.EXTENT,0,e.EXTENT,0),ge.emplaceBack(0,e.EXTENT,0,e.EXTENT),ge.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(ge,V.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ee=new e.StructArrayLayout2i4;Ee.emplaceBack(0,0),Ee.emplaceBack(1,0),Ee.emplaceBack(0,1),Ee.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Ee,Ml.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Pe=new e.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Pe);var Ze=new e.StructArrayLayout3ui6;Ze.emplaceBack(0,1,2),Ze.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Ze),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new kr({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},ri.prototype.clearStencil=function(){var W=this.context,de=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=e.create();e.ortho(J,0,this.width,this.height,0,0,1),e.scale(J,J,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,de.TRIANGLES,or.disabled,this.stencilClearMode,we.disabled,Xe.disabled,Cn(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ri.prototype._renderTileClippingMasks=function(W,de){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!de||!de.length)){this.currentStencilSource=W.source;var J=this.context,ge=J.gl;this.nextStencilID+de.length>256&&this.clearStencil(),J.setColorMode(we.disabled),J.setDepthMode(or.disabled);var Ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,Ze=de;Pe<Ze.length;Pe+=1){var ft=Ze[Pe],At=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Ee.draw(J,ge.TRIANGLES,or.disabled,new kr({func:ge.ALWAYS,mask:0},At,255,ge.KEEP,ge.KEEP,ge.REPLACE),we.disabled,Xe.disabled,Cn(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ri.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,de=this.context.gl;return new kr({func:de.NOTEQUAL,mask:255},W,255,de.KEEP,de.KEEP,de.REPLACE)},ri.prototype.stencilModeForClipping=function(W){var de=this.context.gl;return new kr({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,de.KEEP,de.KEEP,de.REPLACE)},ri.prototype.stencilConfigForOverlap=function(W){var de,J=this.context.gl,ge=W.sort(function(At,Vt){return Vt.overscaledZ-At.overscaledZ}),Ee=ge[ge.length-1].overscaledZ,Pe=ge[0].overscaledZ-Ee+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var Ze={},ft=0;ft<Pe;ft++)Ze[ft+Ee]=new kr({func:J.GEQUAL,mask:255},ft+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Pe,[Ze,ge]}return[(de={},de[Ee]=kr.disabled,de),ge]},ri.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var de=8,J=1/de;return new we([W.CONSTANT_COLOR,W.ONE],new e.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?we.unblended:we.alphaBlended},ri.prototype.depthModeForSublayer=function(W,de,J){if(!this.opaquePassEnabledForLayer())return or.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new or(J||this.context.gl.LEQUAL,de,[ge,ge])},ri.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ri.prototype.render=function(W,de){var J=this;this.style=W,this.options=de,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ee=this.style.sourceCaches;for(var Pe in Ee){var Ze=Ee[Pe];Ze.used&&Ze.prepare(this.context)}var ft={},At={},Vt={};for(var $t in Ee){var ir=Ee[$t];ft[$t]=ir.getVisibleCoordinates(),At[$t]=ft[$t].slice().reverse(),Vt[$t]=ir.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Sr=0;Sr<ge.length;Sr++){var Br=ge[Sr];if(this.style._layers[Br].is3D()){this.opaquePassCutoff=Sr;break}}this.renderPass="offscreen";for(var Vr=0,Nr=ge;Vr<Nr.length;Vr+=1){var Kr=Nr[Vr],hn=this.style._layers[Kr];if(!(!hn.hasOffscreenPass()||hn.isHidden(this.transform.zoom))){var Sn=At[hn.source];hn.type!=="custom"&&!Sn.length||this.renderLayer(this,Ee[hn.source],hn,Sn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var On=this.style._layers[ge[this.currentLayer]],Jn=Ee[On.source],ea=ft[On.source];this._renderTileClippingMasks(On,ea),this.renderLayer(this,Jn,On,ea)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var $n=this.style._layers[ge[this.currentLayer]],va=Ee[$n.source],_a=($n.type==="symbol"?Vt:At)[$n.source];this._renderTileClippingMasks($n,ft[$n.source]),this.renderLayer(this,va,$n,_a)}if(this.options.showTileBoundaries){var xa,Ma,Pa=e.values(this.style._layers);Pa.forEach(function(Ha){Ha.source&&!Ha.isHidden(J.transform.zoom)&&(Ha.source!==(Ma&&Ma.id)&&(Ma=J.style.sourceCaches[Ha.source]),(!xa||xa.getSource().maxzoom<Ma.getSource().maxzoom)&&(xa=Ma))}),xa&&oo.debug(this,xa,xa.getVisibleCoordinates())}this.options.showPadding&&_n(this),this.context.setDefault()},ri.prototype.renderLayer=function(W,de,J,ge){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!ge.length||(this.id=J.id,this.gpuTimingStart(J),oo[J.type](W,de,J,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},ri.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,J=this.gpuTimers[W.id];J||(J=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),J.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,J.query)}},ri.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},ri.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},ri.prototype.queryGpuTimers=function(W){var de={};for(var J in W){var ge=W[J],Ee=this.context.extTimerQuery,Pe=Ee.getQueryObjectEXT(ge.query,Ee.QUERY_RESULT_EXT)/(1e3*1e3);Ee.deleteQueryEXT(ge.query),de[J]=Pe}return de},ri.prototype.translatePosMatrix=function(W,de,J,ge,Ee){if(!J[0]&&!J[1])return W;var Pe=Ee?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Pe){var Ze=Math.sin(Pe),ft=Math.cos(Pe);J=[J[0]*ft-J[1]*Ze,J[0]*Ze+J[1]*ft]}var At=[Ee?J[0]:da(de,J[0],this.transform.zoom),Ee?J[1]:da(de,J[1],this.transform.zoom),0],Vt=new Float32Array(16);return e.translate(Vt,W,At),Vt},ri.prototype.saveTileTexture=function(W){var de=this._tileTextures[W.size[0]];de?de.push(W):this._tileTextures[W.size[0]]=[W]},ri.prototype.getTileTexture=function(W){var de=this._tileTextures[W];return de&&de.length>0?de.pop():null},ri.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var de=this.imageManager.getPattern(W.from.toString()),J=this.imageManager.getPattern(W.to.toString());return!de||!J},ri.prototype.useProgram=function(W,de){this.cache=this.cache||{};var J=""+W+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new as(this.context,Dl[W],de,Su[W],this._showOverdrawInspector)),this.cache[J]},ri.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ri.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},ri.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},ri.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Hi=function(W,de){this.points=W,this.planes=de};Hi.fromInvProjectionMatrix=function(W,de,J){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ee=Math.pow(2,J),Pe=ge.map(function(At){return e.transformMat4([],At,W)}).map(function(At){return e.scale$1([],At,1/At[3]/de*Ee)}),Ze=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Ze.map(function(At){var Vt=e.sub([],Pe[At[0]],Pe[At[1]]),$t=e.sub([],Pe[At[2]],Pe[At[1]]),ir=e.normalize([],e.cross([],Vt,$t)),Sr=-e.dot(ir,Pe[At[1]]);return ir.concat(Sr)});return new Hi(Pe,ft)};var co=function(W,de){this.min=W,this.max=de,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};co.prototype.quadrant=function(W){for(var de=[W%2==0,W<2],J=e.clone$2(this.min),ge=e.clone$2(this.max),Ee=0;Ee<de.length;Ee++)J[Ee]=de[Ee]?this.min[Ee]:this.center[Ee],ge[Ee]=de[Ee]?this.center[Ee]:this.max[Ee];return ge[2]=this.max[2],new co(J,ge)},co.prototype.distanceX=function(W){var de=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return de-W[0]},co.prototype.distanceY=function(W){var de=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return de-W[1]},co.prototype.intersects=function(W){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,ge=0;ge<W.planes.length;ge++){for(var Ee=W.planes[ge],Pe=0,Ze=0;Ze<de.length;Ze++)Pe+=e.dot$1(Ee,de[Ze])>=0;if(Pe===0)return 0;Pe!==de.length&&(J=!1)}if(J)return 2;for(var ft=0;ft<3;ft++){for(var At=Number.MAX_VALUE,Vt=-Number.MAX_VALUE,$t=0;$t<W.points.length;$t++){var ir=W.points[$t][ft]-this.min[ft];At=Math.min(At,ir),Vt=Math.max(Vt,ir)}if(Vt<0||At>this.max[ft]-this.min[ft])return 0}return 1};var _o=function(W,de,J,ge){if(W===void 0&&(W=0),de===void 0&&(de=0),J===void 0&&(J=0),ge===void 0&&(ge=0),isNaN(W)||W<0||isNaN(de)||de<0||isNaN(J)||J<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=de,this.left=J,this.right=ge};_o.prototype.interpolate=function(W,de,J){return de.top!=null&&W.top!=null&&(this.top=e.number(W.top,de.top,J)),de.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,de.bottom,J)),de.left!=null&&W.left!=null&&(this.left=e.number(W.left,de.left,J)),de.right!=null&&W.right!=null&&(this.right=e.number(W.right,de.right,J)),this},_o.prototype.getCenter=function(W,de){var J=e.clamp((this.left+W-this.right)/2,0,W),ge=e.clamp((this.top+de-this.bottom)/2,0,de);return new e.Point(J,ge)},_o.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},_o.prototype.clone=function(){return new _o(this.top,this.bottom,this.left,this.right)},_o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xi=function(W,de,J,ge,Ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ee===void 0?!0:Ee,this._minZoom=W||0,this._maxZoom=de||22,this._minPitch=J==null?0:J,this._maxPitch=ge==null?60:ge,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _o,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ai={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xi.prototype.clone=function(){var W=new xi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},Ai.minZoom.get=function(){return this._minZoom},Ai.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},Ai.maxZoom.get=function(){return this._maxZoom},Ai.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},Ai.minPitch.get=function(){return this._minPitch},Ai.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},Ai.maxPitch.get=function(){return this._maxPitch},Ai.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},Ai.renderWorldCopies.get=function(){return this._renderWorldCopies},Ai.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},Ai.worldSize.get=function(){return this.tileSize*this.scale},Ai.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ai.size.get=function(){return new e.Point(this.width,this.height)},Ai.bearing.get=function(){return-this.angle/Math.PI*180},Ai.bearing.set=function(ve){var W=-e.wrap(ve,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ai.pitch.get=function(){return this._pitch/Math.PI*180},Ai.pitch.set=function(ve){var W=e.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},Ai.fov.get=function(){return this._fov/Math.PI*180},Ai.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},Ai.zoom.get=function(){return this._zoom},Ai.zoom.set=function(ve){var W=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},Ai.center.get=function(){return this._center},Ai.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},Ai.padding.get=function(){return this._edgeInsets.toJSON()},Ai.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},Ai.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xi.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},xi.prototype.interpolatePadding=function(W,de,J){this._unmodified=!1,this._edgeInsets.interpolate(W,de,J),this._constrain(),this._calcMatrices()},xi.prototype.coveringZoomLevel=function(W){var de=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,de)},xi.prototype.getVisibleUnwrappedCoordinates=function(W){var de=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new e.Point(0,0)),ge=this.pointCoordinate(new e.Point(this.width,0)),Ee=this.pointCoordinate(new e.Point(this.width,this.height)),Pe=this.pointCoordinate(new e.Point(0,this.height)),Ze=Math.floor(Math.min(J.x,ge.x,Ee.x,Pe.x)),ft=Math.floor(Math.max(J.x,ge.x,Ee.x,Pe.x)),At=1,Vt=Ze-At;Vt<=ft+At;Vt++)Vt!==0&&de.push(new e.UnwrappedTileID(Vt,W));return de},xi.prototype.coveringTiles=function(W){var de=this.coveringZoomLevel(W),J=de;if(W.minzoom!==void 0&&de<W.minzoom)return[];W.maxzoom!==void 0&&de>W.maxzoom&&(de=W.maxzoom);var ge=e.MercatorCoordinate.fromLngLat(this.center),Ee=Math.pow(2,de),Pe=[Ee*ge.x,Ee*ge.y,0],Ze=Hi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ft=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=de);var At=3,Vt=function(Pa){return{aabb:new co([Pa*Ee,0,0],[(Pa+1)*Ee,Ee,0]),zoom:0,x:0,y:0,wrap:Pa,fullyVisible:!1}},$t=[],ir=[],Sr=de,Br=W.reparseOverscaled?J:de;if(this._renderWorldCopies)for(var Vr=1;Vr<=3;Vr++)$t.push(Vt(-Vr)),$t.push(Vt(Vr));for($t.push(Vt(0));$t.length>0;){var Nr=$t.pop(),Kr=Nr.x,hn=Nr.y,Sn=Nr.fullyVisible;if(!Sn){var On=Nr.aabb.intersects(Ze);if(On===0)continue;Sn=On===2}var Jn=Nr.aabb.distanceX(Pe),ea=Nr.aabb.distanceY(Pe),$n=Math.max(Math.abs(Jn),Math.abs(ea)),va=At+(1<<Sr-Nr.zoom)-2;if(Nr.zoom===Sr||$n>va&&Nr.zoom>=ft){ir.push({tileID:new e.OverscaledTileID(Nr.zoom===Sr?Br:Nr.zoom,Nr.wrap,Nr.zoom,Kr,hn),distanceSq:e.sqrLen([Pe[0]-.5-Kr,Pe[1]-.5-hn])});continue}for(var _a=0;_a<4;_a++){var xa=(Kr<<1)+_a%2,Ma=(hn<<1)+(_a>>1);$t.push({aabb:Nr.aabb.quadrant(_a),zoom:Nr.zoom+1,x:xa,y:Ma,wrap:Nr.wrap,fullyVisible:Sn})}}return ir.sort(function(Pa,Ha){return Pa.distanceSq-Ha.distanceSq}).map(function(Pa){return Pa.tileID})},xi.prototype.resize=function(W,de){this.width=W,this.height=de,this.pixelsToGLUnits=[2/W,-2/de],this._constrain(),this._calcMatrices()},Ai.unmodified.get=function(){return this._unmodified},xi.prototype.zoomScale=function(W){return Math.pow(2,W)},xi.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},xi.prototype.project=function(W){var de=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(de)*this.worldSize)},xi.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},Ai.point.get=function(){return this.project(this.center)},xi.prototype.setLocationAtPoint=function(W,de){var J=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ee=this.locationCoordinate(W),Pe=new e.MercatorCoordinate(Ee.x-(J.x-ge.x),Ee.y-(J.y-ge.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},xi.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},xi.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},xi.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},xi.prototype.coordinateLocation=function(W){return W.toLngLat()},xi.prototype.pointCoordinate=function(W){var de=0,J=[W.x,W.y,0,1],ge=[W.x,W.y,1,1];e.transformMat4(J,J,this.pixelMatrixInverse),e.transformMat4(ge,ge,this.pixelMatrixInverse);var Ee=J[3],Pe=ge[3],Ze=J[0]/Ee,ft=ge[0]/Pe,At=J[1]/Ee,Vt=ge[1]/Pe,$t=J[2]/Ee,ir=ge[2]/Pe,Sr=$t===ir?0:(de-$t)/(ir-$t);return new e.MercatorCoordinate(e.number(Ze,ft,Sr)/this.worldSize,e.number(At,Vt,Sr)/this.worldSize)},xi.prototype.coordinatePoint=function(W){var de=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(de,de,this.pixelMatrix),new e.Point(de[0]/de[3],de[1]/de[3])},xi.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},xi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},xi.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xi.prototype.calculatePosMatrix=function(W,de){de===void 0&&(de=!1);var J=W.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[J])return ge[J];var Ee=W.canonical,Pe=this.worldSize/this.zoomScale(Ee.z),Ze=Ee.x+Math.pow(2,Ee.z)*W.wrap,ft=e.identity(new Float64Array(16));return e.translate(ft,ft,[Ze*Pe,Ee.y*Pe,0]),e.scale(ft,ft,[Pe/e.EXTENT,Pe/e.EXTENT,1]),e.multiply(ft,de?this.alignedProjMatrix:this.projMatrix,ft),ge[J]=new Float32Array(ft),ge[J]},xi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,de=90,J=-180,ge=180,Ee,Pe,Ze,ft,At=this.size,Vt=this._unmodified;if(this.latRange){var $t=this.latRange;W=e.mercatorYfromLat($t[1])*this.worldSize,de=e.mercatorYfromLat($t[0])*this.worldSize,Ee=de-W<At.y?At.y/(de-W):0}if(this.lngRange){var ir=this.lngRange;J=e.mercatorXfromLng(ir[0])*this.worldSize,ge=e.mercatorXfromLng(ir[1])*this.worldSize,Pe=ge-J<At.x?At.x/(ge-J):0}var Sr=this.point,Br=Math.max(Pe||0,Ee||0);if(Br){this.center=this.unproject(new e.Point(Pe?(ge+J)/2:Sr.x,Ee?(de+W)/2:Sr.y)),this.zoom+=this.scaleZoom(Br),this._unmodified=Vt,this._constraining=!1;return}if(this.latRange){var Vr=Sr.y,Nr=At.y/2;Vr-Nr<W&&(ft=W+Nr),Vr+Nr>de&&(ft=de-Nr)}if(this.lngRange){var Kr=Sr.x,hn=At.x/2;Kr-hn<J&&(Ze=J+hn),Kr+hn>ge&&(Ze=ge-hn)}(Ze!==void 0||ft!==void 0)&&(this.center=this.unproject(new e.Point(Ze!==void 0?Ze:Sr.x,ft!==void 0?ft:Sr.y))),this._unmodified=Vt,this._constraining=!1}},xi.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var J=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ee=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-J-ge,.01,Math.PI-.01)),Pe=this.point,Ze=Pe.x,ft=Pe.y,At=Math.cos(Math.PI/2-this._pitch)*Ee+this.cameraToCenterDistance,Vt=At*1.01,$t=this.height/50,ir=new Float64Array(16);e.perspective(ir,this._fov,this.width/this.height,$t,Vt),ir[8]=-de.x*2/this.width,ir[9]=de.y*2/this.height,e.scale(ir,ir,[1,-1,1]),e.translate(ir,ir,[0,0,-this.cameraToCenterDistance]),e.rotateX(ir,ir,this._pitch),e.rotateZ(ir,ir,this.angle),e.translate(ir,ir,[-Ze,-ft,0]),this.mercatorMatrix=e.scale([],ir,[this.worldSize,this.worldSize,this.worldSize]),e.scale(ir,ir,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ir,this.invProjMatrix=e.invert([],this.projMatrix);var Sr=this.width%2/2,Br=this.height%2/2,Vr=Math.cos(this.angle),Nr=Math.sin(this.angle),Kr=Ze-Math.round(Ze)+Vr*Sr+Nr*Br,hn=ft-Math.round(ft)+Vr*Br+Nr*Sr,Sn=new Float64Array(ir);if(e.translate(Sn,Sn,[Kr>.5?Kr-1:Kr,hn>.5?hn-1:hn,0]),this.alignedProjMatrix=Sn,ir=e.create(),e.scale(ir,ir,[this.width/2,-this.height/2,1]),e.translate(ir,ir,[1,-1,0]),this.labelPlaneMatrix=ir,ir=e.create(),e.scale(ir,ir,[1,-1,1]),e.translate(ir,ir,[-1,-1,0]),e.scale(ir,ir,[2/this.width,2/this.height,1]),this.glCoordMatrix=ir,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ir=e.invert(new Float64Array(16),this.pixelMatrix),!ir)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ir,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),de=[W.x*this.worldSize,W.y*this.worldSize,0,1],J=e.transformMat4(de,de,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},xi.prototype.getCameraPoint=function(){var W=this._pitch,de=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,de))},xi.prototype.getCameraQueryGeometry=function(W){var de=this.getCameraPoint();if(W.length===1)return[W[0],de];for(var J=de.x,ge=de.y,Ee=de.x,Pe=de.y,Ze=0,ft=W;Ze<ft.length;Ze+=1){var At=ft[Ze];J=Math.min(J,At.x),ge=Math.min(ge,At.y),Ee=Math.max(Ee,At.x),Pe=Math.max(Pe,At.y)}return[new e.Point(J,ge),new e.Point(Ee,ge),new e.Point(Ee,Pe),new e.Point(J,Pe),new e.Point(J,ge)]},Object.defineProperties(xi.prototype,Ai);function ms(ve,W){var de=!1,J=null,ge=function(){J=null,de&&(ve(),J=setTimeout(ge,W),de=!1)};return function(){return de=!0,J||ge(),J}}var go=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ms(this._updateHashUnthrottled.bind(this),30*1e3/100)};go.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},go.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},go.prototype.getHashString=function(W){var de=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ee=Math.pow(10,ge),Pe=Math.round(de.lng*Ee)/Ee,Ze=Math.round(de.lat*Ee)/Ee,ft=this._map.getBearing(),At=this._map.getPitch(),Vt="";if(W?Vt+="/"+Pe+"/"+Ze+"/"+J:Vt+=J+"/"+Ze+"/"+Pe,(ft||At)&&(Vt+="/"+Math.round(ft*10)/10),At&&(Vt+="/"+Math.round(At)),this._hashName){var $t=this._hashName,ir=!1,Sr=e.window.location.hash.slice(1).split("&").map(function(Br){var Vr=Br.split("=")[0];return Vr===$t?(ir=!0,Vr+"="+Vt):Br}).filter(function(Br){return Br});return ir||Sr.push($t+"="+Vt),"#"+Sr.join("&")}return"#"+Vt},go.prototype._getCurrentHash=function(){var W=this,de=e.window.location.hash.replace("#","");if(this._hashName){var J;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===W._hashName&&(J=ge)}),(J&&J[1]||"").split("/")}return de.split("/")},go.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(J){return isNaN(J)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:de,pitch:+(W[4]||0)}),!0}return!1},go.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Io={linearity:.3,easing:e.bezier(0,0,.3,1)},jo=e.extend({deceleration:2500,maxSpeed:1400},Io),he=e.extend({deceleration:20,maxSpeed:1400},Io),Te=e.extend({deceleration:1e3,maxSpeed:360},Io),Le=e.extend({deceleration:1e3,maxSpeed:90},Io),Be=function(W){this._map=W,this.clear()};Be.prototype.clear=function(){this._inertiaBuffer=[]},Be.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Be.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,de=e.browser.now(),J=160;W.length>0&&de-W[0].time>J;)W.shift()},Be.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},J=0,ge=this._inertiaBuffer;J<ge.length;J+=1){var Ee=ge[J],Pe=Ee.settings;de.zoom+=Pe.zoomDelta||0,de.bearing+=Pe.bearingDelta||0,de.pitch+=Pe.pitchDelta||0,Pe.panDelta&&de.pan._add(Pe.panDelta),Pe.around&&(de.around=Pe.around),Pe.pinchAround&&(de.pinchAround=Pe.pinchAround)}var Ze=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Ze.time-this._inertiaBuffer[0].time,At={};if(de.pan.mag()){var Vt=Ke(de.pan.mag(),ft,e.extend({},jo,W||{}));At.offset=de.pan.mult(Vt.amount/de.pan.mag()),At.center=this._map.transform.center,Ne(At,Vt)}if(de.zoom){var $t=Ke(de.zoom,ft,he);At.zoom=this._map.transform.zoom+$t.amount,Ne(At,$t)}if(de.bearing){var ir=Ke(de.bearing,ft,Te);At.bearing=this._map.transform.bearing+e.clamp(ir.amount,-179,179),Ne(At,ir)}if(de.pitch){var Sr=Ke(de.pitch,ft,Le);At.pitch=this._map.transform.pitch+Sr.amount,Ne(At,Sr)}if(At.zoom||At.bearing){var Br=de.pinchAround===void 0?de.around:de.pinchAround;At.around=Br?this._map.unproject(Br):this._map.getCenter()}return this.clear(),e.extend(At,{noMoveStart:!0})}};function Ne(ve,W){(!ve.duration||ve.duration<W.duration)&&(ve.duration=W.duration,ve.easing=W.easing)}function Ke(ve,W,de){var J=de.maxSpeed,ge=de.linearity,Ee=de.deceleration,Pe=e.clamp(ve*ge/(W/1e3),-J,J),Ze=Math.abs(Pe)/(Ee*ge);return{easing:de.easing,duration:Ze*1e3,amount:Pe*(Ze/2)}}var mt=function(ve){function W(J,ge,Ee,Pe){Pe===void 0&&(Pe={});var Ze=a.mousePos(ge.getCanvasContainer(),Ee),ft=ge.unproject(Ze);ve.call(this,J,e.extend({point:Ze,lngLat:ft,originalEvent:Ee},Pe)),this._defaultPrevented=!1,this.target=ge}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),vt=function(ve){function W(J,ge,Ee){var Pe=J==="touchend"?Ee.changedTouches:Ee.touches,Ze=a.touchPos(ge.getCanvasContainer(),Pe),ft=Ze.map(function($t){return ge.unproject($t)}),At=Ze.reduce(function($t,ir,Sr,Br){return $t.add(ir.div(Br.length))},new e.Point(0,0)),Vt=ge.unproject(At);ve.call(this,J,{points:Ze,point:At,lngLats:ft,lngLat:Vt,originalEvent:Ee}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),Ct=function(ve){function W(J,ge,Ee){ve.call(this,J,{originalEvent:Ee}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),Ut=function(W,de){this._map=W,this._clickTolerance=de.clickTolerance};Ut.prototype.reset=function(){delete this._mousedownPos},Ut.prototype.wheel=function(W){return this._firePreventable(new Ct(W.type,this._map,W))},Ut.prototype.mousedown=function(W,de){return this._mousedownPos=de,this._firePreventable(new mt(W.type,this._map,W))},Ut.prototype.mouseup=function(W){this._map.fire(new mt(W.type,this._map,W))},Ut.prototype.click=function(W,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new mt(W.type,this._map,W))},Ut.prototype.dblclick=function(W){return this._firePreventable(new mt(W.type,this._map,W))},Ut.prototype.mouseover=function(W){this._map.fire(new mt(W.type,this._map,W))},Ut.prototype.mouseout=function(W){this._map.fire(new mt(W.type,this._map,W))},Ut.prototype.touchstart=function(W){return this._firePreventable(new vt(W.type,this._map,W))},Ut.prototype.touchmove=function(W){this._map.fire(new vt(W.type,this._map,W))},Ut.prototype.touchend=function(W){this._map.fire(new vt(W.type,this._map,W))},Ut.prototype.touchcancel=function(W){this._map.fire(new vt(W.type,this._map,W))},Ut.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},Ut.prototype.isEnabled=function(){return!0},Ut.prototype.isActive=function(){return!1},Ut.prototype.enable=function(){},Ut.prototype.disable=function(){};var Wt=function(W){this._map=W};Wt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wt.prototype.mousemove=function(W){this._map.fire(new mt(W.type,this._map,W))},Wt.prototype.mousedown=function(){this._delayContextMenu=!0},Wt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wt.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new mt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},Wt.prototype.isEnabled=function(){return!0},Wt.prototype.isActive=function(){return!1},Wt.prototype.enable=function(){},Wt.prototype.disable=function(){};var jt=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=de.clickTolerance||1};jt.prototype.isEnabled=function(){return!!this._enabled},jt.prototype.isActive=function(){return!!this._active},jt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},jt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},jt.prototype.mousedown=function(W,de){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(a.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},jt.prototype.mousemoveWindow=function(W,de){if(!!this._active){var J=de;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=J,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Ee=Math.min(ge.x,J.x),Pe=Math.max(ge.x,J.x),Ze=Math.min(ge.y,J.y),ft=Math.max(ge.y,J.y);a.setTransform(this._box,"translate("+Ee+"px,"+Ze+"px)"),this._box.style.width=Pe-Ee+"px",this._box.style.height=ft-Ze+"px"}}},jt.prototype.mouseupWindow=function(W,de){var J=this;if(!!this._active&&W.button===0){var ge=this._startPos,Ee=de;if(this.reset(),a.suppressClick(),ge.x===Ee.x&&ge.y===Ee.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(ge,Ee,J._map.getBearing(),{linear:!0})}}}},jt.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},jt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},jt.prototype._fireEvent=function(W,de){return this._map.fire(new e.Event(W,{originalEvent:de}))};function _r(ve,W){for(var de={},J=0;J<ve.length;J++)de[ve[J].identifier]=W[J];return de}function Qr(ve){for(var W=new e.Point(0,0),de=0,J=ve;de<J.length;de+=1){var ge=J[de];W._add(ge)}return W.div(ve.length)}var cn=500,Mr=500,Ur=30,Wr=function(W){this.reset(),this.numTouches=W.numTouches};Wr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Wr.prototype.touchstart=function(W,de,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),J.length===this.numTouches&&(this.centroid=Qr(de),this.touches=_r(J,de)))},Wr.prototype.touchmove=function(W,de,J){if(!(this.aborted||!this.centroid)){var ge=_r(J,de);for(var Ee in this.touches){var Pe=this.touches[Ee],Ze=ge[Ee];(!Ze||Ze.dist(Pe)>Ur)&&(this.aborted=!0)}}},Wr.prototype.touchend=function(W,de,J){if((!this.centroid||W.timeStamp-this.startTime>Mr)&&(this.aborted=!0),J.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var sn=function(W){this.singleTap=new Wr(W),this.numTaps=W.numTaps,this.reset()};sn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},sn.prototype.touchstart=function(W,de,J){this.singleTap.touchstart(W,de,J)},sn.prototype.touchmove=function(W,de,J){this.singleTap.touchmove(W,de,J)},sn.prototype.touchend=function(W,de,J){var ge=this.singleTap.touchend(W,de,J);if(ge){var Ee=W.timeStamp-this.lastTime<cn,Pe=!this.lastTap||this.lastTap.dist(ge)<Ur;if((!Ee||!Pe)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var un=function(){this._zoomIn=new sn({numTouches:1,numTaps:2}),this._zoomOut=new sn({numTouches:2,numTaps:1}),this.reset()};un.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},un.prototype.touchstart=function(W,de,J){this._zoomIn.touchstart(W,de,J),this._zoomOut.touchstart(W,de,J)},un.prototype.touchmove=function(W,de,J){this._zoomIn.touchmove(W,de,J),this._zoomOut.touchmove(W,de,J)},un.prototype.touchend=function(W,de,J){var ge=this,Ee=this._zoomIn.touchend(W,de,J),Pe=this._zoomOut.touchend(W,de,J);if(Ee)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()+1,around:Ze.unproject(Ee)},{originalEvent:W})}};if(Pe)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()-1,around:Ze.unproject(Pe)},{originalEvent:W})}}},un.prototype.touchcancel=function(){this.reset()},un.prototype.enable=function(){this._enabled=!0},un.prototype.disable=function(){this._enabled=!1,this.reset()},un.prototype.isEnabled=function(){return this._enabled},un.prototype.isActive=function(){return this._active};var Zr=0,Gn=2,na=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};na.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},na.prototype._correctButton=function(W,de){return!1},na.prototype._move=function(W,de){return{}},na.prototype.mousedown=function(W,de){if(!this._lastPoint){var J=a.mouseButton(W);!this._correctButton(W,J)||(this._lastPoint=de,this._eventButton=J)}},na.prototype.mousemoveWindow=function(W,de){var J=this._lastPoint;if(!!J&&(W.preventDefault(),!(!this._moved&&de.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move(J,de)},na.prototype.mouseupWindow=function(W){var de=a.mouseButton(W);de===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var wa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(J,ge){ve.prototype.mousedown.call(this,J,ge),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(J,ge){return ge===Zr&&!J.ctrlKey},W.prototype._move=function(J,ge){return{around:ge,panDelta:ge.sub(J)}},W}(na),oa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===Zr&&J.ctrlKey||ge===Gn},W.prototype._move=function(J,ge){var Ee=.8,Pe=(ge.x-J.x)*Ee;if(Pe)return this._active=!0,{bearingDelta:Pe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(na),Ea=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===Zr&&J.ctrlKey||ge===Gn},W.prototype._move=function(J,ge){var Ee=-.5,Pe=(ge.y-J.y)*Ee;if(Pe)return this._active=!0,{pitchDelta:Pe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(na),fa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},fa.prototype.touchstart=function(W,de,J){return this._calculateTransform(W,de,J)},fa.prototype.touchmove=function(W,de,J){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,de,J)},fa.prototype.touchend=function(W,de,J){this._calculateTransform(W,de,J),this._active&&J.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(W,de,J){J.length>0&&(this._active=!0);var ge=_r(J,de),Ee=new e.Point(0,0),Pe=new e.Point(0,0),Ze=0;for(var ft in ge){var At=ge[ft],Vt=this._touches[ft];Vt&&(Ee._add(At),Pe._add(At.sub(Vt)),Ze++,ge[ft]=At)}if(this._touches=ge,!(Ze<this._minTouches||!Pe.mag())){var $t=Pe.div(Ze);if(this._sum._add($t),!(this._sum.mag()<this._clickTolerance)){var ir=Ee.div(Ze);return{around:ir,panDelta:$t}}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var Va=function(){this.reset()};Va.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Va.prototype._start=function(W){},Va.prototype._move=function(W,de,J){return{}},Va.prototype.touchstart=function(W,de,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([de[0],de[1]]))},Va.prototype.touchmove=function(W,de,J){if(!!this._firstTwoTouches){W.preventDefault();var ge=this._firstTwoTouches,Ee=ge[0],Pe=ge[1],Ze=Ra(J,de,Ee),ft=Ra(J,de,Pe);if(!(!Ze||!ft)){var At=this._aroundCenter?null:Ze.add(ft).div(2);return this._move([Ze,ft],At,W)}}},Va.prototype.touchend=function(W,de,J){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ee=ge[0],Pe=ge[1],Ze=Ra(J,de,Ee),ft=Ra(J,de,Pe);Ze&&ft||(this._active&&a.suppressClick(),this.reset())}},Va.prototype.touchcancel=function(){this.reset()},Va.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};function Ra(ve,W,de){for(var J=0;J<ve.length;J++)if(ve[J].identifier===de)return W[J]}var $a=.1;function gi(ve,W){return Math.log(ve/W)/Math.LN2}var ho=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ee=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(gi(this._distance,this._startDistance))<$a))return this._active=!0,{zoomDelta:gi(this._distance,Ee),pinchAround:ge}},W}(Va),Ii=25;function ha(ve,W){return ve.angleWith(W)*180/Math.PI}var ai=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ee=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ha(this._vector,Ee),pinchAround:ge}},W.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var ge=Math.PI*this._minDiameter,Ee=Ii/ge*360,Pe=ha(J,this._startVector);return Math.abs(Pe)<Ee},W}(Va);function Xa(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Mi=100,si=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(J){this._lastPoints=J,Xa(J[0].sub(J[1]))&&(this._valid=!1)},W.prototype._move=function(J,ge,Ee){var Pe=J[0].sub(this._lastPoints[0]),Ze=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,Ze,Ee.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var ft=(Pe.y+Ze.y)/2,At=-.5;return{pitchDelta:ft*At}}},W.prototype.gestureBeginsVertically=function(J,ge,Ee){if(this._valid!==void 0)return this._valid;var Pe=2,Ze=J.mag()>=Pe,ft=ge.mag()>=Pe;if(!(!Ze&&!ft)){if(!Ze||!ft)return this._firstMove===void 0&&(this._firstMove=Ee),Ee-this._firstMove<Mi?void 0:!1;var At=J.y>0==ge.y>0;return Xa(J)&&Xa(ge)&&At}},W}(Va),so={panStep:100,bearingStep:15,pitchStep:10},$i=function(){var W=so;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};$i.prototype.reset=function(){this._active=!1},$i.prototype.keydown=function(W){var de=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var J=0,ge=0,Ee=0,Pe=0,Ze=0;switch(W.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:W.shiftKey?ge=-1:(W.preventDefault(),Pe=-1);break;case 39:W.shiftKey?ge=1:(W.preventDefault(),Pe=1);break;case 38:W.shiftKey?Ee=1:(W.preventDefault(),Ze=-1);break;case 40:W.shiftKey?Ee=-1:(W.preventDefault(),Ze=1);break;default:return}return{cameraAnimation:function(ft){var At=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:yo,zoom:J?Math.round(At)+J*(W.shiftKey?2:1):At,bearing:ft.getBearing()+ge*de._bearingStep,pitch:ft.getPitch()+Ee*de._pitchStep,offset:[-Pe*de._panStep,-Ze*de._panStep],center:ft.getCenter()},{originalEvent:W})}}}},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};function yo(ve){return ve*(2-ve)}var Zo=4.000244140625,Vo=1/100,Ko=1/450,Gi=2,Ni=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=Vo,this._wheelZoomRate=Ko,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ni.prototype.setZoomRate=function(W){this._defaultZoomRate=W},Ni.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},Ni.prototype.isEnabled=function(){return!!this._enabled},Ni.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ni.prototype.isZooming=function(){return!!this._zooming},Ni.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},Ni.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Ni.prototype.wheel=function(W){if(!!this.isEnabled()){var de=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,J=e.browser.now(),ge=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,de!==0&&de%Zo==0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),W.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=W,this._delta-=de,this._active||this._start(W)),W.preventDefault()}},Ni.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},Ni.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=a.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ni.prototype.renderFrame=function(){return this._onScrollFrame()},Ni.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>Zo?this._wheelZoomRate:this._defaultZoomRate,ge=Gi/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&ge!==0&&(ge=1/ge);var Ee=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ee*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Ze=this._startZoom,ft=this._easing,At=!1,Vt;if(this._type==="wheel"&&Ze&&ft){var $t=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ir=ft($t);Vt=e.number(Ze,Pe,ir),$t<1?this._frameId||(this._frameId=!0):At=!0}else Vt=Pe,At=!0;return this._active=!0,At&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!At,zoomDelta:Vt-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ni.prototype._smoothOutEasing=function(W){var de=e.ease;if(this._prevEase){var J=this._prevEase,ge=(e.browser.now()-J.start)/J.duration,Ee=J.easing(ge+.01)-J.easing(ge),Pe=.27/Math.sqrt(Ee*Ee+1e-4)*.01,Ze=Math.sqrt(.27*.27-Pe*Pe);de=e.bezier(Pe,Ze,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:de},de},Ni.prototype.reset=function(){this._active=!1};var Fa=function(W,de){this._clickZoom=W,this._tapZoom=de};Fa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ja=function(){this.reset()};ja.prototype.reset=function(){this._active=!1},ja.prototype.dblclick=function(W,de){return W.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(W.shiftKey?-1:1),around:J.unproject(de)},{originalEvent:W})}}},ja.prototype.enable=function(){this._enabled=!0},ja.prototype.disable=function(){this._enabled=!1,this.reset()},ja.prototype.isEnabled=function(){return this._enabled},ja.prototype.isActive=function(){return this._active};var bo=function(){this._tap=new sn({numTouches:1,numTaps:1}),this.reset()};bo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},bo.prototype.touchstart=function(W,de,J){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=de[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(W,de,J))},bo.prototype.touchmove=function(W,de,J){if(!this._tapTime)this._tap.touchmove(W,de,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var ge=de[0],Ee=ge.y-this._swipePoint.y;return this._swipePoint=ge,W.preventDefault(),this._active=!0,{zoomDelta:Ee/128}}},bo.prototype.touchend=function(W,de,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var ge=this._tap.touchend(W,de,J);ge&&(this._tapTime=W.timeStamp)}},bo.prototype.touchcancel=function(){this.reset()},bo.prototype.enable=function(){this._enabled=!0},bo.prototype.disable=function(){this._enabled=!1,this.reset()},bo.prototype.isEnabled=function(){return this._enabled},bo.prototype.isActive=function(){return this._active};var ro=function(W,de,J){this._el=W,this._mousePan=de,this._touchPan=J};ro.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ro.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ro.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ro.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var zo=function(W,de,J){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=de,this._mousePitch=J};zo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},zo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},zo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},zo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xi=function(W,de,J,ge){this._el=W,this._touchZoom=de,this._touchRotate=J,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};Xi.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jo=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},ks=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W}(e.Event);function vu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var ji=function(W,de){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Be(W),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),e.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ge=0,Ee=this._listeners;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe[0],ft=Pe[1],At=Pe[2];a.addEventListener(Ze,ft,Ze===e.window.document?this.handleWindowEvent:this.handleEvent,At)}};ji.prototype.destroy=function(){for(var W=0,de=this._listeners;W<de.length;W+=1){var J=de[W],ge=J[0],Ee=J[1],Pe=J[2];a.removeEventListener(ge,Ee,ge===e.window.document?this.handleWindowEvent:this.handleEvent,Pe)}},ji.prototype._addDefaultHandlers=function(W){var de=this._map,J=de.getCanvasContainer();this._add("mapEvent",new Ut(de,W));var ge=de.boxZoom=new jt(de,W);this._add("boxZoom",ge);var Ee=new un,Pe=new ja;de.doubleClickZoom=new Fa(Pe,Ee),this._add("tapZoom",Ee),this._add("clickZoom",Pe);var Ze=new bo;this._add("tapDragZoom",Ze);var ft=de.touchPitch=new si;this._add("touchPitch",ft);var At=new oa(W),Vt=new Ea(W);de.dragRotate=new zo(W,At,Vt),this._add("mouseRotate",At,["mousePitch"]),this._add("mousePitch",Vt,["mouseRotate"]);var $t=new wa(W),ir=new fa(W);de.dragPan=new ro(J,$t,ir),this._add("mousePan",$t),this._add("touchPan",ir,["touchZoom","touchRotate"]);var Sr=new ai,Br=new ho;de.touchZoomRotate=new Xi(J,Br,Sr,Ze),this._add("touchRotate",Sr,["touchPan","touchZoom"]),this._add("touchZoom",Br,["touchPan","touchRotate"]);var Vr=de.scrollZoom=new Ni(de,this);this._add("scrollZoom",Vr,["mousePan"]);var Nr=de.keyboard=new $i;this._add("keyboard",Nr),this._add("blockableMapEvent",new Wt(de));for(var Kr=0,hn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Kr<hn.length;Kr+=1){var Sn=hn[Kr];W.interactive&&W[Sn]&&de[Sn].enable(W[Sn])}},ji.prototype._add=function(W,de,J){this._handlers.push({handlerName:W,handler:de,allowed:J}),this._handlersById[W]=de},ji.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ji.prototype.isActive=function(){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;if(ge.isActive())return!0}return!1},ji.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ji.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ji.prototype.isMoving=function(){return Boolean(Jo(this._eventsInProgress))||this.isZooming()},ji.prototype._blockedByActive=function(W,de,J){for(var ge in W)if(ge!==J&&(!de||de.indexOf(ge)<0))return!0;return!1},ji.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},ji.prototype._getMapTouches=function(W){for(var de=[],J=0,ge=W;J<ge.length;J+=1){var Ee=ge[J],Pe=Ee.target;this._el.contains(Pe)&&de.push(Ee)}return de},ji.prototype.handleEvent=function(W,de){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=W.type==="renderFrame"?void 0:W,ge={needsRenderFrame:!1},Ee={},Pe={},Ze=W.touches?this._getMapTouches(W.touches):void 0,ft=Ze?a.touchPos(this._el,Ze):a.mousePos(this._el,W),At=0,Vt=this._handlers;At<Vt.length;At+=1){var $t=Vt[At],ir=$t.handlerName,Sr=$t.handler,Br=$t.allowed;if(!!Sr.isEnabled()){var Vr=void 0;this._blockedByActive(Pe,Br,ir)?Sr.reset():Sr[de||W.type]&&(Vr=Sr[de||W.type](W,ft,Ze),this.mergeHandlerResult(ge,Ee,Vr,ir,J),Vr&&Vr.needsRenderFrame&&this._triggerRenderFrame()),(Vr||Sr.isActive())&&(Pe[ir]=Sr)}}var Nr={};for(var Kr in this._previousActiveHandlers)Pe[Kr]||(Nr[Kr]=J);this._previousActiveHandlers=Pe,(Object.keys(Nr).length||vu(ge))&&(this._changes.push([ge,Ee,Nr]),this._triggerRenderFrame()),(Object.keys(Pe).length||vu(ge))&&this._map._stop(!0),this._updatingCamera=!1;var hn=ge.cameraAnimation;hn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],hn(this._map))},ji.prototype.mergeHandlerResult=function(W,de,J,ge,Ee){if(!!J){e.extend(W,J);var Pe={handlerName:ge,originalEvent:J.originalEvent||Ee};J.zoomDelta!==void 0&&(de.zoom=Pe),J.panDelta!==void 0&&(de.drag=Pe),J.pitchDelta!==void 0&&(de.pitch=Pe),J.bearingDelta!==void 0&&(de.rotate=Pe)}},ji.prototype._applyChanges=function(){for(var W={},de={},J={},ge=0,Ee=this._changes;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe[0],ft=Pe[1],At=Pe[2];Ze.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add(Ze.panDelta)),Ze.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Ze.zoomDelta),Ze.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Ze.bearingDelta),Ze.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Ze.pitchDelta),Ze.around!==void 0&&(W.around=Ze.around),Ze.pinchAround!==void 0&&(W.pinchAround=Ze.pinchAround),Ze.noInertia&&(W.noInertia=Ze.noInertia),e.extend(de,ft),e.extend(J,At)}this._updateMapTransform(W,de,J),this._changes=[]},ji.prototype._updateMapTransform=function(W,de,J){var ge=this._map,Ee=ge.transform;if(!vu(W))return this._fireEvents(de,J);var Pe=W.panDelta,Ze=W.zoomDelta,ft=W.bearingDelta,At=W.pitchDelta,Vt=W.around,$t=W.pinchAround;$t!==void 0&&(Vt=$t),ge._stop(!0),Vt=Vt||ge.transform.centerPoint;var ir=Ee.pointLocation(Pe?Vt.sub(Pe):Vt);ft&&(Ee.bearing+=ft),At&&(Ee.pitch+=At),Ze&&(Ee.zoom+=Ze),Ee.setLocationAtPoint(ir,Vt),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(de,J)},ji.prototype._fireEvents=function(W,de){var J=this,ge=Jo(this._eventsInProgress),Ee=Jo(W),Pe={};for(var Ze in W){var ft=W[Ze],At=ft.originalEvent;this._eventsInProgress[Ze]||(Pe[Ze+"start"]=At),this._eventsInProgress[Ze]=W[Ze]}!ge&&Ee&&this._fireEvent("movestart",Ee.originalEvent);for(var Vt in Pe)this._fireEvent(Vt,Pe[Vt]);W.rotate&&(this._bearingChanged=!0),Ee&&this._fireEvent("move",Ee.originalEvent);for(var $t in W){var ir=W[$t],Sr=ir.originalEvent;this._fireEvent($t,Sr)}var Br={},Vr;for(var Nr in this._eventsInProgress){var Kr=this._eventsInProgress[Nr],hn=Kr.handlerName,Sn=Kr.originalEvent;this._handlersById[hn].isActive()||(delete this._eventsInProgress[Nr],Vr=de[hn]||Sn,Br[Nr+"end"]=Vr)}for(var On in Br)this._fireEvent(On,Br[On]);var Jn=Jo(this._eventsInProgress);if((ge||Ee)&&!Jn){this._updatingCamera=!0;var ea=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$n=function(va){return va!==0&&-J._bearingSnap<va&&va<J._bearingSnap};ea?($n(ea.bearing||this._map.getBearing())&&(ea.bearing=0),this._map.easeTo(ea,{originalEvent:Vr})):(this._map.fire(new e.Event("moveend",{originalEvent:Vr})),$n(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ji.prototype._fireEvent=function(W,de){this._map.fire(new e.Event(W,de?{originalEvent:de}:{}))},ji.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete W._frameId,W.handleEvent(new ks("renderFrame",{timeStamp:de})),W._applyChanges()}))};var Qf=function(ve){function W(de,J){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=J.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(J,ge){return this.jumpTo({center:J},ge)},W.prototype.panBy=function(J,ge,Ee){return J=e.Point.convert(J).mult(-1),this.panTo(this.transform.center,e.extend({offset:J},ge),Ee)},W.prototype.panTo=function(J,ge,Ee){return this.easeTo(e.extend({center:J},ge),Ee)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(J,ge){return this.jumpTo({zoom:J},ge),this},W.prototype.zoomTo=function(J,ge,Ee){return this.easeTo(e.extend({zoom:J},ge),Ee)},W.prototype.zoomIn=function(J,ge){return this.zoomTo(this.getZoom()+1,J,ge),this},W.prototype.zoomOut=function(J,ge){return this.zoomTo(this.getZoom()-1,J,ge),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(J,ge){return this.jumpTo({bearing:J},ge),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(J,ge){return this.jumpTo({padding:J},ge),this},W.prototype.rotateTo=function(J,ge,Ee){return this.easeTo(e.extend({bearing:J},ge),Ee)},W.prototype.resetNorth=function(J,ge){return this.rotateTo(0,e.extend({duration:1e3},J),ge),this},W.prototype.resetNorthPitch=function(J,ge){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},J),ge),this},W.prototype.snapToNorth=function(J,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,ge):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(J,ge){return this.jumpTo({pitch:J},ge),this},W.prototype.cameraForBounds=function(J,ge){return J=e.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,ge)},W.prototype._cameraForBoxAndBearing=function(J,ge,Ee,Pe){var Ze={top:0,bottom:0,right:0,left:0};if(Pe=e.extend({padding:Ze,offset:[0,0],maxZoom:this.transform.maxZoom},Pe),typeof Pe.padding=="number"){var ft=Pe.padding;Pe.padding={top:ft,bottom:ft,right:ft,left:ft}}Pe.padding=e.extend(Ze,Pe.padding);var At=this.transform,Vt=At.padding,$t=At.project(e.LngLat.convert(J)),ir=At.project(e.LngLat.convert(ge)),Sr=$t.rotate(-Ee*Math.PI/180),Br=ir.rotate(-Ee*Math.PI/180),Vr=new e.Point(Math.max(Sr.x,Br.x),Math.max(Sr.y,Br.y)),Nr=new e.Point(Math.min(Sr.x,Br.x),Math.min(Sr.y,Br.y)),Kr=Vr.sub(Nr),hn=(At.width-(Vt.left+Vt.right+Pe.padding.left+Pe.padding.right))/Kr.x,Sn=(At.height-(Vt.top+Vt.bottom+Pe.padding.top+Pe.padding.bottom))/Kr.y;if(Sn<0||hn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var On=Math.min(At.scaleZoom(At.scale*Math.min(hn,Sn)),Pe.maxZoom),Jn=e.Point.convert(Pe.offset),ea=(Pe.padding.left-Pe.padding.right)/2,$n=(Pe.padding.top-Pe.padding.bottom)/2,va=new e.Point(Jn.x+ea,Jn.y+$n),_a=va.mult(At.scale/At.zoomScale(On)),xa=At.unproject($t.add(ir).div(2).sub(_a));return{center:xa,zoom:On,bearing:Ee}},W.prototype.fitBounds=function(J,ge,Ee){return this._fitInternal(this.cameraForBounds(J,ge),ge,Ee)},W.prototype.fitScreenCoordinates=function(J,ge,Ee,Pe,Ze){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(J)),this.transform.pointLocation(e.Point.convert(ge)),Ee,Pe),Pe,Ze)},W.prototype._fitInternal=function(J,ge,Ee){return J?(ge=e.extend(J,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ee):this.flyTo(ge,Ee)):this},W.prototype.jumpTo=function(J,ge){this.stop();var Ee=this.transform,Pe=!1,Ze=!1,ft=!1;return"zoom"in J&&Ee.zoom!==+J.zoom&&(Pe=!0,Ee.zoom=+J.zoom),J.center!==void 0&&(Ee.center=e.LngLat.convert(J.center)),"bearing"in J&&Ee.bearing!==+J.bearing&&(Ze=!0,Ee.bearing=+J.bearing),"pitch"in J&&Ee.pitch!==+J.pitch&&(ft=!0,Ee.pitch=+J.pitch),J.padding!=null&&!Ee.isPaddingEqual(J.padding)&&(Ee.padding=J.padding),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge)),Pe&&this.fire(new e.Event("zoomstart",ge)).fire(new e.Event("zoom",ge)).fire(new e.Event("zoomend",ge)),Ze&&this.fire(new e.Event("rotatestart",ge)).fire(new e.Event("rotate",ge)).fire(new e.Event("rotateend",ge)),ft&&this.fire(new e.Event("pitchstart",ge)).fire(new e.Event("pitch",ge)).fire(new e.Event("pitchend",ge)),this.fire(new e.Event("moveend",ge))},W.prototype.easeTo=function(J,ge){var Ee=this;this._stop(!1,J.easeId),J=e.extend({offset:[0,0],duration:500,easing:e.ease},J),(J.animate===!1||!J.essential&&e.browser.prefersReducedMotion)&&(J.duration=0);var Pe=this.transform,Ze=this.getZoom(),ft=this.getBearing(),At=this.getPitch(),Vt=this.getPadding(),$t="zoom"in J?+J.zoom:Ze,ir="bearing"in J?this._normalizeBearing(J.bearing,ft):ft,Sr="pitch"in J?+J.pitch:At,Br="padding"in J?J.padding:Pe.padding,Vr=e.Point.convert(J.offset),Nr=Pe.centerPoint.add(Vr),Kr=Pe.pointLocation(Nr),hn=e.LngLat.convert(J.center||Kr);this._normalizeCenter(hn);var Sn=Pe.project(Kr),On=Pe.project(hn).sub(Sn),Jn=Pe.zoomScale($t-Ze),ea,$n;J.around&&(ea=e.LngLat.convert(J.around),$n=Pe.locationPoint(ea));var va={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$t!==Ze,this._rotating=this._rotating||ft!==ir,this._pitching=this._pitching||Sr!==At,this._padding=!Pe.isPaddingEqual(Br),this._easeId=J.easeId,this._prepareEase(ge,J.noMoveStart,va),clearTimeout(this._easeEndTimeoutID),this._ease(function(_a){if(Ee._zooming&&(Pe.zoom=e.number(Ze,$t,_a)),Ee._rotating&&(Pe.bearing=e.number(ft,ir,_a)),Ee._pitching&&(Pe.pitch=e.number(At,Sr,_a)),Ee._padding&&(Pe.interpolatePadding(Vt,Br,_a),Nr=Pe.centerPoint.add(Vr)),ea)Pe.setLocationAtPoint(ea,$n);else{var xa=Pe.zoomScale(Pe.zoom-Ze),Ma=$t>Ze?Math.min(2,Jn):Math.max(.5,Jn),Pa=Math.pow(Ma,1-_a),Ha=Pe.unproject(Sn.add(On.mult(_a*Pa)).mult(xa));Pe.setLocationAtPoint(Pe.renderWorldCopies?Ha.wrap():Ha,Nr)}Ee._fireMoveEvents(ge)},function(_a){Ee._afterEase(ge,_a)},J),this},W.prototype._prepareEase=function(J,ge,Ee){Ee===void 0&&(Ee={}),this._moving=!0,!ge&&!Ee.moving&&this.fire(new e.Event("movestart",J)),this._zooming&&!Ee.zooming&&this.fire(new e.Event("zoomstart",J)),this._rotating&&!Ee.rotating&&this.fire(new e.Event("rotatestart",J)),this._pitching&&!Ee.pitching&&this.fire(new e.Event("pitchstart",J))},W.prototype._fireMoveEvents=function(J){this.fire(new e.Event("move",J)),this._zooming&&this.fire(new e.Event("zoom",J)),this._rotating&&this.fire(new e.Event("rotate",J)),this._pitching&&this.fire(new e.Event("pitch",J))},W.prototype._afterEase=function(J,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ee=this._zooming,Pe=this._rotating,Ze=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ee&&this.fire(new e.Event("zoomend",J)),Pe&&this.fire(new e.Event("rotateend",J)),Ze&&this.fire(new e.Event("pitchend",J)),this.fire(new e.Event("moveend",J))}},W.prototype.flyTo=function(J,ge){var Ee=this;if(!J.essential&&e.browser.prefersReducedMotion){var Pe=e.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,ge)}this.stop(),J=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},J);var Ze=this.transform,ft=this.getZoom(),At=this.getBearing(),Vt=this.getPitch(),$t=this.getPadding(),ir="zoom"in J?e.clamp(+J.zoom,Ze.minZoom,Ze.maxZoom):ft,Sr="bearing"in J?this._normalizeBearing(J.bearing,At):At,Br="pitch"in J?+J.pitch:Vt,Vr="padding"in J?J.padding:Ze.padding,Nr=Ze.zoomScale(ir-ft),Kr=e.Point.convert(J.offset),hn=Ze.centerPoint.add(Kr),Sn=Ze.pointLocation(hn),On=e.LngLat.convert(J.center||Sn);this._normalizeCenter(On);var Jn=Ze.project(Sn),ea=Ze.project(On).sub(Jn),$n=J.curve,va=Math.max(Ze.width,Ze.height),_a=va/Nr,xa=ea.mag();if("minZoom"in J){var Ma=e.clamp(Math.min(J.minZoom,ft,ir),Ze.minZoom,Ze.maxZoom),Pa=va/Ze.zoomScale(Ma-ft);$n=Math.sqrt(Pa/xa*2)}var Ha=$n*$n;function ni(ii){var _i=(_a*_a-va*va+(ii?-1:1)*Ha*Ha*xa*xa)/(2*(ii?_a:va)*Ha*xa);return Math.log(Math.sqrt(_i*_i+1)-_i)}function Ci(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function li(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function vi(ii){return Ci(ii)/li(ii)}var Ua=ni(0),Li=function(ii){return li(Ua)/li(Ua+$n*ii)},zi=function(ii){return va*((li(Ua)*vi(Ua+$n*ii)-Ci(Ua))/Ha)/xa},Bi=(ni(1)-Ua)/$n;if(Math.abs(xa)<1e-6||!isFinite(Bi)){if(Math.abs(va-_a)<1e-6)return this.easeTo(J,ge);var bi=_a<va?-1:1;Bi=Math.abs(Math.log(_a/va))/$n,zi=function(){return 0},Li=function(ii){return Math.exp(bi*$n*ii)}}if("duration"in J)J.duration=+J.duration;else{var Zi="screenSpeed"in J?+J.screenSpeed/$n:+J.speed;J.duration=1e3*Bi/Zi}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=At!==Sr,this._pitching=Br!==Vt,this._padding=!Ze.isPaddingEqual(Vr),this._prepareEase(ge,!1),this._ease(function(ii){var _i=ii*Bi,wo=1/Li(_i);Ze.zoom=ii===1?ir:ft+Ze.scaleZoom(wo),Ee._rotating&&(Ze.bearing=e.number(At,Sr,ii)),Ee._pitching&&(Ze.pitch=e.number(Vt,Br,ii)),Ee._padding&&(Ze.interpolatePadding($t,Vr,ii),hn=Ze.centerPoint.add(Kr));var Ho=ii===1?On:Ze.unproject(Jn.add(ea.mult(zi(_i))).mult(wo));Ze.setLocationAtPoint(Ze.renderWorldCopies?Ho.wrap():Ho,hn),Ee._fireMoveEvents(ge)},function(){return Ee._afterEase(ge)},J),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(J,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ee=this._onEaseEnd;delete this._onEaseEnd,Ee.call(this,ge)}if(!J){var Pe=this.handlers;Pe&&Pe.stop()}return this},W.prototype._ease=function(J,ge,Ee){Ee.animate===!1||Ee.duration===0?(J(1),ge()):(this._easeStart=e.browser.now(),this._easeOptions=Ee,this._onEaseFrame=J,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var J=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(J,ge){J=e.wrap(J,-180,180);var Ee=Math.abs(J-ge);return Math.abs(J-360-ge)<Ee&&(J-=360),Math.abs(J+360-ge)<Ee&&(J+=360),J},W.prototype._normalizeCenter=function(J){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ee=J.lng-ge.center.lng;J.lng+=Ee>180?-360:Ee<-180?360:0}},W}(e.Evented),Zl=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Zl.prototype.getDefaultPosition=function(){return"bottom-right"},Zl.prototype.onAdd=function(W){var de=this.options&&this.options.compact;return this._map=W,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zl.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zl.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var J=de.reduce(function(ge,Ee,Pe){return Ee.value&&(ge+=Ee.key+"="+Ee.value+(Pe<de.length-1?"&":"")),ge},"?");W.href=e.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},Zl.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Zl.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var J=this._map.style.sourceCaches;for(var ge in J){var Ee=J[ge];if(Ee.used){var Pe=Ee.getSource();Pe.attribution&&W.indexOf(Pe.attribution)<0&&W.push(Pe.attribution)}}W.sort(function(ft,At){return ft.length-At.length}),W=W.filter(function(ft,At){for(var Vt=At+1;Vt<W.length;Vt++)if(W[Vt].indexOf(ft)>=0)return!1;return!0});var Ze=W.join(" | ");Ze!==this._attribHTML&&(this._attribHTML=Ze,W.length?(this._innerContainer.innerHTML=Ze,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Oi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Oi.prototype.onAdd=function(W){this._map=W,this._container=a.create("div","mapboxgl-ctrl");var de=a.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Oi.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Oi.prototype.getDefaultPosition=function(){return"bottom-left"},Oi.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Oi.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var de in W){var J=W[de].getSource();if(J.mapbox_logo)return!0}return!1}},Oi.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var de=W[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var Fo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Fo.prototype.add=function(W){var de=++this._id,J=this._queue;return J.push({callback:W,id:de,cancelled:!1}),de},Fo.prototype.remove=function(W){for(var de=this._currentlyRunning,J=de?this._queue.concat(de):this._queue,ge=0,Ee=J;ge<Ee.length;ge+=1){var Pe=Ee[ge];if(Pe.id===W){Pe.cancelled=!0;return}}},Fo.prototype.run=function(W){W===void 0&&(W=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,ge=de;J<ge.length;J+=1){var Ee=ge[J];if(!Ee.cancelled&&(Ee.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Fo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var i0={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rh=e.window.HTMLImageElement,Pc=e.window.HTMLElement,wf=e.window.ImageBitmap,$f=-2,nh=22,Qs=0,Tf=60,iv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:$f,maxZoom:nh,minPitch:Qs,maxPitch:Tf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ov=function(ve){function W(J){var ge=this;if(J=e.extend({},iv,J),J.minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<Qs)throw new Error("minPitch must be greater than or equal to "+Qs);if(J.maxPitch!=null&&J.maxPitch>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);var Ee=new xi(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies);if(ve.call(this,Ee,J),this._interactive=J.interactive,this._maxTileCacheSize=J.maxTileCacheSize,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new Fo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},i0,J.locale),this._requestManager=new e.RequestManager(J.transformRequest,J.accessToken),typeof J.container=="string"){if(this._container=e.window.document.getElementById(J.container),!this._container)throw new Error("Container '"+J.container+"' not found.")}else if(J.container instanceof Pc)this._container=J.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(J.maxBounds&&this.setMaxBounds(J.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof e.window!="undefined"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ji(this,J);var Pe=typeof J.hash=="string"&&J.hash||void 0;this._hash=J.hash&&new go(Pe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,e.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new Zl({customAttribution:J.customAttribution})),this.addControl(new Oi,J.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function(Ze){ge._update(Ze.dataType==="style"),ge.fire(new e.Event(Ze.dataType+"data",Ze))}),this.on("dataloading",function(Ze){ge.fire(new e.Event(Ze.dataType+"dataloading",Ze))})}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(ge,Ee){if(Ee===void 0&&ge.getDefaultPosition&&(Ee=ge.getDefaultPosition()),Ee===void 0&&(Ee="top-right"),!ge||!ge.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=ge.onAdd(this);this._controls.push(ge);var Ze=this._controlPositions[Ee];return Ee.indexOf("bottom")!==-1?Ze.insertBefore(Pe,Ze.firstChild):Ze.appendChild(Pe),this},W.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ee=this._controls.indexOf(ge);return Ee>-1&&this._controls.splice(Ee,1),ge.onRemove(this),this},W.prototype.resize=function(ge){var Ee=this._containerDimensions(),Pe=Ee[0],Ze=Ee[1];this._resizeCanvas(Pe,Ze),this.transform.resize(Pe,Ze),this.painter.resize(Pe,Ze);var ft=!this._moving;return ft&&(this.stop(),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge))),this.fire(new e.Event("resize",ge)),ft&&this.fire(new e.Event("moveend",ge)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(e.LngLatBounds.convert(ge)),this._update()},W.prototype.setMinZoom=function(ge){if(ge=ge==null?$f:ge,ge>=$f&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+$f+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(ge){if(ge=ge==null?nh:ge,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(ge){if(ge=ge==null?Qs:ge,ge<Qs)throw new Error("minPitch must be greater than or equal to "+Qs);if(ge>=Qs&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+Qs+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(ge){if(ge=ge==null?Tf:ge,ge>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},W.prototype.project=function(ge){return this.transform.locationPoint(e.LngLat.convert(ge))},W.prototype.unproject=function(ge){return this.transform.pointLocation(e.Point.convert(ge))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(ge,Ee,Pe){var Ze=this,ft;if(ge==="mouseenter"||ge==="mouseover"){var At=!1,Vt=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length?At||(At=!0,Pe.call(Ze,new mt(ge,Ze,Nr.originalEvent,{features:Kr}))):At=!1},$t=function(){At=!1};return{layer:Ee,listener:Pe,delegates:{mousemove:Vt,mouseout:$t}}}else if(ge==="mouseleave"||ge==="mouseout"){var ir=!1,Sr=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length?ir=!0:ir&&(ir=!1,Pe.call(Ze,new mt(ge,Ze,Nr.originalEvent)))},Br=function(Nr){ir&&(ir=!1,Pe.call(Ze,new mt(ge,Ze,Nr.originalEvent)))};return{layer:Ee,listener:Pe,delegates:{mousemove:Sr,mouseout:Br}}}else{var Vr=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length&&(Nr.features=Kr,Pe.call(Ze,Nr),delete Nr.features)};return{layer:Ee,listener:Pe,delegates:(ft={},ft[ge]=Vr,ft)}}},W.prototype.on=function(ge,Ee,Pe){if(Pe===void 0)return ve.prototype.on.call(this,ge,Ee);var Ze=this._createDelegatedListener(ge,Ee,Pe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push(Ze);for(var ft in Ze.delegates)this.on(ft,Ze.delegates[ft]);return this},W.prototype.once=function(ge,Ee,Pe){if(Pe===void 0)return ve.prototype.once.call(this,ge,Ee);var Ze=this._createDelegatedListener(ge,Ee,Pe);for(var ft in Ze.delegates)this.once(ft,Ze.delegates[ft]);return this},W.prototype.off=function(ge,Ee,Pe){var Ze=this;if(Pe===void 0)return ve.prototype.off.call(this,ge,Ee);var ft=function(At){for(var Vt=At[ge],$t=0;$t<Vt.length;$t++){var ir=Vt[$t];if(ir.layer===Ee&&ir.listener===Pe){for(var Sr in ir.delegates)Ze.off(Sr,ir.delegates[Sr]);return Vt.splice($t,1),Ze}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ft(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(ge,Ee){if(!this.style)return[];Ee===void 0&&ge!==void 0&&!(ge instanceof e.Point)&&!Array.isArray(ge)&&(Ee=ge,ge=void 0),Ee=Ee||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Pe;if(ge instanceof e.Point||typeof ge[0]=="number")Pe=[e.Point.convert(ge)];else{var Ze=e.Point.convert(ge[0]),ft=e.Point.convert(ge[1]);Pe=[Ze,new e.Point(ft.x,Ze.y),ft,new e.Point(Ze.x,ft.y),Ze]}return this.style.queryRenderedFeatures(Pe,Ee,this.transform)},W.prototype.querySourceFeatures=function(ge,Ee){return this.style.querySourceFeatures(ge,Ee)},W.prototype.setStyle=function(ge,Ee){return Ee=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ee),Ee.diff!==!1&&Ee.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ee),this):(this._localIdeographFontFamily=Ee.localIdeographFontFamily,this._updateStyle(ge,Ee))},W.prototype._getUIString=function(ge){var Ee=this._locale[ge];if(Ee==null)throw new Error("Missing UI string '"+ge+"'");return Ee},W.prototype._updateStyle=function(ge,Ee){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new ts(this,Ee||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(ge,Ee){var Pe=this;if(typeof ge=="string"){var Ze=this._requestManager.normalizeStyleURL(ge),ft=this._requestManager.transformRequest(Ze,e.ResourceType.Style);e.getJSON(ft,function(At,Vt){At?Pe.fire(new e.ErrorEvent(At)):Vt&&Pe._updateDiff(Vt,Ee)})}else typeof ge=="object"&&this._updateDiff(ge,Ee)},W.prototype._updateDiff=function(ge,Ee){try{this.style.setState(ge)&&this._update(!0)}catch(Pe){e.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ee)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(ge,Ee){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ee),this._update(!0)},W.prototype.isSourceLoaded=function(ge){var Ee=this.style&&this.style.sourceCaches[ge];if(Ee===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ee.loaded()},W.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ee in ge){var Pe=ge[Ee],Ze=Pe._tiles;for(var ft in Ze){var At=Ze[ft];if(!(At.state==="loaded"||At.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(ge,Ee,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ee,Pe)},W.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},W.prototype.getSource=function(ge){return this.style.getSource(ge)},W.prototype.addImage=function(ge,Ee,Pe){Pe===void 0&&(Pe={});var Ze=Pe.pixelRatio;Ze===void 0&&(Ze=1);var ft=Pe.sdf;ft===void 0&&(ft=!1);var At=Pe.stretchX,Vt=Pe.stretchY,$t=Pe.content;this._lazyInitEmptyStyle();var ir=0;if(Ee instanceof rh||wf&&Ee instanceof wf){var Sr=e.browser.getImageData(Ee),Br=Sr.width,Vr=Sr.height,Nr=Sr.data;this.style.addImage(ge,{data:new e.RGBAImage({width:Br,height:Vr},Nr),pixelRatio:Ze,stretchX:At,stretchY:Vt,content:$t,sdf:ft,version:ir})}else{if(Ee.width===void 0||Ee.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Kr=Ee.width,hn=Ee.height,Sn=Ee.data,On=Ee;this.style.addImage(ge,{data:new e.RGBAImage({width:Kr,height:hn},new Uint8Array(Sn)),pixelRatio:Ze,stretchX:At,stretchY:Vt,content:$t,sdf:ft,version:ir,userImage:On}),On.onAdd&&On.onAdd(this,ge)}},W.prototype.updateImage=function(ge,Ee){var Pe=this.style.getImage(ge);if(!Pe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ze=Ee instanceof rh||wf&&Ee instanceof wf?e.browser.getImageData(Ee):Ee,ft=Ze.width,At=Ze.height,Vt=Ze.data;if(ft===void 0||At===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Pe.data.width||At!==Pe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var $t=!(Ee instanceof rh||wf&&Ee instanceof wf);Pe.data.replace(Vt,$t),this.style.updateImage(ge,Pe)},W.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(ge){this.style.removeImage(ge)},W.prototype.loadImage=function(ge,Ee){e.getImage(this._requestManager.transformRequest(ge,e.ResourceType.Image),Ee)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(ge,Ee){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ee),this._update(!0)},W.prototype.moveLayer=function(ge,Ee){return this.style.moveLayer(ge,Ee),this._update(!0)},W.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},W.prototype.getLayer=function(ge){return this.style.getLayer(ge)},W.prototype.setLayerZoomRange=function(ge,Ee,Pe){return this.style.setLayerZoomRange(ge,Ee,Pe),this._update(!0)},W.prototype.setFilter=function(ge,Ee,Pe){return Pe===void 0&&(Pe={}),this.style.setFilter(ge,Ee,Pe),this._update(!0)},W.prototype.getFilter=function(ge){return this.style.getFilter(ge)},W.prototype.setPaintProperty=function(ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setPaintProperty(ge,Ee,Pe,Ze),this._update(!0)},W.prototype.getPaintProperty=function(ge,Ee){return this.style.getPaintProperty(ge,Ee)},W.prototype.setLayoutProperty=function(ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setLayoutProperty(ge,Ee,Pe,Ze),this._update(!0)},W.prototype.getLayoutProperty=function(ge,Ee){return this.style.getLayoutProperty(ge,Ee)},W.prototype.setLight=function(ge,Ee){return Ee===void 0&&(Ee={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ee),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(ge,Ee){return this.style.setFeatureState(ge,Ee),this._update()},W.prototype.removeFeatureState=function(ge,Ee){return this.style.removeFeatureState(ge,Ee),this._update()},W.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var ge=0,Ee=0;return this._container&&(ge=this._container.clientWidth||400,Ee=this._container.clientHeight||300),[ge,Ee]},W.prototype._detectMissingCSS=function(){var ge=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ee=this._missingCSSCanary=a.create("div","mapboxgl-canary",ge);Ee.style.visibility="hidden",this._detectMissingCSS();var Pe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ge);this._interactive&&Pe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",Pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ze=this._containerDimensions();this._resizeCanvas(Ze[0],Ze[1]);var ft=this._controlContainer=a.create("div","mapboxgl-control-container",ge),At=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Vt){At[Vt]=a.create("div","mapboxgl-ctrl-"+Vt,ft)})},W.prototype._resizeCanvas=function(ge,Ee){var Pe=e.browser.devicePixelRatio||1;this._canvas.width=Pe*ge,this._canvas.height=Pe*Ee,this._canvas.style.width=ge+"px",this._canvas.style.height=Ee+"px"},W.prototype._setupPainter=function(){var ge=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ee=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ee){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ri(Ee,this.transform),e.webpSupported.testSupport(Ee)},W.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ge}))},W.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ge}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},W.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},W.prototype._render=function(ge){var Ee=this,Pe,Ze=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Pe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Pe),Ze=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var At=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Vt=this.transform.zoom,$t=e.browser.now();this.style.zoomHistory.update(Vt,$t);var ir=new e.EvaluationParameters(Vt,{now:$t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Sr=ir.crossFadingFactor();(Sr!==1||Sr!==this._crossFadingFactor)&&(At=!0,this._crossFadingFactor=Sr),this.style.update(ir)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||At)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Br=e.browser.now()-Ze;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Pe),setTimeout(function(){var Kr=ft.getQueryObjectEXT(Pe,ft.QUERY_RESULT_EXT)/(1e3*1e3);ft.deleteQueryEXT(Pe),Ee.fire(new e.Event("gpu-timing-frame",{cpuTime:Br,gpuTime:Kr}))},50)}if(this.listens("gpu-timing-layer")){var Vr=this.painter.collectGpuTimers();setTimeout(function(){var Kr=Ee.painter.queryGpuTimers(Vr);Ee.fire(new e.Event("gpu-timing-layer",{layerTimes:Kr}))},50)}var Nr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Nr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ee=this._controls;ge<Ee.length;ge+=1){var Pe=Ee[ge];Pe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window!="undefined"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Ze=this.painter.context.gl.getExtension("WEBGL_lose_context");Ze&&Ze.loseContext(),Dc(this._canvasContainer),Dc(this._controlContainer),Dc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ee){ge._frame=null,ge._render(Ee)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function(J){this._showPadding!==J&&(this._showPadding=J,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function(J){this._vertices=J,this._update()},W.prototype._setCacheLimits=function(ge,Ee){e.setCacheLimits(ge,Ee)},de.version.get=function(){return e.version},Object.defineProperties(W.prototype,de),W}(Qf);function Dc(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var ah={showCompass:!0,showZoom:!0,visualizePitch:!1},ef=function(W){var de=this;this.options=e.extend({},ah,W),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return de._map.zoomIn({},{originalEvent:J})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return de._map.zoomOut({},{originalEvent:J})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:J}):de._map.resetNorth({},{originalEvent:J})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ef.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},ef.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},ef.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dl(this._map,this._compass,this.options.visualizePitch)),this._container},ef.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ef.prototype._createButton=function(W,de){var J=a.create("button",W,this._container);return J.type="button",J.addEventListener("click",de),J},ef.prototype._setButtonTitle=function(W,de){var J=this._map._getUIString("NavigationControl."+de);W.title=J,W.setAttribute("aria-label",J)};var dl=function(W,de,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new oa({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,J&&(this.mousePitch=new Ea({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(de,"mousedown",this.mousedown),a.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(de,"touchmove",this.touchmove),a.addEventListener(de,"touchend",this.touchend),a.addEventListener(de,"touchcancel",this.reset)};dl.prototype.down=function(W,de){this.mouseRotate.mousedown(W,de),this.mousePitch&&this.mousePitch.mousedown(W,de),a.disableDrag()},dl.prototype.move=function(W,de){var J=this.map,ge=this.mouseRotate.mousemoveWindow(W,de);if(ge&&ge.bearingDelta&&J.setBearing(J.getBearing()+ge.bearingDelta),this.mousePitch){var Ee=this.mousePitch.mousemoveWindow(W,de);Ee&&Ee.pitchDelta&&J.setPitch(J.getPitch()+Ee.pitchDelta)}},dl.prototype.off=function(){var W=this.element;a.removeEventListener(W,"mousedown",this.mousedown),a.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(W,"touchmove",this.touchmove),a.removeEventListener(W,"touchend",this.touchend),a.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},dl.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(e.window,"mousemove",this.mousemove),a.removeEventListener(e.window,"mouseup",this.mouseup)},dl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),a.mousePos(this.element,W)),a.addEventListener(e.window,"mousemove",this.mousemove),a.addEventListener(e.window,"mouseup",this.mouseup)},dl.prototype.mousemove=function(W){this.move(W,a.mousePos(this.element,W))},dl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},dl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},dl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},dl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},dl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function tf(ve,W,de){if(ve=new e.LngLat(ve.lng,ve.lat),W){var J=new e.LngLat(ve.lng-360,ve.lat),ge=new e.LngLat(ve.lng+360,ve.lat),Ee=de.locationPoint(ve).distSqr(W);de.locationPoint(J).distSqr(W)<Ee?ve=J:de.locationPoint(ge).distSqr(W)<Ee&&(ve=ge)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Pe=de.locationPoint(ve);if(Pe.x>=0&&Pe.y>=0&&Pe.x<=de.width&&Pe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var Rc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ih(ve,W,de){var J=ve.classList;for(var ge in Rc)J.remove("mapboxgl-"+de+"-anchor-"+ge);J.add("mapboxgl-"+de+"-anchor-"+W)}var qf=function(ve){function W(de,J){var ge=this;if(ve.call(this),(de instanceof e.window.HTMLElement||J)&&(de=e.extend({element:de},J)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Ee=a.createNS("http://www.w3.org/2000/svg","svg");Ee.setAttributeNS(null,"display","block"),Ee.setAttributeNS(null,"height","41px"),Ee.setAttributeNS(null,"width","27px"),Ee.setAttributeNS(null,"viewBox","0 0 27 41");var Pe=a.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"stroke","none"),Pe.setAttributeNS(null,"stroke-width","1"),Pe.setAttributeNS(null,"fill","none"),Pe.setAttributeNS(null,"fill-rule","evenodd");var Ze=a.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill-rule","nonzero");var ft=a.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var At=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Vt=0,$t=At;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=a.createNS("http://www.w3.org/2000/svg","ellipse");Sr.setAttributeNS(null,"opacity","0.04"),Sr.setAttributeNS(null,"cx","10.5"),Sr.setAttributeNS(null,"cy","5.80029008"),Sr.setAttributeNS(null,"rx",ir.rx),Sr.setAttributeNS(null,"ry",ir.ry),ft.appendChild(Sr)}var Br=a.createNS("http://www.w3.org/2000/svg","g");Br.setAttributeNS(null,"fill",this._color);var Vr=a.createNS("http://www.w3.org/2000/svg","path");Vr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Br.appendChild(Vr);var Nr=a.createNS("http://www.w3.org/2000/svg","g");Nr.setAttributeNS(null,"opacity","0.25"),Nr.setAttributeNS(null,"fill","#000000");var Kr=a.createNS("http://www.w3.org/2000/svg","path");Kr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Nr.appendChild(Kr);var hn=a.createNS("http://www.w3.org/2000/svg","g");hn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),hn.setAttributeNS(null,"fill","#FFFFFF");var Sn=a.createNS("http://www.w3.org/2000/svg","g");Sn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var On=a.createNS("http://www.w3.org/2000/svg","circle");On.setAttributeNS(null,"fill","#000000"),On.setAttributeNS(null,"opacity","0.25"),On.setAttributeNS(null,"cx","5.5"),On.setAttributeNS(null,"cy","5.5"),On.setAttributeNS(null,"r","5.4999962");var Jn=a.createNS("http://www.w3.org/2000/svg","circle");Jn.setAttributeNS(null,"fill","#FFFFFF"),Jn.setAttributeNS(null,"cx","5.5"),Jn.setAttributeNS(null,"cy","5.5"),Jn.setAttributeNS(null,"r","5.4999962"),Sn.appendChild(On),Sn.appendChild(Jn),Ze.appendChild(ft),Ze.appendChild(Br),Ze.appendChild(Nr),Ze.appendChild(hn),Ze.appendChild(Sn),Ee.appendChild(Ze),this._element.appendChild(Ee),this._offset=e.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=e.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ea){ea.preventDefault()}),this._element.addEventListener("mousedown",function(ea){ea.preventDefault()}),this._element.addEventListener("focus",function(){var ea=ge._map.getContainer();ea.scrollTop=0,ea.scrollLeft=0}),ih(this._element,this._anchor,"marker"),this._popup=null}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var ge=41-5.8/2,Ee=13.5,Pe=Math.sqrt(Math.pow(Ee,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Pe,(ge-Ee+Pe)*-1],"bottom-right":[-Pe,(ge-Ee+Pe)*-1],left:[Ee,(ge-Ee)*-1],right:[-Ee,(ge-Ee)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(J){var ge=J.code,Ee=J.charCode||J.keyCode;(ge==="Space"||ge==="Enter"||Ee===32||Ee===13)&&this.togglePopup()},W.prototype._onMapClick=function(J){var ge=J.originalEvent.target,Ee=this._element;this._popup&&(ge===Ee||Ee.contains(ge))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},W.prototype._update=function(J){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ee="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ee="rotateX(0deg)":this._pitchAlignment==="map"&&(Ee="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),a.setTransform(this._element,Rc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ee+" "+ge)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(J){return this._offset=e.Point.convert(J),this._update(),this},W.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),sv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Af;function Ic(ve){Af!==void 0?ve(Af):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){Af=W.state!=="denied",ve(Af)}):(Af=!!e.window.navigator.geolocation,ve(Af))}var ec=0,Mf=!1,lv=function(ve){function W(de){ve.call(this),this.options=e.extend({},sv,de),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){return this._map=J,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Ic(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ec=0,Mf=!1},W.prototype._isOutOfMapMaxBounds=function(J){var ge=this._map.getMaxBounds(),Ee=J.coords;return ge&&(Ee.longitude<ge.getWest()||Ee.longitude>ge.getEast()||Ee.latitude<ge.getSouth()||Ee.latitude>ge.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function(J){if(!!this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",J)),this._finish()}},W.prototype._updateCamera=function(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude),Ee=J.coords.accuracy,Pe=this._map.getBearing(),Ze=e.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ee),Ze,{geolocateSource:!0})},W.prototype._updateMarker=function(J){if(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,ge=this._map.unproject([0,J]),Ee=this._map.unproject([1,J]),Pe=ge.distanceTo(Ee),Ze=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=Ze+"px",this._circleElement.style.height=Ze+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(J){if(!!this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&Mf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",J)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(J){var ge=this;if(this._container.addEventListener("contextmenu",function(Ze){return Ze.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ee=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ee,this._geolocateButton.setAttribute("aria-label",Ee)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qf(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ze){var ft=Ze.originalEvent&&Ze.originalEvent.type==="resize";!Ze.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ft&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ec--,Mf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ec++;var J;ec>1?(J={maximumAge:6e5,timeout:0},Mf=!0):(J=this.options.positionOptions,Mf=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),Ap={maxWidth:100,unit:"metric"},Sf=function(W){this.options=e.extend({},Ap,W),e.bindAll(["_onMove","setUnit"],this)};Sf.prototype.getDefaultPosition=function(){return"bottom-left"},Sf.prototype._onMove=function(){uv(this._map,this._container,this.options)},Sf.prototype.onAdd=function(W){return this._map=W,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Sf.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Sf.prototype.setUnit=function(W){this.options.unit=W,uv(this._map,this._container,this.options)};function uv(ve,W,de){var J=de&&de.maxWidth||100,ge=ve._container.clientHeight/2,Ee=ve.unproject([0,ge]),Pe=ve.unproject([J,ge]),Ze=Ee.distanceTo(Pe);if(de&&de.unit==="imperial"){var ft=3.2808*Ze;if(ft>5280){var At=ft/5280;tc(W,J,At,ve._getUIString("ScaleControl.Miles"))}else tc(W,J,ft,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var Vt=Ze/1852;tc(W,J,Vt,ve._getUIString("ScaleControl.NauticalMiles"))}else Ze>=1e3?tc(W,J,Ze/1e3,ve._getUIString("ScaleControl.Kilometers")):tc(W,J,Ze,ve._getUIString("ScaleControl.Meters"))}function tc(ve,W,de,J){var ge=Sp(de),Ee=ge/de;ve.style.width=W*Ee+"px",ve.innerHTML=ge+"&nbsp;"+J}function Mp(ve){var W=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*W)/W}function Sp(ve){var W=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/W;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:Mp(de),W*de}var pu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};pu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},pu.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},pu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},pu.prototype._setupUI=function(){var W=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},pu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},pu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},pu.prototype._isFullscreen=function(){return this._fullscreen},pu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},pu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var kp={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ep=function(ve){function W(de){ve.call(this),this.options=e.extend(Object.create(kp),de),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(J){return this.setDOMContent(e.window.document.createTextNode(J))},W.prototype.setHTML=function(J){var ge=e.window.document.createDocumentFragment(),Ee=e.window.document.createElement("body"),Pe;for(Ee.innerHTML=J;Pe=Ee.firstChild,!!Pe;)ge.appendChild(Pe);return this.setDOMContent(ge)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},W.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},W.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},W.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},W.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},W.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(J){this._update(J.point)},W.prototype._onMouseMove=function(J){this._update(J.point)},W.prototype._onDrag=function(J){this._update(J.point)},W.prototype._update=function(J){var ge=this,Ee=this._lngLat||this._trackPointer;if(!(!this._map||!Ee||!this._content)&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Sr){return ge._container.classList.add(Sr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Pe=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),Ze=this.options.anchor,ft=fv(this.options.offset);if(!Ze){var At=this._container.offsetWidth,Vt=this._container.offsetHeight,$t;Pe.y+ft.bottom.y<Vt?$t=["top"]:Pe.y>this._map.transform.height-Vt?$t=["bottom"]:$t=[],Pe.x<At/2?$t.push("left"):Pe.x>this._map.transform.width-At/2&&$t.push("right"),$t.length===0?Ze="bottom":Ze=$t.join("-")}var ir=Pe.add(ft[Ze]).round();a.setTransform(this._container,Rc[Ze]+" translate("+ir.x+"px,"+ir.y+"px)"),ih(this._container,Ze,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function fv(ve){if(ve)if(typeof ve=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new e.Point(0,0),top:new e.Point(0,ve),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-ve),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(ve,0),right:new e.Point(-ve,0)}}else if(ve instanceof e.Point||Array.isArray(ve)){var de=e.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:e.Point.convert(ve.center||[0,0]),top:e.Point.convert(ve.top||[0,0]),"top-left":e.Point.convert(ve["top-left"]||[0,0]),"top-right":e.Point.convert(ve["top-right"]||[0,0]),bottom:e.Point.convert(ve.bottom||[0,0]),"bottom-left":e.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ve["bottom-right"]||[0,0]),left:e.Point.convert(ve.left||[0,0]),right:e.Point.convert(ve.right||[0,0])};else return fv(new e.Point(0,0))}var Cp={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:ov,NavigationControl:ef,GeolocateControl:lv,AttributionControl:Zl,ScaleControl:Sf,FullscreenControl:pu,Popup:Ep,Marker:qf,Style:ts,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:Dr,clearPrewarmedResources:tn,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ve){e.config.ACCESS_TOKEN=ve},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ve){e.config.API_URL=ve},get workerCount(){return mr.workerCount},set workerCount(ve){mr.workerCount=ve},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return Cp}),b})},{}],240:[function(t,B,H){B.exports=Math.log2||function(d){return Math.log(d)*Math.LOG2E}},{}],241:[function(t,B,H){B.exports=l;var d=t("mouse-event");function l(b,w){w||(w=b,b=window);var e=0,o=0,a=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function u(M){var _=!1;return"altKey"in M&&(_=_||M.altKey!==n.alt,n.alt=!!M.altKey),"shiftKey"in M&&(_=_||M.shiftKey!==n.shift,n.shift=!!M.shiftKey),"ctrlKey"in M&&(_=_||M.ctrlKey!==n.control,n.control=!!M.ctrlKey),"metaKey"in M&&(_=_||M.metaKey!==n.meta,n.meta=!!M.metaKey),_}function s(M,_){var T=d.x(_),x=d.y(_);"buttons"in _&&(M=_.buttons|0),(M!==e||T!==o||x!==a||u(_))&&(e=M|0,o=T||0,a=x||0,w&&w(e,o,a,n))}function i(M){s(0,M)}function f(){(e||o||a||n.shift||n.alt||n.meta||n.control)&&(o=a=0,e=0,n.shift=n.alt=n.control=n.meta=!1,w&&w(0,0,0,n))}function h(M){u(M)&&w&&w(e,o,a,n)}function p(M){d.buttons(M)===0?s(0,M):s(e,M)}function v(M){s(e|d.buttons(M),M)}function y(M){s(e&~d.buttons(M),M)}function g(){r||(r=!0,b.addEventListener("mousemove",p),b.addEventListener("mousedown",v),b.addEventListener("mouseup",y),b.addEventListener("mouseleave",i),b.addEventListener("mouseenter",i),b.addEventListener("mouseout",i),b.addEventListener("mouseover",i),b.addEventListener("blur",f),b.addEventListener("keyup",h),b.addEventListener("keydown",h),b.addEventListener("keypress",h),b!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function A(){!r||(r=!1,b.removeEventListener("mousemove",p),b.removeEventListener("mousedown",v),b.removeEventListener("mouseup",y),b.removeEventListener("mouseleave",i),b.removeEventListener("mouseenter",i),b.removeEventListener("mouseout",i),b.removeEventListener("mouseover",i),b.removeEventListener("blur",f),b.removeEventListener("keyup",h),b.removeEventListener("keydown",h),b.removeEventListener("keypress",h),b!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}g();var m={element:b};return Object.defineProperties(m,{enabled:{get:function(){return r},set:function(M){M?g():A()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),m}},{"mouse-event":243}],242:[function(t,B,H){var d={left:0,top:0};B.exports=l;function l(w,e,o){e=e||w.currentTarget||w.srcElement,Array.isArray(o)||(o=[0,0]);var a=w.clientX||0,n=w.clientY||0,r=b(e);return o[0]=a-r.left,o[1]=n-r.top,o}function b(w){return w===window||w===document||w===document.body?d:w.getBoundingClientRect()}},{}],243:[function(t,B,H){function d(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var o=e.which;if(o===2)return 4;if(o===3)return 2;if(o>0)return 1<<o-1}else if("button"in e){var o=e.button;if(o===1)return 4;if(o===2)return 2;if(o>=0)return 1<<o}}return 0}H.buttons=d;function l(e){return e.target||e.srcElement||window}H.element=l;function b(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var o=l(e),a=o.getBoundingClientRect();return e.clientX-a.left}return 0}H.x=b;function w(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var o=l(e),a=o.getBoundingClientRect();return e.clientY-a.top}return 0}H.y=w},{}],244:[function(t,B,H){var d=t("to-px");B.exports=l;function l(b,w,e){typeof b=="function"&&(e=!!w,w=b,b=window);var o=d("ex",b),a=function(n){e&&n.preventDefault();var r=n.deltaX||0,u=n.deltaY||0,s=n.deltaZ||0,i=n.deltaMode,f=1;switch(i){case 1:f=o;break;case 2:f=window.innerHeight;break}if(r*=f,u*=f,s*=f,r||u||s)return w(r,u,s,n)};return b.addEventListener("wheel",a),a}},{"to-px":314}],245:[function(t,B,H){(function(d,l){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(w,e,o){e[w]=e[w]||o(),typeof B!="undefined"&&B.exports&&(B.exports=e[w])})("Promise",typeof d!="undefined"?d:this,function(){var w,e,o,a=Object.prototype.toString,n=typeof l!="undefined"?function(M){return l(M)}:setTimeout;try{Object.defineProperty({},"x",{}),w=function(M,_,T,x){return Object.defineProperty(M,_,{value:T,writable:!0,configurable:x!==!1})}}catch{w=function(_,T,x){return _[T]=x,_}}o=function(){var M,_,T;function x(c,L){this.fn=c,this.self=L,this.next=void 0}return{add:function(L,S){T=new x(L,S),_?_.next=T:M=T,_=T,T=void 0},drain:function(){var L=M;for(M=_=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(m,M){o.add(m,M),e||(e=n(o.drain))}function u(m){var M,_=typeof m;return m!=null&&(_=="object"||_=="function")&&(M=m.then),typeof M=="function"?M:!1}function s(){for(var m=0;m<this.chain.length;m++)i(this,this.state===1?this.chain[m].success:this.chain[m].failure,this.chain[m]);this.chain.length=0}function i(m,M,_){var T,x;try{M===!1?_.reject(m.msg):(M===!0?T=m.msg:T=M.call(void 0,m.msg),T===_.promise?_.reject(TypeError("Promise-chain cycle")):(x=u(T))?x.call(T,_.resolve,_.reject):_.resolve(T))}catch(c){_.reject(c)}}function f(m){var M,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(M=u(m))?r(function(){var T=new v(_);try{M.call(m,function(){f.apply(T,arguments)},function(){h.apply(T,arguments)})}catch(x){h.call(T,x)}}):(_.msg=m,_.state=1,_.chain.length>0&&r(s,_))}catch(T){h.call(new v(_),T)}}}function h(m){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=m,M.state=2,M.chain.length>0&&r(s,M))}function p(m,M,_,T){for(var x=0;x<M.length;x++)(function(L){m.resolve(M[L]).then(function(k){_(L,k)},T)})(x)}function v(m){this.def=m,this.triggered=!1}function y(m){this.promise=m,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(m){if(typeof m!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(T,x){var c={success:typeof T=="function"?T:!0,failure:typeof x=="function"?x:!1};return c.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");c.resolve=S,c.reject=k}),M.chain.push(c),M.state!==0&&r(s,M),c.promise},this.catch=function(T){return this.then(void 0,T)};try{m.call(void 0,function(T){f.call(M,T)},function(T){h.call(M,T)})}catch(_){h.call(M,_)}}var A=w({},"constructor",g,!1);return g.prototype=A,w(A,"__NPO__",0,!1),w(g,"resolve",function(M){var _=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new _(function(x,c){if(typeof x!="function"||typeof c!="function")throw TypeError("Not a function");x(M)})}),w(g,"reject",function(M){return new this(function(T,x){if(typeof T!="function"||typeof x!="function")throw TypeError("Not a function");x(M)})}),w(g,"all",function(M){var _=this;return a.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):M.length===0?_.resolve([]):new _(function(x,c){if(typeof x!="function"||typeof c!="function")throw TypeError("Not a function");var L=M.length,S=Array(L),k=0;p(_,M,function(z,I){S[z]=I,++k===L&&x(S)},c)})}),w(g,"race",function(M){var _=this;return a.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(x,c){if(typeof x!="function"||typeof c!="function")throw TypeError("Not a function");p(_,M,function(S,k){x(k)},c)})}),g})}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("timers").setImmediate)},{timers:311}],246:[function(t,B,H){var d=Math.PI,l=n(120);B.exports=b;function b(r){for(var u,s=[],i=0,f=0,h=0,p=0,v=null,y=null,g=0,A=0,m=0,M=r.length;m<M;m++){var _=r[m],T=_[0];switch(T){case"M":h=_[1],p=_[2];break;case"A":_=o(g,A,_[1],_[2],n(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(s.push(_.splice(0,7)),_.unshift("C"));break;case"S":var x=g,c=A;(u=="C"||u=="S")&&(x+=x-i,c+=c-f),_=["C",x,c,_[1],_[2],_[3],_[4]];break;case"T":u=="Q"||u=="T"?(v=g*2-v,y=A*2-y):(v=g,y=A),_=e(g,A,v,y,_[1],_[2]);break;case"Q":v=_[1],y=_[2],_=e(g,A,_[1],_[2],_[3],_[4]);break;case"L":_=w(g,A,_[1],_[2]);break;case"H":_=w(g,A,_[1],A);break;case"V":_=w(g,A,g,_[1]);break;case"Z":_=w(g,A,h,p);break}u=T,g=_[_.length-2],A=_[_.length-1],_.length>4?(i=_[_.length-4],f=_[_.length-3]):(i=g,f=A),s.push(_)}return s}function w(r,u,s,i){return["C",r,u,s,i,s,i]}function e(r,u,s,i,f,h){return["C",r/3+2/3*s,u/3+2/3*i,f/3+2/3*s,h/3+2/3*i,f,h]}function o(r,u,s,i,f,h,p,v,y,g){if(g)k=g[0],P=g[1],L=g[2],S=g[3];else{var A=a(r,u,-f);r=A.x,u=A.y,A=a(v,y,-f),v=A.x,y=A.y;var m=(r-v)/2,M=(u-y)/2,_=m*m/(s*s)+M*M/(i*i);_>1&&(_=Math.sqrt(_),s=_*s,i=_*i);var T=s*s,x=i*i,c=(h==p?-1:1)*Math.sqrt(Math.abs((T*x-T*M*M-x*m*m)/(T*M*M+x*m*m)));c==1/0&&(c=1);var L=c*s*M/i+(r+v)/2,S=c*-i*m/s+(u+y)/2,k=Math.asin(((u-S)/i).toFixed(9)),P=Math.asin(((y-S)/i).toFixed(9));k=r<L?d-k:k,P=v<L?d-P:P,k<0&&(k=d*2+k),P<0&&(P=d*2+P),p&&k>P&&(k=k-d*2),!p&&P>k&&(P=P-d*2)}if(Math.abs(P-k)>l){var z=P,I=v,R=y;P=k+l*(p&&P>k?1:-1),v=L+s*Math.cos(P),y=S+i*Math.sin(P);var D=o(v,y,s,i,f,0,p,I,R,[P,z,L,S])}var O=Math.tan((P-k)/4),F=4/3*s*O,Y=4/3*i*O,X=[2*r-(r+F*Math.sin(k)),2*u-(u-Y*Math.cos(k)),v+F*Math.sin(P),y-Y*Math.cos(P),v,y];if(g)return X;D&&(X=X.concat(D));for(var q=0;q<X.length;){var $=a(X[q],X[q+1],f);X[q++]=$.x,X[q++]=$.y}return X}function a(r,u,s){return{x:r*Math.cos(s)-u*Math.sin(s),y:r*Math.sin(s)+u*Math.cos(s)}}function n(r){return r*(d/180)}},{}],247:[function(t,B,H){var d=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function w(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function e(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},n=0;n<10;n++)a["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(a).map(function(s){return a[s]});if(r.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(s){u[s]=s}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}B.exports=e()?Object.assign:function(o,a){for(var n,r=w(o),u,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var i in n)l.call(n,i)&&(r[i]=n[i]);if(d){u=d(n);for(var f=0;f<u.length;f++)b.call(n,u[f])&&(r[u[f]]=n[u[f]])}}return r}},{}],248:[function(t,B,H){function d(w,e){if(typeof w!="string")return[w];var o=[w];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var a=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",r=!!e.flat;a.forEach(function(i){var f=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),h=[];function p(v,y,g){var A=o.push(v.slice(i[0].length,-i[1].length))-1;return h.push(A),n+A+n}o.forEach(function(v,y){for(var g,A=0;v!=g;)if(g=v,v=v.replace(f,p),A++>1e4)throw Error("References have circular dependency. Please, check them.");o[y]=v}),h=h.reverse(),o=o.map(function(v){return h.forEach(function(y){v=v.replace(new RegExp("(\\"+n+y+"\\"+n+")","g"),i[0]+"$1"+i[1])}),v})});var u=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(i,f,h){for(var p=[],v,y=0;v=u.exec(i);){if(y++>1e4)throw Error("Circular references in parenthesis");p.push(i.slice(0,v.index)),p.push(s(f[v[1]],f)),i=i.slice(v.index+v[0].length)}return p.push(i),p}return r?o:s(o[0],o)}function l(w,e){if(e&&e.flat){var o=e&&e.escape||"___",a=w[0],n;if(!a)return"";for(var r=new RegExp("\\"+o+"([0-9]+)\\"+o),u=0;a!=n;){if(u++>1e4)throw Error("Circular references in "+w);n=a,a=a.replace(r,s)}return a}return w.reduce(function i(f,h){return Array.isArray(h)&&(h=h.reduce(i,"")),f+h},"");function s(i,f){if(w[f]==null)throw Error("Reference "+f+"is undefined");return w[f]}}function b(w,e){return Array.isArray(w)?l(w,e):d(w,e)}b.parse=d,b.stringify=l,B.exports=b},{}],249:[function(t,B,H){var d=t("pick-by-alias");B.exports=l;function l(b){var w;return arguments.length>1&&(b=arguments),typeof b=="string"?b=b.split(/\s/).map(parseFloat):typeof b=="number"&&(b=[b]),b.length&&typeof b[0]=="number"?b.length===1?w={width:b[0],height:b[0],x:0,y:0}:b.length===2?w={width:b[0],height:b[1],x:0,y:0}:w={x:b[0],y:b[1],width:b[2]-b[0]||0,height:b[3]-b[1]||0}:b&&(b=d(b,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),w={x:b.left||0,y:b.top||0},b.width==null?b.right?w.width=b.right-w.x:w.width=0:w.width=b.width,b.height==null?b.bottom?w.height=b.bottom-w.y:w.height=0:w.height=b.height),w}},{"pick-by-alias":253}],250:[function(t,B,H){B.exports=b;var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function b(o){var a=[];return o.replace(l,function(n,r,u){var s=r.toLowerCase();for(u=e(u),s=="m"&&u.length>2&&(a.push([r].concat(u.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(u.length==d[s])return u.unshift(r),a.push(u);if(u.length<d[s])throw new Error("malformed path data");a.push([r].concat(u.splice(0,d[s])))}}),a}var w=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(o){var a=o.match(w);return a?a.map(Number):[]}},{}],251:[function(t,B,H){B.exports=function(l,b){b||(b=[0,""]),l=String(l);var w=parseFloat(l,10);return b[0]=w,b[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],252:[function(t,B,H){(function(d){(function(){(function(){var l,b,w,e,o,a;typeof performance!="undefined"&&performance!==null&&performance.now?B.exports=function(){return performance.now()}:typeof d!="undefined"&&d!==null&&d.hrtime?(B.exports=function(){return(l()-o)/1e6},b=d.hrtime,l=function(){var n;return n=b(),n[0]*1e9+n[1]},e=l(),a=d.uptime()*1e9,o=e-a):Date.now?(B.exports=function(){return Date.now()-w},w=Date.now()):(B.exports=function(){return new Date().getTime()-w},w=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:277}],253:[function(t,B,H){B.exports=function(w,e,o){var a={},n,r;if(typeof e=="string"&&(e=l(e)),Array.isArray(e)){var u={};for(r=0;r<e.length;r++)u[e[r]]=!0;e=u}for(n in e)e[n]=l(e[n]);var s={};for(n in e){var i=e[n];if(Array.isArray(i))for(r=0;r<i.length;r++){var f=i[r];if(o&&(s[f]=!0),f in w){if(a[n]=w[f],o)for(var h=r;h<i.length;h++)s[i[h]]=!0;break}}else n in w&&(e[n]&&(a[n]=w[n]),o&&(s[n]=!0))}if(o)for(n in w)s[n]||(a[n]=w[n]);return a};var d={};function l(b){return d[b]?d[b]:(typeof b=="string"&&(b=d[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(t,B,H){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var d=t("./lib/build-log"),l=t("./lib/epsilon"),b=t("./lib/intersecter"),w=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),o=t("./lib/geojson"),a=!1,n=l(),r;r={buildLog:function(s){return s===!0?a=d():s===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var i=b(!0,n,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){var f=b(!1,n,a);return{combined:f.calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:w(s.segments,n,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return o.toPolygon(r,s)},polygonToGeoJSON:function(s){return o.fromPolygon(r,n,s)},union:function(s,i){return u(s,i,r.selectUnion)},intersect:function(s,i){return u(s,i,r.selectIntersect)},difference:function(s,i){return u(s,i,r.selectDifference)},differenceRev:function(s,i){return u(s,i,r.selectDifferenceRev)},xor:function(s,i){return u(s,i,r.selectXor)}};function u(s,i,f){var h=r.segments(s),p=r.segments(i),v=r.combine(h,p),y=f(v);return r.polygon(y)}typeof window=="object"&&(window.PolyBool=r),B.exports=r},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(t,B,H){function d(){var l,b=0,w=!1;function e(o,a){return l.list.push({type:o,data:a?JSON.parse(JSON.stringify(a)):void 0}),l}return l={list:[],segmentId:function(){return b++},checkIntersection:function(o,a){return e("check",{seg1:o,seg2:a})},segmentChop:function(o,a){return e("div_seg",{seg:o,pt:a}),e("chop",{seg:o,pt:a})},statusRemove:function(o){return e("pop_seg",{seg:o})},segmentUpdate:function(o){return e("seg_update",{seg:o})},segmentNew:function(o,a){return e("new_seg",{seg:o,primary:a})},segmentRemove:function(o){return e("rem_seg",{seg:o})},tempStatus:function(o,a,n){return e("temp_status",{seg:o,above:a,below:n})},rewind:function(o){return e("rewind",{seg:o})},status:function(o,a,n){return e("status",{seg:o,above:a,below:n})},vert:function(o){return o===w?l:(w=o,e("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),e("log",{txt:o})},reset:function(){return e("reset")},selected:function(o){return e("selected",{segs:o})},chainStart:function(o){return e("chain_start",{seg:o})},chainRemoveHead:function(o,a){return e("chain_rem_head",{index:o,pt:a})},chainRemoveTail:function(o,a){return e("chain_rem_tail",{index:o,pt:a})},chainNew:function(o,a){return e("chain_new",{pt1:o,pt2:a})},chainMatch:function(o){return e("chain_match",{index:o})},chainClose:function(o){return e("chain_close",{index:o})},chainAddHead:function(o,a){return e("chain_add_head",{index:o,pt:a})},chainAddTail:function(o,a){return e("chain_add_tail",{index:o,pt:a})},chainConnect:function(o,a){return e("chain_con",{index1:o,index2:a})},chainReverse:function(o){return e("chain_rev",{index:o})},chainJoin:function(o,a){return e("chain_join",{index1:o,index2:a})},done:function(){return e("done")}},l}B.exports=d},{}],256:[function(t,B,H){function d(l){typeof l!="number"&&(l=1e-10);var b={epsilon:function(w){return typeof w=="number"&&(l=w),l},pointAboveOrOnLine:function(w,e,o){var a=e[0],n=e[1],r=o[0],u=o[1],s=w[0],i=w[1];return(r-a)*(i-n)-(u-n)*(s-a)>=-l},pointBetween:function(w,e,o){var a=w[1]-e[1],n=o[0]-e[0],r=w[0]-e[0],u=o[1]-e[1],s=r*n+a*u;if(s<l)return!1;var i=n*n+u*u;return!(s-i>-l)},pointsSameX:function(w,e){return Math.abs(w[0]-e[0])<l},pointsSameY:function(w,e){return Math.abs(w[1]-e[1])<l},pointsSame:function(w,e){return b.pointsSameX(w,e)&&b.pointsSameY(w,e)},pointsCompare:function(w,e){return b.pointsSameX(w,e)?b.pointsSameY(w,e)?0:w[1]<e[1]?-1:1:w[0]<e[0]?-1:1},pointsCollinear:function(w,e,o){var a=w[0]-e[0],n=w[1]-e[1],r=e[0]-o[0],u=e[1]-o[1];return Math.abs(a*u-r*n)<l},linesIntersect:function(w,e,o,a){var n=e[0]-w[0],r=e[1]-w[1],u=a[0]-o[0],s=a[1]-o[1],i=n*s-r*u;if(Math.abs(i)<l)return!1;var f=w[0]-o[0],h=w[1]-o[1],p=(u*h-s*f)/i,v=(n*h-r*f)/i,y={alongA:0,alongB:0,pt:[w[0]+p*n,w[1]+p*r]};return p<=-l?y.alongA=-2:p<l?y.alongA=-1:p-1<=-l?y.alongA=0:p-1<l?y.alongA=1:y.alongA=2,v<=-l?y.alongB=-2:v<l?y.alongB=-1:v-1<=-l?y.alongB=0:v-1<l?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(w,e){for(var o=w[0],a=w[1],n=e[e.length-1][0],r=e[e.length-1][1],u=!1,s=0;s<e.length;s++){var i=e[s][0],f=e[s][1];f-a>l!=r-a>l&&(n-i)*(a-f)/(r-f)+i-o>l&&(u=!u),n=i,r=f}return u}};return b}B.exports=d},{}],257:[function(t,B,H){var d={toPolygon:function(l,b){function w(a){if(a.length<=0)return l.segments({inverted:!1,regions:[]});function n(s){var i=s.slice(0,s.length-1);return l.segments({inverted:!1,regions:[i]})}for(var r=n(a[0]),u=1;u<a.length;u++)r=l.selectDifference(l.combine(r,n(a[u])));return r}if(b.type==="Polygon")return l.polygon(w(b.coordinates));if(b.type==="MultiPolygon"){for(var e=l.segments({inverted:!1,regions:[]}),o=0;o<b.coordinates.length;o++)e=l.selectUnion(l.combine(e,w(b.coordinates[o])));return l.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(l,b,w){w=l.polygon(l.segments(w));function e(p,v){return b.pointInsideRegion([(p[0][0]+p[1][0])*.5,(p[0][1]+p[1][1])*.5],v)}function o(p){return{region:p,children:[]}}var a=o(null);function n(p,v){for(var y=0;y<p.children.length;y++){var g=p.children[y];if(e(v,g.region)){n(g,v);return}}for(var A=o(v),y=0;y<p.children.length;y++){var g=p.children[y];e(g.region,v)&&(A.children.push(g),p.children.splice(y,1),y--)}p.children.push(A)}for(var r=0;r<w.regions.length;r++){var u=w.regions[r];u.length<3||n(a,u)}function s(p,v){for(var y=0,g=p[p.length-1][0],A=p[p.length-1][1],m=[],M=0;M<p.length;M++){var _=p[M][0],T=p[M][1];m.push([_,T]),y+=T*g-_*A,g=_,A=T}var x=y<0;return x!==v&&m.reverse(),m.push([m[0][0],m[0][1]]),m}var i=[];function f(p){var v=[s(p.region,!1)];i.push(v);for(var y=0;y<p.children.length;y++)v.push(h(p.children[y]))}function h(p){for(var v=0;v<p.children.length;v++)f(p.children[v]);return s(p.region,!0)}for(var r=0;r<a.children.length;r++)f(a.children[r]);return i.length<=0?{type:"Polygon",coordinates:[]}:i.length==1?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}};B.exports=d},{}],258:[function(t,B,H){var d=t("./linked-list");function l(b,w,e){function o(y,g){return{id:e?e.segmentId():-1,start:y,end:g,myFill:{above:null,below:null},otherFill:null}}function a(y,g,A){return{id:e?e.segmentId():-1,start:y,end:g,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var n=d.create();function r(y,g,A,m,M,_){var T=w.pointsCompare(g,M);return T!==0?T:w.pointsSame(A,_)?0:y!==m?y?1:-1:w.pointAboveOrOnLine(A,m?M:_,m?_:M)?1:-1}function u(y,g){n.insertBefore(y,function(A){var m=r(y.isStart,y.pt,g,A.isStart,A.pt,A.other.pt);return m<0})}function s(y,g){var A=d.node({isStart:!0,pt:y.start,seg:y,primary:g,other:null,status:null});return u(A,y.end),A}function i(y,g,A){var m=d.node({isStart:!1,pt:g.end,seg:g,primary:A,other:y,status:null});y.other=m,u(m,y.pt)}function f(y,g){var A=s(y,g);return i(A,y,g),A}function h(y,g){e&&e.segmentChop(y.seg,g),y.other.remove(),y.seg.end=g,y.other.pt=g,u(y.other,y.pt)}function p(y,g){var A=a(g,y.seg.end,y.seg);return h(y,g),f(A,y.primary)}function v(y,g){var A=d.create();function m(D,O){var F=D.seg.start,Y=D.seg.end,X=O.seg.start,q=O.seg.end;return w.pointsCollinear(F,X,q)?w.pointsCollinear(Y,X,q)||w.pointAboveOrOnLine(Y,X,q)?1:-1:w.pointAboveOrOnLine(F,X,q)?1:-1}function M(D){return A.findTransition(function(O){var F=m(D,O.ev);return F>0})}function _(D,O){var F=D.seg,Y=O.seg,X=F.start,q=F.end,$=Y.start,V=Y.end;e&&e.checkIntersection(F,Y);var K=w.linesIntersect(X,q,$,V);if(K===!1){if(!w.pointsCollinear(X,q,$)||w.pointsSame(X,V)||w.pointsSame(q,$))return!1;var se=w.pointsSame(X,$),ue=w.pointsSame(q,V);if(se&&ue)return O;var oe=!se&&w.pointBetween(X,$,V),U=!ue&&w.pointBetween(q,$,V);if(se)return U?p(O,q):p(D,V),O;oe&&(ue||(U?p(O,q):p(D,V)),p(O,X))}else K.alongA===0&&(K.alongB===-1?p(D,$):K.alongB===0?p(D,K.pt):K.alongB===1&&p(D,V)),K.alongB===0&&(K.alongA===-1?p(O,X):K.alongA===0?p(O,K.pt):K.alongA===1&&p(O,q));return!1}for(var T=[];!n.isEmpty();){var x=n.getHead();if(e&&e.vert(x.pt[0]),x.isStart){let D=function(){if(L){var O=_(x,L);if(O)return O}return S?_(x,S):!1};e&&e.segmentNew(x.seg,x.primary);var c=M(x),L=c.before?c.before.ev:null,S=c.after?c.after.ev:null;e&&e.tempStatus(x.seg,L?L.seg:!1,S?S.seg:!1);var k=D();if(k){if(b){var P;x.seg.myFill.below===null?P=!0:P=x.seg.myFill.above!==x.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=x.seg.myFill;e&&e.segmentUpdate(k.seg),x.other.remove(),x.remove()}if(n.getHead()!==x){e&&e.rewind(x.seg);continue}if(b){var P;x.seg.myFill.below===null?P=!0:P=x.seg.myFill.above!==x.seg.myFill.below,S?x.seg.myFill.below=S.seg.myFill.above:x.seg.myFill.below=y,P?x.seg.myFill.above=!x.seg.myFill.below:x.seg.myFill.above=x.seg.myFill.below}else if(x.seg.otherFill===null){var z;S?x.primary===S.primary?z=S.seg.otherFill.above:z=S.seg.myFill.above:z=x.primary?g:y,x.seg.otherFill={above:z,below:z}}e&&e.status(x.seg,L?L.seg:!1,S?S.seg:!1),x.other.status=c.insert(d.node({ev:x}))}else{var I=x.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(I.prev)&&A.exists(I.next)&&_(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!x.primary){var R=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=R}T.push(x.seg)}n.getHead().remove()}return e&&e.done(),T}return b?{addRegion:function(y){for(var g,A=y[y.length-1],m=0;m<y.length;m++){g=A,A=y[m];var M=w.pointsCompare(g,A);M!==0&&f(o(M<0?g:A,M<0?A:g),!0)}},calculate:function(y){return v(y,!1)}}:{calculate:function(y,g,A,m){return y.forEach(function(M){f(a(M.start,M.end,M),!0)}),A.forEach(function(M){f(a(M.start,M.end,M),!1)}),v(g,m)}}}B.exports=l},{"./linked-list":259}],259:[function(t,B,H){var d={create:function(){var l={root:{root:!0,next:null},exists:function(b){return!(b===null||b===l.root)},isEmpty:function(){return l.root.next===null},getHead:function(){return l.root.next},insertBefore:function(b,w){for(var e=l.root,o=l.root.next;o!==null;){if(w(o)){b.prev=o.prev,b.next=o,o.prev.next=b,o.prev=b;return}e=o,o=o.next}e.next=b,b.prev=e,b.next=null},findTransition:function(b){for(var w=l.root,e=l.root.next;e!==null&&!b(e);)w=e,e=e.next;return{before:w===l.root?null:w,after:e,insert:function(o){return o.prev=w,o.next=e,w.next=o,e!==null&&(e.prev=o),o}}}};return l},node:function(l){return l.prev=null,l.next=null,l.remove=function(){l.prev.next=l.next,l.next&&(l.next.prev=l.prev),l.prev=null,l.next=null},l}};B.exports=d},{}],260:[function(t,B,H){function d(l,b,w){var e=[],o=[];return l.forEach(function(a){var n=a.start,r=a.end;if(b.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}w&&w.chainStart(a);var u={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},i=u;function f(z,I,R){return i.index=z,i.matches_head=I,i.matches_pt1=R,i===u?(i=s,!1):(i=null,!0)}for(var h=0;h<e.length;h++){var p=e[h],v=p[0];p[1];var y=p[p.length-1];if(p[p.length-2],b.pointsSame(v,n)){if(f(h,!0,!0))break}else if(b.pointsSame(v,r)){if(f(h,!0,!1))break}else if(b.pointsSame(y,n)){if(f(h,!1,!0))break}else if(b.pointsSame(y,r)&&f(h,!1,!1))break}if(i===u){e.push([n,r]),w&&w.chainNew(n,r);return}if(i===s){w&&w.chainMatch(u.index);var g=u.index,A=u.matches_pt1?r:n,m=u.matches_head,p=e[g],M=m?p[0]:p[p.length-1],_=m?p[1]:p[p.length-2],T=m?p[p.length-1]:p[0],x=m?p[p.length-2]:p[1];if(b.pointsCollinear(_,M,A)&&(m?(w&&w.chainRemoveHead(u.index,A),p.shift()):(w&&w.chainRemoveTail(u.index,A),p.pop()),M=_),b.pointsSame(T,A)){e.splice(g,1),b.pointsCollinear(x,T,M)&&(m?(w&&w.chainRemoveTail(u.index,M),p.pop()):(w&&w.chainRemoveHead(u.index,M),p.shift())),w&&w.chainClose(u.index),o.push(p);return}m?(w&&w.chainAddHead(u.index,A),p.unshift(A)):(w&&w.chainAddTail(u.index,A),p.push(A));return}function c(z){w&&w.chainReverse(z),e[z].reverse()}function L(z,I){var R=e[z],D=e[I],O=R[R.length-1],F=R[R.length-2],Y=D[0],X=D[1];b.pointsCollinear(F,O,Y)&&(w&&w.chainRemoveTail(z,O),R.pop(),O=F),b.pointsCollinear(O,Y,X)&&(w&&w.chainRemoveHead(I,Y),D.shift()),w&&w.chainJoin(z,I),e[z]=R.concat(D),e.splice(I,1)}var S=u.index,k=s.index;w&&w.chainConnect(S,k);var P=e[S].length<e[k].length;u.matches_head?s.matches_head?P?(c(S),L(S,k)):(c(k),L(k,S)):L(k,S):s.matches_head?L(S,k):P?(c(S),L(k,S)):(c(k),L(S,k))}),o}B.exports=d},{}],261:[function(t,B,H){function d(b,w,e){var o=[];return b.forEach(function(a){var n=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);w[n]!==0&&o.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:w[n]===1,below:w[n]===2},otherFill:null})}),e&&e.selected(o),o}var l={union:function(b,w){return d(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],w)},intersect:function(b,w){return d(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],w)},difference:function(b,w){return d(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],w)},differenceRev:function(b,w){return d(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],w)},xor:function(b,w){return d(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],w)}};B.exports=l},{}],262:[function(t,B,H){var d=t("stream").Transform,l=t("stream-parser");function b(){d.call(this,{readableObjectMode:!0})}b.prototype=Object.create(d.prototype),b.prototype.constructor=b,l(b.prototype),H.ParserStream=b,H.sliceEq=function(e,o,a){for(var n=o,r=0;r<a.length;)if(e[n++]!==a[r++])return!1;return!0},H.str2arr=function(e,o){var a=[],n=0;if(o&&o==="hex")for(;n<e.length;)a.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)a.push(e.charCodeAt(n)&255);return a},H.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},H.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},H.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|e[o+3]*16777216},H.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|e[o]*16777216};function w(e,o,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,o&&(this.code=o),a&&(this.statusCode=a)}w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,H.ProbeError=w},{stream:285,"stream-parser":301}],263:[function(t,B,H){function d(w,e){var o=new Error(w);return o.code=e,o}function l(w){try{return decodeURIComponent(escape(w))}catch{return w}}function b(w,e,o){this.input=w.subarray(e,o),this.start=e;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw d("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}b.prototype.each=function(w){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();!o.offset||this.scan_ifd(o.id,o.offset,w)}},b.prototype.read_uint16=function(w){var e=this.input;if(w+2>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?e[w]*256+e[w+1]:e[w]+e[w+1]*256},b.prototype.read_uint32=function(w){var e=this.input;if(w+4>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?e[w]*16777216+e[w+1]*65536+e[w+2]*256+e[w+3]:e[w]+e[w+1]*256+e[w+2]*65536+e[w+3]*16777216},b.prototype.is_subifd_link=function(w,e){return w===0&&e===34665||w===0&&e===34853||w===34665&&e===40965},b.prototype.exif_format_length=function(w){switch(w){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(w,e){var o;switch(w){case 1:case 2:return o=this.input[e],o;case 6:return o=this.input[e],o|(o&128)*33554430;case 3:return o=this.read_uint16(e),o;case 8:return o=this.read_uint16(e),o|(o&32768)*131070;case 4:return o=this.read_uint32(e),o;case 9:return o=this.read_uint32(e),o|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},b.prototype.scan_ifd=function(w,e,o){var a=this.read_uint16(e);e+=2;for(var n=0;n<a;n++){var r=this.read_uint16(e),u=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(u),f=s*i,h=f<=4?e+8:this.read_uint32(e+8),p=!1;if(h+f>this.input.length)throw d("unexpected EOF","EBADDATA");for(var v=[],y=h,g=0;g<s;g++,y+=i){var A=this.exif_format_read(u,y);if(A===null){v=null;break}v.push(A)}Array.isArray(v)&&u===2&&(v=l(String.fromCharCode.apply(null,v)),v&&v[v.length-1]==="\0"&&(v=v.slice(0,-1))),this.is_subifd_link(w,r)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:r,offset:v[0]}),p=!0);var m={is_big_endian:this.big_endian,ifd:w,tag:r,format:u,count:s,entry_offset:e+this.start,data_length:f,data_offset:h+this.start,value:v,is_subifd_link:p};if(o(m)===!1){this.aborted=!0;return}e+=12}w===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},B.exports.ExifParser=b,B.exports.get_orientation=function(w){var e=0;try{return new b(w,0,w.length).each(function(o){if(o.ifd===0&&o.tag===274&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch{return-1}}},{}],264:[function(t,B,H){var d=t("./common").readUInt16BE,l=t("./common").readUInt32BE;function b(s,i){if(s.length<4+i)return null;var f=l(s,i);return s.length<f+i||f<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(i+4,i+8)),data:s.slice(i+8,i+f),end:i+f}}B.exports.unbox=b;function w(s,i){for(var f=0;;){var h=b(s,f);if(!h)break;switch(h.boxtype){case"ispe":i.sizes.push({width:l(h.data,4),height:l(h.data,8)});break;case"irot":i.transforms.push({type:"irot",value:h.data[0]&3});break;case"imir":i.transforms.push({type:"imir",value:h.data[0]&1});break}f=h.end}}function e(s,i,f){for(var h=0,p=0;p<f;p++)h=h*256+(s[i+p]||0);return h}function o(s,i){for(var f=s[4]>>4&15,h=s[4]&15,p=s[5]>>4&15,v=d(s,6),y=8,g=0;g<v;g++){var A=d(s,y);y+=2;var m=d(s,y);y+=2;var M=e(s,y,p);y+=p;var _=d(s,y);if(y+=2,m===0&&_===1){var T=e(s,y,f),x=e(s,y+f,h);i.item_loc[A]={length:x,offset:T+M}}y+=_*(f+h)}}function a(s,i){for(var f=d(s,4),h=6,p=0;p<f;p++){var v=b(s,h);if(!v)break;if(v.boxtype==="infe"){for(var y=d(v.data,4),g="",A=8;A<v.data.length&&v.data[A];A++)g+=String.fromCharCode(v.data[A]);i.item_inf[g]=y}h=v.end}}function n(s,i){for(var f=0;;){var h=b(s,f);if(!h)break;h.boxtype==="ipco"&&w(h.data,i),f=h.end}}function r(s,i){for(var f=4;;){var h=b(s,f);if(!h)break;h.boxtype==="iprp"&&n(h.data,i),h.boxtype==="iloc"&&o(h.data,i),h.boxtype==="iinf"&&a(h.data,i),f=h.end}}function u(s){var i=s.reduce(function(p,v){return p.width>v.width||p.width===v.width&&p.height>v.height?p:v}),f=s.reduce(function(p,v){return p.height>v.height||p.height===v.height&&p.width>v.width?p:v}),h;return i.width>f.height||i.width===f.height&&i.height>f.width?h=i:h=f,h}B.exports.readSizeFromMeta=function(s){var i={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(s,i),!!i.sizes.length){var f=u(i.sizes),h=1;i.transforms.forEach(function(v){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(v.type==="imir"&&(v.value===0?h=g[h]:(h=g[h],h=y[h],h=y[h])),v.type==="irot")for(var A=0;A<v.value;A++)h=y[h]});var p=null;return i.item_inf.Exif&&(p=i.item_loc[i.item_inf.Exif]),{width:f.width,height:f.height,orientation:i.transforms.length?h:null,variants:i.sizes,exif_location:p}}},B.exports.getMimeType=function(s){var i=String.fromCharCode.apply(null,s.slice(0,4)),f={};f[i]=!0;for(var h=8;h<s.length;h+=4)f[String.fromCharCode.apply(null,s.slice(h,h+4))]=!0;if(!(!f.mif1&&!f.msf1&&!f.miaf))return i==="avif"||i==="avis"||i==="avio"?{type:"avif",mime:"image/avif"}:i==="heic"||i==="heix"?{type:"heic",mime:"image/heic"}:i==="hevc"||i==="hevx"?{type:"heic",mime:"image/heic-sequence"}:f.avif||f.avis?{type:"avif",mime:"image/avif"}:f.heic||f.heix||f.hevc||f.hevx||f.heis?f.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=t("../miaf_utils"),e=t("../exif_utils"),o=d("ftyp");B.exports=function(a){if(!!l(a,4,o)){var n=w.unbox(a,0);if(!!n){var r=w.getMimeType(n.data);if(!!r){for(var u,s=n.end;;){var i=w.unbox(a,s);if(!i)break;if(s=i.end,i.boxtype==="mdat")return;if(i.boxtype==="meta"){u=i.data;break}}if(!!u){var f=w.readSizeFromMeta(u);if(!!f){var h={width:f.width,height:f.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(f.variants.length>1&&(h.variants=f.variants),f.orientation&&(h.orientation=f.orientation),f.exif_location&&f.exif_location.offset+f.exif_location.length<=a.length){var p=b(a,f.exif_location.offset),v=a.slice(f.exif_location.offset+p+4,f.exif_location.offset+f.exif_location.length),y=e.get_orientation(v);y>0&&(h.orientation=y)}return h}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=d("BM");B.exports=function(e){if(!(e.length<26)&&!!l(e,0,w))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=d("GIF87a"),e=d("GIF89a");B.exports=function(o){if(!(o.length<10)&&!(!l(o,0,w)&&!l(o,0,e)))return{width:b(o,6),height:b(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(t,B,H){var d=t("../common").readUInt16LE,l=0,b=1,w=16;B.exports=function(e){var o=d(e,0),a=d(e,2),n=d(e,4);if(!(o!==l||a!==b||!n)){for(var r=[],u={width:0,height:0},s=0;s<n;s++){var i=e[6+w*s]||256,f=e[6+w*s+1]||256,h={width:i,height:f};r.push(h),(i>u.width||f>u.height)&&(u=h)}return{width:u.width,height:u.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(t,B,H){var d=t("../common").readUInt16BE,l=t("../common").str2arr,b=t("../common").sliceEq,w=t("../exif_utils"),e=l("Exif\0\0");B.exports=function(o){if(!(o.length<2)&&!(o[0]!==255||o[1]!==216||o[2]!==255))for(var a=2;;){for(;;){if(o.length-a<2)return;if(o[a++]===255)break}for(var n=o[a++],r;n===255;)n=o[a++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(o.length-a<2)return;r=d(o,a)-2,a+=2}else return;if(n===217||n===218)return;var u;if(n===225&&r>=10&&b(o,a,e)&&(u=w.get_orientation(o.slice(a+6,a+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(o.length-a<r)return;var s={width:d(o,a+3),height:d(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return u>0&&(s.orientation=u),s}a+=r}}},{"../common":262,"../exif_utils":263}],270:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=d(`\x89PNG\r

`),e=d("IHDR");B.exports=function(o){if(!(o.length<24)&&!!l(o,0,w)&&!!l(o,12,e))return{width:b(o,16),height:b(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=d("8BPS\0");B.exports=function(e){if(!(e.length<6+16)&&!!l(e,0,w))return{width:b(e,6+12),height:b(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(t,B,H){function d(i){return i===32||i===9||i===13||i===10}function l(i){return typeof i=="number"&&isFinite(i)&&i>0}function b(i){var f=0,h=i.length;for(i[0]===239&&i[1]===187&&i[2]===191&&(f=3);f<h&&d(i[f]);)f++;return f===h?!1:i[f]===60}var w=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function u(i){var f=i.match(o),h=i.match(a),p=i.match(n);return{width:f&&(f[1]||f[2]),height:h&&(h[1]||h[2]),viewbox:p&&(p[1]||p[2])}}function s(i){return r.test(i)?i.match(r)[0]:"px"}B.exports=function(i){if(!!b(i)){for(var f="",h=0;h<i.length;h++)f+=String.fromCharCode(i[h]);var p=(f.match(w)||[""])[0];if(!!e.test(p)){var v=u(p),y=parseFloat(v.width),g=parseFloat(v.height);if(v.width&&v.height)return!l(y)||!l(g)?void 0:{width:y,height:g,type:"svg",mime:"image/svg+xml",wUnits:s(v.width),hUnits:s(v.height)};var A=(v.viewbox||"").split(" "),m={width:A[2],height:A[3]},M=parseFloat(m.width),_=parseFloat(m.height);if(!(!l(M)||!l(_))&&s(m.width)===s(m.height)){var T=M/_;return v.width?l(y)?{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:s(v.width),hUnits:s(v.width)}:void 0:v.height?l(g)?{width:g*T,height:g,type:"svg",mime:"image/svg+xml",wUnits:s(v.height),hUnits:s(v.height)}:void 0:{width:M,height:_,type:"svg",mime:"image/svg+xml",wUnits:s(m.width),hUnits:s(m.height)}}}}}},{}],273:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=t("../common").readUInt16BE,e=t("../common").readUInt32LE,o=t("../common").readUInt32BE,a=d("II*\0"),n=d("MM\0*");function r(i,f,h){return h?w(i,f):b(i,f)}function u(i,f,h){return h?o(i,f):e(i,f)}function s(i,f,h){var p=r(i,f+2,h),v=u(i,f+4,h);return v!==1||p!==3&&p!==4?null:p===3?r(i,f+8,h):u(i,f+8,h)}B.exports=function(i){if(!(i.length<8)&&!(!l(i,0,a)&&!l(i,0,n))){var f=i[0]===77,h=u(i,4,f)-8;if(!(h<0)){var p=h+8;if(!(i.length-p<2)){var v=r(i,p+0,f)*12;if(!(v<=0)&&(p+=2,!(i.length-p<v))){var y,g,A,m;for(y=0;y<v;y+=12)m=r(i,p+y,f),m===256?g=s(i,p+y,f):m===257&&(A=s(i,p+y,f));if(g&&A)return{width:g,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=t("../common").readUInt32LE,e=t("../exif_utils"),o=d("RIFF"),a=d("WEBP");function n(s,i){if(!(s[i+3]!==157||s[i+4]!==1||s[i+5]!==42))return{width:b(s,i+6)&16383,height:b(s,i+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,i){if(s[i]===47){var f=w(s,i+1);return{width:(f&16383)+1,height:(f>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function u(s,i){return{width:(s[i+6]<<16|s[i+5]<<8|s[i+4])+1,height:(s[i+9]<<i|s[i+8]<<8|s[i+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}B.exports=function(s){if(!(s.length<16)&&!(!l(s,0,o)&&!l(s,8,a))){var i=12,f=null,h=0,p=w(s,4)+8;if(!(p>s.length)){for(;i+8<p;){if(s[i]===0){i++;continue}var v=String.fromCharCode.apply(null,s.slice(i,i+4)),y=w(s,i+4);v==="VP8 "&&y>=10?f=f||n(s,i+8):v==="VP8L"&&y>=9?f=f||r(s,i+8):v==="VP8X"&&y>=10?f=f||u(s,i+8):v==="EXIF"&&(h=e.get_orientation(s.slice(i+8,i+8+y)),i=1/0),i+=8+y}if(!!f)return h>0&&(f.orientation=h),f}}}},{"../common":262,"../exif_utils":263}],275:[function(t,B,H){B.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(t,B,H){var d=t("./lib/parsers_sync");function l(b){for(var w=Object.keys(d),e=0;e<w.length;e++){var o=d[w[e]](b);if(o)return o}return null}B.exports=function(w){return l(w)},B.exports.parsers=d},{"./lib/parsers_sync":275}],277:[function(t,B,H){var d=B.exports={},l,b;function w(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=w}catch{l=w}try{typeof clearTimeout=="function"?b=clearTimeout:b=e}catch{b=e}})();function o(v){if(l===setTimeout)return setTimeout(v,0);if((l===w||!l)&&setTimeout)return l=setTimeout,setTimeout(v,0);try{return l(v,0)}catch{try{return l.call(null,v,0)}catch{return l.call(this,v,0)}}}function a(v){if(b===clearTimeout)return clearTimeout(v);if((b===e||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(v);try{return b(v)}catch{try{return b.call(null,v)}catch{return b.call(this,v)}}}var n=[],r=!1,u,s=-1;function i(){!r||!u||(r=!1,u.length?n=u.concat(n):s=-1,n.length&&f())}function f(){if(!r){var v=o(i);r=!0;for(var y=n.length;y;){for(u=n,n=[];++s<y;)u&&u[s].run();s=-1,y=n.length}u=null,r=!1,a(v)}}d.nextTick=function(v){var y=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)y[g-1]=arguments[g];n.push(new h(v,y)),n.length===1&&!r&&o(f)};function h(v,y){this.fun=v,this.array=y}h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function p(){}d.on=p,d.addListener=p,d.once=p,d.off=p,d.removeListener=p,d.removeAllListeners=p,d.emit=p,d.prependListener=p,d.prependOnceListener=p,d.listeners=function(v){return[]},d.binding=function(v){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(v){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],278:[function(t,B,H){(function(d){(function(){for(var l=t("performance-now"),b=typeof window=="undefined"?d:window,w=["moz","webkit"],e="AnimationFrame",o=b["request"+e],a=b["cancel"+e]||b["cancelRequest"+e],n=0;!o&&n<w.length;n++)o=b[w[n]+"Request"+e],a=b[w[n]+"Cancel"+e]||b[w[n]+"CancelRequest"+e];if(!o||!a){var r=0,u=0,s=[],i=1e3/60;o=function(f){if(s.length===0){var h=l(),p=Math.max(0,i-(h-r));r=p+h,setTimeout(function(){var v=s.slice(0);s.length=0;for(var y=0;y<v.length;y++)if(!v[y].cancelled)try{v[y].callback(r)}catch(g){setTimeout(function(){throw g},0)}},Math.round(p))}return s.push({handle:++u,callback:f,cancelled:!1}),u},a=function(f){for(var h=0;h<s.length;h++)s[h].handle===f&&(s[h].cancelled=!0)}}B.exports=function(f){return o.call(b,f)},B.exports.cancel=function(){a.apply(b,arguments)},B.exports.polyfill=function(f){f||(f=b),f.requestAnimationFrame=o,f.cancelAnimationFrame=a}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(t,B,H){var d=t("array-bounds"),l=t("color-normalize"),b=t("update-diff"),w=t("pick-by-alias"),e=t("object-assign"),o=t("flatten-vertex-data"),a=t("to-float32"),n=a.float32,r=a.fract32;B.exports=s;var u=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(i,f){if(typeof i=="function"?(f||(f={}),f.regl=i):f=i,f.length&&(f.positions=f),i=f.regl,!i.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var h=i._gl,p,v,y,g,A,m,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return g=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),v=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=i.buffer({usage:"static",type:"float",data:u}),L(f),p=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:g,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:v,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:A,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:u.length}),e(T,{update:L,draw:x,destroy:S,regl:i,gl:h,canvas:h.canvas,groups:_}),T;function T(k){k?L(k):k===null&&S(),x()}function x(k){if(typeof k=="number")return c(k);k&&!Array.isArray(k)&&(k=[k]),i._refresh(),_.forEach(function(P,z){if(!!P){if(k&&(k[z]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}c(z)}})}function c(k){typeof k=="number"&&(k=_[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],p(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,z=0;if(T.groups=_=k.map(function(X,q){var $=_[q];if(X)typeof X=="function"?X={after:X}:typeof X[0]=="number"&&(X={positions:X});else return $;return X=w(X,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),$||(_[q]=$={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},X=e({},M,X)),b($,X,[{lineWidth:function(V){return+V*.5},capSize:function(V){return+V*.5},opacity:parseFloat,errors:function(V){return V=o(V),z+=V.length,V},positions:function(V,K){return V=o(V,"float64"),K.count=Math.floor(V.length/2),K.bounds=d(V,2),K.offset=P,P+=K.count,V}},{color:function(V,K){var se=K.count;if(V||(V="transparent"),!Array.isArray(V)||typeof V[0]=="number"){var ue=V;V=Array(se);for(var oe=0;oe<se;oe++)V[oe]=ue}if(V.length<se)throw Error("Not enough colors");for(var U=new Uint8Array(se*4),G=0;G<se;G++){var re=l(V[G],"uint8");U.set(re,G*4)}return U},range:function(V,K,se){var ue=K.bounds;return V||(V=ue),K.scale=[1/(V[2]-V[0]),1/(V[3]-V[1])],K.translate=[-V[0],-V[1]],K.scaleFract=r(K.scale),K.translateFract=r(K.translate),V},viewport:function(V){var K;return Array.isArray(V)?K={x:V[0],y:V[1],width:V[2]-V[0],height:V[3]-V[1]}:V?(K={x:V.x||V.left||0,y:V.y||V.top||0},V.right?K.width=V.right-K.x:K.width=V.w||V.width||0,V.bottom?K.height=V.bottom-K.y:K.height=V.h||V.height||0):K={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},K}}]),$}),P||z){var I=_.reduce(function(X,q,$){return X+(q?q.count:0)},0),R=new Float64Array(I*2),D=new Uint8Array(I*4),O=new Float32Array(I*4);_.forEach(function(X,q){if(!!X){var $=X.positions,V=X.count,K=X.offset,se=X.color,ue=X.errors;!V||(D.set(se,K*4),O.set(ue,K*4),R.set($,K*2))}});var F=n(R);v(F);var Y=r(R,F);y(Y),g(D),A(O)}}}function S(){v.destroy(),y.destroy(),g.destroy(),A.destroy(),m.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(t,B,H){var d=t("color-normalize"),l=t("array-bounds"),b=t("object-assign"),w=t("glslify"),e=t("pick-by-alias"),o=t("flatten-vertex-data"),a=t("earcut"),n=t("array-normalize"),r=t("to-float32"),u=r.float32,s=r.fract32,i=t("es6-weak-map"),f=t("parse-rect"),h=t("array-find-index");B.exports=p;function p(v,y){if(!(this instanceof p))return new p(v,y);if(typeof v=="function"?(y||(y={}),y.regl=v):y=v,y.length&&(y.positions=y),v=y.regl,!v.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=p.shaders.has(v)?p.shaders.get(v):p.shaders.set(v,p.createShaders(v)).get(v),this.update(y)}p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new i,p.createShaders=function(v){var y=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,T){return T.join==="round"?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(_,T){return[T.viewport.x,T.viewport.y,_.viewportWidth,_.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},A=v(b({vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g)),m;try{m=v(b({cull:{enable:!0,face:"back"},vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{m=A}var M=v({primitive:"triangle",elements:function(_,T){return T.triangles},offset:0,vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(_,T){return[T.viewport.x,T.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport});return{fill:M,rect:A,miter:m}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var v,y=[],g=arguments.length;g--;)y[g]=arguments[g];y.length&&(v=this).update.apply(v,y),this.draw()},p.prototype.draw=function(){for(var v=this,y=[],g=arguments.length;g--;)y[g]=arguments[g];return(y.length?y:this.passes).forEach(function(A,m){var M;if(A&&Array.isArray(A))return(M=v).draw.apply(M,A);typeof A=="number"&&(A=v.passes[A]),!!(A&&A.count>1&&A.opacity)&&(v.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&v.shaders.fill(A),!!A.thickness&&(A.scale[0]*A.viewport.width>p.precisionThreshold||A.scale[1]*A.viewport.height>p.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=p.maxPoints)?v.shaders.rect(A):v.shaders.miter(A)))}),this},p.prototype.update=function(v){var y=this;if(!!v){v.length!=null?typeof v[0]=="number"&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var g=this,A=g.regl,m=g.gl;if(v.forEach(function(c,L){var S=y.passes[L];if(c!==void 0){if(c===null){y.passes[L]=null;return}if(typeof c[0]=="number"&&(c={positions:c}),c=e(c,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(y.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},c=b({},p.defaults,c)),c.thickness!=null&&(S.thickness=parseFloat(c.thickness)),c.opacity!=null&&(S.opacity=parseFloat(c.opacity)),c.miterLimit!=null&&(S.miterLimit=parseFloat(c.miterLimit)),c.overlay!=null&&(S.overlay=!!c.overlay,L<p.maxLines&&(S.depth=2*(p.maxLines-1-L%p.maxLines)/p.maxLines-1)),c.join!=null&&(S.join=c.join),c.hole!=null&&(S.hole=c.hole),c.fill!=null&&(S.fill=c.fill?d(c.fill,"uint8"):null),c.viewport!=null&&(S.viewport=f(c.viewport)),S.viewport||(S.viewport=f([m.drawingBufferWidth,m.drawingBufferHeight])),c.close!=null&&(S.close=c.close),c.positions===null&&(c.positions=[]),c.positions){var k,P;if(c.positions.x&&c.positions.y){var z=c.positions.x,I=c.positions.y;P=S.count=Math.max(z.length,I.length),k=new Float64Array(P*2);for(var R=0;R<P;R++)k[R*2]=z[R],k[R*2+1]=I[R]}else k=o(c.positions,"float64"),P=S.count=Math.floor(k.length/2);var D=S.bounds=l(k,2);if(S.fill){for(var O=[],F={},Y=0,X=0,q=0,$=S.count;X<$;X++){var V=k[X*2],K=k[X*2+1];isNaN(V)||isNaN(K)||V==null||K==null?(V=k[Y*2],K=k[Y*2+1],F[X]=Y):Y=X,O[q++]=V,O[q++]=K}if(c.splitNull){S.count-1 in F||(F[S.count]=S.count-1);var se=Object.keys(F).map(Number).sort(function(it,ht){return it-ht}),ue=[],oe=0,U=S.hole!=null?S.hole[0]:null;if(U!=null){var G=h(se,function(it){return it>=U});se=se.slice(0,G),se.push(U)}for(var re=function(it){var ht=O.slice(oe*2,se[it]*2).concat(U?O.slice(U*2):[]),Qe=(S.hole||[]).map(function(je){return je-U+(se[it]-oe)}),Ce=a(ht,Qe);Ce=Ce.map(function(je){return je+oe+(je+oe<se[it]?0:U-se[it])}),ue.push.apply(ue,Ce),oe=se[it]+1},ee=0;ee<se.length;ee++)re(ee);for(var j=0,Q=ue.length;j<Q;j++)F[ue[j]]!=null&&(ue[j]=F[ue[j]]);S.triangles=ue}else{for(var ne=a(O,S.hole||[]),ae=0,ie=ne.length;ae<ie;ae++)F[ne[ae]]!=null&&(ne[ae]=F[ne[ae]]);S.triangles=ne}}var fe=new Float64Array(k);n(fe,2,D);var me=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(me[0]=fe[P*2-4],me[1]=fe[P*2-3]):(me[0]=fe[P*2-2],me[1]=fe[P*2-1]):(me[0]=fe[0],me[1]=fe[1]),me.set(fe,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(me[P*2+2]=fe[2],me[P*2+3]=fe[3],S.count-=1):(me[P*2+2]=fe[0],me[P*2+3]=fe[1],me[P*2+4]=fe[2],me[P*2+5]=fe[3]):(me[P*2+2]=fe[P*2-2],me[P*2+3]=fe[P*2-1],me[P*2+4]=fe[P*2-2],me[P*2+5]=fe[P*2-1]);var ce=u(me);S.positionBuffer(ce);var ye=s(me,ce);S.positionFractBuffer(ye)}if(c.range?S.range=c.range:S.range||(S.range=S.bounds),(c.range||c.positions)&&S.count){var xe=S.bounds,ke=xe[2]-xe[0],Ae=xe[3]-xe[1],Oe=S.range[2]-S.range[0],He=S.range[3]-S.range[1];S.scale=[ke/Oe,Ae/He],S.translate=[-S.range[0]/Oe+xe[0]/Oe||0,-S.range[1]/He+xe[1]/He||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(c.dashes){var Ge=0,_e;if(!c.dashes||c.dashes.length<2)Ge=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ge=0;for(var Ie=0;Ie<c.dashes.length;++Ie)Ge+=c.dashes[Ie];_e=new Uint8Array(Ge*p.dashMult);for(var Ye=0,qe=255,Ue=0;Ue<2;Ue++)for(var Re=0;Re<c.dashes.length;++Re){for(var Ve=0,dt=c.dashes[Re]*p.dashMult*.5;Ve<dt;++Ve)_e[Ye++]=qe;qe^=255}}S.dashLength=Ge,S.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(c.color){var Dt=S.count,Gt=c.color;Gt||(Gt="transparent");var kt=new Uint8Array(Dt*4+4);if(!Array.isArray(Gt)||typeof Gt[0]=="number")for(var zt=d(Gt,"uint8"),Bt=0;Bt<Dt+1;Bt++)kt.set(zt,Bt*4);else{for(var Lt=0;Lt<Dt;Lt++){var Mt=d(Gt[Lt],"uint8");kt.set(Mt,Lt*4)}kt.set(d(Gt[0],"uint8"),Dt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:kt})}}}),v.length<this.passes.length){for(var M=v.length;M<this.passes.length;M++){var _=this.passes[M];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=v.length}for(var T=[],x=0;x<this.passes.length;x++)this.passes[x]!==null&&T.push(this.passes[x]);return this.passes=T,this}},p.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(t,B,H){function d(S,k){return w(S)||o(S,k)||a(S,k)||u()}function l(S){return b(S)||e(S)||a(S)||r()}function b(S){if(Array.isArray(S))return n(S)}function w(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function o(S,k){var P=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var z=[],I=!0,R=!1,D,O;try{for(P=P.call(S);!(I=(D=P.next()).done)&&(z.push(D.value),!(k&&z.length===k));I=!0);}catch(F){R=!0,O=F}finally{try{!I&&P.return!=null&&P.return()}finally{if(R)throw O}}return z}}function a(S,k){if(!!S){if(typeof S=="string")return n(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return n(S,k)}}function n(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,z=new Array(k);P<k;P++)z[P]=S[P];return z}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),i=t("array-bounds"),f=t("color-id"),h=t("@plotly/point-cluster"),p=t("object-assign"),v=t("glslify"),y=t("pick-by-alias"),g=t("update-diff"),A=t("flatten-vertex-data"),m=t("is-iexplorer"),M=t("to-float32"),_=t("parse-rect"),T=x;function x(S,k){var P=this;if(!(this instanceof x))return new x(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var z=S._gl,I,R=[],D={},O=[],F=[null],Y=[null],X=255,q=100;this.tooManyColors=m,I=S.texture({data:new Uint8Array(X*4),width:X,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),p(this,{regl:S,gl:z,groups:O,markerCache:Y,markerTextures:F,palette:R,paletteIds:D,paletteTexture:I,maxColors:X,maxSize:q,canvas:z.canvas}),this.update(k);var $={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(ue,oe){return[P.tooManyColors?0:X,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(ue,oe){return oe.xAttr||{buffer:oe.positionBuffer,stride:8,offset:0}},y:function(ue,oe){return oe.yAttr||{buffer:oe.positionBuffer,stride:8,offset:4}},xFract:function(ue,oe){return oe.xAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:0}},yFract:function(ue,oe){return oe.yAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:4}},size:function(ue,oe){return oe.size.length?{buffer:oe.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(oe.size*255/P.maxSize)]}},borderSize:function(ue,oe){return oe.borderSize.length?{buffer:oe.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(oe.borderSize*255/P.maxSize)]}},colorId:function(ue,oe){return oe.color.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?R.slice(oe.color*4,oe.color*4+4):[oe.color]}},borderColorId:function(ue,oe){return oe.borderColor.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?R.slice(oe.borderColor*4,oe.borderColor*4+4):[oe.borderColor]}},isActive:function(ue,oe){return oe.activation===!0?{constant:[1]}:oe.activation?oe.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},V=p({},$);V.frag=v([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),V.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(V);var K=p({},$);K.frag=v([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),K.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),m&&(K.frag=K.frag.replace("smoothstep","smoothStep"),V.frag=V.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(K)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var R=0;R<P.length;R++)this.drawItem(R,P[R]);else I.forEach(function(D,O){S.drawItem(O)});return this},x.prototype.drawItem=function(S,k){var P=this.groups,z=P[S];if(typeof k=="number"&&(S=k,z=P[k],k=null),!!(z&&z.count&&z.opacity)){z.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,z,k));for(var I=[],R=1;R<z.activation.length;R++)!z.activation[R]||z.activation[R]!==!0&&!z.activation[R].data.length||I.push.apply(I,l(this.getMarkerDrawOptions(R,z,k)));I.length&&this.drawMarker(I)}},x.prototype.getMarkerDrawOptions=function(S,k,P){var z=k.range,I=k.tree,R=k.viewport,D=k.activation,O=k.selectionBuffer,F=k.count;if(this.regl,!I)return P?[p({},k,{markerTexture:this.markerTextures[S],activation:D[S],count:P.length,elements:P,offset:0})]:[p({},k,{markerTexture:this.markerTextures[S],activation:D[S],offset:0})];var Y=[],X=I.range(z,{lod:!0,px:[(z[2]-z[0])/R.width,(z[3]-z[1])/R.height]});if(P){for(var q=D[S],$=q.data,V=new Uint8Array(F),K=0;K<P.length;K++){var se=P[K];V[se]=$?$[se]:1}O.subdata(V)}for(var ue=X.length;ue--;){var oe=d(X[ue],2),U=oe[0],G=oe[1];Y.push(p({},k,{markerTexture:this.markerTextures[S],activation:P?O:D[S],offset:U,count:G-U}))}return Y},x.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,R=this.gl,D=this.regl,O=this.maxSize,F=this.maxColors,Y=this.palette;this.groups=I=P.map(function(X,q){var $=I[q];if(X===void 0)return $;X===null?X={positions:null}:typeof X=="function"?X={ondraw:X}:typeof X[0]=="number"&&(X={positions:X}),X=y(X,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),X.positions===null&&(X.positions=[]),X.tooManyColors!=null&&(S.tooManyColors=X.tooManyColors),$||(I[q]=$={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},X=p({},x.defaults,X)),X.positions&&!("marker"in X)&&(X.marker=$.marker,delete $.marker),X.marker&&!("positions"in X)&&(X.positions=$.positions,delete $.positions);var V=0,K=0;if(g($,X,[{snap:!0,size:function(Ae,Oe){return Ae==null&&(Ae=x.defaults.size),V+=Ae&&Ae.length?1:0,Ae},borderSize:function(Ae,Oe){return Ae==null&&(Ae=x.defaults.borderSize),V+=Ae&&Ae.length?1:0,Ae},opacity:parseFloat,color:function(Ae,Oe){return Ae==null&&(Ae=x.defaults.color),Ae=S.updateColor(Ae),K++,Ae},borderColor:function(Ae,Oe){return Ae==null&&(Ae=x.defaults.borderColor),Ae=S.updateColor(Ae),K++,Ae},bounds:function(Ae,Oe,He){return"range"in He||(He.range=null),Ae},positions:function(Ae,Oe,He){var Ge=Oe.snap,_e=Oe.positionBuffer,Ie=Oe.positionFractBuffer,Ye=Oe.selectionBuffer;if(Ae.x||Ae.y)return Ae.x.length?Oe.xAttr={buffer:D.buffer(Ae.x),offset:0,stride:4,count:Ae.x.length}:Oe.xAttr={buffer:Ae.x.buffer,offset:Ae.x.offset*4||0,stride:(Ae.x.stride||1)*4,count:Ae.x.count},Ae.y.length?Oe.yAttr={buffer:D.buffer(Ae.y),offset:0,stride:4,count:Ae.y.length}:Oe.yAttr={buffer:Ae.y.buffer,offset:Ae.y.offset*4||0,stride:(Ae.y.stride||1)*4,count:Ae.y.count},Oe.count=Math.max(Oe.xAttr.count,Oe.yAttr.count),Ae;Ae=A(Ae,"float64");var qe=Oe.count=Math.floor(Ae.length/2),Ue=Oe.bounds=qe?i(Ae,2):null;if(!He.range&&!Oe.range&&(delete Oe.range,He.range=Ue),!He.marker&&!Oe.marker&&(delete Oe.marker,He.marker=null),Ge&&(Ge===!0||qe>Ge)?Oe.tree=h(Ae,{bounds:Ue}):Ge&&Ge.length&&(Oe.tree=Ge),Oe.tree){var Re={primitive:"points",usage:"static",data:Oe.tree,type:"uint32"};Oe.elements?Oe.elements(Re):Oe.elements=D.elements(Re)}var Ve=M.float32(Ae);_e({data:Ve,usage:"dynamic"});var dt=M.fract32(Ae,Ve);return Ie({data:dt,usage:"dynamic"}),Ye({data:new Uint8Array(qe),type:"uint8",usage:"stream"}),Ae}},{marker:function(Ae,Oe,He){var Ge=Oe.activation;if(Ge.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ge.length=0,!Ae||typeof Ae[0]=="number"){var _e=S.addMarker(Ae);Ge[_e]=!0}else{for(var Ie=[],Ye=0,qe=Math.min(Ae.length,Oe.count);Ye<qe;Ye++){var Ue=S.addMarker(Ae[Ye]);Ie[Ue]||(Ie[Ue]=new Uint8Array(Oe.count)),Ie[Ue][Ye]=1}for(var Re=0;Re<Ie.length;Re++)if(!!Ie[Re]){var Ve={data:Ie[Re],type:"uint8",usage:"static"};Ge[Re]?Ge[Re](Ve):Ge[Re]=D.buffer(Ve),Ge[Re].data=Ie[Re]}}return Ae},range:function(Ae,Oe,He){var Ge=Oe.bounds;if(!!Ge)return Ae||(Ae=Ge),Oe.scale=[1/(Ae[2]-Ae[0]),1/(Ae[3]-Ae[1])],Oe.translate=[-Ae[0],-Ae[1]],Oe.scaleFract=M.fract(Oe.scale),Oe.translateFract=M.fract(Oe.translate),Ae},viewport:function(Ae){var Oe=_(Ae||[R.drawingBufferWidth,R.drawingBufferHeight]);return Oe}}]),V){var se=$,ue=se.count,oe=se.size,U=se.borderSize,G=se.sizeBuffer,re=new Uint8Array(ue*2);if(oe.length||U.length)for(var ee=0;ee<ue;ee++)re[ee*2]=Math.round((oe[ee]==null?oe:oe[ee])*255/O),re[ee*2+1]=Math.round((U[ee]==null?U:U[ee])*255/O);G({data:re,usage:"dynamic"})}if(K){var j=$,Q=j.count,ne=j.color,ae=j.borderColor,ie=j.colorBuffer,fe;if(S.tooManyColors){if(ne.length||ae.length){fe=new Uint8Array(Q*8);for(var me=0;me<Q;me++){var ce=ne[me];fe[me*8]=Y[ce*4],fe[me*8+1]=Y[ce*4+1],fe[me*8+2]=Y[ce*4+2],fe[me*8+3]=Y[ce*4+3];var ye=ae[me];fe[me*8+4]=Y[ye*4],fe[me*8+5]=Y[ye*4+1],fe[me*8+6]=Y[ye*4+2],fe[me*8+7]=Y[ye*4+3]}}}else if(ne.length||ae.length){fe=new Uint8Array(Q*4+2);for(var xe=0;xe<Q;xe++)ne[xe]!=null&&(fe[xe*4]=ne[xe]%F,fe[xe*4+1]=Math.floor(ne[xe]/F)),ae[xe]!=null&&(fe[xe*4+2]=ae[xe]%F,fe[xe*4+3]=Math.floor(ae[xe]/F))}ie({data:fe||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return $})}},x.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,z=this.markerCache,I=S==null?0:z.indexOf(S);if(I>=0)return I;var R;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)R=S;else{R=new Uint8Array(S.length);for(var D=0,O=S.length;D<O;D++)R[D]=S[D]*255}var F=Math.floor(Math.sqrt(R.length));return I=k.length,z.push(S),k.push(P.texture({channels:1,data:R,radius:F,mag:"linear",min:"linear"})),I},x.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,z=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var R=[];if(Array.isArray(S))for(var D=0;D<S.length;D+=4)R.push(S.slice(D,D+4));else for(var O=0;O<S.length;O+=4)R.push(S.subarray(O,O+4));S=R}for(var F=0;F<S.length;F++){var Y=S[F];Y=s(Y,"uint8");var X=f(Y,!1);if(k[X]==null){var q=P.length;k[X]=Math.floor(q/4),P[q]=Y[0],P[q+1]=Y[1],P[q+2]=Y[2],P[q+3]=Y[3]}I[F]=k[X]}return!this.tooManyColors&&P.length>z*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},x.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,z=Math.ceil(S.length*.25/k);if(z>1){S=S.slice();for(var I=S.length*.25%k;I<z*k;I++)S.push(0,0,0,0)}P.height<z&&P.resize(k,z),P.subimage({width:Math.min(S.length*.25,k),height:z,data:S},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var c=t("object-assign"),L=function(k,P){var z=new T(k,P),I=z.render.bind(z);return c(I,{render:I,update:z.update.bind(z),draw:z.draw.bind(z),destroy:z.destroy.bind(z),regl:z.regl,gl:z.gl,canvas:z.gl.canvas,groups:z.groups,markers:z.markerCache,palette:z.palette}),I};B.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(t,B,H){var d=t("regl-scatter2d"),l=t("pick-by-alias"),b=t("array-bounds"),w=t("raf"),e=t("array-range"),o=t("parse-rect"),a=t("flatten-vertex-data");B.exports=n;function n(i,f){if(!(this instanceof n))return new n(i,f);this.traces=[],this.passes={},this.regl=i,this.scatter=d(i),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var i=this,f,h=[],p=arguments.length;p--;)h[p]=arguments[p];return h.length&&(f=this).update.apply(f,h),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=w(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,w(function(){i.dirty=!1})),this)},n.prototype.update=function(){for(var i,f=[],h=arguments.length;h--;)f[h]=arguments[h];if(!!f.length){for(var p=0;p<f.length;p++)this.updateItem(p,f[p]);this.traces=this.traces.filter(Boolean);for(var v=[],y=0,g=0;g<this.traces.length;g++){for(var A=this.traces[g],m=this.traces[g].passes,M=0;M<m.length;M++)v.push(this.passes[m[M]]);A.passOffset=y,y+=A.passes.length}return(i=this.scatter).update.apply(i,v),this}},n.prototype.updateItem=function(i,f){var h=this,p=h.regl;if(f===null)return this.traces[i]=null,this;if(!f)return this;var v=l(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[i]||(this.traces[i]={id:i,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(v.color!=null&&(y.color=v.color),v.size!=null&&(y.size=v.size),v.marker!=null&&(y.marker=v.marker),v.borderColor!=null&&(y.borderColor=v.borderColor),v.borderSize!=null&&(y.borderSize=v.borderSize),v.opacity!=null&&(y.opacity=v.opacity),v.viewport&&(y.viewport=o(v.viewport)),v.diagonal!=null&&(y.diagonal=v.diagonal),v.upper!=null&&(y.upper=v.upper),v.lower!=null&&(y.lower=v.lower),v.data){y.buffer(a(v.data)),y.columns=v.data.length,y.count=v.data[0].length,y.bounds=[];for(var g=0;g<y.columns;g++)y.bounds[g]=b(v.data[g],1)}var A;v.range&&(y.range=v.range,A=y.range&&typeof y.range[0]!="number"),v.domain&&(y.domain=v.domain);var m=!1;v.padding!=null&&(Array.isArray(v.padding)&&v.padding.length===y.columns&&typeof v.padding[v.padding.length-1]=="number"?(y.padding=v.padding.map(s),m=!0):y.padding=s(v.padding));var M=y.columns,_=y.count,T=y.viewport.width,x=y.viewport.height,c=y.viewport.x,L=y.viewport.y,S=T/M,k=x/M;y.passes=[];for(var P=0;P<M;P++)for(var z=0;z<M;z++)if(!(!y.diagonal&&z===P)&&!(!y.upper&&P>z)&&!(!y.lower&&P<z)){var I=r(y.id,P,z),R=this.passes[I]||(this.passes[I]={});if(v.data&&(v.transpose?R.positions={x:{buffer:y.buffer,offset:z,count:_,stride:M},y:{buffer:y.buffer,offset:P,count:_,stride:M}}:R.positions={x:{buffer:y.buffer,offset:z*_,count:_},y:{buffer:y.buffer,offset:P*_,count:_}},R.bounds=u(y.bounds,P,z)),v.domain||v.viewport||v.data){var D=m?u(y.padding,P,z):y.padding;if(y.domain){var O=u(y.domain,P,z),F=O[0],Y=O[1],X=O[2],q=O[3];R.viewport=[c+F*T+D[0],L+Y*x+D[1],c+X*T-D[2],L+q*x-D[3]]}else R.viewport=[c+z*S+S*D[0],L+P*k+k*D[1],c+(z+1)*S-S*D[2],L+(P+1)*k-k*D[3]]}v.color&&(R.color=y.color),v.size&&(R.size=y.size),v.marker&&(R.marker=y.marker),v.borderSize&&(R.borderSize=y.borderSize),v.borderColor&&(R.borderColor=y.borderColor),v.opacity&&(R.opacity=y.opacity),v.range&&(R.range=A?u(y.range,P,z):y.range||R.bounds),y.passes.push(I)}return this},n.prototype.draw=function(){for(var i,f=[],h=arguments.length;h--;)f[h]=arguments[h];if(!f.length)this.scatter.draw();else{for(var p=[],v=0;v<f.length;v++)if(typeof f[v]=="number"){var y=this.traces[f[v]],g=y.passes,A=y.passOffset;p.push.apply(p,e(A,A+g.length))}else if(f[v].length){var m=f[v],M=this.traces[v],_=M.passes,T=M.passOffset;_=_.map(function(x,c){p[T+c]=m})}(i=this.scatter).draw.apply(i,p)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(i,f,h){var p=i.id!=null?i.id:i,v=f,y=h,g=p<<16|(v&255)<<8|y&255;return g}function u(i,f,h){var p,v,y,g,A=i[f],m=i[h];return A.length>2?(p=A[1],v=A[3]):A.length?(p=A[0],v=A[1]):(p=A.y,A.x+A.width,v=A.y+A.height),m.length>2?(y=m[0],g=m[2]):m.length?(y=m[0],g=m[1]):(y=m.x,g=m.x+m.width,m.y+m.height),[y,p,g,v]}function s(i){if(typeof i=="number")return[i,i,i,i];if(i.length===2)return[i[0],i[1],i[0],i[1]];var f=o(i);return[f.x,f.y,f.x+f.width,f.y+f.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?B.exports=l():d.createREGL=l()})(this,function(){function d(Je,gt){this.id=Q++,this.type=Je,this.data=gt}function l(Je){if(Je.length===0)return[];var gt=Je.charAt(0),Et=Je.charAt(Je.length-1);if(1<Je.length&&gt===Et&&(gt==='"'||gt==="'"))return['"'+Je.substr(1,Je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(gt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Je))return l(Je.substr(0,gt.index)).concat(l(gt[1])).concat(l(Je.substr(gt.index+gt[0].length)));if(gt=Je.split("."),gt.length===1)return['"'+Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Je=[],Et=0;Et<gt.length;++Et)Je=Je.concat(l(gt[Et]));return Je}function b(Je){return"["+l(Je).join("][")+"]"}function w(Je,gt){if(typeof Je=="function")return new d(0,Je);if(typeof Je=="number"||typeof Je=="boolean")return new d(5,Je);if(Array.isArray(Je))return new d(6,Je.map(function(Et,rr){return w(Et)}));if(Je instanceof d)return Je}function e(){var Je={"":0},gt=[""];return{id:function(Et){var rr=Je[Et];return rr||(rr=Je[Et]=gt.length,gt.push(Et),rr)},str:function(Et){return gt[Et]}}}function o(Je,gt,Et){function rr(){var dr=window.innerWidth,Lr=window.innerHeight;Je!==document.body&&(Lr=vr.getBoundingClientRect(),dr=Lr.right-Lr.left,Lr=Lr.bottom-Lr.top),vr.width=Et*dr,vr.height=Et*Lr}var vr=document.createElement("canvas");j(vr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Je.appendChild(vr),Je===document.body&&(vr.style.position="absolute",j(Je.style,{margin:0,padding:0}));var or;return Je!==document.body&&typeof ResizeObserver=="function"?(or=new ResizeObserver(function(){setTimeout(rr)}),or.observe(Je)):window.addEventListener("resize",rr,!1),rr(),{canvas:vr,onDestroy:function(){or?or.disconnect():window.removeEventListener("resize",rr),Je.removeChild(vr)}}}function a(Je,gt){function Et(rr){try{return Je.getContext(rr,gt)}catch{return null}}return Et("webgl")||Et("experimental-webgl")||Et("webgl-experimental")}function n(Je){return typeof Je=="string"?Je.split():Je}function r(Je){return typeof Je=="string"?document.querySelector(Je):Je}function u(Je){var gt=Je||{},Et,rr,vr,or;Je={};var dr=[],Lr=[],kr=typeof window=="undefined"?1:window.devicePixelRatio,tr=!1,Or=function(we){},et=function(){};if(typeof gt=="string"?Et=document.querySelector(gt):typeof gt=="object"&&(typeof gt.nodeName=="string"&&typeof gt.appendChild=="function"&&typeof gt.getBoundingClientRect=="function"?Et=gt:typeof gt.drawArrays=="function"||typeof gt.drawElements=="function"?(or=gt,vr=or.canvas):("gl"in gt?or=gt.gl:"canvas"in gt?vr=r(gt.canvas):"container"in gt&&(rr=r(gt.container)),"attributes"in gt&&(Je=gt.attributes),"extensions"in gt&&(dr=n(gt.extensions)),"optionalExtensions"in gt&&(Lr=n(gt.optionalExtensions)),"onDone"in gt&&(Or=gt.onDone),"profile"in gt&&(tr=!!gt.profile),"pixelRatio"in gt&&(kr=+gt.pixelRatio))),Et&&(Et.nodeName.toLowerCase()==="canvas"?vr=Et:rr=Et),!or){if(!vr){if(Et=o(rr||document.body,Or,kr),!Et)return null;vr=Et.canvas,et=Et.onDestroy}Je.premultipliedAlpha===void 0&&(Je.premultipliedAlpha=!0),or=a(vr,Je)}return or?{gl:or,canvas:vr,container:rr,extensions:dr,optionalExtensions:Lr,pixelRatio:kr,profile:tr,onDone:Or,onDestroy:et}:(et(),Or("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(Je,gt){function Et(dr){dr=dr.toLowerCase();var Lr;try{Lr=rr[dr]=Je.getExtension(dr)}catch{}return!!Lr}for(var rr={},vr=0;vr<gt.extensions.length;++vr){var or=gt.extensions[vr];if(!Et(or))return gt.onDestroy(),gt.onDone('"'+or+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return gt.optionalExtensions.forEach(Et),{extensions:rr,restore:function(){Object.keys(rr).forEach(function(dr){if(rr[dr]&&!Et(dr))throw Error("(regl): error restoring extension "+dr)})}}}function i(Je,gt){for(var Et=Array(Je),rr=0;rr<Je;++rr)Et[rr]=gt(rr);return Et}function f(Je){var gt,Et;return gt=(65535<Je)<<4,Je>>>=gt,Et=(255<Je)<<3,Je>>>=Et,gt|=Et,Et=(15<Je)<<2,Je>>>=Et,gt|=Et,Et=(3<Je)<<1,gt|Et|Je>>>Et>>1}function h(){function Je(rr){e:{for(var vr=16;268435456>=vr;vr*=16)if(rr<=vr){rr=vr;break e}rr=0}return vr=Et[f(rr)>>2],0<vr.length?vr.pop():new ArrayBuffer(rr)}function gt(rr){Et[f(rr.byteLength)>>2].push(rr)}var Et=i(8,function(){return[]});return{alloc:Je,free:gt,allocType:function(rr,vr){var or=null;switch(rr){case 5120:or=new Int8Array(Je(vr),0,vr);break;case 5121:or=new Uint8Array(Je(vr),0,vr);break;case 5122:or=new Int16Array(Je(2*vr),0,vr);break;case 5123:or=new Uint16Array(Je(2*vr),0,vr);break;case 5124:or=new Int32Array(Je(4*vr),0,vr);break;case 5125:or=new Uint32Array(Je(4*vr),0,vr);break;case 5126:or=new Float32Array(Je(4*vr),0,vr);break;default:return null}return or.length!==vr?or.subarray(0,vr):or},freeType:function(rr){gt(rr.buffer)}}}function p(Je){return!!Je&&typeof Je=="object"&&Array.isArray(Je.shape)&&Array.isArray(Je.stride)&&typeof Je.offset=="number"&&Je.shape.length===Je.stride.length&&(Array.isArray(Je.data)||ce(Je.data))}function v(Je,gt,Et,rr,vr,or){for(var dr=0;dr<gt;++dr)for(var Lr=Je[dr],kr=0;kr<Et;++kr)for(var tr=Lr[kr],Or=0;Or<rr;++Or)vr[or++]=tr[Or]}function y(Je,gt,Et,rr,vr){for(var or=1,dr=Et+1;dr<gt.length;++dr)or*=gt[dr];var Lr=gt[Et];if(gt.length-Et==4){var kr=gt[Et+1],tr=gt[Et+2];for(gt=gt[Et+3],dr=0;dr<Lr;++dr)v(Je[dr],kr,tr,gt,rr,vr),vr+=or}else for(dr=0;dr<Lr;++dr)y(Je[dr],gt,Et+1,rr,vr),vr+=or}function g(Je){return ke[Object.prototype.toString.call(Je)]|0}function A(Je,gt){for(var Et=0;Et<gt.length;++Et)Je[Et]=gt[Et]}function m(Je,gt,Et,rr,vr,or,dr){for(var Lr=0,kr=0;kr<Et;++kr)for(var tr=0;tr<rr;++tr)Je[Lr++]=gt[vr*kr+or*tr+dr]}function M(Je,gt,Et,rr){function vr(et){this.id=kr++,this.buffer=Je.createBuffer(),this.type=et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Et.profile&&(this.stats={size:0})}function or(et,we,Se){et.byteLength=we.byteLength,Je.bufferData(et.type,we,Se)}function dr(et,we,Se,De,Xe,$e){if(et.usage=Se,Array.isArray(we)){if(et.dtype=De||5126,0<we.length)if(Array.isArray(we[0])){Xe=Ge(we);for(var ot=De=1;ot<Xe.length;++ot)De*=Xe[ot];et.dimension=De,we=He(we,Xe,et.dtype),or(et,we,Se),$e?et.persistentData=we:fe.freeType(we)}else typeof we[0]=="number"?(et.dimension=Xe,Xe=fe.allocType(et.dtype,we.length),A(Xe,we),or(et,Xe,Se),$e?et.persistentData=Xe:fe.freeType(Xe)):ce(we[0])&&(et.dimension=we[0].length,et.dtype=De||g(we[0])||5126,we=He(we,[we.length,we[0].length],et.dtype),or(et,we,Se),$e?et.persistentData=we:fe.freeType(we))}else if(ce(we))et.dtype=De||g(we),et.dimension=Xe,or(et,we,Se),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we.buffer)));else if(p(we)){Xe=we.shape;var st=we.stride,ot=we.offset,pt=0,wt=0,Yt=0,mr=0;Xe.length===1?(pt=Xe[0],wt=1,Yt=st[0],mr=0):Xe.length===2&&(pt=Xe[0],wt=Xe[1],Yt=st[0],mr=st[1]),et.dtype=De||g(we.data)||5126,et.dimension=wt,Xe=fe.allocType(et.dtype,pt*wt),m(Xe,we.data,pt,wt,Yt,mr,ot),or(et,Xe,Se),$e?et.persistentData=Xe:fe.freeType(Xe)}else we instanceof ArrayBuffer&&(et.dtype=5121,et.dimension=Xe,or(et,we,Se),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we))))}function Lr(et){gt.bufferCount--,rr(et),Je.deleteBuffer(et.buffer),et.buffer=null,delete tr[et.id]}var kr=0,tr={};vr.prototype.bind=function(){Je.bindBuffer(this.type,this.buffer)},vr.prototype.destroy=function(){Lr(this)};var Or=[];return Et.profile&&(gt.getTotalBufferSize=function(){var et=0;return Object.keys(tr).forEach(function(we){et+=tr[we].stats.size}),et}),{create:function(et,we,Se,De){function Xe(ot){var st=35044,pt=null,wt=0,Yt=0,mr=1;return Array.isArray(ot)||ce(ot)||p(ot)||ot instanceof ArrayBuffer?pt=ot:typeof ot=="number"?wt=ot|0:ot&&("data"in ot&&(pt=ot.data),"usage"in ot&&(st=Oe[ot.usage]),"type"in ot&&(Yt=Ae[ot.type]),"dimension"in ot&&(mr=ot.dimension|0),"length"in ot&&(wt=ot.length|0)),$e.bind(),pt?dr($e,pt,st,Yt,mr,De):(wt&&Je.bufferData($e.type,wt,st),$e.dtype=Yt||5121,$e.usage=st,$e.dimension=mr,$e.byteLength=wt),Et.profile&&($e.stats.size=$e.byteLength*_e[$e.dtype]),Xe}gt.bufferCount++;var $e=new vr(we);return tr[$e.id]=$e,Se||Xe(et),Xe._reglType="buffer",Xe._buffer=$e,Xe.subdata=function(ot,st){var pt=(st||0)|0,wt;if($e.bind(),ce(ot)||ot instanceof ArrayBuffer)Je.bufferSubData($e.type,pt,ot);else if(Array.isArray(ot)){if(0<ot.length)if(typeof ot[0]=="number"){var Yt=fe.allocType($e.dtype,ot.length);A(Yt,ot),Je.bufferSubData($e.type,pt,Yt),fe.freeType(Yt)}else(Array.isArray(ot[0])||ce(ot[0]))&&(wt=Ge(ot),Yt=He(ot,wt,$e.dtype),Je.bufferSubData($e.type,pt,Yt),fe.freeType(Yt))}else if(p(ot)){wt=ot.shape;var mr=ot.stride,xr=Yt=0,Tr=0,yr=0;wt.length===1?(Yt=wt[0],xr=1,Tr=mr[0],yr=0):wt.length===2&&(Yt=wt[0],xr=wt[1],Tr=mr[0],yr=mr[1]),wt=Array.isArray(ot.data)?$e.dtype:g(ot.data),wt=fe.allocType(wt,Yt*xr),m(wt,ot.data,Yt,xr,Tr,yr,ot.offset),Je.bufferSubData($e.type,pt,wt),fe.freeType(wt)}return Xe},Et.profile&&(Xe.stats=$e.stats),Xe.destroy=function(){Lr($e)},Xe},createStream:function(et,we){var Se=Or.pop();return Se||(Se=new vr(et)),Se.bind(),dr(Se,we,35040,0,1,!1),Se},destroyStream:function(et){Or.push(et)},clear:function(){ye(tr).forEach(Lr),Or.forEach(Lr)},getBuffer:function(et){return et&&et._buffer instanceof vr?et._buffer:null},restore:function(){ye(tr).forEach(function(et){et.buffer=Je.createBuffer(),Je.bindBuffer(et.type,et.buffer),Je.bufferData(et.type,et.persistentData||et.byteLength,et.usage)})},_initBuffer:dr}}function _(Je,gt,Et,rr){function vr(et){this.id=kr++,Lr[this.id]=this,this.buffer=et,this.primType=4,this.type=this.vertCount=0}function or(et,we,Se,De,Xe,$e,ot){et.buffer.bind();var st;if(we?((st=ot)||ce(we)&&(!p(we)||ce(we.data))||(st=gt.oes_element_index_uint?5125:5123),Et._initBuffer(et.buffer,we,Se,st,3)):(Je.bufferData(34963,$e,Se),et.buffer.dtype=st||5121,et.buffer.usage=Se,et.buffer.dimension=3,et.buffer.byteLength=$e),st=ot,!ot){switch(et.buffer.dtype){case 5121:case 5120:st=5121;break;case 5123:case 5122:st=5123;break;case 5125:case 5124:st=5125}et.buffer.dtype=st}et.type=st,we=Xe,0>we&&(we=et.buffer.byteLength,st===5123?we>>=1:st===5125&&(we>>=2)),et.vertCount=we,we=De,0>De&&(we=4,De=et.buffer.dimension,De===1&&(we=0),De===2&&(we=1),De===3&&(we=4)),et.primType=we}function dr(et){rr.elementsCount--,delete Lr[et.id],et.buffer.destroy(),et.buffer=null}var Lr={},kr=0,tr={uint8:5121,uint16:5123};gt.oes_element_index_uint&&(tr.uint32=5125),vr.prototype.bind=function(){this.buffer.bind()};var Or=[];return{create:function(et,we){function Se($e){if($e)if(typeof $e=="number")De($e),Xe.primType=4,Xe.vertCount=$e|0,Xe.type=5121;else{var ot=null,st=35044,pt=-1,wt=-1,Yt=0,mr=0;Array.isArray($e)||ce($e)||p($e)?ot=$e:("data"in $e&&(ot=$e.data),"usage"in $e&&(st=Oe[$e.usage]),"primitive"in $e&&(pt=Ie[$e.primitive]),"count"in $e&&(wt=$e.count|0),"type"in $e&&(mr=tr[$e.type]),"length"in $e?Yt=$e.length|0:(Yt=wt,mr===5123||mr===5122?Yt*=2:(mr===5125||mr===5124)&&(Yt*=4))),or(Xe,ot,st,pt,wt,Yt,mr)}else De(),Xe.primType=4,Xe.vertCount=0,Xe.type=5121;return Se}var De=Et.create(null,34963,!0),Xe=new vr(De._buffer);return rr.elementsCount++,Se(et),Se._reglType="elements",Se._elements=Xe,Se.subdata=function($e,ot){return De.subdata($e,ot),Se},Se.destroy=function(){dr(Xe)},Se},createStream:function(et){var we=Or.pop();return we||(we=new vr(Et.create(null,34963,!0,!1)._buffer)),or(we,et,35040,-1,-1,0,0),we},destroyStream:function(et){Or.push(et)},getElements:function(et){return typeof et=="function"&&et._elements instanceof vr?et._elements:null},clear:function(){ye(Lr).forEach(dr)}}}function T(Je){for(var gt=fe.allocType(5123,Je.length),Et=0;Et<Je.length;++Et)if(isNaN(Je[Et]))gt[Et]=65535;else if(Je[Et]===1/0)gt[Et]=31744;else if(Je[Et]===-1/0)gt[Et]=64512;else{Ye[0]=Je[Et];var rr=qe[0],vr=rr>>>31<<15,or=(rr<<1>>>24)-127,rr=rr>>13&1023;gt[Et]=-24>or?vr:-14>or?vr+(rr+1024>>-14-or):15<or?vr+31744:vr+(or+15<<10)+rr}return gt}function x(Je){return Array.isArray(Je)||ce(Je)}function c(Je){return"[object "+Je+"]"}function L(Je){return Array.isArray(Je)&&(Je.length===0||typeof Je[0]=="number")}function S(Je){return!!(Array.isArray(Je)&&Je.length!==0&&x(Je[0]))}function k(Je){return Object.prototype.toString.call(Je)}function P(Je){if(!Je)return!1;var gt=k(Je);return 0<=Lt.indexOf(gt)?!0:L(Je)||S(Je)||p(Je)}function z(Je,gt){Je.type===36193?(Je.data=T(gt),fe.freeType(gt)):Je.data=gt}function I(Je,gt,Et,rr,vr,or){if(Je=typeof it[Je]!="undefined"?it[Je]:Ve[Je]*Mt[gt],or&&(Je*=6),vr){for(rr=0;1<=Et;)rr+=Je*Et*Et,Et/=2;return rr}return Je*Et*rr}function R(Je,gt,Et,rr,vr,or,dr){function Lr(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function kr(pr,vn){pr.internalformat=vn.internalformat,pr.format=vn.format,pr.type=vn.type,pr.compressed=vn.compressed,pr.premultiplyAlpha=vn.premultiplyAlpha,pr.flipY=vn.flipY,pr.unpackAlignment=vn.unpackAlignment,pr.colorSpace=vn.colorSpace,pr.width=vn.width,pr.height=vn.height,pr.channels=vn.channels}function tr(pr,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(pr.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(pr.flipY=vn.flipY),"alignment"in vn&&(pr.unpackAlignment=vn.alignment),"colorSpace"in vn&&(pr.colorSpace=nn[vn.colorSpace]),"type"in vn&&(pr.type=fn[vn.type]);var $r=pr.width,Fn=pr.height,Nn=pr.channels,ca=!1;"shape"in vn?($r=vn.shape[0],Fn=vn.shape[1],vn.shape.length===3&&(Nn=vn.shape[2],ca=!0)):("radius"in vn&&($r=Fn=vn.radius),"width"in vn&&($r=vn.width),"height"in vn&&(Fn=vn.height),"channels"in vn&&(Nn=vn.channels,ca=!0)),pr.width=$r|0,pr.height=Fn|0,pr.channels=Nn|0,$r=!1,"format"in vn&&($r=vn.format,Fn=pr.internalformat=Xr[$r],pr.format=jr[Fn],$r in fn&&!("type"in vn)&&(pr.type=fn[$r]),$r in at&&(pr.compressed=!0),$r=!0),!ca&&$r?pr.channels=Ve[pr.format]:ca&&!$r&&pr.channels!==Re[pr.format]&&(pr.format=pr.internalformat=Re[pr.channels])}}function Or(pr){Je.pixelStorei(37440,pr.flipY),Je.pixelStorei(37441,pr.premultiplyAlpha),Je.pixelStorei(37443,pr.colorSpace),Je.pixelStorei(3317,pr.unpackAlignment)}function et(){Lr.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function we(pr,vn){var $r=null;if(P(vn)?$r=vn:vn&&(tr(pr,vn),"x"in vn&&(pr.xOffset=vn.x|0),"y"in vn&&(pr.yOffset=vn.y|0),P(vn.data)&&($r=vn.data)),vn.copy){var Fn=vr.viewportWidth,Nn=vr.viewportHeight;pr.width=pr.width||Fn-pr.xOffset,pr.height=pr.height||Nn-pr.yOffset,pr.needsCopy=!0}else if(!$r)pr.width=pr.width||1,pr.height=pr.height||1,pr.channels=pr.channels||4;else if(ce($r))pr.channels=pr.channels||4,pr.data=$r,"type"in vn||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call($r)]|0);else if(L($r)){switch(pr.channels=pr.channels||4,Fn=$r,Nn=Fn.length,pr.type){case 5121:case 5123:case 5125:case 5126:Nn=fe.allocType(pr.type,Nn),Nn.set(Fn),pr.data=Nn;break;case 36193:pr.data=T(Fn)}pr.alignment=1,pr.needsFree=!0}else if(p($r)){Fn=$r.data,Array.isArray(Fn)||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call(Fn)]|0);var Nn=$r.shape,ca=$r.stride,ra,Un,ua,da;Nn.length===3?(ua=Nn[2],da=ca[2]):da=ua=1,ra=Nn[0],Un=Nn[1],Nn=ca[0],ca=ca[1],pr.alignment=1,pr.width=ra,pr.height=Un,pr.channels=ua,pr.format=pr.internalformat=Re[ua],pr.needsFree=!0,ra=da,$r=$r.offset,ua=pr.width,da=pr.height,Un=pr.channels;for(var ur=fe.allocType(pr.type===36193?5126:pr.type,ua*da*Un),Rr=0,on=0;on<da;++on)for(var rn=0;rn<ua;++rn)for(var gn=0;gn<Un;++gn)ur[Rr++]=Fn[Nn*rn+ca*on+ra*gn+$r];z(pr,ur)}else if(k($r)===dt||k($r)===Dt||k($r)===Gt)k($r)===dt||k($r)===Dt?pr.element=$r:pr.element=$r.canvas,pr.width=pr.element.width,pr.height=pr.element.height,pr.channels=4;else if(k($r)===kt)pr.element=$r,pr.width=$r.width,pr.height=$r.height,pr.channels=4;else if(k($r)===zt)pr.element=$r,pr.width=$r.naturalWidth,pr.height=$r.naturalHeight,pr.channels=4;else if(k($r)===Bt)pr.element=$r,pr.width=$r.videoWidth,pr.height=$r.videoHeight,pr.channels=4;else if(S($r)){for(Fn=pr.width||$r[0].length,Nn=pr.height||$r.length,ca=pr.channels,ca=x($r[0][0])?ca||$r[0][0].length:ca||1,ra=xe.shape($r),ua=1,da=0;da<ra.length;++da)ua*=ra[da];ua=fe.allocType(pr.type===36193?5126:pr.type,ua),xe.flatten($r,ra,"",ua),z(pr,ua),pr.alignment=1,pr.width=Fn,pr.height=Nn,pr.channels=ca,pr.format=pr.internalformat=Re[ca],pr.needsFree=!0}}function Se(pr,vn,$r,Fn,Nn){var ca=pr.element,ra=pr.data,Un=pr.internalformat,ua=pr.format,da=pr.type,ur=pr.width,Rr=pr.height;Or(pr),ca?Je.texSubImage2D(vn,Nn,$r,Fn,ua,da,ca):pr.compressed?Je.compressedTexSubImage2D(vn,Nn,$r,Fn,Un,ur,Rr,ra):pr.needsCopy?(rr(),Je.copyTexSubImage2D(vn,Nn,$r,Fn,pr.xOffset,pr.yOffset,ur,Rr)):Je.texSubImage2D(vn,Nn,$r,Fn,ur,Rr,ua,da,ra)}function De(){return zn.pop()||new et}function Xe(pr){pr.needsFree&&fe.freeType(pr.data),et.call(pr),zn.push(pr)}function $e(){Lr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ot(pr,vn,$r){var Fn=pr.images[0]=De();pr.mipmask=1,Fn.width=pr.width=vn,Fn.height=pr.height=$r,Fn.channels=pr.channels=4}function st(pr,vn){var $r=null;if(P(vn))$r=pr.images[0]=De(),kr($r,pr),we($r,vn),pr.mipmask=1;else if(tr(pr,vn),Array.isArray(vn.mipmap))for(var Fn=vn.mipmap,Nn=0;Nn<Fn.length;++Nn)$r=pr.images[Nn]=De(),kr($r,pr),$r.width>>=Nn,$r.height>>=Nn,we($r,Fn[Nn]),pr.mipmask|=1<<Nn;else $r=pr.images[0]=De(),kr($r,pr),we($r,vn),pr.mipmask=1;kr(pr,pr.images[0])}function pt(pr,vn){for(var $r=pr.images,Fn=0;Fn<$r.length&&$r[Fn];++Fn){var Nn=$r[Fn],ca=vn,ra=Fn,Un=Nn.element,ua=Nn.data,da=Nn.internalformat,ur=Nn.format,Rr=Nn.type,on=Nn.width,rn=Nn.height;Or(Nn),Un?Je.texImage2D(ca,ra,ur,ur,Rr,Un):Nn.compressed?Je.compressedTexImage2D(ca,ra,da,on,rn,0,ua):Nn.needsCopy?(rr(),Je.copyTexImage2D(ca,ra,ur,Nn.xOffset,Nn.yOffset,on,rn,0)):Je.texImage2D(ca,ra,ur,on,rn,0,ur,Rr,ua||null)}}function wt(){var pr=kn.pop()||new $e;Lr.call(pr);for(var vn=pr.mipmask=0;16>vn;++vn)pr.images[vn]=null;return pr}function Yt(pr){for(var vn=pr.images,$r=0;$r<vn.length;++$r)vn[$r]&&Xe(vn[$r]),vn[$r]=null;kn.push(pr)}function mr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function xr(pr,vn){"min"in vn&&(pr.minFilter=Ar[vn.min],0<=Ue.indexOf(pr.minFilter)&&!("faces"in vn)&&(pr.genMipmaps=!0)),"mag"in vn&&(pr.magFilter=Gr[vn.mag]);var $r=pr.wrapS,Fn=pr.wrapT;if("wrap"in vn){var Nn=vn.wrap;typeof Nn=="string"?$r=Fn=yn[Nn]:Array.isArray(Nn)&&($r=yn[Nn[0]],Fn=yn[Nn[1]])}else"wrapS"in vn&&($r=yn[vn.wrapS]),"wrapT"in vn&&(Fn=yn[vn.wrapT]);if(pr.wrapS=$r,pr.wrapT=Fn,"anisotropic"in vn&&(pr.anisotropic=vn.anisotropic),"mipmap"in vn){switch($r=!1,typeof vn.mipmap){case"string":pr.mipmapHint=gr[vn.mipmap],$r=pr.genMipmaps=!0;break;case"boolean":$r=pr.genMipmaps=vn.mipmap;break;case"object":pr.genMipmaps=!1,$r=!0}!$r||"min"in vn||(pr.minFilter=9984)}}function Tr(pr,vn){Je.texParameteri(vn,10241,pr.minFilter),Je.texParameteri(vn,10240,pr.magFilter),Je.texParameteri(vn,10242,pr.wrapS),Je.texParameteri(vn,10243,pr.wrapT),gt.ext_texture_filter_anisotropic&&Je.texParameteri(vn,34046,pr.anisotropic),pr.genMipmaps&&(Je.hint(33170,pr.mipmapHint),Je.generateMipmap(vn))}function yr(pr){Lr.call(this),this.mipmask=0,this.internalformat=6408,this.id=ta++,this.refCount=1,this.target=pr,this.texture=Je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new mr,dr.profile&&(this.stats={size:0})}function Dr(pr){Je.activeTexture(33984),Je.bindTexture(pr.target,pr.texture)}function tn(){var pr=ya[0];pr?Je.bindTexture(pr.target,pr.texture):Je.bindTexture(3553,null)}function wr(pr){var vn=pr.texture,$r=pr.unit,Fn=pr.target;0<=$r&&(Je.activeTexture(33984+$r),Je.bindTexture(Fn,null),ya[$r]=null),Je.deleteTexture(vn),pr.texture=null,pr.params=null,pr.pixels=null,pr.refCount=0,delete ia[pr.id],or.textureCount--}var gr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},yn={repeat:10497,clamp:33071,mirror:33648},Gr={nearest:9728,linear:9729},Ar=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Gr),nn={none:0,browser:37444},fn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Xr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},at={};gt.ext_srgb&&(Xr.srgb=35904,Xr.srgba=35906),gt.oes_texture_float&&(fn.float32=fn.float=5126),gt.oes_texture_half_float&&(fn.float16=fn["half float"]=36193),gt.webgl_depth_texture&&(j(Xr,{depth:6402,"depth stencil":34041}),j(fn,{uint16:5123,uint32:5125,"depth stencil":34042})),gt.webgl_compressed_texture_s3tc&&j(at,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),gt.webgl_compressed_texture_atc&&j(at,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),gt.webgl_compressed_texture_pvrtc&&j(at,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),gt.webgl_compressed_texture_etc1&&(at["rgb etc1"]=36196);var Ft=Array.prototype.slice.call(Je.getParameter(34467));Object.keys(at).forEach(function(pr){var vn=at[pr];0<=Ft.indexOf(vn)&&(Xr[pr]=vn)});var er=Object.keys(Xr);Et.textureFormats=er;var hr=[];Object.keys(Xr).forEach(function(pr){hr[Xr[pr]]=pr});var Yr=[];Object.keys(fn).forEach(function(pr){Yr[fn[pr]]=pr});var zr=[];Object.keys(Gr).forEach(function(pr){zr[Gr[pr]]=pr});var Pr=[];Object.keys(Ar).forEach(function(pr){Pr[Ar[pr]]=pr});var br=[];Object.keys(yn).forEach(function(pr){br[yn[pr]]=pr});var jr=er.reduce(function(pr,vn){var $r=Xr[vn];return $r===6409||$r===6406||$r===6409||$r===6410||$r===6402||$r===34041||gt.ext_srgb&&($r===35904||$r===35906)?pr[$r]=$r:$r===32855||0<=vn.indexOf("rgba")?pr[$r]=6408:pr[$r]=6407,pr},{}),zn=[],kn=[],ta=0,ia={},Aa=Et.maxTextureUnits,ya=Array(Aa).map(function(){return null});return j(yr.prototype,{bind:function(){this.bindCount+=1;var pr=this.unit;if(0>pr){for(var vn=0;vn<Aa;++vn){var $r=ya[vn];if($r){if(0<$r.bindCount)continue;$r.unit=-1}ya[vn]=this,pr=vn;break}dr.profile&&or.maxTextureUnits<pr+1&&(or.maxTextureUnits=pr+1),this.unit=pr,Je.activeTexture(33984+pr),Je.bindTexture(this.target,this.texture)}return pr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&wr(this)}}),dr.profile&&(or.getTotalTextureSize=function(){var pr=0;return Object.keys(ia).forEach(function(vn){pr+=ia[vn].stats.size}),pr}),{create2D:function(pr,vn){function $r(Nn,ca){var ra=Fn.texInfo;mr.call(ra);var Un=wt();return typeof Nn=="number"?typeof ca=="number"?ot(Un,Nn|0,ca|0):ot(Un,Nn|0,Nn|0):Nn?(xr(ra,Nn),st(Un,Nn)):ot(Un,1,1),ra.genMipmaps&&(Un.mipmask=(Un.width<<1)-1),Fn.mipmask=Un.mipmask,kr(Fn,Un),Fn.internalformat=Un.internalformat,$r.width=Un.width,$r.height=Un.height,Dr(Fn),pt(Un,3553),Tr(ra,3553),tn(),Yt(Un),dr.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,Un.width,Un.height,ra.genMipmaps,!1)),$r.format=hr[Fn.internalformat],$r.type=Yr[Fn.type],$r.mag=zr[ra.magFilter],$r.min=Pr[ra.minFilter],$r.wrapS=br[ra.wrapS],$r.wrapT=br[ra.wrapT],$r}var Fn=new yr(3553);return ia[Fn.id]=Fn,or.textureCount++,$r(pr,vn),$r.subimage=function(Nn,ca,ra,Un){ca|=0,ra|=0,Un|=0;var ua=De();return kr(ua,Fn),ua.width=0,ua.height=0,we(ua,Nn),ua.width=ua.width||(Fn.width>>Un)-ca,ua.height=ua.height||(Fn.height>>Un)-ra,Dr(Fn),Se(ua,3553,ca,ra,Un),tn(),Xe(ua),$r},$r.resize=function(Nn,ca){var ra=Nn|0,Un=ca|0||ra;if(ra===Fn.width&&Un===Fn.height)return $r;$r.width=Fn.width=ra,$r.height=Fn.height=Un,Dr(Fn);for(var ua=0;Fn.mipmask>>ua;++ua){var da=ra>>ua,ur=Un>>ua;if(!da||!ur)break;Je.texImage2D(3553,ua,Fn.format,da,ur,0,Fn.format,Fn.type,null)}return tn(),dr.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,ra,Un,!1,!1)),$r},$r._reglType="texture2d",$r._texture=Fn,dr.profile&&($r.stats=Fn.stats),$r.destroy=function(){Fn.decRef()},$r},createCube:function(pr,vn,$r,Fn,Nn,ca){function ra(da,ur,Rr,on,rn,gn){var wn,pn=Un.texInfo;for(mr.call(pn),wn=0;6>wn;++wn)ua[wn]=wt();if(typeof da=="number"||!da)for(da=da|0||1,wn=0;6>wn;++wn)ot(ua[wn],da,da);else if(typeof da=="object")if(ur)st(ua[0],da),st(ua[1],ur),st(ua[2],Rr),st(ua[3],on),st(ua[4],rn),st(ua[5],gn);else if(xr(pn,da),tr(Un,da),"faces"in da)for(da=da.faces,wn=0;6>wn;++wn)kr(ua[wn],Un),st(ua[wn],da[wn]);else for(wn=0;6>wn;++wn)st(ua[wn],da);for(kr(Un,ua[0]),Un.mipmask=pn.genMipmaps?(ua[0].width<<1)-1:ua[0].mipmask,Un.internalformat=ua[0].internalformat,ra.width=ua[0].width,ra.height=ua[0].height,Dr(Un),wn=0;6>wn;++wn)pt(ua[wn],34069+wn);for(Tr(pn,34067),tn(),dr.profile&&(Un.stats.size=I(Un.internalformat,Un.type,ra.width,ra.height,pn.genMipmaps,!0)),ra.format=hr[Un.internalformat],ra.type=Yr[Un.type],ra.mag=zr[pn.magFilter],ra.min=Pr[pn.minFilter],ra.wrapS=br[pn.wrapS],ra.wrapT=br[pn.wrapT],wn=0;6>wn;++wn)Yt(ua[wn]);return ra}var Un=new yr(34067);ia[Un.id]=Un,or.cubeCount++;var ua=Array(6);return ra(pr,vn,$r,Fn,Nn,ca),ra.subimage=function(da,ur,Rr,on,rn){Rr|=0,on|=0,rn|=0;var gn=De();return kr(gn,Un),gn.width=0,gn.height=0,we(gn,ur),gn.width=gn.width||(Un.width>>rn)-Rr,gn.height=gn.height||(Un.height>>rn)-on,Dr(Un),Se(gn,34069+da,Rr,on,rn),tn(),Xe(gn),ra},ra.resize=function(da){if(da|=0,da!==Un.width){ra.width=Un.width=da,ra.height=Un.height=da,Dr(Un);for(var ur=0;6>ur;++ur)for(var Rr=0;Un.mipmask>>Rr;++Rr)Je.texImage2D(34069+ur,Rr,Un.format,da>>Rr,da>>Rr,0,Un.format,Un.type,null);return tn(),dr.profile&&(Un.stats.size=I(Un.internalformat,Un.type,ra.width,ra.height,!1,!0)),ra}},ra._reglType="textureCube",ra._texture=Un,dr.profile&&(ra.stats=Un.stats),ra.destroy=function(){Un.decRef()},ra},clear:function(){for(var pr=0;pr<Aa;++pr)Je.activeTexture(33984+pr),Je.bindTexture(3553,null),ya[pr]=null;ye(ia).forEach(wr),or.cubeCount=0,or.textureCount=0},getTexture:function(pr){return null},restore:function(){for(var pr=0;pr<Aa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null)}ye(ia).forEach(function($r){$r.texture=Je.createTexture(),Je.bindTexture($r.target,$r.texture);for(var Fn=0;32>Fn;++Fn)if(($r.mipmask&1<<Fn)!=0)if($r.target===3553)Je.texImage2D(3553,Fn,$r.internalformat,$r.width>>Fn,$r.height>>Fn,0,$r.internalformat,$r.type,null);else for(var Nn=0;6>Nn;++Nn)Je.texImage2D(34069+Nn,Fn,$r.internalformat,$r.width>>Fn,$r.height>>Fn,0,$r.internalformat,$r.type,null);Tr($r.texInfo,$r.target)})},refresh:function(){for(var pr=0;pr<Aa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null),Je.activeTexture(33984+pr),Je.bindTexture(3553,null),Je.bindTexture(34067,null)}}}}function D(Je,gt,Et,rr,vr,or){function dr(yr,Dr,tn){this.target=yr,this.texture=Dr,this.renderbuffer=tn;var wr=yr=0;Dr?(yr=Dr.width,wr=Dr.height):tn&&(yr=tn.width,wr=tn.height),this.width=yr,this.height=wr}function Lr(yr){yr&&(yr.texture&&yr.texture._texture.decRef(),yr.renderbuffer&&yr.renderbuffer._renderbuffer.decRef())}function kr(yr,Dr,tn){yr&&(yr.texture?yr.texture._texture.refCount+=1:yr.renderbuffer._renderbuffer.refCount+=1)}function tr(yr,Dr){Dr&&(Dr.texture?Je.framebufferTexture2D(36160,yr,Dr.target,Dr.texture._texture.texture,0):Je.framebufferRenderbuffer(36160,yr,36161,Dr.renderbuffer._renderbuffer.renderbuffer))}function Or(yr){var Dr=3553,tn=null,wr=null,gr=yr;return typeof yr=="object"&&(gr=yr.data,"target"in yr&&(Dr=yr.target|0)),yr=gr._reglType,yr==="texture2d"||yr==="textureCube"?tn=gr:yr==="renderbuffer"&&(wr=gr,Dr=36161),new dr(Dr,tn,wr)}function et(yr,Dr,tn,wr,gr){return tn?(yr=rr.create2D({width:yr,height:Dr,format:wr,type:gr}),yr._texture.refCount=0,new dr(3553,yr,null)):(yr=vr.create({width:yr,height:Dr,format:wr}),yr._renderbuffer.refCount=0,new dr(36161,null,yr))}function we(yr){return yr&&(yr.texture||yr.renderbuffer)}function Se(yr,Dr,tn){yr&&(yr.texture?yr.texture.resize(Dr,tn):yr.renderbuffer&&yr.renderbuffer.resize(Dr,tn),yr.width=Dr,yr.height=tn)}function De(){this.id=xr++,Tr[this.id]=this,this.framebuffer=Je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Xe(yr){yr.colorAttachments.forEach(Lr),Lr(yr.depthAttachment),Lr(yr.stencilAttachment),Lr(yr.depthStencilAttachment)}function $e(yr){Je.deleteFramebuffer(yr.framebuffer),yr.framebuffer=null,or.framebufferCount--,delete Tr[yr.id]}function ot(yr){var Dr;Je.bindFramebuffer(36160,yr.framebuffer);var tn=yr.colorAttachments;for(Dr=0;Dr<tn.length;++Dr)tr(36064+Dr,tn[Dr]);for(Dr=tn.length;Dr<Et.maxColorAttachments;++Dr)Je.framebufferTexture2D(36160,36064+Dr,3553,null,0);Je.framebufferTexture2D(36160,33306,3553,null,0),Je.framebufferTexture2D(36160,36096,3553,null,0),Je.framebufferTexture2D(36160,36128,3553,null,0),tr(36096,yr.depthAttachment),tr(36128,yr.stencilAttachment),tr(33306,yr.depthStencilAttachment),Je.checkFramebufferStatus(36160),Je.isContextLost(),Je.bindFramebuffer(36160,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,Je.getError()}function st(yr,Dr){function tn(gr,yn){var Gr,Ar=0,nn=0,fn=!0,Xr=!0;Gr=null;var at=!0,Ft="rgba",er="uint8",hr=1,Yr=null,zr=null,Pr=null,br=!1;typeof gr=="number"?(Ar=gr|0,nn=yn|0||Ar):gr?("shape"in gr?(nn=gr.shape,Ar=nn[0],nn=nn[1]):("radius"in gr&&(Ar=nn=gr.radius),"width"in gr&&(Ar=gr.width),"height"in gr&&(nn=gr.height)),("color"in gr||"colors"in gr)&&(Gr=gr.color||gr.colors),Gr||("colorCount"in gr&&(hr=gr.colorCount|0),"colorTexture"in gr&&(at=!!gr.colorTexture,Ft="rgba4"),"colorType"in gr&&(er=gr.colorType,!at)&&(er==="half float"||er==="float16"?Ft="rgba16f":(er==="float"||er==="float32")&&(Ft="rgba32f")),"colorFormat"in gr&&(Ft=gr.colorFormat,0<=wt.indexOf(Ft)?at=!0:0<=Yt.indexOf(Ft)&&(at=!1))),("depthTexture"in gr||"depthStencilTexture"in gr)&&(br=!(!gr.depthTexture&&!gr.depthStencilTexture)),"depth"in gr&&(typeof gr.depth=="boolean"?fn=gr.depth:(Yr=gr.depth,Xr=!1)),"stencil"in gr&&(typeof gr.stencil=="boolean"?Xr=gr.stencil:(zr=gr.stencil,fn=!1)),"depthStencil"in gr&&(typeof gr.depthStencil=="boolean"?fn=Xr=gr.depthStencil:(Pr=gr.depthStencil,Xr=fn=!1))):Ar=nn=1;var jr=null,zn=null,kn=null,ta=null;if(Array.isArray(Gr))jr=Gr.map(Or);else if(Gr)jr=[Or(Gr)];else for(jr=Array(hr),Gr=0;Gr<hr;++Gr)jr[Gr]=et(Ar,nn,at,Ft,er);for(Ar=Ar||jr[0].width,nn=nn||jr[0].height,Yr?zn=Or(Yr):fn&&!Xr&&(zn=et(Ar,nn,br,"depth","uint32")),zr?kn=Or(zr):Xr&&!fn&&(kn=et(Ar,nn,!1,"stencil","uint8")),Pr?ta=Or(Pr):!Yr&&!zr&&Xr&&fn&&(ta=et(Ar,nn,br,"depth stencil","depth stencil")),fn=null,Gr=0;Gr<jr.length;++Gr)kr(jr[Gr]),jr[Gr]&&jr[Gr].texture&&(Xr=Ce[jr[Gr].texture._texture.format]*je[jr[Gr].texture._texture.type],fn===null&&(fn=Xr));return kr(zn),kr(kn),kr(ta),Xe(wr),wr.width=Ar,wr.height=nn,wr.colorAttachments=jr,wr.depthAttachment=zn,wr.stencilAttachment=kn,wr.depthStencilAttachment=ta,tn.color=jr.map(we),tn.depth=we(zn),tn.stencil=we(kn),tn.depthStencil=we(ta),tn.width=wr.width,tn.height=wr.height,ot(wr),tn}var wr=new De;return or.framebufferCount++,tn(yr,Dr),j(tn,{resize:function(gr,yn){var Gr=Math.max(gr|0,1),Ar=Math.max(yn|0||Gr,1);if(Gr===wr.width&&Ar===wr.height)return tn;for(var nn=wr.colorAttachments,fn=0;fn<nn.length;++fn)Se(nn[fn],Gr,Ar);return Se(wr.depthAttachment,Gr,Ar),Se(wr.stencilAttachment,Gr,Ar),Se(wr.depthStencilAttachment,Gr,Ar),wr.width=tn.width=Gr,wr.height=tn.height=Ar,ot(wr),tn},_reglType:"framebuffer",_framebuffer:wr,destroy:function(){$e(wr),Xe(wr)},use:function(gr){pt.setFBO({framebuffer:tn},gr)}})}var pt={cur:null,next:null,dirty:!1,setFBO:null},wt=["rgba"],Yt=["rgba4","rgb565","rgb5 a1"];gt.ext_srgb&&Yt.push("srgba"),gt.ext_color_buffer_half_float&&Yt.push("rgba16f","rgb16f"),gt.webgl_color_buffer_float&&Yt.push("rgba32f");var mr=["uint8"];gt.oes_texture_half_float&&mr.push("half float","float16"),gt.oes_texture_float&&mr.push("float","float32");var xr=0,Tr={};return j(pt,{getFramebuffer:function(yr){return typeof yr=="function"&&yr._reglType==="framebuffer"&&(yr=yr._framebuffer,yr instanceof De)?yr:null},create:st,createCube:function(yr){function Dr(wr){var gr,yn={color:null},Gr=0,Ar=null;gr="rgba";var nn="uint8",fn=1;if(typeof wr=="number"?Gr=wr|0:wr?("shape"in wr?Gr=wr.shape[0]:("radius"in wr&&(Gr=wr.radius|0),"width"in wr?Gr=wr.width|0:"height"in wr&&(Gr=wr.height|0)),("color"in wr||"colors"in wr)&&(Ar=wr.color||wr.colors),Ar||("colorCount"in wr&&(fn=wr.colorCount|0),"colorType"in wr&&(nn=wr.colorType),"colorFormat"in wr&&(gr=wr.colorFormat)),"depth"in wr&&(yn.depth=wr.depth),"stencil"in wr&&(yn.stencil=wr.stencil),"depthStencil"in wr&&(yn.depthStencil=wr.depthStencil)):Gr=1,Ar)if(Array.isArray(Ar))for(wr=[],gr=0;gr<Ar.length;++gr)wr[gr]=Ar[gr];else wr=[Ar];else for(wr=Array(fn),Ar={radius:Gr,format:gr,type:nn},gr=0;gr<fn;++gr)wr[gr]=rr.createCube(Ar);for(yn.color=Array(wr.length),gr=0;gr<wr.length;++gr)fn=wr[gr],Gr=Gr||fn.width,yn.color[gr]={target:34069,data:wr[gr]};for(gr=0;6>gr;++gr){for(fn=0;fn<wr.length;++fn)yn.color[fn].target=34069+gr;0<gr&&(yn.depth=tn[0].depth,yn.stencil=tn[0].stencil,yn.depthStencil=tn[0].depthStencil),tn[gr]?tn[gr](yn):tn[gr]=st(yn)}return j(Dr,{width:Gr,height:Gr,color:wr})}var tn=Array(6);return Dr(yr),j(Dr,{faces:tn,resize:function(wr){var gr=wr|0;if(gr===Dr.width)return Dr;var yn=Dr.color;for(wr=0;wr<yn.length;++wr)yn[wr].resize(gr);for(wr=0;6>wr;++wr)tn[wr].resize(gr);return Dr.width=Dr.height=gr,Dr},_reglType:"framebufferCube",destroy:function(){tn.forEach(function(wr){wr.destroy()})}})},clear:function(){ye(Tr).forEach($e)},restore:function(){pt.cur=null,pt.next=null,pt.dirty=!0,ye(Tr).forEach(function(yr){yr.framebuffer=Je.createFramebuffer(),ot(yr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function F(Je,gt,Et,rr,vr,or,dr){function Lr(ot){if(ot!==$e.currentVAO){var st=gt.oes_vertex_array_object;ot?st.bindVertexArrayOES(ot.vao):st.bindVertexArrayOES(null),$e.currentVAO=ot}}function kr(ot){if(ot!==$e.currentVAO){if(ot)ot.bindAttrs();else{for(var st=gt.angle_instanced_arrays,pt=0;pt<Se.length;++pt){var wt=Se[pt];wt.buffer?(Je.enableVertexAttribArray(pt),wt.buffer.bind(),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offfset),st&&wt.divisor&&st.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}dr.elements?Je.bindBuffer(34963,dr.elements.buffer.buffer):Je.bindBuffer(34963,null)}$e.currentVAO=ot}}function tr(){ye(Xe).forEach(function(ot){ot.destroy()})}function Or(){this.id=++De,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ot=gt.oes_vertex_array_object;this.vao=ot?ot.createVertexArrayOES():null,Xe[this.id]=this,this.buffers=[]}function et(){gt.oes_vertex_array_object&&ye(Xe).forEach(function(ot){ot.refresh()})}var we=Et.maxAttributes,Se=Array(we);for(Et=0;Et<we;++Et)Se[Et]=new O;var De=0,Xe={},$e={Record:O,scope:{},state:Se,currentVAO:null,targetVAO:null,restore:gt.oes_vertex_array_object?et:function(){},createVAO:function(ot){function st(wt){var Yt;Array.isArray(wt)?(Yt=wt,pt.elements&&pt.ownsElements&&pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1,pt.offset=0,pt.count=0,pt.instances=-1,pt.primitive=4):(wt.elements?(Yt=wt.elements,pt.ownsElements?(typeof Yt=="function"&&Yt._reglType==="elements"?pt.elements.destroy():pt.elements(Yt),pt.ownsElements=!1):or.getElements(wt.elements)?(pt.elements=wt.elements,pt.ownsElements=!1):(pt.elements=or.create(wt.elements),pt.ownsElements=!0)):(pt.elements=null,pt.ownsElements=!1),Yt=wt.attributes,pt.offset=0,pt.count=-1,pt.instances=-1,pt.primitive=4,pt.elements&&(pt.count=pt.elements._elements.vertCount,pt.primitive=pt.elements._elements.primType),"offset"in wt&&(pt.offset=wt.offset|0),"count"in wt&&(pt.count=wt.count|0),"instances"in wt&&(pt.instances=wt.instances|0),"primitive"in wt&&(pt.primitive=Ie[wt.primitive])),wt={};var mr=pt.attributes;mr.length=Yt.length;for(var xr=0;xr<Yt.length;++xr){var Tr=Yt[xr],yr=mr[xr]=new O,Dr=Tr.data||Tr;if(Array.isArray(Dr)||ce(Dr)||p(Dr)){var tn;pt.buffers[xr]&&(tn=pt.buffers[xr],ce(Dr)&&tn._buffer.byteLength>=Dr.byteLength?tn.subdata(Dr):(tn.destroy(),pt.buffers[xr]=null)),pt.buffers[xr]||(tn=pt.buffers[xr]=vr.create(Tr,34962,!1,!0)),yr.buffer=vr.getBuffer(tn),yr.size=yr.buffer.dimension|0,yr.normalized=!1,yr.type=yr.buffer.dtype,yr.offset=0,yr.stride=0,yr.divisor=0,yr.state=1,wt[xr]=1}else vr.getBuffer(Tr)?(yr.buffer=vr.getBuffer(Tr),yr.size=yr.buffer.dimension|0,yr.normalized=!1,yr.type=yr.buffer.dtype,yr.offset=0,yr.stride=0,yr.divisor=0,yr.state=1):vr.getBuffer(Tr.buffer)?(yr.buffer=vr.getBuffer(Tr.buffer),yr.size=(+Tr.size||yr.buffer.dimension)|0,yr.normalized=!!Tr.normalized||!1,yr.type="type"in Tr?Ae[Tr.type]:yr.buffer.dtype,yr.offset=(Tr.offset||0)|0,yr.stride=(Tr.stride||0)|0,yr.divisor=(Tr.divisor||0)|0,yr.state=1):"x"in Tr&&(yr.x=+Tr.x||0,yr.y=+Tr.y||0,yr.z=+Tr.z||0,yr.w=+Tr.w||0,yr.state=2)}for(tn=0;tn<pt.buffers.length;++tn)!wt[tn]&&pt.buffers[tn]&&(pt.buffers[tn].destroy(),pt.buffers[tn]=null);return pt.refresh(),st}var pt=new Or;return rr.vaoCount+=1,st.destroy=function(){for(var wt=0;wt<pt.buffers.length;++wt)pt.buffers[wt]&&pt.buffers[wt].destroy();pt.buffers.length=0,pt.ownsElements&&(pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1),pt.destroy()},st._vao=pt,st._reglType="vao",st(ot)},getVAO:function(ot){return typeof ot=="function"&&ot._vao?ot._vao:null},destroyBuffer:function(ot){for(var st=0;st<Se.length;++st){var pt=Se[st];pt.buffer===ot&&(Je.disableVertexAttribArray(st),pt.buffer=null)}},setVAO:gt.oes_vertex_array_object?Lr:kr,clear:gt.oes_vertex_array_object?tr:function(){}};return Or.prototype.bindAttrs=function(){for(var ot=gt.angle_instanced_arrays,st=this.attributes,pt=0;pt<st.length;++pt){var wt=st[pt];wt.buffer?(Je.enableVertexAttribArray(pt),Je.bindBuffer(34962,wt.buffer.buffer),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offset),ot&&wt.divisor&&ot.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}for(ot=st.length;ot<we;++ot)Je.disableVertexAttribArray(ot);(ot=or.getElements(this.elements))?Je.bindBuffer(34963,ot.buffer.buffer):Je.bindBuffer(34963,null)},Or.prototype.refresh=function(){var ot=gt.oes_vertex_array_object;ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),$e.currentVAO=null,ot.bindVertexArrayOES(null))},Or.prototype.destroy=function(){if(this.vao){var ot=gt.oes_vertex_array_object;this===$e.currentVAO&&($e.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Xe[this.id]&&(delete Xe[this.id],--rr.vaoCount)},$e}function Y(Je,gt,Et,rr){function vr(De,Xe,$e,ot){this.name=De,this.id=Xe,this.location=$e,this.info=ot}function or(De,Xe){for(var $e=0;$e<De.length;++$e)if(De[$e].id===Xe.id){De[$e].location=Xe.location;return}De.push(Xe)}function dr(De,Xe,$e){$e=De===35632?tr:Or;var ot=$e[Xe];if(!ot){var st=gt.str(Xe),ot=Je.createShader(De);Je.shaderSource(ot,st),Je.compileShader(ot),$e[Xe]=ot}return ot}function Lr(De,Xe){this.id=Se++,this.fragId=De,this.vertId=Xe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kr(De,Xe,$e){var ot;ot=dr(35632,De.fragId);var st=dr(35633,De.vertId);if(Xe=De.program=Je.createProgram(),Je.attachShader(Xe,ot),Je.attachShader(Xe,st),$e)for(ot=0;ot<$e.length;++ot)st=$e[ot],Je.bindAttribLocation(Xe,st[0],st[1]);Je.linkProgram(Xe),st=Je.getProgramParameter(Xe,35718),rr.profile&&(De.stats.uniformsCount=st);var pt=De.uniforms;for(ot=0;ot<st;++ot)if($e=Je.getActiveUniform(Xe,ot)){if(1<$e.size)for(var wt=0;wt<$e.size;++wt){var Yt=$e.name.replace("[0]","["+wt+"]");or(pt,new vr(Yt,gt.id(Yt),Je.getUniformLocation(Xe,Yt),$e))}wt=$e.name,1<$e.size&&(wt=wt.replace("[0]","")),or(pt,new vr(wt,gt.id(wt),Je.getUniformLocation(Xe,wt),$e))}for(st=Je.getProgramParameter(Xe,35721),rr.profile&&(De.stats.attributesCount=st),De=De.attributes,ot=0;ot<st;++ot)($e=Je.getActiveAttrib(Xe,ot))&&or(De,new vr($e.name,gt.id($e.name),Je.getAttribLocation(Xe,$e.name),$e))}var tr={},Or={},et={},we=[],Se=0;return rr.profile&&(Et.getMaxUniformsCount=function(){var De=0;return we.forEach(function(Xe){Xe.stats.uniformsCount>De&&(De=Xe.stats.uniformsCount)}),De},Et.getMaxAttributesCount=function(){var De=0;return we.forEach(function(Xe){Xe.stats.attributesCount>De&&(De=Xe.stats.attributesCount)}),De}),{clear:function(){var De=Je.deleteShader.bind(Je);ye(tr).forEach(De),tr={},ye(Or).forEach(De),Or={},we.forEach(function(Xe){Je.deleteProgram(Xe.program)}),we.length=0,et={},Et.shaderCount=0},program:function(De,Xe,$e,ot){var st=et[Xe];st||(st=et[Xe]={});var pt=st[De];if(pt&&(pt.refCount++,!ot))return pt;var wt=new Lr(Xe,De);return Et.shaderCount++,kr(wt,$e,ot),pt||(st[De]=wt),we.push(wt),j(wt,{destroy:function(){if(wt.refCount--,0>=wt.refCount){Je.deleteProgram(wt.program);var Yt=we.indexOf(wt);we.splice(Yt,1),Et.shaderCount--}0>=st[wt.vertId].refCount&&(Je.deleteShader(Or[wt.vertId]),delete Or[wt.vertId],delete et[wt.fragId][wt.vertId]),Object.keys(et[wt.fragId]).length||(Je.deleteShader(tr[wt.fragId]),delete tr[wt.fragId],delete et[wt.fragId])}})},restore:function(){tr={},Or={};for(var De=0;De<we.length;++De)kr(we[De],null,we[De].attributes.map(function(Xe){return[Xe.location,Xe.name]}))},shader:dr,frag:-1,vert:-1}}function X(Je,gt,Et,rr,vr,or,dr){function Lr(tr){var Or;Or=gt.next===null?5121:gt.next.colorAttachments[0].texture._texture.type;var et=0,we=0,Se=rr.framebufferWidth,De=rr.framebufferHeight,Xe=null;return ce(tr)?Xe=tr:tr&&(et=tr.x|0,we=tr.y|0,Se=(tr.width||rr.framebufferWidth-et)|0,De=(tr.height||rr.framebufferHeight-we)|0,Xe=tr.data||null),Et(),tr=Se*De*4,Xe||(Or===5121?Xe=new Uint8Array(tr):Or===5126&&(Xe=Xe||new Float32Array(tr))),Je.pixelStorei(3333,4),Je.readPixels(et,we,Se,De,6408,Or,Xe),Xe}function kr(tr){var Or;return gt.setFBO({framebuffer:tr.framebuffer},function(){Or=Lr(tr)}),Or}return function(tr){return tr&&"framebuffer"in tr?kr(tr):Lr(tr)}}function q(Je){return Array.prototype.slice.call(Je)}function $(Je){return q(Je).join("")}function V(){function Je(){var Lr=[],kr=[];return j(function(){Lr.push.apply(Lr,q(arguments))},{def:function(){var tr="v"+Et++;return kr.push(tr),0<arguments.length&&(Lr.push(tr,"="),Lr.push.apply(Lr,q(arguments)),Lr.push(";")),tr},toString:function(){return $([0<kr.length?"var "+kr.join(",")+";":"",$(Lr)])}})}function gt(){function Lr(we,Se){tr(we,Se,"=",kr.def(we,Se),";")}var kr=Je(),tr=Je(),Or=kr.toString,et=tr.toString;return j(function(){kr.apply(kr,q(arguments))},{def:kr.def,entry:kr,exit:tr,save:Lr,set:function(we,Se,De){Lr(we,Se),kr(we,Se,"=",De,";")},toString:function(){return Or()+et()}})}var Et=0,rr=[],vr=[],or=Je(),dr={};return{global:or,link:function(Lr){for(var kr=0;kr<vr.length;++kr)if(vr[kr]===Lr)return rr[kr];return kr="g"+Et++,rr.push(kr),vr.push(Lr),kr},block:Je,proc:function(Lr,kr){function tr(){var Se="a"+Or.length;return Or.push(Se),Se}var Or=[];kr=kr||0;for(var et=0;et<kr;++et)tr();var et=gt(),we=et.toString;return dr[Lr]=j(et,{arg:tr,toString:function(){return $(["function(",Or.join(),"){",we(),"}"])}})},scope:gt,cond:function(){var Lr=$(arguments),kr=gt(),tr=gt(),Or=kr.toString,et=tr.toString;return j(kr,{then:function(){return kr.apply(kr,q(arguments)),this},else:function(){return tr.apply(tr,q(arguments)),this},toString:function(){var we=et();return we&&(we="else{"+we+"}"),$(["if(",Lr,"){",Or(),"}",we])}})},compile:function(){var Lr=['"use strict";',or,"return {"];Object.keys(dr).forEach(function(tr){Lr.push('"',tr,'":',dr[tr].toString(),",")}),Lr.push("}");var kr=$(Lr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,rr.concat(kr)).apply(null,vr)}}}function K(Je){return Array.isArray(Je)||ce(Je)||p(Je)}function se(Je){return Je.sort(function(gt,Et){return gt==="viewport"?-1:Et==="viewport"?1:gt<Et?-1:1})}function ue(Je,gt,Et,rr){this.thisDep=Je,this.contextDep=gt,this.propDep=Et,this.append=rr}function oe(Je){return Je&&!(Je.thisDep||Je.contextDep||Je.propDep)}function U(Je){return new ue(!1,!1,!1,Je)}function G(Je,gt){var Et=Je.type;if(Et===0)return Et=Je.data.length,new ue(!0,1<=Et,2<=Et,gt);if(Et===4)return Et=Je.data,new ue(Et.thisDep,Et.contextDep,Et.propDep,gt);if(Et===5)return new ue(!1,!1,!1,gt);if(Et===6){for(var rr=Et=!1,vr=!1,or=0;or<Je.data.length;++or){var dr=Je.data[or];dr.type===1?vr=!0:dr.type===2?rr=!0:dr.type===3?Et=!0:dr.type===0?(Et=!0,dr=dr.data,1<=dr&&(rr=!0),2<=dr&&(vr=!0)):dr.type===4&&(Et=Et||dr.data.thisDep,rr=rr||dr.data.contextDep,vr=vr||dr.data.propDep)}return new ue(Et,rr,vr,gt)}return new ue(Et===3,Et===2,Et===1,gt)}function re(Je,gt,Et,rr,vr,or,dr,Lr,kr,tr,Or,et,we,Se,De){function Xe(ur){return ur.replace(".","_")}function $e(ur,Rr,on){var rn=Xe(ur);Nn.push(ur),Fn[rn]=$r[rn]=!!on,ca[rn]=Rr}function ot(ur,Rr,on){var rn=Xe(ur);Nn.push(ur),Array.isArray(on)?($r[rn]=on.slice(),Fn[rn]=on.slice()):$r[rn]=Fn[rn]=on,ra[rn]=Rr}function st(){var ur=V(),Rr=ur.link,on=ur.global;ur.id=da++,ur.batchId="0";var rn=Rr(Un),gn=ur.shared={props:"a0"};Object.keys(Un).forEach(function(Fr){gn[Fr]=on.def(rn,".",Fr)});var wn=ur.next={},pn=ur.current={};Object.keys(ra).forEach(function(Fr){Array.isArray($r[Fr])&&(wn[Fr]=on.def(gn.next,".",Fr),pn[Fr]=on.def(gn.current,".",Fr))});var cr=ur.constants={};Object.keys(ua).forEach(function(Fr){cr[Fr]=on.def(JSON.stringify(ua[Fr]))}),ur.invoke=function(Fr,Jr){switch(Jr.type){case 0:var En=["this",gn.context,gn.props,ur.batchId];return Fr.def(Rr(Jr.data),".call(",En.slice(0,Math.max(Jr.data.length+1,4)),")");case 1:return Fr.def(gn.props,Jr.data);case 2:return Fr.def(gn.context,Jr.data);case 3:return Fr.def("this",Jr.data);case 4:return Jr.data.append(ur,Fr),Jr.data.ref;case 5:return Jr.data.toString();case 6:return Jr.data.map(function(Vn){return ur.invoke(Fr,Vn)})}},ur.attribCache={};var ar={};return ur.scopeAttrib=function(Fr){if(Fr=gt.id(Fr),Fr in ar)return ar[Fr];var Jr=tr.scope[Fr];return Jr||(Jr=tr.scope[Fr]=new ia),ar[Fr]=Rr(Jr)},ur}function pt(ur){var Rr=ur.static;ur=ur.dynamic;var on;if("profile"in Rr){var rn=!!Rr.profile;on=U(function(wn,pn){return rn}),on.enable=rn}else if("profile"in ur){var gn=ur.profile;on=G(gn,function(wn,pn){return wn.invoke(pn,gn)})}return on}function wt(ur,Rr){var on=ur.static,rn=ur.dynamic;if("framebuffer"in on){var gn=on.framebuffer;return gn?(gn=Lr.getFramebuffer(gn),U(function(pn,cr){var ar=pn.link(gn),Fr=pn.shared;return cr.set(Fr.framebuffer,".next",ar),Fr=Fr.context,cr.set(Fr,".framebufferWidth",ar+".width"),cr.set(Fr,".framebufferHeight",ar+".height"),ar})):U(function(pn,cr){var ar=pn.shared;return cr.set(ar.framebuffer,".next","null"),ar=ar.context,cr.set(ar,".framebufferWidth",ar+".drawingBufferWidth"),cr.set(ar,".framebufferHeight",ar+".drawingBufferHeight"),"null"})}if("framebuffer"in rn){var wn=rn.framebuffer;return G(wn,function(pn,cr){var ar=pn.invoke(cr,wn),Fr=pn.shared,Jr=Fr.framebuffer,ar=cr.def(Jr,".getFramebuffer(",ar,")");return cr.set(Jr,".next",ar),Fr=Fr.context,cr.set(Fr,".framebufferWidth",ar+"?"+ar+".width:"+Fr+".drawingBufferWidth"),cr.set(Fr,".framebufferHeight",ar+"?"+ar+".height:"+Fr+".drawingBufferHeight"),ar})}return null}function Yt(ur,Rr,on){function rn(cr){if(cr in gn){var ar=gn[cr];cr=!0;var Fr=ar.x|0,Jr=ar.y|0,En,Vn;return"width"in ar?En=ar.width|0:cr=!1,"height"in ar?Vn=ar.height|0:cr=!1,new ue(!cr&&Rr&&Rr.thisDep,!cr&&Rr&&Rr.contextDep,!cr&&Rr&&Rr.propDep,function(jn,Bn){var mn=jn.shared.context,Rn=En;"width"in ar||(Rn=Bn.def(mn,".","framebufferWidth","-",Fr));var Yn=Vn;return"height"in ar||(Yn=Bn.def(mn,".","framebufferHeight","-",Jr)),[Fr,Jr,Rn,Yn]})}if(cr in wn){var Kn=wn[cr];return cr=G(Kn,function(jn,Bn){var mn=jn.invoke(Bn,Kn),Rn=jn.shared.context,Yn=Bn.def(mn,".x|0"),la=Bn.def(mn,".y|0"),Ga=Bn.def('"width" in ',mn,"?",mn,".width|0:","(",Rn,".","framebufferWidth","-",Yn,")"),mn=Bn.def('"height" in ',mn,"?",mn,".height|0:","(",Rn,".","framebufferHeight","-",la,")");return[Yn,la,Ga,mn]}),Rr&&(cr.thisDep=cr.thisDep||Rr.thisDep,cr.contextDep=cr.contextDep||Rr.contextDep,cr.propDep=cr.propDep||Rr.propDep),cr}return Rr?new ue(Rr.thisDep,Rr.contextDep,Rr.propDep,function(jn,Bn){var mn=jn.shared.context;return[0,0,Bn.def(mn,".","framebufferWidth"),Bn.def(mn,".","framebufferHeight")]}):null}var gn=ur.static,wn=ur.dynamic;if(ur=rn("viewport")){var pn=ur;ur=new ue(ur.thisDep,ur.contextDep,ur.propDep,function(cr,ar){var Fr=pn.append(cr,ar),Jr=cr.shared.context;return ar.set(Jr,".viewportWidth",Fr[2]),ar.set(Jr,".viewportHeight",Fr[3]),Fr})}return{viewport:ur,scissor_box:rn("scissor.box")}}function mr(ur,Rr){var on=ur.static;if(typeof on.frag=="string"&&typeof on.vert=="string"){if(0<Object.keys(Rr.dynamic).length)return null;var on=Rr.static,rn=Object.keys(on);if(0<rn.length&&typeof on[rn[0]]=="number"){for(var gn=[],wn=0;wn<rn.length;++wn)gn.push([on[rn[wn]]|0,rn[wn]]);return gn}}return null}function xr(ur,Rr,on){function rn(Fr){if(Fr in gn){var Jr=gt.id(gn[Fr]);return Fr=U(function(){return Jr}),Fr.id=Jr,Fr}if(Fr in wn){var En=wn[Fr];return G(En,function(Vn,Kn){var jn=Vn.invoke(Kn,En);return Kn.def(Vn.shared.strings,".id(",jn,")")})}return null}var gn=ur.static,wn=ur.dynamic,pn=rn("frag"),cr=rn("vert"),ar=null;return oe(pn)&&oe(cr)?(ar=Or.program(cr.id,pn.id,null,on),ur=U(function(Fr,Jr){return Fr.link(ar)})):ur=new ue(pn&&pn.thisDep||cr&&cr.thisDep,pn&&pn.contextDep||cr&&cr.contextDep,pn&&pn.propDep||cr&&cr.propDep,function(Fr,Jr){var En=Fr.shared.shader,Vn;Vn=pn?pn.append(Fr,Jr):Jr.def(En,".","frag");var Kn;return Kn=cr?cr.append(Fr,Jr):Jr.def(En,".","vert"),Jr.def(En+".program("+Kn+","+Vn+")")}),{frag:pn,vert:cr,progVar:ur,program:ar}}function Tr(ur,Rr){function on(jn,Bn){if(jn in rn){var mn=rn[jn]|0;return Bn?wn.offset=mn:wn.instances=mn,U(function(Yn,la){return Bn&&(Yn.OFFSET=mn),mn})}if(jn in gn){var Rn=gn[jn];return G(Rn,function(Yn,la){var Ga=Yn.invoke(la,Rn);return Bn&&(Yn.OFFSET=Ga),Ga})}if(Bn){if(ar)return U(function(Yn,la){return Yn.OFFSET=0});if(pn)return new ue(cr.thisDep,cr.contextDep,cr.propDep,function(Yn,la){return la.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.offset:0")})}else if(pn)return new ue(cr.thisDep,cr.contextDep,cr.propDep,function(Yn,la){return la.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.instances:-1")});return null}var rn=ur.static,gn=ur.dynamic,wn={},pn=!1,cr=function(){if("vao"in rn){var jn=rn.vao;return jn!==null&&tr.getVAO(jn)===null&&(jn=tr.createVAO(jn)),pn=!0,wn.vao=jn,U(function(mn){var Rn=tr.getVAO(jn);return Rn?mn.link(Rn):"null"})}if("vao"in gn){pn=!0;var Bn=gn.vao;return G(Bn,function(mn,Rn){var Yn=mn.invoke(Rn,Bn);return Rn.def(mn.shared.vao+".getVAO("+Yn+")")})}return null}(),ar=!1,Fr=function(){if("elements"in rn){var jn=rn.elements;if(wn.elements=jn,K(jn)){var Bn=wn.elements=or.create(jn,!0),jn=or.getElements(Bn);ar=!0}else jn&&(jn=or.getElements(jn),ar=!0);return Bn=U(function(Rn,Yn){if(jn){var la=Rn.link(jn);return Rn.ELEMENTS=la}return Rn.ELEMENTS=null}),Bn.value=jn,Bn}if("elements"in gn){ar=!0;var mn=gn.elements;return G(mn,function(Rn,Yn){var la=Rn.shared,Ga=la.isBufferArgs,la=la.elements,ka=Rn.invoke(Yn,mn),il=Yn.def("null"),Ga=Yn.def(Ga,"(",ka,")"),ka=Rn.cond(Ga).then(il,"=",la,".createStream(",ka,");").else(il,"=",la,".getElements(",ka,");");return Yn.entry(ka),Yn.exit(Rn.cond(Ga).then(la,".destroyStream(",il,");")),Rn.ELEMENTS=il})}return pn?new ue(cr.thisDep,cr.contextDep,cr.propDep,function(Rn,Yn){return Yn.def(Rn.shared.vao+".currentVAO?"+Rn.shared.elements+".getElements("+Rn.shared.vao+".currentVAO.elements):null")}):null}(),Jr=on("offset",!0),En=function(){if("primitive"in rn){var jn=rn.primitive;return wn.primitive=jn,U(function(mn,Rn){return Ie[jn]})}if("primitive"in gn){var Bn=gn.primitive;return G(Bn,function(mn,Rn){var Yn=mn.constants.primTypes,la=mn.invoke(Rn,Bn);return Rn.def(Yn,"[",la,"]")})}return ar?oe(Fr)?Fr.value?U(function(mn,Rn){return Rn.def(mn.ELEMENTS,".primType")}):U(function(){return 4}):new ue(Fr.thisDep,Fr.contextDep,Fr.propDep,function(mn,Rn){var Yn=mn.ELEMENTS;return Rn.def(Yn,"?",Yn,".primType:",4)}):pn?new ue(cr.thisDep,cr.contextDep,cr.propDep,function(mn,Rn){return Rn.def(mn.shared.vao+".currentVAO?"+mn.shared.vao+".currentVAO.primitive:4")}):null}(),Vn=function(){if("count"in rn){var jn=rn.count|0;return wn.count=jn,U(function(){return jn})}if("count"in gn){var Bn=gn.count;return G(Bn,function(mn,Rn){return mn.invoke(Rn,Bn)})}return ar?oe(Fr)?Fr?Jr?new ue(Jr.thisDep,Jr.contextDep,Jr.propDep,function(mn,Rn){return Rn.def(mn.ELEMENTS,".vertCount-",mn.OFFSET)}):U(function(mn,Rn){return Rn.def(mn.ELEMENTS,".vertCount")}):U(function(){return-1}):new ue(Fr.thisDep||Jr.thisDep,Fr.contextDep||Jr.contextDep,Fr.propDep||Jr.propDep,function(mn,Rn){var Yn=mn.ELEMENTS;return mn.OFFSET?Rn.def(Yn,"?",Yn,".vertCount-",mn.OFFSET,":-1"):Rn.def(Yn,"?",Yn,".vertCount:-1")}):pn?new ue(cr.thisDep,cr.contextDep,cr.propDep,function(mn,Rn){return Rn.def(mn.shared.vao,".currentVAO?",mn.shared.vao,".currentVAO.count:-1")}):null}(),Kn=on("instances",!1);return{elements:Fr,primitive:En,count:Vn,instances:Kn,offset:Jr,vao:cr,vaoActive:pn,elementsActive:ar,static:wn}}function yr(ur,Rr){var on=ur.static,rn=ur.dynamic,gn={};return Nn.forEach(function(wn){function pn(ar,Fr){if(wn in on){var Jr=ar(on[wn]);gn[cr]=U(function(){return Jr})}else if(wn in rn){var En=rn[wn];gn[cr]=G(En,function(Vn,Kn){return Fr(Vn,Kn,Vn.invoke(Kn,En))})}}var cr=Xe(wn);switch(wn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return pn(function(ar){return ar},function(ar,Fr,Jr){return Jr});case"depth.func":return pn(function(ar){return St[ar]},function(ar,Fr,Jr){return Fr.def(ar.constants.compareFuncs,"[",Jr,"]")});case"depth.range":return pn(function(ar){return ar},function(ar,Fr,Jr){return ar=Fr.def("+",Jr,"[0]"),Fr=Fr.def("+",Jr,"[1]"),[ar,Fr]});case"blend.func":return pn(function(ar){return[Pt["srcRGB"in ar?ar.srcRGB:ar.src],Pt["dstRGB"in ar?ar.dstRGB:ar.dst],Pt["srcAlpha"in ar?ar.srcAlpha:ar.src],Pt["dstAlpha"in ar?ar.dstAlpha:ar.dst]]},function(ar,Fr,Jr){function En(Bn,mn){return Fr.def('"',Bn,mn,'" in ',Jr,"?",Jr,".",Bn,mn,":",Jr,".",Bn)}ar=ar.constants.blendFuncs;var Vn=En("src","RGB"),Kn=En("dst","RGB"),Vn=Fr.def(ar,"[",Vn,"]"),jn=Fr.def(ar,"[",En("src","Alpha"),"]"),Kn=Fr.def(ar,"[",Kn,"]");return ar=Fr.def(ar,"[",En("dst","Alpha"),"]"),[Vn,Kn,jn,ar]});case"blend.equation":return pn(function(ar){if(typeof ar=="string")return[Aa[ar],Aa[ar]];if(typeof ar=="object")return[Aa[ar.rgb],Aa[ar.alpha]]},function(ar,Fr,Jr){var En=ar.constants.blendEquations,Vn=Fr.def(),Kn=Fr.def();return ar=ar.cond("typeof ",Jr,'==="string"'),ar.then(Vn,"=",Kn,"=",En,"[",Jr,"];"),ar.else(Vn,"=",En,"[",Jr,".rgb];",Kn,"=",En,"[",Jr,".alpha];"),Fr(ar),[Vn,Kn]});case"blend.color":return pn(function(ar){return i(4,function(Fr){return+ar[Fr]})},function(ar,Fr,Jr){return i(4,function(En){return Fr.def("+",Jr,"[",En,"]")})});case"stencil.mask":return pn(function(ar){return ar|0},function(ar,Fr,Jr){return Fr.def(Jr,"|0")});case"stencil.func":return pn(function(ar){return[St[ar.cmp||"keep"],ar.ref||0,"mask"in ar?ar.mask:-1]},function(ar,Fr,Jr){ar=Fr.def('"cmp" in ',Jr,"?",ar.constants.compareFuncs,"[",Jr,".cmp]",":",7680);var En=Fr.def(Jr,".ref|0");return Fr=Fr.def('"mask" in ',Jr,"?",Jr,".mask|0:-1"),[ar,En,Fr]});case"stencil.opFront":case"stencil.opBack":return pn(function(ar){return[wn==="stencil.opBack"?1029:1028,Nt[ar.fail||"keep"],Nt[ar.zfail||"keep"],Nt[ar.zpass||"keep"]]},function(ar,Fr,Jr){function En(Kn){return Fr.def('"',Kn,'" in ',Jr,"?",Vn,"[",Jr,".",Kn,"]:",7680)}var Vn=ar.constants.stencilOps;return[wn==="stencil.opBack"?1029:1028,En("fail"),En("zfail"),En("zpass")]});case"polygonOffset.offset":return pn(function(ar){return[ar.factor|0,ar.units|0]},function(ar,Fr,Jr){return ar=Fr.def(Jr,".factor|0"),Fr=Fr.def(Jr,".units|0"),[ar,Fr]});case"cull.face":return pn(function(ar){var Fr=0;return ar==="front"?Fr=1028:ar==="back"&&(Fr=1029),Fr},function(ar,Fr,Jr){return Fr.def(Jr,'==="front"?',1028,":",1029)});case"lineWidth":return pn(function(ar){return ar},function(ar,Fr,Jr){return Jr});case"frontFace":return pn(function(ar){return Xt[ar]},function(ar,Fr,Jr){return Fr.def(Jr+'==="cw"?2304:2305')});case"colorMask":return pn(function(ar){return ar.map(function(Fr){return!!Fr})},function(ar,Fr,Jr){return i(4,function(En){return"!!"+Jr+"["+En+"]"})});case"sample.coverage":return pn(function(ar){return["value"in ar?ar.value:1,!!ar.invert]},function(ar,Fr,Jr){return ar=Fr.def('"value" in ',Jr,"?+",Jr,".value:1"),Fr=Fr.def("!!",Jr,".invert"),[ar,Fr]})}}),gn}function Dr(ur,Rr){var on=ur.static,rn=ur.dynamic,gn={};return Object.keys(on).forEach(function(wn){var pn=on[wn],cr;if(typeof pn=="number"||typeof pn=="boolean")cr=U(function(){return pn});else if(typeof pn=="function"){var ar=pn._reglType;ar==="texture2d"||ar==="textureCube"?cr=U(function(Fr){return Fr.link(pn)}):(ar==="framebuffer"||ar==="framebufferCube")&&(cr=U(function(Fr){return Fr.link(pn.color[0])}))}else x(pn)&&(cr=U(function(Fr){return Fr.global.def("[",i(pn.length,function(Jr){return pn[Jr]}),"]")}));cr.value=pn,gn[wn]=cr}),Object.keys(rn).forEach(function(wn){var pn=rn[wn];gn[wn]=G(pn,function(cr,ar){return cr.invoke(ar,pn)})}),gn}function tn(ur,Rr){var on=ur.static,rn=ur.dynamic,gn={};return Object.keys(on).forEach(function(wn){var pn=on[wn],cr=gt.id(wn),ar=new ia;if(K(pn))ar.state=1,ar.buffer=vr.getBuffer(vr.create(pn,34962,!1,!0)),ar.type=0;else{var Fr=vr.getBuffer(pn);if(Fr)ar.state=1,ar.buffer=Fr,ar.type=0;else if("constant"in pn){var Jr=pn.constant;ar.buffer="null",ar.state=2,typeof Jr=="number"?ar.x=Jr:rt.forEach(function(mn,Rn){Rn<Jr.length&&(ar[mn]=Jr[Rn])})}else{var Fr=K(pn.buffer)?vr.getBuffer(vr.create(pn.buffer,34962,!1,!0)):vr.getBuffer(pn.buffer),En=pn.offset|0,Vn=pn.stride|0,Kn=pn.size|0,jn=!!pn.normalized,Bn=0;"type"in pn&&(Bn=Ae[pn.type]),pn=pn.divisor|0,ar.buffer=Fr,ar.state=1,ar.size=Kn,ar.normalized=jn,ar.type=Bn||Fr.dtype,ar.offset=En,ar.stride=Vn,ar.divisor=pn}}gn[wn]=U(function(mn,Rn){var Yn=mn.attribCache;if(cr in Yn)return Yn[cr];var la={isStream:!1};return Object.keys(ar).forEach(function(Ga){la[Ga]=ar[Ga]}),ar.buffer&&(la.buffer=mn.link(ar.buffer),la.type=la.type||la.buffer+".dtype"),Yn[cr]=la})}),Object.keys(rn).forEach(function(wn){var pn=rn[wn];gn[wn]=G(pn,function(cr,ar){function Fr(Yn){ar(jn[Yn],"=",Jr,".",Yn,"|0;")}var Jr=cr.invoke(ar,pn),En=cr.shared,Vn=cr.constants,Kn=En.isBufferArgs,En=En.buffer,jn={isStream:ar.def(!1)},Bn=new ia;Bn.state=1,Object.keys(Bn).forEach(function(Yn){jn[Yn]=ar.def(""+Bn[Yn])});var mn=jn.buffer,Rn=jn.type;return ar("if(",Kn,"(",Jr,")){",jn.isStream,"=true;",mn,"=",En,".createStream(",34962,",",Jr,");",Rn,"=",mn,".dtype;","}else{",mn,"=",En,".getBuffer(",Jr,");","if(",mn,"){",Rn,"=",mn,".dtype;",'}else if("constant" in ',Jr,"){",jn.state,"=",2,";","if(typeof "+Jr+'.constant === "number"){',jn[rt[0]],"=",Jr,".constant;",rt.slice(1).map(function(Yn){return jn[Yn]}).join("="),"=0;","}else{",rt.map(function(Yn,la){return jn[Yn]+"="+Jr+".constant.length>"+la+"?"+Jr+".constant["+la+"]:0;"}).join(""),"}}else{","if(",Kn,"(",Jr,".buffer)){",mn,"=",En,".createStream(",34962,",",Jr,".buffer);","}else{",mn,"=",En,".getBuffer(",Jr,".buffer);","}",Rn,'="type" in ',Jr,"?",Vn.glTypes,"[",Jr,".type]:",mn,".dtype;",jn.normalized,"=!!",Jr,".normalized;"),Fr("size"),Fr("offset"),Fr("stride"),Fr("divisor"),ar("}}"),ar.exit("if(",jn.isStream,"){",En,".destroyStream(",mn,");","}"),jn})}),gn}function wr(ur){var Rr=ur.static,on=ur.dynamic,rn={};return Object.keys(Rr).forEach(function(gn){var wn=Rr[gn];rn[gn]=U(function(pn,cr){return typeof wn=="number"||typeof wn=="boolean"?""+wn:pn.link(wn)})}),Object.keys(on).forEach(function(gn){var wn=on[gn];rn[gn]=G(wn,function(pn,cr){return pn.invoke(cr,wn)})}),rn}function gr(ur,Rr,on,rn,gn){function wn(Bn){var mn=ar[Bn];mn&&(Jr[Bn]=mn)}var pn=mr(ur,Rr),cr=wt(ur),ar=Yt(ur,cr),Fr=Tr(ur),Jr=yr(ur),En=xr(ur,gn,pn);wn("viewport"),wn(Xe("scissor.box"));var Vn=0<Object.keys(Jr).length,cr={framebuffer:cr,draw:Fr,shader:En,state:Jr,dirty:Vn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(cr.profile=pt(ur),cr.uniforms=Dr(on),cr.drawVAO=cr.scopeVAO=Fr.vao,!cr.drawVAO&&En.program&&!pn&&Et.angle_instanced_arrays&&Fr.static.elements){var Kn=!0;if(ur=En.program.attributes.map(function(Bn){return Bn=Rr.static[Bn],Kn=Kn&&!!Bn,Bn}),Kn&&0<ur.length){var jn=tr.getVAO(tr.createVAO({attributes:ur,elements:Fr.static.elements}));cr.drawVAO=new ue(null,null,null,function(Bn,mn){return Bn.link(jn)}),cr.useVAO=!0}}return pn?cr.useVAO=!0:cr.attributes=tn(Rr),cr.context=wr(rn),cr}function yn(ur,Rr,on){var rn=ur.shared.context,gn=ur.scope();Object.keys(on).forEach(function(wn){Rr.save(rn,"."+wn);var pn=on[wn].append(ur,Rr);Array.isArray(pn)?gn(rn,".",wn,"=[",pn.join(),"];"):gn(rn,".",wn,"=",pn,";")}),Rr(gn)}function Gr(ur,Rr,on,rn){var gn=ur.shared,wn=gn.gl,pn=gn.framebuffer,cr;pr&&(cr=Rr.def(gn.extensions,".webgl_draw_buffers"));var ar=ur.constants,gn=ar.drawBuffer,ar=ar.backBuffer;ur=on?on.append(ur,Rr):Rr.def(pn,".next"),rn||Rr("if(",ur,"!==",pn,".cur){"),Rr("if(",ur,"){",wn,".bindFramebuffer(",36160,",",ur,".framebuffer);"),pr&&Rr(cr,".drawBuffersWEBGL(",gn,"[",ur,".colorAttachments.length]);"),Rr("}else{",wn,".bindFramebuffer(",36160,",null);"),pr&&Rr(cr,".drawBuffersWEBGL(",ar,");"),Rr("}",pn,".cur=",ur,";"),rn||Rr("}")}function Ar(ur,Rr,on){var rn=ur.shared,gn=rn.gl,wn=ur.current,pn=ur.next,cr=rn.current,ar=rn.next,Fr=ur.cond(cr,".dirty");Nn.forEach(function(Jr){if(Jr=Xe(Jr),!(Jr in on.state)){var En,Vn;if(Jr in pn){En=pn[Jr],Vn=wn[Jr];var Kn=i($r[Jr].length,function(jn){return Fr.def(En,"[",jn,"]")});Fr(ur.cond(Kn.map(function(jn,Bn){return jn+"!=="+Vn+"["+Bn+"]"}).join("||")).then(gn,".",ra[Jr],"(",Kn,");",Kn.map(function(jn,Bn){return Vn+"["+Bn+"]="+jn}).join(";"),";"))}else En=Fr.def(ar,".",Jr),Kn=ur.cond(En,"!==",cr,".",Jr),Fr(Kn),Jr in ca?Kn(ur.cond(En).then(gn,".enable(",ca[Jr],");").else(gn,".disable(",ca[Jr],");"),cr,".",Jr,"=",En,";"):Kn(gn,".",ra[Jr],"(",En,");",cr,".",Jr,"=",En,";")}}),Object.keys(on.state).length===0&&Fr(cr,".dirty=false;"),Rr(Fr)}function nn(ur,Rr,on,rn){var gn=ur.shared,wn=ur.current,pn=gn.current,cr=gn.gl;se(Object.keys(on)).forEach(function(ar){var Fr=on[ar];if(!rn||rn(Fr)){var Jr=Fr.append(ur,Rr);if(ca[ar]){var En=ca[ar];oe(Fr)?Jr?Rr(cr,".enable(",En,");"):Rr(cr,".disable(",En,");"):Rr(ur.cond(Jr).then(cr,".enable(",En,");").else(cr,".disable(",En,");")),Rr(pn,".",ar,"=",Jr,";")}else if(x(Jr)){var Vn=wn[ar];Rr(cr,".",ra[ar],"(",Jr,");",Jr.map(function(Kn,jn){return Vn+"["+jn+"]="+Kn}).join(";"),";")}else Rr(cr,".",ra[ar],"(",Jr,");",pn,".",ar,"=",Jr,";")}})}function fn(ur,Rr){ya&&(ur.instancing=Rr.def(ur.shared.extensions,".angle_instanced_arrays"))}function Xr(ur,Rr,on,rn,gn){function wn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function pn(Bn){Kn=Rr.def(),Bn(Kn,"=",wn(),";"),typeof gn=="string"?Bn(Jr,".count+=",gn,";"):Bn(Jr,".count++;"),Se&&(rn?(jn=Rr.def(),Bn(jn,"=",Vn,".getNumPendingQueries();")):Bn(Vn,".beginQuery(",Jr,");"))}function cr(Bn){Bn(Jr,".cpuTime+=",wn(),"-",Kn,";"),Se&&(rn?Bn(Vn,".pushScopeStats(",jn,",",Vn,".getNumPendingQueries(),",Jr,");"):Bn(Vn,".endQuery();"))}function ar(Bn){var mn=Rr.def(En,".profile");Rr(En,".profile=",Bn,";"),Rr.exit(En,".profile=",mn,";")}var Fr=ur.shared,Jr=ur.stats,En=Fr.current,Vn=Fr.timer;on=on.profile;var Kn,jn;if(on){if(oe(on)){on.enable?(pn(Rr),cr(Rr.exit),ar("true")):ar("false");return}on=on.append(ur,Rr),ar(on)}else on=Rr.def(En,".profile");Fr=ur.block(),pn(Fr),Rr("if(",on,"){",Fr,"}"),ur=ur.block(),cr(ur),Rr.exit("if(",on,"){",ur,"}")}function at(ur,Rr,on,rn,gn){function wn(ar){switch(ar){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function pn(ar,Fr,Jr){function En(){Rr("if(!",Bn,".buffer){",Kn,".enableVertexAttribArray(",jn,");}");var la=Jr.type,Ga;Ga=Jr.size?Rr.def(Jr.size,"||",Fr):Fr,Rr("if(",Bn,".type!==",la,"||",Bn,".size!==",Ga,"||",Yn.map(function(ka){return Bn+"."+ka+"!=="+Jr[ka]}).join("||"),"){",Kn,".bindBuffer(",34962,",",mn,".buffer);",Kn,".vertexAttribPointer(",[jn,Ga,la,Jr.normalized,Jr.stride,Jr.offset],");",Bn,".type=",la,";",Bn,".size=",Ga,";",Yn.map(function(ka){return Bn+"."+ka+"="+Jr[ka]+";"}).join(""),"}"),ya&&(la=Jr.divisor,Rr("if(",Bn,".divisor!==",la,"){",ur.instancing,".vertexAttribDivisorANGLE(",[jn,la],");",Bn,".divisor=",la,";}"))}function Vn(){Rr("if(",Bn,".buffer){",Kn,".disableVertexAttribArray(",jn,");",Bn,".buffer=null;","}if(",rt.map(function(la,Ga){return Bn+"."+la+"!=="+Rn[Ga]}).join("||"),"){",Kn,".vertexAttrib4f(",jn,",",Rn,");",rt.map(function(la,Ga){return Bn+"."+la+"="+Rn[Ga]+";"}).join(""),"}")}var Kn=cr.gl,jn=Rr.def(ar,".location"),Bn=Rr.def(cr.attributes,"[",jn,"]");ar=Jr.state;var mn=Jr.buffer,Rn=[Jr.x,Jr.y,Jr.z,Jr.w],Yn=["buffer","normalized","offset","stride"];ar===1?En():ar===2?Vn():(Rr("if(",ar,"===",1,"){"),En(),Rr("}else{"),Vn(),Rr("}"))}var cr=ur.shared;rn.forEach(function(ar){var Fr=ar.name,Jr=on.attributes[Fr],En;if(Jr){if(!gn(Jr))return;En=Jr.append(ur,Rr)}else{if(!gn(Ot))return;var Vn=ur.scopeAttrib(Fr);En={},Object.keys(new ia).forEach(function(Kn){En[Kn]=Rr.def(Vn,".",Kn)})}pn(ur.link(ar),wn(ar.info.type),En)})}function Ft(ur,Rr,on,rn,gn,wn){for(var pn=ur.shared,cr=pn.gl,ar={},Fr,Jr=0;Jr<rn.length;++Jr){var En=rn[Jr],Vn=En.name,Kn=En.info.type,jn=En.info.size,Bn=on.uniforms[Vn];if(1<jn){if(!Bn)continue;var mn=Vn.replace("[0]","");if(ar[mn])continue;ar[mn]=1}var En=ur.link(En)+".location",Rn;if(Bn){if(!gn(Bn))continue;if(oe(Bn)){if(Vn=Bn.value,Kn===35678||Kn===35680)Kn=ur.link(Vn._texture||Vn.color[0]._texture),Rr(cr,".uniform1i(",En,",",Kn+".bind());"),Rr.exit(Kn,".unbind();");else if(Kn===35674||Kn===35675||Kn===35676)jn=ur.global.def("new Float32Array(["+Array.prototype.slice.call(Vn)+"])"),Vn=2,Kn===35675?Vn=3:Kn===35676&&(Vn=4),Rr(cr,".uniformMatrix",Vn,"fv(",En,",false,",jn,");");else{switch(Kn){case 5126:Fr="1f";break;case 35664:Fr="2f";break;case 35665:Fr="3f";break;case 35666:Fr="4f";break;case 35670:Fr="1i";break;case 5124:Fr="1i";break;case 35671:Fr="2i";break;case 35667:Fr="2i";break;case 35672:Fr="3i";break;case 35668:Fr="3i";break;case 35673:Fr="4i";break;case 35669:Fr="4i"}1<jn?(Fr+="v",Vn=ur.global.def("["+Array.prototype.slice.call(Vn)+"]")):Vn=x(Vn)?Array.prototype.slice.call(Vn):Vn,Rr(cr,".uniform",Fr,"(",En,",",Vn,");")}continue}else Rn=Bn.append(ur,Rr)}else{if(!gn(Ot))continue;Rn=Rr.def(pn.uniforms,"[",gt.id(Vn),"]")}switch(Kn===35678?Rr("if(",Rn,"&&",Rn,'._reglType==="framebuffer"){',Rn,"=",Rn,".color[0];","}"):Kn===35680&&Rr("if(",Rn,"&&",Rn,'._reglType==="framebufferCube"){',Rn,"=",Rn,".color[0];","}"),Vn=1,Kn){case 35678:case 35680:Kn=Rr.def(Rn,"._texture"),Rr(cr,".uniform1i(",En,",",Kn,".bind());"),Rr.exit(Kn,".unbind();");continue;case 5124:case 35670:Fr="1i";break;case 35667:case 35671:Fr="2i",Vn=2;break;case 35668:case 35672:Fr="3i",Vn=3;break;case 35669:case 35673:Fr="4i",Vn=4;break;case 5126:Fr="1f";break;case 35664:Fr="2f",Vn=2;break;case 35665:Fr="3f",Vn=3;break;case 35666:Fr="4f",Vn=4;break;case 35674:Fr="Matrix2fv";break;case 35675:Fr="Matrix3fv";break;case 35676:Fr="Matrix4fv"}if(Fr.indexOf("Matrix")===-1&&1<jn&&(Fr+="v",Vn=1),Fr.charAt(0)==="M"){Rr(cr,".uniform",Fr,"(",En,",");var En=Math.pow(Kn-35674+2,2),Yn=ur.global.def("new Float32Array(",En,")");Array.isArray(Rn)?Rr("false,(",i(En,function(ka){return Yn+"["+ka+"]="+Rn[ka]}),",",Yn,")"):Rr("false,(Array.isArray(",Rn,")||",Rn," instanceof Float32Array)?",Rn,":(",i(En,function(ka){return Yn+"["+ka+"]="+Rn+"["+ka+"]"}),",",Yn,")"),Rr(");")}else{if(1<Vn){for(var Kn=[],la=[],jn=0;jn<Vn;++jn)Array.isArray(Rn)?la.push(Rn[jn]):la.push(Rr.def(Rn+"["+jn+"]")),wn&&Kn.push(Rr.def());wn&&Rr("if(!",ur.batchId,"||",Kn.map(function(Ga,ka){return Ga+"!=="+la[ka]}).join("||"),"){",Kn.map(function(Ga,ka){return Ga+"="+la[ka]+";"}).join("")),Rr(cr,".uniform",Fr,"(",En,",",la.join(","),");")}else wn&&(Kn=Rr.def(),Rr("if(!",ur.batchId,"||",Kn,"!==",Rn,"){",Kn,"=",Rn,";")),Rr(cr,".uniform",Fr,"(",En,",",Rn,");");wn&&Rr("}")}}}function er(ur,Rr,on,rn){function gn(la){var Ga=Jr[la];return Ga?Ga.contextDep&&rn.contextDynamic||Ga.propDep?Ga.append(ur,on):Ga.append(ur,Rr):Rr.def(Fr,".",la)}function wn(){function la(){on(mn,".drawElementsInstancedANGLE(",[Vn,jn,Rn,Kn+"<<(("+Rn+"-5121)>>1)",Bn],");")}function Ga(){on(mn,".drawArraysInstancedANGLE(",[Vn,Kn,jn,Bn],");")}En&&En!=="null"?Yn?la():(on("if(",En,"){"),la(),on("}else{"),Ga(),on("}")):Ga()}function pn(){function la(){on(ar+".drawElements("+[Vn,jn,Rn,Kn+"<<(("+Rn+"-5121)>>1)"]+");")}function Ga(){on(ar+".drawArrays("+[Vn,Kn,jn]+");")}En&&En!=="null"?Yn?la():(on("if(",En,"){"),la(),on("}else{"),Ga(),on("}")):Ga()}var cr=ur.shared,ar=cr.gl,Fr=cr.draw,Jr=rn.draw,En=function(){var la=Jr.elements,Ga=Rr;return la?((la.contextDep&&rn.contextDynamic||la.propDep)&&(Ga=on),la=la.append(ur,Ga),Jr.elementsActive&&Ga("if("+la+")"+ar+".bindBuffer(34963,"+la+".buffer.buffer);")):(la=Ga.def(),Ga(la,"=",Fr,".","elements",";","if(",la,"){",ar,".bindBuffer(",34963,",",la,".buffer.buffer);}","else if(",cr.vao,".currentVAO){",la,"=",ur.shared.elements+".getElements("+cr.vao,".currentVAO.elements);",vn?"":"if("+la+")"+ar+".bindBuffer(34963,"+la+".buffer.buffer);","}")),la}(),Vn=gn("primitive"),Kn=gn("offset"),jn=function(){var la=Jr.count,Ga=Rr;return la?((la.contextDep&&rn.contextDynamic||la.propDep)&&(Ga=on),la=la.append(ur,Ga)):la=Ga.def(Fr,".","count"),la}();if(typeof jn=="number"){if(jn===0)return}else on("if(",jn,"){"),on.exit("}");var Bn,mn;ya&&(Bn=gn("instances"),mn=ur.instancing);var Rn=En+".type",Yn=Jr.elements&&oe(Jr.elements)&&!Jr.vaoActive;ya&&(typeof Bn!="number"||0<=Bn)?typeof Bn=="string"?(on("if(",Bn,">0){"),wn(),on("}else if(",Bn,"<0){"),pn(),on("}")):wn():pn()}function hr(ur,Rr,on,rn,gn){return Rr=st(),gn=Rr.proc("body",gn),ya&&(Rr.instancing=gn.def(Rr.shared.extensions,".angle_instanced_arrays")),ur(Rr,gn,on,rn),Rr.compile().body}function Yr(ur,Rr,on,rn){fn(ur,Rr),on.useVAO?on.drawVAO?Rr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Rr),");"):Rr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(Rr(ur.shared.vao,".setVAO(null);"),at(ur,Rr,on,rn.attributes,function(){return!0})),Ft(ur,Rr,on,rn.uniforms,function(){return!0},!1),er(ur,Rr,Rr,on)}function zr(ur,Rr){var on=ur.proc("draw",1);fn(ur,on),yn(ur,on,Rr.context),Gr(ur,on,Rr.framebuffer),Ar(ur,on,Rr),nn(ur,on,Rr.state),Xr(ur,on,Rr,!1,!0);var rn=Rr.shader.progVar.append(ur,on);if(on(ur.shared.gl,".useProgram(",rn,".program);"),Rr.shader.program)Yr(ur,on,Rr,Rr.shader.program);else{on(ur.shared.vao,".setVAO(null);");var gn=ur.global.def("{}"),wn=on.def(rn,".id"),pn=on.def(gn,"[",wn,"]");on(ur.cond(pn).then(pn,".call(this,a0);").else(pn,"=",gn,"[",wn,"]=",ur.link(function(cr){return hr(Yr,ur,Rr,cr,1)}),"(",rn,");",pn,".call(this,a0);"))}0<Object.keys(Rr.state).length&&on(ur.shared.current,".dirty=true;"),ur.shared.vao&&on(ur.shared.vao,".setVAO(null);")}function Pr(ur,Rr,on,rn){function gn(){return!0}ur.batchId="a1",fn(ur,Rr),at(ur,Rr,on,rn.attributes,gn),Ft(ur,Rr,on,rn.uniforms,gn,!1),er(ur,Rr,Rr,on)}function br(ur,Rr,on,rn){function gn(En){return En.contextDep&&pn||En.propDep}function wn(En){return!gn(En)}fn(ur,Rr);var pn=on.contextDep,cr=Rr.def(),ar=Rr.def();ur.shared.props=ar,ur.batchId=cr;var Fr=ur.scope(),Jr=ur.scope();Rr(Fr.entry,"for(",cr,"=0;",cr,"<","a1",";++",cr,"){",ar,"=","a0","[",cr,"];",Jr,"}",Fr.exit),on.needsContext&&yn(ur,Jr,on.context),on.needsFramebuffer&&Gr(ur,Jr,on.framebuffer),nn(ur,Jr,on.state,gn),on.profile&&gn(on.profile)&&Xr(ur,Jr,on,!1,!0),rn?(on.useVAO?on.drawVAO?gn(on.drawVAO)?Jr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Jr),");"):Fr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Fr),");"):Fr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(Fr(ur.shared.vao,".setVAO(null);"),at(ur,Fr,on,rn.attributes,wn),at(ur,Jr,on,rn.attributes,gn)),Ft(ur,Fr,on,rn.uniforms,wn,!1),Ft(ur,Jr,on,rn.uniforms,gn,!0),er(ur,Fr,Jr,on)):(Rr=ur.global.def("{}"),rn=on.shader.progVar.append(ur,Jr),ar=Jr.def(rn,".id"),Fr=Jr.def(Rr,"[",ar,"]"),Jr(ur.shared.gl,".useProgram(",rn,".program);","if(!",Fr,"){",Fr,"=",Rr,"[",ar,"]=",ur.link(function(En){return hr(Pr,ur,on,En,2)}),"(",rn,");}",Fr,".call(this,a0[",cr,"],",cr,");"))}function jr(ur,Rr){function on(Fr){return Fr.contextDep&&gn||Fr.propDep}var rn=ur.proc("batch",2);ur.batchId="0",fn(ur,rn);var gn=!1,wn=!0;Object.keys(Rr.context).forEach(function(Fr){gn=gn||Rr.context[Fr].propDep}),gn||(yn(ur,rn,Rr.context),wn=!1);var pn=Rr.framebuffer,cr=!1;if(pn?(pn.propDep?gn=cr=!0:pn.contextDep&&gn&&(cr=!0),cr||Gr(ur,rn,pn)):Gr(ur,rn,null),Rr.state.viewport&&Rr.state.viewport.propDep&&(gn=!0),Ar(ur,rn,Rr),nn(ur,rn,Rr.state,function(Fr){return!on(Fr)}),Rr.profile&&on(Rr.profile)||Xr(ur,rn,Rr,!1,"a1"),Rr.contextDep=gn,Rr.needsContext=wn,Rr.needsFramebuffer=cr,wn=Rr.shader.progVar,wn.contextDep&&gn||wn.propDep)br(ur,rn,Rr,null);else if(wn=wn.append(ur,rn),rn(ur.shared.gl,".useProgram(",wn,".program);"),Rr.shader.program)br(ur,rn,Rr,Rr.shader.program);else{rn(ur.shared.vao,".setVAO(null);");var pn=ur.global.def("{}"),cr=rn.def(wn,".id"),ar=rn.def(pn,"[",cr,"]");rn(ur.cond(ar).then(ar,".call(this,a0,a1);").else(ar,"=",pn,"[",cr,"]=",ur.link(function(En){return hr(br,ur,Rr,En,2)}),"(",wn,");",ar,".call(this,a0,a1);"))}0<Object.keys(Rr.state).length&&rn(ur.shared.current,".dirty=true;"),ur.shared.vao&&rn(ur.shared.vao,".setVAO(null);")}function zn(ur,Rr){function on(pn){var cr=Rr.shader[pn];cr&&rn.set(gn.shader,"."+pn,cr.append(ur,rn))}var rn=ur.proc("scope",3);ur.batchId="a2";var gn=ur.shared,wn=gn.current;yn(ur,rn,Rr.context),Rr.framebuffer&&Rr.framebuffer.append(ur,rn),se(Object.keys(Rr.state)).forEach(function(pn){var cr=Rr.state[pn].append(ur,rn);x(cr)?cr.forEach(function(ar,Fr){rn.set(ur.next[pn],"["+Fr+"]",ar)}):rn.set(gn.next,"."+pn,cr)}),Xr(ur,rn,Rr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(pn){var cr=Rr.draw[pn];cr&&rn.set(gn.draw,"."+pn,""+cr.append(ur,rn))}),Object.keys(Rr.uniforms).forEach(function(pn){var cr=Rr.uniforms[pn].append(ur,rn);Array.isArray(cr)&&(cr="["+cr.join()+"]"),rn.set(gn.uniforms,"["+gt.id(pn)+"]",cr)}),Object.keys(Rr.attributes).forEach(function(pn){var cr=Rr.attributes[pn].append(ur,rn),ar=ur.scopeAttrib(pn);Object.keys(new ia).forEach(function(Fr){rn.set(ar,"."+Fr,cr[Fr])})}),Rr.scopeVAO&&rn.set(gn.vao,".targetVAO",Rr.scopeVAO.append(ur,rn)),on("vert"),on("frag"),0<Object.keys(Rr.state).length&&(rn(wn,".dirty=true;"),rn.exit(wn,".dirty=true;")),rn("a1(",ur.shared.context,",a0,",ur.batchId,");")}function kn(ur){if(typeof ur=="object"&&!x(ur)){for(var Rr=Object.keys(ur),on=0;on<Rr.length;++on)if(ne.isDynamic(ur[Rr[on]]))return!0;return!1}}function ta(ur,Rr,on){function rn(En,Vn){pn.forEach(function(Kn){var jn=gn[Kn];ne.isDynamic(jn)&&(jn=En.invoke(Vn,jn),Vn(Jr,".",Kn,"=",jn,";"))})}var gn=Rr.static[on];if(gn&&kn(gn)){var wn=ur.global,pn=Object.keys(gn),cr=!1,ar=!1,Fr=!1,Jr=ur.global.def("{}");pn.forEach(function(En){var Vn=gn[En];if(ne.isDynamic(Vn))typeof Vn=="function"&&(Vn=gn[En]=ne.unbox(Vn)),En=G(Vn,null),cr=cr||En.thisDep,Fr=Fr||En.propDep,ar=ar||En.contextDep;else{switch(wn(Jr,".",En,"="),typeof Vn){case"number":wn(Vn);break;case"string":wn('"',Vn,'"');break;case"object":Array.isArray(Vn)&&wn("[",Vn.join(),"]");break;default:wn(ur.link(Vn))}wn(";")}}),Rr.dynamic[on]=new ne.DynamicVariable(4,{thisDep:cr,contextDep:ar,propDep:Fr,ref:Jr,append:rn}),delete Rr.static[on]}}var ia=tr.Record,Aa={add:32774,subtract:32778,"reverse subtract":32779};Et.ext_blend_minmax&&(Aa.min=32775,Aa.max=32776);var ya=Et.angle_instanced_arrays,pr=Et.webgl_draw_buffers,vn=Et.oes_vertex_array_object,$r={dirty:!0,profile:De.profile},Fn={},Nn=[],ca={},ra={};$e("dither",3024),$e("blend.enable",3042),ot("blend.color","blendColor",[0,0,0,0]),ot("blend.equation","blendEquationSeparate",[32774,32774]),ot("blend.func","blendFuncSeparate",[1,0,1,0]),$e("depth.enable",2929,!0),ot("depth.func","depthFunc",513),ot("depth.range","depthRange",[0,1]),ot("depth.mask","depthMask",!0),ot("colorMask","colorMask",[!0,!0,!0,!0]),$e("cull.enable",2884),ot("cull.face","cullFace",1029),ot("frontFace","frontFace",2305),ot("lineWidth","lineWidth",1),$e("polygonOffset.enable",32823),ot("polygonOffset.offset","polygonOffset",[0,0]),$e("sample.alpha",32926),$e("sample.enable",32928),ot("sample.coverage","sampleCoverage",[1,!1]),$e("stencil.enable",2960),ot("stencil.mask","stencilMask",-1),ot("stencil.func","stencilFunc",[519,0,-1]),ot("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ot("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),$e("scissor.enable",3089),ot("scissor.box","scissor",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]),ot("viewport","viewport",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]);var Un={gl:Je,context:we,strings:gt,next:Fn,current:$r,draw:et,elements:or,buffer:vr,shader:Or,attributes:tr.state,vao:tr,uniforms:kr,framebuffer:Lr,extensions:Et,timer:Se,isBufferArgs:K},ua={primTypes:Ie,compareFuncs:St,blendFuncs:Pt,blendEquations:Aa,stencilOps:Nt,glTypes:Ae,orientationType:Xt};pr&&(ua.backBuffer=[1029],ua.drawBuffer=i(rr.maxDrawbuffers,function(ur){return ur===0?[0]:i(ur,function(Rr){return 36064+Rr})}));var da=0;return{next:Fn,current:$r,procs:function(){var ur=st(),Rr=ur.proc("poll"),on=ur.proc("refresh"),rn=ur.block();Rr(rn),on(rn);var gn=ur.shared,wn=gn.gl,pn=gn.next,cr=gn.current;rn(cr,".dirty=false;"),Gr(ur,Rr),Gr(ur,on,null,!0);var ar;ya&&(ar=ur.link(ya)),Et.oes_vertex_array_object&&on(ur.link(Et.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Fr=0;Fr<rr.maxAttributes;++Fr){var Jr=on.def(gn.attributes,"[",Fr,"]"),En=ur.cond(Jr,".buffer");En.then(wn,".enableVertexAttribArray(",Fr,");",wn,".bindBuffer(",34962,",",Jr,".buffer.buffer);",wn,".vertexAttribPointer(",Fr,",",Jr,".size,",Jr,".type,",Jr,".normalized,",Jr,".stride,",Jr,".offset);").else(wn,".disableVertexAttribArray(",Fr,");",wn,".vertexAttrib4f(",Fr,",",Jr,".x,",Jr,".y,",Jr,".z,",Jr,".w);",Jr,".buffer=null;"),on(En),ya&&on(ar,".vertexAttribDivisorANGLE(",Fr,",",Jr,".divisor);")}return on(ur.shared.vao,".currentVAO=null;",ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"),Object.keys(ca).forEach(function(Vn){var Kn=ca[Vn],jn=rn.def(pn,".",Vn),Bn=ur.block();Bn("if(",jn,"){",wn,".enable(",Kn,")}else{",wn,".disable(",Kn,")}",cr,".",Vn,"=",jn,";"),on(Bn),Rr("if(",jn,"!==",cr,".",Vn,"){",Bn,"}")}),Object.keys(ra).forEach(function(Vn){var Kn=ra[Vn],jn=$r[Vn],Bn,mn,Rn=ur.block();Rn(wn,".",Kn,"("),x(jn)?(Kn=jn.length,Bn=ur.global.def(pn,".",Vn),mn=ur.global.def(cr,".",Vn),Rn(i(Kn,function(Yn){return Bn+"["+Yn+"]"}),");",i(Kn,function(Yn){return mn+"["+Yn+"]="+Bn+"["+Yn+"];"}).join("")),Rr("if(",i(Kn,function(Yn){return Bn+"["+Yn+"]!=="+mn+"["+Yn+"]"}).join("||"),"){",Rn,"}")):(Bn=rn.def(pn,".",Vn),mn=rn.def(cr,".",Vn),Rn(Bn,");",cr,".",Vn,"=",Bn,";"),Rr("if(",Bn,"!==",mn,"){",Rn,"}")),on(Rn)}),ur.compile()}(),compile:function(ur,Rr,on,rn,gn){var wn=st();wn.stats=wn.link(gn),Object.keys(Rr.static).forEach(function(cr){ta(wn,Rr,cr)}),ut.forEach(function(cr){ta(wn,ur,cr)});var pn=gr(ur,Rr,on,rn,wn);return zr(wn,pn),zn(wn,pn),jr(wn,pn),j(wn.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function ee(Je,gt){for(var Et=0;Et<Je.length;++Et)if(Je[Et]===gt)return Et;return-1}var j=function(Je,gt){for(var Et=Object.keys(gt),rr=0;rr<Et.length;++rr)Je[Et[rr]]=gt[Et[rr]];return Je},Q=0,ne={DynamicVariable:d,define:function(Je,gt){return new d(Je,b(gt+""))},isDynamic:function(Je){return typeof Je=="function"&&!Je._reglType||Je instanceof d},unbox:w,accessor:b},ae={next:typeof requestAnimationFrame=="function"?function(Je){return requestAnimationFrame(Je)}:function(Je){return setTimeout(Je,16)},cancel:typeof cancelAnimationFrame=="function"?function(Je){return cancelAnimationFrame(Je)}:clearTimeout},ie=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=h();fe.zero=h();var me=function(Je,gt){var Et=1;gt.ext_texture_filter_anisotropic&&(Et=Je.getParameter(34047));var rr=1,vr=1;gt.webgl_draw_buffers&&(rr=Je.getParameter(34852),vr=Je.getParameter(36063));var or=!!gt.oes_texture_float;if(or){or=Je.createTexture(),Je.bindTexture(3553,or),Je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var dr=Je.createFramebuffer();if(Je.bindFramebuffer(36160,dr),Je.framebufferTexture2D(36160,36064,3553,or,0),Je.bindTexture(3553,null),Je.checkFramebufferStatus(36160)!==36053)or=!1;else{Je.viewport(0,0,1,1),Je.clearColor(1,0,0,1),Je.clear(16384);var Lr=fe.allocType(5126,4);Je.readPixels(0,0,1,1,6408,5126,Lr),Je.getError()?or=!1:(Je.deleteFramebuffer(dr),Je.deleteTexture(or),or=Lr[0]===1),fe.freeType(Lr)}}return Lr=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Lr=Je.createTexture(),dr=fe.allocType(5121,36),Je.activeTexture(33984),Je.bindTexture(34067,Lr),Je.texImage2D(34069,0,6408,3,3,0,6408,5121,dr),fe.freeType(dr),Je.bindTexture(34067,null),Je.deleteTexture(Lr),Lr=!Je.getError()),{colorBits:[Je.getParameter(3410),Je.getParameter(3411),Je.getParameter(3412),Je.getParameter(3413)],depthBits:Je.getParameter(3414),stencilBits:Je.getParameter(3415),subpixelBits:Je.getParameter(3408),extensions:Object.keys(gt).filter(function(kr){return!!gt[kr]}),maxAnisotropic:Et,maxDrawbuffers:rr,maxColorAttachments:vr,pointSizeDims:Je.getParameter(33901),lineWidthDims:Je.getParameter(33902),maxViewportDims:Je.getParameter(3386),maxCombinedTextureUnits:Je.getParameter(35661),maxCubeMapSize:Je.getParameter(34076),maxRenderbufferSize:Je.getParameter(34024),maxTextureUnits:Je.getParameter(34930),maxTextureSize:Je.getParameter(3379),maxAttributes:Je.getParameter(34921),maxVertexUniforms:Je.getParameter(36347),maxVertexTextureUnits:Je.getParameter(35660),maxVaryingVectors:Je.getParameter(36348),maxFragmentUniforms:Je.getParameter(36349),glsl:Je.getParameter(35724),renderer:Je.getParameter(7937),vendor:Je.getParameter(7936),version:Je.getParameter(7938),readFloat:or,npotTextureCube:Lr}},ce=function(Je){return Je instanceof Uint8Array||Je instanceof Uint16Array||Je instanceof Uint32Array||Je instanceof Int8Array||Je instanceof Int16Array||Je instanceof Int32Array||Je instanceof Float32Array||Je instanceof Float64Array||Je instanceof Uint8ClampedArray},ye=function(Je){return Object.keys(Je).map(function(gt){return Je[gt]})},xe={shape:function(Je){for(var gt=[];Je.length;Je=Je[0])gt.push(Je.length);return gt},flatten:function(Je,gt,Et,rr){var vr=1;if(gt.length)for(var or=0;or<gt.length;++or)vr*=gt[or];else vr=0;switch(Et=rr||fe.allocType(Et,vr),gt.length){case 0:break;case 1:for(rr=gt[0],gt=0;gt<rr;++gt)Et[gt]=Je[gt];break;case 2:for(rr=gt[0],gt=gt[1],or=vr=0;or<rr;++or)for(var dr=Je[or],Lr=0;Lr<gt;++Lr)Et[vr++]=dr[Lr];break;case 3:v(Je,gt[0],gt[1],gt[2],Et,0);break;default:y(Je,gt,0,Et,0)}return Et}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Oe={dynamic:35048,stream:35040,static:35044},He=xe.flatten,Ge=xe.shape,_e=[];_e[5120]=1,_e[5122]=2,_e[5124]=4,_e[5121]=1,_e[5123]=2,_e[5125]=4,_e[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ye=new Float32Array(1),qe=new Uint32Array(Ye.buffer),Ue=[9984,9986,9985,9987],Re=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var dt=c("HTMLCanvasElement"),Dt=c("OffscreenCanvas"),Gt=c("CanvasRenderingContext2D"),kt=c("ImageBitmap"),zt=c("HTMLImageElement"),Bt=c("HTMLVideoElement"),Lt=Object.keys(ke).concat([dt,Dt,Gt,kt,zt,Bt]),Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2,Mt[5123]=2,Mt[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var Qe=function(Je,gt,Et,rr,vr){function or(et){this.id=tr++,this.refCount=1,this.renderbuffer=et,this.format=32854,this.height=this.width=0,vr.profile&&(this.stats={size:0})}function dr(et){var we=et.renderbuffer;Je.bindRenderbuffer(36161,null),Je.deleteRenderbuffer(we),et.renderbuffer=null,et.refCount=0,delete Or[et.id],rr.renderbufferCount--}var Lr={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};gt.ext_srgb&&(Lr.srgba=35907),gt.ext_color_buffer_half_float&&(Lr.rgba16f=34842,Lr.rgb16f=34843),gt.webgl_color_buffer_float&&(Lr.rgba32f=34836);var kr=[];Object.keys(Lr).forEach(function(et){kr[Lr[et]]=et});var tr=0,Or={};return or.prototype.decRef=function(){0>=--this.refCount&&dr(this)},vr.profile&&(rr.getTotalRenderbufferSize=function(){var et=0;return Object.keys(Or).forEach(function(we){et+=Or[we].stats.size}),et}),{create:function(et,we){function Se(Xe,$e){var ot=0,st=0,pt=32854;if(typeof Xe=="object"&&Xe?("shape"in Xe?(st=Xe.shape,ot=st[0]|0,st=st[1]|0):("radius"in Xe&&(ot=st=Xe.radius|0),"width"in Xe&&(ot=Xe.width|0),"height"in Xe&&(st=Xe.height|0)),"format"in Xe&&(pt=Lr[Xe.format])):typeof Xe=="number"?(ot=Xe|0,st=typeof $e=="number"?$e|0:ot):Xe||(ot=st=1),ot!==De.width||st!==De.height||pt!==De.format)return Se.width=De.width=ot,Se.height=De.height=st,De.format=pt,Je.bindRenderbuffer(36161,De.renderbuffer),Je.renderbufferStorage(36161,pt,ot,st),vr.profile&&(De.stats.size=ht[De.format]*De.width*De.height),Se.format=kr[De.format],Se}var De=new or(Je.createRenderbuffer());return Or[De.id]=De,rr.renderbufferCount++,Se(et,we),Se.resize=function(Xe,$e){var ot=Xe|0,st=$e|0||ot;return ot===De.width&&st===De.height||(Se.width=De.width=ot,Se.height=De.height=st,Je.bindRenderbuffer(36161,De.renderbuffer),Je.renderbufferStorage(36161,De.format,ot,st),vr.profile&&(De.stats.size=ht[De.format]*De.width*De.height)),Se},Se._reglType="renderbuffer",Se._renderbuffer=De,vr.profile&&(Se.stats=De.stats),Se.destroy=function(){De.decRef()},Se},clear:function(){ye(Or).forEach(dr)},restore:function(){ye(Or).forEach(function(et){et.renderbuffer=Je.createRenderbuffer(),Je.bindRenderbuffer(36161,et.renderbuffer),Je.renderbufferStorage(36161,et.format,et.width,et.height)}),Je.bindRenderbuffer(36161,null)}}},Ce=[];Ce[6408]=4,Ce[6407]=3;var je=[];je[5121]=1,je[5126]=4,je[36193]=2;var rt=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},St={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Nt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xt={cw:2304,ccw:2305},Ot=new ue(!1,!1,!1,function(){}),Kt=function(Je,gt){function Et(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function rr(Or,et,we){var Se=dr.pop()||new Et;Se.startQueryIndex=Or,Se.endQueryIndex=et,Se.sum=0,Se.stats=we,Lr.push(Se)}if(!gt.ext_disjoint_timer_query)return null;var vr=[],or=[],dr=[],Lr=[],kr=[],tr=[];return{beginQuery:function(Or){var et=vr.pop()||gt.ext_disjoint_timer_query.createQueryEXT();gt.ext_disjoint_timer_query.beginQueryEXT(35007,et),or.push(et),rr(or.length-1,or.length,Or)},endQuery:function(){gt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:rr,update:function(){var Or,et;if(Or=or.length,Or!==0){tr.length=Math.max(tr.length,Or+1),kr.length=Math.max(kr.length,Or+1),kr[0]=0;var we=tr[0]=0;for(et=Or=0;et<or.length;++et){var Se=or[et];gt.ext_disjoint_timer_query.getQueryObjectEXT(Se,34919)?(we+=gt.ext_disjoint_timer_query.getQueryObjectEXT(Se,34918),vr.push(Se)):or[Or++]=Se,kr[et+1]=we,tr[et+1]=Or}for(or.length=Or,et=Or=0;et<Lr.length;++et){var we=Lr[et],De=we.startQueryIndex,Se=we.endQueryIndex;we.sum+=kr[Se]-kr[De],De=tr[De],Se=tr[Se],Se===De?(we.stats.gpuTime+=we.sum/1e6,dr.push(we)):(we.startQueryIndex=De,we.endQueryIndex=Se,Lr[Or++]=we)}Lr.length=Or}},getNumPendingQueries:function(){return or.length},clear:function(){vr.push.apply(vr,or);for(var Or=0;Or<vr.length;Or++)gt.ext_disjoint_timer_query.deleteQueryEXT(vr[Or]);or.length=0,vr.length=0},restore:function(){or.length=0,vr.length=0}}};return function(Je){function gt(){if(Xr.length===0)pt&&pt.update(),hr=null;else{hr=ae.next(gt),Or();for(var zr=Xr.length-1;0<=zr;--zr){var Pr=Xr[zr];Pr&&Pr(xr,null,0)}Se.flush(),pt&&pt.update()}}function Et(){!hr&&0<Xr.length&&(hr=ae.next(gt))}function rr(){hr&&(ae.cancel(gt),hr=null)}function vr(zr){zr.preventDefault(),rr(),at.forEach(function(Pr){Pr()})}function or(zr){Se.getError(),Xe.restore(),wr.restore(),yr.restore(),gr.restore(),yn.restore(),Gr.restore(),tn.restore(),pt&&pt.restore(),Ar.procs.refresh(),Et(),Ft.forEach(function(Pr){Pr()})}function dr(zr){function Pr($r,Fn){var Nn={},ca={};return Object.keys($r).forEach(function(ra){var Un=$r[ra];if(ne.isDynamic(Un))ca[ra]=ne.unbox(Un,ra);else{if(Fn&&Array.isArray(Un)){for(var ua=0;ua<Un.length;++ua)if(ne.isDynamic(Un[ua])){ca[ra]=ne.unbox(Un,ra);return}}Nn[ra]=Un}}),{dynamic:ca,static:Nn}}function br($r){for(;vn.length<$r;)vn.push(null);return vn}var jr=Pr(zr.context||{},!0),zn=Pr(zr.uniforms||{},!0),kn=Pr(zr.attributes||{},!1);zr=Pr(function($r){function Fn(ca){if(ca in Nn){var ra=Nn[ca];delete Nn[ca],Object.keys(ra).forEach(function(Un){Nn[ca+"."+Un]=ra[Un]})}}var Nn=j({},$r);return delete Nn.uniforms,delete Nn.attributes,delete Nn.context,delete Nn.vao,"stencil"in Nn&&Nn.stencil.op&&(Nn.stencil.opBack=Nn.stencil.opFront=Nn.stencil.op,delete Nn.stencil.op),Fn("blend"),Fn("depth"),Fn("cull"),Fn("stencil"),Fn("polygonOffset"),Fn("scissor"),Fn("sample"),"vao"in $r&&(Nn.vao=$r.vao),Nn}(zr),!1);var ta={gpuTime:0,cpuTime:0,count:0},ia=Ar.compile(zr,kn,zn,jr,ta),Aa=ia.draw,ya=ia.batch,pr=ia.scope,vn=[];return j(function($r,Fn){var Nn;if(typeof $r=="function")return pr.call(this,null,$r,0);if(typeof Fn=="function")if(typeof $r=="number")for(Nn=0;Nn<$r;++Nn)pr.call(this,null,Fn,Nn);else if(Array.isArray($r))for(Nn=0;Nn<$r.length;++Nn)pr.call(this,$r[Nn],Fn,Nn);else return pr.call(this,$r,Fn,0);else if(typeof $r=="number"){if(0<$r)return ya.call(this,br($r|0),$r|0)}else if(Array.isArray($r)){if($r.length)return ya.call(this,$r,$r.length)}else return Aa.call(this,$r)},{stats:ta,destroy:function(){ia.destroy()}})}function Lr(zr,Pr){var br=0;Ar.procs.poll();var jr=Pr.color;jr&&(Se.clearColor(+jr[0]||0,+jr[1]||0,+jr[2]||0,+jr[3]||0),br|=16384),"depth"in Pr&&(Se.clearDepth(+Pr.depth),br|=256),"stencil"in Pr&&(Se.clearStencil(Pr.stencil|0),br|=1024),Se.clear(br)}function kr(zr){return Xr.push(zr),Et(),{cancel:function(){function Pr(){var jr=ee(Xr,Pr);Xr[jr]=Xr[Xr.length-1],--Xr.length,0>=Xr.length&&rr()}var br=ee(Xr,zr);Xr[br]=Pr}}}function tr(){var zr=nn.viewport,Pr=nn.scissor_box;zr[0]=zr[1]=Pr[0]=Pr[1]=0,xr.viewportWidth=xr.framebufferWidth=xr.drawingBufferWidth=zr[2]=Pr[2]=Se.drawingBufferWidth,xr.viewportHeight=xr.framebufferHeight=xr.drawingBufferHeight=zr[3]=Pr[3]=Se.drawingBufferHeight}function Or(){xr.tick+=1,xr.time=we(),tr(),Ar.procs.poll()}function et(){gr.refresh(),tr(),Ar.procs.refresh(),pt&&pt.update()}function we(){return(ie()-wt)/1e3}if(Je=u(Je),!Je)return null;var Se=Je.gl,De=Se.getContextAttributes();Se.isContextLost();var Xe=s(Se,Je);if(!Xe)return null;var $e=e(),ot={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},st=Xe.extensions,pt=Kt(Se,st),wt=ie(),Yt=Se.drawingBufferWidth,mr=Se.drawingBufferHeight,xr={tick:0,time:0,viewportWidth:Yt,viewportHeight:mr,framebufferWidth:Yt,framebufferHeight:mr,drawingBufferWidth:Yt,drawingBufferHeight:mr,pixelRatio:Je.pixelRatio},Yt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Tr=me(Se,st),yr=M(Se,ot,Je,function(zr){return tn.destroyBuffer(zr)}),Dr=_(Se,st,yr,ot),tn=F(Se,st,Tr,ot,yr,Dr,Yt),wr=Y(Se,$e,ot,Je),gr=R(Se,st,Tr,function(){Ar.procs.poll()},xr,ot,Je),yn=Qe(Se,st,Tr,ot,Je),Gr=D(Se,st,Tr,gr,yn,ot),Ar=re(Se,$e,st,Tr,yr,Dr,gr,Gr,{},tn,wr,Yt,xr,pt,Je),$e=X(Se,Gr,Ar.procs.poll,xr),nn=Ar.next,fn=Se.canvas,Xr=[],at=[],Ft=[],er=[Je.onDestroy],hr=null;fn&&(fn.addEventListener("webglcontextlost",vr,!1),fn.addEventListener("webglcontextrestored",or,!1));var Yr=Gr.setFBO=dr({framebuffer:ne.define.call(null,1,"framebuffer")});return et(),De=j(dr,{clear:function(zr){if("framebuffer"in zr)if(zr.framebuffer&&zr.framebuffer_reglType==="framebufferCube")for(var Pr=0;6>Pr;++Pr)Yr(j({framebuffer:zr.framebuffer.faces[Pr]},zr),Lr);else Yr(zr,Lr);else Lr(null,zr)},prop:ne.define.bind(null,1),context:ne.define.bind(null,2),this:ne.define.bind(null,3),draw:dr({}),buffer:function(zr){return yr.create(zr,34962,!1,!1)},elements:function(zr){return Dr.create(zr,!1)},texture:gr.create2D,cube:gr.createCube,renderbuffer:yn.create,framebuffer:Gr.create,framebufferCube:Gr.createCube,vao:tn.createVAO,attributes:De,frame:kr,on:function(zr,Pr){var br;switch(zr){case"frame":return kr(Pr);case"lost":br=at;break;case"restore":br=Ft;break;case"destroy":br=er}return br.push(Pr),{cancel:function(){for(var jr=0;jr<br.length;++jr)if(br[jr]===Pr){br[jr]=br[br.length-1],br.pop();break}}}},limits:Tr,hasExtension:function(zr){return 0<=Tr.extensions.indexOf(zr.toLowerCase())},read:$e,destroy:function(){Xr.length=0,rr(),fn&&(fn.removeEventListener("webglcontextlost",vr),fn.removeEventListener("webglcontextrestored",or)),wr.clear(),Gr.clear(),yn.clear(),tn.clear(),gr.clear(),Dr.clear(),yr.clear(),pt&&pt.clear(),er.forEach(function(zr){zr()})},_gl:Se,_refresh:et,poll:function(){Or(),pt&&pt.update()},now:we,stats:ot}),Je.onDone(null,De),De}})},{}],284:[function(t,B,H){var d=t("buffer"),l=d.Buffer;function b(e,o){for(var a in e)o[a]=e[a]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?B.exports=d:(b(d,H),H.Buffer=w);function w(e,o,a){return l(e,o,a)}w.prototype=Object.create(l.prototype),b(l,w),w.from=function(e,o,a){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,o,a)},w.alloc=function(e,o,a){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=l(e);return o!==void 0?typeof a=="string"?n.fill(o,a):n.fill(o):n.fill(0),n},w.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},w.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(e)}},{buffer:85}],285:[function(t,B,H){B.exports=b;var d=t("events").EventEmitter,l=t("inherits");l(b,d),b.Readable=t("readable-stream/lib/_stream_readable.js"),b.Writable=t("readable-stream/lib/_stream_writable.js"),b.Duplex=t("readable-stream/lib/_stream_duplex.js"),b.Transform=t("readable-stream/lib/_stream_transform.js"),b.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),b.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),b.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),b.Stream=b;function b(){d.call(this)}b.prototype.pipe=function(w,e){var o=this;function a(h){w.writable&&w.write(h)===!1&&o.pause&&o.pause()}o.on("data",a);function n(){o.readable&&o.resume&&o.resume()}w.on("drain",n),!w._isStdio&&(!e||e.end!==!1)&&(o.on("end",u),o.on("close",s));var r=!1;function u(){r||(r=!0,w.end())}function s(){r||(r=!0,typeof w.destroy=="function"&&w.destroy())}function i(h){if(f(),d.listenerCount(this,"error")===0)throw h}o.on("error",i),w.on("error",i);function f(){o.removeListener("data",a),w.removeListener("drain",n),o.removeListener("end",u),o.removeListener("close",s),o.removeListener("error",i),w.removeListener("error",i),o.removeListener("end",f),o.removeListener("close",f),w.removeListener("close",f)}return o.on("end",f),o.on("close",f),w.on("close",f),w.emit("pipe",o),w}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(t,B,H){function d(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var l={};function b(n,r,u){u||(u=Error);function s(f,h,p){return typeof r=="string"?r:r(f,h,p)}var i=function(f){d(h,f);function h(p,v,y){return f.call(this,s(p,v,y))||this}return h}(u);i.prototype.name=u.name,i.prototype.code=n,l[n]=i}function w(n,r){if(Array.isArray(n)){var u=n.length;return n=n.map(function(s){return String(s)}),u>2?"one of ".concat(r," ").concat(n.slice(0,u-1).join(", "),", or ")+n[u-1]:u===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function e(n,r,u){return n.substr(!u||u<0?0:+u,r.length)===r}function o(n,r,u){return(u===void 0||u>n.length)&&(u=n.length),n.substring(u-r.length,u)===r}function a(n,r,u){return typeof u!="number"&&(u=0),u+r.length>n.length?!1:n.indexOf(r,u)!==-1}b("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),b("ERR_INVALID_ARG_TYPE",function(n,r,u){var s;typeof r=="string"&&e(r,"not ")?(s="must not be",r=r.replace(/^not /,"")):s="must be";var i;if(o(n," argument"))i="The ".concat(n," ").concat(s," ").concat(w(r,"type"));else{var f=a(n,".")?"property":"argument";i='The "'.concat(n,'" ').concat(f," ").concat(s," ").concat(w(r,"type"))}return i+=". Received type ".concat(typeof u),i},TypeError),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),b("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),b("ERR_STREAM_PREMATURE_CLOSE","Premature close"),b("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),b("ERR_STREAM_WRITE_AFTER_END","write after end"),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),B.exports.codes=l},{}],287:[function(t,B,H){(function(d){(function(){var l=Object.keys||function(s){var i=[];for(var f in s)i.push(f);return i};B.exports=n;var b=t("./_stream_readable"),w=t("./_stream_writable");t("inherits")(n,b);for(var e=l(w.prototype),o=0;o<e.length;o++){var a=e[o];n.prototype[a]||(n.prototype[a]=w.prototype[a])}function n(s){if(!(this instanceof n))return new n(s);b.call(this,s),w.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||d.nextTick(u,this)}function u(s){s.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=i,this._writableState.destroyed=i)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(t,B,H){B.exports=l;var d=t("./_stream_transform");t("inherits")(l,d);function l(b){if(!(this instanceof l))return new l(b);d.call(this,b)}l.prototype._transform=function(b,w,e){e(null,b)}},{"./_stream_transform":290,inherits:231}],289:[function(t,B,H){(function(d,l){(function(){B.exports=k;var b;k.ReadableState=S,t("events").EventEmitter;var w=function(ne,ae){return ne.listeners(ae).length},e=t("./internal/streams/stream"),o=t("buffer").Buffer,a=l.Uint8Array||function(){};function n(Q){return o.from(Q)}function r(Q){return o.isBuffer(Q)||Q instanceof a}var u=t("util"),s;u&&u.debuglog?s=u.debuglog("stream"):s=function(){};var i=t("./internal/streams/buffer_list"),f=t("./internal/streams/destroy"),h=t("./internal/streams/state"),p=h.getHighWaterMark,v=t("../errors").codes,y=v.ERR_INVALID_ARG_TYPE,g=v.ERR_STREAM_PUSH_AFTER_EOF,A=v.ERR_METHOD_NOT_IMPLEMENTED,m=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,_,T;t("inherits")(k,e);var x=f.errorOrDestroy,c=["error","close","destroy","pause","resume"];function L(Q,ne,ae){if(typeof Q.prependListener=="function")return Q.prependListener(ne,ae);!Q._events||!Q._events[ne]?Q.on(ne,ae):Array.isArray(Q._events[ne])?Q._events[ne].unshift(ae):Q._events[ne]=[ae,Q._events[ne]]}function S(Q,ne,ae){b=b||t("./_stream_duplex"),Q=Q||{},typeof ae!="boolean"&&(ae=ne instanceof b),this.objectMode=!!Q.objectMode,ae&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=p(this,Q,"readableHighWaterMark",ae),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(M||(M=t("string_decoder/").StringDecoder),this.decoder=new M(Q.encoding),this.encoding=Q.encoding)}function k(Q){if(b=b||t("./_stream_duplex"),!(this instanceof k))return new k(Q);var ne=this instanceof b;this._readableState=new S(Q,this,ne),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),e.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ne){!this._readableState||(this._readableState.destroyed=ne)}}),k.prototype.destroy=f.destroy,k.prototype._undestroy=f.undestroy,k.prototype._destroy=function(Q,ne){ne(Q)},k.prototype.push=function(Q,ne){var ae=this._readableState,ie;return ae.objectMode?ie=!0:typeof Q=="string"&&(ne=ne||ae.defaultEncoding,ne!==ae.encoding&&(Q=o.from(Q,ne),ne=""),ie=!0),P(this,Q,ne,!1,ie)},k.prototype.unshift=function(Q){return P(this,Q,null,!0,!1)};function P(Q,ne,ae,ie,fe){s("readableAddChunk",ne);var me=Q._readableState;if(ne===null)me.reading=!1,F(Q,me);else{var ce;if(fe||(ce=I(me,ne)),ce)x(Q,ce);else if(me.objectMode||ne&&ne.length>0)if(typeof ne!="string"&&!me.objectMode&&Object.getPrototypeOf(ne)!==o.prototype&&(ne=n(ne)),ie)me.endEmitted?x(Q,new m):z(Q,me,ne,!0);else if(me.ended)x(Q,new g);else{if(me.destroyed)return!1;me.reading=!1,me.decoder&&!ae?(ne=me.decoder.write(ne),me.objectMode||ne.length!==0?z(Q,me,ne,!1):q(Q,me)):z(Q,me,ne,!1)}else ie||(me.reading=!1,q(Q,me))}return!me.ended&&(me.length<me.highWaterMark||me.length===0)}function z(Q,ne,ae,ie){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Q.emit("data",ae)):(ne.length+=ne.objectMode?1:ae.length,ie?ne.buffer.unshift(ae):ne.buffer.push(ae),ne.needReadable&&Y(Q)),q(Q,ne)}function I(Q,ne){var ae;return!r(ne)&&typeof ne!="string"&&ne!==void 0&&!Q.objectMode&&(ae=new y("chunk",["string","Buffer","Uint8Array"],ne)),ae}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(Q){M||(M=t("string_decoder/").StringDecoder);var ne=new M(Q);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var ae=this._readableState.buffer.head,ie="";ae!==null;)ie+=ne.write(ae.data),ae=ae.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var R=1073741824;function D(Q){return Q>=R?Q=R:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function O(Q,ne){return Q<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Q!==Q?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Q>ne.highWaterMark&&(ne.highWaterMark=D(Q)),Q<=ne.length?Q:ne.ended?ne.length:(ne.needReadable=!0,0))}k.prototype.read=function(Q){s("read",Q),Q=parseInt(Q,10);var ne=this._readableState,ae=Q;if(Q!==0&&(ne.emittedReadable=!1),Q===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return s("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?re(this):Y(this),null;if(Q=O(Q,ne),Q===0&&ne.ended)return ne.length===0&&re(this),null;var ie=ne.needReadable;s("need readable",ie),(ne.length===0||ne.length-Q<ne.highWaterMark)&&(ie=!0,s("length less than watermark",ie)),ne.ended||ne.reading?(ie=!1,s("reading or ended",ie)):ie&&(s("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Q=O(ae,ne)));var fe;return Q>0?fe=G(Q,ne):fe=null,fe===null?(ne.needReadable=ne.length<=ne.highWaterMark,Q=0):(ne.length-=Q,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),ae!==Q&&ne.ended&&re(this)),fe!==null&&this.emit("data",fe),fe};function F(Q,ne){if(s("onEofChunk"),!ne.ended){if(ne.decoder){var ae=ne.decoder.end();ae&&ae.length&&(ne.buffer.push(ae),ne.length+=ne.objectMode?1:ae.length)}ne.ended=!0,ne.sync?Y(Q):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,X(Q)))}}function Y(Q){var ne=Q._readableState;s("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(s("emitReadable",ne.flowing),ne.emittedReadable=!0,d.nextTick(X,Q))}function X(Q){var ne=Q._readableState;s("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&(ne.length||ne.ended)&&(Q.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,U(Q)}function q(Q,ne){ne.readingMore||(ne.readingMore=!0,d.nextTick($,Q,ne))}function $(Q,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var ae=ne.length;if(s("maybeReadMore read 0"),Q.read(0),ae===ne.length)break}ne.readingMore=!1}k.prototype._read=function(Q){x(this,new A("_read()"))},k.prototype.pipe=function(Q,ne){var ae=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=Q;break;case 1:ie.pipes=[ie.pipes,Q];break;default:ie.pipes.push(Q);break}ie.pipesCount+=1,s("pipe count=%d opts=%j",ie.pipesCount,ne);var fe=(!ne||ne.end!==!1)&&Q!==d.stdout&&Q!==d.stderr,me=fe?ye:Ie;ie.endEmitted?d.nextTick(me):ae.once("end",me),Q.on("unpipe",ce);function ce(Ye,qe){s("onunpipe"),Ye===ae&&qe&&qe.hasUnpiped===!1&&(qe.hasUnpiped=!0,Ae())}function ye(){s("onend"),Q.end()}var xe=V(ae);Q.on("drain",xe);var ke=!1;function Ae(){s("cleanup"),Q.removeListener("close",Ge),Q.removeListener("finish",_e),Q.removeListener("drain",xe),Q.removeListener("error",He),Q.removeListener("unpipe",ce),ae.removeListener("end",ye),ae.removeListener("end",Ie),ae.removeListener("data",Oe),ke=!0,ie.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&xe()}ae.on("data",Oe);function Oe(Ye){s("ondata");var qe=Q.write(Ye);s("dest.write",qe),qe===!1&&((ie.pipesCount===1&&ie.pipes===Q||ie.pipesCount>1&&j(ie.pipes,Q)!==-1)&&!ke&&(s("false write response, pause",ie.awaitDrain),ie.awaitDrain++),ae.pause())}function He(Ye){s("onerror",Ye),Ie(),Q.removeListener("error",He),w(Q,"error")===0&&x(Q,Ye)}L(Q,"error",He);function Ge(){Q.removeListener("finish",_e),Ie()}Q.once("close",Ge);function _e(){s("onfinish"),Q.removeListener("close",Ge),Ie()}Q.once("finish",_e);function Ie(){s("unpipe"),ae.unpipe(Q)}return Q.emit("pipe",ae),ie.flowing||(s("pipe resume"),ae.resume()),Q};function V(Q){return function(){var ae=Q._readableState;s("pipeOnDrain",ae.awaitDrain),ae.awaitDrain&&ae.awaitDrain--,ae.awaitDrain===0&&w(Q,"data")&&(ae.flowing=!0,U(Q))}}k.prototype.unpipe=function(Q){var ne=this._readableState,ae={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Q&&Q!==ne.pipes?this:(Q||(Q=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Q&&Q.emit("unpipe",this,ae),this);if(!Q){var ie=ne.pipes,fe=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var me=0;me<fe;me++)ie[me].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=j(ne.pipes,Q);return ce===-1?this:(ne.pipes.splice(ce,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Q.emit("unpipe",this,ae),this)},k.prototype.on=function(Q,ne){var ae=e.prototype.on.call(this,Q,ne),ie=this._readableState;return Q==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):Q==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,s("on readable",ie.length,ie.reading),ie.length?Y(this):ie.reading||d.nextTick(se,this)),ae},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(Q,ne){var ae=e.prototype.removeListener.call(this,Q,ne);return Q==="readable"&&d.nextTick(K,this),ae},k.prototype.removeAllListeners=function(Q){var ne=e.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&d.nextTick(K,this),ne};function K(Q){var ne=Q._readableState;ne.readableListening=Q.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function se(Q){s("readable nexttick read 0"),Q.read(0)}k.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(s("resume"),Q.flowing=!Q.readableListening,ue(this,Q)),Q.paused=!1,this};function ue(Q,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,d.nextTick(oe,Q,ne))}function oe(Q,ne){s("resume",ne.reading),ne.reading||Q.read(0),ne.resumeScheduled=!1,Q.emit("resume"),U(Q),ne.flowing&&!ne.reading&&Q.read(0)}k.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(Q){var ne=Q._readableState;for(s("flow",ne.flowing);ne.flowing&&Q.read()!==null;);}k.prototype.wrap=function(Q){var ne=this,ae=this._readableState,ie=!1;Q.on("end",function(){if(s("wrapped end"),ae.decoder&&!ae.ended){var ce=ae.decoder.end();ce&&ce.length&&ne.push(ce)}ne.push(null)}),Q.on("data",function(ce){if(s("wrapped data"),ae.decoder&&(ce=ae.decoder.write(ce)),!(ae.objectMode&&ce==null)&&!(!ae.objectMode&&(!ce||!ce.length))){var ye=ne.push(ce);ye||(ie=!0,Q.pause())}});for(var fe in Q)this[fe]===void 0&&typeof Q[fe]=="function"&&(this[fe]=function(ye){return function(){return Q[ye].apply(Q,arguments)}}(fe));for(var me=0;me<c.length;me++)Q.on(c[me],this.emit.bind(this,c[me]));return this._read=function(ce){s("wrapped _read",ce),ie&&(ie=!1,Q.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=t("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ne){this._readableState&&(this._readableState.flowing=ne)}}),k._fromList=G,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function G(Q,ne){if(ne.length===0)return null;var ae;return ne.objectMode?ae=ne.buffer.shift():!Q||Q>=ne.length?(ne.decoder?ae=ne.buffer.join(""):ne.buffer.length===1?ae=ne.buffer.first():ae=ne.buffer.concat(ne.length),ne.buffer.clear()):ae=ne.buffer.consume(Q,ne.decoder),ae}function re(Q){var ne=Q._readableState;s("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,d.nextTick(ee,ne,Q))}function ee(Q,ne){if(s("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,ne.readable=!1,ne.emit("end"),Q.autoDestroy)){var ae=ne._writableState;(!ae||ae.autoDestroy&&ae.finished)&&ne.destroy()}}typeof Symbol=="function"&&(k.from=function(Q,ne){return T===void 0&&(T=t("./internal/streams/from")),T(k,Q,ne)});function j(Q,ne){for(var ae=0,ie=Q.length;ae<ie;ae++)if(Q[ae]===ne)return ae;return-1}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(t,B,H){B.exports=n;var d=t("../errors").codes,l=d.ERR_METHOD_NOT_IMPLEMENTED,b=d.ERR_MULTIPLE_CALLBACK,w=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=d.ERR_TRANSFORM_WITH_LENGTH_0,o=t("./_stream_duplex");t("inherits")(n,o);function a(s,i){var f=this._transformState;f.transforming=!1;var h=f.writecb;if(h===null)return this.emit("error",new b);f.writechunk=null,f.writecb=null,i!=null&&this.push(i),h(s);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function n(s){if(!(this instanceof n))return new n(s);o.call(this,s),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,f){u(s,i,f)}):u(this,null,null)}n.prototype.push=function(s,i){return this._transformState.needTransform=!1,o.prototype.push.call(this,s,i)},n.prototype._transform=function(s,i,f){f(new l("_transform()"))},n.prototype._write=function(s,i,f){var h=this._transformState;if(h.writecb=f,h.writechunk=s,h.writeencoding=i,!h.transforming){var p=this._readableState;(h.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},n.prototype._read=function(s){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0},n.prototype._destroy=function(s,i){o.prototype._destroy.call(this,s,function(f){i(f)})};function u(s,i,f){if(i)return s.emit("error",i);if(f!=null&&s.push(f),s._writableState.length)throw new e;if(s._transformState.transforming)throw new w;return s.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(t,B,H){(function(d,l){(function(){B.exports=S;function b(U){var G=this;this.next=null,this.entry=null,this.finish=function(){oe(G,U)}}var w;S.WritableState=c;var e={deprecate:t("util-deprecate")},o=t("./internal/streams/stream"),a=t("buffer").Buffer,n=l.Uint8Array||function(){};function r(U){return a.from(U)}function u(U){return a.isBuffer(U)||U instanceof n}var s=t("./internal/streams/destroy"),i=t("./internal/streams/state"),f=i.getHighWaterMark,h=t("../errors").codes,p=h.ERR_INVALID_ARG_TYPE,v=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,A=h.ERR_STREAM_DESTROYED,m=h.ERR_STREAM_NULL_VALUES,M=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,T=s.errorOrDestroy;t("inherits")(S,o);function x(){}function c(U,G,re){w=w||t("./_stream_duplex"),U=U||{},typeof re!="boolean"&&(re=G instanceof w),this.objectMode=!!U.objectMode,re&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=f(this,U,"writableHighWaterMark",re),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=U.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){F(G,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}c.prototype.getBuffer=function(){for(var G=this.bufferedRequest,re=[];G;)re.push(G),G=G.next;return re},function(){try{Object.defineProperty(c.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(G){return L.call(this,G)?!0:this!==S?!1:G&&G._writableState instanceof c}})):L=function(G){return G instanceof this};function S(U){w=w||t("./_stream_duplex");var G=this instanceof w;if(!G&&!L.call(S,this))return new S(U);this._writableState=new c(U,this,G),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),o.call(this)}S.prototype.pipe=function(){T(this,new g)};function k(U,G){var re=new M;T(U,re),d.nextTick(G,re)}function P(U,G,re,ee){var j;return re===null?j=new m:typeof re!="string"&&!G.objectMode&&(j=new p("chunk",["string","Buffer"],re)),j?(T(U,j),d.nextTick(ee,j),!1):!0}S.prototype.write=function(U,G,re){var ee=this._writableState,j=!1,Q=!ee.objectMode&&u(U);return Q&&!a.isBuffer(U)&&(U=r(U)),typeof G=="function"&&(re=G,G=null),Q?G="buffer":G||(G=ee.defaultEncoding),typeof re!="function"&&(re=x),ee.ending?k(this,re):(Q||P(this,ee,U,re))&&(ee.pendingcb++,j=I(this,ee,Q,U,G,re)),j},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&q(this,U))},S.prototype.setDefaultEncoding=function(G){if(typeof G=="string"&&(G=G.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((G+"").toLowerCase())>-1))throw new _(G);return this._writableState.defaultEncoding=G,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(U,G,re){return!U.objectMode&&U.decodeStrings!==!1&&typeof G=="string"&&(G=a.from(G,re)),G}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,G,re,ee,j,Q){if(!re){var ne=z(G,ee,j);ee!==ne&&(re=!0,j="buffer",ee=ne)}var ae=G.objectMode?1:ee.length;G.length+=ae;var ie=G.length<G.highWaterMark;if(ie||(G.needDrain=!0),G.writing||G.corked){var fe=G.lastBufferedRequest;G.lastBufferedRequest={chunk:ee,encoding:j,isBuf:re,callback:Q,next:null},fe?fe.next=G.lastBufferedRequest:G.bufferedRequest=G.lastBufferedRequest,G.bufferedRequestCount+=1}else R(U,G,!1,ae,ee,j,Q);return ie}function R(U,G,re,ee,j,Q,ne){G.writelen=ee,G.writecb=ne,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new A("write")):re?U._writev(j,G.onwrite):U._write(j,Q,G.onwrite),G.sync=!1}function D(U,G,re,ee,j){--G.pendingcb,re?(d.nextTick(j,ee),d.nextTick(se,U,G),U._writableState.errorEmitted=!0,T(U,ee)):(j(ee),U._writableState.errorEmitted=!0,T(U,ee),se(U,G))}function O(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function F(U,G){var re=U._writableState,ee=re.sync,j=re.writecb;if(typeof j!="function")throw new y;if(O(re),G)D(U,re,ee,G,j);else{var Q=$(re)||U.destroyed;!Q&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&q(U,re),ee?d.nextTick(Y,U,re,Q,j):Y(U,re,Q,j)}}function Y(U,G,re,ee){re||X(U,G),G.pendingcb--,ee(),se(U,G)}function X(U,G){G.length===0&&G.needDrain&&(G.needDrain=!1,U.emit("drain"))}function q(U,G){G.bufferProcessing=!0;var re=G.bufferedRequest;if(U._writev&&re&&re.next){var ee=G.bufferedRequestCount,j=new Array(ee),Q=G.corkedRequestsFree;Q.entry=re;for(var ne=0,ae=!0;re;)j[ne]=re,re.isBuf||(ae=!1),re=re.next,ne+=1;j.allBuffers=ae,R(U,G,!0,G.length,j,"",Q.finish),G.pendingcb++,G.lastBufferedRequest=null,Q.next?(G.corkedRequestsFree=Q.next,Q.next=null):G.corkedRequestsFree=new b(G),G.bufferedRequestCount=0}else{for(;re;){var ie=re.chunk,fe=re.encoding,me=re.callback,ce=G.objectMode?1:ie.length;if(R(U,G,!1,ce,ie,fe,me),re=re.next,G.bufferedRequestCount--,G.writing)break}re===null&&(G.lastBufferedRequest=null)}G.bufferedRequest=re,G.bufferProcessing=!1}S.prototype._write=function(U,G,re){re(new v("_write()"))},S.prototype._writev=null,S.prototype.end=function(U,G,re){var ee=this._writableState;return typeof U=="function"?(re=U,U=null,G=null):typeof G=="function"&&(re=G,G=null),U!=null&&this.write(U,G),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||ue(this,ee,re),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function $(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function V(U,G){U._final(function(re){G.pendingcb--,re&&T(U,re),G.prefinished=!0,U.emit("prefinish"),se(U,G)})}function K(U,G){!G.prefinished&&!G.finalCalled&&(typeof U._final=="function"&&!G.destroyed?(G.pendingcb++,G.finalCalled=!0,d.nextTick(V,U,G)):(G.prefinished=!0,U.emit("prefinish")))}function se(U,G){var re=$(G);if(re&&(K(U,G),G.pendingcb===0&&(G.finished=!0,U.emit("finish"),G.autoDestroy))){var ee=U._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&U.destroy()}return re}function ue(U,G,re){G.ending=!0,se(U,G),re&&(G.finished?d.nextTick(re):U.once("finish",re)),G.ended=!0,U.writable=!1}function oe(U,G,re){var ee=U.entry;for(U.entry=null;ee;){var j=ee.callback;G.pendingcb--,j(re),ee=ee.next}G.corkedRequestsFree.next=U}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(G){!this._writableState||(this._writableState.destroyed=G)}}),S.prototype.destroy=s.destroy,S.prototype._undestroy=s.undestroy,S.prototype._destroy=function(U,G){G(U)}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(t,B,H){(function(d){(function(){var l;function b(A,m,M){return m in A?Object.defineProperty(A,m,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[m]=M,A}var w=t("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),u=Symbol("handlePromise"),s=Symbol("stream");function i(A,m){return{value:A,done:m}}function f(A){var m=A[e];if(m!==null){var M=A[s].read();M!==null&&(A[r]=null,A[e]=null,A[o]=null,m(i(M,!1)))}}function h(A){d.nextTick(f,A)}function p(A,m){return function(M,_){A.then(function(){if(m[n]){M(i(void 0,!0));return}m[u](M,_)},_)}}var v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((l={get stream(){return this[s]},next:function(){var m=this,M=this[a];if(M!==null)return Promise.reject(M);if(this[n])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(c,L){d.nextTick(function(){m[a]?L(m[a]):c(i(void 0,!0))})});var _=this[r],T;if(_)T=new Promise(p(_,this));else{var x=this[s].read();if(x!==null)return Promise.resolve(i(x,!1));T=new Promise(this[u])}return this[r]=T,T}},b(l,Symbol.asyncIterator,function(){return this}),b(l,"return",function(){var m=this;return new Promise(function(M,_){m[s].destroy(null,function(T){if(T){_(T);return}M(i(void 0,!0))})})}),l),v),g=function(m){var M,_=Object.create(y,(M={},b(M,s,{value:m,writable:!0}),b(M,e,{value:null,writable:!0}),b(M,o,{value:null,writable:!0}),b(M,a,{value:null,writable:!0}),b(M,n,{value:m._readableState.endEmitted,writable:!0}),b(M,u,{value:function(x,c){var L=_[s].read();L?(_[r]=null,_[e]=null,_[o]=null,x(i(L,!1))):(_[e]=x,_[o]=c)},writable:!0}),M));return _[r]=null,w(m,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=_[o];x!==null&&(_[r]=null,_[e]=null,_[o]=null,x(T)),_[a]=T;return}var c=_[e];c!==null&&(_[r]=null,_[e]=null,_[o]=null,c(i(void 0,!0))),_[n]=!0}),m.on("readable",h.bind(null,_)),_};B.exports=g}).call(this)}).call(this,t("_process"))},{"./end-of-stream":295,_process:277}],293:[function(t,B,H){function d(f,h){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(f);h&&(v=v.filter(function(y){return Object.getOwnPropertyDescriptor(f,y).enumerable})),p.push.apply(p,v)}return p}function l(f){for(var h=1;h<arguments.length;h++){var p=arguments[h]!=null?arguments[h]:{};h%2?d(Object(p),!0).forEach(function(v){b(f,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):d(Object(p)).forEach(function(v){Object.defineProperty(f,v,Object.getOwnPropertyDescriptor(p,v))})}return f}function b(f,h,p){return h in f?Object.defineProperty(f,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[h]=p,f}function w(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function e(f,h){for(var p=0;p<h.length;p++){var v=h[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}function o(f,h,p){return h&&e(f.prototype,h),p&&e(f,p),f}var a=t("buffer"),n=a.Buffer,r=t("util"),u=r.inspect,s=u&&u.custom||"inspect";function i(f,h,p){n.prototype.copy.call(f,h,p)}B.exports=function(){function f(){w(this,f),this.head=null,this.tail=null,this.length=0}return o(f,[{key:"push",value:function(p){var v={data:p,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(p){var v={data:p,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var v=this.head,y=""+v.data;v=v.next;)y+=p+v.data;return y}},{key:"concat",value:function(p){if(this.length===0)return n.alloc(0);for(var v=n.allocUnsafe(p>>>0),y=this.head,g=0;y;)i(y.data,v,g),g+=y.data.length,y=y.next;return v}},{key:"consume",value:function(p,v){var y;return p<this.head.data.length?(y=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?y=this.shift():y=v?this._getString(p):this._getBuffer(p),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var v=this.head,y=1,g=v.data;for(p-=g.length;v=v.next;){var A=v.data,m=p>A.length?A.length:p;if(m===A.length?g+=A:g+=A.slice(0,p),p-=m,p===0){m===A.length?(++y,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=A.slice(m));break}++y}return this.length-=y,g}},{key:"_getBuffer",value:function(p){var v=n.allocUnsafe(p),y=this.head,g=1;for(y.data.copy(v),p-=y.data.length;y=y.next;){var A=y.data,m=p>A.length?A.length:p;if(A.copy(v,v.length-p,0,m),p-=m,p===0){m===A.length?(++g,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=A.slice(m));break}++g}return this.length-=g,v}},{key:s,value:function(p,v){return u(this,l({},v,{depth:0,customInspect:!1}))}}]),f}()},{buffer:85,util:83}],294:[function(t,B,H){(function(d){(function(){function l(n,r){var u=this,s=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return s||i?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(o,this,n)):d.nextTick(o,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(f){!r&&f?u._writableState?u._writableState.errorEmitted?d.nextTick(w,u):(u._writableState.errorEmitted=!0,d.nextTick(b,u,f)):d.nextTick(b,u,f):r?(d.nextTick(w,u),r(f)):d.nextTick(w,u)}),this)}function b(n,r){o(n,r),w(n)}function w(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(n,r){n.emit("error",r)}function a(n,r){var u=n._readableState,s=n._writableState;u&&u.autoDestroy||s&&s.autoDestroy?n.destroy(r):n.emit("error",r)}B.exports={destroy:l,undestroy:e,errorOrDestroy:a}}).call(this)}).call(this,t("_process"))},{_process:277}],295:[function(t,B,H){var d=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(o){var a=!1;return function(){if(!a){a=!0;for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];o.apply(this,r)}}}function b(){}function w(o){return o.setHeader&&typeof o.abort=="function"}function e(o,a,n){if(typeof a=="function")return e(o,null,a);a||(a={}),n=l(n||b);var r=a.readable||a.readable!==!1&&o.readable,u=a.writable||a.writable!==!1&&o.writable,s=function(){o.writable||f()},i=o._writableState&&o._writableState.finished,f=function(){u=!1,i=!0,r||n.call(o)},h=o._readableState&&o._readableState.endEmitted,p=function(){r=!1,h=!0,u||n.call(o)},v=function(m){n.call(o,m)},y=function(){var m;if(r&&!h)return(!o._readableState||!o._readableState.ended)&&(m=new d),n.call(o,m);if(u&&!i)return(!o._writableState||!o._writableState.ended)&&(m=new d),n.call(o,m)},g=function(){o.req.on("finish",f)};return w(o)?(o.on("complete",f),o.on("abort",y),o.req?g():o.on("request",g)):u&&!o._writableState&&(o.on("end",s),o.on("close",s)),o.on("end",p),o.on("finish",f),a.error!==!1&&o.on("error",v),o.on("close",y),function(){o.removeListener("complete",f),o.removeListener("abort",y),o.removeListener("request",g),o.req&&o.req.removeListener("finish",f),o.removeListener("end",s),o.removeListener("close",s),o.removeListener("finish",f),o.removeListener("end",p),o.removeListener("error",v),o.removeListener("close",y)}}B.exports=e},{"../../../errors":286}],296:[function(t,B,H){B.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(t,B,H){var d;function l(f){var h=!1;return function(){h||(h=!0,f.apply(void 0,arguments))}}var b=t("../../../errors").codes,w=b.ERR_MISSING_ARGS,e=b.ERR_STREAM_DESTROYED;function o(f){if(f)throw f}function a(f){return f.setHeader&&typeof f.abort=="function"}function n(f,h,p,v){v=l(v);var y=!1;f.on("close",function(){y=!0}),d===void 0&&(d=t("./end-of-stream")),d(f,{readable:h,writable:p},function(A){if(A)return v(A);y=!0,v()});var g=!1;return function(A){if(!y&&!g){if(g=!0,a(f))return f.abort();if(typeof f.destroy=="function")return f.destroy();v(A||new e("pipe"))}}}function r(f){f()}function u(f,h){return f.pipe(h)}function s(f){return!f.length||typeof f[f.length-1]!="function"?o:f.pop()}function i(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];var v=s(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new w("streams");var y,g=h.map(function(A,m){var M=m<h.length-1,_=m>0;return n(A,M,_,function(T){y||(y=T),T&&g.forEach(r),!M&&(g.forEach(r),v(y))})});return h.reduce(u)}B.exports=i},{"../../../errors":286,"./end-of-stream":295}],298:[function(t,B,H){var d=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function l(w,e,o){return w.highWaterMark!=null?w.highWaterMark:e?w[o]:null}function b(w,e,o,a){var n=l(e,a,o);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=a?o:"highWaterMark";throw new d(r,n)}return Math.floor(n)}return w.objectMode?16:16*1024}B.exports={getHighWaterMark:b}},{"../../../errors":286}],299:[function(t,B,H){B.exports=t("events").EventEmitter},{events:84}],300:[function(t,B,H){var d=t("safe-buffer").Buffer,l=d.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(g){if(!g)return"utf8";for(var A;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(A)return;g=(""+g).toLowerCase(),A=!0}}function w(g){var A=b(g);if(typeof A!="string"&&(d.isEncoding===l||!l(g)))throw new Error("Unknown encoding: "+g);return A||g}H.StringDecoder=e;function e(g){this.encoding=w(g);var A;switch(this.encoding){case"utf16le":this.text=i,this.end=f,A=4;break;case"utf8":this.fillLast=r,A=4;break;case"base64":this.text=h,this.end=p,A=3;break;default:this.write=v,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(A)}e.prototype.write=function(g){if(g.length===0)return"";var A,m;if(this.lastNeed){if(A=this.fillLast(g),A===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<g.length?A?A+this.text(g,m):this.text(g,m):A||""},e.prototype.end=s,e.prototype.text=u,e.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function o(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function a(g,A,m){var M=A.length-1;if(M<m)return 0;var _=o(A[M]);return _>=0?(_>0&&(g.lastNeed=_-1),_):--M<m||_===-2?0:(_=o(A[M]),_>=0?(_>0&&(g.lastNeed=_-2),_):--M<m||_===-2?0:(_=o(A[M]),_>=0?(_>0&&(_===2?_=0:g.lastNeed=_-3),_):0))}function n(g,A,m){if((A[0]&192)!=128)return g.lastNeed=0,"\uFFFD";if(g.lastNeed>1&&A.length>1){if((A[1]&192)!=128)return g.lastNeed=1,"\uFFFD";if(g.lastNeed>2&&A.length>2&&(A[2]&192)!=128)return g.lastNeed=2,"\uFFFD"}}function r(g){var A=this.lastTotal-this.lastNeed,m=n(this,g);if(m!==void 0)return m;if(this.lastNeed<=g.length)return g.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,A,0,g.length),this.lastNeed-=g.length}function u(g,A){var m=a(this,g,A);if(!this.lastNeed)return g.toString("utf8",A);this.lastTotal=m;var M=g.length-(m-this.lastNeed);return g.copy(this.lastChar,0,M),g.toString("utf8",A,M)}function s(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+"\uFFFD":A}function i(g,A){if((g.length-A)%2==0){var m=g.toString("utf16le",A);if(m){var M=m.charCodeAt(m.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",A,g.length-1)}function f(g){var A=g&&g.length?this.write(g):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,m)}return A}function h(g,A){var m=(g.length-A)%3;return m===0?g.toString("base64",A):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",A,g.length-m))}function p(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function v(g){return g.toString(this.encoding)}function y(g){return g&&g.length?this.write(g):""}},{"safe-buffer":284}],301:[function(t,B,H){(function(d,l){(function(){var b=t("assert"),w=t("debug")("stream-parser");B.exports=r;var e=-1,o=0,a=1,n=2;function r(m){var M=m&&typeof m._transform=="function",_=m&&typeof m._write=="function";if(!M&&!_)throw new Error("must pass a Writable or Transform stream in");w("extending Parser into stream"),m._bytes=s,m._skipBytes=i,M&&(m._passthrough=f),M?m._transform=p:m._write=h}function u(m){w("initializing parser stream"),m._parserBytesLeft=0,m._parserBuffers=[],m._parserBuffered=0,m._parserState=e,m._parserCallback=null,typeof m.push=="function"&&(m._parserOutput=m.push.bind(m)),m._parserInit=!0}function s(m,M){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(m)&&m>0,'can only buffer a finite number of bytes > 0, got "'+m+'"'),this._parserInit||u(this),w("buffering %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=o}function i(m,M){b(!this._parserCallback,'there is already a "callback" set!'),b(m>0,'can only skip > 0 bytes, got "'+m+'"'),this._parserInit||u(this),w("skipping %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=a}function f(m,M){b(!this._parserCallback,'There is already a "callback" set!'),b(m>0,'can only pass through > 0 bytes, got "'+m+'"'),this._parserInit||u(this),w("passing through %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=n}function h(m,M,_){this._parserInit||u(this),w("write(%o bytes)",m.length),typeof M=="function"&&(_=M),g(this,m,null,_)}function p(m,M,_){this._parserInit||u(this),w("transform(%o bytes)",m.length),typeof M!="function"&&(M=this._parserOutput),g(this,m,M,_)}function v(m,M,_,T){return m._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):M.length<=m._parserBytesLeft?function(){return y(m,M,_,T)}:function(){var x=M.slice(0,m._parserBytesLeft);return y(m,x,_,function(c){if(c)return T(c);if(M.length>x.length)return function(){return v(m,M.slice(x.length),_,T)}})}}function y(m,M,_,T){if(m._parserBytesLeft-=M.length,w("%o bytes left for stream piece",m._parserBytesLeft),m._parserState===o?(m._parserBuffers.push(M),m._parserBuffered+=M.length):m._parserState===n&&_(M),m._parserBytesLeft===0){var x=m._parserCallback;if(x&&m._parserState===o&&m._parserBuffers.length>1&&(M=l.concat(m._parserBuffers,m._parserBuffered)),m._parserState!==o&&(M=null),m._parserCallback=null,m._parserBuffered=0,m._parserState=e,m._parserBuffers.splice(0),x){var c=[];M&&c.push(M),_&&c.push(_);var L=x.length>c.length;L&&c.push(A(T));var S=x.apply(m,c);if(!L||T===S)return T}}else return T}var g=A(v);function A(m){return function(){for(var M=m.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(t,B,H){(function(d){(function(){H=B.exports=t("./debug"),H.log=w,H.formatArgs=b,H.save=e,H.load=o,H.useColors=l,H.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:a(),H.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function l(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}H.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function b(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+H.humanize(this.diff),!!r){var u="color: "+this.color;n.splice(1,0,u,"color: inherit");var s=0,i=0;n[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(s++,f==="%c"&&(i=s))}),n.splice(i,0,u)}}function w(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(n){try{n==null?H.storage.removeItem("debug"):H.storage.debug=n}catch{}}function o(){var n;try{n=H.storage.debug}catch{}return!n&&typeof d!="undefined"&&"env"in d&&(n={}.DEBUG),n}H.enable(o());function a(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":303,_process:277}],303:[function(t,B,H){H=B.exports=b.debug=b.default=b,H.coerce=a,H.disable=e,H.enable=w,H.enabled=o,H.humanize=t("ms"),H.names=[],H.skips=[],H.formatters={};var d;function l(n){var r=0,u;for(u in n)r=(r<<5)-r+n.charCodeAt(u),r|=0;return H.colors[Math.abs(r)%H.colors.length]}function b(n){function r(){if(!!r.enabled){var u=r,s=+new Date,i=s-(d||s);u.diff=i,u.prev=d,u.curr=s,d=s;for(var f=new Array(arguments.length),h=0;h<f.length;h++)f[h]=arguments[h];f[0]=H.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");var p=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,function(y,g){if(y==="%%")return y;p++;var A=H.formatters[g];if(typeof A=="function"){var m=f[p];y=A.call(u,m),f.splice(p,1),p--}return y}),H.formatArgs.call(u,f);var v=r.log||H.log||console.log.bind(console);v.apply(u,f)}}return r.namespace=n,r.enabled=H.enabled(n),r.useColors=H.useColors(),r.color=l(n),typeof H.init=="function"&&H.init(r),r}function w(n){H.save(n),H.names=[],H.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),u=r.length,s=0;s<u;s++)!r[s]||(n=r[s].replace(/\*/g,".*?"),n[0]==="-"?H.skips.push(new RegExp("^"+n.substr(1)+"$")):H.names.push(new RegExp("^"+n+"$")))}function e(){H.enable("")}function o(n){var r,u;for(r=0,u=H.skips.length;r<u;r++)if(H.skips[r].test(n))return!1;for(r=0,u=H.names.length;r<u;r++)if(H.names[r].test(n))return!0;return!1}function a(n){return n instanceof Error?n.stack||n.message:n}},{ms:304}],304:[function(t,B,H){var d=1e3,l=d*60,b=l*60,w=b*24,e=w*365.25;B.exports=function(u,s){s=s||{};var i=typeof u;if(i==="string"&&u.length>0)return o(u);if(i==="number"&&isNaN(u)===!1)return s.long?n(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(!!s){var i=parseFloat(s[1]),f=(s[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return i*e;case"days":case"day":case"d":return i*w;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*l;case"seconds":case"second":case"secs":case"sec":case"s":return i*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function a(u){return u>=w?Math.round(u/w)+"d":u>=b?Math.round(u/b)+"h":u>=l?Math.round(u/l)+"m":u>=d?Math.round(u/d)+"s":u+"ms"}function n(u){return r(u,w,"day")||r(u,b,"hour")||r(u,l,"minute")||r(u,d,"second")||u+" ms"}function r(u,s,i){if(!(u<s))return u<s*1.5?Math.floor(u/s)+" "+i:Math.ceil(u/s)+" "+i+"s"}},{}],305:[function(t,B,H){var d=t("parenthesis");B.exports=function(b,w,e){if(b==null)throw Error("First argument should be a string");if(w==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(f){return f.length===1&&(f=f+f),f}));var o=d.parse(b,{flat:!0,brackets:e.ignore}),a=o[0],n=a.split(w);if(e.escape){for(var r=[],u=0;u<n.length;u++){var s=n[u],i=n[u+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(r.push(s+w+i),u++):r.push(s)}n=r}for(var u=0;u<n.length;u++)o[0]=n[u],n[u]=d.stringify(o,{flat:!0});return n}},{parenthesis:248}],306:[function(t,B,H){B.exports=d;function d(l){for(var b=l.length,w=new Array(b),e=new Array(b),o=new Array(b),a=new Array(b),n=new Array(b),r=new Array(b),u=0;u<b;++u)w[u]=-1,e[u]=0,o[u]=!1,a[u]=0,n[u]=-1,r[u]=[];var s=0,i=[],f=[];function h(g){var A=[g],m=[g];for(w[g]=e[g]=s,o[g]=!0,s+=1;m.length>0;){g=m[m.length-1];var M=l[g];if(a[g]<M.length){for(var _=a[g];_<M.length;++_){var T=M[_];if(w[T]<0){w[T]=e[T]=s,o[T]=!0,s+=1,A.push(T),m.push(T);break}else o[T]&&(e[g]=Math.min(e[g],e[T])|0);n[T]>=0&&r[g].push(n[T])}a[g]=_}else{if(e[g]===w[g]){for(var x=[],c=[],L=0,_=A.length-1;_>=0;--_){var S=A[_];if(o[S]=!1,x.push(S),c.push(r[S]),L+=r[S].length,n[S]=i.length,S===g){A.length=_;break}}i.push(x);for(var k=new Array(L),_=0;_<c.length;_++)for(var P=0;P<c[_].length;P++)k[--L]=c[_][P];f.push(k)}m.pop()}}}for(var u=0;u<b;++u)w[u]<0&&h(u);for(var p,u=0;u<f.length;u++){var v=f[u];if(v.length!==0){v.sort(function(A,m){return A-m}),p=[v[0]];for(var y=1;y<v.length;y++)v[y]!==v[y-1]&&p.push(v[y]);f[u]=p}}return{components:i,adjacencyList:f}}},{}],307:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=function(){function n(r,u){var s=[],i=!0,f=!1,h=void 0;try{for(var p=r[Symbol.iterator](),v;!(i=(v=p.next()).done)&&(s.push(v.value),!(u&&s.length===u));i=!0);}catch(y){f=!0,h=y}finally{try{!i&&p.return&&p.return()}finally{if(f)throw h}}return s}return function(r,u){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Math.PI*2,b=function(r,u,s,i,f,h,p){var v=r.x,y=r.y;v*=u,y*=s;var g=i*v-f*y,A=f*v+i*y;return{x:g+h,y:A+p}},w=function(r,u){var s=u===1.5707963267948966?.551915024494:u===-1.5707963267948966?-.551915024494:4/3*Math.tan(u/4),i=Math.cos(r),f=Math.sin(r),h=Math.cos(r+u),p=Math.sin(r+u);return[{x:i-f*s,y:f+i*s},{x:h+p*s,y:p-h*s},{x:h,y:p}]},e=function(r,u,s,i){var f=r*i-u*s<0?-1:1,h=r*s+u*i;return h>1&&(h=1),h<-1&&(h=-1),f*Math.acos(h)},o=function(r,u,s,i,f,h,p,v,y,g,A,m){var M=Math.pow(f,2),_=Math.pow(h,2),T=Math.pow(A,2),x=Math.pow(m,2),c=M*_-M*x-_*T;c<0&&(c=0),c/=M*x+_*T,c=Math.sqrt(c)*(p===v?-1:1);var L=c*f/h*m,S=c*-h/f*A,k=g*L-y*S+(r+s)/2,P=y*L+g*S+(u+i)/2,z=(A-L)/f,I=(m-S)/h,R=(-A-L)/f,D=(-m-S)/h,O=e(1,0,z,I),F=e(z,I,R,D);return v===0&&F>0&&(F-=l),v===1&&F<0&&(F+=l),[k,P,O,F]},a=function(r){var u=r.px,s=r.py,i=r.cx,f=r.cy,h=r.rx,p=r.ry,v=r.xAxisRotation,y=v===void 0?0:v,g=r.largeArcFlag,A=g===void 0?0:g,m=r.sweepFlag,M=m===void 0?0:m,_=[];if(h===0||p===0)return[];var T=Math.sin(y*l/360),x=Math.cos(y*l/360),c=x*(u-i)/2+T*(s-f)/2,L=-T*(u-i)/2+x*(s-f)/2;if(c===0&&L===0)return[];h=Math.abs(h),p=Math.abs(p);var S=Math.pow(c,2)/Math.pow(h,2)+Math.pow(L,2)/Math.pow(p,2);S>1&&(h*=Math.sqrt(S),p*=Math.sqrt(S));var k=o(u,s,i,f,h,p,A,M,T,x,c,L),P=d(k,4),z=P[0],I=P[1],R=P[2],D=P[3],O=Math.abs(D)/(l/4);Math.abs(1-O)<1e-7&&(O=1);var F=Math.max(Math.ceil(O),1);D/=F;for(var Y=0;Y<F;Y++)_.push(w(R,D)),R+=D;return _.map(function(X){var q=b(X[0],h,p,x,T,z,I),$=q.x,V=q.y,K=b(X[1],h,p,x,T,z,I),se=K.x,ue=K.y,oe=b(X[2],h,p,x,T,z,I),U=oe.x,G=oe.y;return{x1:$,y1:V,x2:se,y2:ue,x:U,y:G}})};H.default=a,B.exports=H.default},{}],308:[function(t,B,H){var d=t("parse-svg-path"),l=t("abs-svg-path"),b=t("normalize-svg-path"),w=t("is-svg-path"),e=t("assert");B.exports=o;function o(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(e(w(a),"String is not an SVG path."),a=d(a)),e(Array.isArray(a),"Argument should be a string or an array of path segments."),a=l(a),a=b(a),!a.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,u=a.length;r<u;r++)for(var s=a[r].slice(1),i=0;i<s.length;i+=2)s[i+0]<n[0]&&(n[0]=s[i+0]),s[i+1]<n[1]&&(n[1]=s[i+1]),s[i+0]>n[2]&&(n[2]=s[i+0]),s[i+1]>n[3]&&(n[3]=s[i+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(t,B,H){B.exports=l;var d=t("svg-arc-to-cubic-bezier");function l(e){for(var o,a=[],n=0,r=0,u=0,s=0,i=null,f=null,h=0,p=0,v=0,y=e.length;v<y;v++){var g=e[v],A=g[0];switch(A){case"M":u=g[1],s=g[2];break;case"A":var m=d({px:h,py:p,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!m.length)continue;for(var M=0,_;M<m.length;M++)_=m[M],g=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],M<m.length-1&&a.push(g);break;case"S":var T=h,x=p;(o=="C"||o=="S")&&(T+=T-n,x+=x-r),g=["C",T,x,g[1],g[2],g[3],g[4]];break;case"T":o=="Q"||o=="T"?(i=h*2-i,f=p*2-f):(i=h,f=p),g=w(h,p,i,f,g[1],g[2]);break;case"Q":i=g[1],f=g[2],g=w(h,p,g[1],g[2],g[3],g[4]);break;case"L":g=b(h,p,g[1],g[2]);break;case"H":g=b(h,p,g[1],p);break;case"V":g=b(h,p,h,g[1]);break;case"Z":g=b(h,p,u,s);break}o=A,h=g[g.length-2],p=g[g.length-1],g.length>4?(n=g[g.length-4],r=g[g.length-3]):(n=h,r=p),a.push(g)}return a}function b(e,o,a,n){return["C",e,o,a,n,a,n]}function w(e,o,a,n,r,u){return["C",e/3+2/3*a,o/3+2/3*n,r/3+2/3*a,u/3+2/3*n,r,u]}},{"svg-arc-to-cubic-bezier":307}],310:[function(t,B,H){var d=t("svg-path-bounds"),l=t("parse-svg-path"),b=t("draw-svg-path"),w=t("is-svg-path"),e=t("bitmap-sdf"),o=document.createElement("canvas"),a=o.getContext("2d");B.exports=n;function n(s,i){if(!w(s))throw Error("Argument should be valid svg path string");i||(i={});var f,h;i.shape?(f=i.shape[0],h=i.shape[1]):(f=o.width=i.w||i.width||200,h=o.height=i.h||i.height||200);var p=Math.min(f,h),v=i.stroke||0,y=i.viewbox||i.viewBox||d(s),g=[f/(y[2]-y[0]),h/(y[3]-y[1])],A=Math.min(g[0]||0,g[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,f,h),a.fillStyle="white",v&&(typeof v!="number"&&(v=1),v>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(v)),a.translate(f*.5,h*.5),a.scale(A,A),u()){var m=new Path2D(s);a.fill(m),v&&a.stroke(m)}else{var M=l(s);b(a,M),a.fill(),v&&a.stroke()}a.setTransform(1,0,0,1,0,0);var _=e(a,{cutoff:i.cutoff!=null?i.cutoff:.5,radius:i.radius!=null?i.radius:p*.5});return _}var r;function u(){if(r!=null)return r;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return r=!1;var i=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(i);var f=s.getImageData(0,0,1,1);return r=f&&f.data&&f.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(t,B,H){(function(d,l){(function(){var b=t("process/browser.js").nextTick,w=Function.prototype.apply,e=Array.prototype.slice,o={},a=0;H.setTimeout=function(){return new n(w.call(setTimeout,window,arguments),clearTimeout)},H.setInterval=function(){return new n(w.call(setInterval,window,arguments),clearInterval)},H.clearTimeout=H.clearInterval=function(r){r.close()};function n(r,u){this._id=r,this._clearFn=u}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},H.enroll=function(r,u){clearTimeout(r._idleTimeoutId),r._idleTimeout=u},H.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},H._unrefActive=H.active=function(r){clearTimeout(r._idleTimeoutId);var u=r._idleTimeout;u>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},u))},H.setImmediate=typeof d=="function"?d:function(r){var u=a++,s=arguments.length<2?!1:e.call(arguments,1);return o[u]=!0,b(function(){o[u]&&(s?r.apply(null,s):r.call(null),H.clearImmediate(u))}),u},H.clearImmediate=typeof l=="function"?l:function(r){delete o[r]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(t,B,H){(function(d){var l=/^\s+/,b=/\s+$/,w=0,e=d.round,o=d.min,a=d.max,n=d.random;function r(j,Q){if(j=j||"",Q=Q||{},j instanceof r)return j;if(!(this instanceof r))return new r(j,Q);var ne=u(j);this._originalInput=j,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=e(100*this._a)/100,this._format=Q.format||ne.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ne.ok,this._tc_id=w++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var j=this.toRgb();return(j.r*299+j.g*587+j.b*114)/1e3},getLuminance:function(){var j=this.toRgb(),Q,ne,ae,ie,fe,me;return Q=j.r/255,ne=j.g/255,ae=j.b/255,Q<=.03928?ie=Q/12.92:ie=d.pow((Q+.055)/1.055,2.4),ne<=.03928?fe=ne/12.92:fe=d.pow((ne+.055)/1.055,2.4),ae<=.03928?me=ae/12.92:me=d.pow((ae+.055)/1.055,2.4),.2126*ie+.7152*fe+.0722*me},setAlpha:function(j){return this._a=F(j),this._roundA=e(100*this._a)/100,this},toHsv:function(){var j=h(this._r,this._g,this._b);return{h:j.h*360,s:j.s,v:j.v,a:this._a}},toHsvString:function(){var j=h(this._r,this._g,this._b),Q=e(j.h*360),ne=e(j.s*100),ae=e(j.v*100);return this._a==1?"hsv("+Q+", "+ne+"%, "+ae+"%)":"hsva("+Q+", "+ne+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var j=i(this._r,this._g,this._b);return{h:j.h*360,s:j.s,l:j.l,a:this._a}},toHslString:function(){var j=i(this._r,this._g,this._b),Q=e(j.h*360),ne=e(j.s*100),ae=e(j.l*100);return this._a==1?"hsl("+Q+", "+ne+"%, "+ae+"%)":"hsla("+Q+", "+ne+"%, "+ae+"%, "+this._roundA+")"},toHex:function(j){return v(this._r,this._g,this._b,j)},toHexString:function(j){return"#"+this.toHex(j)},toHex8:function(j){return y(this._r,this._g,this._b,this._a,j)},toHex8String:function(j){return"#"+this.toHex8(j)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(Y(this._r,255)*100)+"%",g:e(Y(this._g,255)*100)+"%",b:e(Y(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(Y(this._r,255)*100)+"%, "+e(Y(this._g,255)*100)+"%, "+e(Y(this._b,255)*100)+"%)":"rgba("+e(Y(this._r,255)*100)+"%, "+e(Y(this._g,255)*100)+"%, "+e(Y(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:D[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(j){var Q="#"+g(this._r,this._g,this._b,this._a),ne=Q,ae=this._gradientType?"GradientType = 1, ":"";if(j){var ie=r(j);ne="#"+g(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+Q+",endColorstr="+ne+")"},toString:function(j){var Q=!!j;j=j||this._format;var ne=!1,ae=this._a<1&&this._a>=0,ie=!Q&&ae&&(j==="hex"||j==="hex6"||j==="hex3"||j==="hex4"||j==="hex8"||j==="name");return ie?j==="name"&&this._a===0?this.toName():this.toRgbString():(j==="rgb"&&(ne=this.toRgbString()),j==="prgb"&&(ne=this.toPercentageRgbString()),(j==="hex"||j==="hex6")&&(ne=this.toHexString()),j==="hex3"&&(ne=this.toHexString(!0)),j==="hex4"&&(ne=this.toHex8String(!0)),j==="hex8"&&(ne=this.toHex8String()),j==="name"&&(ne=this.toName()),j==="hsl"&&(ne=this.toHslString()),j==="hsv"&&(ne=this.toHsvString()),ne||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(j,Q){var ne=j.apply(null,[this].concat([].slice.call(Q)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(j,Q){return j.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},r.fromRatio=function(j,Q){if(typeof j=="object"){var ne={};for(var ae in j)j.hasOwnProperty(ae)&&(ae==="a"?ne[ae]=j[ae]:ne[ae]=se(j[ae]));j=ne}return r(j,Q)};function u(j){var Q={r:0,g:0,b:0},ne=1,ae=null,ie=null,fe=null,me=!1,ce=!1;return typeof j=="string"&&(j=re(j)),typeof j=="object"&&(G(j.r)&&G(j.g)&&G(j.b)?(Q=s(j.r,j.g,j.b),me=!0,ce=String(j.r).substr(-1)==="%"?"prgb":"rgb"):G(j.h)&&G(j.s)&&G(j.v)?(ae=se(j.s),ie=se(j.v),Q=p(j.h,ae,ie),me=!0,ce="hsv"):G(j.h)&&G(j.s)&&G(j.l)&&(ae=se(j.s),fe=se(j.l),Q=f(j.h,ae,fe),me=!0,ce="hsl"),j.hasOwnProperty("a")&&(ne=j.a)),ne=F(ne),{ok:me,format:j.format||ce,r:o(255,a(Q.r,0)),g:o(255,a(Q.g,0)),b:o(255,a(Q.b,0)),a:ne}}function s(j,Q,ne){return{r:Y(j,255)*255,g:Y(Q,255)*255,b:Y(ne,255)*255}}function i(j,Q,ne){j=Y(j,255),Q=Y(Q,255),ne=Y(ne,255);var ae=a(j,Q,ne),ie=o(j,Q,ne),fe,me,ce=(ae+ie)/2;if(ae==ie)fe=me=0;else{var ye=ae-ie;switch(me=ce>.5?ye/(2-ae-ie):ye/(ae+ie),ae){case j:fe=(Q-ne)/ye+(Q<ne?6:0);break;case Q:fe=(ne-j)/ye+2;break;case ne:fe=(j-Q)/ye+4;break}fe/=6}return{h:fe,s:me,l:ce}}function f(j,Q,ne){var ae,ie,fe;j=Y(j,360),Q=Y(Q,100),ne=Y(ne,100);function me(xe,ke,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?xe+(ke-xe)*6*Ae:Ae<1/2?ke:Ae<2/3?xe+(ke-xe)*(2/3-Ae)*6:xe}if(Q===0)ae=ie=fe=ne;else{var ce=ne<.5?ne*(1+Q):ne+Q-ne*Q,ye=2*ne-ce;ae=me(ye,ce,j+1/3),ie=me(ye,ce,j),fe=me(ye,ce,j-1/3)}return{r:ae*255,g:ie*255,b:fe*255}}function h(j,Q,ne){j=Y(j,255),Q=Y(Q,255),ne=Y(ne,255);var ae=a(j,Q,ne),ie=o(j,Q,ne),fe,me,ce=ae,ye=ae-ie;if(me=ae===0?0:ye/ae,ae==ie)fe=0;else{switch(ae){case j:fe=(Q-ne)/ye+(Q<ne?6:0);break;case Q:fe=(ne-j)/ye+2;break;case ne:fe=(j-Q)/ye+4;break}fe/=6}return{h:fe,s:me,v:ce}}function p(j,Q,ne){j=Y(j,360)*6,Q=Y(Q,100),ne=Y(ne,100);var ae=d.floor(j),ie=j-ae,fe=ne*(1-Q),me=ne*(1-ie*Q),ce=ne*(1-(1-ie)*Q),ye=ae%6,xe=[ne,me,fe,fe,ce,ne][ye],ke=[ce,ne,ne,me,fe,fe][ye],Ae=[fe,fe,ce,ne,ne,me][ye];return{r:xe*255,g:ke*255,b:Ae*255}}function v(j,Q,ne,ae){var ie=[K(e(j).toString(16)),K(e(Q).toString(16)),K(e(ne).toString(16))];return ae&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function y(j,Q,ne,ae,ie){var fe=[K(e(j).toString(16)),K(e(Q).toString(16)),K(e(ne).toString(16)),K(ue(ae))];return ie&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}function g(j,Q,ne,ae){var ie=[K(ue(ae)),K(e(j).toString(16)),K(e(Q).toString(16)),K(e(ne).toString(16))];return ie.join("")}r.equals=function(j,Q){return!j||!Q?!1:r(j).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function A(j,Q){Q=Q===0?0:Q||10;var ne=r(j).toHsl();return ne.s-=Q/100,ne.s=X(ne.s),r(ne)}function m(j,Q){Q=Q===0?0:Q||10;var ne=r(j).toHsl();return ne.s+=Q/100,ne.s=X(ne.s),r(ne)}function M(j){return r(j).desaturate(100)}function _(j,Q){Q=Q===0?0:Q||10;var ne=r(j).toHsl();return ne.l+=Q/100,ne.l=X(ne.l),r(ne)}function T(j,Q){Q=Q===0?0:Q||10;var ne=r(j).toRgb();return ne.r=a(0,o(255,ne.r-e(255*-(Q/100)))),ne.g=a(0,o(255,ne.g-e(255*-(Q/100)))),ne.b=a(0,o(255,ne.b-e(255*-(Q/100)))),r(ne)}function x(j,Q){Q=Q===0?0:Q||10;var ne=r(j).toHsl();return ne.l-=Q/100,ne.l=X(ne.l),r(ne)}function c(j,Q){var ne=r(j).toHsl(),ae=(ne.h+Q)%360;return ne.h=ae<0?360+ae:ae,r(ne)}function L(j){var Q=r(j).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function S(j){var Q=r(j).toHsl(),ne=Q.h;return[r(j),r({h:(ne+120)%360,s:Q.s,l:Q.l}),r({h:(ne+240)%360,s:Q.s,l:Q.l})]}function k(j){var Q=r(j).toHsl(),ne=Q.h;return[r(j),r({h:(ne+90)%360,s:Q.s,l:Q.l}),r({h:(ne+180)%360,s:Q.s,l:Q.l}),r({h:(ne+270)%360,s:Q.s,l:Q.l})]}function P(j){var Q=r(j).toHsl(),ne=Q.h;return[r(j),r({h:(ne+72)%360,s:Q.s,l:Q.l}),r({h:(ne+216)%360,s:Q.s,l:Q.l})]}function z(j,Q,ne){Q=Q||6,ne=ne||30;var ae=r(j).toHsl(),ie=360/ne,fe=[r(j)];for(ae.h=(ae.h-(ie*Q>>1)+720)%360;--Q;)ae.h=(ae.h+ie)%360,fe.push(r(ae));return fe}function I(j,Q){Q=Q||6;for(var ne=r(j).toHsv(),ae=ne.h,ie=ne.s,fe=ne.v,me=[],ce=1/Q;Q--;)me.push(r({h:ae,s:ie,v:fe})),fe=(fe+ce)%1;return me}r.mix=function(j,Q,ne){ne=ne===0?0:ne||50;var ae=r(j).toRgb(),ie=r(Q).toRgb(),fe=ne/100,me={r:(ie.r-ae.r)*fe+ae.r,g:(ie.g-ae.g)*fe+ae.g,b:(ie.b-ae.b)*fe+ae.b,a:(ie.a-ae.a)*fe+ae.a};return r(me)},r.readability=function(j,Q){var ne=r(j),ae=r(Q);return(d.max(ne.getLuminance(),ae.getLuminance())+.05)/(d.min(ne.getLuminance(),ae.getLuminance())+.05)},r.isReadable=function(j,Q,ne){var ae=r.readability(j,Q),ie,fe;switch(fe=!1,ie=ee(ne),ie.level+ie.size){case"AAsmall":case"AAAlarge":fe=ae>=4.5;break;case"AAlarge":fe=ae>=3;break;case"AAAsmall":fe=ae>=7;break}return fe},r.mostReadable=function(j,Q,ne){var ae=null,ie=0,fe,me,ce,ye;ne=ne||{},me=ne.includeFallbackColors,ce=ne.level,ye=ne.size;for(var xe=0;xe<Q.length;xe++)fe=r.readability(j,Q[xe]),fe>ie&&(ie=fe,ae=r(Q[xe]));return r.isReadable(j,ae,{level:ce,size:ye})||!me?ae:(ne.includeFallbackColors=!1,r.mostReadable(j,["#fff","#000"],ne))};var R=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=r.hexNames=O(R);function O(j){var Q={};for(var ne in j)j.hasOwnProperty(ne)&&(Q[j[ne]]=ne);return Q}function F(j){return j=parseFloat(j),(isNaN(j)||j<0||j>1)&&(j=1),j}function Y(j,Q){$(j)&&(j="100%");var ne=V(j);return j=o(Q,a(0,parseFloat(j))),ne&&(j=parseInt(j*Q,10)/100),d.abs(j-Q)<1e-6?1:j%Q/parseFloat(Q)}function X(j){return o(1,a(0,j))}function q(j){return parseInt(j,16)}function $(j){return typeof j=="string"&&j.indexOf(".")!=-1&&parseFloat(j)===1}function V(j){return typeof j=="string"&&j.indexOf("%")!=-1}function K(j){return j.length==1?"0"+j:""+j}function se(j){return j<=1&&(j=j*100+"%"),j}function ue(j){return d.round(parseFloat(j)*255).toString(16)}function oe(j){return q(j)/255}var U=function(){var j="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",ne="(?:"+Q+")|(?:"+j+")",ae="[\\s|\\(]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")\\s*\\)?",ie="[\\s|\\(]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")\\s*\\)?";return{CSS_UNIT:new RegExp(ne),rgb:new RegExp("rgb"+ae),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+ae),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+ae),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function G(j){return!!U.CSS_UNIT.exec(j)}function re(j){j=j.replace(l,"").replace(b,"").toLowerCase();var Q=!1;if(R[j])j=R[j],Q=!0;else if(j=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ne;return(ne=U.rgb.exec(j))?{r:ne[1],g:ne[2],b:ne[3]}:(ne=U.rgba.exec(j))?{r:ne[1],g:ne[2],b:ne[3],a:ne[4]}:(ne=U.hsl.exec(j))?{h:ne[1],s:ne[2],l:ne[3]}:(ne=U.hsla.exec(j))?{h:ne[1],s:ne[2],l:ne[3],a:ne[4]}:(ne=U.hsv.exec(j))?{h:ne[1],s:ne[2],v:ne[3]}:(ne=U.hsva.exec(j))?{h:ne[1],s:ne[2],v:ne[3],a:ne[4]}:(ne=U.hex8.exec(j))?{r:q(ne[1]),g:q(ne[2]),b:q(ne[3]),a:oe(ne[4]),format:Q?"name":"hex8"}:(ne=U.hex6.exec(j))?{r:q(ne[1]),g:q(ne[2]),b:q(ne[3]),format:Q?"name":"hex"}:(ne=U.hex4.exec(j))?{r:q(ne[1]+""+ne[1]),g:q(ne[2]+""+ne[2]),b:q(ne[3]+""+ne[3]),a:oe(ne[4]+""+ne[4]),format:Q?"name":"hex8"}:(ne=U.hex3.exec(j))?{r:q(ne[1]+""+ne[1]),g:q(ne[2]+""+ne[2]),b:q(ne[3]+""+ne[3]),format:Q?"name":"hex"}:!1}function ee(j){var Q,ne;return j=j||{level:"AA",size:"small"},Q=(j.level||"AA").toUpperCase(),ne=(j.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),ne!=="small"&&ne!=="large"&&(ne="small"),{level:Q,size:ne}}typeof B!="undefined"&&B.exports?B.exports=r:window.tinycolor=r})(Math)},{}],313:[function(t,B,H){B.exports=b,B.exports.float32=B.exports.float=b,B.exports.fract32=B.exports.fract=l;var d=new Float32Array(1);function l(w,e){if(w.length){if(w instanceof Float32Array)return new Float32Array(w.length);e instanceof Float32Array||(e=b(w));for(var o=0,a=e.length;o<a;o++)e[o]=w[o]-e[o];return e}return b(w-b(w))}function b(w){return w.length?w instanceof Float32Array?w:new Float32Array(w):(d[0]=w,d[0])}},{}],314:[function(t,B,H){var d=t("parse-unit");B.exports=e;var l=96;function b(o,a){var n=d(getComputedStyle(o).getPropertyValue(a));return n[0]*e(n[1],o)}function w(o,a){var n=document.createElement("div");n.style["font-size"]="128"+o,a.appendChild(n);var r=b(n,"font-size")/128;return a.removeChild(n),r}function e(o,a){switch(a=a||document.body,o=(o||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),o){case"%":return a.clientHeight/100;case"ch":case"ex":return w(o,a);case"em":return b(a,"font-size");case"rem":return b(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},{"parse-unit":251}],315:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.topojson=d.topojson||{}))})(this,function(d){function l(m){return m}function b(m){if(m==null)return l;var M,_,T=m.scale[0],x=m.scale[1],c=m.translate[0],L=m.translate[1];return function(S,k){k||(M=_=0);var P=2,z=S.length,I=new Array(z);for(I[0]=(M+=S[0])*T+c,I[1]=(_+=S[1])*x+L;P<z;)I[P]=S[P],++P;return I}}function w(m){var M=b(m.transform),_,T=1/0,x=T,c=-T,L=-T;function S(P){P=M(P),P[0]<T&&(T=P[0]),P[0]>c&&(c=P[0]),P[1]<x&&(x=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}m.arcs.forEach(function(P){for(var z=-1,I=P.length,R;++z<I;)R=M(P[z],z),R[0]<T&&(T=R[0]),R[0]>c&&(c=R[0]),R[1]<x&&(x=R[1]),R[1]>L&&(L=R[1])});for(_ in m.objects)k(m.objects[_]);return[T,x,c,L]}function e(m,M){for(var _,T=m.length,x=T-M;x<--T;)_=m[x],m[x++]=m[T],m[T]=_}function o(m,M){return typeof M=="string"&&(M=m.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(_){return a(m,_)})}:a(m,M)}function a(m,M){var _=M.id,T=M.bbox,x=M.properties==null?{}:M.properties,c=n(m,M);return _==null&&T==null?{type:"Feature",properties:x,geometry:c}:T==null?{type:"Feature",id:_,properties:x,geometry:c}:{type:"Feature",id:_,bbox:T,properties:x,geometry:c}}function n(m,M){var _=b(m.transform),T=m.arcs;function x(z,I){I.length&&I.pop();for(var R=T[z<0?~z:z],D=0,O=R.length;D<O;++D)I.push(_(R[D],D));z<0&&e(I,O)}function c(z){return _(z)}function L(z){for(var I=[],R=0,D=z.length;R<D;++R)x(z[R],I);return I.length<2&&I.push(I[0]),I}function S(z){for(var I=L(z);I.length<4;)I.push(I[0]);return I}function k(z){return z.map(S)}function P(z){var I=z.type,R;switch(I){case"GeometryCollection":return{type:I,geometries:z.geometries.map(P)};case"Point":R=c(z.coordinates);break;case"MultiPoint":R=z.coordinates.map(c);break;case"LineString":R=L(z.arcs);break;case"MultiLineString":R=z.arcs.map(L);break;case"Polygon":R=k(z.arcs);break;case"MultiPolygon":R=z.arcs.map(k);break;default:return null}return{type:I,coordinates:R}}return P(M)}function r(m,M){var _={},T={},x={},c=[],L=-1;M.forEach(function(P,z){var I=m.arcs[P<0?~P:P],R;I.length<3&&!I[1][0]&&!I[1][1]&&(R=M[++L],M[L]=P,M[z]=R)}),M.forEach(function(P){var z=S(P),I=z[0],R=z[1],D,O;if(D=x[I])if(delete x[D.end],D.push(P),D.end=R,O=T[R]){delete T[O.start];var F=O===D?D:D.concat(O);T[F.start=D.start]=x[F.end=O.end]=F}else T[D.start]=x[D.end]=D;else if(D=T[R])if(delete T[D.start],D.unshift(P),D.start=I,O=x[I]){delete x[O.end];var Y=O===D?D:O.concat(D);T[Y.start=O.start]=x[Y.end=D.end]=Y}else T[D.start]=x[D.end]=D;else D=[P],T[D.start=I]=x[D.end=R]=D});function S(P){var z=m.arcs[P<0?~P:P],I=z[0],R;return m.transform?(R=[0,0],z.forEach(function(D){R[0]+=D[0],R[1]+=D[1]})):R=z[z.length-1],P<0?[R,I]:[I,R]}function k(P,z){for(var I in P){var R=P[I];delete z[R.start],delete R.start,delete R.end,R.forEach(function(D){_[D<0?~D:D]=1}),c.push(R)}}return k(x,T),k(T,x),M.forEach(function(P){_[P<0?~P:P]||c.push([P])}),c}function u(m){return n(m,s.apply(this,arguments))}function s(m,M,_){var T,x,c;if(arguments.length>1)T=i(m,M,_);else for(x=0,T=new Array(c=m.arcs.length);x<c;++x)T[x]=x;return{type:"MultiLineString",arcs:r(m,T)}}function i(m,M,_){var T=[],x=[],c;function L(I){var R=I<0?~I:I;(x[R]||(x[R]=[])).push({i:I,g:c})}function S(I){I.forEach(L)}function k(I){I.forEach(S)}function P(I){I.forEach(k)}function z(I){switch(c=I,I.type){case"GeometryCollection":I.geometries.forEach(z);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":k(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return z(M),x.forEach(_==null?function(I){T.push(I[0].i)}:function(I){_(I[0].g,I[I.length-1].g)&&T.push(I[0].i)}),T}function f(m){for(var M=-1,_=m.length,T,x=m[_-1],c=0;++M<_;)T=x,x=m[M],c+=T[0]*x[1]-T[1]*x[0];return Math.abs(c)}function h(m){return n(m,p.apply(this,arguments))}function p(m,M){var _={},T=[],x=[];M.forEach(c);function c(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(c);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(z){(_[z=z<0?~z:z]||(_[z]=[])).push(k)})}),T.push(k)}function S(k){return f(n(m,{type:"Polygon",arcs:[k]}).coordinates[0])}return T.forEach(function(k){if(!k._){var P=[],z=[k];for(k._=1,x.push(P);k=z.pop();)P.push(k),k.forEach(function(I){I.forEach(function(R){_[R<0?~R:R].forEach(function(D){D._||(D._=1,z.push(D))})})})}}),T.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:x.map(function(k){var P=[],z;if(k.forEach(function(F){F.forEach(function(Y){Y.forEach(function(X){_[X<0?~X:X].length<2&&P.push(X)})})}),P=r(m,P),(z=P.length)>1)for(var I=1,R=S(P[0]),D,O;I<z;++I)(D=S(P[I]))>R&&(O=P[0],P[0]=P[I],P[I]=O,R=D);return P}).filter(function(k){return k.length>0})}}function v(m,M){for(var _=0,T=m.length;_<T;){var x=_+T>>>1;m[x]<M?_=x+1:T=x}return _}function y(m){var M={},_=m.map(function(){return[]});function T(F,Y){F.forEach(function(X){X<0&&(X=~X);var q=M[X];q?q.push(Y):M[X]=[Y]})}function x(F,Y){F.forEach(function(X){T(X,Y)})}function c(F,Y){F.type==="GeometryCollection"?F.geometries.forEach(function(X){c(X,Y)}):F.type in L&&L[F.type](F.arcs,Y)}var L={LineString:T,MultiLineString:x,Polygon:x,MultiPolygon:function(F,Y){F.forEach(function(X){x(X,Y)})}};m.forEach(c);for(var S in M)for(var k=M[S],P=k.length,z=0;z<P;++z)for(var I=z+1;I<P;++I){var R=k[z],D=k[I],O;(O=_[R])[S=v(O,D)]!==D&&O.splice(S,0,D),(O=_[D])[S=v(O,R)]!==R&&O.splice(S,0,R)}return _}function g(m){if(m==null)return l;var M,_,T=m.scale[0],x=m.scale[1],c=m.translate[0],L=m.translate[1];return function(S,k){k||(M=_=0);var P=2,z=S.length,I=new Array(z),R=Math.round((S[0]-c)/T),D=Math.round((S[1]-L)/x);for(I[0]=R-M,M=R,I[1]=D-_,_=D;P<z;)I[P]=S[P],++P;return I}}function A(m,M){if(m.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");k=m.bbox||w(m);var _=k[0],T=k[1],x=k[2],c=k[3],L;M={scale:[x-_?(x-_)/(L-1):1,c-T?(c-T)/(L-1):1],translate:[_,T]}}else k=m.bbox;var S=g(M),k,P,z=m.objects,I={};function R(F){return S(F)}function D(F){var Y;switch(F.type){case"GeometryCollection":Y={type:"GeometryCollection",geometries:F.geometries.map(D)};break;case"Point":Y={type:"Point",coordinates:R(F.coordinates)};break;case"MultiPoint":Y={type:"MultiPoint",coordinates:F.coordinates.map(R)};break;default:return F}return F.id!=null&&(Y.id=F.id),F.bbox!=null&&(Y.bbox=F.bbox),F.properties!=null&&(Y.properties=F.properties),Y}function O(F){var Y=0,X=1,q=F.length,$,V=new Array(q);for(V[0]=S(F[0],0);++Y<q;)(($=S(F[Y],Y))[0]||$[1])&&(V[X++]=$);return X===1&&(V[X++]=[0,0]),V.length=X,V}for(P in z)I[P]=D(z[P]);return{type:"Topology",bbox:k,transform:M,objects:I,arcs:m.arcs.map(O)}}d.bbox=w,d.feature=o,d.merge=h,d.mergeArcs=p,d.mesh=u,d.meshArcs=s,d.neighbors=y,d.quantize=A,d.transform=b,d.untransform=g,Object.defineProperty(d,"__esModule",{value:!0})})},{}],316:[function(t,B,H){var d=t("../prototype/is");B.exports=function(l){if(typeof l!="function"||!hasOwnProperty.call(l,"length"))return!1;try{if(typeof l.length!="number"||typeof l.call!="function"||typeof l.apply!="function")return!1}catch{return!1}return!d(l)}},{"../prototype/is":323}],317:[function(t,B,H){var d=t("../value/is"),l=t("../object/is"),b=t("../string/coerce"),w=t("./to-short-string"),e=function(o,a){return o.replace("%v",w(a))};B.exports=function(o,a,n){if(!l(n))throw new TypeError(e(a,o));if(!d(o)){if("default"in n)return n.default;if(n.isOptional)return null}var r=b(n.errorMessage);throw d(r)||(r=a),new TypeError(e(r,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(t,B,H){B.exports=function(d){try{return d.toString()}catch{try{return String(d)}catch{return null}}}},{}],319:[function(t,B,H){var d=t("./safe-to-string"),l=/[\n\r\u2028\u2029]/g;B.exports=function(b){var w=d(b);return w===null?"<Non-coercible to string value>":(w.length>100&&(w=w.slice(0,99)+"\u2026"),w=w.replace(l,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),w)}},{"./safe-to-string":318}],320:[function(t,B,H){var d=t("../value/is"),l={object:!0,function:!0,undefined:!0};B.exports=function(b){return d(b)?hasOwnProperty.call(l,typeof b):!1}},{"../value/is":326}],321:[function(t,B,H){var d=t("../lib/resolve-exception"),l=t("./is");B.exports=function(b){return l(b)?b:d(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(t,B,H){var d=t("../function/is"),l=/^\s*class[\s{/}]/,b=Function.prototype.toString;B.exports=function(w){return!(!d(w)||l.test(b.call(w)))}},{"../function/is":316}],323:[function(t,B,H){var d=t("../object/is");B.exports=function(l){if(!d(l))return!1;try{return l.constructor?l.constructor.prototype===l:!1}catch{return!1}}},{"../object/is":320}],324:[function(t,B,H){var d=t("../value/is"),l=t("../object/is"),b=Object.prototype.toString;B.exports=function(w){if(!d(w))return null;if(l(w)){var e=w.toString;if(typeof e!="function"||e===b)return null}try{return""+w}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(t,B,H){var d=t("../lib/resolve-exception"),l=t("./is");B.exports=function(b){return l(b)?b:d(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(t,B,H){var d=void 0;B.exports=function(l){return l!==d&&l!==null}},{}],327:[function(t,B,H){(function(d){(function(){var l=t("bit-twiddle"),b=t("dup"),w=t("buffer").Buffer;d.__TYPEDARRAY_POOL||(d.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e=typeof Uint8ClampedArray!="undefined",o=typeof BigUint64Array!="undefined",a=typeof BigInt64Array!="undefined",n=d.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=b([32,0])),n.BIGUINT64||(n.BIGUINT64=b([32,0])),n.BIGINT64||(n.BIGINT64=b([32,0])),n.BUFFER||(n.BUFFER=b([32,0]));var r=n.DATA,u=n.BUFFER;H.free=function(k){if(w.isBuffer(k))u[l.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,z=l.log2(P)|0;r[z].push(k)}};function s(S){if(!!S){var k=S.length||S.byteLength,P=l.log2(k);r[P].push(S)}}function i(S){s(S.buffer)}H.freeUint8=H.freeUint16=H.freeUint32=H.freeBigUint64=H.freeInt8=H.freeInt16=H.freeInt32=H.freeBigInt64=H.freeFloat32=H.freeFloat=H.freeFloat64=H.freeDouble=H.freeUint8Clamped=H.freeDataView=i,H.freeArrayBuffer=s,H.freeBuffer=function(k){u[l.log2(k.length)].push(k)},H.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return f(k);switch(P){case"uint8":return h(k);case"uint16":return p(k);case"uint32":return v(k);case"int8":return y(k);case"int16":return g(k);case"int32":return A(k);case"float":case"float32":return m(k);case"double":case"float64":return M(k);case"uint8_clamped":return _(k);case"bigint64":return x(k);case"biguint64":return T(k);case"buffer":return L(k);case"data":case"dataview":return c(k);default:return null}return null};function f(S){var S=l.nextPow2(S),k=l.log2(S),P=r[k];return P.length>0?P.pop():new ArrayBuffer(S)}H.mallocArrayBuffer=f;function h(S){return new Uint8Array(f(S),0,S)}H.mallocUint8=h;function p(S){return new Uint16Array(f(2*S),0,S)}H.mallocUint16=p;function v(S){return new Uint32Array(f(4*S),0,S)}H.mallocUint32=v;function y(S){return new Int8Array(f(S),0,S)}H.mallocInt8=y;function g(S){return new Int16Array(f(2*S),0,S)}H.mallocInt16=g;function A(S){return new Int32Array(f(4*S),0,S)}H.mallocInt32=A;function m(S){return new Float32Array(f(4*S),0,S)}H.mallocFloat32=H.mallocFloat=m;function M(S){return new Float64Array(f(8*S),0,S)}H.mallocFloat64=H.mallocDouble=M;function _(S){return e?new Uint8ClampedArray(f(S),0,S):h(S)}H.mallocUint8Clamped=_;function T(S){return o?new BigUint64Array(f(8*S),0,S):null}H.mallocBigUint64=T;function x(S){return a?new BigInt64Array(f(8*S),0,S):null}H.mallocBigInt64=x;function c(S){return new DataView(f(S),0,S)}H.mallocDataView=c;function L(S){S=l.nextPow2(S);var k=l.log2(S),P=u[k];return P.length>0?P.pop():new w(S)}H.mallocBuffer=L,H.clearCache=function(){for(var k=0;k<32;++k)n.UINT8[k].length=0,n.UINT16[k].length=0,n.UINT32[k].length=0,n.INT8[k].length=0,n.INT16[k].length=0,n.INT32[k].length=0,n.FLOAT[k].length=0,n.DOUBLE[k].length=0,n.BIGUINT64[k].length=0,n.BIGINT64[k].length=0,n.UINT8C[k].length=0,r[k].length=0,u[k].length=0}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(t,B,H){var d=/[\'\"]/;B.exports=function(b){return b?(d.test(b.charAt(0))&&(b=b.substr(1)),d.test(b.charAt(b.length-1))&&(b=b.substr(0,b.length-1)),b):""}},{}],329:[function(t,B,H){B.exports=function(l,b,w){Array.isArray(w)||(w=[].slice.call(arguments,2));for(var e=0,o=w.length;e<o;e++){var a=w[e];for(var n in a)if(!(b[n]!==void 0&&!Array.isArray(b[n])&&l[n]===b[n])&&n in b){var r;if(a[n]===!0)r=b[n];else{if(a[n]===!1)continue;if(typeof a[n]=="function"&&(r=a[n](b[n],l,b),r===void 0))continue}l[n]=r}}return l}},{}],330:[function(t,B,H){(function(d){(function(){B.exports=l;function l(w,e){if(b("noDeprecation"))return w;var o=!1;function a(){if(!o){if(b("throwDeprecation"))throw new Error(e);b("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return w.apply(this,arguments)}return a}function b(w){try{if(!d.localStorage)return!1}catch{return!1}var e=d.localStorage[w];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(t,B,H){var d=t("get-canvas-context");B.exports=function(b){return d("webgl",b)}},{"get-canvas-context":194}],332:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(f,h){if(typeof f=="string"){var p=f.match(o);return p?p[0]:""}var v=this._validateYear(f),y=f.month(),g=""+this.toChineseMonth(v,y);return h&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(v,y)&&(g+="i"),g},monthNames:function(f){if(typeof f=="string"){var h=f.match(a);return h?h[0]:""}var p=this._validateYear(f),v=f.month(),y=this.toChineseMonth(p,v),g=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(p,v)&&(g="\u95F0"+g),g},monthNamesShort:function(f){if(typeof f=="string"){var h=f.match(n);return h?h[0]:""}var p=this._validateYear(f),v=f.month(),y=this.toChineseMonth(p,v),g=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(p,v)&&(g="\u95F0"+g),g},parseMonth:function(f,h){f=this._validateYear(f);var p=parseInt(h),v;if(isNaN(p))h[0]==="\u95F0"&&(v=!0,h=h.substring(1)),h[h.length-1]==="\u6708"&&(h=h.substring(0,h.length-1)),p=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(h);else{var y=h[h.length-1];v=y==="i"||y==="I"}var g=this.toMonthIndex(f,p,v);return g},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(f,h){if(f.year&&(f=f.year()),typeof f!="number"||f<1888||f>2111)throw h.replace(/\{0\}/,this.local.name);return f},toMonthIndex:function(f,h,p){var v=this.intercalaryMonth(f),y=p&&h!==v;if(y||h<1||h>12)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var g;return v?!p&&h<=v?g=h-1:g=h:g=h-1,g},toChineseMonth:function(f,h){f.year&&(f=f.year(),h=f.month());var p=this.intercalaryMonth(f),v=p?12:11;if(h<0||h>v)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return p?h<p?y=h+1:y=h:y=h+1,y},intercalaryMonth:function(f){f=this._validateYear(f);var h=r[f-r[0]],p=h>>13;return p},isIntercalaryMonth:function(f,h){f.year&&(f=f.year(),h=f.month());var p=this.intercalaryMonth(f);return!!p&&p===h},leapYear:function(f){return this.intercalaryMonth(f)!==0},weekOfYear:function(f,h,p){var v=this._validateYear(f,d.local.invalidyear),y=u[v-u[0]],g=y>>9&4095,A=y>>5&15,m=y&31,M;M=b.newDate(g,A,m),M.add(4-(M.dayOfWeek()||7),"d");var _=this.toJD(f,h,p)-M.toJD();return 1+Math.floor(_/7)},monthsInYear:function(f){return this.leapYear(f)?13:12},daysInMonth:function(f,h){f.year&&(h=f.month(),f=f.year()),f=this._validateYear(f);var p=r[f-r[0]],v=p>>13,y=v?12:11;if(h>y)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var g=p&1<<12-h?30:29;return g},weekDay:function(f,h,p){return(this.dayOfWeek(f,h,p)||7)<6},toJD:function(f,h,p){var v=this._validate(f,g,p,d.local.invalidDate);f=this._validateYear(v.year()),h=v.month(),p=v.day();var y=this.isIntercalaryMonth(f,h),g=this.toChineseMonth(f,h),A=i(f,g,p,y);return b.toJD(A.year,A.month,A.day)},fromJD:function(f){var h=b.fromJD(f),p=s(h.year(),h.month(),h.day()),v=this.toMonthIndex(p.year,p.month,p.isIntercalary);return this.newDate(p.year,v,p.day)},fromString:function(f){var h=f.match(e),p=this._validateYear(+h[1]),v=+h[2],y=!!h[3],g=this.toMonthIndex(p,v,y),A=+h[4];return this.newDate(p,g,A)},add:function(f,h,p){var v=f.year(),y=f.month(),g=this.isIntercalaryMonth(v,y),A=this.toChineseMonth(v,y),m=Object.getPrototypeOf(w.prototype).add.call(this,f,h,p);if(p==="y"){var M=m.year(),_=m.month(),T=this.isIntercalaryMonth(M,A),x=g&&T?this.toMonthIndex(M,A,!0):this.toMonthIndex(M,A,!1);x!==_&&m.month(x)}return m}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^??[]?/m,n=/^??[]?/m;d.calendars.chinese=w;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],u=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(f,h,p,v){var y,g;if(typeof f=="object")y=f,g=h||{};else{var A=typeof f=="number"&&f>=1888&&f<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var m=typeof h=="number"&&h>=1&&h<=12;if(!m)throw new Error("Solar month outside range 1 - 12");var M=typeof p=="number"&&p>=1&&p<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:f,month:h,day:p},g=v||{}}var _=u[y.year-u[0]],T=y.year<<9|y.month<<5|y.day;g.year=T>=_?y.year:y.year-1,_=u[g.year-u[0]];var x=_>>9&4095,c=_>>5&15,L=_&31,S,k=new Date(x,c-1,L),P=new Date(y.year,y.month-1,y.day);S=Math.round((P-k)/(24*3600*1e3));var z=r[g.year-r[0]],I;for(I=0;I<13;I++){var R=z&1<<12-I?30:29;if(S<R)break;S-=R}var D=z>>13;return!D||I<D?(g.isIntercalary=!1,g.month=1+I):I===D?(g.isIntercalary=!0,g.month=I):(g.isIntercalary=!1,g.month=I),g.day=1+S,g}function i(f,h,p,v,y){var g,A;if(typeof f=="object")A=f,g=h||{};else{var m=typeof f=="number"&&f>=1888&&f<=2111;if(!m)throw new Error("Lunar year outside range 1888-2111");var M=typeof h=="number"&&h>=1&&h<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var _=typeof p=="number"&&p>=1&&p<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var T;typeof v=="object"?(T=!1,g=v):(T=!!v,g=y||{}),A={year:f,month:h,day:p,isIntercalary:T}}var x;x=A.day-1;var c=r[A.year-r[0]],L=c>>13,S;L&&(A.month>L||A.isIntercalary)?S=A.month:S=A.month-1;for(var k=0;k<S;k++){var P=c&1<<12-k?30:29;x+=P}var z=u[A.year-u[0]],I=z>>9&4095,R=z>>5&15,D=z&31,O=new Date(I,R-1,D+x);return g.year=O.getFullYear(),g.month=1+O.getMonth(),g.day=O.getDate(),g}},{"../main":346,"object-assign":247}],333:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear),w=e.year()+(e.year()<0?1:0);return w%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),w<0&&w++,a.day()+(a.month()-1)*30+(w-1)*365+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var e=Math.floor(w)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(w)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1,n=e-(a-1)*30+1;return this.newDate(o,a,n)}}),d.calendars.coptic=b},{"../main":346,"object-assign":247}],334:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),400},weekOfYear:function(e,o,a){var n=this.newDate(e,o,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,o,a){var n=this.dayOfWeek(e,o,a);return n>=2&&n<=6},extraInfo:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);return{century:w[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);return e=n.year()+(n.year()<0?1:0),o=n.month(),a=n.day(),a+(o>1?16:0)+(o>2?(o-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=(o-1)*400,e+=e>15?16:0;var a=Math.floor(e/32)+1,n=e-(a-1)*32+1;return this.newDate(o<=0?o-1:o,a,n)}});var w={20:"Fruitbat",21:"Anchovy"};d.calendars.discworld=b},{"../main":346,"object-assign":247}],335:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear),w=e.year()+(e.year()<0?1:0);return w%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),w<0&&w++,a.day()+(a.month()-1)*30+(w-1)*365+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var e=Math.floor(w)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(w)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1,n=e-(a-1)*30+1;return this.newDate(o,a,n)}}),d.calendars.ethiopian=b},{"../main":346,"object-assign":247}],336:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return e=e<0?e+1:e,w(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,a){var n=this.newDate(e,o,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=o.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,d.local.invalidMonth),o===12&&this.leapYear(e)||o===8&&w(this.daysInYear(e),10)===5?30:o===9&&w(this.daysInYear(e),10)===3?29:this.daysPerMonth[o-1]},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==6},extraInfo:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);e=n.year(),o=n.month(),a=n.day();var r=e<=0?e+1:e,u=this.jdEpoch+this._delay1(r)+this._delay2(r)+a+1;if(o<7){for(var s=7;s<=this.monthsInYear(e);s++)u+=this.daysInMonth(e,s);for(var s=1;s<o;s++)u+=this.daysInMonth(e,s)}else for(var s=7;s<o;s++)u+=this.daysInMonth(e,s);return u},_delay1:function(e){var o=Math.floor((235*e-234)/19),a=12084+13753*o,n=o*29+Math.floor(a/25920);return w(3*(n+1),7)<3&&n++,n},_delay2:function(e){var o=this._delay1(e-1),a=this._delay1(e),n=this._delay1(e+1);return n-a==356?2:a-o==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(o===-1?1:o+1,7,1);)o++;for(var a=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,a,this.daysInMonth(o,a));)a++;var n=e-this.toJD(o,a,1)+1;return this.newDate(o,a,n)}});function w(e,o){return e-o*Math.floor(e/o)}d.calendars.hebrew=b},{"../main":346,"object-assign":247}],337:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(w){return this.leapYear(w)?355:354},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return this.dayOfWeek(w,e,o)!==5},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),e=a.month(),o=a.day(),w=w<=0?w+1:w,o+Math.ceil(29.5*(e-1))+(w-1)*354+Math.floor((3+11*w)/30)+this.jdEpoch-1},fromJD:function(w){w=Math.floor(w)+.5;var e=Math.floor((30*(w-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((w-29-this.toJD(e,1,1))/29.5)+1),a=w-this.toJD(e,o,1)+1;return this.newDate(e,o,a)}}),d.calendars.islamic=b},{"../main":346,"object-assign":247}],338:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear),w=e.year()<0?e.year()+1:e.year();return w%4==0},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),e=a.month(),o=a.day(),w<0&&w++,e<=2&&(w--,e+=12),Math.floor(365.25*(w+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(w){var e=Math.floor(w+.5),o=e+1524,a=Math.floor((o-122.1)/365.25),n=Math.floor(365.25*a),r=Math.floor((o-n)/30.6001),u=r-Math.floor(r<14?1:13),s=a-Math.floor(u>2?4716:4715),i=o-n-Math.floor(30.6001*r);return s<=0&&s--,this.newDate(s,u,i)}}),d.calendars.julian=b},{"../main":346,"object-assign":247}],339:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),!1},formatYear:function(o){var a=this._validate(o,this.minMonth,this.minDay,d.local.invalidYear);o=a.year();var n=Math.floor(o/400);o=o%400,o+=o<0?400:0;var r=Math.floor(o/20);return n+"."+r+"."+o%20},forYear:function(o){if(o=o.split("."),o.length<3)throw"Invalid Mayan year";for(var a=0,n=0;n<o.length;n++){var r=parseInt(o[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";a=a*20+r}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),18},weekOfYear:function(o,a,n){return this._validate(o,a,n,d.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,d.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,n){var r=this._validate(o,a,n,d.local.invalidDate);return r.day()},weekDay:function(o,a,n){return this._validate(o,a,n,d.local.invalidDate),!0},extraInfo:function(o,a,n){var r=this._validate(o,a,n,d.local.invalidDate),u=r.toJD(),s=this._toHaab(u),i=this._toTzolkin(u);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(o){o-=this.jdEpoch;var a=w(o+8+(18-1)*20,365);return[Math.floor(a/20)+1,w(a,20)]},_toTzolkin:function(o){return o-=this.jdEpoch,[e(o+20,20),e(o+4,13)]},toJD:function(o,a,n){var r=this._validate(o,a,n,d.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o=o%360,o+=o<0?360:0;var n=Math.floor(o/20),r=o%20;return this.newDate(a,n,r)}});function w(o,a){return o-a*Math.floor(o/a)}function e(o,a){return w(o-1,a)+1}d.calendars.mayan=b},{"../main":346,"object-assign":247}],340:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar;var w=d.instance("gregorian");l(b.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return w.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,a){var n=this.newDate(e,o,a);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidMonth),e=n.year();e<0&&e++;for(var r=n.day(),u=1;u<n.month();u++)r+=this.daysPerMonth[u-1];return r+w.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var a=e-Math.floor(this.toJD(o,1,1)+.5)+1,n=1;a>this.daysInMonth(o,n);)a-=this.daysInMonth(o,n),n++;return this.newDate(o,n,a)}}),d.calendars.nanakshahi=b},{"../main":346,"object-assign":247}],341:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(w){return this.daysInYear(w)!==this.daysPerYear},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear);if(w=e.year(),typeof this.NEPALI_CALENDAR_DATA[w]=="undefined")return this.daysPerYear;for(var o=0,a=this.minMonth;a<=12;a++)o+=this.NEPALI_CALENDAR_DATA[w][a];return o},daysInMonth:function(w,e){return w.year&&(e=w.month(),w=w.year()),this._validate(w,e,this.minDay,d.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[w]=="undefined"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[w][e]},weekDay:function(w,e,o){return this.dayOfWeek(w,e,o)!==6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);w=a.year(),e=a.month(),o=a.day();var n=d.instance(),r=0,u=e,s=w;this._createMissingCalendarData(w);var i=w-(u>9||u===9&&o>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(r=o,u--);u!==9;)u<=0&&(u=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][u],u--;return e===9?(r+=o-this.NEPALI_CALENDAR_DATA[s][0],r<0&&(r+=n.daysInYear(i))):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(i,1,1).add(r,"d").toJD()},fromJD:function(w){var e=d.instance(),o=e.fromJD(w),a=o.year(),n=o.dayOfYear(),r=a+56;this._createMissingCalendarData(r);for(var u=9,s=this.NEPALI_CALENDAR_DATA[r][0],i=this.NEPALI_CALENDAR_DATA[r][u]-s+1;n>i;)u++,u>12&&(u=1,r++),i+=this.NEPALI_CALENDAR_DATA[r][u];var f=this.NEPALI_CALENDAR_DATA[r][u]-(i-n);return this.newDate(r,u,f)},_createMissingCalendarData:function(w){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=w-1;o<w+2;o++)typeof this.NEPALI_CALENDAR_DATA[o]=="undefined"&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),d.calendars.nepali=b},{"../main":346,"object-assign":247}],342:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return((o.year()-(o.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,o,a){var n=this.newDate(e,o,a);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==5},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate);e=n.year(),o=n.month(),a=n.day();var r=e-(e>=0?474:473),u=474+w(r,2820);return a+(o<=7?(o-1)*31:(o-1)*30+6)+Math.floor((u*682-110)/2816)+(u-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var o=e-this.toJD(475,1,1),a=Math.floor(o/1029983),n=w(o,1029983),r=2820;if(n!==1029982){var u=Math.floor(n/366),s=w(n,366);r=Math.floor((2134*u+2816*s+2815)/1028522)+u+1}var i=r+2820*a+474;i=i<=0?i-1:i;var f=e-this.toJD(i,1,1)+1,h=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),p=e-this.toJD(i,h,1)+1;return this.newDate(i,h,p)}});function w(e,o){return e-o*Math.floor(e/o)}d.calendars.persian=b,d.calendars.jalali=b},{"../main":346,"object-assign":247}],343:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),e=this._t2gYear(o.year());return b.leapYear(e)},weekOfYear:function(e,o,a){var n=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),e=this._t2gYear(n.year());return b.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate),e=this._t2gYear(n.year());return b.toJD(e,n.month(),n.day())},fromJD:function(e){var o=b.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),d.calendars.taiwan=w},{"../main":346,"object-assign":247}],344:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),e=this._t2gYear(o.year());return b.leapYear(e)},weekOfYear:function(e,o,a){var n=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),e=this._t2gYear(n.year());return b.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate),e=this._t2gYear(n.year());return b.toJD(e,n.month(),n.day())},fromJD:function(e){var o=b.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),d.calendars.thai=w},{"../main":346,"object-assign":247}],345:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return this.daysInYear(o.year())===355},weekOfYear:function(e,o,a){var n=this.newDate(e,o,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(e,a);return o},daysInMonth:function(e,o){for(var a=this._validate(e,o,this.minDay,d.local.invalidMonth),n=a.toJD()-24e5+.5,r=0,u=0;u<w.length;u++){if(w[u]>n)return w[r]-w[r-1];r++}return 30},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==5},toJD:function(e,o,a){var n=this._validate(e,o,a,d.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,u=n.day()+w[r-1]-1;return u+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,a=0,n=0;n<w.length&&!(w[n]>o);n++)a++;var r=a+15292,u=Math.floor((r-1)/12),s=u+1,i=r-12*u,f=o-w[a-1]+1;return this.newDate(s,i,f)},isValid:function(e,o,a){var n=d.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(e=e.year!=null?e.year:e,n=e>=1276&&e<=1500),n},_validate:function(e,o,a,n){var r=d.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),d.calendars.ummalqura=b;var w=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(t,B,H){var d=t("object-assign");function l(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}d(l.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var u=this._localCals[n+"-"+r];if(!u&&this.calendars[n]&&(u=new this.calendars[n](r),this._localCals[n+"-"+r]=u),!u)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return u},newDate:function(n,r,u,s,i){return s=(n!=null&&n.year?n.calendar():typeof s=="string"?this.instance(s,i):s)||this.instance(),s.newDate(n,r,u)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(u){return n[u]})}},substituteChineseDigits:function(n,r){return function(u){for(var s="",i=0;u>0;){var f=u%10;s=(f===0?"":n[f]+r[i])+s,i++,u=Math.floor(u/10)}return s.indexOf(n[1]+r[1])===0&&(s=s.substr(1)),s||n[0]}}});function b(n,r,u,s){if(this._calendar=n,this._year=r,this._month=u,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}d(b.prototype,{newDate:function(n,r,u){return this._calendar.newDate(n==null?this:n,r,u)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,u){if(!this._calendar.isValid(n,r,u))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=u,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+w(Math.abs(this.year()),4)+"-"+w(this.month(),2)+"-"+w(this.day(),2)}});function e(){this.shortYearCutoff="+10"}d(e.prototype,{_validateLevel:0,newDate:function(n,r,u){return n==null?this.today():(n.year&&(this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate),u=n.day(),r=n.month(),n=n.year()),new b(this,n,r,u))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+w(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var u=this._validate(n,r,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(u.month()+this.monthsInYear(u)-this.firstMonth)%this.monthsInYear(u)+this.minMonth},fromMonthOfYear:function(n,r){var u=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,u,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),u},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,u){var s=this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,u){var s=this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(n,r,u){return this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(n,r,u){return this._validate(n,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,u),r,u)},_add:function(n,r,u){if(this._validateLevel++,u==="d"||u==="w"){var s=n.toJD()+r*(u==="w"?this.daysInWeek():1),i=n.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var f=n.year()+(u==="y"?r:0),h=n.monthOfYear()+(u==="m"?r:0),i=n.day(),p=function(g){for(;h<g.minMonth;)f--,h+=g.monthsInYear(f);for(var A=g.monthsInYear(f);h>A-1+g.minMonth;)f++,h-=A,A=g.monthsInYear(f)};u==="y"?(n.month()!==this.fromMonthOfYear(f,h)&&(h=this.newDate(f,n.month(),this.minDay).monthOfYear()),h=Math.min(h,this.monthsInYear(f)),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,h)))):u==="m"&&(p(this),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,h))));var v=[f,this.fromMonthOfYear(f,h),i];return this._validateLevel--,v}catch(y){throw this._validateLevel--,y}},_correctAdd:function(n,r,u,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],f=u<0?-1:1;r=this._add(n,u*i[0]+f*i[1],i[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,u){this._validate(n,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var s=u==="y"?r:n.year(),i=u==="m"?r:n.month(),f=u==="d"?r:n.day();return(u==="y"||u==="m")&&(f=Math.min(f,this.daysInMonth(s,i))),n.date(s,i,f)},isValid:function(n,r,u){this._validateLevel++;var s=this.hasYearZero||n!==0;if(s){var i=this.newDate(n,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(i)&&u>=this.minDay&&u-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(n,r,u){var s=this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(n){return this.fromJD(a.instance().fromJSDate(n).toJD())},_validate:function(n,r,u,s){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,u))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(n,r,u);return this._validateLevel--,i}catch(f){throw this._validateLevel--,f}}});function o(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}o.prototype=new e,d(o.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),n=r.year()+(r.year()<0?1:0);return n%4==0&&(n%100!=0||n%400==0)},weekOfYear:function(n,r,u){var s=this.newDate(n,r,u);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var u=this._validate(n,r,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[u.month()-1]+(u.month()===2&&this.leapYear(u.year())?1:0)},weekDay:function(n,r,u){return(this.dayOfWeek(n,r,u)||7)<6},toJD:function(n,r,u){var s=this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate);n=s.year(),r=s.month(),u=s.day(),n<0&&n++,r<3&&(r+=12,n--);var i=Math.floor(n/100),f=2-i+Math.floor(i/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+u+f-1524.5},fromJD:function(n){var r=Math.floor(n+.5),u=Math.floor((r-186721625e-2)/36524.25);u=r+1+u-Math.floor(u/4);var s=u+1524,i=Math.floor((s-122.1)/365.25),f=Math.floor(365.25*i),h=Math.floor((s-f)/30.6001),p=s-f-Math.floor(h*30.6001),v=h-(h>13.5?13:1),y=i-(v>2.5?4716:4715);return y<=0&&y--,this.newDate(y,v,p)},toJSDate:function(n,r,u){var s=this._validate(n,r,u,a.local.invalidDate||a.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var a=B.exports=new l;a.cdate=b,a.baseCalendar=e,a.calendars.gregorian=o},{"object-assign":247}],347:[function(t,B,H){var d=t("object-assign"),l=t("./main");d(l.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),l.local=l.regionalOptions[""],d(l.cdate.prototype,{formatDate:function(b,w){return typeof b!="string"&&(w=b,b=""),this._calendar.formatDate(b||"",this,w)}}),d(l.baseCalendar.prototype,{UNIX_EPOCH:l.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:l.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,w,e){if(typeof b!="string"&&(e=w,w=b,b=""),!w)return"";if(w.calendar()!==this)throw l.local.invalidFormat||l.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat,e=e||{};var o=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,u=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(_,T){for(var x=1;M+x<b.length&&b.charAt(M+x)===_;)x++;return M+=x-1,Math.floor(x/(T||1))>1},i=function(_,T,x,c){var L=""+T;if(s(_,c))for(;L.length<x;)L="0"+L;return L},f=function(_,T,x,c){return s(_)?c[T]:x[T]},h=this,p=function(_){return typeof n=="function"?n.call(h,_,s("m")):g(i("m",_.month(),2))},v=function(_,T){return T?typeof u=="function"?u.call(h,_):u[_.month()-h.minMonth]:typeof r=="function"?r.call(h,_):r[_.month()-h.minMonth]},y=this.local.digits,g=function(_){return e.localNumbers&&y?y(_):_},A="",m=!1,M=0;M<b.length;M++)if(m)b.charAt(M)==="'"&&!s("'")?m=!1:A+=b.charAt(M);else switch(b.charAt(M)){case"d":A+=g(i("d",w.day(),2));break;case"D":A+=f("D",w.dayOfWeek(),o,a);break;case"o":A+=i("o",w.dayOfYear(),3);break;case"w":A+=i("w",w.weekOfYear(),2);break;case"m":A+=p(w);break;case"M":A+=v(w,s("M"));break;case"y":A+=s("y",2)?w.year():(w.year()%100<10?"0":"")+w.year()%100;break;case"Y":s("Y",2),A+=w.formatYear();break;case"J":A+=w.toJD();break;case"@":A+=(w.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(w.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?A+="'":m=!0;break;default:A+=b.charAt(M)}return A},parseDate:function(b,w,e){if(w==null)throw l.local.invalidArguments||l.regionalOptions[""].invalidArguments;if(w=typeof w=="object"?w.toString():w+"",w==="")return null;b=b||this.local.dateFormat,e=e||{};var o=e.shortYearCutoff||this.shortYearCutoff;o=typeof o!="string"?o:this.today().year()%100+parseInt(o,10);for(var a=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,u=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,f=-1,h=-1,p=-1,v=-1,y=-1,g=!1,A=!1,m=function(I,R){for(var D=1;k+D<b.length&&b.charAt(k+D)===I;)D++;return k+=D-1,Math.floor(D/(R||1))>1},M=function(I,R){var D=m(I,R),O=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+O+"}"),Y=w.substring(S).match(F);if(!Y)throw(l.local.missingNumberAt||l.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=Y[0].length,parseInt(Y[0],10)},_=this,T=function(){if(typeof u=="function"){m("m");var I=u.call(_,w.substring(S));return S+=I.length,I}return M("m")},x=function(I,R,D,O){for(var F=m(I,O)?D:R,Y=0;Y<F.length;Y++)if(w.substr(S,F[Y].length).toLowerCase()===F[Y].toLowerCase())return S+=F[Y].length,Y+_.minMonth;throw(l.local.unknownNameAt||l.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},c=function(){if(typeof i=="function"){var I=m("M")?i.call(_,w.substring(S)):s.call(_,w.substring(S));return S+=I.length,I}return x("M",s,i)},L=function(){if(w.charAt(S)!==b.charAt(k))throw(l.local.unexpectedLiteralAt||l.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<b.length;k++)if(A)b.charAt(k)==="'"&&!m("'")?A=!1:L();else switch(b.charAt(k)){case"d":v=M("d");break;case"D":x("D",a,n);break;case"o":y=M("o");break;case"w":M("w");break;case"m":p=T();break;case"M":p=c();break;case"y":var P=k;g=!m("y",2),k=P,h=M("y",2);break;case"Y":h=M("Y",2);break;case"J":f=M("J")+.5,w.charAt(S)==="."&&(S++,M("J"));break;case"@":f=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=w.length;break;case"'":m("'")?L():A=!0;break;default:L()}if(S<w.length)throw l.local.unexpectedText||l.regionalOptions[""].unexpectedText;if(h===-1?h=this.today().year():h<100&&g&&(h+=o===-1?1900:this.today().year()-this.today().year()%100-(h<=o?0:100)),typeof p=="string"&&(p=r.call(this,h,p)),y>-1){p=1,v=y;for(var z=this.daysInMonth(h,p);v>z;z=this.daysInMonth(h,p))p++,v-=z}return f>-1?this.fromJD(f):this.newDate(h,p,v)},determineDate:function(b,w,e,o,a){e&&typeof e!="object"&&(a=o,o=e,e=null),typeof o!="string"&&(a=o,o="");var n=this,r=function(u){try{return n.parseDate(o,u,a)}catch{}u=u.toLowerCase();for(var s=(u.match(/^c/)&&e?e.newDate():null)||n.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=i.exec(u);f;)s.add(parseInt(f[1],10),f[2]||"d"),f=i.exec(u);return s};return w=w?w.newDate():null,b=b==null?w:typeof b=="string"?r(b):typeof b=="number"?isNaN(b)||b===1/0||b===-1/0?w:n.today().add(b,"d"):n.newDate(b),b}})},{"./main":346,"object-assign":247}],348:[function(t,B,H){B.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(t,B,H){var d=t("./arrow_paths"),l=t("../../plots/font_attributes"),b=t("../../plots/cartesian/constants"),w=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=w("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:l({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:l({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("./draw").draw;B.exports=function(a){var n=a._fullLayout,r=d.filterVisible(n.annotations);if(r.length&&a._fullData.length)return d.syncOrAsync([b,w],a)};function w(o){var a=o._fullLayout;d.filterVisible(a.annotations).forEach(function(n){var r=l.getFromId(o,n.xref),u=l.getFromId(o,n.yref),s=l.getRefType(n.xref),i=l.getRefType(n.yref);n._extremes={},s==="range"&&e(n,r),i==="range"&&e(n,u)})}function e(o,a){var n=a._id,r=n.charAt(0),u=o[r],s=o["a"+r],i=o[r+"ref"],f=o["a"+r+"ref"],h=o["_"+r+"padplus"],p=o["_"+r+"padminus"],v={x:1,y:-1}[r]*o[r+"shift"],y=3*o.arrowsize*o.arrowwidth||0,g=y+v,A=y-v,m=3*o.startarrowsize*o.arrowwidth||0,M=m+v,_=m-v,T;if(f===i){var x=l.findExtremes(a,[a.r2c(u)],{ppadplus:g,ppadminus:A}),c=l.findExtremes(a,[a.r2c(s)],{ppadplus:Math.max(h,M),ppadminus:Math.max(p,_)});T={min:[x.min[0],c.min[0]],max:[x.max[0],c.max[0]]}}else M=s?M+s:M,_=s?_-s:_,T=l.findExtremes(a,[a.r2c(u)],{ppadplus:Math.max(h,g,M),ppadminus:Math.max(p,A,_)});o._extremes[n]=T}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("../../plot_api/plot_template").arrayEditor;B.exports={hasClickToShow:w,onClick:e};function w(n,r){var u=o(n,r);return u.on.length>0||u.explicitOff.length>0}function e(n,r){var u=o(n,r),s=u.on,i=u.off.concat(u.explicitOff),f={},h=n._fullLayout.annotations,p,v;if(!!(s.length||i.length)){for(p=0;p<s.length;p++)v=b(n.layout,"annotations",h[s[p]]),v.modifyItem("visible",!0),d.extendFlat(f,v.getUpdateObj());for(p=0;p<i.length;p++)v=b(n.layout,"annotations",h[i[p]]),v.modifyItem("visible",!1),d.extendFlat(f,v.getUpdateObj());return l.call("update",n,{},f)}}function o(n,r){var u=n._fullLayout.annotations,s=[],i=[],f=[],h=(r||[]).length,p,v,y,g,A,m,M,_;for(p=0;p<u.length;p++)if(y=u[p],g=y.clicktoshow,g){for(v=0;v<h;v++)if(A=r[v],m=A.xaxis,M=A.yaxis,m._id===y.xref&&M._id===y.yref&&m.d2r(A.x)===a(y._xclick,m)&&M.d2r(A.y)===a(y._yclick,M)){y.visible?g==="onout"?_=i:_=f:_=s,_.push(p);break}v===h&&y.visible&&g==="onout"&&i.push(p)}return{on:s,off:i,explicitOff:f}}function a(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(t,B,H){var d=t("../../lib"),l=t("../color");B.exports=function(w,e,o,a){a("opacity");var n=a("bgcolor"),r=a("bordercolor"),u=l.opacity(r);a("borderpad");var s=a("borderwidth"),i=a("showarrow");a("text",i?" ":o._dfltTitle.annotation),a("textangle"),d.coerceFont(a,"font",o.font),a("width"),a("align");var f=a("height");if(f&&a("valign"),i){var h=a("arrowside"),p,v;h.indexOf("end")!==-1&&(p=a("arrowhead"),v=a("arrowsize")),h.indexOf("start")!==-1&&(a("startarrowhead",p),a("startarrowsize",v)),a("arrowcolor",u?e.bordercolor:l.defaultLine),a("arrowwidth",(u&&s||1)*2),a("standoff"),a("startstandoff")}var y=a("hovertext"),g=o.hoverlabel||{};if(y){var A=a("hoverlabel.bgcolor",g.bgcolor||(l.opacity(n)?l.rgb(n):l.defaultLine)),m=a("hoverlabel.bordercolor",g.bordercolor||l.contrast(A));d.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||m})}a("captureevents",!!y)}},{"../../lib":503,"../color":366}],353:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib/to_log_range");B.exports=function(w,e,o,a){e=e||{};var n=o==="log"&&e.type==="linear",r=o==="linear"&&e.type==="log";if(!(n||r))return;var u=w._fullLayout.annotations,s=e._id.charAt(0),i,f;function h(v){var y=i[v],g=null;n?g=l(y,e.range):g=Math.pow(10,y),d(g)||(g=null),a(f+v,g)}for(var p=0;p<u.length;p++)i=u[p],f="annotations["+p+"].",i[s+"ref"]===e._id&&h(s),i["a"+s+"ref"]===e._id&&h("a"+s)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./common_defaults"),e=t("./attributes");B.exports=function(n,r){b(n,r,{name:"annotations",handleItemDefaults:o})};function o(a,n,r){function u(L,S){return d.coerce(a,n,e,L,S)}var s=u("visible"),i=u("clicktoshow");if(!!(s||i)){w(a,n,r,u);for(var f=n.showarrow,h=["x","y"],p=[-10,-30],v={_fullLayout:r},y=0;y<2;y++){var g=h[y],A=l.coerceRef(a,n,v,g,"","paper");if(A!=="paper"){var m=l.getFromId(v,A);m._annIndices.push(n._index)}if(l.coercePosition(n,v,u,A,g,.5),f){var M="a"+g,_=l.coerceRef(a,n,v,M,"pixel",["pixel","paper"]);_!=="pixel"&&_!==A&&(_=n[M]="pixel");var T=_==="pixel"?p[y]:.4;l.coercePosition(n,v,u,_,M,T)}u(g+"anchor"),u(g+"shift")}if(d.noneOrAll(a,n,["x","y"]),f&&d.noneOrAll(a,n,["ax","ay"]),i){var x=u("xclick"),c=u("yclick");n._xclick=x===void 0?n.x:l.cleanPosition(x,v,n.xref),n._yclick=c===void 0?n.y:l.cleanPosition(c,v,n.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../../lib"),e=w.strTranslate,o=t("../../plots/cartesian/axes"),a=t("../color"),n=t("../drawing"),r=t("../fx"),u=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),i=t("../dragelement"),f=t("../../plot_api/plot_template").arrayEditor,h=t("./draw_arrow_head");B.exports={draw:p,drawOne:v,drawRaw:g};function p(A){var m=A._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var M=0;M<m.annotations.length;M++)m.annotations[M].visible&&v(A,M);return b.previousPromises(A)}function v(A,m){var M=A._fullLayout,_=M.annotations[m]||{},T=o.getFromId(A,_.xref),x=o.getFromId(A,_.yref);T&&T.setScale(),x&&x.setScale(),g(A,_,m,!1,T,x)}function y(A,m,M,_,T){var x=T[M],c=T[M+"ref"],L=M.indexOf("y")!==-1,S=o.getRefType(c)==="domain",k=L?_.h:_.w;return A?S?x+(L?-m:m)/A._length:A.p2r(A.r2p(x)+m):x+(L?-m:m)/k}function g(A,m,M,_,T,x){var c=A._fullLayout,L=A._fullLayout._size,S=A._context.edits,k,P;_?(k="annotation-"+_,P=_+".annotations"):(k="annotation",P="annotations");var z=f(A.layout,P,m),I=z.modifyBase,R=z.modifyItem,D=z.getUpdateObj;c._infolayer.selectAll("."+k+'[data-index="'+M+'"]').remove();var O="clip"+c._uid+"_ann"+M;if(!m._input||m.visible===!1){d.selectAll("#"+O).remove();return}var F={x:{},y:{}},Y=+m.textangle||0,X=c._infolayer.append("g").classed(k,!0).attr("data-index",String(M)).style("opacity",m.opacity),q=X.append("g").classed("annotation-text-g",!0),$=S[m.showarrow?"annotationTail":"annotationPosition"],V=m.captureevents||S.annotationText||$;function K(fe){var me={index:M,annotation:m._input,fullAnnotation:m,event:fe};return _&&(me.subplotId=_),me}var se=q.append("g").style("pointer-events",V?"all":null).call(s,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",K(d.event))});m.hovertext&&se.on("mouseover",function(){var fe=m.hoverlabel,me=fe.font,ce=this.getBoundingClientRect(),ye=A.getBoundingClientRect();r.loneHover({x0:ce.left-ye.left,x1:ce.right-ye.left,y:(ce.top+ce.bottom)/2-ye.top,text:m.hovertext,color:fe.bgcolor,borderColor:fe.bordercolor,fontFamily:me.family,fontSize:me.size,fontColor:me.color},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:A})}).on("mouseout",function(){r.loneUnhover(c._hoverlayer.node())});var ue=m.borderwidth,oe=m.borderpad,U=ue+oe,G=se.append("rect").attr("class","bg").style("stroke-width",ue+"px").call(a.stroke,m.bordercolor).call(a.fill,m.bgcolor),re=m.width||m.height,ee=c._topclips.selectAll("#"+O).data(re?[0]:[]);ee.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),ee.exit().remove();var j=m.font,Q=c._meta?w.templateString(m.text,c._meta):m.text,ne=se.append("text").classed("annotation-text",!0).text(Q);function ae(fe){return fe.call(n.font,j).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),u.convertToTspans(fe,A,ie),fe}function ie(){var fe=ne.selectAll("a");if(fe.size()===1&&fe.text()===ne.text()){var me=se.insert("a",":first-child").attr({"xlink:xlink:href":fe.attr("xlink:href"),"xlink:xlink:show":fe.attr("xlink:show")}).style({cursor:"pointer"});me.node().appendChild(G.node())}var ce=se.select(".annotation-text-math-group"),ye=!ce.empty(),xe=n.bBox((ye?ce:ne).node()),ke=xe.width,Ae=xe.height,Oe=m.width||ke,He=m.height||Ae,Ge=Math.round(Oe+2*U),_e=Math.round(He+2*U);function Ie(Lr,kr){return kr==="auto"&&(Lr<1/3?kr="left":Lr>2/3?kr="right":kr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[kr]}for(var Ye=!1,qe=["x","y"],Ue=0;Ue<qe.length;Ue++){var Re=qe[Ue],Ve=m[Re+"ref"]||Re,dt=m["a"+Re+"ref"],Dt={x:T,y:x}[Re],Gt=(Y+(Re==="x"?0:-90))*Math.PI/180,kt=Ge*Math.cos(Gt),zt=_e*Math.sin(Gt),Bt=Math.abs(kt)+Math.abs(zt),Lt=m[Re+"anchor"],Mt=m[Re+"shift"]*(Re==="x"?1:-1),it=F[Re],ht,Qe,Ce,je,rt,ut=o.getRefType(Ve);if(Dt&&ut!=="domain"){var Pt=Dt.r2fraction(m[Re]);(Pt<0||Pt>1)&&(dt===Ve?(Pt=Dt.r2fraction(m["a"+Re]),(Pt<0||Pt>1)&&(Ye=!0)):Ye=!0),ht=Dt._offset+Dt.r2p(m[Re]),je=.5}else{var St=ut==="domain";Re==="x"?(Ce=m[Re],ht=St?Dt._offset+Dt._length*Ce:ht=L.l+L.w*Ce):(Ce=1-m[Re],ht=St?Dt._offset+Dt._length*Ce:ht=L.t+L.h*Ce),je=m.showarrow?.5:Ce}if(m.showarrow){it.head=ht;var Nt=m["a"+Re];if(rt=kt*Ie(.5,m.xanchor)-zt*Ie(.5,m.yanchor),dt===Ve){var Xt=o.getRefType(dt);Xt==="domain"?(Re==="y"&&(Nt=1-Nt),it.tail=Dt._offset+Dt._length*Nt):Xt==="paper"?Re==="y"?(Nt=1-Nt,it.tail=L.t+L.h*Nt):it.tail=L.l+L.w*Nt:it.tail=Dt._offset+Dt.r2p(Nt),Qe=rt}else it.tail=ht+Nt,Qe=rt+Nt;it.text=it.tail+rt;var Ot=c[Re==="x"?"width":"height"];if(Ve==="paper"&&(it.head=w.constrain(it.head,1,Ot-1)),dt==="pixel"){var Kt=-Math.max(it.tail-3,it.text),Je=Math.min(it.tail+3,it.text)-Ot;Kt>0?(it.tail+=Kt,it.text+=Kt):Je>0&&(it.tail-=Je,it.text-=Je)}it.tail+=Mt,it.head+=Mt}else rt=Bt*Ie(je,Lt),Qe=rt,it.text=ht+rt;it.text+=Mt,rt+=Mt,Qe+=Mt,m["_"+Re+"padplus"]=Bt/2+Qe,m["_"+Re+"padminus"]=Bt/2-Qe,m["_"+Re+"size"]=Bt,m["_"+Re+"shift"]=rt}if(Ye){se.remove();return}var gt=0,Et=0;if(m.align!=="left"&&(gt=(Oe-ke)*(m.align==="center"?.5:1)),m.valign!=="top"&&(Et=(He-Ae)*(m.valign==="middle"?.5:1)),ye)ce.select("svg").attr({x:U+gt-1,y:U+Et}).call(n.setClipUrl,re?O:null,A);else{var rr=U+Et-xe.top,vr=U+gt-xe.left;ne.call(u.positionText,vr,rr).call(n.setClipUrl,re?O:null,A)}ee.select("rect").call(n.setRect,U,U,Oe,He),G.call(n.setRect,ue/2,ue/2,Ge-ue,_e-ue),se.call(n.setTranslate,Math.round(F.x.text-Ge/2),Math.round(F.y.text-_e/2)),q.attr({transform:"rotate("+Y+","+F.x.text+","+F.y.text+")"});var or=function(Lr,kr){X.selectAll(".annotation-arrow-g").remove();var tr=F.x.head,Or=F.y.head,et=F.x.tail+Lr,we=F.y.tail+kr,Se=F.x.text+Lr,De=F.y.text+kr,Xe=w.rotationXYMatrix(Y,Se,De),$e=w.apply2DTransform(Xe),ot=w.apply2DTransform2(Xe),st=+G.attr("width"),pt=+G.attr("height"),wt=Se-.5*st,Yt=wt+st,mr=De-.5*pt,xr=mr+pt,Tr=[[wt,mr,wt,xr],[wt,xr,Yt,xr],[Yt,xr,Yt,mr],[Yt,mr,wt,mr]].map(ot);if(!Tr.reduce(function(at,Ft){return at^!!w.segmentsIntersect(tr,Or,tr+1e6,Or+1e6,Ft[0],Ft[1],Ft[2],Ft[3])},!1)){Tr.forEach(function(at){var Ft=w.segmentsIntersect(et,we,tr,Or,at[0],at[1],at[2],at[3]);Ft&&(et=Ft.x,we=Ft.y)});var yr=m.arrowwidth,Dr=m.arrowcolor,tn=m.arrowside,wr=X.append("g").style({opacity:a.opacity(Dr)}).classed("annotation-arrow-g",!0),gr=wr.append("path").attr("d","M"+et+","+we+"L"+tr+","+Or).style("stroke-width",yr+"px").call(a.stroke,a.rgb(Dr));if(h(gr,tn,m),S.annotationPosition&&gr.node().parentNode&&!_){var yn=tr,Gr=Or;if(m.standoff){var Ar=Math.sqrt(Math.pow(tr-et,2)+Math.pow(Or-we,2));yn+=m.standoff*(et-tr)/Ar,Gr+=m.standoff*(we-Or)/Ar}var nn=wr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(et-yn)+","+(we-Gr),transform:e(yn,Gr)}).style("stroke-width",yr+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),fn,Xr;i.init({element:nn.node(),gd:A,prepFn:function(){var at=n.getTranslate(se);fn=at.x,Xr=at.y,T&&T.autorange&&I(T._name+".autorange",!0),x&&x.autorange&&I(x._name+".autorange",!0)},moveFn:function(at,Ft){var er=$e(fn,Xr),hr=er[0]+at,Yr=er[1]+Ft;se.call(n.setTranslate,hr,Yr),R("x",y(T,at,"x",L,m)),R("y",y(x,Ft,"y",L,m)),m.axref===m.xref&&R("ax",y(T,at,"ax",L,m)),m.ayref===m.yref&&R("ay",y(x,Ft,"ay",L,m)),wr.attr("transform",e(at,Ft)),q.attr({transform:"rotate("+Y+","+hr+","+Yr+")"})},doneFn:function(){l.call("_guiRelayout",A,D());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(m.showarrow&&or(0,0),$){var dr;i.init({element:se.node(),gd:A,prepFn:function(){dr=q.attr("transform")},moveFn:function(Lr,kr){var tr="pointer";if(m.showarrow)m.axref===m.xref?R("ax",y(T,Lr,"ax",L,m)):R("ax",m.ax+Lr),m.ayref===m.yref?R("ay",y(x,kr,"ay",L.w,m)):R("ay",m.ay+kr),or(Lr,kr);else{if(_)return;var Or,et;if(T)Or=y(T,Lr,"x",L,m);else{var we=m._xsize/L.w,Se=m.x+(m._xshift-m.xshift)/L.w-we/2;Or=i.align(Se+Lr/L.w,we,0,1,m.xanchor)}if(x)et=y(x,kr,"y",L,m);else{var De=m._ysize/L.h,Xe=m.y-(m._yshift+m.yshift)/L.h-De/2;et=i.align(Xe-kr/L.h,De,0,1,m.yanchor)}R("x",Or),R("y",et),(!T||!x)&&(tr=i.getCursor(T?.5:Or,x?.5:et,m.xanchor,m.yanchor))}q.attr({transform:e(Lr,kr)+dr}),s(se,tr)},clickFn:function(Lr,kr){m.captureevents&&A.emit("plotly_clickannotation",K(kr))},doneFn:function(){s(se),l.call("_guiRelayout",A,D());var Lr=document.querySelector(".js-notes-box-panel");Lr&&Lr.redraw(Lr.selectedObj)}})}}S.annotationText?ne.call(u.makeEditable,{delegate:se,gd:A}).call(ae).on("edit",function(fe){m.text=fe,this.call(ae),R("text",fe),T&&T.autorange&&I(T._name+".autorange",!0),x&&x.autorange&&I(x._name+".autorange",!0),l.call("_guiRelayout",A,D())}):ne.call(ae)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(t,B,H){var d=t("@plotly/d3"),l=t("../color"),b=t("./arrow_paths"),w=t("../../lib"),e=w.strScale,o=w.strRotate,a=w.strTranslate;B.exports=function(r,u,s){var i=r.node(),f=b[s.arrowhead||0],h=b[s.startarrowhead||0],p=(s.arrowwidth||1)*(s.arrowsize||1),v=(s.arrowwidth||1)*(s.startarrowsize||1),y=u.indexOf("start")>=0,g=u.indexOf("end")>=0,A=f.backoff*p+s.standoff,m=h.backoff*v+s.startstandoff,M,_,T,x;if(i.nodeName==="line"){M={x:+r.attr("x1"),y:+r.attr("y1")},_={x:+r.attr("x2"),y:+r.attr("y2")};var c=M.x-_.x,L=M.y-_.y;if(T=Math.atan2(L,c),x=T+Math.PI,A&&m&&A+m>Math.sqrt(c*c+L*L)){q();return}if(A){if(A*A>c*c+L*L){q();return}var S=A*Math.cos(T),k=A*Math.sin(T);_.x+=S,_.y+=k,r.attr({x2:_.x,y2:_.y})}if(m){if(m*m>c*c+L*L){q();return}var P=m*Math.cos(T),z=m*Math.sin(T);M.x-=P,M.y-=z,r.attr({x1:M.x,y1:M.y})}}else if(i.nodeName==="path"){var I=i.getTotalLength(),R="";if(I<A+m){q();return}var D=i.getPointAtLength(0),O=i.getPointAtLength(.1);T=Math.atan2(D.y-O.y,D.x-O.x),M=i.getPointAtLength(Math.min(m,I)),R="0px,"+m+"px,";var F=i.getPointAtLength(I),Y=i.getPointAtLength(I-.1);x=Math.atan2(F.y-Y.y,F.x-Y.x),_=i.getPointAtLength(Math.max(0,I-A));var X=R?m+A:A;R+=I-X+"px,"+I+"px",r.style("stroke-dasharray",R)}function q(){r.style("stroke-dasharray","0px,100px")}function $(V,K,se,ue){!V.path||(V.noRotate&&(se=0),d.select(i.parentNode).append("path").attr({class:r.attr("class"),d:V.path,transform:a(K.x,K.y)+o(se*180/Math.PI)+e(ue)}).style({fill:l.rgb(s.arrowcolor),"stroke-width":0}))}y&&$(h,M,T,v),g&&$(f,_,x,p)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(t,B,H){var d=t("./draw"),l=t("./click");B.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:l.hasClickToShow,onClick:l.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(t,B,H){var d=t("../annotations/attributes"),l=t("../../plot_api/edit_types").overrideAll,b=t("../../plot_api/plot_template").templatedArray;B.exports=l(b("annotation",{visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes");B.exports=function(e){for(var o=e.fullSceneLayout,a=o.annotations,n=0;n<a.length;n++)b(a[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function b(w,e){var o=e.fullSceneLayout,a=o.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};w._xa={},d.extendFlat(w._xa,r),l.setConvert(w._xa),w._xa._offset=n.l+a.x[0]*n.w,w._xa.l2p=function(){return .5*(1+w._pdata[0]/w._pdata[3])*n.w*(a.x[1]-a.x[0])},w._ya={},d.extendFlat(w._ya,r),l.setConvert(w._ya),w._ya._offset=n.t+(1-a.y[1])*n.h,w._ya.l2p=function(){return .5*(1-w._pdata[1]/w._pdata[3])*n.h*(a.y[1]-a.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("../annotations/common_defaults"),e=t("./attributes");B.exports=function(n,r,u){b(n,r,{name:"annotations",handleItemDefaults:o,fullLayout:u.fullLayout})};function o(a,n,r,u){function s(h,p){return d.coerce(a,n,e,h,p)}function i(h){var p=h+"axis",v={_fullLayout:{}};return v._fullLayout[p]=r[p],l.coercePosition(n,v,s,h,h,.5)}var f=s("visible");!f||(w(a,n,u.fullLayout,s),i("x"),i("y"),i("z"),d.noneOrAll(a,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",s("ax",-10),s("ay",-30),d.noneOrAll(a,n,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(t,B,H){var d=t("../annotations/draw").drawRaw,l=t("../../plots/gl3d/project"),b=["x","y","z"];B.exports=function(e){for(var o=e.fullSceneLayout,a=e.dataScale,n=o.annotations,r=0;r<n.length;r++){for(var u=n[r],s=!1,i=0;i<3;i++){var f=b[i],h=u[f],p=o[f+"axis"],v=p.r2fraction(h);if(v<0||v>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(u._pdata=l(e.glplot.cameraParams,[o.xaxis.r2l(u.x)*a[0],o.yaxis.r2l(u.y)*a[1],o.zaxis.r2l(u.z)*a[2]]),d(e.graphDiv,u,r,e.id,u._xa,u._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:b,convert:t("./convert"),draw:t("./draw")};function b(w,e){var o=d.subplotsRegistry.gl3d;if(!!o)for(var a=o.attrRegex,n=Object.keys(w),r=0;r<n.length;r++){var u=n[r];a.test(u)&&(w[u].annotations||[]).length&&(l.pushUnique(e._basePlotModules,o),l.pushUnique(e._subplots.gl3d,u))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(t,B,H){B.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(t,B,H){var d=t("./calendars"),l=t("../../lib"),b=t("../../constants/numerical"),w=b.EPOCHJD,e=b.ONEDAY,o={valType:"enumerated",values:l.sortObjectKeys(d.calendars),editType:"calc",dflt:"gregorian"},a=function(T,x,c,L){var S={};return S[c]=o,l.coerce(T,x,S,c,L)},n=function(T,x,c,L){for(var S=0;S<c.length;S++)a(T,x,c[S]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},u={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},i="##",f={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:i,w:i,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function h(T,x,c){for(var L=Math.floor((x+.05)/e)+w,S=v(c).fromJD(L),k=0,P,z,I,R,D;(k=T.indexOf("%",k))!==-1;)P=T.charAt(k+1),P==="0"||P==="-"||P==="_"?(I=3,z=T.charAt(k+2),P==="_"&&(P="-")):(z=P,P="0",I=2),R=f[z],R?(R===i?D=i:D=S.formatDate(R[P]),T=T.substr(0,k)+D+T.substr(k+I),k+=D.length):k+=I;return T}var p={};function v(T){var x=p[T];return x||(x=p[T]=d.instance(T),x)}function y(T){return l.extendFlat({},o,{description:T})}function g(T){return"Sets the calendar system to use with `"+T+"` date data."}var A={xcalendar:y(g("x"))},m=l.extendFlat({},A,{ycalendar:y(g("y"))}),M=l.extendFlat({},m,{zcalendar:y(g("z"))}),_=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));B.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:M,surface:M,mesh3d:M,scattergl:m,ohlc:A,candlestick:A},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:n,CANONICAL_SUNDAY:u,CANONICAL_TICK:r,DFLTRANGE:s,getCal:v,worldCalFmt:h}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(t,B,H){H.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],H.defaultLine="#444",H.lightLine="#eee",H.background="#fff",H.borderLine="#BEC8D9",H.lightFraction=100*(14-4)/(15-4)},{}],366:[function(t,B,H){var d=t("tinycolor2"),l=t("fast-isnumeric"),b=t("../../lib/array").isTypedArray,w=B.exports={},e=t("./attributes");w.defaults=e.defaults;var o=w.defaultLine=e.defaultLine;w.lightLine=e.lightLine;var a=w.background=e.background;w.tinyRGB=function(r){var u=r.toRgb();return"rgb("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+")"},w.rgb=function(r){return w.tinyRGB(d(r))},w.opacity=function(r){return r?d(r).getAlpha():0},w.addOpacity=function(r,u){var s=d(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+u+")"},w.combine=function(r,u){var s=d(r).toRgb();if(s.a===1)return d(r).toRgbString();var i=d(u||a).toRgb(),f=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},h={r:f.r*(1-s.a)+s.r*s.a,g:f.g*(1-s.a)+s.g*s.a,b:f.b*(1-s.a)+s.b*s.a};return d(h).toRgbString()},w.contrast=function(r,u,s){var i=d(r);i.getAlpha()!==1&&(i=d(w.combine(r,a)));var f=i.isDark()?u?i.lighten(u):a:s?i.darken(s):o;return f.toString()},w.stroke=function(r,u){var s=d(u);r.style({stroke:w.tinyRGB(s),"stroke-opacity":s.getAlpha()})},w.fill=function(r,u){var s=d(u);r.style({fill:w.tinyRGB(s),"fill-opacity":s.getAlpha()})},w.clean=function(r){if(!(!r||typeof r!="object")){var u=Object.keys(r),s,i,f,h;for(s=0;s<u.length;s++)if(f=u[s],h=r[f],f.substr(f.length-5)==="color")if(Array.isArray(h))for(i=0;i<h.length;i++)h[i]=n(h[i]);else r[f]=n(h);else if(f.substr(f.length-10)==="colorscale"&&Array.isArray(h))for(i=0;i<h.length;i++)Array.isArray(h[i])&&(h[i][1]=n(h[i][1]));else if(Array.isArray(h)){var p=h[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(i=0;i<h.length;i++)w.clean(h[i])}else h&&typeof h=="object"&&!b(h)&&w.clean(h)}};function n(r){if(l(r)||typeof r!="string")return r;var u=r.trim();if(u.substr(0,3)!=="rgb")return r;var s=u.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var i=s[1].trim().split(/\s*[\s,]\s*/),f=u.charAt(3)==="a"&&i.length===4;if(!f&&i.length!==3)return r;for(var h=0;h<i.length;h++){if(!i[h].length||(i[h]=Number(i[h]),!(i[h]>=0)))return r;if(h===3)i[h]>1&&(i[h]=1);else if(i[h]>=1)return r}var p=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return f?"rgba("+p+", "+i[3]+")":"rgb("+p+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(t,B,H){var d=t("../../plots/cartesian/layout_attributes"),l=t("../../plots/font_attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll;B.exports=w({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:b({},d.ticks,{dflt:""}),ticklabeloverflow:b({},d.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:l({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,title:{text:{valType:"string"},font:l({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:l({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(t,B,H){B.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("../../plots/cartesian/tick_value_defaults"),w=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),o=t("../../plots/cartesian/prefix_suffix_defaults"),a=t("./attributes");B.exports=function(r,u,s){var i=l.newContainer(u,"colorbar"),f=r.colorbar||{};function h(S,k){return d.coerce(f,i,a,S,k)}var p=s.margin||{t:0,b:0,l:0,r:0},v=s.width-p.l-p.r,y=s.height-p.t-p.b,g=h("orientation"),A=g==="v",m=h("thicknessmode");h("thickness",m==="fraction"?30/(A?v:y):30);var M=h("lenmode");h("len",M==="fraction"?1:A?y:v),h("x",A?1.02:.5),h("xanchor",A?"left":"center"),h("xpad"),h("y",A?.5:1.02),h("yanchor",A?"middle":"bottom"),h("ypad"),d.noneOrAll(f,i,["x","y"]),h("outlinecolor"),h("outlinewidth"),h("bordercolor"),h("borderwidth"),h("bgcolor");var _=d.coerce(f,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");h("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),b(f,i,h,"linear");var T=s.font,x={outerTicks:!1,font:T};_.indexOf("inside")!==-1&&(x.bgColor="black"),o(f,i,h,"linear",x),e(f,i,h,"linear",x),w(f,i,h,"linear",x),h("title.text",s._dfltTitle.colorbar);var c=i.tickfont,L=d.extendFlat({},c,{color:T.color,size:d.bigFont(c.size)});d.coerceFont(h,"title.font",L),h("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../plots/cartesian/axes"),o=t("../dragelement"),a=t("../../lib"),n=a.strTranslate,r=t("../../lib/extend").extendFlat,u=t("../../lib/setcursor"),s=t("../drawing"),i=t("../color"),f=t("../titles"),h=t("../../lib/svg_text_utils"),p=t("../colorscale/helpers").flipScale,v=t("../../plots/cartesian/axis_defaults"),y=t("../../plots/cartesian/position_defaults"),g=t("../../plots/cartesian/layout_attributes"),A=t("../../constants/alignment"),m=A.LINE_SPACING,M=A.FROM_TL,_=A.FROM_BR,T=t("./constants").cn;function x(z){var I=z._fullLayout,R=I._infolayer.selectAll("g."+T.colorbar).data(c(z),function(D){return D._id});R.enter().append("g").attr("class",function(D){return D._id}).classed(T.colorbar,!0),R.each(function(D){var O=d.select(this);a.ensureSingle(O,"rect",T.cbbg),a.ensureSingle(O,"g",T.cbfills),a.ensureSingle(O,"g",T.cblines),a.ensureSingle(O,"g",T.cbaxis,function(Y){Y.classed(T.crisp,!0)}),a.ensureSingle(O,"g",T.cbtitleunshift,function(Y){Y.append("g").classed(T.cbtitle,!0)}),a.ensureSingle(O,"rect",T.cboutline);var F=L(O,D,z);F&&F.then&&(z._promises||[]).push(F),z._context.edits.colorbarPosition&&S(O,D,z)}),R.exit().each(function(D){b.autoMargin(z,D._id)}).remove(),R.order()}function c(z){var I=z._fullLayout,R=z.calcdata,D=[],O,F,Y,X;function q(j){return r(j,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function $(){typeof X.calc=="function"?X.calc(z,Y,O):(O._fillgradient=F.reversescale?p(F.colorscale):F.colorscale,O._zrange=[F[X.min],F[X.max]])}for(var V=0;V<R.length;V++){var K=R[V];Y=K[0].trace;var se=Y._module.colorbar;if(Y.visible===!0&&se)for(var ue=Array.isArray(se),oe=ue?se:[se],U=0;U<oe.length;U++){X=oe[U];var G=X.container;F=G?Y[G]:Y,F&&F.showscale&&(O=q(F.colorbar),O._id="cb"+Y.uid+(ue&&G?"-"+G:""),O._traceIndex=Y.index,O._propPrefix=(G?G+".":"")+"colorbar.",O._meta=Y._meta,$(),D.push(O))}}for(var re in I._colorAxes)if(F=I[re],F.showscale){var ee=I._colorAxes[re];O=q(F.colorbar),O._id="cb"+re,O._propPrefix=re+".colorbar.",O._meta=I._meta,X={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(Y=ee[1],X.calc=Y._module.colorbar.calc),$(),D.push(O)}return D}function L(z,I,R){var D=I.orientation==="v",O=I.len,F=I.lenmode,Y=I.thickness,X=I.thicknessmode,q=I.outlinewidth,$=I.borderwidth,V=I.bgcolor,K=I.xanchor,se=I.yanchor,ue=I.xpad,oe=I.ypad,U=I.x,G=D?I.y:1-I.y,re=R._fullLayout,ee=re._size,j=I._fillcolor,Q=I._line,ne=I.title,ae=ne.side,ie=I._zrange||d.extent((typeof j=="function"?j:Q.color).domain()),fe=typeof Q.color=="function"?Q.color:function(){return Q.color},me=typeof j=="function"?j:function(){return j},ce=I._levels,ye=k(R,I,ie),xe=ye.fill,ke=ye.line,Ae=Math.round(Y*(X==="fraction"?D?ee.w:ee.h:1)),Oe=Ae/(D?ee.w:ee.h),He=Math.round(O*(F==="fraction"?D?ee.h:ee.w:1)),Ge=He/(D?ee.h:ee.w),_e=Math.round(D?U*ee.w+ue:G*ee.h+oe),Ie={center:.5,right:1}[K]||0,Ye={top:1,middle:.5}[se]||0,qe=D?U-Ie*Oe:G-Ye*Oe,Ue=D?G-Ye*Ge:U-Ie*Ge,Re=Math.round(D?ee.h*(1-Ue):ee.w*Ue);I._lenFrac=Ge,I._thickFrac=Oe,I._uFrac=qe,I._vFrac=Ue;var Ve=I._axis=P(R,I,ie);Ve.position=Oe+(D?U+ue/ee.w:G+oe/ee.h);var dt=["top","bottom"].indexOf(ae)!==-1;if(D&&dt&&(Ve.title.side=ae,Ve.titlex=U+ue/ee.w,Ve.titley=Ue+(ne.side==="top"?Ge-oe/ee.h:oe/ee.h)),!D&&!dt&&(Ve.title.side=ae,Ve.titley=G+oe/ee.h,Ve.titlex=Ue+ue/ee.w),Q.color&&I.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=ce.start;var Dt=ce.size,Gt=a.constrain(He/50,4,15)+1,kt=(ie[1]-ie[0])/((I.nticks||Gt)*Dt);if(kt>1){var zt=Math.pow(10,Math.floor(Math.log(kt)/Math.LN10));Dt*=zt*a.roundUp(kt/zt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Dt}Ve.domain=D?[Ue+oe/ee.h,Ue+Ge-oe/ee.h]:[Ue+ue/ee.w,Ue+Ge-ue/ee.w],Ve.setScale(),z.attr("transform",n(Math.round(ee.l),Math.round(ee.t)));var Bt=z.select("."+T.cbtitleunshift).attr("transform",n(-Math.round(ee.l),-Math.round(ee.t))),Lt=Ve.ticklabelposition,Mt=Ve.title.font.size,it=z.select("."+T.cbaxis),ht,Qe=0,Ce=0;function je(Nt,Xt){var Ot={propContainer:Ve,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:re._dfltTitle.colorbar,containerGroup:z.select("."+T.cbtitle)},Kt=Nt.charAt(0)==="h"?Nt.substr(1):"h"+Nt;z.selectAll("."+Kt+",."+Kt+"-math-group").remove(),f.draw(R,Nt,r(Ot,Xt||{}))}function rt(){if(D&&dt||!D&&!dt){var Nt,Xt;ae==="top"&&(Nt=ue+ee.l+ee.w*U,Xt=oe+ee.t+ee.h*(1-Ue-Ge)+3+Mt*.75),ae==="bottom"&&(Nt=ue+ee.l+ee.w*U,Xt=oe+ee.t+ee.h*(1-Ue)-3-Mt*.25),ae==="right"&&(Xt=oe+ee.t+ee.h*G+3+Mt*.75,Nt=ue+ee.l+ee.w*Ue),je(Ve._id+"title",{attributes:{x:Nt,y:Xt,"text-anchor":D?"start":"middle"}})}}function ut(){if(D&&!dt||!D&&dt){var Nt=Ve.position||0,Xt=Ve._offset+Ve._length/2,Ot,Kt;if(ae==="right")Kt=Xt,Ot=ee.l+ee.w*Nt+10+Mt*(Ve.showticklabels?1:.5);else if(Ot=Xt,ae==="bottom"&&(Kt=ee.t+ee.h*Nt+10+(Lt.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&I.ticklen||0)),ae==="top"){var Je=ne.text.split("<br>").length;Kt=ee.t+ee.h*Nt+10-Ae-m*Mt*Je}je((D?"h":"v")+Ve._id+"title",{avoid:{selection:d.select(R).selectAll("g."+Ve._id+"tick"),side:ae,offsetTop:D?0:ee.t,offsetLeft:D?ee.l:0,maxShift:D?re.width:re.height},attributes:{x:Ot,y:Kt,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}}function Pt(){if(!D&&!dt||D&&dt){var Nt=z.select("."+T.cbtitle),Xt=Nt.select("text"),Ot=[-q/2,q/2],Kt=Nt.select(".h"+Ve._id+"title-math-group").node(),Je=15.6;Xt.node()&&(Je=parseInt(Xt.node().style.fontSize,10)*m);var gt;if(Kt?(gt=s.bBox(Kt),Ce=gt.width,Qe=gt.height,Qe>Je&&(Ot[1]-=(Qe-Je)/2)):Xt.node()&&!Xt.classed(T.jsPlaceholder)&&(gt=s.bBox(Xt.node()),Ce=gt.width,Qe=gt.height),D){if(Qe){if(Qe+=5,ae==="top")Ve.domain[1]-=Qe/ee.h,Ot[1]*=-1;else{Ve.domain[0]+=Qe/ee.h;var Et=h.lineCount(Xt);Ot[1]+=(1-Et)*Je}Nt.attr("transform",n(Ot[0],Ot[1])),Ve.setScale()}}else Ce&&(ae==="right"&&(Ve.domain[0]+=(Ce+Mt/2)/ee.w),Nt.attr("transform",n(Ot[0],Ot[1])),Ve.setScale())}z.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",D?n(0,Math.round(ee.h*(1-Ve.domain[1]))):n(Math.round(ee.w*Ve.domain[0]),0)),it.attr("transform",D?n(0,Math.round(-ee.t)):n(Math.round(-ee.l),0));var rr=z.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(xe);rr.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),rr.exit().remove();var vr=ie.map(Ve.c2p).map(Math.round).sort(function(tr,Or){return tr-Or});rr.each(function(tr,Or){var et=[Or===0?ie[0]:(xe[Or]+xe[Or-1])/2,Or===xe.length-1?ie[1]:(xe[Or]+xe[Or+1])/2].map(Ve.c2p).map(Math.round);D&&(et[1]=a.constrain(et[1]+(et[1]>et[0])?1:-1,vr[0],vr[1]));var we=d.select(this).attr(D?"x":"y",_e).attr(D?"y":"x",d.min(et)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(d.max(et)-d.min(et),2));if(I._fillgradient)s.gradient(we,R,I._id,D?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var Se=me(tr).replace("e-","");we.attr("fill",l(Se).toHexString())}});var or=z.select("."+T.cblines).selectAll("path."+T.cbline).data(Q.color&&Q.width?ke:[]);or.enter().append("path").classed(T.cbline,!0),or.exit().remove(),or.each(function(tr){var Or=_e,et=Math.round(Ve.c2p(tr))+Q.width/2%1;d.select(this).attr("d","M"+(D?Or+","+et:et+","+Or)+(D?"h":"v")+Ae).call(s.lineGroupStyle,Q.width,fe(tr),Q.dash)}),it.selectAll("g."+Ve._id+"tick,path").remove();var dr=_e+Ae+(q||0)/2-(I.ticks==="outside"?1:0),Lr=e.calcTicks(Ve),kr=e.getTickSigns(Ve)[2];return e.drawTicks(R,Ve,{vals:Ve.ticks==="inside"?e.clipEnds(Ve,Lr):Lr,layer:it,path:e.makeTickPath(Ve,dr,kr),transFn:e.makeTransTickFn(Ve)}),e.drawLabels(R,Ve,{vals:Lr,layer:it,transFn:e.makeTransTickLabelFn(Ve),labelFns:e.makeLabelFns(Ve,dr)})}function St(){var Nt,Xt=Ae+q/2;Lt.indexOf("inside")===-1&&(Nt=s.bBox(it.node()),Xt+=D?Nt.width:Nt.height),ht=Bt.select("text");var Ot=0,Kt=D&&ae==="top",Je=!D&&ae==="right",gt=0;if(ht.node()&&!ht.classed(T.jsPlaceholder)){var Et,rr=Bt.select(".h"+Ve._id+"title-math-group").node();rr&&(D&&dt||!D&&!dt)?(Nt=s.bBox(rr),Ot=Nt.width,Et=Nt.height):(Nt=s.bBox(Bt.node()),Ot=Nt.right-ee.l-(D?_e:Re),Et=Nt.bottom-ee.t-(D?Re:_e),!D&&ae==="top"&&(Xt+=Nt.height,gt=Nt.height)),Je&&(ht.attr("transform",n(Ot/2+Mt/2,0)),Ot*=2),Xt=Math.max(Xt,D?Ot:Et)}var vr=(D?ue:oe)*2+Xt+$+q/2,or=0;!D&&ne.text&&se==="bottom"&&G<=0&&(or=vr/2,vr+=or,gt+=or),re._hColorbarMoveTitle=or,re._hColorbarMoveCBTitle=gt;var dr=$+q;z.select("."+T.cbbg).attr("x",(D?_e:Re)-dr/2-(D?ue:0)).attr("y",(D?Re:_e)-(D?He:oe+gt-or)).attr(D?"width":"height",Math.max(vr-or,2)).attr(D?"height":"width",Math.max(He+dr,2)).call(i.fill,V).call(i.stroke,I.bordercolor).style("stroke-width",$);var Lr=Je?Math.max(Ot-10,0):0;if(z.selectAll("."+T.cboutline).attr("x",(D?_e:Re+ue)+Lr).attr("y",(D?Re+oe-He:_e)+(Kt?Qe:0)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(He-(D?2*oe+Qe:2*ue+Lr),2)).call(i.stroke,I.outlinecolor).style({fill:"none","stroke-width":q}),z.attr("transform",n(ee.l-(D?Ie*vr:0),ee.t-(D?0:(1-Ye)*vr-gt))),!D&&($||l(V).getAlpha()&&!l.equals(re.paper_bgcolor,V))){var kr=it.selectAll("text"),tr=kr[0].length,Or=z.select("."+T.cbbg).node(),et=s.bBox(Or),we=s.getTranslate(z),Se=2;kr.each(function(wt,Yt){var mr=0,xr=tr-1;if(Yt===mr||Yt===xr){var Tr=s.bBox(this),yr=s.getTranslate(this),Dr;if(Yt===xr){var tn=Tr.right+yr.x,wr=et.right+we.x+Re-$-Se+U;Dr=wr-tn,Dr>0&&(Dr=0)}else if(Yt===mr){var gr=Tr.left+yr.x,yn=et.left+we.x+Re+$+Se;Dr=yn-gr,Dr<0&&(Dr=0)}Dr&&(tr<3?this.setAttribute("transform","translate("+Dr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var De={},Xe=M[K],$e=_[K],ot=M[se],st=_[se],pt=vr-Ae;D?(F==="pixels"?(De.y=G,De.t=He*ot,De.b=He*st):(De.t=De.b=0,De.yt=G+O*ot,De.yb=G-O*st),X==="pixels"?(De.x=U,De.l=vr*Xe,De.r=vr*$e):(De.l=pt*Xe,De.r=pt*$e,De.xl=U-Y*Xe,De.xr=U+Y*$e)):(F==="pixels"?(De.x=U,De.l=He*Xe,De.r=He*$e):(De.l=De.r=0,De.xl=U+O*Xe,De.xr=U-O*$e),X==="pixels"?(De.y=1-G,De.t=vr*ot,De.b=vr*st):(De.t=pt*ot,De.b=pt*st,De.yt=G-Y*ot,De.yb=G+Y*st)),b.autoMargin(R,I._id,De)}return a.syncOrAsync([b.previousPromises,rt,Pt,ut,b.previousPromises,St],R)}function S(z,I,R){var D=I.orientation==="v",O=R._fullLayout,F=O._size,Y,X,q;o.init({element:z.node(),gd:R,prepFn:function(){Y=z.attr("transform"),u(z)},moveFn:function($,V){z.attr("transform",Y+n($,V)),X=o.align((D?I._uFrac:I._vFrac)+$/F.w,D?I._thickFrac:I._lenFrac,0,1,I.xanchor),q=o.align((D?I._vFrac:1-I._uFrac)-V/F.h,D?I._lenFrac:I._thickFrac,0,1,I.yanchor);var K=o.getCursor(X,q,I.xanchor,I.yanchor);u(z,K)},doneFn:function(){if(u(z),X!==void 0&&q!==void 0){var $={};$[I._propPrefix+"x"]=X,$[I._propPrefix+"y"]=q,I._traceIndex!==void 0?w.call("_guiRestyle",R,$,I._traceIndex):w.call("_guiRelayout",R,$)}}})}function k(z,I,R){var D=I._levels,O=[],F=[],Y,X,q=D.end+D.size/100,$=D.size,V=1.001*R[0]-.001*R[1],K=1.001*R[1]-.001*R[0];for(X=0;X<1e5&&(Y=D.start+X*$,!($>0?Y>=q:Y<=q));X++)Y>V&&Y<K&&O.push(Y);if(I._fillgradient)F=[0];else if(typeof I._fillcolor=="function"){var se=I._filllevels;if(se)for(q=se.end+se.size/100,$=se.size,X=0;X<1e5&&(Y=se.start+X*$,!($>0?Y>=q:Y<=q));X++)Y>R[0]&&Y<R[1]&&F.push(Y);else F=O.map(function(ue){return ue-D.size/2}),F.push(F[F.length-1]+D.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(F=[0]);return D.size<0&&(O.reverse(),F.reverse()),{line:O,fill:F}}function P(z,I,R){var D=z._fullLayout,O=I.orientation==="v",F={type:"linear",range:R,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},Y=O?"y":"x",X={type:"linear",_id:Y+I._id},q={letter:Y,font:D.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:D.calendar};function $(V,K){return a.coerce(F,X,g,V,K)}return v(F,X,$,q,D),y(F,X,$,q),X}B.exports={draw:x}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(t,B,H){var d=t("../../lib");B.exports=function(b){return d.isPlainObject(b.colorbar)}},{"../../lib":503}],372:[function(t,B,H){B.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(t,B,H){var d=t("../colorbar/attributes"),l=t("../../lib/regex").counter,b=t("../../lib/sort_object_keys"),w=t("./scales.js").scales;b(w),B.exports=function(o,a){o=o||"",a=a||{};var n=a.cLetter||"c";"onlyIfNumerical"in a?a.onlyIfNumerical:Boolean(o);var r="noScale"in a?a.noScale:o==="marker.line",u="showScaleDflt"in a?a.showScaleDflt:n==="z",s=typeof a.colorscaleDflt=="string"?w[a.colorscaleDflt]:null,i=a.editTypeOverride||"",f;"colorAttr"in a?f=a.colorAttr:f={z:"z",c:"color"}[n];var h=n+"auto",p=n+"min",v=n+"max",y=n+"mid",g={};g[p]=g[v]=void 0;var A={};A[h]=!1;var m={};return f==="color"&&(m.color={valType:"color",arrayOk:!0,editType:i||"style"},a.anim&&(m.color.anim=!0)),m[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},m[p]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:A},m[v]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:A},m[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},m.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},m.autocolorscale={valType:"boolean",dflt:a.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},m.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(m.showscale={valType:"boolean",dflt:u,editType:"calc"},m.colorbar=d),a.noColorAxis||(m.coloraxis={valType:"subplotid",regex:l("coloraxis"),dflt:null,editType:"calc"}),m}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("./helpers").extractOpts;B.exports=function(e,o,a){var n=e._fullLayout,r=a.vals,u=a.containerStr,s=u?l.nestedProperty(o,u).get():o,i=b(s),f=i.auto!==!1,h=i.min,p=i.max,v=i.mid,y=function(){return l.aggNums(Math.min,null,r)},g=function(){return l.aggNums(Math.max,null,r)};if(h===void 0?h=y():f&&(s._colorAx&&d(h)?h=Math.min(h,y()):h=y()),p===void 0?p=g():f&&(s._colorAx&&d(p)?p=Math.max(p,g()):p=g()),f&&v!==void 0&&(p-v>v-h?h=v-(p-v):p-v<v-h&&(p=v+(v-h))),h===p&&(h-=.5,p+=.5),i._sync("min",h),i._sync("max",p),i.autocolorscale){var A;h*p<0?A=n.colorscale.diverging:h>=0?A=n.colorscale.sequential:A=n.colorscale.sequentialminus,i._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(t,B,H){var d=t("../../lib"),l=t("./helpers").hasColorscale,b=t("./helpers").extractOpts;B.exports=function(e,o){function a(h,p){var v=h["_"+p];v!==void 0&&(h[p]=v)}function n(h,p){var v=p.container?d.nestedProperty(h,p.container).get():h;if(v)if(v.coloraxis)v._colorAx=o[v.coloraxis];else{var y=b(v),g=y.auto;(g||y.min===void 0)&&a(v,p.min),(g||y.max===void 0)&&a(v,p.max),y.autocolorscale&&a(v,"colorscale")}}for(var r=0;r<e.length;r++){var u=e[r],s=u._module.colorbar;if(s)if(Array.isArray(s))for(var i=0;i<s.length;i++)n(u,s[i]);else n(u,s);l(u,"marker.line")&&n(u,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in o._colorAxes)n(o[f],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../colorbar/has_colorbar"),w=t("../colorbar/defaults"),e=t("./scales").isValid,o=t("../../registry").traceIs;function a(n,r){var u=r.slice(0,r.length-1);return r?l.nestedProperty(n,u).get()||{}:n}B.exports=function n(r,u,s,i,f){var h=f.prefix,p=f.cLetter,v="_module"in u,y=a(r,h),g=a(u,h),A=a(u._template||{},h)||{},m=function(){return delete r.coloraxis,delete u.coloraxis,n(r,u,s,i,f)};if(v){var M=s._colorAxes||{},_=i(h+"coloraxis");if(_){var T=o(u,"contour")&&l.nestedProperty(u,"contours.coloring").get()||"heatmap",x=M[_];x?(x[2].push(m),x[0]!==T&&(x[0]=!1,l.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[_]=[T,u,[m]];return}}var c=y[p+"min"],L=y[p+"max"],S=d(c)&&d(L)&&c<L,k=i(h+p+"auto",!S);k?i(h+p+"mid"):(i(h+p+"min"),i(h+p+"max"));var P=y.colorscale,z=A.colorscale,I;if(P!==void 0&&(I=!e(P)),z!==void 0&&(I=!e(z)),i(h+"autocolorscale",I),i(h+"colorscale"),i(h+"reversescale"),h!=="marker.line."){var R;h&&v&&(R=b(y));var D=i(h+"showscale",R);D&&(h&&A&&(g._template=A),w(y,g,s))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("fast-isnumeric"),w=t("../../lib"),e=t("../color"),o=t("./scales").isValid;function a(v,y,g){var A=y?w.nestedProperty(v,y).get()||{}:v,m=A[g||"color"],M=!1;if(w.isArrayOrTypedArray(m)){for(var _=0;_<m.length;_++)if(b(m[_])){M=!0;break}}return w.isPlainObject(A)&&(M||A.showscale===!0||b(A.cmin)&&b(A.cmax)||o(A.colorscale)||w.isPlainObject(A.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function u(v){var y=v._colorAx,g=y||v,A={},m,M,_;for(M=0;M<n.length;M++)_=n[M],A[_]=g[_];if(y)for(m="c",M=0;M<r.length;M++)_=r[M],A[_]=g["c"+_];else{var T;for(M=0;M<r.length;M++){if(_=r[M],T="c"+_,T in g){A[_]=g[T];continue}T="z"+_,T in g&&(A[_]=g[T])}m=T.charAt(0)}return A._sync=function(x,c){var L=r.indexOf(x)!==-1?m+x:x;g[L]=g["_"+L]=c},A}function s(v){for(var y=u(v),g=y.min,A=y.max,m=y.reversescale?i(y.colorscale):y.colorscale,M=m.length,_=new Array(M),T=new Array(M),x=0;x<M;x++){var c=m[x];_[x]=g+c[0]*(A-g),T[x]=c[1]}return{domain:_,range:T}}function i(v){for(var y=v.length,g=new Array(y),A=y-1,m=0;A>=0;A--,m++){var M=v[A];g[m]=[1-M[0],M[1]]}return g}function f(v,y){y=y||{};for(var g=v.domain,A=v.range,m=A.length,M=new Array(m),_=0;_<m;_++){var T=l(A[_]).toRgb();M[_]=[T.r,T.g,T.b,T.a]}var x=d.scale.linear().domain(g).range(M).clamp(!0),c=y.noNumericCheck,L=y.returnArray,S;return c&&L?S=x:c?S=function(k){return p(x(k))}:L?S=function(k){return b(k)?x(k):l(k).isValid()?k:e.defaultLine}:S=function(k){return b(k)?p(x(k)):l(k).isValid()?k:e.defaultLine},S.domain=x.domain,S.range=function(){return A},S}function h(v,y){return f(s(v),y)}function p(v){var y={r:v[0],g:v[1],b:v[2],a:v[3]};return l(y).toRgbString()}B.exports={hasColorscale:a,extractOpts:u,extractScale:s,flipScale:i,makeColorScaleFunc:f,makeColorScaleFuncFromTrace:h}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(t,B,H){var d=t("./scales"),l=t("./helpers");B.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:d.scales,defaultScale:d.defaultScale,getScale:d.get,isValidScale:d.isValid,hasColorscale:l.hasColorscale,extractOpts:l.extractOpts,extractScale:l.extractScale,flipScale:l.flipScale,makeColorScaleFunc:l.makeColorScaleFunc,makeColorScaleFuncFromTrace:l.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("./attributes"),b=t("./scales").scales;B.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:d({_isSubplotObj:!0,editType:"calc"},l("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("./layout_attributes"),w=t("./defaults");B.exports=function(o,a){function n(v,y){return d.coerce(o,a,b,v,y)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=a._colorAxes,u,s;function i(v,y){return d.coerce(u,s,b.coloraxis,v,y)}for(var f in r){var h=r[f];if(h[0])u=o[f]||{},s=l.newContainer(a,f,"coloraxis"),s._name=f,w(u,s,a,i,{prefix:"",cLetter:"c"});else{for(var p=0;p<h[2].length;p++)h[2][p]();delete a._colorAxes[f]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(t,B,H){var d=t("tinycolor2"),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=l.RdBu;function w(a,n){if(n||(n=b),!a)return n;function r(){try{a=l[a]||JSON.parse(a)}catch{a=n}}return typeof a=="string"&&(r(),typeof a=="string"&&r()),e(a)?a:n}function e(a){var n=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var r=0;r<a.length;r++){var u=a[r];if(u.length!==2||+u[0]<n||!d(u[1]).isValid())return!1;n=+u[0]}return!0}function o(a){return l[a]!==void 0?!0:e(a)}B.exports={scales:l,defaultScale:b,get:w,isValid:o}},{tinycolor2:312}],382:[function(t,B,H){B.exports=function(l,b,w,e,o){var a=(l-w)/(e-w),n=a+b/(e-w),r=(a+n)/2;return o==="left"||o==="bottom"?a:o==="center"||o==="middle"?r:o==="right"||o==="top"?n:a<2/3-r?a:n>4/3-r?n:r}},{}],383:[function(t,B,H){var d=t("../../lib"),l=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.exports=function(w,e,o,a){return o==="left"?w=0:o==="center"?w=1:o==="right"?w=2:w=d.constrain(Math.floor(w*3),0,2),a==="bottom"?e=0:a==="middle"?e=1:a==="top"?e=2:e=d.constrain(Math.floor(e*3),0,2),l[e][w]}},{"../../lib":503}],384:[function(t,B,H){H.selectMode=function(d){return d==="lasso"||d==="select"},H.drawMode=function(d){return d==="drawclosedpath"||d==="drawopenpath"||d==="drawline"||d==="drawrect"||d==="drawcircle"},H.openMode=function(d){return d==="drawline"||d==="drawopenpath"},H.rectMode=function(d){return d==="select"||d==="drawline"||d==="drawrect"||d==="drawcircle"},H.freeMode=function(d){return d==="lasso"||d==="drawclosedpath"||d==="drawopenpath"},H.selectingOrDrawing=function(d){return H.freeMode(d)||H.rectMode(d)}},{}],385:[function(t,B,H){var d=t("mouse-event-offset"),l=t("has-hover"),b=t("has-passive-events"),w=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),o=B.exports={};o.align=t("./align"),o.getCursor=t("./cursor");var a=t("./unhover");o.unhover=a.wrapped,o.unhoverRaw=a.raw,o.init=function(s){var i=s.gd,f=1,h=i._context.doubleClickDelay,p=s.element,v,y,g,A,m,M,_,T;i._mouseDownTime||(i._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=L,b?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=L,p.addEventListener("touchstart",L,{passive:!1})):p.ontouchstart=L;function x(P,z,I){return Math.abs(P)<I&&(P=0),Math.abs(z)<I&&(z=0),[P,z]}var c=s.clampFn||x;function L(P){i._dragged=!1,i._dragging=!0;var z=r(P);v=z[0],y=z[1],_=P.target,M=P,T=P.buttons===2||P.ctrlKey,typeof P.clientX=="undefined"&&typeof P.clientY=="undefined"&&(P.clientX=v,P.clientY=y),g=new Date().getTime(),g-i._mouseDownTime<h?f+=1:(f=1,i._mouseDownTime=g),s.prepFn&&s.prepFn(P,v,y),l&&!T?(m=n(),m.style.cursor=window.getComputedStyle(p).cursor):l||(m=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var z=r(P),I=s.minDrag||e.MINDRAG,R=c(z[0]-v,z[1]-y,I),D=R[0],O=R[1];(D||O)&&(i._dragged=!0,o.unhover(i,P)),i._dragged&&s.moveFn&&!T&&(i._dragdata={element:p,dx:D,dy:O},s.moveFn(D,O))}function k(P){if(delete i._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),l?w(m):A&&(m.documentElement.style.cursor=A,A=null),!i._dragging){i._dragged=!1;return}if(i._dragging=!1,new Date().getTime()-i._mouseDownTime>h&&(f=Math.max(f-1,1)),i._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(f,M),!T){var z;try{z=new MouseEvent("click",P)}catch{var I=r(P);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}_.dispatchEvent(z)}i._dragging=!1,i._dragged=!1}};function n(){var u=document.createElement("div");u.className="dragcover";var s=u.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(u),u}o.coverSlip=n;function r(u){return d(u.changedTouches?u.changedTouches[0]:u,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(t,B,H){var d=t("../../lib/events"),l=t("../../lib/throttle"),b=t("../../lib/dom").getGraphDiv,w=t("../fx/constants"),e=B.exports={};e.wrapped=function(o,a,n){o=b(o),o._fullLayout&&l.clear(o._fullLayout._uid+w.HOVERID),e.raw(o,a,n)},e.raw=function(a,n){var r=a._fullLayout,u=a._hoverdata;n||(n={}),!(n.target&&!a._dragged&&d.triggerHandler(a,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,n.target&&u&&a.emit("plotly_unhover",{event:n,points:u}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(t,B,H){H.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},H.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("fast-isnumeric"),e=t("tinycolor2"),o=t("../../registry"),a=t("../color"),n=t("../colorscale"),r=l.strTranslate,u=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),i=t("../../constants/alignment"),f=i.LINE_SPACING,h=t("../../constants/interactions").DESELECTDIM,p=t("../../traces/scatter/subtypes"),v=t("../../traces/scatter/make_bubble_size_func"),y=t("../../components/fx/helpers").appendArrayPointValue,g=B.exports={};g.font=function(V,K,se,ue){l.isPlainObject(K)&&(ue=K.color,se=K.size,K=K.family),K&&V.style("font-family",K),se+1&&V.style("font-size",se+"px"),ue&&V.call(a.fill,ue)},g.setPosition=function(V,K,se){V.attr("x",K).attr("y",se)},g.setSize=function(V,K,se){V.attr("width",K).attr("height",se)},g.setRect=function(V,K,se,ue,oe){V.call(g.setPosition,K,se).call(g.setSize,ue,oe)},g.translatePoint=function(V,K,se,ue){var oe=se.c2p(V.x),U=ue.c2p(V.y);if(w(oe)&&w(U)&&K.node())K.node().nodeName==="text"?K.attr("x",oe).attr("y",U):K.attr("transform",r(oe,U));else return!1;return!0},g.translatePoints=function(V,K,se){V.each(function(ue){var oe=d.select(this);g.translatePoint(ue,oe,K,se)})},g.hideOutsideRangePoint=function(V,K,se,ue,oe,U){K.attr("display",se.isPtWithinRange(V,oe)&&ue.isPtWithinRange(V,U)?null:"none")},g.hideOutsideRangePoints=function(V,K){if(!!K._hasClipOnAxisFalse){var se=K.xaxis,ue=K.yaxis;V.each(function(oe){var U=oe[0].trace,G=U.xcalendar,re=U.ycalendar,ee=o.traceIs(U,"bar-like")?".bartext":".point,.textpoint";V.selectAll(ee).each(function(j){g.hideOutsideRangePoint(j,d.select(this),se,ue,G,re)})})}},g.crispRound=function(V,K,se){return!K||!w(K)?se||0:V._context.staticPlot?K:K<1?1:Math.round(K)},g.singleLineStyle=function(V,K,se,ue,oe){K.style("fill","none");var U=(((V||[])[0]||{}).trace||{}).line||{},G=se||U.width||0,re=oe||U.dash||"";a.stroke(K,ue||U.color),g.dashLine(K,re,G)},g.lineGroupStyle=function(V,K,se,ue){V.style("fill","none").each(function(oe){var U=(((oe||[])[0]||{}).trace||{}).line||{},G=K||U.width||0,re=ue||U.dash||"";d.select(this).call(a.stroke,se||U.color).call(g.dashLine,re,G)})},g.dashLine=function(V,K,se){se=+se||0,K=g.dashStyle(K,se),V.style({"stroke-dasharray":K,"stroke-width":se+"px"})},g.dashStyle=function(V,K){K=+K||1;var se=Math.max(K,3);return V==="solid"?V="":V==="dot"?V=se+"px,"+se+"px":V==="dash"?V=3*se+"px,"+3*se+"px":V==="longdash"?V=5*se+"px,"+5*se+"px":V==="dashdot"?V=3*se+"px,"+se+"px,"+se+"px,"+se+"px":V==="longdashdot"&&(V=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),V},g.singleFillStyle=function(V){var K=d.select(V.node()),se=K.data(),ue=(((se[0]||[])[0]||{}).trace||{}).fillcolor;ue&&V.call(a.fill,ue)},g.fillGroupStyle=function(V){V.style("stroke-width",0).each(function(K){var se=d.select(this);K[0].trace&&se.call(a.fill,K[0].trace.fillcolor)})};var A=t("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(A).forEach(function(V){var K=A[V],se=K.n;g.symbolList.push(se,String(se),V,se+100,String(se+100),V+"-open"),g.symbolNames[se]=V,g.symbolFuncs[se]=K.f,K.needLine&&(g.symbolNeedLines[se]=!0),K.noDot?g.symbolNoDot[se]=!0:g.symbolList.push(se+200,String(se+200),V+"-dot",se+300,String(se+300),V+"-open-dot"),K.noFill&&(g.symbolNoFill[se]=!0)});var m=g.symbolNames.length,M="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";g.symbolNumber=function(V){if(w(V))V=+V;else if(typeof V=="string"){var K=0;V.indexOf("-open")>0&&(K=100,V=V.replace("-open","")),V.indexOf("-dot")>0&&(K+=200,V=V.replace("-dot","")),V=g.symbolNames.indexOf(V),V>=0&&(V+=K)}return V%100>=m||V>=400?0:Math.floor(Math.max(V,0))};function _(V,K){var se=V%100;return g.symbolFuncs[se](K)+(V>=200?M:"")}var T={x1:1,x2:0,y1:0,y2:0},x={x1:0,x2:0,y1:1,y2:0},c=b("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:T},horizontalreversed:{node:"linearGradient",attrs:T,reversed:!0},vertical:{node:"linearGradient",attrs:x},verticalreversed:{node:"linearGradient",attrs:x,reversed:!0}};g.gradient=function(V,K,se,ue,oe,U){for(var G=oe.length,re=L[ue],ee=new Array(G),j=0;j<G;j++)re.reversed?ee[G-1-j]=[c((1-oe[j][0])*100),oe[j][1]]:ee[j]=[c(oe[j][0]*100),oe[j][1]];var Q=K._fullLayout,ne="g"+Q._uid+"-"+se,ae=Q._defs.select(".gradients").selectAll("#"+ne).data([ue+ee.join(";")],l.identity);ae.exit().remove(),ae.enter().append(re.node).each(function(){var me=d.select(this);re.attrs&&me.attr(re.attrs),me.attr("id",ne);var ce=me.selectAll("stop").data(ee);ce.exit().remove(),ce.enter().append("stop"),ce.each(function(ye){var xe=e(ye[1]);d.select(this).attr({offset:ye[0]+"%","stop-color":a.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),V.style(U,X(ne,K)).style(U+"-opacity",null);var ie=function(me){return"."+me.attr("class").replace(/\s/g,".")},fe=ie(d.select(V.node().parentNode))+">"+ie(V);Q._gradientUrlQueryParts[fe]=1},g.pattern=function(V,K,se,ue,oe,U,G,re,ee,j,Q,ne){var ae=K==="legend";re&&(ee==="overlay"?(j=re,Q=a.contrast(j)):(j=void 0,Q=re));var ie=se._fullLayout,fe="p"+ie._uid+"-"+ue,me,ce,ye=function(qe,Ue,Re,Ve,dt){return Ve+(dt-Ve)*(qe-Ue)/(Re-Ue)},xe,ke,Ae,Oe,He={};switch(oe){case"/":me=U*Math.sqrt(2),ce=U*Math.sqrt(2),xe="M-"+me/4+","+ce/4+"l"+me/2+",-"+ce/2+"M0,"+ce+"L"+me+",0M"+me/4*3+","+ce/4*5+"l"+me/2+",-"+ce/2,ke=G*U,Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case"\\":me=U*Math.sqrt(2),ce=U*Math.sqrt(2),xe="M"+me/4*3+",-"+ce/4+"l"+me/2+","+ce/2+"M0,0L"+me+","+ce+"M-"+me/4+","+ce/4*3+"l"+me/2+","+ce/2,ke=G*U,Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case"x":me=U*Math.sqrt(2),ce=U*Math.sqrt(2),xe="M-"+me/4+","+ce/4+"l"+me/2+",-"+ce/2+"M0,"+ce+"L"+me+",0M"+me/4*3+","+ce/4*5+"l"+me/2+",-"+ce/2+"M"+me/4*3+",-"+ce/4+"l"+me/2+","+ce/2+"M0,0L"+me+","+ce+"M-"+me/4+","+ce/4*3+"l"+me/2+","+ce/2,ke=U-U*Math.sqrt(1-G),Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case"|":me=U,ce=U,Oe="path",xe="M"+me/2+",0L"+me/2+","+ce,ke=G*U,Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case"-":me=U,ce=U,Oe="path",xe="M0,"+ce/2+"L"+me+","+ce/2,ke=G*U,Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case"+":me=U,ce=U,Oe="path",xe="M"+me/2+",0L"+me/2+","+ce+"M0,"+ce/2+"L"+me+","+ce/2,ke=U-U*Math.sqrt(1-G),Oe="path",He={d:xe,opacity:ne,stroke:Q,"stroke-width":ke+"px"};break;case".":me=U,ce=U,G<Math.PI/4?Ae=Math.sqrt(G*U*U/Math.PI):Ae=ye(G,Math.PI/4,1,U/2,U/Math.sqrt(2)),Oe="circle",He={cx:me/2,cy:ce/2,r:Ae,opacity:ne,fill:Q};break}var Ge=[oe||"noSh",j||"noBg",Q||"noFg",U,G].join(";"),_e=ie._defs.select(".patterns").selectAll("#"+fe).data([Ge],l.identity);_e.exit().remove(),_e.enter().append("pattern").each(function(){var qe=d.select(this);if(qe.attr({id:fe,width:me+"px",height:ce+"px",patternUnits:"userSpaceOnUse",patternTransform:ae?"scale(0.8)":""}),j){var Ue=qe.selectAll("rect").data([0]);Ue.exit().remove(),Ue.enter().append("rect").attr({width:me+"px",height:ce+"px",fill:j})}var Re=qe.selectAll(Oe).data([0]);Re.exit().remove(),Re.enter().append(Oe).attr(He)}),V.style("fill",X(fe,se)).style("fill-opacity",null),V.classed("pattern_filled",!0);var Ie=function(qe){return"."+qe.attr("class").replace(/\s/g,".")},Ye=Ie(d.select(V.node().parentNode))+">.pattern_filled";ie._patternUrlQueryParts[Ye]=1},g.initGradients=function(V){var K=V._fullLayout,se=l.ensureSingle(K._defs,"g","gradients");se.selectAll("linearGradient,radialGradient").remove(),K._gradientUrlQueryParts={}},g.initPatterns=function(V){var K=V._fullLayout,se=l.ensureSingle(K._defs,"g","patterns");se.selectAll("pattern").remove(),K._patternUrlQueryParts={}},g.getPatternAttr=function(V,K,se){return V&&l.isArrayOrTypedArray(V)?K<V.length?V[K]:se:V},g.pointStyle=function(V,K,se){if(!!V.size()){var ue=g.makePointStyleFns(K);V.each(function(oe){g.singlePointStyle(oe,d.select(this),K,ue,se)})}},g.singlePointStyle=function(V,K,se,ue,oe){var U=se.marker,G=U.line;if(K.style("opacity",ue.selectedOpacityFn?ue.selectedOpacityFn(V):V.mo===void 0?U.opacity:V.mo),ue.ms2mrc){var re;V.ms==="various"||U.size==="various"?re=3:re=ue.ms2mrc(V.ms),V.mrc=re,ue.selectedSizeFn&&(re=V.mrc=ue.selectedSizeFn(V));var ee=g.symbolNumber(V.mx||U.symbol)||0;V.om=ee%200>=100,K.attr("d",_(ee,re))}var j=!1,Q,ne,ae;if(V.so)ae=G.outlierwidth,ne=G.outliercolor,Q=U.outliercolor;else{var ie=(G||{}).width;ae=(V.mlw+1||ie+1||(V.trace?(V.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in V?ne=V.mlcc=ue.lineScale(V.mlc):l.isArrayOrTypedArray(G.color)?ne=a.defaultLine:ne=G.color,l.isArrayOrTypedArray(U.color)&&(Q=a.defaultLine,j=!0),"mc"in V?Q=V.mcc=ue.markerScale(V.mc):Q=U.color||"rgba(0,0,0,0)",ue.selectedColorFn&&(Q=ue.selectedColorFn(V))}if(V.om)K.call(a.stroke,Q).style({"stroke-width":(ae||1)+"px",fill:"none"});else{K.style("stroke-width",(V.isBlank?0:ae)+"px");var fe=U.gradient,me=V.mgt;me?j=!0:me=fe&&fe.type,l.isArrayOrTypedArray(me)&&(me=me[0],L[me]||(me=0));var ce=U.pattern,ye=ce&&g.getPatternAttr(ce.shape,V.i,"");if(me&&me!=="none"){var xe=V.mgc;xe?j=!0:xe=fe.color;var ke=se.uid;j&&(ke+="-"+V.i),g.gradient(K,oe,ke,me,[[0,xe],[1,Q]],"fill")}else if(ye){var Ae=g.getPatternAttr(ce.bgcolor,V.i,null),Oe=g.getPatternAttr(ce.fgcolor,V.i,null),He=ce.fgopacity,Ge=g.getPatternAttr(ce.size,V.i,8),_e=g.getPatternAttr(ce.solidity,V.i,.3),Ie=V.mcc||l.isArrayOrTypedArray(ce.shape)||l.isArrayOrTypedArray(ce.bgcolor)||l.isArrayOrTypedArray(ce.size)||l.isArrayOrTypedArray(ce.solidity),Ye=se.uid;Ie&&(Ye+="-"+V.i),g.pattern(K,"point",oe,Ye,ye,Ge,_e,V.mcc,ce.fillmode,Ae,Oe,He)}else a.fill(K,Q);ae&&a.stroke(K,ne)}},g.makePointStyleFns=function(V){var K={},se=V.marker;return K.markerScale=g.tryColorscale(se,""),K.lineScale=g.tryColorscale(se,"line"),o.traceIs(V,"symbols")&&(K.ms2mrc=p.isBubble(V)?v(V):function(){return(se.size||6)/2}),V.selectedpoints&&l.extendFlat(K,g.makeSelectedPointStyleFns(V)),K},g.makeSelectedPointStyleFns=function(V){var K={},se=V.selected||{},ue=V.unselected||{},oe=V.marker||{},U=se.marker||{},G=ue.marker||{},re=oe.opacity,ee=U.opacity,j=G.opacity,Q=ee!==void 0,ne=j!==void 0;(l.isArrayOrTypedArray(re)||Q||ne)&&(K.selectedOpacityFn=function(Ae){var Oe=Ae.mo===void 0?oe.opacity:Ae.mo;return Ae.selected?Q?ee:Oe:ne?j:h*Oe});var ae=oe.color,ie=U.color,fe=G.color;(ie||fe)&&(K.selectedColorFn=function(Ae){var Oe=Ae.mcc||ae;return Ae.selected?ie||Oe:fe||Oe});var me=oe.size,ce=U.size,ye=G.size,xe=ce!==void 0,ke=ye!==void 0;return o.traceIs(V,"symbols")&&(xe||ke)&&(K.selectedSizeFn=function(Ae){var Oe=Ae.mrc||me/2;return Ae.selected?xe?ce/2:Oe:ke?ye/2:Oe}),K},g.makeSelectedTextStyleFns=function(V){var K={},se=V.selected||{},ue=V.unselected||{},oe=V.textfont||{},U=se.textfont||{},G=ue.textfont||{},re=oe.color,ee=U.color,j=G.color;return K.selectedTextColorFn=function(Q){var ne=Q.tc||re;return Q.selected?ee||ne:j||(ee?ne:a.addOpacity(ne,h))},K},g.selectedPointStyle=function(V,K){if(!(!V.size()||!K.selectedpoints)){var se=g.makeSelectedPointStyleFns(K),ue=K.marker||{},oe=[];se.selectedOpacityFn&&oe.push(function(U,G){U.style("opacity",se.selectedOpacityFn(G))}),se.selectedColorFn&&oe.push(function(U,G){a.fill(U,se.selectedColorFn(G))}),se.selectedSizeFn&&oe.push(function(U,G){var re=G.mx||ue.symbol||0,ee=se.selectedSizeFn(G);U.attr("d",_(g.symbolNumber(re),ee)),G.mrc2=ee}),oe.length&&V.each(function(U){for(var G=d.select(this),re=0;re<oe.length;re++)oe[re](G,U)})}},g.tryColorscale=function(V,K){var se=K?l.nestedProperty(V,K).get():V;if(se){var ue=se.color;if((se.colorscale||se._colorAx)&&l.isArrayOrTypedArray(ue))return n.makeColorScaleFuncFromTrace(se)}return l.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function k(V,K,se,ue,oe){var U=d.select(V.node().parentNode),G=K.indexOf("top")!==-1?"top":K.indexOf("bottom")!==-1?"bottom":"middle",re=K.indexOf("left")!==-1?"end":K.indexOf("right")!==-1?"start":"middle",ee=ue?ue/.8+1:0,j=(u.lineCount(V)-1)*f+1,Q=S[re]*ee,ne=se*.75+S[G]*ee+(S[G]-1)*j*se/2;V.attr("text-anchor",re),oe||U.attr("transform",r(Q,ne))}function P(V,K){var se=V.ts||K.textfont.size;return w(se)&&se>0?se:0}g.textPointStyle=function(V,K,se){if(!!V.size()){var ue;if(K.selectedpoints){var oe=g.makeSelectedTextStyleFns(K);ue=oe.selectedTextColorFn}var U=K.texttemplate,G=se._fullLayout;V.each(function(re){var ee=d.select(this),j=U?l.extractOption(re,K,"txt","texttemplate"):l.extractOption(re,K,"tx","text");if(!j&&j!==0){ee.remove();return}if(U){var Q=K._module.formatLabels,ne=Q?Q(re,K,G):{},ae={};y(ae,K,re.i);var ie=K._meta||{};j=l.texttemplateString(j,ne,G._d3locale,ae,re,ie)}var fe=re.tp||K.textposition,me=P(re,K),ce=ue?ue(re):re.tc||K.textfont.color;ee.call(g.font,re.tf||K.textfont.family,me,ce).text(j).call(u.convertToTspans,se).call(k,fe,me,re.mrc)})}},g.selectedTextStyle=function(V,K){if(!(!V.size()||!K.selectedpoints)){var se=g.makeSelectedTextStyleFns(K);V.each(function(ue){var oe=d.select(this),U=se.selectedTextColorFn(ue),G=ue.tp||K.textposition,re=P(ue,K);a.fill(oe,U);var ee=o.traceIs(K,"bar-like");k(oe,G,re,ue.mrc2||ue.mrc,ee)})}};var z=.5;g.smoothopen=function(V,K){if(V.length<3)return"M"+V.join("L");var se="M"+V[0],ue=[],oe;for(oe=1;oe<V.length-1;oe++)ue.push(I(V[oe-1],V[oe],V[oe+1],K));for(se+="Q"+ue[0][0]+" "+V[1],oe=2;oe<V.length-1;oe++)se+="C"+ue[oe-2][1]+" "+ue[oe-1][0]+" "+V[oe];return se+="Q"+ue[V.length-3][1]+" "+V[V.length-1],se},g.smoothclosed=function(V,K){if(V.length<3)return"M"+V.join("L")+"Z";var se="M"+V[0],ue=V.length-1,oe=[I(V[ue],V[0],V[1],K)],U;for(U=1;U<ue;U++)oe.push(I(V[U-1],V[U],V[U+1],K));for(oe.push(I(V[ue-1],V[ue],V[0],K)),U=1;U<=ue;U++)se+="C"+oe[U-1][1]+" "+oe[U][0]+" "+V[U];return se+="C"+oe[ue][1]+" "+oe[0][0]+" "+V[0]+"Z",se};function I(V,K,se,ue){var oe=V[0]-K[0],U=V[1]-K[1],G=se[0]-K[0],re=se[1]-K[1],ee=Math.pow(oe*oe+U*U,z/2),j=Math.pow(G*G+re*re,z/2),Q=(j*j*oe-ee*ee*G)*ue,ne=(j*j*U-ee*ee*re)*ue,ae=3*j*(ee+j),ie=3*ee*(ee+j);return[[d.round(K[0]+(ae&&Q/ae),2),d.round(K[1]+(ae&&ne/ae),2)],[d.round(K[0]-(ie&&Q/ie),2),d.round(K[1]-(ie&&ne/ie),2)]]}var R={hv:function(V,K){return"H"+d.round(K[0],2)+"V"+d.round(K[1],2)},vh:function(V,K){return"V"+d.round(K[1],2)+"H"+d.round(K[0],2)},hvh:function(V,K){return"H"+d.round((V[0]+K[0])/2,2)+"V"+d.round(K[1],2)+"H"+d.round(K[0],2)},vhv:function(V,K){return"V"+d.round((V[1]+K[1])/2,2)+"H"+d.round(K[0],2)+"V"+d.round(K[1],2)}},D=function(V,K){return"L"+d.round(K[0],2)+","+d.round(K[1],2)};g.steps=function(V){var K=R[V]||D;return function(se){for(var ue="M"+d.round(se[0][0],2)+","+d.round(se[0][1],2),oe=1;oe<se.length;oe++)ue+=K(se[oe-1],se[oe]);return ue}},g.makeTester=function(){var V=l.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(se){se.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),K=l.ensureSingle(V,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=V,g.testref=K},g.savedBBoxes={};var O=0,F=1e4;g.bBox=function(V,K,se){se||(se=Y(V));var ue;if(se){if(ue=g.savedBBoxes[se],ue)return l.extendFlat({},ue)}else if(V.childNodes.length===1){var oe=V.childNodes[0];if(se=Y(oe),se){var U=+oe.getAttribute("x")||0,G=+oe.getAttribute("y")||0,re=oe.getAttribute("transform");if(!re){var ee=g.bBox(oe,!1,se);return U&&(ee.left+=U,ee.right+=U),G&&(ee.top+=G,ee.bottom+=G),ee}if(se+="~"+U+"~"+G+"~"+re,ue=g.savedBBoxes[se],ue)return l.extendFlat({},ue)}}var j,Q;K?j=V:(Q=g.tester.node(),j=V.cloneNode(!0),Q.appendChild(j)),d.select(j).attr("transform",null).call(u.positionText,0,0);var ne=j.getBoundingClientRect(),ae=g.testref.node().getBoundingClientRect();K||Q.removeChild(j);var ie={height:ne.height,width:ne.width,left:ne.left-ae.left,top:ne.top-ae.top,right:ne.right-ae.left,bottom:ne.bottom-ae.top};return O>=F&&(g.savedBBoxes={},O=0),se&&(g.savedBBoxes[se]=ie),O++,l.extendFlat({},ie)};function Y(V){var K=V.getAttribute("data-unformatted");if(K!==null)return K+V.getAttribute("data-math")+V.getAttribute("text-anchor")+V.getAttribute("style")}g.setClipUrl=function(V,K,se){V.attr("clip-path",X(K,se))};function X(V,K){if(!V)return null;var se=K._context,ue=se._exportedPlot?"":se._baseUrl||"";return ue?"url('"+ue+"#"+V+"')":"url(#"+V+")"}g.getTranslate=function(V){var K=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,se=V.attr?"attr":"getAttribute",ue=V[se]("transform")||"",oe=ue.replace(K,function(U,G,re){return[G,re].join(" ")}).split(" ");return{x:+oe[0]||0,y:+oe[1]||0}},g.setTranslate=function(V,K,se){var ue=/(\btranslate\(.*?\);?)/,oe=V.attr?"attr":"getAttribute",U=V.attr?"attr":"setAttribute",G=V[oe]("transform")||"";return K=K||0,se=se||0,G=G.replace(ue,"").trim(),G+=r(K,se),G=G.trim(),V[U]("transform",G),G},g.getScale=function(V){var K=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,se=V.attr?"attr":"getAttribute",ue=V[se]("transform")||"",oe=ue.replace(K,function(U,G,re){return[G,re].join(" ")}).split(" ");return{x:+oe[0]||1,y:+oe[1]||1}},g.setScale=function(V,K,se){var ue=/(\bscale\(.*?\);?)/,oe=V.attr?"attr":"getAttribute",U=V.attr?"attr":"setAttribute",G=V[oe]("transform")||"";return K=K||1,se=se||1,G=G.replace(ue,"").trim(),G+="scale("+K+","+se+")",G=G.trim(),V[U]("transform",G),G};var q=/\s*sc.*/;g.setPointGroupScale=function(V,K,se){if(K=K||1,se=se||1,!!V){var ue=K===1&&se===1?"":"scale("+K+","+se+")";V.each(function(){var oe=(this.getAttribute("transform")||"").replace(q,"");oe+=ue,oe=oe.trim(),this.setAttribute("transform",oe)})}};var $=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(V,K,se){!V||V.each(function(){var ue,oe=d.select(this),U=oe.select("text");if(!!U.node()){var G=parseFloat(U.attr("x")||0),re=parseFloat(U.attr("y")||0),ee=(oe.attr("transform")||"").match($);K===1&&se===1?ue=[]:ue=[r(G,re),"scale("+K+","+se+")",r(-G,-re)],ee&&ue.push(ee),oe.attr("transform",ue.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(t,B,H){var d=t("@plotly/d3");B.exports={circle:{n:0,f:function(l){var b=d.round(l,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(l){var b=d.round(l*1.3,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(l){var b=d.round(l*.4,2),w=d.round(l*1.2,2);return"M"+w+","+b+"H"+b+"V"+w+"H-"+b+"V"+b+"H-"+w+"V-"+b+"H-"+b+"V-"+w+"H"+b+"V-"+b+"H"+w+"Z"}},x:{n:4,f:function(l){var b=d.round(l*.8/Math.sqrt(2),2),w="l"+b+","+b,e="l"+b+",-"+b,o="l-"+b+",-"+b,a="l-"+b+","+b;return"M0,"+b+w+e+o+e+o+a+o+a+w+a+w+"Z"}},"triangle-up":{n:5,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+b+","+w+"H"+b+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+b+",-"+w+"H"+b+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M"+w+",-"+b+"V"+b+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+w+",-"+b+"V"+b+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M-"+w+",-"+b+"H"+b+"V"+w+"Z"}},"triangle-se":{n:10,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M"+b+",-"+w+"V"+b+"H-"+w+"Z"}},"triangle-sw":{n:11,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M"+w+","+b+"H-"+b+"V-"+w+"Z"}},"triangle-nw":{n:12,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M-"+b+","+w+"V-"+b+"H"+w+"Z"}},pentagon:{n:13,f:function(l){var b=d.round(l*.951,2),w=d.round(l*.588,2),e=d.round(-l,2),o=d.round(l*-.309,2),a=d.round(l*.809,2);return"M"+b+","+o+"L"+w+","+a+"H-"+w+"L-"+b+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(l){var b=d.round(l,2),w=d.round(l/2,2),e=d.round(l*Math.sqrt(3)/2,2);return"M"+e+",-"+w+"V"+w+"L0,"+b+"L-"+e+","+w+"V-"+w+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(l){var b=d.round(l,2),w=d.round(l/2,2),e=d.round(l*Math.sqrt(3)/2,2);return"M-"+w+","+e+"H"+w+"L"+b+",0L"+w+",-"+e+"H-"+w+"L-"+b+",0Z"}},octagon:{n:16,f:function(l){var b=d.round(l*.924,2),w=d.round(l*.383,2);return"M-"+w+",-"+b+"H"+w+"L"+b+",-"+w+"V"+w+"L"+w+","+b+"H-"+w+"L-"+b+","+w+"V-"+w+"Z"}},star:{n:17,f:function(l){var b=l*1.4,w=d.round(b*.225,2),e=d.round(b*.951,2),o=d.round(b*.363,2),a=d.round(b*.588,2),n=d.round(-b,2),r=d.round(b*-.309,2),u=d.round(b*.118,2),s=d.round(b*.809,2),i=d.round(b*.382,2);return"M"+w+","+r+"H"+e+"L"+o+","+u+"L"+a+","+s+"L0,"+i+"L-"+a+","+s+"L-"+o+","+u+"L-"+e+","+r+"H-"+w+"L0,"+n+"Z"}},hexagram:{n:18,f:function(l){var b=d.round(l*.66,2),w=d.round(l*.38,2),e=d.round(l*.76,2);return"M-"+e+",0l-"+w+",-"+b+"h"+e+"l"+w+",-"+b+"l"+w+","+b+"h"+e+"l-"+w+","+b+"l"+w+","+b+"h-"+e+"l-"+w+","+b+"l-"+w+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(l){var b=d.round(l*Math.sqrt(3)*.8,2),w=d.round(l*.8,2),e=d.round(l*1.6,2),o=d.round(l*4,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+b+","+w+a+b+","+w+a+"0,-"+e+a+"-"+b+","+w+"Z"}},"star-triangle-down":{n:20,f:function(l){var b=d.round(l*Math.sqrt(3)*.8,2),w=d.round(l*.8,2),e=d.round(l*1.6,2),o=d.round(l*4,2),a="A "+o+","+o+" 0 0 1 ";return"M"+b+",-"+w+a+"-"+b+",-"+w+a+"0,"+e+a+b+",-"+w+"Z"}},"star-square":{n:21,f:function(l){var b=d.round(l*1.1,2),w=d.round(l*2,2),e="A "+w+","+w+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(l){var b=d.round(l*1.4,2),w=d.round(l*1.9,2),e="A "+w+","+w+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(l){var b=d.round(l*.7,2),w=d.round(l*1.4,2);return"M0,"+w+"L"+b+",0L0,-"+w+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(l){var b=d.round(l*1.4,2),w=d.round(l*.7,2);return"M0,"+w+"L"+b+",0L0,-"+w+"L-"+b+",0Z"}},hourglass:{n:25,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(l){var b=d.round(l,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(l){var b=d.round(l,2),w=d.round(l/Math.sqrt(2),2);return"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(l){var b=d.round(l,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(l){var b=d.round(l*1.3,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(l){var b=d.round(l*1.3,2),w=d.round(l*.65,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+w+",-"+w+"L"+w+","+w+"M-"+w+","+w+"L"+w+",-"+w},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(l){var b=d.round(l*1.4,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*.85,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(l){var b=d.round(l/2,2),w=d.round(l,2);return"M"+b+","+w+"V-"+w+"m-"+w+",0V"+w+"M"+w+","+b+"H-"+w+"m0,-"+w+"H"+w},needLine:!0,noFill:!0},"y-up":{n:37,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+w+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+w+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+w+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+w+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(l){var b=d.round(l*1.4,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(l){var b=d.round(l*1.4,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(l){var b=d.round(l,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M0,0L-"+b+","+w+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M0,0L-"+b+",-"+w+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,0L"+b+",-"+w+"V"+w+"Z"},noDot:!0},"arrow-right":{n:48,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,0L-"+b+",-"+w+"V"+w+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+w+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+w+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,-"+w+"V"+w+"M0,0L"+b+",-"+w+"V"+w+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,-"+w+"V"+w+"M0,0L-"+b+",-"+w+"V"+w+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(t,B,H){B.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../plots/cartesian/axes"),w=t("../../lib"),e=t("./compute_error");B.exports=function(n){for(var r=n.calcdata,u=0;u<r.length;u++){var s=r[u],i=s[0].trace;if(i.visible===!0&&l.traceIs(i,"errorBarsOK")){var f=b.getFromId(n,i.xaxis),h=b.getFromId(n,i.yaxis);o(s,i,f,"x"),o(s,i,h,"y")}}};function o(a,n,r,u){var s=n["error_"+u]||{},i=s.visible&&["linear","log"].indexOf(r.type)!==-1,f=[];if(!!i){for(var h=e(s),p=0;p<a.length;p++){var v=a[p],y=v.i;if(y===void 0)y=p;else if(y===null)continue;var g=v[u];if(!!d(r.c2l(g))){var A=h(g,y);if(d(A[0])&&d(A[1])){var m=v[u+"s"]=g-A[0],M=v[u+"h"]=g+A[1];f.push(m,M)}}}var _=r._id,T=n._extremes[_],x=b.findExtremes(r,f,w.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(x.min),T.max=T.max.concat(x.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(t,B,H){B.exports=function(b){var w=b.type,e=b.symmetric;if(w==="data"){var o=b.array||[];if(e)return function(s,i){var f=+o[i];return[f,f]};var a=b.arrayminus||[];return function(s,i){var f=+o[i],h=+a[i];return!isNaN(f)||!isNaN(h)?[h||0,f||0]:[NaN,NaN]}}else{var n=d(w,b.value),r=d(w,b.valueminus);return e||b.valueminus===void 0?function(s){var i=n(s);return[i,i]}:function(s){return[r(s),n(s)]}}};function d(l,b){if(l==="percent")return function(w){return Math.abs(w*b/100)};if(l==="constant")return function(){return Math.abs(b)};if(l==="sqrt")return function(w){return Math.sqrt(Math.abs(w))}}},{}],393:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../lib"),w=t("../../plot_api/plot_template"),e=t("./attributes");B.exports=function(o,a,n,r){var u="error_"+r.axis,s=w.newContainer(a,u),i=o[u]||{};function f(m,M){return b.coerce(i,s,e,m,M)}var h=i.array!==void 0||i.value!==void 0||i.type==="sqrt",p=f("visible",h);if(p!==!1){var v=f("type","array"in i?"data":"percent"),y=!0;v!=="sqrt"&&(y=f("symmetric",!((v==="data"?"arrayminus":"valueminus")in i))),v==="data"?(f("array"),f("traceref"),y||(f("arrayminus"),f("tracerefminus"))):(v==="percent"||v==="constant")&&(f("value"),y||f("valueminus"));var g="copy_"+r.inherit+"style";if(r.inherit){var A=a["error_"+r.inherit];(A||{}).visible&&f(g,!(i.color||d(i.thickness)||d(i.width)))}(!r.inherit||!s[g])&&(f("color",n),f("thickness"),f("width",l.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/edit_types").overrideAll,b=t("./attributes"),w={error_x:d.extendFlat({},b),error_y:d.extendFlat({},b)};delete w.error_x.copy_zstyle,delete w.error_y.copy_zstyle,delete w.error_y.copy_ystyle;var e={error_x:d.extendFlat({},b),error_y:d.extendFlat({},b),error_z:d.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,B.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:w,bar:w,histogram:w,scatter3d:l(e,"calc","nested"),scattergl:l(w,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:o};function o(a,n,r){(n.error_y||{}).visible&&(r.yerr=a.yh-a.y,n.error_y.symmetric||(r.yerrneg=a.y-a.ys)),(n.error_x||{}).visible&&(r.xerr=a.xh-a.x,n.error_x.symmetric||(r.xerrneg=a.x-a.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../drawing"),w=t("../../traces/scatter/subtypes");B.exports=function(a,n,r,u){var s,i=r.xaxis,f=r.yaxis,h=u&&u.duration>0;n.each(function(p){var v=p[0].trace,y=v.error_x||{},g=v.error_y||{},A;v.ids&&(A=function(T){return T.id});var m=w.hasMarkers(v)&&v.marker.maxdisplayed>0;!g.visible&&!y.visible&&(p=[]);var M=d.select(this).selectAll("g.errorbar").data(p,A);if(M.exit().remove(),!!p.length){y.visible||M.selectAll("path.xerror").remove(),g.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var _=M.enter().append("g").classed("errorbar",!0);h&&_.style("opacity",0).transition().duration(u.duration).style("opacity",1),b.setClipUrl(M,r.layerClipId,a),M.each(function(T){var x=d.select(this),c=e(T,i,f);if(!(m&&!T.vis)){var L,S=x.select("path.yerror");if(g.visible&&l(c.x)&&l(c.yh)&&l(c.ys)){var k=g.width;L="M"+(c.x-k)+","+c.yh+"h"+2*k+"m-"+k+",0V"+c.ys,c.noYS||(L+="m-"+k+",0h"+2*k),s=!S.size(),s?S=x.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):h&&(S=S.transition().duration(u.duration).ease(u.easing)),S.attr("d",L)}else S.remove();var P=x.select("path.xerror");if(y.visible&&l(c.y)&&l(c.xh)&&l(c.xs)){var z=(y.copy_ystyle?g:y).width;L="M"+c.xh+","+(c.y-z)+"v"+2*z+"m0,-"+z+"H"+c.xs,c.noXS||(L+="m0,-"+z+"v"+2*z),s=!P.size(),s?P=x.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):h&&(P=P.transition().duration(u.duration).ease(u.easing)),P.attr("d",L)}else P.remove()}})}})};function e(o,a,n){var r={x:a.c2p(o.x),y:n.c2p(o.y)};return o.yh!==void 0&&(r.yh=n.c2p(o.yh),r.ys=n.c2p(o.ys),l(r.ys)||(r.noYS=!0,r.ys=n.c2p(o.ys,!0))),o.xh!==void 0&&(r.xh=a.c2p(o.xh),r.xs=a.c2p(o.xs),l(r.xs)||(r.noXS=!0,r.xs=a.c2p(o.xs,!0))),r}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(t,B,H){var d=t("@plotly/d3"),l=t("../color");B.exports=function(w){w.each(function(e){var o=e[0].trace,a=o.error_y||{},n=o.error_x||{},r=d.select(this);r.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(l.stroke,a.color),n.copy_ystyle&&(n=a),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(l.stroke,n.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("./layout_attributes").hoverlabel,b=t("../../lib/extend").extendFlat;B.exports={hoverlabel:{bgcolor:b({},l.bgcolor,{arrayOk:!0}),bordercolor:b({},l.bordercolor,{arrayOk:!0}),font:d({arrayOk:!0,editType:"none"}),align:b({},l.align,{arrayOk:!0}),namelength:b({},l.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(t,B,H){var d=t("../../lib"),l=t("../../registry");B.exports=function(e){var o=e.calcdata,a=e._fullLayout;function n(f){return function(h){return d.coerceHoverinfo({hoverinfo:h},{_module:f._module},a)}}for(var r=0;r<o.length;r++){var u=o[r],s=u[0].trace;if(!l.traceIs(s,"pie-like")){var i=l.traceIs(s,"2dMap")?b:d.fillArray;i(s.hoverinfo,u,"hi",n(s)),s.hovertemplate&&i(s.hovertemplate,u,"ht"),!!s.hoverlabel&&(i(s.hoverlabel.bgcolor,u,"hbg"),i(s.hoverlabel.bordercolor,u,"hbc"),i(s.hoverlabel.font.size,u,"hts"),i(s.hoverlabel.font.color,u,"htc"),i(s.hoverlabel.font.family,u,"htf"),i(s.hoverlabel.namelength,u,"hnl"),i(s.hoverlabel.align,u,"hta"))}}};function b(w,e,o,a){a=a||d.identity,Array.isArray(w)&&(e[0][o]=a(w))}},{"../../lib":503,"../../registry":638}],399:[function(t,B,H){var d=t("../../registry"),l=t("./hover").hover;B.exports=function(w,e,o){var a=d.getComponentMethod("annotations","onClick")(w,w._hoverdata);o!==void 0&&l(w,e,o,!0);function n(){w.emit("plotly_click",{points:w._hoverdata,event:e})}w._hoverdata&&e&&e.target&&(a&&a.then?a.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(t,B,H){B.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./hoverlabel_defaults");B.exports=function(e,o,a,n){function r(s,i){return d.coerce(e,o,l,s,i)}var u=d.extendFlat({},n.hoverlabel);o.hovertemplate&&(u.namelength=-1),b(e,o,r,u)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(t,B,H){var d=t("../../lib");H.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},H.isTraceInSubplots=function(a,n){if(a.type==="splom"){for(var r=a.xaxes||[],u=a.yaxes||[],s=0;s<r.length;s++)for(var i=0;i<u.length;i++)if(n.indexOf(r[s]+u[i])!==-1)return!0;return!1}return n.indexOf(H.getSubplot(a))!==-1},H.flat=function(a,n){for(var r=new Array(a.length),u=0;u<a.length;u++)r[u]=n;return r},H.p2c=function(a,n){for(var r=new Array(a.length),u=0;u<a.length;u++)r[u]=a[u].p2c(n);return r},H.getDistanceFunction=function(a,n,r,u){return a==="closest"?u||H.quadrature(n,r):a.charAt(0)==="x"?n:r},H.getClosest=function(a,n,r){if(r.index!==!1)r.index>=0&&r.index<a.length?r.distance=0:r.index=!1;else for(var u=0;u<a.length;u++){var s=n(a[u]);s<=r.distance&&(r.index=u,r.distance=s)}return r},H.inbox=function(a,n,r){return a*n<0||a===0?r:1/0},H.quadrature=function(a,n){return function(r){var u=a(r),s=n(r);return Math.sqrt(u*u+s*s)}},H.makeEventData=function(a,n,r){var u="index"in a?a.index:a.pointNumber,s={data:n._input,fullData:n,curveNumber:n.index,pointNumber:u};if(n._indexToPoints){var i=n._indexToPoints[u];i.length===1?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=u;return n._module.eventData?s=n._module.eventData(s,a,n,r,u):("xVal"in a?s.x=a.xVal:"x"in a&&(s.x=a.x),"yVal"in a?s.y=a.yVal:"y"in a&&(s.y=a.y),a.xa&&(s.xaxis=a.xa),a.ya&&(s.yaxis=a.ya),a.zLabelVal!==void 0&&(s.z=a.zLabelVal)),H.appendArrayPointValue(s,n,u),s},H.appendArrayPointValue=function(a,n,r){var u=n._arrayAttrs;if(!!u)for(var s=0;s<u.length;s++){var i=u[s],f=b(i);if(a[f]===void 0){var h=d.nestedProperty(n,i).get(),p=w(h,r);p!==void 0&&(a[f]=p)}}},H.appendArrayMultiPointValues=function(a,n,r){var u=n._arrayAttrs;if(!!u)for(var s=0;s<u.length;s++){var i=u[s],f=b(i);if(a[f]===void 0){for(var h=d.nestedProperty(n,i).get(),p=new Array(r.length),v=0;v<r.length;v++)p[v]=w(h,r[v]);a[f]=p}}};var l={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(a){return l[a]||a}function w(a,n){if(Array.isArray(n)){if(Array.isArray(a)&&Array.isArray(a[n[0]]))return a[n[0]][n[1]]}else return a[n]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};H.isUnifiedHover=function(a){return typeof a!="string"?!1:!!o[a]},H.isXYhover=function(a){return typeof a!="string"?!1:!!e[a]}},{"../../lib":503}],403:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("tinycolor2"),w=t("../../lib"),e=w.strTranslate,o=w.strRotate,a=t("../../lib/events"),n=t("../../lib/svg_text_utils"),r=t("../../lib/override_cursor"),u=t("../drawing"),s=t("../color"),i=t("../dragelement"),f=t("../../plots/cartesian/axes"),h=t("../../registry"),p=t("./helpers"),v=t("./constants"),y=t("../legend/defaults"),g=t("../legend/draw"),A=v.YANGLE,m=Math.PI*A/180,M=1/Math.sin(m),_=Math.cos(m),T=Math.sin(m),x=v.HOVERARROWSIZE,c=v.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};H.hover=function(G,re,ee,j){G=w.getGraphDiv(G);var Q=re.target;w.throttle(G._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){k(G,re,ee,j,Q)})},H.loneHover=function(G,re){var ee=!0;Array.isArray(G)||(ee=!1,G=[G]);var j=re.gd,Q=se(j),ne=ue(j),ae=G.map(function(Ae){var Oe=Ae._x0||Ae.x0||Ae.x||0,He=Ae._x1||Ae.x1||Ae.x||0,Ge=Ae._y0||Ae.y0||Ae.y||0,_e=Ae._y1||Ae.y1||Ae.y||0,Ie=Ae.eventData;if(Ie){var Ye=Math.min(Oe,He),qe=Math.max(Oe,He),Ue=Math.min(Ge,_e),Re=Math.max(Ge,_e),Ve=Ae.trace;if(h.traceIs(Ve,"gl3d")){var dt=j._fullLayout[Ve.scene]._scene.container,Dt=dt.offsetLeft,Gt=dt.offsetTop;Ye+=Dt,qe+=Dt,Ue+=Gt,Re+=Gt}Ie.bbox={x0:Ye+ne,x1:qe+ne,y0:Ue+Q,y1:Re+Q},re.inOut_bbox&&re.inOut_bbox.push(Ie.bbox)}else Ie=!1;return{color:Ae.color||s.defaultLine,x0:Ae.x0||Ae.x||0,x1:Ae.x1||Ae.x||0,y0:Ae.y0||Ae.y||0,y1:Ae.y1||Ae.y||0,xLabel:Ae.xLabel,yLabel:Ae.yLabel,zLabel:Ae.zLabel,text:Ae.text,name:Ae.name,idealAlign:Ae.idealAlign,borderColor:Ae.borderColor,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,fontColor:Ae.fontColor,nameLength:Ae.nameLength,textAlign:Ae.textAlign,trace:Ae.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ae.hovertemplate||!1,hovertemplateLabels:Ae.hovertemplateLabels||!1,eventData:Ie}}),ie=!1,fe=I(ae,{gd:j,hovermode:"closest",rotateLabels:ie,bgColor:re.bgColor||s.background,container:d.select(re.container),outerContainer:re.outerContainer||re.container}),me=5,ce=0,ye=0;fe.sort(function(Ae,Oe){return Ae.y0-Oe.y0}).each(function(Ae,Oe){var He=Ae.y0-Ae.by/2;He-me<ce?Ae.offset=ce-He+me:Ae.offset=0,ce=He+Ae.by+Ae.offset,Oe===re.anchorIndex&&(ye=Ae.offset)}).each(function(Ae){Ae.offset-=ye});var xe=j._fullLayout._invScaleX,ke=j._fullLayout._invScaleY;return O(fe,ie,xe,ke),ee?fe:fe.node()};function k(U,G,re,ee,j){re||(re="xy");var Q=Array.isArray(re)?re:[re],ne=U._fullLayout,ae=ne._plots||[],ie=ae[re],fe=ne._has("cartesian");if(ie){var me=ie.overlays.map(function(hr){return hr.id});Q=Q.concat(me)}for(var ce=Q.length,ye=new Array(ce),xe=new Array(ce),ke=!1,Ae=0;Ae<ce;Ae++){var Oe=Q[Ae];if(ae[Oe])ke=!0,ye[Ae]=ae[Oe].xaxis,xe[Ae]=ae[Oe].yaxis;else if(ne[Oe]&&ne[Oe]._subplot){var He=ne[Oe]._subplot;ye[Ae]=He.xaxis,xe[Ae]=He.yaxis}else{w.warn("Unrecognized subplot: "+Oe);return}}var Ge=G.hovermode||ne.hovermode;if(Ge&&!ke&&(Ge="closest"),["x","y","closest","x unified","y unified"].indexOf(Ge)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return i.unhoverRaw(U,G);var _e=ne.hoverdistance;_e===-1&&(_e=1/0);var Ie=ne.spikedistance;Ie===-1&&(Ie=1/0);var Ye=[],qe=[],Ue,Re,Ve,dt,Dt,Gt,kt,zt,Bt,Lt,Mt,it,ht,Qe={hLinePoint:null,vLinePoint:null},Ce=!1;if(Array.isArray(G))for(Ge="array",Ve=0;Ve<G.length;Ve++)Dt=U.calcdata[G[Ve].curveNumber||0],Dt&&(Gt=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(qe.push(Dt),Gt.orientation==="h"&&(Ce=!0)));else{for(dt=0;dt<U.calcdata.length;dt++)Dt=U.calcdata[dt],Gt=Dt[0].trace,Gt.hoverinfo!=="skip"&&p.isTraceInSubplots(Gt,Q)&&(qe.push(Dt),Gt.orientation==="h"&&(Ce=!0));var je=!j,rt,ut;if(je)"xpx"in G?rt=G.xpx:rt=ye[0]._length/2,"ypx"in G?ut=G.ypx:ut=xe[0]._length/2;else{if(a.triggerHandler(U,"plotly_beforehover",G)===!1)return;var Pt=j.getBoundingClientRect();rt=G.clientX-Pt.left,ut=G.clientY-Pt.top,ne._calcInverseTransform(U);var St=w.apply3DTransform(ne._invTransform)(rt,ut);if(rt=St[0],ut=St[1],rt<0||rt>ye[0]._length||ut<0||ut>xe[0]._length)return i.unhoverRaw(U,G)}if(G.pointerX=rt+ye[0]._offset,G.pointerY=ut+xe[0]._offset,"xval"in G?Ue=p.flat(Q,G.xval):Ue=p.p2c(ye,rt),"yval"in G?Re=p.flat(Q,G.yval):Re=p.p2c(xe,ut),!l(Ue[0])||!l(Re[0]))return w.warn("Fx.hover failed",G,U),i.unhoverRaw(U,G)}var Nt=1/0;function Xt(hr,Yr){for(dt=0;dt<qe.length;dt++)if(Dt=qe[dt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Gt=Dt[0].trace,!(Gt.visible!==!0||Gt._length===0)&&["carpet","contourcarpet"].indexOf(Gt._module.name)===-1)){if(Gt.type==="splom"?(zt=0,kt=Q[zt]):(kt=p.getSubplot(Gt),zt=Q.indexOf(kt)),Bt=Ge,p.isUnifiedHover(Bt)&&(Bt=Bt.charAt(0)),it={cd:Dt,trace:Gt,xa:ye[zt],ya:xe[zt],maxHoverDistance:_e,maxSpikeDistance:Ie,index:!1,distance:Math.min(Nt,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Gt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ne[kt]&&(it.subplot=ne[kt]._subplot),ne._splomScenes&&ne._splomScenes[Gt.uid]&&(it.scene=ne._splomScenes[Gt.uid]),ht=Ye.length,Bt==="array"){var zr=G[dt];"pointNumber"in zr?(it.index=zr.pointNumber,Bt="closest"):(Bt="","xval"in zr&&(Lt=zr.xval,Bt="x"),"yval"in zr&&(Mt=zr.yval,Bt=Bt?"closest":"y"))}else hr!==void 0&&Yr!==void 0?(Lt=hr,Mt=Yr):(Lt=Ue[zt],Mt=Re[zt]);if(_e!==0)if(Gt._module&&Gt._module.hoverPoints){var Pr=Gt._module.hoverPoints(it,Lt,Mt,Bt,{finiteRange:!0,hoverLayer:ne._hoverlayer});if(Pr)for(var br,jr=0;jr<Pr.length;jr++)br=Pr[jr],l(br.x0)&&l(br.y0)&&Ye.push(F(br,Ge))}else w.log("Unrecognized trace type in hover:",Gt);if(Ge==="closest"&&Ye.length>ht&&(Ye.splice(0,ht),Nt=Ye[0].distance),fe&&Ie!==0&&Ye.length===0){it.distance=Ie,it.index=!1;var zn=Gt._module.hoverPoints(it,Lt,Mt,"closest",{hoverLayer:ne._hoverlayer});if(zn&&(zn=zn.filter(function(pr){return pr.spikeDistance<=Ie})),zn&&zn.length){var kn,ta=zn.filter(function(pr){return pr.xa.showspikes&&pr.xa.spikesnap!=="hovered data"});if(ta.length){var ia=ta[0];l(ia.x0)&&l(ia.y0)&&(kn=Kt(ia),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>kn.spikeDistance)&&(Qe.vLinePoint=kn))}var Aa=zn.filter(function(pr){return pr.ya.showspikes&&pr.ya.spikesnap!=="hovered data"});if(Aa.length){var ya=Aa[0];l(ya.x0)&&l(ya.y0)&&(kn=Kt(ya),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>kn.spikeDistance)&&(Qe.hLinePoint=kn))}}}}}Xt();function Ot(hr,Yr,zr){for(var Pr=null,br=1/0,jr,zn=0;zn<hr.length;zn++)jr=hr[zn].spikeDistance,zr&&zn===0&&(jr=-1/0),jr<=br&&jr<=Yr&&(Pr=hr[zn],br=jr);return Pr}function Kt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var Je={fullLayout:ne,container:ne._hoverlayer,event:G},gt=U._spikepoints,Et={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};U._spikepoints=Et;var rr=function(){Ye.sort(function(hr,Yr){return hr.distance-Yr.distance}),Ye=V(Ye,Ge)};rr();var vr=Ge.charAt(0),or=(vr==="x"||vr==="y")&&Ye[0]&&S[Ye[0].trace.type];if(fe&&Ie!==0&&Ye.length!==0){var dr=Ye.filter(function(hr){return hr.ya.showspikes}),Lr=Ot(dr,Ie,or);Qe.hLinePoint=Kt(Lr);var kr=Ye.filter(function(hr){return hr.xa.showspikes}),tr=Ot(kr,Ie,or);Qe.vLinePoint=Kt(tr)}if(Ye.length===0){var Or=i.unhoverRaw(U,G);return fe&&(Qe.hLinePoint!==null||Qe.vLinePoint!==null)&&q(gt)&&Y(U,Qe,Je),Or}if(fe&&q(gt)&&Y(U,Qe,Je),p.isXYhover(Bt)&&Ye[0].length!==0&&Ye[0].trace.type!=="splom"){var et=Ye[0];L[et.trace.type]?Ye=Ye.filter(function(hr){return hr.trace.index===et.trace.index}):Ye=[et];var we=Ye.length,Se=K("x",et,ne),De=K("y",et,ne);Xt(Se,De);var Xe=[],$e={},ot=0,st=function(hr){var Yr=L[hr.trace.type]?P(hr):hr.trace.index;if(!$e[Yr])ot++,$e[Yr]=ot,Xe.push(hr);else{var zr=$e[Yr]-1,Pr=Xe[zr];zr>0&&Math.abs(hr.distance)<Math.abs(Pr.distance)&&(Xe[zr]=hr)}},pt;for(pt=0;pt<we;pt++)st(Ye[pt]);for(pt=Ye.length-1;pt>we-1;pt--)st(Ye[pt]);Ye=Xe,rr()}var wt=U._hoverdata,Yt=[],mr=se(U),xr=ue(U);for(Ve=0;Ve<Ye.length;Ve++){var Tr=Ye[Ve],yr=p.makeEventData(Tr,Tr.trace,Tr.cd);if(Tr.hovertemplate!==!1){var Dr=!1;Tr.cd[Tr.index]&&Tr.cd[Tr.index].ht&&(Dr=Tr.cd[Tr.index].ht),Tr.hovertemplate=Dr||Tr.trace.hovertemplate||!1}if(Tr.xa&&Tr.ya){var tn=Tr.x0+Tr.xa._offset,wr=Tr.x1+Tr.xa._offset,gr=Tr.y0+Tr.ya._offset,yn=Tr.y1+Tr.ya._offset,Gr=Math.min(tn,wr),Ar=Math.max(tn,wr),nn=Math.min(gr,yn),fn=Math.max(gr,yn);yr.bbox={x0:Gr+xr,x1:Ar+xr,y0:nn+mr,y1:fn+mr}}Tr.eventData=[yr],Yt.push(yr)}U._hoverdata=Yt;var Xr=Ge==="y"&&(qe.length>1||Ye.length>1)||Ge==="closest"&&Ce&&Ye.length>1,at=s.combine(ne.plot_bgcolor||s.background,ne.paper_bgcolor),Ft=I(Ye,{gd:U,hovermode:Ge,rotateLabels:Xr,bgColor:at,container:ne._hoverlayer,outerContainer:ne._paper.node(),commonLabelOpts:ne.hoverlabel,hoverdistance:ne.hoverdistance});if(p.isUnifiedHover(Ge)||(D(Ft,Xr?"xa":"ya",ne),O(Ft,Xr,ne._invScaleX,ne._invScaleY)),j&&j.tagName){var er=h.getComponentMethod("annotations","hasClickToShow")(U,Yt);r(d.select(j),er?"pointer":"")}!j||ee||!X(U,G,wt)||(wt&&U.emit("plotly_unhover",{event:G,points:wt}),U.emit("plotly_hover",{event:G,points:U._hoverdata,xaxes:ye,yaxes:xe,xvals:Ue,yvals:Re}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function I(U,G){var re=G.gd,ee=re._fullLayout,j=G.hovermode,Q=G.rotateLabels,ne=G.bgColor,ae=G.container,ie=G.outerContainer,fe=G.commonLabelOpts||{};if(U.length===0)return[[]];var me=G.fontFamily||v.HOVERFONT,ce=G.fontSize||v.HOVERFONTSIZE,ye=U[0],xe=ye.xa,ke=ye.ya,Ae=j.charAt(0),Oe=ye[Ae+"Label"],He=oe(re,ie),Ge=He.top,_e=He.width,Ie=He.height,Ye=Oe!==void 0&&ye.distance<=G.hoverdistance&&(j==="x"||j==="y");if(Ye){var qe=!0,Ue,Re;for(Ue=0;Ue<U.length;Ue++)if(qe&&U[Ue].zLabel===void 0&&(qe=!1),Re=U[Ue].hoverinfo||U[Ue].trace.hoverinfo,Re){var Ve=Array.isArray(Re)?Re:Re.split("+");if(Ve.indexOf("all")===-1&&Ve.indexOf(j)===-1){Ye=!1;break}}qe&&(Ye=!1)}var dt=ae.selectAll("g.axistext").data(Ye?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var tr=d.select(this),Or=w.ensureSingle(tr,"path","",function(yn){yn.style({"stroke-width":"1px"})}),et=w.ensureSingle(tr,"text","",function(yn){yn.attr("data-notex",1)}),we=fe.bgcolor||s.defaultLine,Se=fe.bordercolor||s.contrast(we),De=s.contrast(we),Xe={family:fe.font.family||me,size:fe.font.size||ce,color:fe.font.color||De};Or.style({fill:we,stroke:Se}),et.text(Oe).call(u.font,Xe).call(n.positionText,0,0).call(n.convertToTspans,re),tr.attr("transform","");var $e=oe(re,et.node()),ot,st;if(j==="x"){var pt=xe.side==="top"?"-":"";et.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Ge-$e.bottom-x-c:Ge-$e.top+x+c),ot=xe._offset+(ye.x0+ye.x1)/2,st=ke._offset+(xe.side==="top"?0:ke._length);var wt=$e.width/2+c;ot<wt?(ot=wt,Or.attr("d","M-"+(wt-x)+",0L-"+(wt-x*2)+","+pt+x+"H"+(c+$e.width/2)+"v"+pt+(c*2+$e.height)+"H-"+wt+"V"+pt+x+"Z")):ot>ee.width-wt?(ot=ee.width-wt,Or.attr("d","M"+(wt-x)+",0L"+wt+","+pt+x+"v"+pt+(c*2+$e.height)+"H-"+wt+"V"+pt+x+"H"+(wt-x*2)+"Z")):Or.attr("d","M0,0L"+x+","+pt+x+"H"+(c+$e.width/2)+"v"+pt+(c*2+$e.height)+"H-"+(c+$e.width/2)+"V"+pt+x+"H-"+x+"Z")}else{var Yt,mr,xr;ke.side==="right"?(Yt="start",mr=1,xr="",ot=xe._offset+xe._length):(Yt="end",mr=-1,xr="-",ot=xe._offset),st=ke._offset+(ye.y0+ye.y1)/2,et.attr("text-anchor",Yt),Or.attr("d","M0,0L"+xr+x+","+x+"V"+(c+$e.height/2)+"h"+xr+(c*2+$e.width)+"V-"+(c+$e.height/2)+"H"+xr+x+"V-"+x+"Z");var Tr=$e.height/2,yr=Ge-$e.top-Tr,Dr="clip"+ee._uid+"commonlabel"+ke._id,tn;if(ot<$e.width+2*c+x){tn="M-"+(x+c)+"-"+Tr+"h-"+($e.width-c)+"V"+Tr+"h"+($e.width-c)+"Z";var wr=$e.width-ot+c;n.positionText(et,wr,yr),Yt==="end"&&et.selectAll("tspan").each(function(){var yn=d.select(this),Gr=u.tester.append("text").text(yn.text()).call(u.font,Xe),Ar=oe(re,Gr.node());Math.round(Ar.width)<Math.round($e.width)&&yn.attr("x",wr-Ar.width),Gr.remove()})}else n.positionText(et,mr*(c+x),yr),tn=null;var gr=ee._topclips.selectAll("#"+Dr).data(tn?[0]:[]);gr.enter().append("clipPath").attr("id",Dr).append("path"),gr.exit().remove(),gr.select("path").attr("d",tn),u.setClipUrl(et,tn?Dr:null,re)}tr.attr("transform",e(ot,st))}),p.isUnifiedHover(j)){ae.selectAll("g.hovertext").remove();var Dt=U.filter(function(tr){return tr.hoverinfo!=="none"});if(Dt.length===0)return;var Gt=ee.hoverlabel,kt=Gt.font,zt={showlegend:!0,legend:{title:{text:Oe,font:kt},font:kt,bgcolor:Gt.bgcolor,bordercolor:Gt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ee.legend?ee.legend.traceorder:void 0,orientation:"v"}},Bt={font:kt};y(zt,Bt,re._fullData);var Lt=Bt.legend;Lt.entries=[];for(var Mt=0;Mt<Dt.length;Mt++){var it=Dt[Mt];if(it.hoverinfo!=="none"){var ht=R(it,!0,j,ee,Oe),Qe=ht[0],Ce=ht[1];it.name=Ce,Ce!==""?it.text=Ce+" : "+Qe:it.text=Qe;var je=it.cd[it.index];je&&(je.mc&&(it.mc=je.mc),je.mcc&&(it.mc=je.mcc),je.mlc&&(it.mlc=je.mlc),je.mlcc&&(it.mlc=je.mlcc),je.mlw&&(it.mlw=je.mlw),je.mrc&&(it.mrc=je.mrc),je.dir&&(it.dir=je.dir)),it._distinct=!0,Lt.entries.push([it])}}Lt.entries.sort(function(tr,Or){return tr[0].trace.index-Or[0].trace.index}),Lt.layer=ae,Lt._inHover=!0,Lt._groupTitleFont=Gt.grouptitlefont,g(re,Lt);var rt=ae.select("g.legend"),ut=oe(re,rt.node()),Pt=ut.width+2*c,St=ut.height+2*c,Nt=Dt[0],Xt=(Nt.x0+Nt.x1)/2,Ot=(Nt.y0+Nt.y1)/2,Kt=!(h.traceIs(Nt.trace,"bar-like")||h.traceIs(Nt.trace,"box-violin")),Je,gt;Ae==="y"?Kt?(gt=Ot-c,Je=Ot+c):(gt=Math.min.apply(null,Dt.map(function(tr){return Math.min(tr.y0,tr.y1)})),Je=Math.max.apply(null,Dt.map(function(tr){return Math.max(tr.y0,tr.y1)}))):gt=Je=w.mean(Dt.map(function(tr){return(tr.y0+tr.y1)/2}))-St/2;var Et,rr;Ae==="x"?Kt?(Et=Xt+c,rr=Xt-c):(Et=Math.max.apply(null,Dt.map(function(tr){return Math.max(tr.x0,tr.x1)})),rr=Math.min.apply(null,Dt.map(function(tr){return Math.min(tr.x0,tr.x1)}))):Et=rr=w.mean(Dt.map(function(tr){return(tr.x0+tr.x1)/2}))-Pt/2;var vr=xe._offset,or=ke._offset;Je+=or,Et+=vr,rr+=vr-Pt,gt+=or-St;var dr,Lr;return Et+Pt<_e&&Et>=0?dr=Et:rr+Pt<_e&&rr>=0?dr=rr:vr+Pt<_e?dr=vr:Et-Xt<Xt-rr+Pt?dr=_e-Pt:dr=0,dr+=c,Je+St<Ie&&Je>=0?Lr=Je:gt+St<Ie&&gt>=0?Lr=gt:or+St<Ie?Lr=or:Je-Ot<Ot-gt+St?Lr=Ie-St:Lr=0,Lr+=c,rt.attr("transform",e(dr-1,Lr-1)),rt}var kr=ae.selectAll("g.hovertext").data(U,function(tr){return P(tr)});return kr.enter().append("g").classed("hovertext",!0).each(function(){var tr=d.select(this);tr.append("rect").call(s.fill,s.addOpacity(ne,.8)),tr.append("text").classed("name",!0),tr.append("path").style("stroke-width","1px"),tr.append("text").classed("nums",!0).call(u.font,me,ce)}),kr.exit().remove(),kr.each(function(tr){var Or=d.select(this).attr("transform",""),et=tr.color;Array.isArray(et)&&(et=et[tr.eventData[0].pointNumber]);var we=tr.bgcolor||et,Se=s.combine(s.opacity(we)?we:s.defaultLine,ne),De=s.combine(s.opacity(et)?et:s.defaultLine,ne),Xe=tr.borderColor||s.contrast(Se),$e=R(tr,Ye,j,ee,Oe,Or),ot=$e[0],st=$e[1],pt=Or.select("text.nums").call(u.font,tr.fontFamily||me,tr.fontSize||ce,tr.fontColor||Xe).text(ot).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,re),wt=Or.select("text.name"),Yt=0,mr=0;if(st&&st!==ot){wt.call(u.font,tr.fontFamily||me,tr.fontSize||ce,De).text(st).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,re);var xr=oe(re,wt.node());Yt=xr.width+2*c,mr=xr.height+2*c}else wt.remove(),Or.select("rect").remove();Or.select("path").style({fill:Se,stroke:Xe});var Tr=tr.xa._offset+(tr.x0+tr.x1)/2,yr=tr.ya._offset+(tr.y0+tr.y1)/2,Dr=Math.abs(tr.x1-tr.x0),tn=Math.abs(tr.y1-tr.y0),wr=oe(re,pt.node()),gr=wr.width/ee._invScaleX,yn=wr.height/ee._invScaleY;tr.ty0=(Ge-wr.top)/ee._invScaleY,tr.bx=gr+2*c,tr.by=Math.max(yn+2*c,mr),tr.anchor="start",tr.txwidth=gr,tr.tx2width=Yt,tr.offset=0;var Gr=(gr+x+c+Yt)*ee._invScaleX,Ar,nn;if(Q)tr.pos=Tr,Ar=yr+tn/2+Gr<=Ie,nn=yr-tn/2-Gr>=0,(tr.idealAlign==="top"||!Ar)&&nn?(yr-=tn/2,tr.anchor="end"):Ar?(yr+=tn/2,tr.anchor="start"):tr.anchor="middle";else if(tr.pos=yr,Ar=Tr+Dr/2+Gr<=_e,nn=Tr-Dr/2-Gr>=0,(tr.idealAlign==="left"||!Ar)&&nn)Tr-=Dr/2,tr.anchor="end";else if(Ar)Tr+=Dr/2,tr.anchor="start";else{tr.anchor="middle";var fn=Gr/2,Xr=Tr+fn-_e,at=Tr-fn;Xr>0&&(Tr-=Xr),at<0&&(Tr+=-at)}pt.attr("text-anchor",tr.anchor),Yt&&wt.attr("text-anchor",tr.anchor),Or.attr("transform",e(Tr,yr)+(Q?o(A):""))}),kr}function R(U,G,re,ee,j,Q){var ne="",ae="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=w.templateString(U.name,U.trace._meta)),ne=$(U.name,U.nameLength));var ie=re.charAt(0),fe=ie==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(ae+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(ae+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(ae+=(ae?"z: ":"")+U.zLabel)):G&&U[ie+"Label"]===j?ae=U[fe+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(ae=U.yLabel):U.yLabel===void 0?ae=U.xLabel:ae="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(ae+=(ae?"<br>":"")+U.text),U.extraText!==void 0&&(ae+=(ae?"<br>":"")+U.extraText),Q&&ae===""&&!U.hovertemplate&&(ne===""&&Q.remove(),ae=ne);var me=U.hovertemplate||!1;if(me){var ce=U.hovertemplateLabels||U;U[ie+"Label"]!==j&&(ce[ie+"other"]=ce[ie+"Val"],ce[ie+"otherLabel"]=ce[ie+"Label"]),ae=w.hovertemplateString(me,ce,ee._d3locale,U.eventData[0]||{},U.trace._meta),ae=ae.replace(z,function(ye,xe){return ne=$(xe,U.nameLength),""})}return[ae,ne]}function D(U,G,re){var ee=0,j=1,Q=U.size(),ne=new Array(Q),ae=0;U.each(function(Ue){var Re=Ue[G],Ve=Re._id.charAt(0)==="x",dt=Re.range;ae===0&&dt&&dt[0]>dt[1]!==Ve&&(j=-1),ne[ae++]=[{datum:Ue,traceIndex:Ue.trace.index,dp:0,pos:Ue.pos,posref:Ue.posref,size:Ue.by*(Ve?M:1)/2,pmin:0,pmax:Ve?re.width:re.height}]}),ne.sort(function(Ue,Re){return Ue[0].posref-Re[0].posref||j*(Re[0].traceIndex-Ue[0].traceIndex)});var ie,fe,me,ce,ye,xe,ke;function Ae(Ue){var Re=Ue[0],Ve=Ue[Ue.length-1];if(fe=Re.pmin-Re.pos-Re.dp+Re.size,me=Ve.pos+Ve.dp+Ve.size-Re.pmax,fe>.01){for(ye=Ue.length-1;ye>=0;ye--)Ue[ye].dp+=fe;ie=!1}if(!(me<.01)){if(fe<-.01){for(ye=Ue.length-1;ye>=0;ye--)Ue[ye].dp-=me;ie=!1}if(!!ie){var dt=0;for(ce=0;ce<Ue.length;ce++)xe=Ue[ce],xe.pos+xe.dp+xe.size>Re.pmax&&dt++;for(ce=Ue.length-1;ce>=0&&!(dt<=0);ce--)xe=Ue[ce],xe.pos>Re.pmax-1&&(xe.del=!0,dt--);for(ce=0;ce<Ue.length&&!(dt<=0);ce++)if(xe=Ue[ce],xe.pos<Re.pmin+1)for(xe.del=!0,dt--,me=xe.size*2,ye=Ue.length-1;ye>=0;ye--)Ue[ye].dp-=me;for(ce=Ue.length-1;ce>=0&&!(dt<=0);ce--)xe=Ue[ce],xe.pos+xe.dp+xe.size>Re.pmax&&(xe.del=!0,dt--)}}}for(;!ie&&ee<=Q;){for(ee++,ie=!0,ce=0;ce<ne.length-1;){var Oe=ne[ce],He=ne[ce+1],Ge=Oe[Oe.length-1],_e=He[0];if(fe=Ge.pos+Ge.dp+Ge.size-_e.pos-_e.dp+_e.size,fe>.01&&Ge.pmin===_e.pmin&&Ge.pmax===_e.pmax){for(ye=He.length-1;ye>=0;ye--)He[ye].dp+=fe;for(Oe.push.apply(Oe,He),ne.splice(ce+1,1),ke=0,ye=Oe.length-1;ye>=0;ye--)ke+=Oe[ye].dp;for(me=ke/Oe.length,ye=Oe.length-1;ye>=0;ye--)Oe[ye].dp-=me;ie=!1}else ce++}ne.forEach(Ae)}for(ce=ne.length-1;ce>=0;ce--){var Ie=ne[ce];for(ye=Ie.length-1;ye>=0;ye--){var Ye=Ie[ye],qe=Ye.datum;qe.offset=Ye.dp,qe.del=Ye.del}}}function O(U,G,re,ee){var j=function(ne){return ne*re},Q=function(ne){return ne*ee};U.each(function(ne){var ae=d.select(this);if(ne.del)return ae.remove();var ie=ae.select("text.nums"),fe=ne.anchor,me=fe==="end"?-1:1,ce={start:1,end:-1,middle:0}[fe],ye=ce*(x+c),xe=ye+ce*(ne.txwidth+c),ke=0,Ae=ne.offset,Oe=fe==="middle";Oe&&(ye-=ne.tx2width/2,xe+=ne.txwidth/2+c),G&&(Ae*=-T,ke=ne.offset*_),ae.select("path").attr("d",Oe?"M-"+j(ne.bx/2+ne.tx2width/2)+","+Q(Ae-ne.by/2)+"h"+j(ne.bx)+"v"+Q(ne.by)+"h-"+j(ne.bx)+"Z":"M0,0L"+j(me*x+ke)+","+Q(x+Ae)+"v"+Q(ne.by/2-x)+"h"+j(me*ne.bx)+"v-"+Q(ne.by)+"H"+j(me*x+ke)+"V"+Q(Ae-x)+"Z");var He=ke+ye,Ge=Ae+ne.ty0-ne.by/2+c,_e=ne.textAlign||"auto";_e!=="auto"&&(_e==="left"&&fe!=="start"?(ie.attr("text-anchor","start"),He=Oe?-ne.bx/2-ne.tx2width/2+c:-ne.bx-c):_e==="right"&&fe!=="end"&&(ie.attr("text-anchor","end"),He=Oe?ne.bx/2-ne.tx2width/2-c:ne.bx+c)),ie.call(n.positionText,j(He),Q(Ge)),ne.tx2width&&(ae.select("text.name").call(n.positionText,j(xe+ce*c+ke),Q(Ae+ne.ty0-ne.by/2+c)),ae.select("rect").call(u.setRect,j(xe+(ce-1)*ne.tx2width/2+ke),Q(Ae-ne.by/2-1),j(ne.tx2width),Q(ne.by+2)))})}function F(U,G){var re=U.index,ee=U.trace||{},j=U.cd[0],Q=U.cd[re]||{};function ne(ye){return ye||l(ye)&&ye===0}var ae=Array.isArray(re)?function(ye,xe){var ke=w.castOption(j,re,ye);return ne(ke)?ke:w.extractOption({},ee,"",xe)}:function(ye,xe){return w.extractOption(Q,ee,ye,xe)};function ie(ye,xe,ke){var Ae=ae(xe,ke);ne(Ae)&&(U[ye]=Ae)}if(ie("hoverinfo","hi","hoverinfo"),ie("bgcolor","hbg","hoverlabel.bgcolor"),ie("borderColor","hbc","hoverlabel.bordercolor"),ie("fontFamily","htf","hoverlabel.font.family"),ie("fontSize","hts","hoverlabel.font.size"),ie("fontColor","htc","hoverlabel.font.color"),ie("nameLength","hnl","hoverlabel.namelength"),ie("textAlign","hta","hoverlabel.align"),U.posref=G==="y"||G==="closest"&&ee.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=w.constrain(U.x0,0,U.xa._length),U.x1=w.constrain(U.x1,0,U.xa._length),U.y0=w.constrain(U.y0,0,U.ya._length),U.y1=w.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:f.hoverLabelText(U.xa,U.xLabelVal,ee.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:f.hoverLabelText(U.ya,U.yLabelVal,ee.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var fe=f.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+fe+" / -"+f.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+fe,G==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var me=f.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+me+" / -"+f.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+me,G==="y"&&(U.distance+=1)}var ce=U.hoverinfo||U.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(U.xLabel=void 0),ce.indexOf("y")===-1&&(U.yLabel=void 0),ce.indexOf("z")===-1&&(U.zLabel=void 0),ce.indexOf("text")===-1&&(U.text=void 0),ce.indexOf("name")===-1&&(U.name=void 0)),U}function Y(U,G,re){var ee=re.container,j=re.fullLayout,Q=j._size,ne=re.event,ae=!!G.hLinePoint,ie=!!G.vLinePoint,fe,me;if(ee.selectAll(".spikeline").remove(),!!(ie||ae)){var ce=s.combine(j.plot_bgcolor,j.paper_bgcolor);if(ae){var ye=G.hLinePoint,xe,ke;fe=ye&&ye.xa,me=ye&&ye.ya;var Ae=me.spikesnap;Ae==="cursor"?(xe=ne.pointerX,ke=ne.pointerY):(xe=fe._offset+ye.x,ke=me._offset+ye.y);var Oe=b.readability(ye.color,ce)<1.5?s.contrast(ce):ye.color,He=me.spikemode,Ge=me.spikethickness,_e=me.spikecolor||Oe,Ie=f.getPxPosition(U,me),Ye,qe;if(He.indexOf("toaxis")!==-1||He.indexOf("across")!==-1){if(He.indexOf("toaxis")!==-1&&(Ye=Ie,qe=xe),He.indexOf("across")!==-1){var Ue=me._counterDomainMin,Re=me._counterDomainMax;me.anchor==="free"&&(Ue=Math.min(Ue,me.position),Re=Math.max(Re,me.position)),Ye=Q.l+Ue*Q.w,qe=Q.l+Re*Q.w}ee.insert("line",":first-child").attr({x1:Ye,x2:qe,y1:ke,y2:ke,"stroke-width":Ge,stroke:_e,"stroke-dasharray":u.dashStyle(me.spikedash,Ge)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:Ye,x2:qe,y1:ke,y2:ke,"stroke-width":Ge+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}He.indexOf("marker")!==-1&&ee.insert("circle",":first-child").attr({cx:Ie+(me.side!=="right"?Ge:-Ge),cy:ke,r:Ge,fill:_e}).classed("spikeline",!0)}if(ie){var Ve=G.vLinePoint,dt,Dt;fe=Ve&&Ve.xa,me=Ve&&Ve.ya;var Gt=fe.spikesnap;Gt==="cursor"?(dt=ne.pointerX,Dt=ne.pointerY):(dt=fe._offset+Ve.x,Dt=me._offset+Ve.y);var kt=b.readability(Ve.color,ce)<1.5?s.contrast(ce):Ve.color,zt=fe.spikemode,Bt=fe.spikethickness,Lt=fe.spikecolor||kt,Mt=f.getPxPosition(U,fe),it,ht;if(zt.indexOf("toaxis")!==-1||zt.indexOf("across")!==-1){if(zt.indexOf("toaxis")!==-1&&(it=Mt,ht=Dt),zt.indexOf("across")!==-1){var Qe=fe._counterDomainMin,Ce=fe._counterDomainMax;fe.anchor==="free"&&(Qe=Math.min(Qe,fe.position),Ce=Math.max(Ce,fe.position)),it=Q.t+(1-Ce)*Q.h,ht=Q.t+(1-Qe)*Q.h}ee.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Bt,stroke:Lt,"stroke-dasharray":u.dashStyle(fe.spikedash,Bt)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Bt+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}zt.indexOf("marker")!==-1&&ee.insert("circle",":first-child").attr({cx:dt,cy:Mt-(fe.side!=="top"?Bt:-Bt),r:Bt,fill:Lt}).classed("spikeline",!0)}}}function X(U,G,re){if(!re||re.length!==U._hoverdata.length)return!0;for(var ee=re.length-1;ee>=0;ee--){var j=re[ee],Q=U._hoverdata[ee];if(j.curveNumber!==Q.curveNumber||String(j.pointNumber)!==String(Q.pointNumber)||String(j.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function q(U,G){return!G||G.vLinePoint!==U._spikepoints.vLinePoint||G.hLinePoint!==U._spikepoints.hLinePoint}function $(U,G){return n.plainText(U||"",{len:G,allowedTags:["br","sub","sup","b","i","em"]})}function V(U,G){for(var re=G.charAt(0),ee=[],j=[],Q=[],ne=0;ne<U.length;ne++){var ae=U[ne];h.traceIs(ae.trace,"bar-like")||h.traceIs(ae.trace,"box-violin")?Q.push(ae):ae.trace[re+"period"]?j.push(ae):ee.push(ae)}return ee.concat(j).concat(Q)}function K(U,G,re){var ee=G[U+"a"],j=G[U+"Val"],Q=G.cd[0];if(ee.type==="category")j=ee._categoriesMap[j];else if(ee.type==="date"){var ne=G.trace[U+"periodalignment"];if(ne){var ae=G.cd[G.index],ie=ae[U+"Start"];ie===void 0&&(ie=ae[U]);var fe=ae[U+"End"];fe===void 0&&(fe=ae[U]);var me=fe-ie;ne==="end"?j+=me:ne==="middle"&&(j+=me/2)}j=ee.d2c(j)}return Q&&Q.t&&Q.t.posLetter===ee._id&&(re.boxmode==="group"||re.violinmode==="group")&&(j+=Q.t.dPos),j}function se(U){return U.offsetTop+U.clientTop}function ue(U){return U.offsetLeft+U.clientLeft}function oe(U,G){var re=U._fullLayout,ee=G.getBoundingClientRect(),j=ee.x,Q=ee.y,ne=j+ee.width,ae=Q+ee.height,ie=w.apply3DTransform(re._invTransform)(j,Q),fe=w.apply3DTransform(re._invTransform)(ne,ae),me=ie[0],ce=ie[1],ye=fe[0],xe=fe[1];return{x:me,y:ce,width:ye-me,height:xe-ce,top:Math.min(ce,xe),left:Math.min(me,ye),right:Math.max(me,ye),bottom:Math.max(ce,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("./helpers").isUnifiedHover;B.exports=function(e,o,a,n){n=n||{};var r=o.legend;function u(s){n.font[s]||(n.font[s]=r?o.legend.font[s]:o.font[s])}o&&b(o.hovermode)&&(n.font||(n.font={}),u("size"),u("family"),u("color"),r?(n.bgcolor||(n.bgcolor=l.combine(o.legend.bgcolor,o.paper_bgcolor)),n.bordercolor||(n.bordercolor=o.legend.bordercolor)):n.bgcolor||(n.bgcolor=o.paper_bgcolor)),a("hoverlabel.bgcolor",n.bgcolor),a("hoverlabel.bordercolor",n.bordercolor),a("hoverlabel.namelength",n.namelength),d.coerceFont(a,"hoverlabel.font",n.font),a("hoverlabel.align",n.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return e[a]!==void 0?e[a]:d.coerce(w,e,l,a,n)}return o("clickmode"),o("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../dragelement"),w=t("./helpers"),e=t("./layout_attributes"),o=t("./hover");B.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:w.getDistanceFunction,getClosest:w.getClosest,inbox:w.inbox,quadrature:w.quadrature,appendArrayPointValue:w.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:o.hover,unhover:b.unhover,loneHover:o.loneHover,loneUnhover:a,click:t("./click")};function a(u){var s=l.isD3Selection(u)?u:d.select(u);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function n(u,s,i){return l.castOption(u,s,"hoverlabel."+i)}function r(u,s,i){function f(h){return l.coerceHoverinfo({hoverinfo:h},{_module:u._module},s)}return l.castOption(u,i,"hoverinfo",f)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(t,B,H){var d=t("./constants"),l=t("../../plots/font_attributes"),b=l({editType:"none"});b.family.dflt=d.HOVERFONT,b.size.dflt=d.HOVERFONTSIZE,B.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,grouptitlefont:l({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes"),b=t("./hovermode_defaults"),w=t("./hoverlabel_defaults");B.exports=function(o,a){function n(h,p){return d.coerce(o,a,l,h,p)}var r=b(o,a);r&&(n("hoverdistance"),n("spikedistance"));var u=n("dragmode");u==="select"&&n("selectdirection");var s=a._has("mapbox"),i=a._has("geo"),f=a._basePlotModules.length;a.dragmode==="zoom"&&((s||i)&&f===1||s&&i&&f===2)&&(a.dragmode="pan"),w(o,a,n),d.coerceFont(n,"hoverlabel.grouptitlefont",a.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(t,B,H){var d=t("../../lib"),l=t("./hoverlabel_defaults"),b=t("./layout_attributes");B.exports=function(e,o){function a(n,r){return d.coerce(e,o,b,n,r)}l(e,o,a)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/regex").counter,b=t("../../plots/domain").attributes,w=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[l("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(i,f,h){var p=f[h+"axes"],v=Object.keys((i._splomAxes||{})[h]||{});if(Array.isArray(p))return p;if(v.length)return v}function n(i,f){var h=i.grid||{},p=a(f,h,"x"),v=a(f,h,"y");if(!i.grid&&!p&&!v)return;var y=Array.isArray(h.subplots)&&Array.isArray(h.subplots[0]),g=Array.isArray(p),A=Array.isArray(v),m=g&&p!==h.xaxes&&A&&v!==h.yaxes,M,_;y?(M=h.subplots.length,_=h.subplots[0].length):(A&&(M=v.length),g&&(_=p.length));var T=e.newContainer(f,"grid");function x(O,F){return d.coerce(h,T,o,O,F)}var c=x("rows",M),L=x("columns",_);if(!(c*L>1)){delete f.grid;return}if(!y&&!g&&!A){var S=x("pattern")==="independent";S&&(y=!0)}T._hasSubplotGrid=y;var k=x("roworder"),P=k==="top to bottom",z=y?.2:.1,I=y?.3:.1,R,D;m&&f._splomGridDflt&&(R=f._splomGridDflt.xside,D=f._splomGridDflt.yside),T._domains={x:r("x",x,z,R,L),y:r("y",x,I,D,c,P)}}function r(i,f,h,p,v,y){var g=f(i+"gap",h),A=f("domain."+i);f(i+"side",p);for(var m=new Array(v),M=A[0],_=(A[1]-M)/(v-g),T=_*(1-g),x=0;x<v;x++){var c=M+_*x;m[y?v-1-x:x]=[c,c+T]}return m}function u(i,f){var h=f.grid;if(!(!h||!h._domains)){var p=i.grid||{},v=f._subplots,y=h._hasSubplotGrid,g=h.rows,A=h.columns,m=h.pattern==="independent",M,_,T,x,c,L,S,k=h._axisMap={};if(y){var P=p.subplots||[];L=h.subplots=new Array(g);var z=1;for(M=0;M<g;M++){var I=L[M]=new Array(A),R=P[M]||[];for(_=0;_<A;_++)if(m?(c=z===1?"xy":"x"+z+"y"+z,z++):c=R[_],I[_]="",v.cartesian.indexOf(c)!==-1){if(S=c.indexOf("y"),T=c.slice(0,S),x=c.slice(S),k[T]!==void 0&&k[T]!==_||k[x]!==void 0&&k[x]!==M)continue;I[_]=c,k[T]=_,k[x]=M}}}else{var D=a(f,p,"x"),O=a(f,p,"y");h.xaxes=s(D,v.xaxis,A,k,"x"),h.yaxes=s(O,v.yaxis,g,k,"y")}var F=h._anchors={},Y=h.roworder==="top to bottom";for(var X in k){var q=X.charAt(0),$=h[q+"side"],V,K,se;if($.length<8)F[X]="free";else if(q==="x"){if($.charAt(0)==="t"===Y?(V=0,K=1,se=g):(V=g-1,K=-1,se=-1),y){var ue=k[X];for(M=V;M!==se;M+=K)if(c=L[M][ue],!!c&&(S=c.indexOf("y"),c.slice(0,S)===X)){F[X]=c.slice(S);break}}else for(M=V;M!==se;M+=K)if(x=h.yaxes[M],v.cartesian.indexOf(X+x)!==-1){F[X]=x;break}}else if($.charAt(0)==="l"?(V=0,K=1,se=A):(V=A-1,K=-1,se=-1),y){var oe=k[X];for(M=V;M!==se;M+=K)if(c=L[oe][M],!!c&&(S=c.indexOf("y"),c.slice(S)===X)){F[X]=c.slice(0,S);break}}else for(M=V;M!==se;M+=K)if(T=h.xaxes[M],v.cartesian.indexOf(T+X)!==-1){F[X]=T;break}}}}function s(i,f,h,p,v){var y=new Array(h),g;function A(m,M){f.indexOf(M)!==-1&&p[M]===void 0?(y[m]=M,p[M]=m):y[m]=""}if(Array.isArray(i))for(g=0;g<h;g++)A(g,i[g]);else for(A(0,v),g=1;g<h;g++)A(g,v+(g+1));return y}B.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:n,contentDefaults:u}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(t,B,H){var d=t("../../plots/cartesian/constants"),l=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=l("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib/to_log_range");B.exports=function(w,e,o,a){e=e||{};var n=o==="log"&&e.type==="linear",r=o==="linear"&&e.type==="log";if(!!(n||r)){for(var u=w._fullLayout.images,s=e._id.charAt(0),i,f,h=0;h<u.length;h++)if(i=u[h],f="images["+h+"].",i[s+"ref"]===e._id){var p=i[s],v=i["size"+s],y=null,g=null;if(n){y=l(p,e.range);var A=v/Math.pow(10,y)/2;g=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else y=Math.pow(10,p),g=y*(Math.pow(10,v/2)-Math.pow(10,-v/2));d(y)?d(g)||(g=null):(y=null,g=null),a(f+s,y),a(f+"size"+s,g)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./attributes"),e="images";B.exports=function(n,r){var u={name:e,handleItemDefaults:o};b(n,r,u)};function o(a,n,r){function u(A,m){return d.coerce(a,n,w,A,m)}var s=u("source"),i=u("visible",!!s);if(!i)return n;u("layer"),u("xanchor"),u("yanchor"),u("sizex"),u("sizey"),u("sizing"),u("opacity");for(var f={_fullLayout:r},h=["x","y"],p=0;p<2;p++){var v=h[p],y=l.coerceRef(a,n,f,v,"paper",void 0);if(y!=="paper"){var g=l.getFromId(f,y);g._imgIndices.push(n._index)}l.coercePosition(n,f,u,y,v,0)}return n}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(t,B,H){var d=t("@plotly/d3"),l=t("../drawing"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");B.exports=function(a){var n=a._fullLayout,r=[],u={},s=[],i,f;for(f=0;f<n.images.length;f++){var h=n.images[f];if(h.visible)if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){i=w.ref2id(h.xref)+w.ref2id(h.yref);var p=n._plots[i];if(!p){s.push(h);continue}p.mainplot&&(i=p.mainplot.id),u[i]||(u[i]=[]),u[i].push(h)}else h.layer==="above"?r.push(h):s.push(h)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(x){var c=d.select(this);if(this._imgSrc!==x.source)if(c.attr("xmlns",e.svg),x.source&&x.source.slice(0,5)==="data:")c.attr("xlink:href",x.source),this._imgSrc=x.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height;var I=z.getContext("2d");I.drawImage(this,0,0);var R=z.toDataURL("image/png");c.attr("xlink:href",R),S()},c.on("error",P),k.src=x.source,this._imgSrc=x.source;function P(){c.remove(),S()}}.bind(this));a._promises.push(L)}}function g(x){var c=d.select(this),L=b.getFromId(a,x.xref),S=b.getFromId(a,x.yref),k=b.getRefType(x.xref)==="domain",P=b.getRefType(x.yref)==="domain",z=n._size,I,R;L!==void 0?I=typeof x.xref=="string"&&k?L._length*x.sizex:Math.abs(L.l2p(x.sizex)-L.l2p(0)):I=x.sizex*z.w,S!==void 0?R=typeof x.yref=="string"&&P?S._length*x.sizey:Math.abs(S.l2p(x.sizey)-S.l2p(0)):R=x.sizey*z.h;var D=I*v.x[x.xanchor].offset,O=R*v.y[x.yanchor].offset,F=v.x[x.xanchor].sizing+v.y[x.yanchor].sizing,Y,X;switch(L!==void 0?Y=typeof x.xref=="string"&&k?L._length*x.x+L._offset:L.r2p(x.x)+L._offset:Y=x.x*z.w+z.l,Y+=D,S!==void 0?X=typeof x.yref=="string"&&P?S._length*(1-x.y)+S._offset:S.r2p(x.y)+S._offset:X=z.h-x.y*z.h+z.t,X+=O,x.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}c.attr({x:Y,y:X,width:I,height:R,preserveAspectRatio:F,opacity:x.opacity});var q=L&&b.getRefType(x.xref)!=="domain"?L._id:"",$=S&&b.getRefType(x.yref)!=="domain"?S._id:"",V=q+$;l.setClipUrl(c,V?"clip"+n._uid+V:null,a)}var A=n._imageLowerLayer.selectAll("image").data(s),m=n._imageUpperLayer.selectAll("image").data(r);A.enter().append("image"),m.enter().append("image"),A.exit().remove(),m.exit().remove(),A.each(function(x){y.bind(this)(x),g.bind(this)(x)}),m.each(function(x){y.bind(this)(x),g.bind(this)(x)});var M=Object.keys(n._plots);for(f=0;f<M.length;f++){i=M[f];var _=n._plots[i];if(!!_.imagelayer){var T=_.imagelayer.selectAll("image").data(u[i]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(x){y.bind(this)(x),g.bind(this)(x)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(t,B,H){B.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes");B.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),grouptitlefont:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(t,B,H){B.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plot_api/plot_template"),w=t("../../plots/attributes"),e=t("./attributes"),o=t("../../plots/layout_attributes"),a=t("./helpers");B.exports=function(r,u,s){var i=r.legend||{},f=b.newContainer(u,"legend");function h(R,D){return l.coerce(i,f,e,R,D)}for(var p,v=function(R,D){var O=p._input,F=p;return l.coerce(O,F,w,R,D)},y=u.font||{},g=l.coerceFont(h,"grouptitlefont",l.extendFlat({},y,{size:Math.round(y.size*1.1)})),A=0,m=!1,M="normal",_=0;_<s.length;_++)p=s[_],!!p.visible&&((p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&p._module.attributes.showlegend.dflt===!1))&&(A++,p.showlegend&&(m=!0,(d.traceIs(p,"pie-like")||p._input.showlegend===!0)&&A++),l.coerceFont(v,"legendgrouptitle.font",g)),(d.traceIs(p,"bar")&&u.barmode==="stack"||["tonextx","tonexty"].indexOf(p.fill)!==-1)&&(M=a.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),p.legendgroup!==void 0&&p.legendgroup!==""&&(M=a.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var T=l.coerce(r,u,o,"showlegend",m&&A>1);if(T===!1&&(u.legend=void 0),!(T===!1&&!i.uirevision)&&(h("uirevision",u.uirevision),T!==!1)){h("bgcolor",u.paper_bgcolor),h("bordercolor"),h("borderwidth");var x=l.coerceFont(h,"font",u.font),c=h("orientation"),L=c==="h",S,k,P;L?(S=0,d.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),h("traceorder",M),a.isGrouped(u.legend)&&h("tracegroupgap"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("x",S),h("xanchor"),h("y",k),h("yanchor",P),h("valign"),l.noneOrAll(i,f,["x","y"]);var z=h("title.text");if(z){h("title.side",L?"left":"top");var I=l.extendFlat({},x,{size:l.bigFont(x.size)});l.coerceFont(h,"title.font",I)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib/events"),o=t("../dragelement"),a=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),u=t("./handle_click"),s=t("./constants"),i=t("../../constants/alignment"),f=i.LINE_SPACING,h=i.FROM_TL,p=i.FROM_BR,v=t("./get_legend_data"),y=t("./style"),g=t("./helpers"),A=1;B.exports=function(D,O){return O||(O=D._fullLayout.legend||{}),m(D,O)};function m(R,D){var O=R._fullLayout,F="legend"+O._uid,Y,X=D._inHover;if(X?(Y=D.layer,F+="-hover"):Y=O._infolayer,!!Y){R._legendMouseDownTime||(R._legendMouseDownTime=0);var q;if(X){if(!D.entries)return;q=v(D.entries,D)}else{if(!R.calcdata)return;q=O.showlegend&&v(R.calcdata,D)}var $=O.hiddenlabels||[];if(!X&&(!O.showlegend||!q.length))return Y.selectAll(".legend").remove(),O._topdefs.select("#"+F).remove(),b.autoMargin(R,"legend");var V=l.ensureSingle(Y,"g","legend",function(j){X||j.attr("pointer-events","all")}),K=l.ensureSingleById(O._topdefs,"clipPath",F,function(j){j.append("rect")}),se=l.ensureSingle(V,"rect","bg",function(j){j.attr("shape-rendering","crispEdges")});se.call(n.stroke,D.bordercolor).call(n.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var ue=l.ensureSingle(V,"g","scrollbox"),oe=D.title;if(D._titleWidth=0,D._titleHeight=0,oe.text){var U=l.ensureSingle(ue,"text","legendtitletext");U.attr("text-anchor","start").call(a.font,oe.font).text(oe.text),c(U,ue,R,D,A)}else ue.selectAll(".legendtitletext").remove();var G=l.ensureSingle(V,"rect","scrollbar",function(j){j.attr(s.scrollBarEnterAttrs).call(n.fill,s.scrollBarColor)}),re=ue.selectAll("g.groups").data(q);re.enter().append("g").attr("class","groups"),re.exit().remove();var ee=re.selectAll("g.traces").data(l.identity);ee.enter().append("g").attr("class","traces"),ee.exit().remove(),ee.style("opacity",function(j){var Q=j[0].trace;return w.traceIs(Q,"pie-like")?$.indexOf(j[0].label)!==-1?.5:1:Q.visible==="legendonly"?.5:1}).each(function(){d.select(this).call(_,R,D)}).call(y,R,D).each(function(){X||d.select(this).call(x,R)}),l.syncOrAsync([b.previousPromises,function(){return k(R,re,ee,D)},function(){var j=O._size,Q=D.borderwidth;if(!X){var ne=P(R);if(ne)return;var ae=j.l+j.w*D.x-h[z(D)]*D._width,ie=j.t+j.h*(1-D.y)-h[I(D)]*D._effHeight;if(O.margin.autoexpand){var fe=ae,me=ie;ae=l.constrain(ae,0,O.width-D._width),ie=l.constrain(ie,0,O.height-D._effHeight),ae!==fe&&l.log("Constrain legend.x to make legend fit inside graph"),ie!==me&&l.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(V,ae,ie)}if(G.on(".drag",null),V.on("wheel",null),X||D._height<=D._maxHeight||R._context.staticPlot){var ce=D._effHeight;X&&(ce=D._height),se.attr({width:D._width-Q,height:ce-Q,x:Q/2,y:Q/2}),a.setTranslate(ue,0,0),K.select("rect").attr({width:D._width-2*Q,height:ce-2*Q,x:Q,y:Q}),a.setClipUrl(ue,F,R),a.setRect(G,0,0,0,0),delete D._scrollY}else{var ye=Math.max(s.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),xe=D._effHeight-ye-2*s.scrollBarMargin,ke=D._height-D._effHeight,Ae=xe/ke,Oe=Math.min(D._scrollY||0,ke);se.attr({width:D._width-2*Q+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-Q,x:Q/2,y:Q/2}),K.select("rect").attr({width:D._width-2*Q+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-2*Q,x:Q,y:Q+Oe}),a.setClipUrl(ue,F,R),Re(Oe,ye,Ae),V.on("wheel",function(){Oe=l.constrain(D._scrollY+d.event.deltaY/xe*ke,0,ke),Re(Oe,ye,Ae),Oe!==0&&Oe!==ke&&d.event.preventDefault()});var He,Ge,_e,Ie=function(kt,zt,Bt){var Lt=(Bt-zt)/Ae+kt;return l.constrain(Lt,0,ke)},Ye=function(kt,zt,Bt){var Lt=(zt-Bt)/Ae+kt;return l.constrain(Lt,0,ke)},qe=d.behavior.drag().on("dragstart",function(){var kt=d.event.sourceEvent;kt.type==="touchstart"?He=kt.changedTouches[0].clientY:He=kt.clientY,_e=Oe}).on("drag",function(){var kt=d.event.sourceEvent;kt.buttons===2||kt.ctrlKey||(kt.type==="touchmove"?Ge=kt.changedTouches[0].clientY:Ge=kt.clientY,Oe=Ie(_e,He,Ge),Re(Oe,ye,Ae))});G.call(qe);var Ue=d.behavior.drag().on("dragstart",function(){var kt=d.event.sourceEvent;kt.type==="touchstart"&&(He=kt.changedTouches[0].clientY,_e=Oe)}).on("drag",function(){var kt=d.event.sourceEvent;kt.type==="touchmove"&&(Ge=kt.changedTouches[0].clientY,Oe=Ye(_e,He,Ge),Re(Oe,ye,Ae))});ue.call(Ue)}function Re(kt,zt,Bt){D._scrollY=R._fullLayout.legend._scrollY=kt,a.setTranslate(ue,0,-kt),a.setRect(G,D._width,s.scrollBarMargin+kt*Bt,s.scrollBarWidth,zt),K.select("rect").attr("y",Q+kt)}if(R._context.edits.legendPosition){var Ve,dt,Dt,Gt;V.classed("cursor-move",!0),o.init({element:V.node(),gd:R,prepFn:function(){var kt=a.getTranslate(V);Dt=kt.x,Gt=kt.y},moveFn:function(kt,zt){var Bt=Dt+kt,Lt=Gt+zt;a.setTranslate(V,Bt,Lt),Ve=o.align(Bt,0,j.l,j.l+j.w,D.xanchor),dt=o.align(Lt,0,j.t+j.h,j.t,D.yanchor)},doneFn:function(){Ve!==void 0&&dt!==void 0&&w.call("_guiRelayout",R,{"legend.x":Ve,"legend.y":dt})},clickFn:function(kt,zt){var Bt=Y.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return zt.clientX>=Lt.left&&zt.clientX<=Lt.right&&zt.clientY>=Lt.top&&zt.clientY<=Lt.bottom});Bt.size()>0&&M(R,V,Bt,kt,zt)}})}}],R)}}function M(R,D,O,F,Y){var X=O.data()[0][0].trace,q={event:Y,node:O.node(),curveNumber:X.index,expandedIndex:X._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};X._group&&(q.group=X._group),w.traceIs(X,"pie-like")&&(q.label=O.datum()[0].label);var $=e.triggerHandler(R,"plotly_legendclick",q);if($!==!1){if(F===1)D._clickTimeout=setTimeout(function(){!R._fullLayout||u(O,R,F)},R._context.doubleClickDelay);else if(F===2){D._clickTimeout&&clearTimeout(D._clickTimeout),R._legendMouseDownTime=0;var V=e.triggerHandler(R,"plotly_legenddoubleclick",q);V!==!1&&u(O,R,F)}}}function _(R,D,O){var F=R.data()[0][0],Y=F.trace,X=w.traceIs(Y,"pie-like"),q=!O._inHover&&D._context.edits.legendText&&!X,$=O._maxNameLength,V,K;F.groupTitle?(V=F.groupTitle.text,K=F.groupTitle.font):(K=O.font,O.entries?V=F.text:(V=X?F.label:Y.name,Y._meta&&(V=l.templateString(V,Y._meta))));var se=l.ensureSingle(R,"text","legendtext");se.attr("text-anchor","start").call(a.font,K).text(q?T(V,$):V);var ue=O.itemwidth+s.itemGap*2;r.positionText(se,ue,0),q?se.call(r.makeEditable,{gd:D,text:V}).call(c,R,D,O).on("edit",function(oe){this.text(T(oe,$)).call(c,R,D,O);var U=F.trace._fullInput||{},G={};if(w.hasTransform(U,"groupby")){var re=w.getTransformIndices(U,"groupby"),ee=re[re.length-1],j=l.keyedContainer(U,"transforms["+ee+"].styles","target","value.name");j.set(F.trace._group,oe),G=j.constructUpdate()}else G.name=oe;return w.call("_guiRestyle",D,G,Y.index)}):c(se,R,D,O)}function T(R,D){var O=Math.max(4,D);if(R&&R.trim().length>=O/2)return R;R=R||"";for(var F=O-R.length;F>0;F--)R+=" ";return R}function x(R,D){var O=D._context.doubleClickDelay,F,Y=1,X=l.ensureSingle(R,"rect","legendtoggle",function(q){D._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(n.fill,"rgba(0,0,0,0)")});D._context.staticPlot||(X.on("mousedown",function(){F=new Date().getTime(),F-D._legendMouseDownTime<O?Y+=1:(Y=1,D._legendMouseDownTime=F)}),X.on("mouseup",function(){if(!(D._dragged||D._editing)){var q=D._fullLayout.legend;new Date().getTime()-D._legendMouseDownTime>O&&(Y=Math.max(Y-1,1)),M(D,q,R,Y,d.event)}}))}function c(R,D,O,F,Y){F._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,O,function(){L(D,O,F,Y)})}function L(R,D,O,F){var Y=R.data()[0][0];if(!O._inHover&&Y&&!Y.trace.showlegend){R.remove();return}var X=R.select("g[class*=math-group]"),q=X.node();O||(O=D._fullLayout.legend);var $=O.borderwidth,V;F===A?V=O.title.font:Y.groupTitle?V=Y.groupTitle.font:V=O.font;var K=V.size*f,se,ue;if(q){var oe=a.bBox(q);se=oe.height,ue=oe.width,F===A?a.setTranslate(X,$,$+se*.75):a.setTranslate(X,0,se*.25)}else{var U=R.select(F===A?".legendtitletext":".legendtext"),G=r.lineCount(U),re=U.node();if(se=K*G,ue=re?a.bBox(re).width:0,F===A)O.title.side==="left"&&(ue+=s.itemGap*2),r.positionText(U,$+s.titlePad,$+K);else{var ee=s.itemGap*2+O.itemwidth;Y.groupTitle&&(ee=s.itemGap,ue-=O.itemwidth),r.positionText(U,ee,-K*((G-1)/2-.3))}}F===A?(O._titleWidth=ue,O._titleHeight=se):(Y.lineHeight=K,Y.height=Math.max(se,16)+3,Y.width=ue)}function S(R){var D=0,O=0,F=R.title.side;return F&&(F.indexOf("left")!==-1&&(D=R._titleWidth),F.indexOf("top")!==-1&&(O=R._titleHeight)),[D,O]}function k(R,D,O,F){var Y=R._fullLayout;F||(F=Y.legend);var X=Y._size,q=g.isVertical(F),$=g.isGrouped(F),V=F.borderwidth,K=2*V,se=s.itemGap,ue=F.itemwidth+se*2,oe=2*(V+se),U=I(F),G=F.y<0||F.y===0&&U==="top",re=F.y>1||F.y===1&&U==="bottom",ee=F.tracegroupgap;F._maxHeight=Math.max(G||re?Y.height/2:X.h,30);var j=0;F._width=0,F._height=0;var Q=S(F);if(q)O.each(function(Ve){var dt=Ve[0].height;a.setTranslate(this,V+Q[0],V+Q[1]+F._height+dt/2+se),F._height+=dt,F._width=Math.max(F._width,Ve[0].width)}),j=ue+F._width,F._width+=se+ue+K,F._height+=oe,$&&(D.each(function(Ve,dt){a.setTranslate(this,0,dt*F.tracegroupgap)}),F._height+=(F._lgroupsLength-1)*F.tracegroupgap);else{var ne=z(F),ae=F.x<0||F.x===0&&ne==="right",ie=F.x>1||F.x===1&&ne==="left",fe=re||G,me=Y.width/2;F._maxWidth=Math.max(ae?fe&&ne==="left"?X.l+X.w:me:ie?fe&&ne==="right"?X.r+X.w:me:X.w,2*ue);var ce=0,ye=0;O.each(function(Ve){var dt=Ve[0].width+ue;ce=Math.max(ce,dt),ye+=dt}),j=null;var xe=0;if($){var ke=0,Ae=0,Oe=0;D.each(function(){var Ve=0,dt=0;d.select(this).selectAll("g.traces").each(function(Gt){var kt=Gt[0].width,zt=Gt[0].height;a.setTranslate(this,Q[0],Q[1]+V+se+zt/2+dt),dt+=zt,Ve=Math.max(Ve,ue+kt)}),ke=Math.max(ke,dt);var Dt=Ve+se;Ae>0&&Dt+V+Ae>F._maxWidth&&(xe=Math.max(xe,Ae),Ae=0,Oe+=ke+ee,ke=dt),a.setTranslate(this,Ae,Oe),Ae+=Dt}),F._width=Math.max(xe,Ae)+V,F._height=Oe+ke+oe}else{var He=O.size(),Ge=ye+K+(He-1)*se<F._maxWidth,_e=0,Ie=0,Ye=0,qe=0;O.each(function(Ve){var dt=Ve[0].height,Dt=ue+Ve[0].width,Gt=(Ge?Dt:ce)+se;Gt+V+Ie-se>=F._maxWidth&&(xe=Math.max(xe,qe),Ie=0,Ye+=_e,F._height+=_e,_e=0),a.setTranslate(this,Q[0]+V+Ie,Q[1]+V+Ye+dt/2+se),qe=Ie+Dt+se,Ie+=Gt,_e=Math.max(_e,dt)}),Ge?(F._width=Ie+K,F._height=_e+oe):(F._width=Math.max(xe,qe)+K,F._height+=_e+oe)}}F._width=Math.ceil(Math.max(F._width+Q[0],F._titleWidth+2*(V+s.titlePad))),F._height=Math.ceil(Math.max(F._height+Q[1],F._titleHeight+2*(V+s.itemGap))),F._effHeight=Math.min(F._height,F._maxHeight);var Ue=R._context.edits,Re=Ue.legendText||Ue.legendPosition;O.each(function(Ve){var dt=d.select(this).select(".legendtoggle"),Dt=Ve[0].height,Gt=Re?ue:j||ue+Ve[0].width;q||(Gt+=se/2),a.setRect(dt,0,-Dt/2,Gt,Dt)})}function P(R){var D=R._fullLayout,O=D.legend,F=z(O),Y=I(O);return b.autoMargin(R,"legend",{x:O.x,y:O.y,l:O._width*h[F],r:O._width*p[F],b:O._effHeight*p[Y],t:O._effHeight*h[Y]})}function z(R){return l.isRightAnchor(R)?"right":l.isCenterAnchor(R)?"center":"left"}function I(R){return l.isBottomAnchor(R)?"bottom":l.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(t,B,H){var d=t("../../registry"),l=t("./helpers");B.exports=function(w,e){var o=e._inHover,a=l.isGrouped(e),n=l.isReversed(e),r={},u=[],s=!1,i={},f=0,h=0,p,v;function y(O,F){if(O===""||!l.isGrouped(e)){var Y="~~i"+f;u.push(Y),r[Y]=[F],f++}else u.indexOf(O)===-1?(u.push(O),s=!0,r[O]=[F]):r[O].push(F)}for(p=0;p<w.length;p++){var g=w[p],A=g[0],m=A.trace,M=m.legendgroup;if(!(!o&&(!m.visible||!m.showlegend)))if(d.traceIs(m,"pie-like"))for(i[M]||(i[M]={}),v=0;v<g.length;v++){var _=g[v].label;i[M][_]||(y(M,{label:_,color:g[v].color,i:g[v].i,trace:m,pts:g[v].pts}),i[M][_]=!0,h=Math.max(h,(_||"").length))}else y(M,A),h=Math.max(h,(m.name||"").length)}if(!u.length)return[];var T=!s||!a,x=[];for(p=0;p<u.length;p++){var c=r[u[p]];T?x.push(c[0]):x.push(c)}for(T&&(x=[x]),p=0;p<x.length;p++){var L=1/0;for(v=0;v<x[p].length;v++){var S=x[p][v].trace.legendrank;L>S&&(L=S)}x[p][0]._groupMinRank=L,x[p][0]._preGroupSort=p}var k=function(O,F){return O[0]._groupMinRank-F[0]._groupMinRank||O[0]._preGroupSort-F[0]._preGroupSort},P=function(O,F){return O.trace.legendrank-F.trace.legendrank||O._preSort-F._preSort};for(x.forEach(function(O,F){O[0]._preGroupSort=F}),x.sort(k),p=0;p<x.length;p++){x[p].forEach(function(O,F){O._preSort=F}),x[p].sort(P);var z=x[p][0].trace,I=null;for(v=0;v<x[p].length;v++){var R=x[p][v].trace.legendgrouptitle;if(R&&R.text){I=R,o&&(R.font=e._groupTitleFont);break}}if(n&&x[p].reverse(),I){var D=!1;for(v=0;v<x[p].length;v++)if(d.traceIs(x[p][v].trace,"pie-like")){D=!0;break}x[p].unshift({i:-1,groupTitle:I,noClick:D,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:e.groupclick==="toggleitem"?!0:z.visible}})}for(v=0;v<x[p].length;v++)x[p][v]=[x[p][v]]}return e._lgroupsLength=x.length,e._maxNameLength=h,x}},{"../../registry":638,"./helpers":422}],421:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=!0;B.exports=function(e,o,a){var n=o._fullLayout;if(o._dragged||o._editing)return;var r=n.legend.itemclick,u=n.legend.itemdoubleclick,s=n.legend.groupclick;a===1&&r==="toggle"&&u==="toggleothers"&&b&&o.data&&o._context.showTips&&d.notifier(d._(o,"Double-click on legend to isolate one trace"),"long"),b=!1;var i;if(a===1?i=r:a===2&&(i=u),!i)return;var f=s==="togglegroup",h=n.hiddenlabels?n.hiddenlabels.slice():[],p=e.data()[0][0];if(p.groupTitle&&p.noClick)return;var v=o._fullData,y=p.trace,g=y.legendgroup,A,m,M,_,T,x,c={},L=[],S=[],k=[];function P(oe,U,G){var re=L.indexOf(oe),ee=c[U];return ee||(ee=c[U]=[]),L.indexOf(oe)===-1&&(L.push(oe),re=L.length-1),ee[re]=G,re}function z(oe,U){if(!(p.groupTitle&&!f)){var G=oe._fullInput;if(l.hasTransform(G,"groupby")){var re=S[G.index];if(!re){var ee=l.getTransformIndices(G,"groupby"),j=ee[ee.length-1];re=d.keyedContainer(G,"transforms["+j+"].styles","target","value.visible"),S[G.index]=re}var Q=re.get(oe._group);Q===void 0&&(Q=!0),Q!==!1&&re.set(oe._group,U),k[G.index]=P(G.index,"visible",G.visible!==!1)}else{var ne=G.visible===!1?!1:U;P(G.index,"visible",ne)}}}if(l.traceIs(y,"pie-like")){var I=p.label,R=h.indexOf(I);i==="toggle"?R===-1?h.push(I):h.splice(R,1):i==="toggleothers"&&(h=[],o.calcdata[0].forEach(function(oe){I!==oe.label&&h.push(oe.label)}),o._fullLayout.hiddenlabels&&o._fullLayout.hiddenlabels.length===h.length&&R===-1&&(h=[])),l.call("_guiRelayout",o,"hiddenlabels",h)}else{var D=g&&g.length,O=[],F;if(D)for(A=0;A<v.length;A++)F=v[A],!!F.visible&&F.legendgroup===g&&O.push(A);if(i==="toggle"){var Y;switch(y.visible){case!0:Y="legendonly";break;case!1:Y=!1;break;case"legendonly":Y=!0;break}if(D)if(f)for(A=0;A<v.length;A++)v[A].visible!==!1&&v[A].legendgroup===g&&z(v[A],Y);else z(y,Y);else z(y,Y)}else if(i==="toggleothers"){var X,q,$,V,K=!0;for(A=0;A<v.length;A++)if(X=v[A]===y,$=v[A].showlegend!==!0,!(X||$)&&(q=D&&v[A].legendgroup===g,!q&&v[A].visible===!0&&!l.traceIs(v[A],"notLegendIsolatable"))){K=!1;break}for(A=0;A<v.length;A++)if(v[A].visible!==!1&&!l.traceIs(v[A],"notLegendIsolatable"))switch(y.visible){case"legendonly":z(v[A],!0);break;case!0:V=K?!0:"legendonly",X=v[A]===y,$=v[A].showlegend!==!0&&!v[A].legendgroup,q=X||D&&v[A].legendgroup===g,z(v[A],q||$?!0:V);break}}for(A=0;A<S.length;A++)if(M=S[A],!!M){var se=M.constructUpdate(),ue=Object.keys(se);for(m=0;m<ue.length;m++)_=ue[m],x=c[_]=c[_]||[],x[k[A]]=se[_]}for(T=Object.keys(c),A=0;A<T.length;A++)for(_=T[A],m=0;m<L.length;m++)c[_].hasOwnProperty(m)||(c[_][m]=void 0);l.call("_guiRestyle",o,c,L)}}},{"../../lib":503,"../../registry":638}],422:[function(t,B,H){H.isGrouped=function(l){return(l.traceorder||"").indexOf("grouped")!==-1},H.isVertical=function(l){return l.orientation!=="h"},H.isReversed=function(l){return(l.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(t,B,H){B.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=b.strTranslate,e=t("../drawing"),o=t("../color"),a=t("../colorscale/helpers").extractOpts,n=t("../../traces/scatter/subtypes"),r=t("../../traces/pie/style_one"),u=t("../../traces/pie/helpers").castOption,s=t("./constants"),i=12,f=5,h=2,p=10,v=5;B.exports=function(M,_,T){var x=_._fullLayout;T||(T=x.legend);var c=T.itemsizing==="constant",L=T.itemwidth,S=(L+s.itemGap*2)/2,k=w(S,0),P=function(ue,oe,U,G){var re;if(ue+1)re=ue;else if(oe&&oe.width>0)re=oe.width;else return 0;return c?G:Math.min(re,U)};M.each(function(ue){var oe=d.select(this),U=b.ensureSingle(oe,"g","layers");U.style("opacity",ue[0].trace.opacity);var G=T.valign,re=ue[0].lineHeight,ee=ue[0].height;if(G==="middle"||!re||!ee)U.attr("transform",null);else{var j={top:1,bottom:-1}[G],Q=j*(.5*(re-ee+3));U.attr("transform",w(0,Q))}var ne=U.selectAll("g.legendfill").data([ue]);ne.enter().append("g").classed("legendfill",!0);var ae=U.selectAll("g.legendlines").data([ue]);ae.enter().append("g").classed("legendlines",!0);var ie=U.selectAll("g.legendsymbols").data([ue]);ie.enter().append("g").classed("legendsymbols",!0),ie.selectAll("g.legendpoints").data([ue]).enter().append("g").classed("legendpoints",!0)}).each(se).each(R).each(O).each(D).each(Y).each(V).each($).each(z).each(I).each(X).each(q);function z(ue){var oe=g(ue),U=oe.showFill,G=oe.showLine,re=oe.showGradientLine,ee=oe.showGradientFill,j=oe.anyFill,Q=oe.anyLine,ne=ue[0],ae=ne.trace,ie,fe,me=a(ae),ce=me.colorscale,ye=me.reversescale,xe=function(Ie){if(Ie.size()){var Ye="legendfill-"+ae.uid;e.gradient(Ie,_,Ye,y(ye),ce,"fill")}},ke=function(Ie){if(Ie.size()){var Ye="legendline-"+ae.uid;e.lineGroupStyle(Ie),e.gradient(Ie,_,Ye,y(ye),ce,"stroke")}},Ae=n.hasMarkers(ae)||!j?"M5,0":Q?"M5,-2":"M5,-3",Oe=d.select(this),He=Oe.select(".legendfill").selectAll("path").data(U||ee?[ue]:[]);if(He.enter().append("path").classed("js-fill",!0),He.exit().remove(),He.attr("d",Ae+"h"+L+"v6h-"+L+"z").call(U?e.fillGroupStyle:xe),G||re){var Ge=P(void 0,ae.line,p,f);fe=b.minExtend(ae,{line:{width:Ge}}),ie=[b.minExtend(ne,{trace:fe})]}var _e=Oe.select(".legendlines").selectAll("path").data(G||re?[ie]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",Ae+(re?"l"+L+",0.0001":"h"+L)).call(G?e.lineGroupStyle:ke)}function I(ue){var oe=g(ue),U=oe.anyFill,G=oe.anyLine,re=oe.showLine,ee=oe.showMarker,j=ue[0],Q=j.trace,ne=!ee&&!G&&!U&&n.hasText(Q),ae,ie;function fe(He,Ge,_e,Ie){var Ye=b.nestedProperty(Q,He).get(),qe=b.isArrayOrTypedArray(Ye)&&Ge?Ge(Ye):Ye;if(c&&qe&&Ie!==void 0&&(qe=Ie),_e){if(qe<_e[0])return _e[0];if(qe>_e[1])return _e[1]}return qe}function me(He){return j._distinct&&j.index&&He[j.index]?He[j.index]:He[0]}if(ee||ne||re){var ce={},ye={};if(ee){ce.mc=fe("marker.color",me),ce.mx=fe("marker.symbol",me),ce.mo=fe("marker.opacity",b.mean,[.2,1]),ce.mlc=fe("marker.line.color",me),ce.mlw=fe("marker.line.width",b.mean,[0,5],h),ye.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=fe("marker.size",b.mean,[2,16],i);ce.ms=xe,ye.marker.size=xe}re&&(ye.line={width:fe("line.width",me,[0,10],f)}),ne&&(ce.tx="Aa",ce.tp=fe("textposition",me),ce.ts=10,ce.tc=fe("textfont.color",me),ce.tf=fe("textfont.family",me)),ae=[b.minExtend(j,ce)],ie=b.minExtend(Q,ye),ie.selectedpoints=null,ie.texttemplate=null}var ke=d.select(this).select("g.legendpoints"),Ae=ke.selectAll("path.scatterpts").data(ee?ae:[]);Ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),Ae.exit().remove(),Ae.call(e.pointStyle,ie,_),ee&&(ae[0].mrc=3);var Oe=ke.selectAll("g.pointtext").data(ne?ae:[]);Oe.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),Oe.exit().remove(),Oe.selectAll("text").call(e.textPointStyle,ie,_)}function R(ue){var oe=ue[0].trace,U=oe.type==="waterfall";if(ue[0]._distinct&&U){var G=ue[0].trace[ue[0].dir].marker;return ue[0].mc=G.color,ue[0].mlw=G.line.width,ue[0].mlc=G.line.color,F(ue,this,"waterfall")}var re=[];oe.visible&&U&&(re=ue[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ee=d.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(re);ee.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(j){var Q=d.select(this),ne=oe[j[0]].marker,ae=P(void 0,ne.line,v,h);Q.attr("d",j[1]).style("stroke-width",ae+"px").call(o.fill,ne.color),ae&&Q.call(o.stroke,ne.line.color)})}function D(ue){F(ue,this)}function O(ue){F(ue,this,"funnel")}function F(ue,oe,U){var G=ue[0].trace,re=G.marker||{},ee=re.line||{},j=U?G.visible&&G.type===U:l.traceIs(G,"bar"),Q=d.select(oe).select("g.legendpoints").selectAll("path.legend"+U).data(j?[ue]:[]);Q.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),Q.exit().remove(),Q.each(function(ne){var ae=d.select(this),ie=ne[0],fe=P(ie.mlw,re.line,v,h);ae.style("stroke-width",fe+"px");var me=ie.mcc;if(!T._inHover&&"mc"in ie){var ce=a(re),ye=ce.mid;ye===void 0&&(ye=(ce.max+ce.min)/2),me=e.tryColorscale(re,"")(ye)}var xe=me||ie.mc||re.color,ke=re.pattern,Ae=ke&&e.getPatternAttr(ke.shape,0,"");if(Ae){var Oe=e.getPatternAttr(ke.bgcolor,0,null),He=e.getPatternAttr(ke.fgcolor,0,null),Ge=ke.fgopacity,_e=A(ke.size,8,10),Ie=A(ke.solidity,.5,1),Ye="legend-"+G.uid;ae.call(e.pattern,"legend",_,Ye,Ae,_e,Ie,me,ke.fillmode,Oe,He,Ge)}else ae.call(o.fill,xe);fe&&o.stroke(ae,ie.mlc||ee.color)})}function Y(ue){var oe=ue[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&l.traceIs(oe,"box-violin")?[ue]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),U.exit().remove(),U.each(function(){var G=d.select(this);if((oe.boxpoints==="all"||oe.points==="all")&&o.opacity(oe.fillcolor)===0&&o.opacity((oe.line||{}).color)===0){var re=b.minExtend(oe,{marker:{size:c?i:b.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,re,_)}else{var ee=P(void 0,oe.line,v,h);G.style("stroke-width",ee+"px").call(o.fill,oe.fillcolor),ee&&o.stroke(G,oe.line.color)}})}function X(ue){var oe=ue[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&oe.type==="candlestick"?[ue,ue]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(G,re){return re?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(G,re){var ee=d.select(this),j=oe[re?"increasing":"decreasing"],Q=P(void 0,j.line,v,h);ee.style("stroke-width",Q+"px").call(o.fill,j.fillcolor),Q&&o.stroke(ee,j.line.color)})}function q(ue){var oe=ue[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&oe.type==="ohlc"?[ue,ue]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(G,re){return re?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(G,re){var ee=d.select(this),j=oe[re?"increasing":"decreasing"],Q=P(void 0,j.line,v,h);ee.style("fill","none").call(e.dashLine,j.line.dash,Q),Q&&o.stroke(ee,j.line.color)})}function $(ue){K(ue,this,"pie")}function V(ue){K(ue,this,"funnelarea")}function K(ue,oe,U){var G=ue[0],re=G.trace,ee=U?re.visible&&re.type===U:l.traceIs(re,U),j=d.select(oe).select("g.legendpoints").selectAll("path.legend"+U).data(ee?[ue]:[]);if(j.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),j.exit().remove(),j.size()){var Q=(re.marker||{}).line,ne=P(u(Q.width,G.pts),Q,v,h),ae=b.minExtend(re,{marker:{line:{width:ne}}});ae.marker.line.color=Q.color;var ie=b.minExtend(G,{trace:ae});r(j,ie,ae)}}function se(ue){var oe=ue[0].trace,U,G=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":G=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":G=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":G=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":G=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":G=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":G=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var re=d.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(G);re.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(ee,j){var Q=d.select(this),ne=a(oe),ae=ne.colorscale,ie=ne.reversescale,fe=function(xe){if(xe.size()){var ke="legendfill-"+oe.uid;e.gradient(xe,_,ke,y(ie,U==="radial"),ae,"fill")}},me;if(ae){if(!U){var ye=ae.length;me=j===0?ae[ie?ye-1:0][1]:j===1?ae[ie?0:ye-1][1]:ae[Math.floor((ye-1)/2)][1]}}else{var ce=oe.vertexcolor||oe.facecolor||oe.color;me=b.isArrayOrTypedArray(ce)?ce[j]||ce[0]:ce}Q.attr("d",ee[0]),me?Q.call(o.fill,me):Q.call(fe)})}};function y(m,M){var _=M?"radial":"horizontal";return _+(m?"":"reversed")}function g(m){var M=m[0].trace,_=M.contours,T=n.hasLines(M),x=n.hasMarkers(M),c=M.visible&&M.fill&&M.fill!=="none",L=!1,S=!1;if(_){var k=_.coloring;k==="lines"?L=!0:T=k==="none"||k==="heatmap"||_.showlines,_.type==="constraint"?c=_._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:x,showLine:T,showFill:c,showGradientLine:L,showGradientFill:S,anyLine:T||L,anyFill:c||S}}function A(m,M,_){return m&&b.isArrayOrTypedArray(m)?M:m>_?_:m}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(t,B,H){t("./constants"),B.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/plots"),b=t("../../plots/cartesian/axis_ids"),w=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,o=t("../../lib"),a=o._,n=B.exports={};n.toImage={name:"toImage",title:function(m){var M=m._context.toImageButtonOptions||{},_=M.format||"png";return _==="png"?a(m,"Download plot as a png"):a(m,"Download plot")},icon:w.camera,click:function(m){var M=m._context.toImageButtonOptions,_={format:M.format||"png"};o.notifier(a(m,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&o.isIE()&&(o.notifier(a(m,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(T){T in M&&(_[T]=M[T])}),d.call("downloadImage",m,_).then(function(T){o.notifier(a(m,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){o.notifier(a(m,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(m){return a(m,"Edit in Chart Studio")},icon:w.disk,click:function(m){l.sendDataToCloud(m)}},n.editInChartStudio={name:"editInChartStudio",title:function(m){return a(m,"Edit in Chart Studio")},icon:w.pencil,click:function(m){l.sendDataToCloud(m)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(m){return a(m,"Zoom")},attr:"dragmode",val:"zoom",icon:w.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(m){return a(m,"Pan")},attr:"dragmode",val:"pan",icon:w.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(m){return a(m,"Box Select")},attr:"dragmode",val:"select",icon:w.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(m){return a(m,"Lasso Select")},attr:"dragmode",val:"lasso",icon:w.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(m){return a(m,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:w.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(m){return a(m,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:w.drawopenpath,click:r},n.drawline={name:"drawline",title:function(m){return a(m,"Draw line")},attr:"dragmode",val:"drawline",icon:w.drawline,click:r},n.drawrect={name:"drawrect",title:function(m){return a(m,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:w.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(m){return a(m,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:w.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(m){return a(m,"Erase active shape")},icon:w.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(m){return a(m,"Autoscale")},attr:"zoom",val:"auto",icon:w.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(m){return a(m,"Reset axes")},attr:"zoom",val:"reset",icon:w.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(m){return a(m,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(m){return a(m,"Compare data on hover")},attr:"hovermode",val:function(m){return m._fullLayout._isHoriz?"y":"x"},icon:w.tooltip_compare,gravity:"ne",click:r};function r(m,M){var _=M.currentTarget,T=_.getAttribute("data-attr"),x=_.getAttribute("data-val")||!0,c=m._fullLayout,L={},S=b.list(m,null,!0),k=c._cartesianSpikesEnabled,P,z;if(T==="zoom"){var I=x==="in"?.5:2,R=(1+I)/2,D=(1-I)/2,O;for(z=0;z<S.length;z++)if(P=S[z],!P.fixedrange)if(O=P._name,x==="auto")L[O+".autorange"]=!0;else if(x==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var F=P._rangeInitial.slice();L[O+".range[0]"]=F[0],L[O+".range[1]"]=F[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var Y=[P.r2l(P.range[0]),P.r2l(P.range[1])],X=[R*Y[0]+D*Y[1],R*Y[1]+D*Y[0]];L[O+".range[0]"]=P.l2r(X[0]),L[O+".range[1]"]=P.l2r(X[1])}}else T==="hovermode"&&(x==="x"||x==="y")&&(x=c._isHoriz?"y":"x",_.setAttribute("data-val",x)),L[T]=x;c._cartesianSpikesEnabled=k,d.call("_guiRelayout",m,L)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(m){return a(m,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:w.zoombox,click:u},n.pan3d={name:"pan3d",_cat:"pan",title:function(m){return a(m,"Pan")},attr:"scene.dragmode",val:"pan",icon:w.pan,click:u},n.orbitRotation={name:"orbitRotation",title:function(m){return a(m,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:w["3d_rotate"],click:u},n.tableRotation={name:"tableRotation",title:function(m){return a(m,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:w["z-axis"],click:u};function u(m,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),x=_.getAttribute("data-val")||!0,c=m._fullLayout._subplots.gl3d||[],L={},S=T.split("."),k=0;k<c.length;k++)L[c[k]+"."+S[1]]=x;var P=x==="pan"?x:"zoom";L.dragmode=P,d.call("_guiRelayout",m,L)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(m){return a(m,"Reset camera to default")},attr:"resetDefault",icon:w.home,click:s},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(m){return a(m,"Reset camera to last save")},attr:"resetLastSave",icon:w.movie,click:s};function s(m,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),x=T==="resetLastSave",c=T==="resetDefault",L=m._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var z=S[P],I=z+".camera",R=z+".aspectratio",D=z+".aspectmode",O=L[z]._scene,F;x?(k[I+".up"]=O.viewInitial.up,k[I+".eye"]=O.viewInitial.eye,k[I+".center"]=O.viewInitial.center,F=!0):c&&(k[I+".up"]=null,k[I+".eye"]=null,k[I+".center"]=null,F=!0),F&&(k[R+".x"]=O.viewInitial.aspectratio.x,k[R+".y"]=O.viewInitial.aspectratio.y,k[R+".z"]=O.viewInitial.aspectratio.z,k[D]=O.viewInitial.aspectmode)}d.call("_guiRelayout",m,k)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:f};function i(m,M){var _=M.currentTarget,T=_._previousVal,x=m._fullLayout,c=x._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(T)k=T,_._previousVal=null;else{for(var P=0;P<c.length;P++){var z=c[P],I=x[z],R=z+".hovermode";S[R]=I.hovermode,k[R]=!1;for(var D=0;D<3;D++){var O=L[D],F=z+"."+O+".showspikes";k[F]=!1,S[F]=I[O].showspikes}}_._previousVal=S}return k}function f(m,M){var _=i(m,M);d.call("_guiRelayout",m,_)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:h},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:h},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(m){return a(m,"Reset")},attr:"reset",val:null,icon:w.autoscale,click:h},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:v};function h(m,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),x=_.getAttribute("data-val")||!0,c=m._fullLayout,L=c._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=c[k];if(T==="zoom"){var z=P.projection.scale,I=x==="in"?2*z:.5*z;d.call("_guiRelayout",m,k+".projection.scale",I)}}T==="reset"&&A(m,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:v},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:v};function p(m){var M=m._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function v(m){var M=p(m);d.call("_guiRelayout",m,"hovermode",M)}n.resetViewSankey={name:"resetSankeyGroup",title:function(m){return a(m,"Reset view")},icon:w.home,click:function(m){for(var M={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<m._fullData.length;_++){var T=m._fullData[_]._viewInitial;M["node.groups"].push(T.node.groups.slice()),M["node.x"].push(T.node.x.slice()),M["node.y"].push(T.node.y.slice())}d.call("restyle",m,M)}},n.toggleHover={name:"toggleHover",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(m,M){var _=i(m,M);_.hovermode=p(m),d.call("_guiRelayout",m,_)}},n.resetViews={name:"resetViews",title:function(m){return a(m,"Reset views")},icon:w.home,click:function(m,M){var _=M.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),r(m,M),_.setAttribute("data-attr","resetLastSave"),s(m,M),A(m,"geo"),A(m,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(m){return a(m,"Toggle Spike Lines")},icon:w.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(m){var M=m._fullLayout,_=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=_==="on"?"off":"on",d.call("_guiRelayout",m,y(m))}};function y(m){for(var M=m._fullLayout,_=M._cartesianSpikesEnabled==="on",T=b.list(m,null,!0),x={},c=0;c<T.length;c++){var L=T[c];x[L._name+".showspikes"]=_?!0:L._showSpikeInitial}return x}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(m){return a(m,"Reset view")},attr:"reset",icon:w.home,click:function(m){A(m,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:g},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:g};function g(m,M){for(var _=M.currentTarget,T=_.getAttribute("data-val"),x=m._fullLayout,c=x._subplots.mapbox||[],L=1.05,S={},k=0;k<c.length;k++){var P=c[k],z=x[P].zoom,I=T==="in"?L*z:z/L;S[P+".zoom"]=I}d.call("_guiRelayout",m,S)}function A(m,M){for(var _=m._fullLayout,T=_._subplots[M]||[],x={},c=0;c<T.length;c++)for(var L=T[c],S=_[L]._subplot,k=S.viewInitial,P=Object.keys(k),z=0;z<P.length;z++){var I=P[z];x[L+"."+I]=k[I]}d.call("_guiRelayout",m,x)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(t,B,H){var d=t("./buttons"),l=Object.keys(d),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],w=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[],o=function(a){if(w.indexOf(a._cat||a.name)===-1){var n=a.name,r=(a._cat||a.name).toLowerCase();e.indexOf(n)===-1&&e.push(n),e.indexOf(r)===-1&&e.push(r)}};l.forEach(function(a){o(d[a])}),e.sort(),B.exports={DRAW_MODES:b,backButtons:w,foreButtons:e}},{"./buttons":426}],428:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("../../plot_api/plot_template"),w=t("./attributes");B.exports=function(o,a){var n=o.modebar||{},r=b.newContainer(a,"modebar");function u(i,f){return d.coerce(n,r,w,i,f)}u("orientation"),u("bgcolor",l.addOpacity(a.paper_bgcolor,.5));var s=l.contrast(l.rgb(a.modebar.bgcolor));u("color",l.addOpacity(s,.3)),u("activecolor",l.addOpacity(s,.7)),u("uirevision",a.uirevision),u("add"),u("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(t,B,H){B.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids"),l=t("../../traces/scatter/subtypes"),b=t("../../registry"),w=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),o=t("./buttons"),a=t("./constants").DRAW_MODES;B.exports=function(p){var v=p._fullLayout,y=p._context,g=v._modeBar;if(!y.displayModeBar&&!y.watermark){g&&(g.destroy(),delete v._modeBar);return}if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=y.modeBarButtons,m;Array.isArray(A)&&A.length?m=f(A):!y.displayModeBar&&y.watermark?m=[]:m=n(p),g?g.update(p,m):v._modeBar=e(p,m)};function n(h){var p=h._fullLayout,v=h._fullData,y=h._context;function g(ee,j){if(typeof j=="string"){if(j.toLowerCase()===ee.toLowerCase())return!0}else{var Q=j.name,ne=j._cat||j.name;if(Q===ee||ne===ee.toLowerCase())return!0}return!1}var A=p.modebar.add;typeof A=="string"&&(A=[A]);var m=p.modebar.remove;typeof m=="string"&&(m=[m]);var M=y.modeBarButtonsToAdd.concat(A.filter(function(ee){for(var j=0;j<y.modeBarButtonsToRemove.length;j++)if(g(ee,y.modeBarButtonsToRemove[j]))return!1;return!0})),_=y.modeBarButtonsToRemove.concat(m.filter(function(ee){for(var j=0;j<y.modeBarButtonsToAdd.length;j++)if(g(ee,y.modeBarButtonsToAdd[j]))return!1;return!0})),T=p._has("cartesian"),x=p._has("gl3d"),c=p._has("geo"),L=p._has("pie"),S=p._has("funnelarea"),k=p._has("gl2d"),P=p._has("ternary"),z=p._has("mapbox"),I=p._has("polar"),R=p._has("smith"),D=p._has("sankey"),O=r(p),F=w(p.hovermode),Y=[];function X(ee){if(!!ee.length){for(var j=[],Q=0;Q<ee.length;Q++){for(var ne=ee[Q],ae=o[ne],ie=ae.name.toLowerCase(),fe=(ae._cat||ae.name).toLowerCase(),me=!1,ce=0;ce<_.length;ce++){var ye=_[ce].toLowerCase();if(ye===ie||ye===fe){me=!0;break}}me||j.push(o[ne])}Y.push(j)}}var q=["toImage"];y.showEditInChartStudio?q.push("editInChartStudio"):y.showSendToCloud&&q.push("sendDataToCloud"),X(q);var $=[],V=[],K=[],se=[];(T||k||L||S||P)+c+x+z+I+R>1?(V=["toggleHover"],K=["resetViews"]):c?($=["zoomInGeo","zoomOutGeo"],V=["hoverClosestGeo"],K=["resetGeo"]):x?(V=["hoverClosest3d"],K=["resetCameraDefault3d","resetCameraLastSave3d"]):z?($=["zoomInMapbox","zoomOutMapbox"],V=["toggleHover"],K=["resetViewMapbox"]):k?V=["hoverClosestGl2d"]:L?V=["hoverClosestPie"]:D?(V=["hoverClosestCartesian","hoverCompareCartesian"],K=["resetViewSankey"]):V=["toggleHover"],T&&(V=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(s(v)||F)&&(V=[]),(T||k)&&!O&&($=["zoomIn2d","zoomOut2d","autoScale2d"],K[0]!=="resetViews"&&(K=["resetScale2d"])),x?se=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||k)&&!O||P?se=["zoom2d","pan2d"]:z||c?se=["pan2d"]:I&&(se=["zoom2d"]),u(v)&&se.push("select2d","lasso2d");var ue=[],oe=function(ee){ue.indexOf(ee)===-1&&V.indexOf(ee)!==-1&&ue.push(ee)};if(Array.isArray(M)){for(var U=[],G=0;G<M.length;G++){var re=M[G];typeof re=="string"?(re=re.toLowerCase(),a.indexOf(re)!==-1?(p._has("mapbox")||p._has("cartesian"))&&se.push(re):re==="togglespikelines"?oe("toggleSpikelines"):re==="togglehover"?oe("toggleHover"):re==="hovercompare"?oe("hoverCompareCartesian"):re==="hoverclosest"?(oe("hoverClosestCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie")):re==="v1hovermode"&&(oe("toggleHover"),oe("hoverClosestCartesian"),oe("hoverCompareCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie"))):U.push(re)}M=U}return X(se),X($.concat(K)),X(ue),i(Y,M)}function r(h){for(var p=d.list({_fullLayout:h},null,!0),v=0;v<p.length;v++)if(!p[v].fixedrange)return!1;return!0}function u(h){for(var p=!1,v=0;v<h.length&&!p;v++){var y=h[v];!y._module||!y._module.selectPoints||(b.traceIs(y,"scatter-like")?(l.hasMarkers(y)||l.hasText(y))&&(p=!0):b.traceIs(y,"box-violin")?(y.boxpoints==="all"||y.points==="all")&&(p=!0):p=!0)}return p}function s(h){for(var p=0;p<h.length;p++)if(!b.traceIs(h[p],"noHover"))return!1;return!0}function i(h,p){if(p.length)if(Array.isArray(p[0]))for(var v=0;v<p.length;v++)h.push(p[v]);else h.push(p);return h}function f(h){for(var p=0;p<h.length;p++)for(var v=h[p],y=0;y<v.length;y++){var g=v[y];if(typeof g=="string")if(o[g]!==void 0)h[p][y]=o[g];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return h}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../fonts/ploticon"),e=new DOMParser;function o(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var a=o.prototype;a.update=function(r,u){this.graphInfo=r;var s=this.graphInfo._context,i=this.graphInfo._fullLayout,f="modebar-"+i._uid;this.element.setAttribute("id",f),this._uid=f,this.element.className="modebar",s.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",u=u.reverse());var h=i.modebar,p=s.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(f),b.addRelatedStyleRule(f,p+"#"+f+" .modebar-group","background-color: "+h.bgcolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn .icon path","fill: "+h.color),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn:hover .icon path","fill: "+h.activecolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn.active .icon path","fill: "+h.activecolor);var v=!this.hasButtons(u),y=this.hasLogo!==s.displaylogo,g=this.locale!==s.locale;if(this.locale=s.locale,(v||y||g)&&(this.removeAllButtons(),this.updateButtons(u),s.watermark||s.displaylogo)){var A=this.getLogo();s.watermark&&(A.className=A.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(r){var u=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(s){var i=u.createGroup();s.forEach(function(f){var h=f.name;if(!h)throw new Error("must provide button 'name' in button config");if(u.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");u.buttonsNames.push(h);var p=u.createButton(f);u.buttonElements.push(p),i.appendChild(p)}),u.element.appendChild(i)})},a.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},a.createButton=function(r){var u=this,s=document.createElement("a");s.setAttribute("rel","tooltip"),s.className="modebar-btn";var i=r.title;i===void 0?i=r.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&s.setAttribute("data-title",i),r.attr!==void 0&&s.setAttribute("data-attr",r.attr);var f=r.val;f!==void 0&&(typeof f=="function"&&(f=f(this.graphInfo)),s.setAttribute("data-val",f));var h=r.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");s.addEventListener("click",function(v){r.click(u.graphInfo,v),u.updateActiveButton(v.currentTarget)}),s.setAttribute("data-toggle",r.toggle||!1),r.toggle&&d.select(s).classed("active",!0);var p=r.icon;return typeof p=="function"?s.appendChild(p()):s.appendChild(this.createIcon(p||w.question)),s.setAttribute("data-gravity",r.gravity||"n"),s},a.createIcon=function(r){var u=l(r.height)?Number(r.height):r.ascent-r.descent,s="http://www.w3.org/2000/svg",i;if(r.path){i=document.createElementNS(s,"svg"),i.setAttribute("viewBox",[0,0,r.width,u].join(" ")),i.setAttribute("class","icon");var f=document.createElementNS(s,"path");f.setAttribute("d",r.path),r.transform?f.setAttribute("transform",r.transform):r.ascent!==void 0&&f.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),i.appendChild(f)}if(r.svg){var h=e.parseFromString(r.svg,"application/xml");i=h.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i},a.updateActiveButton=function(r){var u=this.graphInfo._fullLayout,s=r!==void 0?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var f=i.getAttribute("data-val")||!0,h=i.getAttribute("data-attr"),p=i.getAttribute("data-toggle")==="true",v=d.select(i);if(p)h===s&&v.classed("active",!v.classed("active"));else{var y=h===null?h:b.nestedProperty(u,h).get();v.classed("active",y===f)}})},a.hasButtons=function(r){var u=this.buttons;if(!u||r.length!==u.length)return!1;for(var s=0;s<r.length;++s){if(r[s].length!==u[s].length)return!1;for(var i=0;i<r[s].length;i++)if(r[s][i].name!==u[s][i].name)return!1}return!0},a.getLogo=function(){var r=this.createGroup(),u=document.createElement("a");return u.href="https://plotly.com/",u.target="_blank",u.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly")),u.className="modebar-btn plotlyjsicon modebar-btn--logo",u.appendChild(this.createIcon(w.newplotlylogo)),r.appendChild(u),r},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)};function n(r,u){var s=r._fullLayout,i=new o({graphInfo:r,container:s._modebardiv.node(),buttons:u});return s._privateplot&&d.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}B.exports=n},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes"),b=t("../../plot_api/plot_template").templatedArray,w=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});B.exports={visible:{valType:"boolean",editType:"plot"},buttons:w,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:l.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(t,B,H){B.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("../../plot_api/plot_template"),w=t("../../plots/array_container_defaults"),e=t("./attributes"),o=t("./constants");B.exports=function(u,s,i,f,h){var p=u.rangeselector||{},v=b.newContainer(s,"rangeselector");function y(_,T){return d.coerce(p,v,e,_,T)}var g=w(p,v,{name:"buttons",handleItemDefaults:a,calendar:h}),A=y("visible",g.length>0);if(A){var m=n(s,i,f);y("x",m[0]),y("y",m[1]),d.noneOrAll(u,s,["x","y"]),y("xanchor"),y("yanchor"),d.coerceFont(y,"font",i.font);var M=y("bgcolor");y("activecolor",l.contrast(M,o.lightAmount,o.darkAmount)),y("bordercolor"),y("borderwidth")}};function a(r,u,s,i){var f=i.calendar;function h(y,g){return d.coerce(r,u,e.buttons,y,g)}var p=h("visible");if(p){var v=h("step");v!=="all"&&(f&&f!=="gregorian"&&(v==="month"||v==="year")?u.stepmode="backward":h("stepmode"),h("count")),h("label")}}function n(r,u,s){for(var i=s.filter(function(v){return u[v].anchor===r._id}),f=0,h=0;h<i.length;h++){var p=u[i[h]].domain;p&&(f=Math.max(p[1],f))}return[r.domain[0],f+o.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../color"),e=t("../drawing"),o=t("../../lib"),a=o.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../plots/cartesian/axis_ids"),u=t("../../constants/alignment"),s=u.LINE_SPACING,i=u.FROM_TL,f=u.FROM_BR,h=t("./constants"),p=t("./get_update_object");B.exports=function(c){var L=c._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(v(c),y);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=d.select(this),z=k,I=z.rangeselector,R=P.selectAll("g.button").data(o.filterVisible(I.buttons));R.enter().append("g").classed("button",!0),R.exit().remove(),R.each(function(D){var O=d.select(this),F=p(z,D);D._isActive=g(z,D,F),O.call(A,I,D),O.call(M,I,D,c),O.on("click",function(){c._dragged||l.call("_guiRelayout",c,F)}),O.on("mouseover",function(){D._isHovered=!0,O.call(A,I,D)}),O.on("mouseout",function(){D._isHovered=!1,O.call(A,I,D)})}),T(c,R,I,z._name,P)})};function v(x){for(var c=r.list(x,"x",!0),L=[],S=0;S<c.length;S++){var k=c[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function y(x){return x._id}function g(x,c,L){if(c.step==="all")return x.autorange===!0;var S=Object.keys(L);return x.range[0]===L[S[0]]&&x.range[1]===L[S[1]]}function A(x,c,L){var S=o.ensureSingle(x,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:h.rx,ry:h.ry}),S.call(w.stroke,c.bordercolor).call(w.fill,m(c,L)).style("stroke-width",c.borderwidth+"px")}function m(x,c){return c._isActive||c._isHovered?x.activecolor:x.bgcolor}function M(x,c,L,S){function k(z){n.convertToTspans(z,S)}var P=o.ensureSingle(x,"text","selector-text",function(z){z.attr("text-anchor","middle")});P.call(e.font,c.font).text(_(L,S._fullLayout._meta)).call(k)}function _(x,c){return x.label?c?o.templateString(x.label,c):x.label:x.step==="all"?"all":x.count+x.step.charAt(0)}function T(x,c,L,S,k){var P=0,z=0,I=L.borderwidth;c.each(function(){var X=d.select(this),q=X.select(".selector-text"),$=L.font.size*s,V=Math.max($*n.lineCount(q),16)+3;z=Math.max(z,V)}),c.each(function(){var X=d.select(this),q=X.select(".selector-rect"),$=X.select(".selector-text"),V=$.node()&&e.bBox($.node()).width,K=L.font.size*s,se=n.lineCount($),ue=Math.max(V+10,h.minButtonWidth);X.attr("transform",a(I+P,I)),q.attr({x:0,y:0,width:ue,height:z}),n.positionText($,ue/2,z/2-(se-1)*K/2+3),P+=ue+5});var R=x._fullLayout._size,D=R.l+R.w*L.x,O=R.t+R.h*(1-L.y),F="left";o.isRightAnchor(L)&&(D-=P,F="right"),o.isCenterAnchor(L)&&(D-=P/2,F="center");var Y="top";o.isBottomAnchor(L)&&(O-=z,Y="bottom"),o.isMiddleAnchor(L)&&(O-=z/2,Y="middle"),P=Math.ceil(P),z=Math.ceil(z),D=Math.round(D),O=Math.round(O),b.autoMargin(x,S+"-range-selector",{x:L.x,y:L.y,l:P*i[F],r:P*f[F],b:z*f[Y],t:z*i[Y]}),k.attr("transform",a(D,O))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(t,B,H){var d=t("d3-time"),l=t("../../lib").titleCase;B.exports=function(e,o){var a=e._name,n={};if(o.step==="all")n[a+".autorange"]=!0;else{var r=b(e,o);n[a+".range[0]"]=r[0],n[a+".range[1]"]=r[1]}return n};function b(w,e){var o=w.range,a=new Date(w.r2l(o[1])),n=e.step,r=d["utc"+l(n)],u=e.count,s;switch(e.stepmode){case"backward":s=w.l2r(+r.offset(a,-u));break;case"todate":var i=r.offset(a,-u);s=w.l2r(+r.ceil(i));break}var f=o[1];return[s,f]}},{"../../lib":503,"d3-time":122}],437:[function(t,B,H){B.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(t,B,H){var d=t("../color/attributes");B.exports={bgcolor:{valType:"color",dflt:d.background,editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids").list,l=t("../../plots/cartesian/autorange").getAutoRange,b=t("./constants");B.exports=function(e){for(var o=d(e,"x",!0),a=0;a<o.length;a++){var n=o[a],r=n[b.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=l(e,n))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(t,B,H){B.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("../../plots/cartesian/axis_ids"),w=t("./attributes"),e=t("./oppaxis_attributes");B.exports=function(a,n,r){var u=a[r],s=n[r];if(!(u.rangeslider||n._requestRangeslider[s._id]))return;d.isPlainObject(u.rangeslider)||(u.rangeslider={});var i=u.rangeslider,f=l.newContainer(s,"rangeslider");function h(S,k){return d.coerce(i,f,w,S,k)}var p,v;function y(S,k){return d.coerce(p,v,e,S,k)}var g=h("visible");if(!!g){h("bgcolor",n.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!s.isValidRange(i.range)),h("range");var A=n._subplots;if(A)for(var m=A.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===b.name2id(r)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),M=d.simpleMap(m,b.id2name),_=0;_<M.length;_++){var T=M[_];p=i[T]||{},v=l.newContainer(f,T,"yaxis");var x=n[T],c;p.range&&x.isValidRange(p.range)&&(c="fixed");var L=y("rangemode",c);L!=="match"&&y("range",x.range.slice())}f._input=i}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../../lib"),e=w.strTranslate,o=t("../drawing"),a=t("../color"),n=t("../titles"),r=t("../../plots/cartesian"),u=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),i=t("../../lib/setcursor"),f=t("./constants");B.exports=function(x){for(var c=x._fullLayout,L=c._rangeSliderData,S=0;S<L.length;S++){var k=L[S][f.name];k._clipId=k._id+"-"+c._uid}function P(I){return I._name}var z=c._infolayer.selectAll("g."+f.containerClassName).data(L,P);z.exit().each(function(I){var R=I[f.name];c._topdefs.select("#"+R._clipId).remove()}).remove(),L.length!==0&&(z.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),z.each(function(I){var R=d.select(this),D=I[f.name],O=c[u.id2name(I.anchor)],F=D[u.id2name(I.anchor)];if(D.range){var Y=w.simpleMap(D.range,I.r2l),X=w.simpleMap(I.range,I.r2l),q;X[0]<X[1]?q=[Math.min(Y[0],X[0]),Math.max(Y[1],X[1])]:q=[Math.max(Y[0],X[0]),Math.min(Y[1],X[1])],D.range=D._input.range=w.simpleMap(q,I.l2r)}I.cleanRange("rangeslider.range");var $=c._size,V=I.domain;D._width=$.w*(V[1]-V[0]);var K=Math.round($.l+$.w*V[0]),se=Math.round($.t+$.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+D._offsetShift+f.extraPad);R.attr("transform",e(K,se)),D._rl=w.simpleMap(D.range,I.r2l);var ue=D._rl[0],oe=D._rl[1],U=oe-ue;if(D.p2d=function(me){return me/D._width*U+ue},D.d2p=function(me){return(me-ue)/U*D._width},I.rangebreaks){var G=I.locateBreaks(ue,oe);if(G.length){var re,ee,j=0;for(re=0;re<G.length;re++)ee=G[re],j+=ee.max-ee.min;var Q=D._width/(oe-ue-j),ne=[-Q*ue];for(re=0;re<G.length;re++)ee=G[re],ne.push(ne[ne.length-1]-Q*(ee.max-ee.min));for(D.d2p=function(me){for(var ce=ne[0],ye=0;ye<G.length;ye++){var xe=G[ye];if(me>=xe.max)ce=ne[ye+1];else if(me<xe.min)break}return ce+Q*me},re=0;re<G.length;re++)ee=G[re],ee.pmin=D.d2p(ee.min),ee.pmax=D.d2p(ee.max);D.p2d=function(me){for(var ce=ne[0],ye=0;ye<G.length;ye++){var xe=G[ye];if(me>=xe.pmax)ce=ne[ye+1];else if(me<xe.pmin)break}return(me-ce)/Q}}}if(F.rangemode!=="match"){var ae=O.r2l(F.range[0]),ie=O.r2l(F.range[1]),fe=ie-ae;D.d2pOppAxis=function(me){return(me-ae)/fe*D._height}}R.call(y,x,I,D).call(g,x,I,D).call(A,x,I,D).call(M,x,I,D,F).call(_,x,I,D).call(T,x,I,D),h(R,x,I,D),v(R,x,I,D,O,F),I.side==="bottom"&&n.draw(x,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:c._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:se+D._height+D._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function h(x,c,L,S){if(c._context.staticPlot)return;var k=x.select("rect."+f.slideBoxClassName).node(),P=x.select("rect."+f.grabAreaMinClassName).node(),z=x.select("rect."+f.grabAreaMaxClassName).node();function I(){var R=d.event,D=R.target,O=R.clientX||R.touches[0].clientX,F=O-x.node().getBoundingClientRect().left,Y=S.d2p(L._rl[0]),X=S.d2p(L._rl[1]),q=s.coverSlip();this.addEventListener("touchmove",$),this.addEventListener("touchend",V),q.addEventListener("mousemove",$),q.addEventListener("mouseup",V);function $(K){var se=K.clientX||K.touches[0].clientX,ue=+se-O,oe,U,G;switch(D){case k:G="ew-resize",oe=Y+ue,U=X+ue;break;case P:G="col-resize",oe=Y+ue,U=X;break;case z:G="col-resize",oe=Y,U=X+ue;break;default:G="ew-resize",oe=F,U=F+ue;break}if(U<oe){var re=U;U=oe,oe=re}S._pixelMin=oe,S._pixelMax=U,i(d.select(q),G),p(x,c,L,S)}function V(){q.removeEventListener("mousemove",$),q.removeEventListener("mouseup",V),this.removeEventListener("touchmove",$),this.removeEventListener("touchend",V),w.removeElement(q)}}x.on("mousedown",I),x.on("touchstart",I)}function p(x,c,L,S){function k(I){return L.l2r(w.constrain(I,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),z=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){l.call("_guiRelayout",c,L._name+".range",[P,z])})}function v(x,c,L,S,k,P){var z=f.handleWidth/2;function I(K){return w.constrain(K,0,S._width)}function R(K){return w.constrain(K,0,S._height)}function D(K){return w.constrain(K,-z,S._width+z)}var O=I(S.d2p(L._rl[0])),F=I(S.d2p(L._rl[1]));if(x.select("rect."+f.slideBoxClassName).attr("x",O).attr("width",F-O),x.select("rect."+f.maskMinClassName).attr("width",O),x.select("rect."+f.maskMaxClassName).attr("x",F).attr("width",S._width-F),P.rangemode!=="match"){var Y=S._height-R(S.d2pOppAxis(k._rl[1])),X=S._height-R(S.d2pOppAxis(k._rl[0]));x.select("rect."+f.maskMinOppAxisClassName).attr("x",O).attr("height",Y).attr("width",F-O),x.select("rect."+f.maskMaxOppAxisClassName).attr("x",O).attr("y",X).attr("height",S._height-X).attr("width",F-O),x.select("rect."+f.slideBoxClassName).attr("y",Y).attr("height",X-Y)}var q=.5,$=Math.round(D(O-z))-q,V=Math.round(D(F-z))+q;x.select("g."+f.grabberMinClassName).attr("transform",e($,q)),x.select("g."+f.grabberMaxClassName).attr("transform",e(V,q))}function y(x,c,L,S){var k=w.ensureSingle(x,"rect",f.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2==0?S.borderwidth:S.borderwidth-1,z=-S._offsetShift,I=o.crispRound(c,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:e(z,z),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":I})}function g(x,c,L,S){var k=c._fullLayout,P=w.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(z){z.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function A(x,c,L,S){var k=c.calcdata,P=x.selectAll("g."+f.rangePlotClassName).data(L._subplotsWith,w.identity);P.enter().append("g").attr("class",function(I){return f.rangePlotClassName+" "+I}).call(o.setClipUrl,S._clipId,c),P.order(),P.exit().remove();var z;P.each(function(I,R){var D=d.select(this),O=R===0,F=u.getFromId(c,I,"y"),Y=F._name,X=S[Y],q={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:c._context};L.rangebreaks&&(q.layout.xaxis.rangebreaks=L.rangebreaks),q.layout[Y]={type:F.type,domain:[0,1],range:X.rangemode!=="match"?X.range.slice():F.range.slice(),calendar:F.calendar},F.rangebreaks&&(q.layout[Y].rangebreaks=F.rangebreaks),b.supplyDefaults(q);var $=q._fullLayout.xaxis,V=q._fullLayout[Y];$.clearCalc(),$.setScale(),V.clearCalc(),V.setScale();var K={id:I,plotgroup:D,xaxis:$,yaxis:V,isRangePlot:!0};O?z=K:(K.mainplot="xy",K.mainplotinfo=z),r.rangePlot(c,K,m(k,I))})}function m(x,c){for(var L=[],S=0;S<x.length;S++){var k=x[S],P=k[0].trace;P.xaxis+P.yaxis===c&&L.push(k)}return L}function M(x,c,L,S,k){var P=w.ensureSingle(x,"rect",f.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(a.fill,f.maskColor);var z=w.ensureSingle(x,"rect",f.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});if(z.attr("height",S._height).call(a.fill,f.maskColor),k.rangemode!=="match"){var I=w.ensureSingle(x,"rect",f.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(a.fill,f.maskOppAxisColor);var R=w.ensureSingle(x,"rect",f.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});R.attr("width",S._width).style("border-top",f.maskOppBorder).call(a.fill,f.maskOppAxisColor)}}function _(x,c,L,S){if(!c._context.staticPlot){var k=w.ensureSingle(x,"rect",f.slideBoxClassName,function(P){P.attr({y:0,cursor:f.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:f.slideBoxFill})}}function T(x,c,L,S){var k=w.ensureSingle(x,"g",f.grabberMinClassName),P=w.ensureSingle(x,"g",f.grabberMaxClassName),z={x:0,width:f.handleWidth,rx:f.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},R=w.ensureSingle(k,"rect",f.handleMinClassName,function(X){X.attr(z)});R.attr(I);var D=w.ensureSingle(P,"rect",f.handleMaxClassName,function(X){X.attr(z)});D.attr(I);var O={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:c._context.staticPlot?void 0:f.grabAreaCursor},F=w.ensureSingle(k,"rect",f.grabAreaMinClassName,function(X){X.attr(O)});F.attr("height",S._height);var Y=w.ensureSingle(P,"rect",f.grabAreaMaxClassName,function(X){X.attr(O)});Y.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids"),l=t("../../lib/svg_text_utils"),b=t("./constants"),w=t("../../constants/alignment").LINE_SPACING,e=b.name;function o(a){var n=a&&a[e];return n&&n.visible}H.isVisible=o,H.makeData=function(a){var n=d.list({_fullLayout:a},"x",!0),r=a.margin,u=[];if(!a._has("gl2d"))for(var s=0;s<n.length;s++){var i=n[s];if(o(i)){u.push(i);var f=i[e];f._id=e+i._id,f._height=(a.height-r.b-r.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}a._rangeSliderData=u},H.autoMarginOpts=function(a,n){var r=a._fullLayout,u=n[e],s=n._id.charAt(0),i=0,f=0;if(n.side==="bottom"&&(i=n._depth,n.title.text!==r._dfltTitle[s])){f=1.5*n.title.font.size+10+u._offsetShift;var h=(n.title.text.match(l.BR_TAG_ALL)||[]).length;f+=h*n.title.font.size*w}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:u._height+i+Math.max(r.margin.b,f),pad:b.extraPad+u._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./oppaxis_attributes"),w=t("./helpers");B.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:d.extendFlat({},l,{yaxis:b})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:w.isVisible,makeData:w.makeData,autoMarginOpts:w.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(t,B,H){B.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(t,B,H){var d=t("../annotations/attributes"),l=t("../../traces/scatter/attributes").line,b=t("../drawing/attributes").dash,w=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:w({},d.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:w({},d.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:w({},l.color,{editType:"arraydraw"}),width:w({},l.width,{editType:"calc+arraydraw"}),dash:w({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("./constants"),w=t("./helpers");B.exports=function(u){var s=u._fullLayout,i=d.filterVisible(s.shapes);if(!(!i.length||!u._fullData.length))for(var f=0;f<i.length;f++){var h=i[f];h._extremes={};var p,v,y=l.getRefType(h.xref),g=l.getRefType(h.yref);if(h.xref!=="paper"&&y!=="domain"){var A=h.xsizemode==="pixel"?h.xanchor:h.x0,m=h.xsizemode==="pixel"?h.xanchor:h.x1;p=l.getFromId(u,h.xref),v=n(p,A,m,h.path,b.paramIsX),v&&(h._extremes[p._id]=l.findExtremes(p,v,e(h)))}if(h.yref!=="paper"&&g!=="domain"){var M=h.ysizemode==="pixel"?h.yanchor:h.y0,_=h.ysizemode==="pixel"?h.yanchor:h.y1;p=l.getFromId(u,h.yref),v=n(p,M,_,h.path,b.paramIsY),v&&(h._extremes[p._id]=l.findExtremes(p,v,o(h)))}}};function e(r){return a(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function o(r){return a(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function a(r,u,s,i,f,h){var p=r/2,v=h;if(u==="pixel"){var y=f?w.extractPathCoords(f,h?b.paramIsY:b.paramIsX):[s,i],g=d.aggNums(Math.max,null,y),A=d.aggNums(Math.min,null,y),m=A<0?Math.abs(A)+p:p,M=g>0?g+p:p;return{ppad:p,ppadplus:v?m:M,ppadminus:v?M:m}}else return{ppad:p}}function n(r,u,s,i,f){var h=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(u!==void 0)return[h(u),h(s)];if(!!i){var p=1/0,v=-1/0,y=i.match(b.segmentRE),g,A,m,M,_;for(r.type==="date"&&(h=w.decodeDate(h)),g=0;g<y.length;g++)A=y[g],m=f[A.charAt(0)].drawn,m!==void 0&&(M=y[g].substr(1).match(b.paramRE),!(!M||M.length<m)&&(_=h(M[m]),_<p&&(p=_),_>v&&(v=_)));if(v>=p)return[p,v]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(t,B,H){B.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./attributes"),e=t("./helpers");B.exports=function(n,r){b(n,r,{name:"shapes",handleItemDefaults:o})};function o(a,n,r){function u(Y,X){return d.coerce(a,n,w,Y,X)}var s=u("visible");if(!!s){var i=u("path"),f=i?"path":"rect",h=u("type",f);n.type!=="path"&&delete n.path,u("editable"),u("layer"),u("opacity"),u("fillcolor"),u("fillrule");var p=u("line.width");p&&(u("line.color"),u("line.dash"));for(var v=u("xsizemode"),y=u("ysizemode"),g=["x","y"],A=0;A<2;A++){var m=g[A],M=m+"anchor",_=m==="x"?v:y,T={_fullLayout:r},x,c,L,S=l.coerceRef(a,n,T,m,void 0,"paper"),k=l.getRefType(S);if(k==="range"?(x=l.getFromId(T,S),x._shapeIndices.push(n._index),L=e.rangeToShapePosition(x),c=e.shapePositionToRange(x)):c=L=d.identity,h!=="path"){var P=.25,z=.75,I=m+"0",R=m+"1",D=a[I],O=a[R];a[I]=c(a[I],!0),a[R]=c(a[R],!0),_==="pixel"?(u(I,0),u(R,10)):(l.coercePosition(n,T,u,S,I,P),l.coercePosition(n,T,u,S,R,z)),n[I]=L(n[I]),n[R]=L(n[R]),a[I]=D,a[R]=O}if(_==="pixel"){var F=a[M];a[M]=c(a[M],!0),l.coercePosition(n,T,u,S,M,.25),n[M]=L(n[M]),a[M]=F}}h==="path"?u("path"):d.noneOrAll(a,n,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("./draw_newshape/helpers").readPaths,e=t("./draw_newshape/display_outlines"),o=t("../../plots/cartesian/handle_outline").clearOutlineControllers,a=t("../color"),n=t("../drawing"),r=t("../../plot_api/plot_template").arrayEditor,u=t("../dragelement"),s=t("../../lib/setcursor"),i=t("./constants"),f=t("./helpers");B.exports={draw:h,drawOne:y,eraseActiveShape:c};function h(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var z=0;z<S.shapes.length;z++)S.shapes[z].visible&&y(L,z)}function p(L){return!!L._fullLayout._drawing}function v(L){return!L._context.edits.shapePosition}function y(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=f.makeOptionsAndPlotinfo(L,S),P=k.options,z=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")R(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")R(L._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var I=z.mainplotinfo||z;R(I.shapelayer)}else R(L._fullLayout._shapeLowerLayer);function R(D){var O=m(L,P),F={"data-index":S,"fill-rule":P.fillrule,d:O},Y=P.opacity,X=P.fillcolor,q=P.line.width?P.line.color:"rgba(0,0,0,0)",$=P.line.width,V=P.line.dash;!$&&P.editable===!0&&($=5,V="solid");var K=O[O.length-1]!=="Z",se=v(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;se&&(X=K?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,Y=L._fullLayout.activeshape.opacity);var ue=D.append("path").attr(F).style("opacity",Y).call(a.stroke,q).call(a.fill,X).call(n.dashLine,V,$);g(ue,L,P);var oe;if((se||L._context.edits.shapePosition)&&(oe=r(L.layout,"shapes",P)),se){ue.style({cursor:"move"});var U={element:ue.node(),plotinfo:z,gd:L,editHelpers:oe,isActiveShape:!0},G=w(O,L);e(G,ue,U)}else L._context.edits.shapePosition?A(L,ue,P,S,D,oe):P.editable===!0&&ue.style("pointer-events",K||a.opacity(X)*Y<=.5?"stroke":"all");ue.node().addEventListener("click",function(){return T(L,ue)})}}function g(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function A(L,S,k,P,z,I){var R=10,D=10,O=k.xsizemode==="pixel",F=k.ysizemode==="pixel",Y=k.type==="line",X=k.type==="path",q=I.modifyItem,$,V,K,se,ue,oe,U,G,re,ee,j,Q,ne,ae,ie,fe=b.getFromId(L,k.xref),me=b.getRefType(k.xref),ce=b.getFromId(L,k.yref),ye=b.getRefType(k.yref),xe=f.getDataToPixel(L,fe,!1,me),ke=f.getDataToPixel(L,ce,!0,ye),Ae=f.getPixelToData(L,fe,!1,me),Oe=f.getPixelToData(L,ce,!0,ye),He=Ie(),Ge={element:He.node(),gd:L,prepFn:Ue,doneFn:Re,clickFn:Ve},_e;u.init(Ge),He.node().onmousemove=qe;function Ie(){return Y?Ye():S}function Ye(){var Bt=10,Lt=Math.max(k.line.width,Bt),Mt=z.append("g").attr("data-index",P);Mt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Lt,"stroke-opacity":"0"});var it={"fill-opacity":"0"},ht=Math.max(Lt/2,Bt);return Mt.append("circle").attr({"data-line-point":"start-point",cx:O?xe(k.xanchor)+k.x0:xe(k.x0),cy:F?ke(k.yanchor)-k.y0:ke(k.y0),r:ht}).style(it).classed("cursor-grab",!0),Mt.append("circle").attr({"data-line-point":"end-point",cx:O?xe(k.xanchor)+k.x1:xe(k.x1),cy:F?ke(k.yanchor)-k.y1:ke(k.y1),r:ht}).style(it).classed("cursor-grab",!0),Mt}function qe(Bt){if(p(L)){_e=null;return}if(Y)Bt.target.tagName==="path"?_e="move":_e=Bt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Lt=Ge.element.getBoundingClientRect(),Mt=Lt.right-Lt.left,it=Lt.bottom-Lt.top,ht=Bt.clientX-Lt.left,Qe=Bt.clientY-Lt.top,Ce=!X&&Mt>R&&it>D&&!Bt.shiftKey?u.getCursor(ht/Mt,1-Qe/it):"move";s(S,Ce),_e=Ce.split("-")[0]}}function Ue(Bt){p(L)||(O&&(ue=xe(k.xanchor)),F&&(oe=ke(k.yanchor)),k.type==="path"?ie=k.path:($=O?k.x0:xe(k.x0),V=F?k.y0:ke(k.y0),K=O?k.x1:xe(k.x1),se=F?k.y1:ke(k.y1)),$<K?(re=$,ne="x0",ee=K,ae="x1"):(re=K,ne="x1",ee=$,ae="x0"),!F&&V<se||F&&V>se?(U=V,j="y0",G=se,Q="y1"):(U=se,j="y1",G=V,Q="y0"),qe(Bt),Gt(z,k),zt(S,k,L),Ge.moveFn=_e==="move"?dt:Dt,Ge.altKey=Bt.altKey)}function Re(){p(L)||(s(S),kt(z),g(S,L,k),d.call("_guiRelayout",L,I.getUpdateObj()))}function Ve(){p(L)||kt(z)}function dt(Bt,Lt){if(k.type==="path"){var Mt=function(Qe){return Qe},it=Mt,ht=Mt;O?q("xanchor",k.xanchor=Ae(ue+Bt)):(it=function(Ce){return Ae(xe(Ce)+Bt)},fe&&fe.type==="date"&&(it=f.encodeDate(it))),F?q("yanchor",k.yanchor=Oe(oe+Lt)):(ht=function(Ce){return Oe(ke(Ce)+Lt)},ce&&ce.type==="date"&&(ht=f.encodeDate(ht))),q("path",k.path=_(ie,it,ht))}else O?q("xanchor",k.xanchor=Ae(ue+Bt)):(q("x0",k.x0=Ae($+Bt)),q("x1",k.x1=Ae(K+Bt))),F?q("yanchor",k.yanchor=Oe(oe+Lt)):(q("y0",k.y0=Oe(V+Lt)),q("y1",k.y1=Oe(se+Lt)));S.attr("d",m(L,k)),Gt(z,k)}function Dt(Bt,Lt){if(X){var Mt=function(Et){return Et},it=Mt,ht=Mt;O?q("xanchor",k.xanchor=Ae(ue+Bt)):(it=function(rr){return Ae(xe(rr)+Bt)},fe&&fe.type==="date"&&(it=f.encodeDate(it))),F?q("yanchor",k.yanchor=Oe(oe+Lt)):(ht=function(rr){return Oe(ke(rr)+Lt)},ce&&ce.type==="date"&&(ht=f.encodeDate(ht))),q("path",k.path=_(ie,it,ht))}else if(Y){if(_e==="resize-over-start-point"){var Qe=$+Bt,Ce=F?V-Lt:V+Lt;q("x0",k.x0=O?Qe:Ae(Qe)),q("y0",k.y0=F?Ce:Oe(Ce))}else if(_e==="resize-over-end-point"){var je=K+Bt,rt=F?se-Lt:se+Lt;q("x1",k.x1=O?je:Ae(je)),q("y1",k.y1=F?rt:Oe(rt))}}else{var ut=function(Et){return _e.indexOf(Et)!==-1},Pt=ut("n"),St=ut("s"),Nt=ut("w"),Xt=ut("e"),Ot=Pt?U+Lt:U,Kt=St?G+Lt:G,Je=Nt?re+Bt:re,gt=Xt?ee+Bt:ee;F&&(Pt&&(Ot=U-Lt),St&&(Kt=G-Lt)),(!F&&Kt-Ot>D||F&&Ot-Kt>D)&&(q(j,k[j]=F?Ot:Oe(Ot)),q(Q,k[Q]=F?Kt:Oe(Kt))),gt-Je>R&&(q(ne,k[ne]=O?Je:Ae(Je)),q(ae,k[ae]=O?gt:Ae(gt)))}S.attr("d",m(L,k)),Gt(z,k)}function Gt(Bt,Lt){(O||F)&&Mt();function Mt(){var it=Lt.type!=="path",ht=Bt.selectAll(".visual-cue").data([0]),Qe=1;ht.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Qe}).classed("visual-cue",!0);var Ce=xe(O?Lt.xanchor:l.midRange(it?[Lt.x0,Lt.x1]:f.extractPathCoords(Lt.path,i.paramIsX))),je=ke(F?Lt.yanchor:l.midRange(it?[Lt.y0,Lt.y1]:f.extractPathCoords(Lt.path,i.paramIsY)));if(Ce=f.roundPositionForSharpStrokeRendering(Ce,Qe),je=f.roundPositionForSharpStrokeRendering(je,Qe),O&&F){var rt="M"+(Ce-1-Qe)+","+(je-1-Qe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ht.attr("d",rt)}else if(O){var ut="M"+(Ce-1-Qe)+","+(je-9-Qe)+"v18 h2 v-18 Z";ht.attr("d",ut)}else{var Pt="M"+(Ce-9-Qe)+","+(je-1-Qe)+"h18 v2 h-18 Z";ht.attr("d",Pt)}}}function kt(Bt){Bt.selectAll(".visual-cue").remove()}function zt(Bt,Lt,Mt){var it=Lt.xref,ht=Lt.yref,Qe=b.getFromId(Mt,it),Ce=b.getFromId(Mt,ht),je="";it!=="paper"&&!Qe.autorange&&(je+=it),ht!=="paper"&&!Ce.autorange&&(je+=ht),n.setClipUrl(Bt,je?"clip"+Mt._fullLayout._uid+je:null,Mt)}}function m(L,S){var k=S.type,P=b.getRefType(S.xref),z=b.getRefType(S.yref),I=b.getFromId(L,S.xref),R=b.getFromId(L,S.yref),D=L._fullLayout._size,O,F,Y,X,q,$,V,K;if(I?P==="domain"?F=function(ne){return I._offset+I._length*ne}:(O=f.shapePositionToRange(I),F=function(ne){return I._offset+I.r2p(O(ne,!0))}):F=function(ne){return D.l+D.w*ne},R?z==="domain"?X=function(ne){return R._offset+R._length*(1-ne)}:(Y=f.shapePositionToRange(R),X=function(ne){return R._offset+R.r2p(Y(ne,!0))}):X=function(ne){return D.t+D.h*(1-ne)},k==="path")return I&&I.type==="date"&&(F=f.decodeDate(F)),R&&R.type==="date"&&(X=f.decodeDate(X)),M(S,F,X);if(S.xsizemode==="pixel"){var se=F(S.xanchor);q=se+S.x0,$=se+S.x1}else q=F(S.x0),$=F(S.x1);if(S.ysizemode==="pixel"){var ue=X(S.yanchor);V=ue-S.y0,K=ue-S.y1}else V=X(S.y0),K=X(S.y1);if(k==="line")return"M"+q+","+V+"L"+$+","+K;if(k==="rect")return"M"+q+","+V+"H"+$+"V"+K+"H"+q+"Z";var oe=(q+$)/2,U=(V+K)/2,G=Math.abs(oe-q),re=Math.abs(U-V),ee="A"+G+","+re,j=oe+G+","+U,Q=oe+","+(U-re);return"M"+j+ee+" 0 1,1 "+Q+ee+" 0 0,1 "+j+"Z"}function M(L,S,k){var P=L.path,z=L.xsizemode,I=L.ysizemode,R=L.xanchor,D=L.yanchor;return P.replace(i.segmentRE,function(O){var F=0,Y=O.charAt(0),X=i.paramIsX[Y],q=i.paramIsY[Y],$=i.numParams[Y],V=O.substr(1).replace(i.paramRE,function(K){return X[F]?z==="pixel"?K=S(R)+Number(K):K=S(K):q[F]&&(I==="pixel"?K=k(D)-Number(K):K=k(K)),F++,F>$&&(K="X"),K});return F>$&&(V=V.replace(/[\s,]*X.*/,""),l.log("Ignoring extra params in segment "+O)),Y+V})}function _(L,S,k){return L.replace(i.segmentRE,function(P){var z=0,I=P.charAt(0),R=i.paramIsX[I],D=i.paramIsY[I],O=i.numParams[I],F=P.substr(1).replace(i.paramRE,function(Y){return z>=O||(R[z]?Y=S(Y):D[z]&&(Y=k(Y)),z++),Y});return I+F})}function T(L,S){if(!!v(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){x(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=x,h(L)}}}function x(L){if(!!v(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(o(L),delete L._fullLayout._activeShapeIndex,h(L))}}function c(L){if(!!v(L)){o(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],z=0;z<k.length;z++)z!==S&&P.push(k[z]);delete L._fullLayout._activeShapeIndex,d.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(t,B,H){var d=t("../../drawing/attributes").dash,l=t("../../../lib/extend").extendFlat;B.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},d,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(t,B,H){var d=32;B.exports={CIRCLE_SIDES:d,i000:0,i090:d/4,i180:d/2,i270:d/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(t,B,H){var d=t("../../color");B.exports=function(b,w,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var o=e("newshape.line.width");if(o){var a=(b||{}).plot_bgcolor||"#FFF";e("newshape.line.color",d.contrast(a)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":366}],454:[function(t,B,H){var d=t("../../dragelement"),l=t("../../dragelement/helpers"),b=l.drawMode,w=t("../../../registry"),e=t("./constants"),o=e.i000,a=e.i090,n=e.i180,r=e.i270,u=t("../../../plots/cartesian/handle_outline"),s=u.clearOutlineControllers,i=t("./helpers"),f=i.pointsShapeRectangle,h=i.pointsShapeEllipse,p=i.writePaths,v=t("./newshapes");B.exports=function g(A,m,M,_){_||(_=0);var T=M.gd;function x(){g(A,m,M,_++),h(A[0])&&c({redrawing:!0})}function c(ee){M.isActiveShape=!1;var j=v(m,M);Object.keys(j).length&&w.call((ee||{}).redrawing?"relayout":"_guiRelayout",T,j)}var L=M.isActiveShape,S=T._fullLayout,k=S._zoomlayer,P=M.dragmode,z=b(P);z?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&s(T),m.attr("d",p(A));var I,R,D,O,F;if(L&&!_){F=y([],A);var Y=k.append("g").attr("class","outline-controllers");se(Y),re()}function X(ee){D=+ee.srcElement.getAttribute("data-i"),O=+ee.srcElement.getAttribute("data-j"),I[D][O].moveFn=q}function q(ee,j){if(!!A.length){var Q=F[D][O][1],ne=F[D][O][2],ae=A[D],ie=ae.length;if(f(ae)){for(var fe=0;fe<ie;fe++)if(fe!==O){var me=ae[fe];me[1]===ae[O][1]&&(me[1]=Q+ee),me[2]===ae[O][2]&&(me[2]=ne+j)}if(ae[O][1]=Q+ee,ae[O][2]=ne+j,!f(ae))for(var ce=0;ce<ie;ce++)for(var ye=0;ye<ae[ce].length;ye++)ae[ce][ye]=F[D][ce][ye]}else ae[O][1]=Q+ee,ae[O][2]=ne+j;x()}}function $(){c()}function V(){if(!!A.length&&!!A[D]&&!!A[D].length){for(var ee=[],j=0;j<A[D].length;j++)j!==O&&ee.push(A[D][j]);ee.length>1&&!(ee.length===2&&ee[1][0]==="Z")&&(O===0&&(ee[0][0]="M"),A[D]=ee,x(),c())}}function K(ee,j){if(ee===2){D=+j.srcElement.getAttribute("data-i"),O=+j.srcElement.getAttribute("data-j");var Q=A[D];!f(Q)&&!h(Q)&&V()}}function se(ee){I=[];for(var j=0;j<A.length;j++){var Q=A[j],ne=f(Q),ae=!ne&&h(Q);I[j]=[];for(var ie=0;ie<Q.length;ie++)if(Q[ie][0]!=="Z"&&!(ae&&ie!==o&&ie!==a&&ie!==n&&ie!==r)){var fe=Q[ie][1],me=Q[ie][2],ce=ee.append("circle").classed("cursor-grab",!0).attr("data-i",j).attr("data-j",ie).attr("cx",fe).attr("cy",me).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});I[j][ie]={element:ce.node(),gd:T,prepFn:X,doneFn:$,clickFn:K},d.init(I[j][ie])}}}function ue(ee,j){if(!!A.length)for(var Q=0;Q<A.length;Q++)for(var ne=0;ne<A[Q].length;ne++)for(var ae=0;ae+2<A[Q][ne].length;ae+=2)A[Q][ne][ae+1]=F[Q][ne][ae+1]+ee,A[Q][ne][ae+2]=F[Q][ne][ae+2]+j}function oe(ee,j){ue(ee,j),x()}function U(ee){D=+ee.srcElement.getAttribute("data-i"),D||(D=0),R[D].moveFn=oe}function G(){c()}function re(){if(R=[],!!A.length){var ee=0;R[ee]={element:m[0][0],gd:T,prepFn:U,doneFn:G},d.init(R[ee])}}};function y(g,A){for(var m=0;m<A.length;m++){var M=A[m];g[m]=[];for(var _=0;_<M.length;_++){g[m][_]=[];for(var T=0;T<M[_].length;T++)g[m][_][T]=M[_][T]}}return g}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(t,B,H){var d=t("parse-svg-path"),l=t("./constants"),b=l.CIRCLE_SIDES,w=l.SQRT2,e=t("../../../plots/cartesian/helpers"),o=e.p2r,a=e.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];H.writePaths=function(i){var f=i.length;if(!f)return"M0,0Z";for(var h="",p=0;p<f;p++)for(var v=i[p].length,y=0;y<v;y++){var g=i[p][y][0];if(g==="Z")h+="Z";else for(var A=i[p][y].length,m=0;m<A;m++){var M=m;g==="Q"||g==="S"?M=r[m]:g==="C"&&(M=n[m]),h+=i[p][y][M],m>0&&m<A-1&&(h+=",")}}return h},H.readPaths=function(i,f,h,p){var v=d(i),y=[],g=-1,A=function(){g++,y[g]=[]},m,M=0,_=0,T,x,c=function(){T=M,x=_};c();for(var L=0;L<v.length;L++){var S=[],k,P,z,I,R=v[L][0],D=R;switch(R){case"M":A(),M=+v[L][1],_=+v[L][2],S.push([D,M,_]),c();break;case"Q":case"S":k=+v[L][1],z=+v[L][2],M=+v[L][3],_=+v[L][4],S.push([D,M,_,k,z]);break;case"C":k=+v[L][1],z=+v[L][2],P=+v[L][3],I=+v[L][4],M=+v[L][5],_=+v[L][6],S.push([D,M,_,k,z,P,I]);break;case"T":case"L":M=+v[L][1],_=+v[L][2],S.push([D,M,_]);break;case"H":D="L",M=+v[L][1],S.push([D,M,_]);break;case"V":D="L",_=+v[L][1],S.push([D,M,_]);break;case"A":D="L";var O=+v[L][1],F=+v[L][2];+v[L][4]||(O=-O,F=-F);var Y=M-O,X=_;for(m=1;m<=b/2;m++){var q=2*Math.PI*m/b;S.push([D,Y+O*Math.cos(q),X+F*Math.sin(q)])}break;case"Z":(M!==T||_!==x)&&(M=T,_=x,S.push([D,M,_]));break}for(var $=(h||{}).domain,V=f._fullLayout._size,K=h&&h.xsizemode==="pixel",se=h&&h.ysizemode==="pixel",ue=p===!1,oe=0;oe<S.length;oe++){for(m=0;m+2<7;m+=2){var U=S[oe][m+1],G=S[oe][m+2];U===void 0||G===void 0||(M=U,_=G,h&&(h.xaxis&&h.xaxis.p2r?(ue&&(U-=h.xaxis._offset),K?U=a(h.xaxis,h.xanchor)+U:U=o(h.xaxis,U)):(ue&&(U-=V.l),$?U=$.x[0]+U/V.w:U=U/V.w),h.yaxis&&h.yaxis.p2r?(ue&&(G-=h.yaxis._offset),se?G=a(h.yaxis,h.yanchor)-G:G=o(h.yaxis,G)):(ue&&(G-=V.t),$?G=$.y[1]-G/V.h:G=1-G/V.h)),S[oe][m+1]=U,S[oe][m+2]=G)}y[g].push(S[oe].slice())}}return y};function u(i,f){return Math.abs(i-f)<=1e-6}function s(i,f){var h=f[1]-i[1],p=f[2]-i[2];return Math.sqrt(h*h+p*p)}H.pointsShapeRectangle=function(i){var f=i.length;if(f!==5)return!1;for(var h=1;h<3;h++){var p=i[0][h]-i[1][h],v=i[3][h]-i[2][h];if(!u(p,v))return!1;var y=i[0][h]-i[3][h],g=i[1][h]-i[2][h];if(!u(y,g))return!1}return!u(i[0][1],i[1][1])&&!u(i[0][1],i[3][1])?!1:!!(s(i[0],i[1])*s(i[0],i[3]))},H.pointsShapeEllipse=function(i){var f=i.length;if(f!==b+1)return!1;f=b;for(var h=0;h<f;h++){var p=(f*2-h)%f,v=(f/2+p)%f,y=(f/2+h)%f;if(!u(s(i[h],i[y]),s(i[p],i[v])))return!1}return!0},H.handleEllipse=function(i,f,h){if(!i)return[f,h];var p=H.ellipseOver({x0:f[0],y0:f[1],x1:h[0],y1:h[1]}),v=(p.x1+p.x0)/2,y=(p.y1+p.y0)/2,g=(p.x1-p.x0)/2,A=(p.y1-p.y0)/2;g||(g=A=A/w),A||(A=g=g/w);for(var m=[],M=0;M<b;M++){var _=M*2*Math.PI/b;m.push([v+g*Math.cos(_),y+A*Math.sin(_)])}return m},H.ellipseOver=function(i){var f=i.x0,h=i.y0,p=i.x1,v=i.y1,y=p-f,g=v-h;f-=y,h-=g;var A=(f+p)/2,m=(h+v)/2,M=w;return y*=M,g*=M,{x0:A-y,y0:m-g,x1:A+y,y1:m+g}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(t,B,H){var d=t("../../dragelement/helpers"),l=d.drawMode,b=d.openMode,w=t("./constants"),e=w.i000,o=w.i090,a=w.i180,n=w.i270,r=w.cos45,u=w.sin45,s=t("../../../plots/cartesian/helpers"),i=s.p2r,f=s.r2p,h=t("../../../plots/cartesian/handle_outline"),p=h.clearSelect,v=t("./helpers"),y=v.readPaths,g=v.writePaths,A=v.ellipseOver;B.exports=function(_,T){if(!!_.length){var x=_[0][0];if(!!x){var c=x.getAttribute("d"),L=T.gd,S=L._fullLayout.newshape,k=T.plotinfo,P=k.xaxis,z=k.yaxis,I=!!k.domain||!k.xaxis,R=!!k.domain||!k.yaxis,D=T.isActiveShape,O=T.dragmode,F=(L.layout||{}).shapes||[];if(!l(O)&&D!==void 0){var Y=L._fullLayout._activeShapeIndex;if(Y<F.length)switch(L._fullLayout.shapes[Y].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var X=F[Y].path||"";X[X.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var q=b(O),$=y(c,L,k,D),V={editable:!0,xref:I?"paper":P._id,yref:R?"paper":z._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};q||(V.fillcolor=S.fillcolor,V.fillrule=S.fillrule);var K;if($.length===1&&(K=$[0]),K&&O==="drawrect")V.type="rect",V.x0=K[0][1],V.y0=K[0][2],V.x1=K[2][1],V.y1=K[2][2];else if(K&&O==="drawline")V.type="line",V.x0=K[0][1],V.y0=K[0][2],V.x1=K[1][1],V.y1=K[1][2];else if(K&&O==="drawcircle"){V.type="circle";var se=K[e][1],ue=K[o][1],oe=K[a][1],U=K[n][1],G=K[e][2],re=K[o][2],ee=K[a][2],j=K[n][2],Q=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ne=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");Q&&(se=f(k.xaxis,se),ue=f(k.xaxis,ue),oe=f(k.xaxis,oe),U=f(k.xaxis,U)),ne&&(G=f(k.yaxis,G),re=f(k.yaxis,re),ee=f(k.yaxis,ee),j=f(k.yaxis,j));var ae=(ue+U)/2,ie=(G+ee)/2,fe=(U-ue+oe-se)/2,me=(j-re+ee-G)/2,ce=A({x0:ae,y0:ie,x1:ae+fe*r,y1:ie+me*u});Q&&(ce.x0=i(k.xaxis,ce.x0),ce.x1=i(k.xaxis,ce.x1)),ne&&(ce.y0=i(k.yaxis,ce.y0),ce.y1=i(k.yaxis,ce.y1)),V.x0=ce.x0,V.y0=ce.y0,V.x1=ce.x1,V.y1=ce.y1}else V.type="path",P&&z&&m($,P,z),V.path=g($),K=null;p(L);for(var ye=T.editHelpers,xe=(ye||{}).modifyItem,ke=[],Ae=0;Ae<F.length;Ae++){var Oe=L._fullLayout.shapes[Ae];if(ke[Ae]=Oe._input,D!==void 0&&Ae===L._fullLayout._activeShapeIndex){var He=V;switch(Oe.type){case"line":case"rect":case"circle":xe("x0",He.x0),xe("x1",He.x1),xe("y0",He.y0),xe("y1",He.y1);break;case"path":xe("path",He.path);break}}}return D===void 0?(ke.push(V),ke):ye?ye.getUpdateObj():{}}}};function m(M,_,T){var x=_.type==="date",c=T.type==="date";if(!x&&!c)return M;for(var L=0;L<M.length;L++)for(var S=0;S<M[L].length;S++)for(var k=0;k+2<M[L][S].length;k+=2)x&&(M[L][S][k+1]=M[L][S][k+1].replace(" ","_")),c&&(M[L][S][k+2]=M[L][S][k+2].replace(" ","_"));return M}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(t,B,H){var d=t("./constants"),l=t("../../lib");H.rangeToShapePosition=function(b){return b.type==="log"?b.r2d:function(w){return w}},H.shapePositionToRange=function(b){return b.type==="log"?b.d2r:function(w){return w}},H.decodeDate=function(b){return function(w){return w.replace&&(w=w.replace("_"," ")),b(w)}},H.encodeDate=function(b){return function(w){return b(w).replace(" ","_")}},H.extractPathCoords=function(b,w){var e=[],o=b.match(d.segmentRE);return o.forEach(function(a){var n=w[a.charAt(0)].drawn;if(n!==void 0){var r=a.substr(1).match(d.paramRE);!r||r.length<n||e.push(l.cleanNumber(r[n]))}}),e},H.getDataToPixel=function(b,w,e,o){var a=b._fullLayout._size,n;if(w)if(o==="domain")n=function(u){return w._length*(e?1-u:u)+w._offset};else{var r=H.shapePositionToRange(w);n=function(u){return w._offset+w.r2p(r(u,!0))},w.type==="date"&&(n=H.decodeDate(n))}else e?n=function(u){return a.t+a.h*(1-u)}:n=function(u){return a.l+a.w*u};return n},H.getPixelToData=function(b,w,e,o){var a=b._fullLayout._size,n;if(w)if(o==="domain")n=function(u){var s=(u-w._offset)/w._length;return e?1-s:s};else{var r=H.rangeToShapePosition(w);n=function(u){return r(w.p2r(u-w._offset))}}else e?n=function(u){return 1-(u-a.t)/a.h}:n=function(u){return(u-a.l)/a.w};return n},H.roundPositionForSharpStrokeRendering=function(b,w){var e=Math.round(w%2)===1,o=Math.round(b);return e?o+.5:o},H.makeOptionsAndPlotinfo=function(b,w){var e=b._fullLayout.shapes[w]||{},o=b._fullLayout._plots[e.xref+e.yref],a=!!o;return a?o._hadPlotinfo=!0:(o={},e.xref&&e.xref!=="paper"&&(o.xaxis=b._fullLayout[e.xref+"axis"]),e.yref&&e.yref!=="paper"&&(o.yaxis=b._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(t,B,H){var d=t("./draw");B.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:d.draw,drawOne:d.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../plots/pad_attributes"),b=t("../../lib/extend").extendDeepAll,w=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),o=t("../../plot_api/plot_template").templatedArray,a=t("./constants"),n=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});B.exports=w(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(l({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(t,B,H){B.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("./constants"),e=w.name,o=b.steps;B.exports=function(u,s){l(u,s,{name:e,handleItemDefaults:a})};function a(r,u,s){function i(m,M){return d.coerce(r,u,b,m,M)}for(var f=l(r,u,{name:"steps",handleItemDefaults:n}),h=0,p=0;p<f.length;p++)f[p].visible&&h++;var v;if(h<2?v=u.visible=!1:v=i("visible"),!!v){u._stepCount=h;var y=u._visibleSteps=d.filterVisible(f),g=i("active");(f[g]||{}).visible||(u.active=y[0]._index),i("x"),i("y"),d.noneOrAll(r,u,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),d.coerceFont(i,"font",s.font);var A=i("currentvalue.visible");A&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),d.coerceFont(i,"currentvalue.font",u.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function n(r,u){function s(h,p){return d.coerce(r,u,o,h,p)}var i;if(r.method!=="skip"&&!Array.isArray(r.args)?i=u.visible=!1:i=s("visible"),i){s("method"),s("args");var f=s("label","step-"+u._index);s("value",f),s("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../color"),w=t("../drawing"),e=t("../../lib"),o=e.strTranslate,a=t("../../lib/svg_text_utils"),n=t("../../plot_api/plot_template").arrayEditor,r=t("./constants"),u=t("../../constants/alignment"),s=u.LINE_SPACING,i=u.FROM_TL,f=u.FROM_BR;B.exports=function(O){var F=O._fullLayout,Y=p(F,O),X=F._infolayer.selectAll("g."+r.containerClassName).data(Y.length>0?[0]:[]);X.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function q(se){se._commandObserver&&(se._commandObserver.remove(),delete se._commandObserver),l.autoMargin(O,h(se))}if(X.exit().each(function(){d.select(this).selectAll("g."+r.groupClassName).each(q)}).remove(),Y.length!==0){var $=X.selectAll("g."+r.groupClassName).data(Y,v);$.enter().append("g").classed(r.groupClassName,!0),$.exit().each(q).remove();for(var V=0;V<Y.length;V++){var K=Y[V];y(O,K)}$.each(function(se){var ue=d.select(this);S(se),l.manageCommandObserver(O,se,se._visibleSteps,function(oe){var U=ue.data()[0];U.active!==oe.index&&(U._dragging||x(O,ue,U,oe.index,!1,!0))}),g(O,d.select(this),se)})}};function h(D){return r.autoMarginIdRoot+D._index}function p(D,O){for(var F=D[r.name],Y=[],X=0;X<F.length;X++){var q=F[X];!q.visible||(q._gd=O,Y.push(q))}return Y}function v(D){return D._index}function y(D,O){var F=w.tester.selectAll("g."+r.labelGroupClass).data(O._visibleSteps);F.enter().append("g").classed(r.labelGroupClass,!0);var Y=0,X=0;F.each(function(re){var ee=d.select(this),j=M(ee,{step:re},O),Q=j.node();if(Q){var ne=w.bBox(Q);X=Math.max(X,ne.height),Y=Math.max(Y,ne.width)}}),F.remove();var q=O._dims={};q.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var $=D._fullLayout._size;q.lx=$.l+$.w*O.x,q.ly=$.t+$.h*(1-O.y),O.lenmode==="fraction"?q.outerLength=Math.round($.w*O.len):q.outerLength=O.len,q.inputAreaStart=0,q.inputAreaLength=Math.round(q.outerLength-O.pad.l-O.pad.r);var V=q.inputAreaLength-2*r.stepInset,K=V/(O._stepCount-1),se=Y+r.labelPadding;if(q.labelStride=Math.max(1,Math.ceil(se/K)),q.labelHeight=X,q.currentValueMaxWidth=0,q.currentValueHeight=0,q.currentValueTotalHeight=0,q.currentValueMaxLines=1,O.currentvalue.visible){var ue=w.tester.append("g");F.each(function(re){var ee=A(ue,O,re.label),j=ee.node()&&w.bBox(ee.node())||{width:0,height:0},Q=a.lineCount(ee);q.currentValueMaxWidth=Math.max(q.currentValueMaxWidth,Math.ceil(j.width)),q.currentValueHeight=Math.max(q.currentValueHeight,Math.ceil(j.height)),q.currentValueMaxLines=Math.max(q.currentValueMaxLines,Q)}),q.currentValueTotalHeight=q.currentValueHeight+O.currentvalue.offset,ue.remove()}q.height=q.currentValueTotalHeight+r.tickOffset+O.ticklen+r.labelOffset+q.labelHeight+O.pad.t+O.pad.b;var oe="left";e.isRightAnchor(O)&&(q.lx-=q.outerLength,oe="right"),e.isCenterAnchor(O)&&(q.lx-=q.outerLength/2,oe="center");var U="top";e.isBottomAnchor(O)&&(q.ly-=q.height,U="bottom"),e.isMiddleAnchor(O)&&(q.ly-=q.height/2,U="middle"),q.outerLength=Math.ceil(q.outerLength),q.height=Math.ceil(q.height),q.lx=Math.round(q.lx),q.ly=Math.round(q.ly);var G={y:O.y,b:q.height*f[U],t:q.height*i[U]};O.lenmode==="fraction"?(G.l=0,G.xl=O.x-O.len*i[oe],G.r=0,G.xr=O.x+O.len*f[oe]):(G.x=O.x,G.l=q.outerLength*i[oe],G.r=q.outerLength*f[oe]),l.autoMargin(D,h(O),G)}function g(D,O,F){(F.steps[F.active]||{}).visible||(F.active=F._visibleSteps[0]._index),O.call(A,F).call(R,F).call(_,F).call(L,F).call(I,D,F).call(m,D,F);var Y=F._dims;w.setTranslate(O,Y.lx+F.pad.l,Y.ly+F.pad.t),O.call(k,F,!1),O.call(A,F)}function A(D,O,F){if(!!O.currentvalue.visible){var Y=O._dims,X,q;switch(O.currentvalue.xanchor){case"right":X=Y.inputAreaLength-r.currentValueInset-Y.currentValueMaxWidth,q="left";break;case"center":X=Y.inputAreaLength*.5,q="middle";break;default:X=r.currentValueInset,q="left"}var $=e.ensureSingle(D,"text",r.labelClass,function(U){U.attr({"text-anchor":q,"data-notex":1})}),V=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof F=="string")V+=F;else{var K=O.steps[O.active].label,se=O._gd._fullLayout._meta;se&&(K=e.templateString(K,se)),V+=K}O.currentvalue.suffix&&(V+=O.currentvalue.suffix),$.call(w.font,O.currentvalue.font).text(V).call(a.convertToTspans,O._gd);var ue=a.lineCount($),oe=(Y.currentValueMaxLines+1-ue)*O.currentvalue.font.size*s;return a.positionText($,X,oe),$}}function m(D,O,F){var Y=e.ensureSingle(D,"rect",r.gripRectClass,function(X){X.call(c,O,D,F).style("pointer-events","all")});Y.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(b.stroke,F.bordercolor).call(b.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(D,O,F){var Y=e.ensureSingle(D,"text",r.labelClass,function($){$.attr({"text-anchor":"middle","data-notex":1})}),X=O.step.label,q=F._gd._fullLayout._meta;return q&&(X=e.templateString(X,q)),Y.call(w.font,F.font).text(X).call(a.convertToTspans,F._gd),Y}function _(D,O){var F=e.ensureSingle(D,"g",r.labelsClass),Y=O._dims,X=F.selectAll("g."+r.labelGroupClass).data(Y.labelSteps);X.enter().append("g").classed(r.labelGroupClass,!0),X.exit().remove(),X.each(function(q){var $=d.select(this);$.call(M,q,O),w.setTranslate($,P(O,q.fraction),r.tickOffset+O.ticklen+O.font.size*s+r.labelOffset+Y.currentValueTotalHeight)})}function T(D,O,F,Y,X){var q=Math.round(Y*(F._stepCount-1)),$=F._visibleSteps[q]._index;$!==F.active&&x(D,O,F,$,!0,X)}function x(D,O,F,Y,X,q){var $=F.active;F.active=Y,n(D.layout,r.name,F).applyUpdate("active",Y);var V=F.steps[F.active];O.call(k,F,q),O.call(A,F),D.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:X,previousActive:$}),V&&V.method&&X&&(O._nextMethod?(O._nextMethod.step=V,O._nextMethod.doCallback=X,O._nextMethod.doTransition=q):(O._nextMethod={step:V,doCallback:X,doTransition:q},O._nextMethodRaf=window.requestAnimationFrame(function(){var K=O._nextMethod.step;!K.method||(K.execute&&l.executeAPICommand(D,K.method,K.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function c(D,O,F){var Y=F.node(),X=d.select(O);function q(){return F.data()[0]}function $(){var V=q();O.emit("plotly_sliderstart",{slider:V});var K=F.select("."+r.gripRectClass);d.event.stopPropagation(),d.event.preventDefault(),K.call(b.fill,V.activebgcolor);var se=z(V,d.mouse(Y)[0]);T(O,F,V,se,!0),V._dragging=!0;function ue(){var U=q(),G=z(U,d.mouse(Y)[0]);T(O,F,U,G,!1)}X.on("mousemove",ue),X.on("touchmove",ue);function oe(){var U=q();U._dragging=!1,K.call(b.fill,U.bgcolor),X.on("mouseup",null),X.on("mousemove",null),X.on("touchend",null),X.on("touchmove",null),O.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}X.on("mouseup",oe),X.on("touchend",oe)}D.on("mousedown",$),D.on("touchstart",$)}function L(D,O){var F=D.selectAll("rect."+r.tickRectClass).data(O._visibleSteps),Y=O._dims;F.enter().append("rect").classed(r.tickRectClass,!0),F.exit().remove(),F.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(X,q){var $=q%Y.labelStride==0,V=d.select(this);V.attr({height:$?O.ticklen:O.minorticklen}).call(b.fill,O.tickcolor),w.setTranslate(V,P(O,q/(O._stepCount-1))-.5*O.tickwidth,($?r.tickOffset:r.minorTickOffset)+Y.currentValueTotalHeight)})}function S(D){var O=D._dims;O.labelSteps=[];for(var F=D._stepCount,Y=0;Y<F;Y+=O.labelStride)O.labelSteps.push({fraction:Y/(F-1),step:D._visibleSteps[Y]})}function k(D,O,F){for(var Y=D.select("rect."+r.gripRectClass),X=0,q=0;q<O._stepCount;q++)if(O._visibleSteps[q]._index===O.active){X=q;break}var $=P(O,X/(O._stepCount-1));if(!O._invokingCommand){var V=Y;F&&O.transition.duration>0&&(V=V.transition().duration(O.transition.duration).ease(O.transition.easing)),V.attr("transform",o($-r.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(D,O){var F=D._dims;return F.inputAreaStart+r.stepInset+(F.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,O))}function z(D,O){var F=D._dims;return Math.min(1,Math.max(0,(O-r.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*r.stepInset-2*F.inputAreaStart)))}function I(D,O,F){var Y=F._dims,X=e.ensureSingle(D,"rect",r.railTouchRectClass,function(q){q.call(c,O,D,F).style("pointer-events","all")});X.attr({width:Y.inputAreaLength,height:Math.max(Y.inputAreaWidth,r.tickOffset+F.ticklen+Y.labelHeight)}).call(b.fill,F.bgcolor).attr("opacity",0),w.setTranslate(X,0,Y.currentValueTotalHeight)}function R(D,O){var F=O._dims,Y=F.inputAreaLength-r.railInset*2,X=e.ensureSingle(D,"rect",r.railRectClass);X.attr({width:Y,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,O.bordercolor).call(b.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),w.setTranslate(X,r.railInset,(F.inputAreaWidth-r.railWidth)*.5+F.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(t,B,H){var d=t("./constants");B.exports={moduleType:"component",name:d.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib"),o=e.strTranslate,a=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),u=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;function f(h,p,v){var y=v.propContainer,g=v.propName,A=v.placeholder,m=v.traceIndex,M=v.avoid||{},_=v.attributes,T=v.transform,x=v.containerGroup,c=h._fullLayout,L=1,S=!1,k=y.title,P=(k&&k.text?k.text:"").trim(),z=k&&k.font?k.font:{},I=z.family,R=z.size,D=z.color,O;g==="title.text"?O="titleText":g.indexOf("axis")!==-1?O="axisTitleText":g.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var F=h._context.edits[O];P===""?L=0:P.replace(i," % ")===A.replace(i," % ")&&(L=.2,S=!0,F||(P="")),v._meta?P=e.templateString(P,v._meta):c._meta&&(P=e.templateString(P,c._meta));var Y=P||F,X;x||(x=e.ensureSingle(c._infolayer,"g","g-"+p),X=c._hColorbarMoveTitle);var q=x.selectAll("text").data(Y?[0]:[]);if(q.enter().append("text"),q.text(P).attr("class",p),q.exit().remove(),!Y)return x;function $(ue){e.syncOrAsync([V,K],ue)}function V(ue){var oe;return!T&&X&&(T={}),T?(oe="",T.rotate&&(oe+="rotate("+[T.rotate,_.x,_.y]+")"),(T.offset||X)&&(oe+=o(0,(T.offset||0)-(X||0)))):oe=null,ue.attr("transform",oe),ue.style({"font-family":I,"font-size":d.round(R,2)+"px",fill:n.rgb(D),opacity:L*n.opacity(D),"font-weight":b.fontWeight}).attr(_).call(r.convertToTspans,h),b.previousPromises(h)}function K(ue){var oe=d.select(ue.node().parentNode);if(M&&M.selection&&M.side&&P){oe.attr("transform",null);var U=s[M.side],G=M.side==="left"||M.side==="top"?-1:1,re=l(M.pad)?M.pad:2,ee=a.bBox(oe.node()),j={left:0,top:0,right:c.width,bottom:c.height},Q=M.maxShift||G*(j[M.side]-ee[M.side]),ne=0;if(Q<0)ne=Q;else{var ae=M.offsetLeft||0,ie=M.offsetTop||0;ee.left-=ae,ee.right-=ae,ee.top-=ie,ee.bottom-=ie,M.selection.each(function(){var me=a.bBox(this);e.bBoxIntersect(ee,me,re)&&(ne=Math.max(ne,G*(me[M.side]-ee[U])+re))}),ne=Math.min(Q,ne)}if(ne>0||Q<0){var fe={left:[-ne,0],right:[ne,0],top:[0,-ne],bottom:[0,ne]}[M.side];oe.attr("transform",o(fe[0],fe[1]))}}}q.call($);function se(){L=0,S=!0,q.text(A).on("mouseover.opacity",function(){d.select(this).transition().duration(u.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(u.HIDE_PLACEHOLDER).style("opacity",0)})}return F&&(P?q.on(".opacity",null):se(),q.call(r.makeEditable,{gd:h}).on("edit",function(ue){m!==void 0?w.call("_guiRestyle",h,g,ue,m):w.call("_guiRelayout",h,g,ue)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call($)}).on("input",function(ue){this.text(ue||" ").call(r.positionText,_.x,_.y)})),q.classed("js-placeholder",S),x}B.exports={draw:f}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),o=t("../../plot_api/plot_template").templatedArray,a=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});B.exports=w(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:l.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(t,B,H){B.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("./constants"),e=w.name,o=b.buttons;B.exports=function(u,s){var i={name:e,handleItemDefaults:a};l(u,s,i)};function a(r,u,s){function i(p,v){return d.coerce(r,u,b,p,v)}var f=l(r,u,{name:"buttons",handleItemDefaults:n}),h=i("visible",f.length>0);!h||(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),d.noneOrAll(r,u,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),d.coerceFont(i,"font",s.font),i("bgcolor",s.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function n(r,u){function s(f,h){return d.coerce(r,u,o,f,h)}var i=s("visible",r.method==="skip"||Array.isArray(r.args));i&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../color"),w=t("../drawing"),e=t("../../lib"),o=t("../../lib/svg_text_utils"),a=t("../../plot_api/plot_template").arrayEditor,n=t("../../constants/alignment").LINE_SPACING,r=t("./constants"),u=t("./scrollbox");B.exports=function(z){var I=z._fullLayout,R=e.filterVisible(I[r.name]);function D(K){l.autoMargin(z,L(K))}var O=I._menulayer.selectAll("g."+r.containerClassName).data(R.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){d.select(this).selectAll("g."+r.headerGroupClassName).each(D)}).remove(),R.length!==0){var F=O.selectAll("g."+r.headerGroupClassName).data(R,s);F.enter().append("g").classed(r.headerGroupClassName,!0);for(var Y=e.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(K){K.style("pointer-events","all")}),X=0;X<R.length;X++){var q=R[X];c(z,q)}var $="updatemenus"+I._uid,V=new u(z,Y,$);F.enter().size()&&(Y.node().parentNode.appendChild(Y.node()),Y.call(k)),F.exit().each(function(K){Y.call(k),D(K)}).remove(),F.each(function(K){var se=d.select(this),ue=K.type==="dropdown"?Y:null;l.manageCommandObserver(z,K,K.buttons,function(oe){h(z,K,K.buttons[oe.index],se,ue,V,oe.index,!0)}),K.type==="dropdown"?(p(z,se,Y,V,K),f(Y,K)&&v(z,se,Y,V,K)):v(z,se,null,null,K)})}};function s(P){return P._index}function i(P){return+P.attr(r.menuIndexAttrName)==-1}function f(P,z){return+P.attr(r.menuIndexAttrName)===z._index}function h(P,z,I,R,D,O,F,Y){z.active=F,a(P.layout,r.name,z).applyUpdate("active",F),z.type==="buttons"?v(P,R,null,null,z):z.type==="dropdown"&&(D.attr(r.menuIndexAttrName,"-1"),p(P,R,D,O,z),Y||v(P,R,D,O,z))}function p(P,z,I,R,D){var O=e.ensureSingle(z,"g",r.headerClassName,function(K){K.style("pointer-events","all")}),F=D._dims,Y=D.active,X=D.buttons[Y]||r.blankHeaderOpts,q={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},$={width:F.headerWidth,height:F.headerHeight};O.call(A,D,X,P).call(S,D,q,$);var V=e.ensureSingle(z,"text",r.headerArrowClassName,function(K){K.attr("text-anchor","end").call(w.font,D.font).text(r.arrowSymbol[D.direction])});V.attr({x:F.headerWidth-r.arrowOffsetX+D.pad.l,y:F.headerHeight/2+r.textOffsetY+D.pad.t}),O.on("click",function(){I.call(k,String(f(I,D)?-1:D._index)),v(P,z,I,R,D)}),O.on("mouseover",function(){O.call(T)}),O.on("mouseout",function(){O.call(x,D)}),w.setTranslate(z,F.lx,F.ly)}function v(P,z,I,R,D){I||(I=z,I.attr("pointer-events","all"));var O=!i(I)||D.type==="buttons"?D.buttons:[],F=D.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,Y=I.selectAll("g."+F).data(e.filterVisible(O)),X=Y.enter().append("g").classed(F,!0),q=Y.exit();D.type==="dropdown"?(X.attr("opacity","0").transition().attr("opacity","1"),q.transition().attr("opacity","0").remove()):q.remove();var $=0,V=0,K=D._dims,se=["up","down"].indexOf(D.direction)!==-1;D.type==="dropdown"&&(se?V=K.headerHeight+r.gapButtonHeader:$=K.headerWidth+r.gapButtonHeader),D.type==="dropdown"&&D.direction==="up"&&(V=-r.gapButtonHeader+r.gapButton-K.openHeight),D.type==="dropdown"&&D.direction==="left"&&($=-r.gapButtonHeader+r.gapButton-K.openWidth);var ue={x:K.lx+$+D.pad.l,y:K.ly+V+D.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},oe={l:ue.x+D.borderwidth,t:ue.y+D.borderwidth};Y.each(function(U,G){var re=d.select(this);re.call(A,D,U,P).call(S,D,ue),re.on("click",function(){d.event.defaultPrevented||(U.execute&&(U.args2&&D.active===G?(h(P,D,U,z,I,R,-1),l.executeAPICommand(P,U.method,U.args2)):(h(P,D,U,z,I,R,G),l.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:D,button:U,active:D.active}))}),re.on("mouseover",function(){re.call(T)}),re.on("mouseout",function(){re.call(x,D),Y.call(_,D)})}),Y.call(_,D),se?(oe.w=Math.max(K.openWidth,K.headerWidth),oe.h=ue.y-oe.t):(oe.w=ue.x-oe.l,oe.h=Math.max(K.openHeight,K.headerHeight)),oe.direction=D.direction,R&&(Y.size()?y(P,z,I,R,D,oe):g(R))}function y(P,z,I,R,D,O){var F=D.direction,Y=F==="up"||F==="down",X=D._dims,q=D.active,$,V,K;if(Y)for(V=0,K=0;K<q;K++)V+=X.heights[K]+r.gapButton;else for($=0,K=0;K<q;K++)$+=X.widths[K]+r.gapButton;R.enable(O,$,V),R.hbar&&R.hbar.attr("opacity","0").transition().attr("opacity","1"),R.vbar&&R.vbar.attr("opacity","0").transition().attr("opacity","1")}function g(P){var z=!!P.hbar,I=!!P.vbar;z&&P.hbar.transition().attr("opacity","0").each("end",function(){z=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,z||P.disable()})}function A(P,z,I,R){P.call(m,z).call(M,z,I,R)}function m(P,z){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(R){R.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(b.stroke,z.bordercolor).call(b.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function M(P,z,I,R){var D=e.ensureSingle(P,"text",r.itemTextClassName,function(Y){Y.attr({"text-anchor":"start","data-notex":1})}),O=I.label,F=R._fullLayout._meta;F&&(O=e.templateString(O,F)),D.call(w.font,z.font).text(O).call(o.convertToTspans,R)}function _(P,z){var I=z.active;P.each(function(R,D){var O=d.select(this);D===I&&z.showactive&&O.select("rect."+r.itemRectClassName).call(b.fill,r.activeColor)})}function T(P){P.select("rect."+r.itemRectClassName).call(b.fill,r.hoverColor)}function x(P,z){P.select("rect."+r.itemRectClassName).call(b.fill,z.bgcolor)}function c(P,z){var I=z._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},R=w.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(z.buttons));R.enter().append("g").classed(r.dropdownButtonClassName,!0);var D=["up","down"].indexOf(z.direction)!==-1;R.each(function($,V){var K=d.select(this);K.call(A,z,$,P);var se=K.select("."+r.itemTextClassName),ue=se.node()&&w.bBox(se.node()).width,oe=Math.max(ue+r.textPadX,r.minWidth),U=z.font.size*n,G=o.lineCount(se),re=Math.max(U*G,r.minHeight)+r.textOffsetY;re=Math.ceil(re),oe=Math.ceil(oe),I.widths[V]=oe,I.heights[V]=re,I.height1=Math.max(I.height1,re),I.width1=Math.max(I.width1,oe),D?(I.totalWidth=Math.max(I.totalWidth,oe),I.openWidth=I.totalWidth,I.totalHeight+=re+r.gapButton,I.openHeight+=re+r.gapButton):(I.totalWidth+=oe+r.gapButton,I.openWidth+=oe+r.gapButton,I.totalHeight=Math.max(I.totalHeight,re),I.openHeight=I.totalHeight)}),D?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,z.type==="dropdown"&&(D?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),R.remove();var O=I.totalWidth+z.pad.l+z.pad.r,F=I.totalHeight+z.pad.t+z.pad.b,Y=P._fullLayout._size;I.lx=Y.l+Y.w*z.x,I.ly=Y.t+Y.h*(1-z.y);var X="left";e.isRightAnchor(z)&&(I.lx-=O,X="right"),e.isCenterAnchor(z)&&(I.lx-=O/2,X="center");var q="top";e.isBottomAnchor(z)&&(I.ly-=F,q="bottom"),e.isMiddleAnchor(z)&&(I.ly-=F/2,q="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),l.autoMargin(P,L(z),{x:z.x,y:z.y,l:O*({right:1,center:.5}[X]||0),r:O*({left:1,center:.5}[X]||0),b:F*({top:1,middle:.5}[q]||0),t:F*({bottom:1,middle:.5}[q]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function S(P,z,I,R){R=R||{};var D=P.select("."+r.itemRectClassName),O=P.select("."+r.itemTextClassName),F=z.borderwidth,Y=I.index,X=z._dims;w.setTranslate(P,F+I.x,F+I.y);var q=["up","down"].indexOf(z.direction)!==-1,$=R.height||(q?X.heights[Y]:X.height1);D.attr({x:0,y:0,width:R.width||(q?X.width1:X.widths[Y]),height:$});var V=z.font.size*n,K=o.lineCount(O),se=(K-1)*V/2;o.positionText(O,r.textOffsetX,$/2-se+r.textOffsetY),q?I.y+=X.heights[Y]+I.yPad:I.x+=X.widths[Y]+I.xPad,I.index++}function k(P,z){P.attr(r.menuIndexAttrName,z||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(t,B,H){arguments[4][463][0].apply(H,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(t,B,H){B.exports=e;var d=t("@plotly/d3"),l=t("../color"),b=t("../drawing"),w=t("../../lib");function e(o,a,n){this.gd=o,this.container=a,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(a,n,r){var u=this.gd._fullLayout,s=u.width,i=u.height;this.position=a;var f=this.position.l,h=this.position.w,p=this.position.t,v=this.position.h,y=this.position.direction,g=y==="down",A=y==="left",m=y==="right",M=y==="up",_=h,T=v,x,c,L,S;!g&&!A&&!m&&!M&&(this.position.direction="down",g=!0);var k=g||M;k?(x=f,c=x+_,g?(L=p,S=Math.min(L+T,i),T=S-L):(S=p+T,L=Math.max(S-T,0),T=S-L)):(L=p,S=L+T,A?(c=f+_,x=Math.max(c-_,0),_=c-x):(x=f,c=Math.min(x+_,s),_=c-x)),this._box={l:x,t:L,w:_,h:T};var P=h>_,z=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,R=f,D=p+v;D+I>i&&(D=i-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:R,y:D,width:z,height:I}),this._hbarXMin=R+z/2,this._hbarTranslateMax=_-z):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=v>T,Y=e.barWidth+2*e.barPad,X=e.barLength+2*e.barPad,q=f+h,$=p;q+Y>s&&(q=s-Y);var V=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,e.barColor),F?(this.vbar=V.attr({rx:e.barRadius,ry:e.barRadius,x:q,y:$,width:Y,height:X}),this._vbarYMin=$+X/2,this._vbarTranslateMax=T-X):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,se=x-.5,ue=F?c+Y+.5:c+.5,oe=L-.5,U=P?S+I+.5:S+.5,G=u._topdefs.selectAll("#"+K).data(P||F?[0]:[]);if(G.exit().remove(),G.enter().append("clipPath").attr("id",K).append("rect"),P||F?(this._clipRect=G.select("rect").attr({x:Math.floor(se),y:Math.floor(oe),width:Math.ceil(ue)-Math.floor(se),height:Math.ceil(U)-Math.floor(oe)}),this.container.call(b.setClipUrl,K,this.gd),this.bg.attr({x:f,y:p,width:h,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),P||F){var re=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(re);var ee=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault(),d.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(ee),F&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(n,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var a=this.translateX,n=this.translateY;this.hbar&&(a-=d.event.dx),this.vbar&&(n-=d.event.dy),this.setTranslate(a,n)},e.prototype._onBoxWheel=function(){var a=this.translateX,n=this.translateY;this.hbar&&(a+=d.event.deltaY),this.vbar&&(n+=d.event.deltaY),this.setTranslate(a,n)},e.prototype._onBarDrag=function(){var a=this.translateX,n=this.translateY;if(this.hbar){var r=a+this._hbarXMin,u=r+this._hbarTranslateMax,s=w.constrain(d.event.x,r,u),i=(s-r)/(u-r),f=this.position.w-this._box.w;a=i*f}if(this.vbar){var h=n+this._vbarYMin,p=h+this._vbarTranslateMax,v=w.constrain(d.event.y,h,p),y=(v-h)/(p-h),g=this.position.h-this._box.h;n=y*g}this.setTranslate(a,n)},e.prototype.setTranslate=function(a,n){var r=this.position.w-this._box.w,u=this.position.h-this._box.h;if(a=w.constrain(a||0,0,r),n=w.constrain(n||0,0,u),this.translateX=a,this.translateY=n,this.container.call(b.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var s=a/r;this.hbar.call(b.setTranslate,a+s*this._hbarTranslateMax,n)}if(this.vbar){var i=n/u;this.vbar.call(b.setTranslate,a,n+i*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(t,B,H){B.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(t,B,H){B.exports={axisRefDescription:function(d,l,b){return["If set to a",d,"axis id (e.g. *"+d+"* or","*"+d+"2*), the `"+d+"` position refers to a",d,"coordinate. If set to *paper*, the `"+d+"`","position refers to the distance from the",l,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",l,"("+b+"). If set to a",d,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",l,"of the domain of that axis: e.g.,","*"+d+"2 domain* refers to the domain of the second",d," axis and a",d,"position of 0.5 refers to the","point between the",l,"and the",b,"of the domain of the","second",d,"axis."].join(" ")}}},{}],473:[function(t,B,H){B.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(t,B,H){B.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(t,B,H){B.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(t,B,H){B.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(t,B,H){B.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(t,B,H){B.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(t,B,H){B.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(t,B,H){H.xmlns="http://www.w3.org/2000/xmlns/",H.svg="http://www.w3.org/2000/svg",H.xlink="http://www.w3.org/1999/xlink",H.svgAttrs={xmlns:H.svg,"xmlns:xlink":H.xlink}},{}],481:[function(t,B,H){H.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var d=t("./registry"),l=H.register=d.register,b=t("./plot_api"),w=Object.keys(b),e=0;e<w.length;e++){var o=w[e];o.charAt(0)!=="_"&&(H[o]=b[o]),l({moduleType:"apiMethod",name:o,fn:b[o]})}l(t("./traces/scatter")),l([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),l([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(l(window.PlotlyLocales),delete window.PlotlyLocales),H.Icons=t("./fonts/ploticon");var a=t("./components/fx"),n=t("./plots/plots");H.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},H.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},H.Snapshot=t("./snapshot"),H.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(t,B,H){B.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(t,B,H){H.isLeftAnchor=function(l){return l.xanchor==="left"||l.xanchor==="auto"&&l.x<=1/3},H.isCenterAnchor=function(l){return l.xanchor==="center"||l.xanchor==="auto"&&l.x>1/3&&l.x<2/3},H.isRightAnchor=function(l){return l.xanchor==="right"||l.xanchor==="auto"&&l.x>=2/3},H.isTopAnchor=function(l){return l.yanchor==="top"||l.yanchor==="auto"&&l.y>=2/3},H.isMiddleAnchor=function(l){return l.yanchor==="middle"||l.yanchor==="auto"&&l.y>1/3&&l.y<2/3},H.isBottomAnchor=function(l){return l.yanchor==="bottom"||l.yanchor==="auto"&&l.y<=1/3}},{}],484:[function(t,B,H){var d=t("./mod"),l=d.mod,b=d.modHalf,w=Math.PI,e=2*w;function o(y){return y/180*w}function a(y){return y/w*180}function n(y){return Math.abs(y[1]-y[0])>e-1e-14}function r(y,g){return b(g-y,e)}function u(y,g){return Math.abs(r(y,g))}function s(y,g){if(n(g))return!0;var A,m;g[0]<g[1]?(A=g[0],m=g[1]):(A=g[1],m=g[0]),A=l(A,e),m=l(m,e),A>m&&(m+=e);var M=l(y,e),_=M+e;return M>=A&&M<=m||_>=A&&_<=m}function i(y,g,A,m){if(!s(g,m))return!1;var M,_;return A[0]<A[1]?(M=A[0],_=A[1]):(M=A[1],_=A[0]),y>=M&&y<=_}function f(y,g,A,m,M,_,T){M=M||0,_=_||0;var x=n([A,m]),c,L,S,k,P;x?(c=0,L=w,S=e):A<m?(c=A,S=m):(c=m,S=A),y<g?(k=y,P=g):(k=g,P=y);function z(O,F){return[O*Math.cos(F)+M,_-O*Math.sin(F)]}var I=Math.abs(S-c)<=w?0:1;function R(O,F,Y){return"A"+[O,O]+" "+[0,I,Y]+" "+z(O,F)}var D;return x?k===null?D="M"+z(P,c)+R(P,L,0)+R(P,S,0)+"Z":D="M"+z(k,c)+R(k,L,0)+R(k,S,0)+"ZM"+z(P,c)+R(P,L,1)+R(P,S,1)+"Z":k===null?(D="M"+z(P,c)+R(P,S,0),T&&(D+="L0,0Z")):D="M"+z(k,c)+"L"+z(P,c)+R(P,S,0)+"L"+z(k,S)+R(k,c,1)+"Z",D}function h(y,g,A,m,M){return f(null,y,g,A,m,M,0)}function p(y,g,A,m,M){return f(null,y,g,A,m,M,1)}function v(y,g,A,m,M,_){return f(y,g,A,m,M,_,1)}B.exports={deg2rad:o,rad2deg:a,angleDelta:r,angleDist:u,isFullCircle:n,isAngleInsideSector:s,isPtInsideSector:i,pathArc:h,pathSector:p,pathAnnulus:v}},{"./mod":510}],485:[function(t,B,H){var d=Array.isArray,l=ArrayBuffer,b=DataView;function w(n){return l.isView(n)&&!(n instanceof b)}H.isTypedArray=w;function e(n){return d(n)||w(n)}H.isArrayOrTypedArray=e;function o(n){return!e(n[0])}H.isArray1D=o,H.ensureArray=function(n,r){return d(n)||(n=[]),n.length=r,n},H.concat=function(){var n=[],r=!0,u=0,s,i,f,h,p,v,y,g;for(f=0;f<arguments.length;f++)h=arguments[f],v=h.length,v&&(i?n.push(h):(i=h,p=v),d(h)?s=!1:(r=!1,u?s!==h.constructor&&(s=!1):s=h.constructor),u+=v);if(!u)return[];if(!n.length)return i;if(r)return i.concat.apply(i,n);if(s){for(y=new s(u),y.set(i),f=0;f<n.length;f++)h=n[f],y.set(h,p),p+=h.length;return y}for(y=new Array(u),g=0;g<i.length;g++)y[g]=i[g];for(f=0;f<n.length;f++){for(h=n[f],g=0;g<h.length;g++)y[p+g]=h[g];p+=g}return y},H.maxRowLength=function(n){return a(n,Math.max,0)},H.minRowLength=function(n){return a(n,Math.min,1/0)};function a(n,r,u){if(e(n))if(e(n[0])){for(var s=u,i=0;i<n.length;i++)s=r(s,n[i].length);return s}else return n.length;return 0}},{}],486:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;B.exports=function(e){return typeof e=="string"&&(e=e.replace(b,"")),d(e)?Number(e):l}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(t,B,H){B.exports=function(l){var b=l._fullLayout;b._glcanvas&&b._glcanvas.size()&&b._glcanvas.each(function(w){w.regl&&w.regl.clear({color:!0,depth:!0})})}},{}],488:[function(t,B,H){B.exports=function(l){l._responsiveChartHandler&&(window.removeEventListener("resize",l._responsiveChartHandler),delete l._responsiveChartHandler)}},{}],489:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../plots/attributes"),w=t("../components/colorscale/scales"),e=t("../components/color"),o=t("../constants/interactions").DESELECTDIM,a=t("./nested_property"),n=t("./regex").counter,r=t("./mod").modHalf,u=t("./array").isArrayOrTypedArray;H.valObjectMeta={data_array:{coerceFunction:function(i,f,h){u(i)?f.set(i):h!==void 0&&f.set(h)}},enumerated:{coerceFunction:function(i,f,h,p){p.coerceNumber&&(i=+i),p.values.indexOf(i)===-1?f.set(h):f.set(i)},validateFunction:function(i,f){f.coerceNumber&&(i=+i);for(var h=f.values,p=0;p<h.length;p++){var v=String(h[p]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){var y=new RegExp(v.substr(1,v.length-2));if(y.test(i))return!0}else if(i===h[p])return!0}return!1}},boolean:{coerceFunction:function(i,f,h){i===!0||i===!1?f.set(i):f.set(h)}},number:{coerceFunction:function(i,f,h,p){!d(i)||p.min!==void 0&&i<p.min||p.max!==void 0&&i>p.max?f.set(h):f.set(+i)}},integer:{coerceFunction:function(i,f,h,p){i%1||!d(i)||p.min!==void 0&&i<p.min||p.max!==void 0&&i>p.max?f.set(h):f.set(+i)}},string:{coerceFunction:function(i,f,h,p){if(typeof i!="string"){var v=typeof i=="number";p.strict===!0||!v?f.set(h):f.set(String(i))}else p.noBlank&&!i?f.set(h):f.set(i)}},color:{coerceFunction:function(i,f,h){l(i).isValid()?f.set(i):f.set(h)}},colorlist:{coerceFunction:function(i,f,h){function p(v){return l(v).isValid()}!Array.isArray(i)||!i.length?f.set(h):i.every(p)?f.set(i):f.set(h)}},colorscale:{coerceFunction:function(i,f,h){f.set(w.get(i,h))}},angle:{coerceFunction:function(i,f,h){i==="auto"?f.set("auto"):d(i)?f.set(r(+i,360)):f.set(h)}},subplotid:{coerceFunction:function(i,f,h,p){var v=p.regex||n(h);if(typeof i=="string"&&v.test(i)){f.set(i);return}f.set(h)},validateFunction:function(i,f){var h=f.dflt;return i===h?!0:typeof i!="string"?!1:!!n(h).test(i)}},flaglist:{coerceFunction:function(i,f,h,p){if(typeof i!="string"){f.set(h);return}if((p.extras||[]).indexOf(i)!==-1){f.set(i);return}for(var v=i.split("+"),y=0;y<v.length;){var g=v[y];p.flags.indexOf(g)===-1||v.indexOf(g)<y?v.splice(y,1):y++}v.length?f.set(v.join("+")):f.set(h)}},any:{coerceFunction:function(i,f,h){i===void 0?f.set(h):f.set(i)}},info_array:{coerceFunction:function(i,f,h,p){function v(z,I,R){var D,O={set:function(F){D=F}};return R===void 0&&(R=I.dflt),H.valObjectMeta[I.valType].coerceFunction(z,O,R,I),D}var y=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){f.set(h);return}var g=p.items,A=[],m=Array.isArray(g),M=m&&y&&Array.isArray(g[0]),_=y&&m&&!M,T=m&&!_?g.length:i.length,x,c,L,S,k,P;if(h=Array.isArray(h)?h:[],y)for(x=0;x<T;x++)for(A[x]=[],L=Array.isArray(i[x])?i[x]:[],_?k=g.length:m?k=g[x].length:k=L.length,c=0;c<k;c++)_?S=g[c]:m?S=g[x][c]:S=g,P=v(L[c],S,(h[x]||[])[c]),P!==void 0&&(A[x][c]=P);else for(x=0;x<T;x++)P=v(i[x],m?g[x]:g,h[x]),P!==void 0&&(A[x]=P);f.set(A)},validateFunction:function(i,f){if(!Array.isArray(i))return!1;var h=f.items,p=Array.isArray(h),v=f.dimensions===2;if(!f.freeLength&&i.length!==h.length)return!1;for(var y=0;y<i.length;y++)if(v){if(!Array.isArray(i[y])||!f.freeLength&&i[y].length!==h[y].length)return!1;for(var g=0;g<i[y].length;g++)if(!s(i[y][g],p?h[y][g]:h))return!1}else if(!s(i[y],p?h[y]:h))return!1;return!0}}},H.coerce=function(i,f,h,p,v){var y=a(h,p).get(),g=a(i,p),A=a(f,p),m=g.get(),M=f._template;if(m===void 0&&M&&(m=a(M,p).get(),M=0),v===void 0&&(v=y.dflt),y.arrayOk&&u(m))return A.set(m),m;var _=H.valObjectMeta[y.valType].coerceFunction;_(m,A,v,y);var T=A.get();return M&&T===v&&!s(m,y)&&(m=a(M,p).get(),_(m,A,v,y),T=A.get()),T},H.coerce2=function(i,f,h,p,v){var y=a(i,p),g=H.coerce(i,f,h,p,v),A=y.get();return A!=null?g:!1},H.coerceFont=function(i,f,h){var p={};return h=h||{},p.family=i(f+".family",h.family),p.size=i(f+".size",h.size),p.color=i(f+".color",h.color),p},H.coercePattern=function(i,f,h,p){var v=i(f+".shape");if(v){i(f+".solidity"),i(f+".size");var y=i(f+".fillmode"),g=y==="overlay";if(!p){var A=i(f+".bgcolor",g?h:void 0);i(f+".fgcolor",g?e.contrast(A):h)}i(f+".fgopacity",g?.5:1)}},H.coerceHoverinfo=function(i,f,h){var p=f._module.attributes,v=p.hoverinfo?p:b,y=v.hoverinfo,g;if(h._dataLength===1){var A=y.dflt==="all"?y.flags.slice():y.dflt.split("+");A.splice(A.indexOf("name"),1),g=A.join("+")}return H.coerce(i,f,v,"hoverinfo",g)},H.coerceSelectionMarkerOpacity=function(i,f){if(!!i.marker){var h=i.marker.opacity;if(h!==void 0){var p,v;!u(h)&&!i.selected&&!i.unselected&&(p=h,v=o*h),f("selected.marker.opacity",p),f("unselected.marker.opacity",v)}}};function s(i,f){var h=H.valObjectMeta[f.valType];if(f.arrayOk&&u(i))return!0;if(h.validateFunction)return h.validateFunction(i,f);var p={},v=p,y={set:function(g){v=g}};return h.coerceFunction(i,y,p,f),v!==p}H.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(t,B,H){var d=t("d3-time-format").timeFormat,l=t("fast-isnumeric"),b=t("./loggers"),w=t("./mod").mod,e=t("../constants/numerical"),o=e.BADNUM,a=e.ONEDAY,n=e.ONEHOUR,r=e.ONEMIN,u=e.ONESEC,s=e.EPOCHJD,i=t("../registry"),f=t("d3-time-format").utcFormat,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function y(D){return D&&i.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}H.dateTick0=function(D,O){var F=g(D,!!O);if(O<2)return F;var Y=H.dateTime2ms(F,D);return Y+=a*(O-1),H.ms2DateTime(Y,0,D)};function g(D,O){return y(D)?O?i.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:i.getComponentMethod("calendars","CANONICAL_TICK")[D]:O?"2000-01-02":"2000-01-01"}H.dfltRange=function(D){return y(D)?i.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},H.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"};var A,m;H.dateTime2ms=function(D,O){if(H.isJSDate(D)){var F=D.getTimezoneOffset()*r,Y=(D.getUTCMinutes()-D.getMinutes())*r+(D.getUTCSeconds()-D.getSeconds())*u+(D.getUTCMilliseconds()-D.getMilliseconds());if(Y){var X=3*r;F=F-X/2+w(Y-F+X/2,X)}return D=Number(D)-F,D>=A&&D<=m?D:o}if(typeof D!="string"&&typeof D!="number")return o;D=String(D);var q=y(O),$=D.charAt(0);q&&($==="G"||$==="g")&&(D=D.substr(1),O="");var V=q&&O.substr(0,7)==="chinese",K=D.match(V?p:h);if(!K)return o;var se=K[1],ue=K[3]||"1",oe=Number(K[5]||1),U=Number(K[7]||0),G=Number(K[9]||0),re=Number(K[11]||0);if(q){if(se.length===2)return o;se=Number(se);var ee;try{var j=i.getComponentMethod("calendars","getCal")(O);if(V){var Q=ue.charAt(ue.length-1)==="i";ue=parseInt(ue,10),ee=j.newDate(se,j.toMonthIndex(se,ue,Q),oe)}else ee=j.newDate(se,Number(ue),oe)}catch{return o}return ee?(ee.toJD()-s)*a+U*n+G*r+re*u:o}se.length===2?se=(Number(se)+2e3-v)%100+v:se=Number(se),ue-=1;var ne=new Date(Date.UTC(2e3,ue,oe,U,G));return ne.setUTCFullYear(se),ne.getUTCMonth()!==ue||ne.getUTCDate()!==oe?o:ne.getTime()+re*u},A=H.MIN_MS=H.dateTime2ms("-9999"),m=H.MAX_MS=H.dateTime2ms("9999-12-31 23:59:59.9999"),H.isDateTime=function(D,O){return H.dateTime2ms(D,O)!==o};function M(D,O){return String(D+Math.pow(10,O)).substr(1)}var _=90*a,T=3*n,x=5*r;H.ms2DateTime=function(D,O,F){if(typeof D!="number"||!(D>=A&&D<=m))return o;O||(O=0);var Y=Math.floor(w(D+.05,1)*10),X=Math.round(D-Y/10),q,$,V,K,se,ue;if(y(F)){var oe=Math.floor(X/a)+s,U=Math.floor(w(D,a));try{q=i.getComponentMethod("calendars","getCal")(F).fromJD(oe).formatDate("yyyy-mm-dd")}catch{q=f("G%Y-%m-%d")(new Date(X))}if(q.charAt(0)==="-")for(;q.length<11;)q="-0"+q.substr(1);else for(;q.length<10;)q="0"+q;$=O<_?Math.floor(U/n):0,V=O<_?Math.floor(U%n/r):0,K=O<T?Math.floor(U%r/u):0,se=O<x?U%u*10+Y:0}else ue=new Date(X),q=f("%Y-%m-%d")(ue),$=O<_?ue.getUTCHours():0,V=O<_?ue.getUTCMinutes():0,K=O<T?ue.getUTCSeconds():0,se=O<x?ue.getUTCMilliseconds()*10+Y:0;return c(q,$,V,K,se)},H.ms2DateTimeLocal=function(D){if(!(D>=A+a&&D<=m-a))return o;var O=Math.floor(w(D+.05,1)*10),F=new Date(Math.round(D-O/10)),Y=d("%Y-%m-%d")(F),X=F.getHours(),q=F.getMinutes(),$=F.getSeconds(),V=F.getUTCMilliseconds()*10+O;return c(Y,X,q,$,V)};function c(D,O,F,Y,X){if((O||F||Y||X)&&(D+=" "+M(O,2)+":"+M(F,2),(Y||X)&&(D+=":"+M(Y,2),X))){for(var q=4;X%10==0;)q-=1,X/=10;D+="."+M(X,q)}return D}H.cleanDate=function(D,O,F){if(D===o)return O;if(H.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(y(F))return b.error("JS Dates and milliseconds are incompatible with world calendars",D),O;if(D=H.ms2DateTimeLocal(+D),!D&&O!==void 0)return O}else if(!H.isDateTime(D,F))return b.error("unrecognized date",D),O;return D};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(D,O,F,Y){D=D.replace(L,function(q){var $=Math.min(+q.charAt(1)||6,6),V=(O/1e3%1+2).toFixed($).substr(2).replace(/0+$/,"")||"0";return V});var X=new Date(Math.floor(O+.05));if(D=D.replace(S,function(){return k[F("%q")(X)]}),y(Y))try{D=i.getComponentMethod("calendars","worldCalFmt")(D,O,Y)}catch{return"Invalid"}return F(D)(X)}var z=[59,59.9,59.99,59.999,59.9999];function I(D,O){var F=w(D+.05,a),Y=M(Math.floor(F/n),2)+":"+M(w(Math.floor(F/r),60),2);if(O!=="M"){l(O)||(O=0);var X=Math.min(w(D/u,60),z[O]),q=(100+X).toFixed(O).substr(1);O>0&&(q=q.replace(/0+$/,"").replace(/[\.]$/,"")),Y+=":"+q}return Y}H.formatDate=function(D,O,F,Y,X,q){if(X=y(X)&&X,!O)if(F==="y")O=q.year;else if(F==="m")O=q.month;else if(F==="d")O=q.dayMonth+`
`+q.year;else return I(D,F)+`
`+P(q.dayMonthYear,D,Y,X);return P(O,D,Y,X)};var R=3*a;H.incrementMonth=function(D,O,F){F=y(F)&&F;var Y=w(D,a);if(D=Math.round(D-Y),F)try{var X=Math.round(D/a)+s,q=i.getComponentMethod("calendars","getCal")(F),$=q.fromJD(X);return O%12?q.add($,O,"m"):q.add($,O/12,"y"),($.toJD()-s)*a+Y}catch{b.error("invalid ms "+D+" in calendar "+F)}var V=new Date(D+R);return V.setUTCMonth(V.getUTCMonth()+O)+Y-R},H.findExactDates=function(D,O){for(var F=0,Y=0,X=0,q=0,$,V,K=y(O)&&i.getComponentMethod("calendars","getCal")(O),se=0;se<D.length;se++){if(V=D[se],!l(V)){q++;continue}if(!(V%a))if(K)try{$=K.fromJD(V/a+s),$.day()===1?$.month()===1?F++:Y++:X++}catch{}else $=new Date(V),$.getUTCDate()===1?$.getUTCMonth()===0?F++:Y++:X++}Y+=F,X+=Y;var ue=D.length-q;return{exactYears:F/ue,exactMonths:Y/ue,exactDays:X/ue}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(t,B,H){var d=t("@plotly/d3"),l=t("./loggers"),b=t("./matrix"),w=t("gl-mat4");function e(v){var y;if(typeof v=="string"){if(y=document.getElementById(v),y===null)throw new Error("No DOM element with id '"+v+"' exists on the page.");return y}else if(v==null)throw new Error("DOM element provided is null or undefined");return v}function o(v){var y=d.select(v);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function a(v){var y=v&&v.parentNode;y&&y.removeChild(v)}function n(v,y){r("global",v,y)}function r(v,y,g){var A="plotly.js-style-"+v,m=document.getElementById(A);m||(m=document.createElement("style"),m.setAttribute("id",A),m.appendChild(document.createTextNode("")),document.head.appendChild(m));var M=m.sheet;M.insertRule?M.insertRule(y+"{"+g+"}",0):M.addRule?M.addRule(y,g,0):l.warn("addStyleRule failed")}function u(v){var y="plotly.js-style-"+v,g=document.getElementById(y);g&&a(g)}function s(v){var y=f(v),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(A){var m=i(A);if(m){var M=b.convertCssMatrix(m);g=w.multiply(g,g,M)}}),g}function i(v){var y=window.getComputedStyle(v,null),g=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return g==="none"?null:g.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function f(v){for(var y=[];h(v);)y.push(v),v=v.parentNode;return y}function h(v){return v&&(v instanceof Element||v instanceof HTMLElement)}function p(v,y){return v&&y&&v.x===y.x&&v.y===y.y&&v.top===y.top&&v.left===y.left&&v.right===y.right&&v.bottom===y.bottom}B.exports={getGraphDiv:e,isPlotDiv:o,removeElement:a,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:u,getFullTransformMatrix:s,getElementTransformMatrix:i,getElementAndAncestors:f,equalDomRects:p}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(t,B,H){var d=t("events").EventEmitter,l={init:function(b){if(b._ev instanceof d)return b;var w=new d,e=new d;return b._ev=w,b._internalEv=e,b.on=w.on.bind(w),b.once=w.once.bind(w),b.removeListener=w.removeListener.bind(w),b.removeAllListeners=w.removeAllListeners.bind(w),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(o,a){typeof jQuery!="undefined"&&jQuery(b).trigger(o,a),w.emit(o,a),e.emit(o,a)},b},triggerHandler:function(b,w,e){var o,a;typeof jQuery!="undefined"&&(o=jQuery(b).triggerHandler(w,e));var n=b._ev;if(!n)return o;var r=n._events[w];if(!r)return o;function u(i){if(i.listener){if(n.removeListener(w,i.listener),!i.fired)return i.fired=!0,i.listener.apply(n,[e])}else return i.apply(n,[e])}r=Array.isArray(r)?r:[r];var s;for(s=0;s<r.length-1;s++)u(r[s]);return a=u(r[s]),o!==void 0?o:a},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}};B.exports=l},{events:84}],493:[function(t,B,H){var d=t("./is_plain_object.js"),l=Array.isArray;function b(e,o){var a,n;for(a=0;a<e.length;a++){if(n=e[a],n!==null&&typeof n=="object")return!1;n!==void 0&&(o[a]=n)}return!0}H.extendFlat=function(){return w(arguments,!1,!1,!1)},H.extendDeep=function(){return w(arguments,!0,!1,!1)},H.extendDeepAll=function(){return w(arguments,!0,!0,!1)},H.extendDeepNoArrays=function(){return w(arguments,!0,!1,!0)};function w(e,o,a,n){var r=e[0],u=e.length,s,i,f,h,p,v,y;if(u===2&&l(r)&&l(e[1])&&r.length===0){if(y=b(e[1],r),y)return r;r.splice(0,r.length)}for(var g=1;g<u;g++){s=e[g];for(i in s)f=r[i],h=s[i],n&&l(h)?r[i]=h:o&&h&&(d(h)||(p=l(h)))?(p?(p=!1,v=f&&l(f)?f:[]):v=f&&d(f)?f:{},r[i]=w([v,h],o,a,n)):(typeof h!="undefined"||a)&&(r[i]=h)}return r}},{"./is_plain_object.js":504}],494:[function(t,B,H){B.exports=function(l){for(var b={},w=[],e=0,o=0;o<l.length;o++){var a=l[o];b[a]!==1&&(b[a]=1,w[e++]=a)}return w}},{}],495:[function(t,B,H){B.exports=function(e){for(var o=b(e)?l:d,a=[],n=0;n<e.length;n++){var r=e[n];o(r)&&a.push(r)}return a};function d(w){return w.visible===!0}function l(w){var e=w[0].trace;return e.visible===!0&&e._length!==0}function b(w){return Array.isArray(w)&&Array.isArray(w[0])&&w[0][0]&&w[0][0].trace}},{}],496:[function(t,B,H){var d=t("@plotly/d3"),l=t("country-regex"),b=t("@turf/area"),w=t("@turf/centroid"),e=t("@turf/bbox"),o=t("./identity"),a=t("./loggers"),n=t("./is_plain_object"),r=t("./nested_property"),u=t("./polygon"),s=Object.keys(l),i={"ISO-3":o,"USA-states":o,"country names":f};function f(M){for(var _=0;_<s.length;_++){var T=s[_],x=new RegExp(l[T]);if(x.test(M.trim().toLowerCase()))return T}return a.log("Unrecognized country name: "+M+"."),!1}function h(M,_,T){if(!_||typeof _!="string")return!1;var x=i[M](_),c,L,S;if(x){if(M==="USA-states")for(c=[],S=0;S<T.length;S++)L=T[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&c.push(L);else c=T;for(S=0;S<c.length;S++)if(L=c[S],L.id===x)return L;a.log(["Location with id",x,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function p(M){var _=M.geometry,T=_.coordinates,x=M.id,c=[],L,S,k,P;function z(I){for(var R=0;R<I.length-1;R++)if(I[R][0]>0&&I[R+1][0]<0)return R;return null}switch(x==="RUS"||x==="FJI"?L=function(I){var R;if(z(I)===null)R=I;else for(R=new Array(I.length),P=0;P<I.length;P++)R[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];c.push(u.tester(R))}:x==="ATA"?L=function(I){var R=z(I);if(R===null)return c.push(u.tester(I));var D=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>R?D[O++]=[I[P][0]+360,I[P][1]]:P===R?(D[O++]=I[P],D[O++]=[I[P][0],-90]):D[O++]=I[P];var F=u.tester(D);F.pts.pop(),c.push(F)}:L=function(I){c.push(u.tester(I))},_.type){case"MultiPolygon":for(S=0;S<T.length;S++)for(k=0;k<T[S].length;k++)L(T[S][k]);break;case"Polygon":for(S=0;S<T.length;S++)L(T[S]);break}return c}function v(M){var _=M.geojson,T=window.PlotlyGeoAssets||{},x=typeof _=="string"?T[_]:_;return n(x)?x:(a.error("Oops ... something went wrong when fetching "+_),!1)}function y(M){var _=M[0].trace,T=v(_);if(!T)return!1;var x={},c=[],L;for(L=0;L<_._length;L++){var S=M[L];(S.loc||S.loc===0)&&(x[S.loc]=S)}function k(I){var R=r(I,_.featureidkey||"id").get(),D=x[R];if(D){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var F={type:"Feature",id:R,geometry:O,properties:{}};F.properties.ct=g(F),D.fIn=I,D.fOut=F,c.push(F)}else a.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[R]}switch(T.type){case"FeatureCollection":var P=T.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(T);break;default:return a.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var z in x)a.log(["Location *"+z+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return c}function g(M){var _=M.geometry,T;if(_.type==="MultiPolygon")for(var x=_.coordinates,c=0,L=0;L<x.length;L++){var S={type:"Polygon",coordinates:x[L]},k=b.default(S);k>c&&(c=k,T=S)}else T=_;return w.default(T).geometry.coordinates}function A(M){var _=window.PlotlyGeoAssets||{},T=[];function x(P){return new Promise(function(z,I){d.json(P,function(R,D){if(R){delete _[P];var O=R.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return _[P]=D,z(D)})})}function c(P){return new Promise(function(z,I){var R=0,D=setInterval(function(){if(_[P]&&_[P]!=="pending")return clearInterval(D),z(_[P]);if(R>100)return clearInterval(D),I("Unexpected error while fetching from "+P);R++},50)})}for(var L=0;L<M.length;L++){var S=M[L][0].trace,k=S.geojson;typeof k=="string"&&(_[k]?_[k]==="pending"&&T.push(c(k)):(_[k]="pending",T.push(x(k))))}return T}function m(M){return e.default(M)}B.exports={locationToFeature:h,feature2polygons:p,getTraceGeojson:v,extractTraceFeature:y,fetchTraceGeoData:A,computeBbox:m}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(t,B,H){var d=t("../constants/numerical").BADNUM;H.calcTraceToLineCoords=function(l){for(var b=l[0].trace,w=b.connectgaps,e=[],o=[],a=0;a<l.length;a++){var n=l[a],r=n.lonlat;r[0]!==d?o.push(r):!w&&o.length>0&&(e.push(o),o=[])}return o.length>0&&e.push(o),e},H.makeLine=function(l){return l.length===1?{type:"LineString",coordinates:l[0]}:{type:"MultiLineString",coordinates:l}},H.makePolygon=function(l){if(l.length===1)return{type:"Polygon",coordinates:l};for(var b=new Array(l.length),w=0;w<l.length;w++)b[w]=[l[w]];return{type:"MultiPolygon",coordinates:b}},H.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(t,B,H){var d=t("./mod").mod;H.segmentsIntersect=l;function l(a,n,r,u,s,i,f,h){var p=r-a,v=s-a,y=f-s,g=u-n,A=i-n,m=h-i,M=p*m-y*g;if(M===0)return null;var _=(v*m-y*A)/M,T=(v*g-p*A)/M;return T<0||T>1||_<0||_>1?null:{x:a+p*_,y:n+g*_}}H.segmentDistance=function(n,r,u,s,i,f,h,p){if(l(n,r,u,s,i,f,h,p))return 0;var v=u-n,y=s-r,g=h-i,A=p-f,m=v*v+y*y,M=g*g+A*A,_=Math.min(b(v,y,m,i-n,f-r),b(v,y,m,h-n,p-r),b(g,A,M,n-i,r-f),b(g,A,M,u-i,s-f));return Math.sqrt(_)};function b(a,n,r,u,s){var i=u*a+s*n;if(i<0)return u*u+s*s;if(i>r){var f=u-a,h=s-n;return f*f+h*h}else{var p=u*n-s*a;return p*p/r}}var w,e,o;H.getTextLocation=function(n,r,u,s){if((n!==e||s!==o)&&(w={},e=n,o=s),w[u])return w[u];var i=n.getPointAtLength(d(u-s/2,r)),f=n.getPointAtLength(d(u+s/2,r)),h=Math.atan((f.y-i.y)/(f.x-i.x)),p=n.getPointAtLength(d(u,r)),v=(p.x*4+i.x+f.x)/6,y=(p.y*4+i.y+f.y)/6,g={x:v,y,theta:h};return w[u]=g,g},H.clearLocationCache=function(){e=null},H.getVisibleSegment=function(n,r,u){var s=r.left,i=r.right,f=r.top,h=r.bottom,p=0,v=n.getTotalLength(),y=v,g,A;function m(_){var T=n.getPointAtLength(_);_===0?g=T:_===v&&(A=T);var x=T.x<s?s-T.x:T.x>i?T.x-i:0,c=T.y<f?f-T.y:T.y>h?T.y-h:0;return Math.sqrt(x*x+c*c)}for(var M=m(p);M;){if(p+=M+u,p>y)return;M=m(p)}for(M=m(y);M;){if(y-=M+u,p>y)return;M=m(y)}return{min:p,max:y,len:y-p,total:v,isClosed:p===0&&y===v&&Math.abs(g.x-A.x)<.1&&Math.abs(g.y-A.y)<.1}},H.findPointOnPath=function(n,r,u,s){s=s||{};for(var i=s.pathLength||n.getTotalLength(),f=s.tolerance||.001,h=s.iterationLimit||30,p=n.getPointAtLength(0)[u]>n.getPointAtLength(i)[u]?-1:1,v=0,y=0,g=i,A,m,M;v<h;){if(A=(y+g)/2,m=n.getPointAtLength(A),M=m[u]-r,Math.abs(M)<f)return m;p*M>0?g=A:y=A,v++}return m}},{"./mod":510}],499:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("color-normalize"),w=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,o=t("./array").isArrayOrTypedArray,a=b(e),n=1;function r(h,p){var v=h;return v[3]*=p,v}function u(h){if(d(h))return a;var p=b(h);return p.length?p:a}function s(h){return d(h)?h:n}function i(h,p,v){var y=h.color,g=o(y),A=o(p),m=w.extractOpts(h),M=[],_,T,x,c,L;if(m.colorscale!==void 0?_=w.makeColorScaleFuncFromTrace(h):_=u,g?T=function(k,P){return k[P]===void 0?a:b(_(k[P]))}:T=u,A?x=function(k,P){return k[P]===void 0?n:s(k[P])}:x=s,g||A)for(var S=0;S<v;S++)c=T(y,S),L=x(p,S),M[S]=r(c,L);else M=r(b(y),p);return M}function f(h){var p=w.extractOpts(h),v=p.colorscale;return p.reversescale&&(v=w.flipScale(p.colorscale)),v.map(function(y){var g=y[0],A=l(y[1]),m=A.toRgb();return{index:g,rgb:[m.r,m.g,m.b,m.a]}})}B.exports={formatColor:i,parseColorScale:f}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(t,B,H){var d=t("./identity");function l(b){return[b]}B.exports={keyFun:function(b){return b.key},repeat:l,descend:d,wrap:l,unwrap:function(b){return b[0]}}},{"./identity":501}],501:[function(t,B,H){B.exports=function(l){return l}},{}],502:[function(t,B,H){B.exports=function(l,b){if(!b)return l;var w=1/Math.abs(b),e=w>1?(w*l+w*b)/w:l+b,o=String(e).length;if(o>16){var a=String(b).length,n=String(l).length;if(o>=n+a){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],503:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").utcFormat,b=t("d3-format").format,w=t("fast-isnumeric"),e=t("../constants/numerical"),o=e.FP_SAFE,a=-o,n=e.BADNUM,r=B.exports={};r.adjustFormat=function(ue){return!ue||/^\d[.]\df/.test(ue)||/[.]\d%/.test(ue)?ue:ue==="0.f"?"~f":/^\d%/.test(ue)?"~%":/^\ds/.test(ue)?"~s":!/^[~,.0$]/.test(ue)&&/[&fps]/.test(ue)?"~"+ue:ue};var u={};r.warnBadFormat=function(se){var ue=String(se);u[ue]||(u[ue]=1,r.warn('encountered bad format: "'+ue+'"'))},r.noFormat=function(se){return String(se)},r.numberFormat=function(se){var ue;try{ue=b(r.adjustFormat(se))}catch{return r.warnBadFormat(se),r.noFormat}return ue},r.nestedProperty=t("./nested_property"),r.keyedContainer=t("./keyed_container"),r.relativeAttr=t("./relative_attr"),r.isPlainObject=t("./is_plain_object"),r.toLogRange=t("./to_log_range"),r.relinkPrivateKeys=t("./relink_private");var s=t("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var i=t("./mod");r.mod=i.mod,r.modHalf=i.modHalf;var f=t("./coerce");r.valObjectMeta=f.valObjectMeta,r.coerce=f.coerce,r.coerce2=f.coerce2,r.coerceFont=f.coerceFont,r.coercePattern=f.coercePattern,r.coerceHoverinfo=f.coerceHoverinfo,r.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,r.validate=f.validate;var h=t("./dates");r.dateTime2ms=h.dateTime2ms,r.isDateTime=h.isDateTime,r.ms2DateTime=h.ms2DateTime,r.ms2DateTimeLocal=h.ms2DateTimeLocal,r.cleanDate=h.cleanDate,r.isJSDate=h.isJSDate,r.formatDate=h.formatDate,r.incrementMonth=h.incrementMonth,r.dateTick0=h.dateTick0,r.dfltRange=h.dfltRange,r.findExactDates=h.findExactDates,r.MIN_MS=h.MIN_MS,r.MAX_MS=h.MAX_MS;var p=t("./search");r.findBin=p.findBin,r.sorterAsc=p.sorterAsc,r.sorterDes=p.sorterDes,r.distinctVals=p.distinctVals,r.roundUp=p.roundUp,r.sort=p.sort,r.findIndexOfMin=p.findIndexOfMin,r.sortObjectKeys=t("./sort_object_keys");var v=t("./stats");r.aggNums=v.aggNums,r.len=v.len,r.mean=v.mean,r.median=v.median,r.midRange=v.midRange,r.variance=v.variance,r.stdev=v.stdev,r.interp=v.interp;var y=t("./matrix");r.init2dArray=y.init2dArray,r.transposeRagged=y.transposeRagged,r.dot=y.dot,r.translationMatrix=y.translationMatrix,r.rotationMatrix=y.rotationMatrix,r.rotationXYMatrix=y.rotationXYMatrix,r.apply3DTransform=y.apply3DTransform,r.apply2DTransform=y.apply2DTransform,r.apply2DTransform2=y.apply2DTransform2,r.convertCssMatrix=y.convertCssMatrix,r.inverseTransformMatrix=y.inverseTransformMatrix;var g=t("./angles");r.deg2rad=g.deg2rad,r.rad2deg=g.rad2deg,r.angleDelta=g.angleDelta,r.angleDist=g.angleDist,r.isFullCircle=g.isFullCircle,r.isAngleInsideSector=g.isAngleInsideSector,r.isPtInsideSector=g.isPtInsideSector,r.pathArc=g.pathArc,r.pathSector=g.pathSector,r.pathAnnulus=g.pathAnnulus;var A=t("./anchor_utils");r.isLeftAnchor=A.isLeftAnchor,r.isCenterAnchor=A.isCenterAnchor,r.isRightAnchor=A.isRightAnchor,r.isTopAnchor=A.isTopAnchor,r.isMiddleAnchor=A.isMiddleAnchor,r.isBottomAnchor=A.isBottomAnchor;var m=t("./geometry2d");r.segmentsIntersect=m.segmentsIntersect,r.segmentDistance=m.segmentDistance,r.getTextLocation=m.getTextLocation,r.clearLocationCache=m.clearLocationCache,r.getVisibleSegment=m.getVisibleSegment,r.findPointOnPath=m.findPointOnPath;var M=t("./extend");r.extendFlat=M.extendFlat,r.extendDeep=M.extendDeep,r.extendDeepAll=M.extendDeepAll,r.extendDeepNoArrays=M.extendDeepNoArrays;var _=t("./loggers");r.log=_.log,r.warn=_.warn,r.error=_.error;var T=t("./regex");r.counterRegex=T.counter;var x=t("./throttle");r.throttle=x.throttle,r.throttleDone=x.done,r.clearThrottle=x.clear;var c=t("./dom");r.getGraphDiv=c.getGraphDiv,r.isPlotDiv=c.isPlotDiv,r.removeElement=c.removeElement,r.addStyleRule=c.addStyleRule,r.addRelatedStyleRule=c.addRelatedStyleRule,r.deleteRelatedStyleRule=c.deleteRelatedStyleRule,r.getFullTransformMatrix=c.getFullTransformMatrix,r.getElementTransformMatrix=c.getElementTransformMatrix,r.getElementAndAncestors=c.getElementAndAncestors,r.equalDomRects=c.equalDomRects,r.clearResponsive=t("./clear_responsive"),r.preserveDrawingBuffer=t("./preserve_drawing_buffer"),r.makeTraceGroups=t("./make_trace_groups"),r._=t("./localize"),r.notifier=t("./notifier"),r.filterUnique=t("./filter_unique"),r.filterVisible=t("./filter_visible"),r.pushUnique=t("./push_unique"),r.increment=t("./increment"),r.cleanNumber=t("./clean_number"),r.ensureNumber=function(ue){return w(ue)?(ue=Number(ue),ue>o||ue<a?n:ue):n},r.isIndex=function(se,ue){return ue!==void 0&&se>=ue?!1:w(se)&&se>=0&&se%1==0},r.noop=t("./noop"),r.identity=t("./identity"),r.repeat=function(se,ue){for(var oe=new Array(ue),U=0;U<ue;U++)oe[U]=se;return oe},r.swapAttrs=function(se,ue,oe,U){oe||(oe="x"),U||(U="y");for(var G=0;G<ue.length;G++){var re=ue[G],ee=r.nestedProperty(se,re.replace("?",oe)),j=r.nestedProperty(se,re.replace("?",U)),Q=ee.get();ee.set(j.get()),j.set(Q)}},r.raiseToTop=function(ue){ue.parentNode.appendChild(ue)},r.cancelTransition=function(se){return se.transition().duration(0)},r.constrain=function(se,ue,oe){return ue>oe?Math.max(oe,Math.min(ue,se)):Math.max(ue,Math.min(oe,se))},r.bBoxIntersect=function(se,ue,oe){return oe=oe||0,se.left<=ue.right+oe&&ue.left<=se.right+oe&&se.top<=ue.bottom+oe&&ue.top<=se.bottom+oe},r.simpleMap=function(se,ue,oe,U,G){for(var re=se.length,ee=new Array(re),j=0;j<re;j++)ee[j]=ue(se[j],oe,U,G);return ee},r.randstr=function se(ue,oe,U,G){if(U||(U=16),oe===void 0&&(oe=24),oe<=0)return"0";var re=Math.log(Math.pow(2,oe))/Math.log(U),ee="",j,Q,ne;for(j=2;re===1/0;j*=2)re=Math.log(Math.pow(2,oe/j))/Math.log(U)*j;var ae=re-Math.floor(re);for(j=0;j<Math.floor(re);j++)ne=Math.floor(Math.random()*U).toString(U),ee=ne+ee;ae&&(Q=Math.pow(U,ae),ne=Math.floor(Math.random()*Q).toString(U),ee=ne+ee);var ie=parseInt(ee,U);return ue&&ue[ee]||ie!==1/0&&ie>=Math.pow(2,oe)?G>10?(r.warn("randstr failed uniqueness"),ee):se(ue,oe,U,(G||0)+1):ee},r.OptionControl=function(se,ue){se||(se={}),ue||(ue="opt");var oe={};return oe.optionList=[],oe._newoption=function(U){U[ue]=se,oe[U.name]=U,oe.optionList.push(U)},oe["_"+ue]=se,oe},r.smooth=function(se,ue){if(ue=Math.round(ue)||0,ue<2)return se;var oe=se.length,U=2*oe,G=2*ue-1,re=new Array(G),ee=new Array(oe),j,Q,ne,ae;for(j=0;j<G;j++)re[j]=(1-Math.cos(Math.PI*(j+1)/ue))/(2*ue);for(j=0;j<oe;j++){for(ae=0,Q=0;Q<G;Q++)ne=j+Q+1-ue,ne<-oe?ne-=U*Math.round(ne/U):ne>=U&&(ne-=U*Math.floor(ne/U)),ne<0?ne=-1-ne:ne>=oe&&(ne=U-1-ne),ae+=se[ne]*re[Q];ee[j]=ae}return ee},r.syncOrAsync=function(se,ue,oe){var U,G;function re(){return r.syncOrAsync(se,ue,oe)}for(;se.length;)if(G=se.splice(0,1)[0],U=G(ue),U&&U.then)return U.then(re);return oe&&oe(ue)},r.stripTrailingSlash=function(se){return se.substr(-1)==="/"?se.substr(0,se.length-1):se},r.noneOrAll=function(se,ue,oe){if(!!se){var U=!1,G=!0,re,ee;for(re=0;re<oe.length;re++)ee=se[oe[re]],ee!=null?U=!0:G=!1;if(U&&!G)for(re=0;re<oe.length;re++)se[oe[re]]=ue[oe[re]]}},r.mergeArray=function(se,ue,oe,U){var G=typeof U=="function";if(r.isArrayOrTypedArray(se))for(var re=Math.min(se.length,ue.length),ee=0;ee<re;ee++){var j=se[ee];ue[ee][oe]=G?U(j):j}},r.mergeArrayCastPositive=function(se,ue,oe){return r.mergeArray(se,ue,oe,function(U){var G=+U;return isFinite(G)&&G>0?G:0})},r.fillArray=function(se,ue,oe,U){if(U=U||r.identity,r.isArrayOrTypedArray(se))for(var G=0;G<ue.length;G++)ue[G][oe]=U(se[G])},r.castOption=function(se,ue,oe,U){U=U||r.identity;var G=r.nestedProperty(se,oe).get();return r.isArrayOrTypedArray(G)?Array.isArray(ue)&&r.isArrayOrTypedArray(G[ue[0]])?U(G[ue[0]][ue[1]]):U(G[ue]):G},r.extractOption=function(se,ue,oe,U){if(oe in se)return se[oe];var G=r.nestedProperty(ue,U).get();if(!Array.isArray(G))return G};function L(se){var ue={};for(var oe in se)for(var U=se[oe],G=0;G<U.length;G++)ue[U[G]]=+oe;return ue}r.tagSelected=function(se,ue,oe){var U=ue.selectedpoints,G=ue._indexToPoints,re;G&&(re=L(G));function ee(ie){return ie!==void 0&&ie<se.length}for(var j=0;j<U.length;j++){var Q=U[j];if(r.isIndex(Q)||r.isArrayOrTypedArray(Q)&&r.isIndex(Q[0])&&r.isIndex(Q[1])){var ne=re?re[Q]:Q,ae=oe?oe[ne]:ne;ee(ae)&&(se[ae].selected=1)}}},r.selIndices2selPoints=function(se){var ue=se.selectedpoints,oe=se._indexToPoints;if(oe){for(var U=L(oe),G=[],re=0;re<ue.length;re++){var ee=ue[re];if(r.isIndex(ee)){var j=U[ee];r.isIndex(j)&&G.push(j)}}return G}else return ue},r.getTargetArray=function(se,ue){var oe=ue.target;if(typeof oe=="string"&&oe){var U=r.nestedProperty(se,oe).get();return Array.isArray(U)?U:!1}else if(Array.isArray(oe))return oe;return!1},r.minExtend=function(se,ue){var oe={};typeof ue!="object"&&(ue={});var U=3,G=Object.keys(se),re,ee,j;for(re=0;re<G.length;re++)ee=G[re],j=se[ee],!(ee.charAt(0)==="_"||typeof j=="function")&&(ee==="module"?oe[ee]=j:Array.isArray(j)?ee==="colorscale"?oe[ee]=j.slice():oe[ee]=j.slice(0,U):r.isTypedArray(j)?oe[ee]=j.subarray(0,U):j&&typeof j=="object"?oe[ee]=r.minExtend(se[ee],ue[ee]):oe[ee]=j);for(G=Object.keys(ue),re=0;re<G.length;re++)ee=G[re],j=ue[ee],(typeof j!="object"||!(ee in oe)||typeof oe[ee]!="object")&&(oe[ee]=j);return oe},r.titleCase=function(se){return se.charAt(0).toUpperCase()+se.substr(1)},r.containsAny=function(se,ue){for(var oe=0;oe<ue.length;oe++)if(se.indexOf(ue[oe])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var S=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;r.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var se=P.exec(window.navigator.userAgent);if(se&&se.length===2){var ue=parseInt(se[1]);if(!isNaN(ue))return ue}return null},r.isD3Selection=function(se){return se instanceof d.selection},r.ensureSingle=function(se,ue,oe,U){var G=se.select(ue+(oe?"."+oe:""));if(G.size())return G;var re=se.append(ue);return oe&&re.classed(oe,!0),U&&re.call(U),re},r.ensureSingleById=function(se,ue,oe,U){var G=se.select(ue+"#"+oe);if(G.size())return G;var re=se.append(ue).attr("id",oe);return U&&re.call(U),re},r.objectFromPath=function(se,ue){for(var oe=se.split("."),U,G=U={},re=0;re<oe.length;re++){var ee=oe[re],j=null,Q=oe[re].match(/(.*)\[([0-9]+)\]/);Q?(ee=Q[1],j=Q[2],U=U[ee]=[],re===oe.length-1?U[j]=ue:U[j]={},U=U[j]):(re===oe.length-1?U[ee]=ue:U[ee]={},U=U[ee])}return G};var z=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(se){var ue,oe,U,G,re,ee,j;if(typeof se=="object"&&!Array.isArray(se))for(oe in se)se.hasOwnProperty(oe)&&((ue=oe.match(z))?(G=se[oe],U=ue[1],delete se[oe],se[U]=r.extendDeepNoArrays(se[U]||{},r.objectFromPath(oe,r.expandObjectPaths(G))[U])):(ue=oe.match(I))?(G=se[oe],U=ue[1],re=parseInt(ue[2]),delete se[oe],se[U]=se[U]||[],ue[3]==="."?(j=ue[4],ee=se[U][re]=se[U][re]||{},r.extendDeepNoArrays(ee,r.objectFromPath(j,r.expandObjectPaths(G)))):se[U][re]=r.expandObjectPaths(G)):se[oe]=r.expandObjectPaths(se[oe]));return se},r.numSeparate=function(se,ue,oe){if(oe||(oe=!1),typeof ue!="string"||ue.length===0)throw new Error("Separator string required for formatting!");typeof se=="number"&&(se=String(se));var U=/(\d+)(\d{3})/,G=ue.charAt(0),re=ue.charAt(1),ee=se.split("."),j=ee[0],Q=ee.length>1?G+ee[1]:"";if(re&&(ee.length>1||j.length>4||oe))for(;U.test(j);)j=j.replace(U,"$1"+re+"$2");return j+Q},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;r.templateString=function(se,ue){var oe={};return se.replace(r.TEMPLATE_STRING_REGEX,function(U,G){var re;return R.test(G)?re=ue[G]:(oe[G]=oe[G]||r.nestedProperty(ue,G).get,re=oe[G]()),r.isValidTextValue(re)?re:""})};var D={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return Y.apply(D,arguments)};var O={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return Y.apply(O,arguments)};var F=/^[:|\|]/;function Y(se,ue,oe){var U=this,G=arguments;ue||(ue={});var re={};return se.replace(r.TEMPLATE_STRING_REGEX,function(ee,j,Q){var ne=j==="xother"||j==="yother",ae=j==="_xother"||j==="_yother",ie=j==="_xother_"||j==="_yother_",fe=j==="xother_"||j==="yother_",me=ne||ae||fe||ie,ce=j;(ae||ie)&&(ce=ce.substring(1)),(fe||ie)&&(ce=ce.substring(0,ce.length-1));var ye;if(me){if(ye=ue[ce],ye===void 0)return""}else{var xe,ke;for(ke=3;ke<G.length;ke++)if(xe=G[ke],!!xe){if(xe.hasOwnProperty(ce)){ye=xe[ce];break}if(R.test(ce)||(ye=r.nestedProperty(xe,ce).get(),ye=re[ce]||r.nestedProperty(xe,ce).get(),ye&&(re[ce]=ye)),ye!==void 0)break}}if(ye===void 0&&U)return U.count<U.max&&(r.warn("Variable '"+ce+"' in "+U.name+" could not be found!"),ye=ee),U.count===U.max&&r.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,ee;if(Q){var Ae;if(Q[0]===":"&&(Ae=oe?oe.numberFormat:r.numberFormat,ye=Ae(Q.replace(F,""))(ye)),Q[0]==="|"){Ae=oe?oe.timeFormat:l;var Oe=r.dateTime2ms(ye);ye=r.formatDate(Oe,Q.replace(F,""),!1,Ae)}}else{var He=ce+"Label";ue.hasOwnProperty(He)&&(ye=ue[He])}return me&&(ye="("+ye+")",(ae||ie)&&(ye=" "+ye),(fe||ie)&&(ye=ye+" ")),ye})}var X=48,q=57;r.subplotSort=function(se,ue){for(var oe=Math.min(se.length,ue.length)+1,U=0,G=0,re=0;re<oe;re++){var ee=se.charCodeAt(re)||0,j=ue.charCodeAt(re)||0,Q=ee>=X&&ee<=q,ne=j>=X&&j<=q;if(Q&&(U=10*U+ee-X),ne&&(G=10*G+j-X),!Q||!ne){if(U!==G)return U-G;if(ee!==j)return ee-j}}return G-U};var $=2e9;r.seedPseudoRandom=function(){$=2e9},r.pseudoRandom=function(){var se=$;return $=(69069*$+1)%4294967296,Math.abs($-se)<429496729?r.pseudoRandom():$/4294967296},r.fillText=function(se,ue,oe){var U=Array.isArray(oe)?function(ee){oe.push(ee)}:function(ee){oe.text=ee},G=r.extractOption(se,ue,"htx","hovertext");if(r.isValidTextValue(G))return U(G);var re=r.extractOption(se,ue,"tx","text");if(r.isValidTextValue(re))return U(re)},r.isValidTextValue=function(se){return se||se===0},r.formatPercent=function(se,ue){ue=ue||0;for(var oe=(Math.round(100*se*Math.pow(10,ue))*Math.pow(.1,ue)).toFixed(ue)+"%",U=0;U<ue;U++)oe.indexOf(".")!==-1&&(oe=oe.replace("0%","%"),oe=oe.replace(".%","%"));return oe},r.isHidden=function(se){var ue=window.getComputedStyle(se).display;return!ue||ue==="none"},r.strTranslate=function(se,ue){return se||ue?"translate("+se+","+ue+")":""},r.strRotate=function(se){return se?"rotate("+se+")":""},r.strScale=function(se){return se!==1?"scale("+se+")":""},r.getTextTransform=function(se){var ue=se.noCenter,oe=se.textX,U=se.textY,G=se.targetX,re=se.targetY,ee=se.anchorX||0,j=se.anchorY||0,Q=se.rotate,ne=se.scale;return ne?ne>1&&(ne=1):ne=0,r.strTranslate(G-ne*(oe+ee),re-ne*(U+j))+r.strScale(ne)+(Q?"rotate("+Q+(ue?"":" "+oe+" "+U)+")":"")},r.ensureUniformFontSize=function(se,ue){var oe=r.extendFlat({},ue);return oe.size=Math.max(ue.size,se._fullLayout.uniformtext.minsize||0),oe},r.join2=function(se,ue,oe){var U=se.length;return U>1?se.slice(0,-1).join(ue)+oe+se[U-1]:se.join(ue)},r.bigFont=function(se){return Math.round(1.2*se)};var V=r.getFirefoxVersion(),K=V!==null&&V<86;r.getPositionFromD3Event=function(){return K?[d.event.layerX,d.event.layerY]:[d.event.offsetX,d.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(t,B,H){B.exports=function(l){return window&&window.process&&window.process.versions?Object.prototype.toString.call(l)==="[object Object]":Object.prototype.toString.call(l)==="[object Object]"&&Object.getPrototypeOf(l).hasOwnProperty("hasOwnProperty")}},{}],505:[function(t,B,H){var d=t("./nested_property"),l=/^\w*$/,b=0,w=1,e=2,o=3,a=4;B.exports=function(r,u,s,i){s=s||"name",i=i||"value";var f,h,p,v={};u&&u.length?(p=d(r,u),h=p.get()):h=r,u=u||"";var y={};if(h)for(f=0;f<h.length;f++)y[h[f][s]]=f;var g=l.test(i),A={set:function(m,M){var _=M===null?a:b;if(!h){if(!p||_===a)return;h=[],p.set(h)}var T=y[m];if(T===void 0){if(_===a)return;_=_|o,T=h.length,y[m]=T}else M!==(g?h[T][i]:d(h[T],i).get())&&(_=_|e);var x=h[T]=h[T]||{};return x[s]=m,g?x[i]=M:d(x,i).set(M),M!==null&&(_=_&~a),v[T]=v[T]|_,A},get:function(m){if(!!h){var M=y[m];if(M!==void 0)return g?h[M][i]:d(h[M],i).get()}},rename:function(m,M){var _=y[m];return _===void 0||(v[_]=v[_]|w,y[M]=_,delete y[m],h[_][s]=M),A},remove:function(m){var M=y[m];if(M===void 0)return A;var _=h[M];if(Object.keys(_).length>2)return v[M]=v[M]|e,A.set(m,null);if(g){for(f=M;f<h.length;f++)v[f]=v[f]|o;for(f=M;f<h.length;f++)y[h[f][s]]--;h.splice(M,1),delete y[m]}else d(_,i).set(null),v[M]=v[M]|e|a;return A},constructUpdate:function(){for(var m,M,_={},T=Object.keys(v),x=0;x<T.length;x++)M=T[x],m=u+"["+M+"]",h[M]?(v[M]&w&&(_[m+"."+s]=h[M][s]),v[M]&e&&(g?_[m+"."+i]=v[M]&a?null:h[M][i]:_[m+"."+i]=v[M]&a?null:d(h[M],i).get())):_[m]=null;return _}};return A}},{"./nested_property":511}],506:[function(t,B,H){var d=t("../registry");B.exports=function(b,w){for(var e=b._context.locale,o=0;o<2;o++){for(var a=b._context.locales,n=0;n<2;n++){var r=(a[e]||{}).dictionary;if(r){var u=r[w];if(u)return u}a=d.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return w}},{"../registry":638}],507:[function(t,B,H){var d=t("../plot_api/plot_config").dfltConfig,l=t("./notifier"),b=B.exports={};b.log=function(){var w;if(d.logging>1){var e=["LOG:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.trace.apply(console,e)}if(d.notifyOnLogging>1){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"long")}},b.warn=function(){var w;if(d.logging>0){var e=["WARN:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.trace.apply(console,e)}if(d.notifyOnLogging>0){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"stick")}},b.error=function(){var w;if(d.logging>0){var e=["ERROR:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.error.apply(console,e)}if(d.notifyOnLogging>0){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b,w,e){var o=b.selectAll("g."+e.replace(/\s/g,".")).data(w,function(n){return n[0].trace.uid});o.exit().remove(),o.enter().append("g").attr("class",e),o.order();var a=b.classed("rangeplot")?"nodeRangePlot3":"node3";return o.each(function(n){n[0][a]=d.select(this)}),o}},{"@plotly/d3":58}],509:[function(t,B,H){var d=t("gl-mat4");H.init2dArray=function(l,b){for(var w=new Array(l),e=0;e<l;e++)w[e]=new Array(b);return w},H.transposeRagged=function(l){var b=0,w=l.length,e,o;for(e=0;e<w;e++)b=Math.max(b,l[e].length);var a=new Array(b);for(e=0;e<b;e++)for(a[e]=new Array(w),o=0;o<w;o++)a[e][o]=l[o][e];return a},H.dot=function(l,b){if(!(l.length&&b.length)||l.length!==b.length)return null;var w=l.length,e,o;if(l[0].length)for(e=new Array(w),o=0;o<w;o++)e[o]=H.dot(l[o],b);else if(b[0].length){var a=H.transposeRagged(b);for(e=new Array(a.length),o=0;o<a.length;o++)e[o]=H.dot(l,a[o])}else for(e=0,o=0;o<w;o++)e+=l[o]*b[o];return e},H.translationMatrix=function(l,b){return[[1,0,l],[0,1,b],[0,0,1]]},H.rotationMatrix=function(l){var b=l*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},H.rotationXYMatrix=function(l,b,w){return H.dot(H.dot(H.translationMatrix(b,w),H.rotationMatrix(l)),H.translationMatrix(-b,-w))},H.apply3DTransform=function(l){return function(){var b=arguments,w=arguments.length===1?b[0]:[b[0],b[1],b[2]||0];return H.dot(l,[w[0],w[1],w[2],1]).slice(0,3)}},H.apply2DTransform=function(l){return function(){var b=arguments;b.length===3&&(b=b[0]);var w=arguments.length===1?b[0]:[b[0],b[1]];return H.dot(l,[w[0],w[1],1]).slice(0,2)}},H.apply2DTransform2=function(l){var b=H.apply2DTransform(l);return function(w){return b(w.slice(0,2)).concat(b(w.slice(2,4)))}},H.convertCssMatrix=function(l){if(l){var b=l.length;if(b===16)return l;if(b===6)return[l[0],l[1],0,0,l[2],l[3],0,0,0,0,1,0,l[4],l[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H.inverseTransformMatrix=function(l){var b=[];return d.invert(b,l),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],510:[function(t,B,H){function d(b,w){var e=b%w;return e<0?e+w:e}function l(b,w){return Math.abs(b)>w/2?b-Math.round(b/w)*w:b}B.exports={mod:d,modHalf:l}},{}],511:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./array").isArrayOrTypedArray;B.exports=function(i,f){if(d(f))f=String(f);else if(typeof f!="string"||f.substr(f.length-4)==="[-1]")throw"bad property string";for(var h=0,p=f.split("."),v,y,g;h<p.length;){if(v=String(p[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),v){if(v[1])p[h]=v[1];else if(h===0)p.splice(0,1);else throw"bad property string";for(y=v[2].substr(1,v[2].length-2).split("]["),g=0;g<y.length;g++)h++,p.splice(h,0,Number(y[g]))}h++}return typeof i!="object"?u(i,f,p):{set:o(i,p,f),get:b(i,p),astr:f,parts:p,obj:i}};function b(s,i){return function(){var f=s,h,p,v,y,g;for(y=0;y<i.length-1;y++){if(h=i[y],h===-1){for(p=!0,v=[],g=0;g<f.length;g++)v[g]=b(f[g],i.slice(y+1))(),v[g]!==v[0]&&(p=!1);return p?v[0]:v}if(typeof h=="number"&&!l(f)||(f=f[h],typeof f!="object"||f===null))return}if(!(typeof f!="object"||f===null)&&(v=f[i[y]],v!==null))return v}}var w=/(^|\.)args\[/;function e(s,i){return s===void 0||s===null&&!i.match(w)}function o(s,i,f){return function(h){var p=s,v="",y=e(h,f),g,A;for(A=0;A<i.length-1;A++){if(g=i[A],typeof g=="number"&&!l(p))throw"array index but container is not an array";if(g===-1){if(y=!n(p,i.slice(A+1),h,f),y)break;return}if(!r(p,g,i[A+1],y))break;if(p=p[g],typeof p!="object"||p===null)throw"container is not an object";v=a(v,g)}if(y){if(A===i.length-1&&(delete p[i[A]],Array.isArray(p)&&+i[A]==p.length-1))for(;p.length&&p[p.length-1]===void 0;)p.pop()}else p[i[A]]=h}}function a(s,i){var f=i;return d(i)?f="["+i+"]":s&&(f="."+i),s+f}function n(s,i,f,h){var p=l(f),v=!0,y=f,g=h.replace("-1",0),A=p?!1:e(f,g),m=i[0],M;for(M=0;M<s.length;M++)g=h.replace("-1",M),p&&(y=f[M%f.length],A=e(y,g)),A&&(v=!1),!!r(s,M,m,A)&&o(s[M],i,h.replace("-1",M))(y);return v}function r(s,i,f,h){if(s[i]===void 0){if(h)return!1;typeof f=="number"?s[i]=[]:s[i]={}}return!0}function u(s,i,f){return{set:function(){throw"bad container"},get:function(){},astr:i,parts:f,obj:s}}},{"./array":485,"fast-isnumeric":190}],512:[function(t,B,H){B.exports=function(){}},{}],513:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=[];B.exports=function(w,e){if(b.indexOf(w)!==-1)return;b.push(w);var o=1e3;l(e)?o=e:e==="long"&&(o=3e3);var a=d.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var n=a.selectAll(".notifier-note").data(b);function r(u){u.duration(700).style("opacity",0).each("end",function(s){var i=b.indexOf(s);i!==-1&&b.splice(i,1),d.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(u){var s=d.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var i=s.append("p"),f=u.split(/<br\s*\/?>/g),h=0;h<f.length;h++)h&&i.append("br"),i.append("span").text(f[h]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(o).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(t,B,H){var d=t("./setcursor"),l="data-savedcursor",b="!!";B.exports=function(e,o){var a=e.attr(l);if(o){if(!a){for(var n=(e.attr("class")||"").split(" "),r=0;r<n.length;r++){var u=n[r];u.indexOf("cursor-")===0&&e.attr(l,u.substr(7)).classed(u,!1)}e.attr(l)||e.attr(l,b)}d(e,o)}else a&&(e.attr(l,null),a===b?d(e):d(e,a))}},{"./setcursor":524}],515:[function(t,B,H){var d=t("./matrix").dot,l=t("../constants/numerical").BADNUM,b=B.exports={};b.tester=function(e){var o=e.slice(),a=o[0][0],n=a,r=o[0][1],u=r,s;for(o.push(o[0]),s=1;s<o.length;s++)a=Math.min(a,o[s][0]),n=Math.max(n,o[s][0]),r=Math.min(r,o[s][1]),u=Math.max(u,o[s][1]);var i=!1,f;o.length===5&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(i=!0,f=function(g){return g[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(i=!0,f=function(g){return g[1]===o[0][1]}));function h(g,A){var m=g[0],M=g[1];return!(m===l||m<a||m>n||M===l||M<r||M>u||A&&f(g))}function p(g,A){var m=g[0],M=g[1];if(m===l||m<a||m>n||M===l||M<r||M>u)return!1;var _=o.length,T=o[0][0],x=o[0][1],c=0,L,S,k,P,z;for(L=1;L<_;L++)if(S=T,k=x,T=o[L][0],x=o[L][1],P=Math.min(S,T),!(m<P||m>Math.max(S,T)||M>Math.max(k,x)))if(M<Math.min(k,x))m!==P&&c++;else{if(T===S?z=M:z=k+(m-S)*(x-k)/(T-S),M===z)return!(L===1&&A);M<=z&&m!==P&&c++}return c%2==1}var v=!0,y=o[0];for(s=1;s<o.length;s++)if(y[0]!==o[s][0]||y[1]!==o[s][1]){v=!1;break}return{xmin:a,xmax:n,ymin:r,ymax:u,pts:o,contains:i?h:p,isRect:i,degenerate:v}},b.isSegmentBent=function(e,o,a,n){var r=e[o],u=[e[a][0]-r[0],e[a][1]-r[1]],s=d(u,u),i=Math.sqrt(s),f=[-u[1]/i,u[0]/i],h,p,v;for(h=o+1;h<a;h++)if(p=[e[h][0]-r[0],e[h][1]-r[1]],v=d(p,u),v<0||v>s||Math.abs(d(p,f))>n)return!0;return!1},b.filter=function(e,o){var a=[e[0]],n=0,r=0;function u(i){e.push(i);var f=a.length,h=n;a.splice(r+1);for(var p=h+1;p<e.length;p++)(p===e.length-1||b.isSegmentBent(e,h,p+1,o))&&(a.push(e[p]),a.length<f-2&&(n=p,r=a.length-1),h=p)}if(e.length>1){var s=e.pop();u(s)}return{addPt:u,raw:e,filtered:a}}},{"../constants/numerical":479,"./matrix":509}],516:[function(t,B,H){(function(d){(function(){var l=t("./show_no_webgl_msg"),b=t("regl");B.exports=function(e,o){var a=e._fullLayout,n=!0;return a._glcanvas.each(function(r){if(!r.regl&&!(r.pick&&!a._has("parcoords"))){try{r.regl=b({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||d.devicePixelRatio,extensions:o||[]})}catch{n=!1}r.regl||(n=!1),n&&this.addEventListener("webglcontextlost",function(u){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:u,layer:r.key})},!1)}}),n||l({container:a._glcontainer.node()}),n}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(t,B,H){var d=t("fast-isnumeric"),l=t("is-mobile");B.exports=function(e){var o;if(e&&e.hasOwnProperty("userAgent")?o=e.userAgent:o=b(),typeof o!="string")return!0;var a=l({ua:{headers:{"user-agent":o}},tablet:!0,featureDetect:!1});if(!a)for(var n=o.split(" "),r=1;r<n.length;r++){var u=n[r];if(u.indexOf("Safari")!==-1)for(var s=r-1;s>-1;s--){var i=n[s];if(i.substr(0,8)==="Version/"){var f=i.substr(8).split(".")[0];if(d(f)&&(f=+f),f>=13)return!0}}}return a};function b(){var w;return typeof navigator!="undefined"&&(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),w}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(t,B,H){B.exports=function(l,b){if(b instanceof RegExp){for(var w=b.toString(),e=0;e<l.length;e++)if(l[e]instanceof RegExp&&l[e].toString()===w)return l;l.push(b)}else(b||b===0)&&l.indexOf(b)===-1&&l.push(b);return l}},{}],519:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_config").dfltConfig;function b(e,o){for(var a=[],n,r=0;r<o.length;r++)n=o[r],n===e?a[r]=n:typeof n=="object"?a[r]=Array.isArray(n)?d.extendDeep([],n):d.extendDeepAll({},n):a[r]=n;return a}var w={};w.add=function(e,o,a,n,r){var u,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(u={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,u),e.undoQueue.index+=1):u=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,u&&(u.undo.calls.unshift(o),u.undo.args.unshift(a),u.redo.calls.push(n),u.redo.args.push(r)),e.undoQueue.queue.length>l.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},w.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},w.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},w.undo=function(o){var a,n;if(!(o.undoQueue===void 0||isNaN(o.undoQueue.index)||o.undoQueue.index<=0)){for(o.undoQueue.index--,a=o.undoQueue.queue[o.undoQueue.index],o.undoQueue.inSequence=!0,n=0;n<a.undo.calls.length;n++)w.plotDo(o,a.undo.calls[n],a.undo.args[n]);o.undoQueue.inSequence=!1,o.autoplay=!1}},w.redo=function(o){var a,n;if(!(o.undoQueue===void 0||isNaN(o.undoQueue.index)||o.undoQueue.index>=o.undoQueue.queue.length)){for(a=o.undoQueue.queue[o.undoQueue.index],o.undoQueue.inSequence=!0,n=0;n<a.redo.calls.length;n++)w.plotDo(o,a.redo.calls[n],a.redo.args[n]);o.undoQueue.inSequence=!1,o.autoplay=!1,o.undoQueue.index++}},w.plotDo=function(e,o,a){e.autoplay=!0,a=b(e,a),o.apply(null,a)},B.exports=w},{"../lib":503,"../plot_api/plot_config":541}],520:[function(t,B,H){H.counter=function(d,l,b,w){var e=(l||"")+(b?"":"$"),o=w===!1?"":"^";return d==="xy"?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+d+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(t,B,H){var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,l=/^[^\.\[\]]+$/;B.exports=function(b,w){for(;w;){var e=b.match(d);if(e)b=e[1];else if(b.match(l))b="";else throw new Error("bad relativeAttr call:"+[b,w]);if(w.charAt(0)==="^")w=w.slice(1);else break}return b&&w.charAt(0)!=="["?b+"."+w:b+w}},{}],522:[function(t,B,H){var d=t("./array").isArrayOrTypedArray,l=t("./is_plain_object");B.exports=function b(w,e){for(var o in e){var a=e[o],n=w[o];if(n!==a)if(o.charAt(0)==="_"||typeof a=="function"){if(o in w)continue;w[o]=a}else if(d(a)&&d(n)&&l(a[0])){if(o==="customdata"||o==="ids")continue;for(var r=Math.min(a.length,n.length),u=0;u<r;u++)n[u]!==a[u]&&l(a[u])&&l(n[u])&&b(n[u],a[u])}else l(a)&&l(n)&&(b(n,a),Object.keys(n).length||delete w[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./loggers"),b=t("./identity"),w=t("../constants/numerical").BADNUM,e=1e-9;H.findBin=function(u,s,i){if(d(s.start))return i?Math.ceil((u-s.start)/s.size-e)-1:Math.floor((u-s.start)/s.size+e);var f=0,h=s.length,p=0,v=h>1?(s[h-1]-s[0])/(h-1):1,y,g;for(v>=0?g=i?o:a:g=i?r:n,u+=v*e*(i?-1:1)*(v>=0?1:-1);f<h&&p++<100;)y=Math.floor((f+h)/2),g(s[y],u)?f=y+1:h=y;return p>90&&l.log("Long binary search..."),f-1};function o(u,s){return u<s}function a(u,s){return u<=s}function n(u,s){return u>s}function r(u,s){return u>=s}H.sorterAsc=function(u,s){return u-s},H.sorterDes=function(u,s){return s-u},H.distinctVals=function(u){var s=u.slice();s.sort(H.sorterAsc);var i;for(i=s.length-1;i>-1&&s[i]===w;i--);for(var f=s[i]-s[0]||1,h=f/(i||1)/1e4,p=[],v,y=0;y<=i;y++){var g=s[y],A=g-v;v===void 0?(p.push(g),v=g):A>h&&(f=Math.min(f,A),p.push(g),v=g)}return{vals:p,minDiff:f}},H.roundUp=function(u,s,i){for(var f=0,h=s.length-1,p,v=0,y=i?0:1,g=i?1:0,A=i?Math.ceil:Math.floor;f<h&&v++<100;)p=A((f+h)/2),s[p]<=u?f=p+y:h=p-g;return s[f]},H.sort=function(u,s){for(var i=0,f=0,h=1;h<u.length;h++){var p=s(u[h],u[h-1]);if(p<0?i=1:p>0&&(f=1),i&&f)return u.sort(s)}return f?u:u.reverse()},H.findIndexOfMin=function(u,s){s=s||b;for(var i=1/0,f,h=0;h<u.length;h++){var p=s(u[h]);p<i&&(i=p,f=h)}return f}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(t,B,H){B.exports=function(l,b){(l.attr("class")||"").split(" ").forEach(function(w){w.indexOf("cursor-")===0&&l.classed(w,!1)}),b&&l.classed("cursor-"+b,!0)}},{}],525:[function(t,B,H){var d=t("../components/color"),l=function(){};B.exports=function(w){for(var e in w)typeof w[e]=="function"&&(w[e]=l);w.destroy=function(){w.container.parentNode.removeChild(w.container)};var o=document.createElement("div");o.className="no-webgl",o.style.cursor="pointer",o.style.fontSize="24px",o.style.color=d.defaults[0],o.style.position="absolute",o.style.left=o.style.top="0px",o.style.width=o.style.height="100%",o.style["background-color"]=d.lightLine,o.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",o.appendChild(a),w.container.appendChild(o),w.container.style.background="#FFFFFF",w.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(t,B,H){B.exports=function(l){return Object.keys(l).sort()}},{}],527:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./array").isArrayOrTypedArray;H.aggNums=function(b,w,e,o){var a,n;if((!o||o>e.length)&&(o=e.length),d(w)||(w=!1),l(e[0])){for(n=new Array(o),a=0;a<o;a++)n[a]=H.aggNums(b,w,e[a]);e=n}for(a=0;a<o;a++)d(w)?d(e[a])&&(w=b(+w,+e[a])):w=e[a];return w},H.len=function(b){return H.aggNums(function(w){return w+1},0,b)},H.mean=function(b,w){return w||(w=H.len(b)),H.aggNums(function(e,o){return e+o},0,b)/w},H.midRange=function(b){if(!(b===void 0||b.length===0))return(H.aggNums(Math.max,null,b)+H.aggNums(Math.min,null,b))/2},H.variance=function(b,w,e){return w||(w=H.len(b)),d(e)||(e=H.mean(b,w)),H.aggNums(function(o,a){return o+Math.pow(a-e,2)},0,b)/w},H.stdev=function(b,w,e){return Math.sqrt(H.variance(b,w,e))},H.median=function(b){var w=b.slice().sort();return H.interp(w,.5)},H.interp=function(b,w){if(!d(w))throw"n should be a finite number";if(w=w*b.length-.5,w<0)return b[0];if(w>b.length-1)return b[b.length-1];var e=w%1;return e*b[Math.ceil(w)]+(1-e)*b[Math.floor(w)]}},{"./array":485,"fast-isnumeric":190}],528:[function(t,B,H){var d=t("color-normalize");function l(b){return b?d(b):[0,0,0,1]}B.exports=l},{"color-normalize":89}],529:[function(t,B,H){var d=t("@plotly/d3"),l=t("../lib"),b=l.strTranslate,w=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;H.convertToTspans=function(O,F,Y){var X=O.text(),q=!O.attr("data-notex")&&typeof MathJax!="undefined"&&X.match(o),$=d.select(O.node().parentNode);if($.empty())return;var V=O.attr("class")?O.attr("class").split(" ")[0]:"text";V+="-math",$.selectAll("svg."+V).remove(),$.selectAll("g."+V+"-group").remove(),O.style("display",null).attr({"data-unformatted":X,"data-math":"N"});function K(){$.empty()||(V=O.attr("class")+"-math",$.select("svg."+V).remove()),O.text("").style("white-space","pre");var se=z(O.node(),X);se&&O.style("pointer-events","all"),H.positionText(O),Y&&Y.call(O)}return q?(F&&F._promises||[]).push(new Promise(function(se){O.style("display","none");var ue=parseInt(O.node().style.fontSize,10),oe={fontSize:ue};u(q[2],oe,function(U,G,re){$.selectAll("svg."+V).remove(),$.selectAll("g."+V+"-group").remove();var ee=U&&U.select("svg");if(!ee||!ee.node()){K(),se();return}var j=$.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":X,"data-math":"Y"});j.node().appendChild(ee.node()),G&&G.node()&&ee.node().insertBefore(G.node().cloneNode(!0),ee.node().firstChild);var Q=re.width,ne=re.height;ee.attr({class:V,height:ne,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=O.node().style.fill||"black",ie=ee.select("g");ie.attr({fill:ae,stroke:ae});var fe=ie.node().getBoundingClientRect(),me=fe.width,ce=fe.height;(me>Q||ce>ne)&&(ee.style("overflow","hidden"),fe=ee.node().getBoundingClientRect(),me=fe.width,ce=fe.height);var ye=+O.attr("x"),xe=+O.attr("y"),ke=ue||O.node().getBoundingClientRect().height,Ae=-ke/4;if(V[0]==="y")j.attr({transform:"rotate("+[-90,ye,xe]+")"+b(-me/2,Ae-ce/2)});else if(V[0]==="l")xe=Ae-ce/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)ye=0,xe=Ae;else{var Oe=O.attr("text-anchor");ye=ye-me*(Oe==="middle"?.5:Oe==="end"?1:0),xe=xe+Ae-ce/2}ee.attr({x:ye,y:xe}),Y&&Y.call(O,j),se(j)})})):K(),O};var a=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(O){return O.replace(a,"\\lt ").replace(n,"\\gt ")}function u(O,F,Y){var X,q,$,V;MathJax.Hub.Queue(function(){return q=l.extendDeepAll({},MathJax.Hub.config),$=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(X=MathJax.Hub.config.menuSettings.renderer,X!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var K="math-output-"+l.randstr({},64);return V=d.select("body").append("div").attr({id:K}).style({visibility:"hidden",position:"absolute"}).style({"font-size":F.fontSize+"px"}).text(r(O)),MathJax.Hub.Typeset(V.node())},function(){var K=d.select("body").select("#MathJax_SVG_glyphs");if(V.select(".MathJax_SVG").empty()||!V.select("svg").node())l.log("There was an error in the tex syntax.",O),Y();else{var se=V.select("svg").node().getBoundingClientRect();Y(V.select(".MathJax_SVG"),K,se)}if(V.remove(),X!=="SVG")return MathJax.Hub.setRenderer(X)},function(){return $!==void 0&&(MathJax.Hub.processSectionDelay=$),MathJax.Hub.Config(q)})}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},i={sub:"0.3em",sup:"-0.6em"},f={sub:"-0.21em",sup:"0.42em"},h="\u200B",p=["http:","https:","mailto:","",void 0,":"],v=H.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;H.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,_=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function x(O,F){if(!O)return null;var Y=O.match(F),X=Y&&(Y[3]||Y[4]);return X&&k(X)}var c=/(^|;)\s*color:/;H.plainText=function(O,F){F=F||{};for(var Y=F.len!==void 0&&F.len!==-1?F.len:1/0,X=F.allowedTags!==void 0?F.allowedTags:["br"],q="...",$=q.length,V=O.split(y),K=[],se="",ue=0,oe=0;oe<V.length;oe++){var U=V[oe],G=U.match(g),re=G&&G[2].toLowerCase();if(re)X.indexOf(re)!==-1&&(K.push(U),se=re);else{var ee=U.length;if(ue+ee<Y)K.push(U),ue+=ee;else if(ue<Y){var j=Y-ue;se&&(se!=="br"||j<=$||ee<=$)&&K.pop(),Y>$?K.push(U.substr(0,j-$)+q):K.push(U.substr(0,j));break}se=""}}return K.join("")};var L={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function k(O){return O.replace(S,function(F,Y){var X;return Y.charAt(0)==="#"?X=P(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):X=L[Y],X||F})}H.convertEntities=k;function P(O){if(!(O>1114111)){var F=String.fromCodePoint;if(F)return F(O);var Y=String.fromCharCode;return O<=65535?Y(O):Y((O>>10)+55232,O%1024+56320)}}function z(O,F){F=F.replace(v," ");var Y=!1,X=[],q,$=-1;function V(){$++;var ce=document.createElementNS(w.svg,"tspan");d.select(ce).attr({class:"line",dy:$*e+"em"}),O.appendChild(ce),q=ce;var ye=X;if(X=[{node:ce}],ye.length>1)for(var xe=1;xe<ye.length;xe++)K(ye[xe])}function K(ce){var ye=ce.type,xe={},ke;if(ye==="a"){ke="a";var Ae=ce.target,Oe=ce.href,He=ce.popup;Oe&&(xe={"xlink:xlink:show":Ae==="_blank"||Ae.charAt(0)!=="_"?"new":"replace",target:Ae,"xlink:xlink:href":Oe},He&&(xe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else ke="tspan";ce.style&&(xe.style=ce.style);var Ge=document.createElementNS(w.svg,ke);if(ye==="sup"||ye==="sub"){se(q,h),q.appendChild(Ge);var _e=document.createElementNS(w.svg,"tspan");se(_e,h),d.select(_e).attr("dy",f[ye]),xe.dy=i[ye],q.appendChild(Ge),q.appendChild(_e)}else q.appendChild(Ge);d.select(Ge).attr(xe),q=ce.node=Ge,X.push(ce)}function se(ce,ye){ce.appendChild(document.createTextNode(ye))}function ue(ce){if(X.length===1){l.log("Ignoring unexpected end tag </"+ce+">.",F);return}var ye=X.pop();ce!==ye.type&&l.log("Start tag <"+ye.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",F),q=X[X.length-1].node}var oe=A.test(F);oe?V():(q=O,X=[{node:O}]);for(var U=F.split(y),G=0;G<U.length;G++){var re=U[G],ee=re.match(g),j=ee&&ee[2].toLowerCase(),Q=s[j];if(j==="br")V();else if(Q===void 0)se(q,k(re));else if(ee[1])ue(j);else{var ne=ee[4],ae={type:j},ie=x(ne,m);if(ie?(ie=ie.replace(c,"$1 fill:"),Q&&(ie+=";"+Q)):Q&&(ie=Q),ie&&(ae.style=ie),j==="a"){Y=!0;var fe=x(ne,M);if(fe){var me=I(fe);me&&(ae.href=me,ae.target=x(ne,_)||"_blank",ae.popup=x(ne,T))}}K(ae)}}return Y}function I(O){var F=encodeURI(decodeURI(O)),Y=document.createElement("a"),X=document.createElement("a");Y.href=O,X.href=F;var q=Y.protocol,$=X.protocol;return p.indexOf(q)!==-1&&p.indexOf($)!==-1?F:""}H.sanitizeHTML=function(F){F=F.replace(v," ");for(var Y=document.createElement("p"),X=Y,q=[],$=F.split(y),V=0;V<$.length;V++){var K=$[V],se=K.match(g),ue=se&&se[2].toLowerCase();if(ue in s)if(se[1])q.length&&(X=q.pop());else{var oe=se[4],U=x(oe,m),G=U?{style:U}:{};if(ue==="a"){var re=x(oe,M);if(re){var ee=I(re);if(ee){G.href=ee;var j=x(oe,_);j&&(G.target=j)}}}var Q=document.createElement(ue);X.appendChild(Q),d.select(Q).attr(G),X=Q,q.push(Q)}else X.appendChild(document.createTextNode(k(K)))}var ne="innerHTML";return Y[ne]},H.lineCount=function(F){return F.selectAll("tspan.line").size()||1},H.positionText=function(F,Y,X){return F.each(function(){var q=d.select(this);function $(se,ue){return ue===void 0?(ue=q.attr(se),ue===null&&(q.attr(se,0),ue=0)):q.attr(se,ue),ue}var V=$("x",Y),K=$("y",X);this.nodeName==="text"&&q.selectAll("tspan.line").attr({x:V,y:K})})};function R(O,F,Y){var X=Y.horizontalAlign,q=Y.verticalAlign||"top",$=O.node().getBoundingClientRect(),V=F.node().getBoundingClientRect(),K,se,ue;return q==="bottom"?se=function(){return $.bottom-K.height}:q==="middle"?se=function(){return $.top+($.height-K.height)/2}:se=function(){return $.top},X==="right"?ue=function(){return $.right-K.width}:X==="center"?ue=function(){return $.left+($.width-K.width)/2}:ue=function(){return $.left},function(){K=this.node().getBoundingClientRect();var oe=ue()-V.left,U=se()-V.top,G=Y.gd||{};if(Y.gd){G._fullLayout._calcInverseTransform(G);var re=l.apply3DTransform(G._fullLayout._invTransform)(oe,U);oe=re[0],U=re[1]}return this.style({top:U+"px",left:oe+"px","z-index":1e3}),this}}var D="1px ";H.makeTextShadow=function(O){var F=D,Y=D,X=D;return F+Y+X+O+", -"+F+"-"+Y+X+O+", "+F+"-"+Y+X+O+", -"+F+Y+X+O},H.makeEditable=function(O,F){var Y=F.gd,X=F.delegate,q=d.dispatch("edit","input","cancel"),$=X||O;if(O.style({"pointer-events":X?"none":"all"}),O.size()!==1)throw new Error("boo");function V(){se(),O.style({opacity:0});var ue=$.attr("class"),oe;ue?oe="."+ue.split(" ")[0]+"-math-group":oe="[class*=-math-group]",oe&&d.select(O.node().parentNode).select(oe).style({opacity:0})}function K(ue){var oe=ue.node(),U=document.createRange();U.selectNodeContents(oe);var G=window.getSelection();G.removeAllRanges(),G.addRange(U),oe.focus()}function se(){var ue=d.select(Y),oe=ue.select(".svg-container"),U=oe.append("div"),G=O.node().style,re=parseFloat(G.fontSize||12),ee=F.text;ee===void 0&&(ee=O.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":G.fontFamily||"Arial","font-size":re,color:F.fill||G.fill||"black",opacity:1,"background-color":F.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ee).call(R(O,oe,F)).on("blur",function(){Y._editing=!1,O.text(this.textContent).style({opacity:1});var j=d.select(this).attr("class"),Q;j?Q="."+j.split(" ")[0]+"-math-group":Q="[class*=-math-group]",Q&&d.select(O.node().parentNode).select(Q).style({opacity:0});var ne=this.textContent;d.select(this).transition().duration(0).remove(),d.select(document).on("mouseup",null),q.edit.call(O,ne)}).on("focus",function(){var j=this;Y._editing=!0,d.select(document).on("mouseup",function(){if(d.event.target===j)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){d.event.which===27?(Y._editing=!1,O.style({opacity:1}),d.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),q.cancel.call(O,this.textContent)):(q.input.call(O,this.textContent),d.select(this).call(R(O,oe,F)))}).on("keydown",function(){d.event.which===13&&this.blur()}).call(K)}return F.immediate?V():$.on("click",V),d.rebind(O,q,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(t,B,H){var d={};H.throttle=function(w,e,o){var a=d[w],n=Date.now();if(!a){for(var r in d)d[r].ts<n-6e4&&delete d[r];a=d[w]={ts:0,timer:null}}l(a);function u(){o(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(n>a.ts+e){u();return}a.timer=setTimeout(function(){u(),a.timer=null},e)},H.done=function(b){var w=d[b];return!w||!w.timer?Promise.resolve():new Promise(function(e){var o=w.onDone;w.onDone=function(){o&&o(),e(),w.onDone=null}})},H.clear=function(b){if(b)l(d[b]),delete d[b];else for(var w in d)H.clear(w)};function l(b){b&&b.timer!==null&&(clearTimeout(b.timer),b.timer=null)}},{}],531:[function(t,B,H){var d=t("fast-isnumeric");B.exports=function(b,w){if(b>0)return Math.log(b)/Math.LN10;var e=Math.log(Math.min(w[0],w[1]))/Math.LN10;return d(e)||(e=Math.log(Math.max(w[0],w[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],532:[function(t,B,H){var d=B.exports={},l=t("../plots/geo/constants").locationmodeToLayer,b=t("topojson-client").feature;d.getTopojsonName=function(w){return[w.scope.replace(/ /g,"-"),"_",w.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(w,e){return w+e+".json"},d.getTopojsonFeatures=function(w,e){var o=l[w.locationmode],a=e.objects[o];return b(e,a).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(t,B,H){B.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(t,B,H){B.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(t,B,H){var d=t("../registry");B.exports=function(b){for(var w=d.layoutArrayContainers,e=d.layoutArrayRegexes,o=b.split("[")[0],a,n,r=0;r<e.length;r++)if(n=b.match(e[r]),n&&n.index===0){a=n[0];break}if(a||(a=w[w.indexOf(o)]),!a)return!1;var u=b.substr(a.length);return u?(n=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:a,index:Number(n[1]),property:n[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":638}],536:[function(t,B,H){var d=t("../lib"),l=d.extendFlat,b=d.isPlainObject,w={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=w.flags.slice().concat(["fullReplot"]),a=e.flags.slice().concat("layoutReplot");B.exports={traces:w,layout:e,traceFlags:function(){return n(o)},layoutFlags:function(){return n(a)},update:function(s,i){var f=i.editType;if(f&&f!=="none")for(var h=f.split("+"),p=0;p<h.length;p++)s[h[p]]=!0},overrideAll:r};function n(s){for(var i={},f=0;f<s.length;f++)i[s[f]]=!1;return i}function r(s,i,f){var h=l({},s);for(var p in h){var v=h[p];b(v)&&(h[p]=u(v,i,f,p))}return f==="from-root"&&(h.editType=i),h}function u(s,i,f,h){if(s.valType){var p=l({},s);if(p.editType=i,Array.isArray(s.items)){p.items=new Array(s.items.length);for(var v=0;v<s.items.length;v++)p.items[v]=u(s.items[v],i)}return p}else return r(s,i,h.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(t,B,H){var d=t("fast-isnumeric"),l=t("gl-mat4/fromQuat"),b=t("../registry"),w=t("../lib"),e=t("../plots/plots"),o=t("../plots/cartesian/axis_ids"),a=t("../components/color"),n=o.cleanId,r=o.getFromTrace,u=b.traceIs;H.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&w.log("Clearing previous rejected promises from queue."),m._promises=[]},H.cleanLayout=function(m){var M,_;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var T=(e.subplotsRegistry.cartesian||{}).attrRegex,x=(e.subplotsRegistry.polar||{}).attrRegex,c=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(m);for(M=0;M<S.length;M++){var k=S[M];if(T&&T.test(k)){var P=m[k];P.anchor&&P.anchor!=="free"&&(P.anchor=n(P.anchor)),P.overlaying&&(P.overlaying=n(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,v(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),i(P)}else if(x&&x.test(k)){var z=m[k];i(z.radialaxis)}else if(c&&c.test(k)){var I=m[k];i(I.aaxis),i(I.baxis),i(I.caxis)}else if(L&&L.test(k)){var R=m[k],D=R.cameraposition;if(Array.isArray(D)&&D[0].length===4){var O=D[0],F=D[1],Y=D[2],X=l([],O),q=[];for(_=0;_<3;++_)q[_]=F[_]+Y*X[2+4*_];R.camera={eye:{x:q[0],y:q[1],z:q[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}i(R.xaxis),i(R.yaxis),i(R.zaxis)}}var $=Array.isArray(m.annotations)?m.annotations.length:0;for(M=0;M<$;M++){var V=m.annotations[M];!w.isPlainObject(V)||(V.ref&&(V.ref==="paper"?(V.xref="paper",V.yref="paper"):V.ref==="data"&&(V.xref="x",V.yref="y"),delete V.ref),s(V,"xref"),s(V,"yref"))}var K=Array.isArray(m.shapes)?m.shapes.length:0;for(M=0;M<K;M++){var se=m.shapes[M];!w.isPlainObject(se)||(s(se,"xref"),s(se,"yref"))}var ue=Array.isArray(m.images)?m.images.length:0;for(M=0;M<ue;M++){var oe=m.images[M];!w.isPlainObject(oe)||(s(oe,"xref"),s(oe,"yref"))}var U=m.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),i(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),a.clean(m),m.template&&m.template.layout&&H.cleanLayout(m.template.layout),m};function s(m,M){var _=m[M],T=M.charAt(0);_&&_!=="paper"&&(m[M]=n(_,T,!0))}function i(m){m&&((typeof m.title=="string"||typeof m.title=="number")&&(m.title={text:m.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(_,T){var x=m[_],c=m.title&&m.title[T];x&&!c&&(m.title||(m.title={}),m.title[T]=m[_],delete m[_])}}H.cleanData=function(m){for(var M=0;M<m.length;M++){var _=m[M],T;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var x=a.defaults,c=_.error_y.color||(u(_,"bar")?a.defaultLine:x[M%x.length]);_.error_y.color=a.addOpacity(a.rgb(c),a.opacity(c)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(u(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",H.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&H.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=n(_.xaxis,"x")),_.yaxis&&(_.yaxis=n(_.yaxis,"y")),u(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!u(_,"pie-like")&&!u(_,"bar-like"))if(Array.isArray(_.textposition))for(T=0;T<_.textposition.length;T++)_.textposition[T]=p(_.textposition[T]);else _.textposition&&(_.textposition=p(_.textposition));var L=b.getModule(_);if(L&&L.colorbar){var S=L.colorbar.container,k=S?_[S]:_;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(_.type==="surface"&&w.isPlainObject(_.contours)){var P=["x","y","z"];for(T=0;T<P.length;T++){var z=_.contours[P[T]];!w.isPlainObject(z)||(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var I=(_.increasing||{}).showlegend!==!1,R=(_.decreasing||{}).showlegend!==!1,D=f(_.increasing),O=f(_.decreasing);if(D!==!1&&O!==!1){var F=h(D,O,I,R);F&&(_.name=F)}else(D||O)&&!_.name&&(_.name=D||O)}if(Array.isArray(_.transforms)){var Y=_.transforms;for(T=0;T<Y.length;T++){var X=Y[T];if(!!w.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var q=X.styles,$=Object.keys(q);X.styles=[];for(var V=0;V<$.length;V++)X.styles.push({target:$[V],value:q[$[V]]})}break}}}v(_,"line")&&delete _.line,"marker"in _&&(v(_.marker,"line")&&delete _.marker.line,v(_,"marker")&&delete _.marker),a.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),i(_),_.colorbar&&i(_.colorbar),_.marker&&_.marker.colorbar&&i(_.marker.colorbar),_.line&&_.line.colorbar&&i(_.line.colorbar),_.aaxis&&i(_.aaxis),_.baxis&&i(_.baxis)}};function f(m){if(!w.isPlainObject(m))return!1;var M=m.name;return delete m.name,delete m.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function h(m,M,_,T){if(_&&!T)return m;if(T&&!_||!m.trim())return M;if(!M.trim())return m;var x=Math.min(m.length,M.length),c;for(c=0;c<x&&m.charAt(c)===M.charAt(c);c++);var L=m.substr(0,c);return L.trim()}function p(m){var M="middle",_="center";return typeof m=="string"&&(m.indexOf("top")!==-1?M="top":m.indexOf("bottom")!==-1&&(M="bottom"),m.indexOf("left")!==-1?_="left":m.indexOf("right")!==-1&&(_="right")),M+" "+_}function v(m,M){return M in m&&typeof m[M]=="object"&&Object.keys(m[M]).length===0}H.swapXYData=function(m){var M;if(w.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var _=m.error_y,T="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);w.swapAttrs(m,["error_?.copy_ystyle"]),T&&w.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var x=m.hoverinfo.split("+");for(M=0;M<x.length;M++)x[M]==="x"?x[M]="y":x[M]==="y"&&(x[M]="x");m.hoverinfo=x.join("+")}},H.coerceTraceIndices=function(m,M){if(d(M))return[M];if(!Array.isArray(M)||!M.length)return m.data.map(function(x,c){return c});if(Array.isArray(M)){for(var _=[],T=0;T<M.length;T++)w.isIndex(M[T],m.data.length)?_.push(M[T]):w.warn("trace index (",M[T],") is not a number or is out of bounds");return _}return M},H.manageArrayContainers=function(m,M,_){var T=m.obj,x=m.parts,c=x.length,L=x[c-1],S=d(L);if(S&&M===null){var k=x.slice(0,c-1).join("."),P=w.nestedProperty(T,k).get();P.splice(L,1)}else S&&m.get()===void 0&&m.get()===void 0&&(_[m.astr]=null),m.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(m){var M=m.search(y);if(M>0)return m.substr(0,M)}H.hasParent=function(m,M){for(var _=g(M);_;){if(_ in m)return!0;_=g(_)}return!1};var A=["x","y","z"];H.clearAxisTypes=function(m,M,_){for(var T=0;T<M.length;T++)for(var x=m._fullData[T],c=0;c<3;c++){var L=r(m,x,A[c]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(_[k]!==void 0)continue;S=k+"."+S}var P=S+".type";_[S]===void 0&&_[P]===void 0&&w.nestedProperty(m.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(t,B,H){var d=t("./plot_api");H._doPlot=d._doPlot,H.newPlot=d.newPlot,H.restyle=d.restyle,H.relayout=d.relayout,H.redraw=d.redraw,H.update=d.update,H._guiRestyle=d._guiRestyle,H._guiRelayout=d._guiRelayout,H._guiUpdate=d._guiUpdate,H._storeDirectGUIEdit=d._storeDirectGUIEdit,H.react=d.react,H.extendTraces=d.extendTraces,H.prependTraces=d.prependTraces,H.addTraces=d.addTraces,H.deleteTraces=d.deleteTraces,H.moveTraces=d.moveTraces,H.purge=d.purge,H.addFrames=d.addFrames,H.deleteFrames=d.deleteFrames,H.animate=d.animate,H.setPlotConfig=d.setPlotConfig,H.toImage=t("./to_image"),H.validate=t("./validate"),H.downloadImage=t("../snapshot/download");var l=t("./template_api");H.makeTemplate=l.makeTemplate,H.validateTemplate=l.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(t,B,H){var d=t("../lib/is_plain_object"),l=t("../lib/noop"),b=t("../lib/loggers"),w=t("../lib/search").sorterAsc,e=t("../registry");H.containerArrayMatch=t("./container_array_match");var o=H.isAddVal=function(r){return r==="add"||d(r)},a=H.isRemoveVal=function(r){return r===null||r==="remove"};H.applyContainerArrayChanges=function(r,u,s,i,f){var h=u.astr,p=e.getComponentMethod(h,"supplyLayoutDefaults"),v=e.getComponentMethod(h,"draw"),y=e.getComponentMethod(h,"drawOne"),g=i.replot||i.recalc||p===l||v===l,A=r.layout,m=r._fullLayout;if(s[""]){Object.keys(s).length>1&&b.warn("Full array edits are incompatible with other edits",h);var M=s[""][""];if(a(M))u.set(null);else if(Array.isArray(M))u.set(M);else return b.warn("Unrecognized full array edit value",h,M),!0;return g?!1:(p(A,m),v(r),!0)}var _=Object.keys(s).map(Number).sort(w),T=u.get(),x=T||[],c=f(m,h).get(),L=[],S=-1,k=x.length,P,z,I,R,D,O,F,Y;for(P=0;P<_.length;P++){if(I=_[P],R=s[I],D=Object.keys(R),O=R[""],F=o(O),I<0||I>x.length-(F?0:1)){b.warn("index out of range",h,I);continue}if(O!==void 0)D.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",h,I),a(O)?L.push(I):F?(O==="add"&&(O={}),x.splice(I,0,O),c&&c.splice(I,0,{})):b.warn("Unrecognized full object edit value",h,I,O),S===-1&&(S=I);else for(z=0;z<D.length;z++)Y=h+"["+I+"].",f(x[I],D[z],Y).set(R[D[z]])}for(P=L.length-1;P>=0;P--)x.splice(L[P],1),c&&c.splice(L[P],1);if(x.length?T||u.set(x):u.set(null),g)return!1;if(p(A,m),y!==l){var X;if(S===-1)X=_;else{for(k=Math.max(x.length,k),X=[],P=0;P<_.length&&(I=_[P],!(I>=S));P++)X.push(I);for(P=S;P<k;P++)X.push(P)}for(P=0;P<X.length;P++)y(r,X[P])}else v(r);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("has-hover"),w=t("../lib"),e=w.nestedProperty,o=t("../lib/events"),a=t("../lib/queue"),n=t("../registry"),r=t("./plot_schema"),u=t("../plots/plots"),s=t("../plots/cartesian/axes"),i=t("../components/drawing"),f=t("../components/color"),h=t("../plots/cartesian/graph_interact").initInteractions,p=t("../constants/xmlns_namespaces"),v=t("../plots/cartesian/select").clearSelect,y=t("./plot_config").dfltConfig,g=t("./manage_arrays"),A=t("./helpers"),m=t("./subroutines"),M=t("./edit_types"),_=t("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,x=5;function c(Ce,je,rt,ut){var Pt;if(Ce=w.getGraphDiv(Ce),o.init(Ce),w.isPlainObject(je)){var St=je;je=St.data,rt=St.layout,ut=St.config,Pt=St.frames}var Nt=o.triggerHandler(Ce,"plotly_beforeplot",[je,rt,ut]);if(Nt===!1)return Promise.reject();!je&&!rt&&!w.isPlotDiv(Ce)&&w.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ce);function Xt(){if(Pt)return H.addFrames(Ce,Pt)}z(Ce,ut),rt||(rt={}),d.select(Ce).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(Ce._promises)||(Ce._promises=[]);var Ot=(Ce.data||[]).length===0&&Array.isArray(je);Array.isArray(je)&&(A.cleanData(je),Ot?Ce.data=je:Ce.data.push.apply(Ce.data,je),Ce.empty=!1),(!Ce.layout||Ot)&&(Ce.layout=A.cleanLayout(rt)),u.supplyDefaults(Ce);var Kt=Ce._fullLayout,Je=Kt._has("cartesian");Kt._replotting=!0,(Ot||Kt._shouldCreateBgLayer)&&(Qe(Ce),Kt._shouldCreateBgLayer&&delete Kt._shouldCreateBgLayer),i.initGradients(Ce),i.initPatterns(Ce),Ot&&s.saveShowSpikeInitial(Ce);var gt=!Ce.calcdata||Ce.calcdata.length!==(Ce._fullData||[]).length;gt&&u.doCalcdata(Ce);for(var Et=0;Et<Ce.calcdata.length;Et++)Ce.calcdata[Et][0].trace=Ce._fullData[Et];Ce._context.responsive?Ce._responsiveChartHandler||(Ce._responsiveChartHandler=function(){w.isHidden(Ce)||u.resize(Ce)},window.addEventListener("resize",Ce._responsiveChartHandler)):w.clearResponsive(Ce);var rr=w.extendFlat({},Kt._size),vr=0;function or(){for(var De=Kt._basePlotModules,Xe=0;Xe<De.length;Xe++)De[Xe].drawFramework&&De[Xe].drawFramework(Ce);!Kt._glcanvas&&Kt._has("gl")&&(Kt._glcanvas=Kt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(pt){return pt.key}),Kt._glcanvas.enter().append("canvas").attr("class",function(pt){return"gl-canvas gl-canvas-"+pt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var $e=Ce._context.plotGlPixelRatio;if(Kt._glcanvas){Kt._glcanvas.attr("width",Kt.width*$e).attr("height",Kt.height*$e).style("width",Kt.width+"px").style("height",Kt.height+"px");var ot=Kt._glcanvas.data()[0].regl;if(ot&&(Math.floor(Kt.width*$e)!==ot._gl.drawingBufferWidth||Math.floor(Kt.height*$e)!==ot._gl.drawingBufferHeight)){var st="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(vr)w.error(st);else return w.log(st+" Clearing graph and plotting again."),u.cleanPlot([],{},Ce._fullData,Kt),u.supplyDefaults(Ce),Kt=Ce._fullLayout,u.doCalcdata(Ce),vr++,or()}}return Kt.modebar.orientation==="h"?Kt._modebardiv.style("height",null).style("width","100%"):Kt._modebardiv.style("width",null).style("height",Kt.height+"px"),u.previousPromises(Ce)}function dr(){if(u.clearAutoMarginIds(Ce),m.drawMarginPushers(Ce),s.allowAutoMargin(Ce),Kt._has("pie"))for(var De=Ce._fullData,Xe=0;Xe<De.length;Xe++){var $e=De[Xe];$e.type==="pie"&&$e.automargin&&u.allowAutoMargin(Ce,"pie."+$e.uid+".automargin")}return u.doAutoMargin(Ce),u.previousPromises(Ce)}function Lr(){if(!!u.didMarginChange(rr,Kt._size))return w.syncOrAsync([dr,m.layoutStyles],Ce)}function kr(){if(!gt){tr();return}return w.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),tr],Ce)}function tr(){Ce._transitioning||(m.doAutoRangeAndConstraints(Ce),Ot&&s.saveRangeInitial(Ce),n.getComponentMethod("rangeslider","calcAutorange")(Ce))}function Or(){return s.draw(Ce,Ot?"":"redraw")}var et=[u.previousPromises,Xt,or,dr,Lr];Je&&et.push(kr),et.push(m.layoutStyles),Je&&et.push(Or,function(Xe){Xe._fullLayout._insideTickLabelsAutorange&&ie(Xe,Xe._fullLayout._insideTickLabelsAutorange).then(function(){Xe._fullLayout._insideTickLabelsAutorange=void 0})}),et.push(m.drawData,m.finalDraw,h,u.addLinks,u.rehover,u.redrag,u.doAutoMargin,we,u.previousPromises);function we(De){De._fullLayout._insideTickLabelsAutorange&&Ot&&s.saveRangeInitial(De,!0)}var Se=w.syncOrAsync(et,Ce);return(!Se||!Se.then)&&(Se=Promise.resolve()),Se.then(function(){return L(Ce),Ce})}function L(Ce){var je=Ce._fullLayout;je._redrawFromAutoMarginCount?je._redrawFromAutoMarginCount--:Ce.emit("plotly_afterplot")}function S(Ce){return w.extendFlat(y,Ce)}function k(Ce,je){try{Ce._fullLayout._paper.style("background",je)}catch(rt){w.error(rt)}}function P(Ce,je){var rt=f.combine(je,"white");k(Ce,rt)}function z(Ce,je){if(!Ce._context){Ce._context=w.extendDeep({},y);var rt=d.select("base");Ce._context._baseUrl=rt.size()&&rt.attr("href")?window.location.href.split("#")[0]:""}var ut=Ce._context,Pt,St,Nt;if(je){for(St=Object.keys(je),Pt=0;Pt<St.length;Pt++)Nt=St[Pt],!(Nt==="editable"||Nt==="edits")&&Nt in ut&&(Nt==="setBackground"&&je[Nt]==="opaque"?ut[Nt]=P:ut[Nt]=je[Nt]);je.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var Xt=je.editable;if(Xt!==void 0)for(ut.editable=Xt,St=Object.keys(ut.edits),Pt=0;Pt<St.length;Pt++)ut.edits[St[Pt]]=Xt;if(je.edits)for(St=Object.keys(je.edits),Pt=0;Pt<St.length;Pt++)Nt=St[Pt],Nt in ut.edits&&(ut.edits[Nt]=je.edits[Nt]);ut._exportedPlot=je._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!b&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=k),ut._hasZeroHeight=ut._hasZeroHeight||Ce.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Ce.clientWidth===0;var Ot=ut.scrollZoom,Kt=ut._scrollZoom={};if(Ot===!0)Kt.cartesian=1,Kt.gl3d=1,Kt.geo=1,Kt.mapbox=1;else if(typeof Ot=="string"){var Je=Ot.split("+");for(Pt=0;Pt<Je.length;Pt++)Kt[Je[Pt]]=1}else Ot!==!1&&(Kt.gl3d=1,Kt.geo=1,Kt.mapbox=1)}function I(Ce){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);return A.cleanData(Ce.data),A.cleanLayout(Ce.layout),Ce.calcdata=void 0,H._doPlot(Ce).then(function(){return Ce.emit("plotly_redraw"),Ce})}function R(Ce,je,rt,ut){return Ce=w.getGraphDiv(Ce),u.cleanPlot([],{},Ce._fullData||[],Ce._fullLayout||{}),u.purge(Ce),H._doPlot(Ce,je,rt,ut)}function D(Ce,je){var rt=je+1,ut=[],Pt,St;for(Pt=0;Pt<Ce.length;Pt++)St=Ce[Pt],St<0?ut.push(rt+St):ut.push(St);return ut}function O(Ce,je,rt){var ut,Pt;for(ut=0;ut<je.length;ut++){if(Pt=je[ut],Pt!==parseInt(Pt,10))throw new Error("all values in "+rt+" must be integers");if(Pt>=Ce.data.length||Pt<-Ce.data.length)throw new Error(rt+" must be valid indices for gd.data.");if(je.indexOf(Pt,ut+1)>-1||Pt>=0&&je.indexOf(-Ce.data.length+Pt)>-1||Pt<0&&je.indexOf(Ce.data.length+Pt)>-1)throw new Error("each index in "+rt+" must be unique.")}}function F(Ce,je,rt){if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof je=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(je)||(je=[je]),O(Ce,je,"currentIndices"),typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&O(Ce,rt,"newIndices"),typeof rt!="undefined"&&je.length!==rt.length)throw new Error("current and new indices must be of equal length.")}function Y(Ce,je,rt){var ut,Pt;if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof je=="undefined")throw new Error("traces must be defined.");for(Array.isArray(je)||(je=[je]),ut=0;ut<je.length;ut++)if(Pt=je[ut],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&rt.length!==je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function X(Ce,je,rt,ut){var Pt=w.isPlainObject(ut);if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(je))throw new Error("update must be a key:value object");if(typeof rt=="undefined")throw new Error("indices must be an integer or array of integers");O(Ce,rt,"indices");for(var St in je){if(!Array.isArray(je[St])||je[St].length!==rt.length)throw new Error("attribute "+St+" must be an array of length equal to indices array length");if(Pt&&(!(St in ut)||!Array.isArray(ut[St])||ut[St].length!==je[St].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function q(Ce,je,rt,ut){var Pt=w.isPlainObject(ut),St=[],Nt,Xt,Ot,Kt,Je;Array.isArray(rt)||(rt=[rt]),rt=D(rt,Ce.data.length-1);for(var gt in je)for(var Et=0;Et<rt.length;Et++){if(Nt=Ce.data[rt[Et]],Ot=e(Nt,gt),Xt=Ot.get(),Kt=je[gt][Et],!w.isArrayOrTypedArray(Kt))throw new Error("attribute: "+gt+" index: "+Et+" must be an array");if(!w.isArrayOrTypedArray(Xt))throw new Error("cannot extend missing or non-array attribute: "+gt);if(Xt.constructor!==Kt.constructor)throw new Error("cannot extend array with an array of a different type: "+gt);Je=Pt?ut[gt][Et]:ut,l(Je)||(Je=-1),St.push({prop:Ot,target:Xt,insert:Kt,maxp:Math.floor(Je)})}return St}function $(Ce,je,rt,ut,Pt){X(Ce,je,rt,ut);for(var St=q(Ce,je,rt,ut),Nt={},Xt={},Ot=0;Ot<St.length;Ot++){var Kt=St[Ot].prop,Je=St[Ot].maxp,gt=Pt(St[Ot].target,St[Ot].insert,Je);Kt.set(gt[0]),Array.isArray(Nt[Kt.astr])||(Nt[Kt.astr]=[]),Nt[Kt.astr].push(gt[1]),Array.isArray(Xt[Kt.astr])||(Xt[Kt.astr]=[]),Xt[Kt.astr].push(St[Ot].target.length)}return{update:Nt,maxPoints:Xt}}function V(Ce,je){var rt=new Ce.constructor(Ce.length+je.length);return rt.set(Ce),rt.set(je,Ce.length),rt}function K(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce);function Pt(Ot,Kt,Je){var gt,Et;if(w.isTypedArray(Ot))if(Je<0){var rr=new Ot.constructor(0),vr=V(Ot,Kt);Je<0?(gt=vr,Et=rr):(gt=rr,Et=vr)}else if(gt=new Ot.constructor(Je),Et=new Ot.constructor(Ot.length+Kt.length-Je),Je===Kt.length)gt.set(Kt),Et.set(Ot);else if(Je<Kt.length){var or=Kt.length-Je;gt.set(Kt.subarray(or)),Et.set(Ot),Et.set(Kt.subarray(0,or),Ot.length)}else{var dr=Je-Kt.length,Lr=Ot.length-dr;gt.set(Ot.subarray(Lr)),gt.set(Kt,dr),Et.set(Ot.subarray(0,Lr))}else gt=Ot.concat(Kt),Et=Je>=0&&Je<gt.length?gt.splice(0,gt.length-Je):[];return[gt,Et]}var St=$(Ce,je,rt,ut,Pt),Nt=H.redraw(Ce),Xt=[Ce,St.update,rt,St.maxPoints];return a.add(Ce,H.prependTraces,Xt,K,arguments),Nt}function se(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce);function Pt(Ot,Kt,Je){var gt,Et;if(w.isTypedArray(Ot))if(Je<=0){var rr=new Ot.constructor(0),vr=V(Kt,Ot);Je<0?(gt=vr,Et=rr):(gt=rr,Et=vr)}else if(gt=new Ot.constructor(Je),Et=new Ot.constructor(Ot.length+Kt.length-Je),Je===Kt.length)gt.set(Kt),Et.set(Ot);else if(Je<Kt.length){var or=Kt.length-Je;gt.set(Kt.subarray(0,or)),Et.set(Kt.subarray(or)),Et.set(Ot,or)}else{var dr=Je-Kt.length;gt.set(Kt),gt.set(Ot.subarray(0,dr),Kt.length),Et.set(Ot.subarray(dr))}else gt=Kt.concat(Ot),Et=Je>=0&&Je<gt.length?gt.splice(Je,gt.length):[];return[gt,Et]}var St=$(Ce,je,rt,ut,Pt),Nt=H.redraw(Ce),Xt=[Ce,St.update,rt,St.maxPoints];return a.add(Ce,H.extendTraces,Xt,se,arguments),Nt}function ue(Ce,je,rt){Ce=w.getGraphDiv(Ce);var ut=[],Pt=H.deleteTraces,St=ue,Nt=[Ce,ut],Xt=[Ce,je],Ot,Kt;for(Y(Ce,je,rt),Array.isArray(je)||(je=[je]),je=je.map(function(Je){return w.extendFlat({},Je)}),A.cleanData(je),Ot=0;Ot<je.length;Ot++)Ce.data.push(je[Ot]);for(Ot=0;Ot<je.length;Ot++)ut.push(-je.length+Ot);if(typeof rt=="undefined")return Kt=H.redraw(Ce),a.add(Ce,Pt,Nt,St,Xt),Kt;Array.isArray(rt)||(rt=[rt]);try{F(Ce,ut,rt)}catch(Je){throw Ce.data.splice(Ce.data.length-je.length,je.length),Je}return a.startSequence(Ce),a.add(Ce,Pt,Nt,St,Xt),Kt=H.moveTraces(Ce,ut,rt),a.stopSequence(Ce),Kt}function oe(Ce,je){Ce=w.getGraphDiv(Ce);var rt=[],ut=H.addTraces,Pt=oe,St=[Ce,rt,je],Nt=[Ce,je],Xt,Ot;if(typeof je=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(je)||(je=[je]),O(Ce,je,"indices"),je=D(je,Ce.data.length-1),je.sort(w.sorterDes),Xt=0;Xt<je.length;Xt+=1)Ot=Ce.data.splice(je[Xt],1)[0],rt.push(Ot);var Kt=H.redraw(Ce);return a.add(Ce,ut,St,Pt,Nt),Kt}function U(Ce,je,rt){Ce=w.getGraphDiv(Ce);var ut=[],Pt=[],St=U,Nt=U,Xt=[Ce,rt,je],Ot=[Ce,je,rt],Kt;if(F(Ce,je,rt),je=Array.isArray(je)?je:[je],typeof rt=="undefined")for(rt=[],Kt=0;Kt<je.length;Kt++)rt.push(-je.length+Kt);for(rt=Array.isArray(rt)?rt:[rt],je=D(je,Ce.data.length-1),rt=D(rt,Ce.data.length-1),Kt=0;Kt<Ce.data.length;Kt++)je.indexOf(Kt)===-1&&ut.push(Ce.data[Kt]);for(Kt=0;Kt<je.length;Kt++)Pt.push({newIndex:rt[Kt],trace:Ce.data[je[Kt]]});for(Pt.sort(function(gt,Et){return gt.newIndex-Et.newIndex}),Kt=0;Kt<Pt.length;Kt+=1)ut.splice(Pt[Kt].newIndex,0,Pt[Kt].trace);Ce.data=ut;var Je=H.redraw(Ce);return a.add(Ce,St,Xt,Nt,Ot),Je}function G(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var Pt={};if(typeof je=="string")Pt[je]=rt;else if(w.isPlainObject(je))Pt=w.extendFlat({},je),ut===void 0&&(ut=rt);else return w.warn("Restyle fail.",je,rt,ut),Promise.reject();Object.keys(Pt).length&&(Ce.changed=!0);var St=A.coerceTraceIndices(Ce,ut),Nt=ne(Ce,Pt,St),Xt=Nt.flags;Xt.calc&&(Ce.calcdata=void 0),Xt.clearAxisTypes&&A.clearAxisTypes(Ce,St,{});var Ot=[];Xt.fullReplot?Ot.push(H._doPlot):(Ot.push(u.previousPromises),u.supplyDefaults(Ce),Xt.markerSize&&(u.doCalcdata(Ce),me(Ot)),Xt.style&&Ot.push(m.doTraceStyle),Xt.colorbars&&Ot.push(m.doColorBars),Ot.push(L)),Ot.push(u.rehover,u.redrag),a.add(Ce,G,[Ce,Nt.undoit,Nt.traces],G,[Ce,Nt.redoit,Nt.traces]);var Kt=w.syncOrAsync(Ot,Ce);return(!Kt||!Kt.then)&&(Kt=Promise.resolve()),Kt.then(function(){return Ce.emit("plotly_restyle",Nt.eventData),Ce})}function re(Ce){return Ce===void 0?null:Ce}function ee(Ce,je){return je?function(rt,ut,Pt){var St=e(rt,ut),Nt=St.set;return St.set=function(Xt){var Ot=(Pt||"")+ut;j(Ot,St.get(),Xt,Ce),Nt(Xt)},St}:e}function j(Ce,je,rt,ut){if(Array.isArray(je)||Array.isArray(rt))for(var Pt=Array.isArray(je)?je:[],St=Array.isArray(rt)?rt:[],Nt=Math.max(Pt.length,St.length),Xt=0;Xt<Nt;Xt++)j(Ce+"["+Xt+"]",Pt[Xt],St[Xt],ut);else if(w.isPlainObject(je)||w.isPlainObject(rt)){var Ot=w.isPlainObject(je)?je:{},Kt=w.isPlainObject(rt)?rt:{},Je=w.extendFlat({},Ot,Kt);for(var gt in Je)j(Ce+"."+gt,Ot[gt],Kt[gt],ut)}else ut[Ce]===void 0&&(ut[Ce]=re(je))}function Q(Ce,je,rt){for(var ut in rt){var Pt=e(Ce,ut);j(ut,Pt.get(),rt[ut],je)}}function ne(Ce,je,rt){var ut=Ce._fullLayout,Pt=Ce._fullData,St=Ce.data,Nt=ut._guiEditing,Xt=ee(ut._preGUI,Nt),Ot=w.extendDeepAll({},je),Kt;ae(je);var Je=M.traceFlags(),gt={},Et={},rr;function vr(){return rt.map(function(){})}function or(er){var hr=s.id2name(er);rr.indexOf(hr)===-1&&rr.push(hr)}function dr(er){return"LAYOUT"+er+".autorange"}function Lr(er){return"LAYOUT"+er+".range"}function kr(er){for(var hr=er;hr<Pt.length;hr++)if(Pt[hr]._input===St[er])return Pt[hr]}function tr(er,hr,Yr){if(Array.isArray(er)){er.forEach(function(jr){tr(jr,hr,Yr)});return}if(!(er in je||A.hasParent(je,er))){var zr;if(er.substr(0,6)==="LAYOUT")zr=Xt(Ce.layout,er.replace("LAYOUT",""));else{var Pr=rt[Yr],br=ut._tracePreGUI[kr(Pr)._fullInput.uid];zr=ee(br,Nt)(St[Pr],er)}er in Et||(Et[er]=vr()),Et[er][Yr]===void 0&&(Et[er][Yr]=re(zr.get())),hr!==void 0&&zr.set(hr)}}function Or(er){return function(hr){return Pt[hr][er]}}function et(er){return function(hr,Yr){return hr===!1?Pt[rt[Yr]][er]:null}}for(var we in je){if(A.hasParent(je,we))throw new Error("cannot set "+we+" and a parent attribute simultaneously");var Se=je[we],De,Xe,$e,ot,st,pt;if((we==="autobinx"||we==="autobiny")&&(we=we.charAt(we.length-1)+"bins",Array.isArray(Se)?Se=Se.map(et(we)):Se===!1?Se=rt.map(Or(we)):Se=null),gt[we]=Se,we.substr(0,6)==="LAYOUT"){$e=Xt(Ce.layout,we.replace("LAYOUT","")),Et[we]=[re($e.get())],$e.set(Array.isArray(Se)?Se[0]:Se),Je.calc=!0;continue}for(Et[we]=vr(),Kt=0;Kt<rt.length;Kt++){De=St[rt[Kt]],Xe=kr(rt[Kt]);var wt=ut._tracePreGUI[Xe._fullInput.uid];if($e=ee(wt,Nt)(De,we),ot=$e.get(),st=Array.isArray(Se)?Se[Kt%Se.length]:Se,st!==void 0){var Yt=$e.parts[$e.parts.length-1],mr=we.substr(0,we.length-Yt.length-1),xr=mr?mr+".":"",Tr=mr?e(Xe,mr).get():Xe;if(pt=r.getTraceValObject(Xe,$e.parts),pt&&pt.impliedEdits&&st!==null)for(var yr in pt.impliedEdits)tr(w.relativeAttr(we,yr),pt.impliedEdits[yr],Kt);else if((Yt==="thicknessmode"||Yt==="lenmode")&&ot!==st&&(st==="fraction"||st==="pixels")&&Tr){var Dr=ut._size,tn=Tr.orient,wr=tn==="top"||tn==="bottom";if(Yt==="thicknessmode"){var gr=wr?Dr.h:Dr.w;tr(xr+"thickness",Tr.thickness*(st==="fraction"?1/gr:gr),Kt)}else{var yn=wr?Dr.w:Dr.h;tr(xr+"len",Tr.len*(st==="fraction"?1/yn:yn),Kt)}}else if(we==="type"&&(st==="pie"!=(ot==="pie")||st==="funnelarea"!=(ot==="funnelarea"))){var Gr="x",Ar="y";(st==="bar"||ot==="bar")&&De.orientation==="h"&&(Gr="y",Ar="x"),w.swapAttrs(De,["?","?src"],"labels",Gr),w.swapAttrs(De,["d?","?0"],"label",Gr),w.swapAttrs(De,["?","?src"],"values",Ar),ot==="pie"||ot==="funnelarea"?(e(De,"marker.color").set(e(De,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):n.traceIs(De,"cartesian")&&e(De,"marker.colors").set(e(De,"marker.color").get())}Et[we][Kt]=re(ot);var nn=["swapxy","swapxyaxes","orientation","orientationaxes"];if(nn.indexOf(we)!==-1){if(we==="orientation"){$e.set(st);var fn=De.x&&!De.y?"h":"v";if(($e.get()||fn)===Xe.orientation)continue}else we==="orientationaxes"&&(De.orientation={v:"h",h:"v"}[Xe.orientation]);A.swapXYData(De),Je.calc=Je.clearAxisTypes=!0}else u.dataArrayContainers.indexOf($e.parts[0])!==-1?(A.manageArrayContainers($e,st,Et),Je.calc=!0):(pt?pt.arrayOk&&!n.traceIs(Xe,"regl")&&(w.isArrayOrTypedArray(st)||w.isArrayOrTypedArray(ot))?Je.calc=!0:M.update(Je,pt):Je.calc=!0,$e.set(st))}}if(["swapxyaxes","orientationaxes"].indexOf(we)!==-1&&s.swap(Ce,rt),we==="orientationaxes"){var Xr=e(Ce.layout,"hovermode"),at=Xr.get();at==="x"?Xr.set("y"):at==="y"?Xr.set("x"):at==="x unified"?Xr.set("y unified"):at==="y unified"&&Xr.set("x unified")}if(["orientation","type"].indexOf(we)!==-1){for(rr=[],Kt=0;Kt<rt.length;Kt++){var Ft=St[rt[Kt]];n.traceIs(Ft,"cartesian")&&(or(Ft.xaxis||"x"),or(Ft.yaxis||"y"))}tr(rr.map(dr),!0,0),tr(rr.map(Lr),[0,1],0)}}return(Je.calc||Je.plot)&&(Je.fullReplot=!0),{flags:Je,undoit:Et,redoit:gt,traces:rt,eventData:w.extendDeepNoArrays([],[Ot,rt])}}function ae(Ce){var je=w.counterRegex("axis",".title",!1,!1),rt=/colorbar\.title$/,ut=Object.keys(Ce),Pt,St,Nt;for(Pt=0;Pt<ut.length;Pt++)St=ut[Pt],Nt=Ce[St],(St==="title"||je.test(St)||rt.test(St))&&(typeof Nt=="string"||typeof Nt=="number")?Xt(St,St.replace("title","title.text")):St.indexOf("titlefont")>-1&&St.indexOf("grouptitlefont")===-1?Xt(St,St.replace("titlefont","title.font")):St.indexOf("titleposition")>-1?Xt(St,St.replace("titleposition","title.position")):St.indexOf("titleside")>-1?Xt(St,St.replace("titleside","title.side")):St.indexOf("titleoffset")>-1&&Xt(St,St.replace("titleoffset","title.offset"));function Xt(Ot,Kt){Ce[Kt]=Ce[Ot],delete Ce[Ot]}}function ie(Ce,je,rt){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var ut={};if(typeof je=="string")ut[je]=rt;else if(w.isPlainObject(je))ut=w.extendFlat({},je);else return w.warn("Relayout fail.",je,rt),Promise.reject();Object.keys(ut).length&&(Ce.changed=!0);var Pt=ke(Ce,ut),St=Pt.flags;St.calc&&(Ce.calcdata=void 0);var Nt=[u.previousPromises];St.layoutReplot?Nt.push(m.layoutReplot):Object.keys(ut).length&&(fe(Ce,St,Pt)||u.supplyDefaults(Ce),St.legend&&Nt.push(m.doLegend),St.layoutstyle&&Nt.push(m.layoutStyles),St.axrange&&me(Nt,Pt.rangesAltered),St.ticks&&Nt.push(m.doTicksRelayout),St.modebar&&Nt.push(m.doModeBar),St.camera&&Nt.push(m.doCamera),St.colorbars&&Nt.push(m.doColorBars),Nt.push(L)),Nt.push(u.rehover,u.redrag),a.add(Ce,ie,[Ce,Pt.undoit],ie,[Ce,Pt.redoit]);var Xt=w.syncOrAsync(Nt,Ce);return(!Xt||!Xt.then)&&(Xt=Promise.resolve(Ce)),Xt.then(function(){return Ce.emit("plotly_relayout",Pt.eventData),Ce})}function fe(Ce,je,rt){var ut=Ce._fullLayout;if(!je.axrange)return!1;for(var Pt in je)if(Pt!=="axrange"&&je[Pt])return!1;for(var St in rt.rangesAltered){var Nt=s.id2name(St),Xt=Ce.layout[Nt],Ot=ut[Nt];if(Ot.autorange=Xt.autorange,Xt.range&&(Ot.range=Xt.range.slice()),Ot.cleanRange(),Ot._matchGroup){for(var Kt in Ot._matchGroup)if(Kt!==St){var Je=ut[s.id2name(Kt)];Je.autorange=Ot.autorange,Je.range=Ot.range.slice(),Je._input.range=Ot.range.slice()}}}return!0}function me(Ce,je){var rt=je?function(ut){var Pt=[],St=!0;for(var Nt in je){var Xt=s.getFromId(ut,Nt);if(Pt.push(Nt),(Xt.ticklabelposition||"").indexOf("inside")!==-1&&Xt._anchorAxis&&Pt.push(Xt._anchorAxis._id),Xt._matchGroup)for(var Ot in Xt._matchGroup)je[Ot]||Pt.push(Ot);Xt.automargin&&(St=!1)}return s.draw(ut,Pt,{skipTitle:St})}:function(ut){return s.draw(ut,"redraw")};Ce.push(v,m.doAutoRangeAndConstraints,rt,m.drawData,m.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ye=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ke(Ce,je){var rt=Ce.layout,ut=Ce._fullLayout,Pt=ut._guiEditing,St=ee(ut._preGUI,Pt),Nt=Object.keys(je),Xt=s.list(Ce),Ot=w.extendDeepAll({},je),Kt={},Je,gt,Et;for(ae(je),Nt=Object.keys(je),gt=0;gt<Nt.length;gt++)if(Nt[gt].indexOf("allaxes")===0){for(Et=0;Et<Xt.length;Et++){var rr=Xt[Et]._id.substr(1),vr=rr.indexOf("scene")!==-1?rr+".":"",or=Nt[gt].replace("allaxes",vr+Xt[Et]._name);je[or]||(je[or]=je[Nt[gt]])}delete je[Nt[gt]]}var dr=M.layoutFlags(),Lr={},kr={};function tr(Pr,br){if(Array.isArray(Pr)){Pr.forEach(function(zn){tr(zn,br)});return}if(!(Pr in je||A.hasParent(je,Pr))){var jr=St(rt,Pr);Pr in kr||(kr[Pr]=re(jr.get())),br!==void 0&&jr.set(br)}}var Or={},et;function we(Pr){var br=s.name2id(Pr.split(".")[0]);return Or[br]=1,br}for(var Se in je){if(A.hasParent(je,Se))throw new Error("cannot set "+Se+" and a parent attribute simultaneously");for(var De=St(rt,Se),Xe=je[Se],$e=De.parts.length,ot=$e-1;ot>0&&typeof De.parts[ot]!="string";)ot--;var st=De.parts[ot],pt=De.parts[ot-1]+"."+st,wt=De.parts.slice(0,ot).join("."),Yt=e(Ce.layout,wt).get(),mr=e(ut,wt).get(),xr=De.get();if(Xe!==void 0){Lr[Se]=Xe,kr[Se]=st==="reverse"?Xe:re(xr);var Tr=r.getLayoutValObject(ut,De.parts);if(Tr&&Tr.impliedEdits&&Xe!==null)for(var yr in Tr.impliedEdits)tr(w.relativeAttr(Se,yr),Tr.impliedEdits[yr]);if(["width","height"].indexOf(Se)!==-1)if(Xe){tr("autosize",null);var Dr=Se==="height"?"width":"height";tr(Dr,ut[Dr])}else ut[Se]=Ce._initialAutoSize[Se];else if(Se==="autosize")tr("width",Xe?null:ut.width),tr("height",Xe?null:ut.height);else if(pt.match(ce))we(pt),e(ut,wt+"._inputRange").set(null);else if(pt.match(ye)){we(pt),e(ut,wt+"._inputRange").set(null);var tn=e(ut,wt).get();tn._inputDomain&&(tn._input.domain=tn._inputDomain.slice())}else pt.match(xe)&&e(ut,wt+"._inputDomain").set(null);if(st==="type"){et=Yt;var wr=mr.type==="linear"&&Xe==="log",gr=mr.type==="log"&&Xe==="linear";if(wr||gr){if(!et||!et.range)tr(wt+".autorange",!0);else if(mr.autorange)wr&&(et.range=et.range[1]>et.range[0]?[1,2]:[2,1]);else{var yn=et.range[0],Gr=et.range[1];wr?(yn<=0&&Gr<=0&&tr(wt+".autorange",!0),yn<=0?yn=Gr/1e6:Gr<=0&&(Gr=yn/1e6),tr(wt+".range[0]",Math.log(yn)/Math.LN10),tr(wt+".range[1]",Math.log(Gr)/Math.LN10)):(tr(wt+".range[0]",Math.pow(10,yn)),tr(wt+".range[1]",Math.pow(10,Gr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[De.parts[0]]&&De.parts[1]==="radialaxis"&&delete ut[De.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Ce,mr,Xe,tr),n.getComponentMethod("images","convertCoords")(Ce,mr,Xe,tr)}else tr(wt+".autorange",!0),tr(wt+".range",null);e(ut,wt+"._inputRange").set(null)}else if(st.match(_)){var Ar=e(ut,Se).get(),nn=(Xe||{}).type;(!nn||nn==="-")&&(nn="linear"),n.getComponentMethod("annotations","convertCoords")(Ce,Ar,nn,tr),n.getComponentMethod("images","convertCoords")(Ce,Ar,nn,tr)}var fn=g.containerArrayMatch(Se);if(fn){Je=fn.array,gt=fn.index;var Xr=fn.property,at=Tr||{editType:"calc"};gt!==""&&Xr===""&&(g.isAddVal(Xe)?kr[Se]=null:g.isRemoveVal(Xe)?kr[Se]=(e(rt,Je).get()||[])[gt]:w.warn("unrecognized full object value",je)),M.update(dr,at),Kt[Je]||(Kt[Je]={});var Ft=Kt[Je][gt];Ft||(Ft=Kt[Je][gt]={}),Ft[Xr]=Xe,delete je[Se]}else st==="reverse"?(Yt.range?Yt.range.reverse():(tr(wt+".autorange",!0),Yt.range=[1,0]),mr.autorange?dr.calc=!0:dr.plot=!0):(ut._has("scatter-like")&&ut._has("regl")&&Se==="dragmode"&&(Xe==="lasso"||Xe==="select")&&!(xr==="lasso"||xr==="select")||ut._has("gl2d")?dr.plot=!0:Tr?M.update(dr,Tr):dr.calc=!0,De.set(Xe))}}for(Je in Kt){var er=g.applyContainerArrayChanges(Ce,St(rt,Je),Kt[Je],dr,St);er||(dr.plot=!0)}for(var hr in Or){et=s.getFromId(Ce,hr);var Yr=et&&et._constraintGroup;if(Yr){dr.calc=!0;for(var zr in Yr)Or[zr]||(s.getFromId(Ce,zr)._constraintShrinkable=!0)}}return(Ae(Ce)||je.height||je.width)&&(dr.plot=!0),(dr.plot||dr.calc)&&(dr.layoutReplot=!0),{flags:dr,rangesAltered:Or,undoit:kr,redoit:Lr,eventData:Ot}}function Ae(Ce){var je=Ce._fullLayout,rt=je.width,ut=je.height;return Ce.layout.autosize&&u.plotAutoSize(Ce,Ce.layout,je),je.width!==rt||je.height!==ut}function Oe(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce),w.isPlainObject(je)||(je={}),w.isPlainObject(rt)||(rt={}),Object.keys(je).length&&(Ce.changed=!0),Object.keys(rt).length&&(Ce.changed=!0);var Pt=A.coerceTraceIndices(Ce,ut),St=ne(Ce,w.extendFlat({},je),Pt),Nt=St.flags,Xt=ke(Ce,w.extendFlat({},rt)),Ot=Xt.flags;(Nt.calc||Ot.calc)&&(Ce.calcdata=void 0),Nt.clearAxisTypes&&A.clearAxisTypes(Ce,Pt,rt);var Kt=[];Ot.layoutReplot?Kt.push(m.layoutReplot):Nt.fullReplot?Kt.push(H._doPlot):(Kt.push(u.previousPromises),fe(Ce,Ot,Xt)||u.supplyDefaults(Ce),Nt.style&&Kt.push(m.doTraceStyle),(Nt.colorbars||Ot.colorbars)&&Kt.push(m.doColorBars),Ot.legend&&Kt.push(m.doLegend),Ot.layoutstyle&&Kt.push(m.layoutStyles),Ot.axrange&&me(Kt,Xt.rangesAltered),Ot.ticks&&Kt.push(m.doTicksRelayout),Ot.modebar&&Kt.push(m.doModeBar),Ot.camera&&Kt.push(m.doCamera),Kt.push(L)),Kt.push(u.rehover,u.redrag),a.add(Ce,Oe,[Ce,St.undoit,Xt.undoit,St.traces],Oe,[Ce,St.redoit,Xt.redoit,St.traces]);var Je=w.syncOrAsync(Kt,Ce);return(!Je||!Je.then)&&(Je=Promise.resolve(Ce)),Je.then(function(){return Ce.emit("plotly_update",{data:St.eventData,layout:Xt.eventData}),Ce})}function He(Ce){return function(rt){rt._fullLayout._guiEditing=!0;var ut=Ce.apply(null,arguments);return rt._fullLayout._guiEditing=!1,ut}}var Ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ie(Ce,je){for(var rt=0;rt<je.length;rt++){var ut=je[rt],Pt=Ce.match(ut.pattern);if(Pt){var St=Pt[1]||"";return{head:St,tail:Ce.substr(St.length+1),attr:ut.attr}}}}function Ye(Ce,je){var rt=e(je,Ce).get();if(rt!==void 0)return rt;var ut=Ce.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),rt=e(je,ut.join(".")+".uirevision").get(),rt!==void 0)return rt;return je.uirevision}function qe(Ce,je){for(var rt=0;rt<je.length;rt++)if(je[rt]._fullInput.uid===Ce)return rt;return-1}function Ue(Ce,je,rt){for(var ut=0;ut<je.length;ut++)if(je[ut].uid===Ce)return ut;return!je[rt]||je[rt].uid?-1:rt}function Re(Ce,je){var rt=w.isPlainObject(Ce),ut=Array.isArray(Ce);return rt||ut?(rt&&w.isPlainObject(je)||ut&&Array.isArray(je))&&JSON.stringify(Ce)===JSON.stringify(je):Ce===je}function Ve(Ce,je,rt,ut){var Pt=ut._preGUI,St,Nt,Xt,Ot,Kt,Je,gt,Et,rr,vr,or=[],dr={},Lr={};for(St in Pt){if(Kt=Ie(St,Ge),Kt){if(rr=Kt.head,vr=Kt.tail,Nt=Kt.attr||rr+".uirevision",Xt=e(ut,Nt).get(),Ot=Xt&&Ye(Nt,je),Ot&&Ot===Xt){if(Je=Pt[St],Je===null&&(Je=void 0),gt=e(je,St),Et=gt.get(),Re(Et,Je)){Et===void 0&&vr==="autorange"&&or.push(rr),gt.set(re(e(ut,St).get()));continue}else if(vr==="autorange"||vr.substr(0,6)==="range["){var kr=Pt[rr+".range[0]"],tr=Pt[rr+".range[1]"],Or=Pt[rr+".autorange"];if(Or||Or===null&&kr===null&&tr===null){if(!(rr in dr)){var et=e(je,rr).get();dr[rr]=et&&(et.autorange||et.autorange!==!1&&(!et.range||et.range.length!==2))}if(dr[rr]){gt.set(re(e(ut,St).get()));continue}}}}}else w.warn("unrecognized GUI edit: "+St);delete Pt[St],Kt&&Kt.tail.substr(0,6)==="range["&&(Lr[Kt.head]=1)}for(var we=0;we<or.length;we++){var Se=or[we];if(Lr[Se]){var De=e(je,Se).get();De&&delete De.autorange}}var Xe=ut._tracePreGUI;for(var $e in Xe){var ot=Xe[$e],st=null,pt;for(St in ot){if(!st){var wt=qe($e,rt);if(wt<0){delete Xe[$e];break}var Yt=rt[wt];pt=Yt._fullInput;var mr=Ue($e,Ce,pt.index);if(mr<0){delete Xe[$e];break}st=Ce[mr]}if(Kt=Ie(St,_e),Kt){if(Kt.attr?(Xt=e(ut,Kt.attr).get(),Ot=Xt&&Ye(Kt.attr,je)):(Xt=pt.uirevision,Ot=st.uirevision,Ot===void 0&&(Ot=je.uirevision)),Ot&&Ot===Xt&&(Je=ot[St],Je===null&&(Je=void 0),gt=e(st,St),Et=gt.get(),Re(Et,Je))){gt.set(re(e(pt,St).get()));continue}}else w.warn("unrecognized GUI edit: "+St+" in trace uid "+$e);delete ot[St]}}}function dt(Ce,je,rt,ut){var Pt,St;function Nt(){return H.addFrames(Ce,Pt)}Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var Xt=Ce._fullData,Ot=Ce._fullLayout;if(!w.isPlotDiv(Ce)||!Xt||!Ot)St=H.newPlot(Ce,je,rt,ut);else{if(w.isPlainObject(je)){var Kt=je;je=Kt.data,rt=Kt.layout,ut=Kt.config,Pt=Kt.frames}var Je=!1;if(ut){var gt=w.extendDeep({},Ce._context);Ce._context=void 0,z(Ce,ut),Je=zt(gt,Ce._context)}Ce.data=je||[],A.cleanData(Ce.data),Ce.layout=rt||{},A.cleanLayout(Ce.layout),Ve(Ce.data,Ce.layout,Xt,Ot),u.supplyDefaults(Ce,{skipUpdateCalc:!0});var Et=Ce._fullData,rr=Ce._fullLayout,vr=rr.datarevision===void 0,or=rr.transition,dr=Gt(Ce,Ot,rr,vr,or),Lr=dr.newDataRevision,kr=Dt(Ce,Xt,Et,vr,or,Lr);if(Ae(Ce)&&(dr.layoutReplot=!0),kr.calc||dr.calc){Ce.calcdata=void 0;for(var tr=Object.getOwnPropertyNames(rr),Or=0;Or<tr.length;Or++){var et=tr[Or],we=et.substring(0,5);if(we==="xaxis"||we==="yaxis"){var Se=rr[et]._emptyCategories;Se&&Se()}}}else u.supplyDefaultsUpdateCalc(Ce.calcdata,Et);var De=[];if(Pt&&(Ce._transitionData={},u.createTransitionData(Ce),De.push(Nt)),rr.transition&&!Je&&(kr.anim||dr.anim))dr.ticks&&De.push(m.doTicksRelayout),u.doCalcdata(Ce),m.doAutoRangeAndConstraints(Ce),De.push(function(){return u.transitionFromReact(Ce,kr,dr,Ot)});else if(kr.fullReplot||dr.layoutReplot||Je)Ce._fullLayout._skipDefaults=!0,De.push(H._doPlot);else{for(var Xe in dr.arrays){var $e=dr.arrays[Xe];if($e.length){var ot=n.getComponentMethod(Xe,"drawOne");if(ot!==w.noop)for(var st=0;st<$e.length;st++)ot(Ce,$e[st]);else{var pt=n.getComponentMethod(Xe,"draw");if(pt===w.noop)throw new Error("cannot draw components: "+Xe);pt(Ce)}}}De.push(u.previousPromises),kr.style&&De.push(m.doTraceStyle),(kr.colorbars||dr.colorbars)&&De.push(m.doColorBars),dr.legend&&De.push(m.doLegend),dr.layoutstyle&&De.push(m.layoutStyles),dr.axrange&&me(De),dr.ticks&&De.push(m.doTicksRelayout),dr.modebar&&De.push(m.doModeBar),dr.camera&&De.push(m.doCamera),De.push(L)}De.push(u.rehover,u.redrag),St=w.syncOrAsync(De,Ce),(!St||!St.then)&&(St=Promise.resolve(Ce))}return St.then(function(){return Ce.emit("plotly_react",{data:je,layout:rt}),Ce})}function Dt(Ce,je,rt,ut,Pt,St){var Nt=je.length===rt.length;if(!Pt&&!Nt)return{fullReplot:!0,calc:!0};var Xt=M.traceFlags();Xt.arrays={},Xt.nChanges=0,Xt.nChangesAnim=0;var Ot,Kt;function Je(rr){var vr=r.getTraceValObject(Kt,rr);return!Kt._module.animatable&&vr.anim&&(vr.anim=!1),vr}var gt={getValObject:Je,flags:Xt,immutable:ut,transition:Pt,newDataRevision:St,gd:Ce},Et={};for(Ot=0;Ot<je.length;Ot++)if(rt[Ot]){if(Kt=rt[Ot]._fullInput,u.hasMakesDataTransform(Kt)&&(Kt=rt[Ot]),Et[Kt.uid])continue;Et[Kt.uid]=1,kt(je[Ot]._fullInput,Kt,[],gt)}return(Xt.calc||Xt.plot)&&(Xt.fullReplot=!0),Pt&&Xt.nChanges&&Xt.nChangesAnim&&(Xt.anim=Xt.nChanges===Xt.nChangesAnim&&Nt?"all":"some"),Xt}function Gt(Ce,je,rt,ut,Pt){var St=M.layoutFlags();St.arrays={},St.rangesAltered={},St.nChanges=0,St.nChangesAnim=0;function Nt(Ot){return r.getLayoutValObject(rt,Ot)}var Xt={getValObject:Nt,flags:St,immutable:ut,transition:Pt,gd:Ce};return kt(je,rt,[],Xt),(St.plot||St.calc)&&(St.layoutReplot=!0),Pt&&St.nChanges&&St.nChangesAnim&&(St.anim=St.nChanges===St.nChangesAnim?"all":"some"),St}function kt(Ce,je,rt,ut){var Pt,St,Nt,Xt=ut.getValObject,Ot=ut.flags,Kt=ut.immutable,Je=ut.inArray,gt=ut.arrayIndex;function Et(){var wt=Pt.editType;if(Je&&wt.indexOf("arraydraw")!==-1){w.pushUnique(Ot.arrays[Je],gt);return}M.update(Ot,Pt),wt!=="none"&&Ot.nChanges++,ut.transition&&Pt.anim&&Ot.nChangesAnim++,(ce.test(Nt)||ye.test(Nt))&&(Ot.rangesAltered[rt[0]]=1),xe.test(Nt)&&e(je,"_inputDomain").set(null),St==="datarevision"&&(Ot.newDataRevision=1)}function rr(wt){return wt.valType==="data_array"||wt.arrayOk}for(St in Ce){if(Ot.calc&&!ut.transition)return;var vr=Ce[St],or=je[St],dr=rt.concat(St);if(Nt=dr.join("."),!(St.charAt(0)==="_"||typeof vr=="function"||vr===or)){if((St==="tick0"||St==="dtick")&&rt[0]!=="geo"){var Lr=je.tickmode;if(Lr==="auto"||Lr==="array"||!Lr)continue}if(!(St==="range"&&je.autorange)&&!((St==="zmin"||St==="zmax")&&je.type==="contourcarpet")&&(Pt=Xt(dr),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(vr)===JSON.stringify(or)))){var kr=Pt.valType,tr,Or=rr(Pt),et=Array.isArray(vr),we=Array.isArray(or);if(et&&we){var Se="_input_"+St,De=Ce[Se],Xe=je[Se];if(Array.isArray(De)&&De===Xe)continue}if(or===void 0)Or&&et?Ot.calc=!0:Et();else if(Pt._isLinkedToArray){var $e=[],ot=!1;Je||(Ot.arrays[St]=$e);var st=Math.min(vr.length,or.length),pt=Math.max(vr.length,or.length);if(st!==pt)if(Pt.editType==="arraydraw")ot=!0;else{Et();continue}for(tr=0;tr<st;tr++)kt(vr[tr],or[tr],dr.concat(tr),w.extendFlat({inArray:St,arrayIndex:tr},ut));if(ot)for(tr=st;tr<pt;tr++)$e.push(tr)}else!kr&&w.isPlainObject(vr)?kt(vr,or,dr,ut):Or?et&&we?(Kt&&(Ot.calc=!0),(Kt||ut.newDataRevision)&&Et()):et!==we?Ot.calc=!0:Et():et&&we?(vr.length!==or.length||String(vr)!==String(or))&&Et():Et()}}}for(St in je)if(!(St in Ce||St.charAt(0)==="_"||typeof je[St]=="function"))if(Pt=Xt(rt.concat(St)),rr(Pt)&&Array.isArray(je[St])){Ot.calc=!0;return}else Et()}function zt(Ce,je){var rt;for(rt in Ce)if(rt.charAt(0)!=="_"){var ut=Ce[rt],Pt=je[rt];if(ut!==Pt)if(w.isPlainObject(ut)&&w.isPlainObject(Pt)){if(zt(ut,Pt))return!0}else if(Array.isArray(ut)&&Array.isArray(Pt)){if(ut.length!==Pt.length)return!0;for(var St=0;St<ut.length;St++)if(ut[St]!==Pt[St])if(w.isPlainObject(ut[St])&&w.isPlainObject(Pt[St])){if(zt(ut[St],Pt[St]))return!0}else return!0}else return!0}}function Bt(Ce,je,rt){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Ce._transitionData;ut._frameQueue||(ut._frameQueue=[]),rt=u.supplyAnimationDefaults(rt);var Pt=rt.transition,St=rt.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function Nt(Kt){return Array.isArray(Pt)?Kt>=Pt.length?Pt[0]:Pt[Kt]:Pt}function Xt(Kt){return Array.isArray(St)?Kt>=St.length?St[0]:St[Kt]:St}function Ot(Kt,Je){var gt=0;return function(){if(Kt&&++gt===Je)return Kt()}}return new Promise(function(Kt,Je){function gt(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var st=ut._frameQueue.pop();st.onInterrupt&&st.onInterrupt()}Ce.emit("plotly_animationinterrupted",[])}}function Et(st){if(st.length!==0){for(var pt=0;pt<st.length;pt++){var wt;st[pt].type==="byname"?wt=u.computeFrame(Ce,st[pt].name):wt=st[pt].data;var Yt=Xt(pt),mr=Nt(pt);mr.duration=Math.min(mr.duration,Yt.duration);var xr={frame:wt,name:st[pt].name,frameOpts:Yt,transitionOpts:mr};pt===st.length-1&&(xr.onComplete=Ot(Kt,2),xr.onInterrupt=Je),ut._frameQueue.push(xr)}rt.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||or()}}function rr(){Ce.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function vr(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var st=ut._currentFrame=ut._frameQueue.shift();if(st){var pt=st.name?st.name.toString():null;Ce._fullLayout._currentFrame=pt,ut._lastFrameAt=Date.now(),ut._timeToNext=st.frameOpts.duration,u.transition(Ce,st.frame.data,st.frame.layout,A.coerceTraceIndices(Ce,st.frame.traces),st.frameOpts,st.transitionOpts).then(function(){st.onComplete&&st.onComplete()}),Ce.emit("plotly_animatingframe",{name:pt,frame:st.frame,animation:{frame:st.frameOpts,transition:st.transitionOpts}})}else rr()}function or(){Ce.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var st=function(){ut._animationRaf=window.requestAnimationFrame(st),Date.now()-ut._lastFrameAt>ut._timeToNext&&vr()};st()}var dr=0;function Lr(st){return Array.isArray(Pt)?dr>=Pt.length?st.transitionOpts=Pt[dr]:st.transitionOpts=Pt[0]:st.transitionOpts=Pt,dr++,st}var kr,tr,Or=[],et=je==null,we=Array.isArray(je),Se=!et&&!we&&w.isPlainObject(je);if(Se)Or.push({type:"object",data:Lr(w.extendFlat({},je))});else if(et||["string","number"].indexOf(typeof je)!==-1)for(kr=0;kr<ut._frames.length;kr++)tr=ut._frames[kr],!!tr&&(et||String(tr.group)===String(je))&&Or.push({type:"byname",name:String(tr.name),data:Lr({name:tr.name})});else if(we)for(kr=0;kr<je.length;kr++){var De=je[kr];["number","string"].indexOf(typeof De)!==-1?(De=String(De),Or.push({type:"byname",name:De,data:Lr({name:De})})):w.isPlainObject(De)&&Or.push({type:"object",data:Lr(w.extendFlat({},De))})}for(kr=0;kr<Or.length;kr++)if(tr=Or[kr],tr.type==="byname"&&!ut._frameHash[tr.data.name]){w.warn('animate failure: frame not found: "'+tr.data.name+'"'),Je();return}["next","immediate"].indexOf(rt.mode)!==-1&&gt(),rt.direction==="reverse"&&Or.reverse();var Xe=Ce._fullLayout._currentFrame;if(Xe&&rt.fromcurrent){var $e=-1;for(kr=0;kr<Or.length;kr++)if(tr=Or[kr],tr.type==="byname"&&tr.name===Xe){$e=kr;break}if($e>0&&$e<Or.length-1){var ot=[];for(kr=0;kr<Or.length;kr++)tr=Or[kr],(Or[kr].type!=="byname"||kr>$e)&&ot.push(tr);Or=ot}}Or.length>0?Et(Or):(Ce.emit("plotly_animated"),Kt())})}function Lt(Ce,je,rt){if(Ce=w.getGraphDiv(Ce),je==null)return Promise.resolve();if(!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Pt,St,Nt,Xt=Ce._transitionData._frames,Ot=Ce._transitionData._frameHash;if(!Array.isArray(je))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+je);var Kt=Xt.length+je.length*2,Je=[],gt={};for(ut=je.length-1;ut>=0;ut--)if(!!w.isPlainObject(je[ut])){var Et=je[ut].name,rr=(Ot[Et]||gt[Et]||{}).name,vr=je[ut].name,or=Ot[rr]||gt[rr];rr&&vr&&typeof vr=="number"&&or&&T<x&&(T++,w.warn('addFrames: overwriting frame "'+(Ot[rr]||gt[rr]).name+'" with a frame whose name of type "number" also equates to "'+rr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===x&&w.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),gt[Et]={name:Et},Je.push({frame:u.supplyFrameDefaults(je[ut]),index:rt&&rt[ut]!==void 0&&rt[ut]!==null?rt[ut]:Kt+ut})}Je.sort(function(Se,De){return Se.index>De.index?-1:Se.index<De.index?1:0});var dr=[],Lr=[],kr=Xt.length;for(ut=Je.length-1;ut>=0;ut--){if(Pt=Je[ut].frame,typeof Pt.name=="number"&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Ot[Pt.name="frame "+Ce._transitionData._counter++];);if(Ot[Pt.name]){for(St=0;St<Xt.length&&(Xt[St]||{}).name!==Pt.name;St++);dr.push({type:"replace",index:St,value:Pt}),Lr.unshift({type:"replace",index:St,value:Xt[St]})}else Nt=Math.max(0,Math.min(Je[ut].index,kr)),dr.push({type:"insert",index:Nt,value:Pt}),Lr.unshift({type:"delete",index:Nt}),kr++}var tr=u.modifyFrames,Or=u.modifyFrames,et=[Ce,Lr],we=[Ce,dr];return a&&a.add(Ce,tr,et,Or,we),u.modifyFrames(Ce,dr)}function Mt(Ce,je){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);var rt,ut,Pt=Ce._transitionData._frames,St=[],Nt=[];if(!je)for(je=[],rt=0;rt<Pt.length;rt++)je.push(rt);for(je=je.slice(),je.sort(),rt=je.length-1;rt>=0;rt--)ut=je[rt],St.push({type:"delete",index:ut}),Nt.unshift({type:"insert",index:ut,value:Pt[ut]});var Xt=u.modifyFrames,Ot=u.modifyFrames,Kt=[Ce,Nt],Je=[Ce,St];return a&&a.add(Ce,Xt,Kt,Ot,Je),u.modifyFrames(Ce,St)}function it(Ce){Ce=w.getGraphDiv(Ce);var je=Ce._fullLayout||{},rt=Ce._fullData||[];return u.cleanPlot([],{},rt,je),u.purge(Ce),o.purge(Ce),je._container&&je._container.remove(),delete Ce._context,Ce}function ht(Ce){var je=Ce._fullLayout,rt=Ce.getBoundingClientRect();if(!w.equalDomRects(rt,je._lastBBox)){var ut=je._invTransform=w.inverseTransformMatrix(w.getFullTransformMatrix(Ce));je._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),je._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),je._lastBBox=rt}}function Qe(Ce){var je=d.select(Ce),rt=Ce._fullLayout;if(rt._calcInverseTransform=ht,rt._calcInverseTransform(Ce),rt._container=je.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var ut={};d.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),rt._uid=w.randstr(ut)}rt._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Pt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var St=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=St.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=St.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ce.emit("plotly_framework")}H.animate=Bt,H.addFrames=Lt,H.deleteFrames=Mt,H.addTraces=ue,H.deleteTraces=oe,H.extendTraces=K,H.moveTraces=U,H.prependTraces=se,H.newPlot=R,H._doPlot=c,H.purge=it,H.react=dt,H.redraw=I,H.relayout=ie,H.restyle=G,H.setPlotConfig=S,H.update=Oe,H._guiRelayout=He(ie),H._guiRestyle=He(G),H._guiUpdate=He(Oe),H._storeDirectGUIEdit=Q},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(t,B,H){var d={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},l={};function b(w,e){for(var o in w){var a=w[o];a.valType?e[o]=a.dflt:(e[o]||(e[o]={}),b(a,e[o]))}}b(d,l),B.exports={configAttributes:d,dfltConfig:l}},{}],542:[function(t,B,H){var d=t("../registry"),l=t("../lib"),b=t("../plots/attributes"),w=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),o=t("../plots/animation_attributes"),a=t("./plot_config").configAttributes,n=t("./edit_types"),r=l.extendDeepAll,u=l.isPlainObject,s=l.isArrayOrTypedArray,i=l.nestedProperty,f=l.valObjectMeta,h="_isSubplotObj",p="_isLinkedToArray",v="_arrayAttrRegexps",y="_deprecated",g=[h,p,v,y];H.IS_SUBPLOT_OBJ=h,H.IS_LINKED_TO_ARRAY=p,H.DEPRECATED=y,H.UNDERSCORE_ATTRS=g,H.get=function(){var R={};d.allTypes.forEach(function(O){R[O]=_(O)});var D={};return Object.keys(d.transformsRegistry).forEach(function(O){D[O]=x(O)}),{defs:{valObjects:f,metaKeys:g.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:R,layout:T(),transforms:D,frames:c(),animation:L(o),config:L(a)}},H.crawl=function(R,D,O,F){var Y=O||0;F=F||"",Object.keys(R).forEach(function(X){var q=R[X];if(g.indexOf(X)===-1){var $=(F?F+".":"")+X;D(q,X,R,Y,$),!H.isValObject(q)&&u(q)&&X!=="impliedEdits"&&H.crawl(q,D,Y+1,$)}})},H.isValObject=function(R){return R&&R.valType!==void 0},H.findArrayAttributes=function(R){var D=[],O=[],F=[],Y,X;function q(oe,U,G,re){O=O.slice(0,re).concat([U]),F=F.slice(0,re).concat([oe&&oe._isLinkedToArray]);var ee=oe&&(oe.valType==="data_array"||oe.arrayOk===!0)&&!(O[re-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!ee||$(Y,0,"")}function $(oe,U,G){var re=oe[O[U]],ee=G+O[U];if(U===O.length-1)s(re)&&D.push(X+ee);else if(F[U]){if(Array.isArray(re))for(var j=0;j<re.length;j++)u(re[j])&&$(re[j],U+1,ee+"["+j+"].")}else u(re)&&$(re,U+1,ee+".")}Y=R,X="",H.crawl(b,q),R._module&&R._module.attributes&&H.crawl(R._module.attributes,q);var V=R.transforms;if(V)for(var K=0;K<V.length;K++){var se=V[K],ue=se._module;ue&&(X="transforms["+K+"].",Y=se,H.crawl(ue.attributes,q))}return D},H.getTraceValObject=function(R,D){var O=D[0],F=1,Y,X;if(O==="transforms"){if(D.length===1)return b.transforms;var q=R.transforms;if(!Array.isArray(q)||!q.length)return!1;var $=D[1];if(!M($)||$>=q.length)return!1;Y=(d.transformsRegistry[q[$].type]||{}).attributes,X=Y&&Y[D[2]],F=3}else{var V=R._module;if(V||(V=(d.modules[R.type||b.type.dflt]||{})._module),!V)return!1;if(Y=V.attributes,X=Y&&Y[O],!X){var K=V.basePlotModule;K&&K.attributes&&(X=K.attributes[O])}X||(X=b[O])}return m(X,D,F)},H.getLayoutValObject=function(R,D){var O=A(R,D[0]);return m(O,D,1)};function A(R,D){var O,F,Y,X,q=R._basePlotModules;if(q){var $;for(O=0;O<q.length;O++){if(Y=q[O],Y.attrRegex&&Y.attrRegex.test(D)){if(Y.layoutAttrOverrides)return Y.layoutAttrOverrides;!$&&Y.layoutAttributes&&($=Y.layoutAttributes)}var V=Y.baseLayoutAttrOverrides;if(V&&D in V)return V[D]}if($)return $}var K=R._modules;if(K){for(O=0;O<K.length;O++)if(X=K[O].layoutAttributes,X&&D in X)return X[D]}for(F in d.componentsRegistry){if(Y=d.componentsRegistry[F],Y.name==="colorscale"&&D.indexOf("coloraxis")===0)return Y.layoutAttributes[D];if(!Y.schema&&D===Y.name)return Y.layoutAttributes}return D in w?w[D]:!1}function m(R,D,O){if(!R)return!1;if(R._isLinkedToArray){if(M(D[O]))O++;else if(O<D.length)return!1}for(;O<D.length;O++){var F=R[D[O]];if(u(F))R=F;else break;if(O===D.length-1)break;if(R._isLinkedToArray){if(O++,!M(D[O]))return!1}else if(R.valType==="info_array"){O++;var Y=D[O];if(!M(Y))return!1;var X=R.items;if(Array.isArray(X)){if(Y>=X.length)return!1;if(R.dimensions===2){if(O++,D.length===O)return R;var q=D[O];if(!M(q))return!1;R=X[Y][q]}else R=X[Y]}else R=X}}return R}function M(R){return R===Math.round(R)&&R>=0}function _(R){var D,O;D=d.modules[R]._module,O=D.basePlotModule;var F={};F.type=null;var Y=r({},b),X=r({},D.attributes);H.crawl(X,function(V,K,se,ue,oe){i(Y,oe).set(void 0),V===void 0&&i(X,oe).set(void 0)}),r(F,Y),d.traceIs(R,"noOpacity")&&delete F.opacity,d.traceIs(R,"showLegend")||(delete F.showlegend,delete F.legendgroup),d.traceIs(R,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),D.selectPoints||delete F.selectedpoints,r(F,X),O.attributes&&r(F,O.attributes),F.type=R;var q={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:R,attributes:L(F)};if(D.layoutAttributes){var $={};r($,D.layoutAttributes),q.layoutAttributes=L($)}return D.animatable||H.crawl(q,function(V){H.isValObject(V)&&"anim"in V&&delete V.anim}),q}function T(){var R={},D,O;r(R,w);for(D in d.subplotsRegistry)if(O=d.subplotsRegistry[D],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var F=0;F<O.attr.length;F++)z(R,O,O.attr[F]);else{var Y=O.attr==="subplot"?O.name:O.attr;z(R,O,Y)}for(D in d.componentsRegistry){O=d.componentsRegistry[D];var X=O.schema;if(X&&(X.subplots||X.layout)){var q=X.subplots;if(q&&q.xaxis&&!q.yaxis)for(var $ in q.xaxis)delete R.yaxis[$]}else O.name==="colorscale"?r(R,O.layoutAttributes):O.layoutAttributes&&I(R,O.layoutAttributes,O.name)}return{layoutAttributes:L(R)}}function x(R){var D=d.transformsRegistry[R],O=r({},D.attributes);return Object.keys(d.componentsRegistry).forEach(function(F){var Y=d.componentsRegistry[F];Y.schema&&Y.schema.transforms&&Y.schema.transforms[R]&&Object.keys(Y.schema.transforms[R]).forEach(function(X){I(O,Y.schema.transforms[R][X],X)})}),{attributes:L(O)}}function c(){var R={frames:r({},e)};return L(R),R.frames}function L(R){return S(R),k(R),P(R),R}function S(R){function D(F){return{valType:"string",editType:"none"}}function O(F,Y,X){H.isValObject(F)?(F.arrayOk===!0||F.valType==="data_array")&&(X[Y+"src"]=D()):u(F)&&(F.role="object")}H.crawl(R,O)}function k(R){function D(O,F,Y){if(!!O){var X=O[p];!X||(delete O[p],Y[F]={items:{}},Y[F].items[X]=O,Y[F].role="object")}}H.crawl(R,D)}function P(R){function D(O){for(var F in O)if(u(O[F]))D(O[F]);else if(Array.isArray(O[F]))for(var Y=0;Y<O[F].length;Y++)D(O[F][Y]);else O[F]instanceof RegExp&&(O[F]=O[F].toString())}D(R)}function z(R,D,O){var F=i(R,O),Y=r({},D.layoutAttributes);Y[h]=!0,F.set(Y)}function I(R,D,O){var F=i(R,O);F.set(r(F.get()||{},D))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(t,B,H){var d=t("../lib"),l=t("../plots/attributes"),b="templateitemname",w={name:{valType:"string",editType:"none"}};w[b]={valType:"string",editType:"calc"},H.templatedArray=function(a,n){return n._isLinkedToArray=a,n.name=w.name,n[b]=w[b],n},H.traceTemplater=function(a){var n={},r,u;for(r in a)u=a[r],Array.isArray(u)&&u.length&&(n[r]=0);function s(i){r=d.coerce(i,{},l,"type");var f={type:r,_template:null};if(r in n){u=a[r];var h=n[r]%u.length;n[r]++,f._template=u[h]}return f}return{newTrace:s}},H.newContainer=function(a,n,r){var u=a._template,s=u&&(u[n]||r&&u[r]);d.isPlainObject(s)||(s=null);var i=a[n]={_template:s};return i},H.arrayTemplater=function(a,n,r){var u=a._template,s=u&&u[o(n)],i=u&&u[n];(!Array.isArray(i)||!i.length)&&(i=[]);var f={};function h(v){var y={name:v.name,_input:v},g=y[b]=v[b];if(!e(g))return y._template=s,y;for(var A=0;A<i.length;A++){var m=i[A];if(m.name===g)return f[g]=1,y._template=m,y}return y[r]=v[r]||!1,y._template=!1,y}function p(){for(var v=[],y=0;y<i.length;y++){var g=i[y],A=g.name;if(e(A)&&!f[A]){var m={_template:g,name:A,_input:{_templateitemname:A}};m[b]=g[b],v.push(m),f[A]=1}}return v}return{newItem:h,defaultItems:p}};function e(a){return a&&typeof a=="string"}function o(a){var n=a.length-1;return a.charAt(n)!=="s"&&d.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}H.arrayDefaultKey=o,H.arrayEditor=function(a,n,r){var u=(d.nestedProperty(a,n).get()||[]).length,s=r._index,i=s>=u&&(r._input||{})._templateitemname;i&&(s=u);var f=n+"["+s+"]",h;function p(){h={},i&&(h[f]={},h[f][b]=i)}p();function v(m,M){h[m]=M}function y(m,M){i?d.nestedProperty(h[f],m).set(M):h[f+"."+m]=M}function g(){var m=h;return p(),m}function A(m,M){m&&y(m,M);var _=g();for(var T in _)d.nestedProperty(a,T).set(_[T])}return{modifyBase:v,modifyItem:y,getUpdateObj:g,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(t,B,H){var d=t("@plotly/d3"),l=t("../registry"),b=t("../plots/plots"),w=t("../lib"),e=t("../lib/clear_gl_canvases"),o=t("../components/color"),a=t("../components/drawing"),n=t("../components/titles"),r=t("../components/modebar"),u=t("../plots/cartesian/axes"),s=t("../constants/alignment"),i=t("../plots/cartesian/constraints"),f=i.enforce,h=i.clean,p=t("../plots/cartesian/autorange").doAutoRange,v="start",y="middle",g="end";H.layoutStyles=function(k){return w.syncOrAsync([b.doAutoMargin,m],k)};function A(k,P,z){for(var I=0;I<z.length;I++){var R=z[I][0],D=z[I][1];if(!(R[0]>=k[1]||R[1]<=k[0])&&D[0]<P[1]&&D[1]>P[0])return!0}return!1}function m(k){var P=k._fullLayout,z=P._size,I=z.p,R=u.list(k,"",!0),D,O,F,Y,X,q;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),H.drawMainTitle(k),r.manage(k),!P._has("cartesian"))return b.previousPromises(k);function $(zt,Bt,Lt){var Mt=zt._lw/2;if(zt._id.charAt(0)==="x"){if(Bt){if(Lt==="top")return Bt._offset-I-Mt}else return z.t+z.h*(1-(zt.position||0))+Mt%1;return Bt._offset+Bt._length+I+Mt}if(Bt){if(Lt==="right")return Bt._offset+Bt._length+I+Mt}else return z.l+z.w*(zt.position||0)+Mt%1;return Bt._offset-I-Mt}for(D=0;D<R.length;D++){Y=R[D];var V=Y._anchorAxis;Y._linepositions={},Y._lw=a.crispRound(k,Y.linewidth,1),Y._mainLinePosition=$(Y,V,Y.side),Y._mainMirrorPosition=Y.mirror&&V?$(Y,V,s.OPPOSITE_SIDE[Y.side]):null}var K=[],se=[],ue=[],oe=o.opacity(P.paper_bgcolor)===1&&o.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(F=P._plots[O],F.mainplot)F.bg&&F.bg.remove(),F.bg=void 0;else{var U=F.xaxis.domain,G=F.yaxis.domain,re=F.plotgroup;if(A(U,G,ue)){var ee=re.node(),j=F.bg=w.ensureSingle(re,"rect","bg");ee.insertBefore(j.node(),ee.childNodes[0]),se.push(O)}else re.select("rect.bg").remove(),ue.push([U,G]),oe||(K.push(O),se.push(O))}var Q=P._bgLayer.selectAll(".bg").data(K);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(zt){P._plots[zt].bg=d.select(this)}),D=0;D<se.length;D++)F=P._plots[se[D]],X=F.xaxis,q=F.yaxis,F.bg&&X._offset!==void 0&&q._offset!==void 0&&F.bg.call(a.setRect,X._offset-I,q._offset-I,X._length+2*I,q._length+2*I).call(o.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){F=P._plots[O],X=F.xaxis,q=F.yaxis;var ne=F.clipId="clip"+P._uid+O+"plot",ae=w.ensureSingleById(P._clips,"clipPath",ne,function(zt){zt.classed("plotclip",!0).append("rect")});F.clipRect=ae.select("rect").attr({width:X._length,height:q._length}),a.setTranslate(F.plot,X._offset,q._offset);var ie,fe;F._hasClipOnAxisFalse?(ie=null,fe=ne):(ie=ne,fe=null),a.setClipUrl(F.plot,ie,k),F.layerClipId=fe}var me,ce,ye,xe,ke,Ae,Oe,He,Ge,_e,Ie,Ye,qe;function Ue(zt){return"M"+me+","+zt+"H"+ce}function Re(zt){return"M"+X._offset+","+zt+"h"+X._length}function Ve(zt){return"M"+zt+","+He+"V"+Oe}function dt(zt){return"M"+zt+","+q._offset+"v"+q._length}function Dt(zt,Bt,Lt){if(!zt.showline||O!==zt._mainSubplot)return"";if(!zt._anchorAxis)return Lt(zt._mainLinePosition);var Mt=Bt(zt._mainLinePosition);return zt.mirror&&(Mt+=Bt(zt._mainMirrorPosition)),Mt}for(O in P._plots){F=P._plots[O],X=F.xaxis,q=F.yaxis;var Gt="M0,0";M(X,O)&&(ke=T(X,"left",q,R),me=X._offset-(ke?I+ke:0),Ae=T(X,"right",q,R),ce=X._offset+X._length+(Ae?I+Ae:0),ye=$(X,q,"bottom"),xe=$(X,q,"top"),qe=!X._anchorAxis||O!==X._mainSubplot,qe&&(X.mirror==="allticks"||X.mirror==="all")&&(X._linepositions[O]=[ye,xe]),Gt=Dt(X,Ue,Re),qe&&X.showline&&(X.mirror==="all"||X.mirror==="allticks")&&(Gt+=Ue(ye)+Ue(xe)),F.xlines.style("stroke-width",X._lw+"px").call(o.stroke,X.showline?X.linecolor:"rgba(0,0,0,0)")),F.xlines.attr("d",Gt);var kt="M0,0";M(q,O)&&(Ie=T(q,"bottom",X,R),Oe=q._offset+q._length+(Ie?I:0),Ye=T(q,"top",X,R),He=q._offset-(Ye?I:0),Ge=$(q,X,"left"),_e=$(q,X,"right"),qe=!q._anchorAxis||O!==q._mainSubplot,qe&&(q.mirror==="allticks"||q.mirror==="all")&&(q._linepositions[O]=[Ge,_e]),kt=Dt(q,Ve,dt),qe&&q.showline&&(q.mirror==="all"||q.mirror==="allticks")&&(kt+=Ve(Ge)+Ve(_e)),F.ylines.style("stroke-width",q._lw+"px").call(o.stroke,q.showline?q.linecolor:"rgba(0,0,0,0)")),F.ylines.attr("d",kt)}return u.makeClipPaths(k),b.previousPromises(k)}function M(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function _(k,P,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var I=z._anchorAxis;if(!I)return!1;var R=s.FROM_BL[P];return z.side===P?I.domain[R]===k.domain[R]:z.mirror&&I.domain[1-R]===k.domain[1-R]}function T(k,P,z,I){if(_(k,P,z))return z._lw;for(var R=0;R<I.length;R++){var D=I[R];if(D._mainAxis===z._mainAxis&&_(k,P,D))return D._lw}return 0}H.drawMainTitle=function(k){var P=k._fullLayout,z=L(P),I=S(P);n.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:x(P,z),y:c(P,I),"text-anchor":z,dy:I}})};function x(k,P){var z=k.title,I=k._size,R=0;switch(P===v?R=z.pad.l:P===g&&(R=-z.pad.r),z.xref){case"paper":return I.l+I.w*z.x+R;case"container":default:return k.width*z.x+R}}function c(k,P){var z=k.title,I=k._size,R=0;if(P==="0em"||!P?R=-z.pad.b:P===s.CAP_SHIFT+"em"&&(R=z.pad.t),z.y==="auto")return I.t/2;switch(z.yref){case"paper":return I.t+I.h-I.h*z.y+R;case"container":default:return k.height-k.height*z.y+R}}function L(k){var P=k.title,z=y;return w.isRightAnchor(P)?z=g:w.isLeftAnchor(P)&&(z=v),z}function S(k){var P=k.title,z="0em";return w.isTopAnchor(P)?z=s.CAP_SHIFT+"em":w.isMiddleAnchor(P)&&(z=s.MID_SHIFT+"em"),z}H.doTraceStyle=function(k){var P=k.calcdata,z=[],I;for(I=0;I<P.length;I++){var R=P[I],D=R[0]||{},O=D.trace||{},F=O._module||{},Y=F.arraysToCalcdata;Y&&Y(R,O);var X=F.editStyle;X&&z.push({fn:X,cd0:D})}if(z.length){for(I=0;I<z.length;I++){var q=z[I];q.fn(k,q.cd0)}e(k),H.redrawReglTraces(k)}return b.style(k),l.getComponentMethod("legend","draw")(k),b.previousPromises(k)},H.doColorBars=function(k){return l.getComponentMethod("colorbar","draw")(k),b.previousPromises(k)},H.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,l.call("_doPlot",k,"",P)},H.doLegend=function(k){return l.getComponentMethod("legend","draw")(k),b.previousPromises(k)},H.doTicksRelayout=function(k){return u.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(l.subplotsRegistry.splom.updateGrid(k),e(k),H.redrawReglTraces(k)),H.drawMainTitle(k),b.previousPromises(k)},H.doModeBar=function(k){var P=k._fullLayout;r.manage(k);for(var z=0;z<P._basePlotModules.length;z++){var I=P._basePlotModules[z].updateFx;I&&I(k)}return b.previousPromises(k)},H.doCamera=function(k){for(var P=k._fullLayout,z=P._subplots.gl3d,I=0;I<z.length;I++){var R=P[z[I]],D=R._scene;D.setViewport(R)}},H.drawData=function(k){var P=k._fullLayout;e(k);for(var z=P._basePlotModules,I=0;I<z.length;I++)z[I].plot(k);return H.redrawReglTraces(k),b.style(k),l.getComponentMethod("shapes","draw")(k),l.getComponentMethod("annotations","draw")(k),l.getComponentMethod("images","draw")(k),P._replotting=!1,b.previousPromises(k)},H.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var z=k._fullData,I=[],R=[],D,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),D=0;D<z.length;D++){var F=z[D];F.visible===!0&&F._length!==0&&(F.type==="splom"?P._splomScenes[F.uid].draw():F.type==="scattergl"?w.pushUnique(I,F.xaxis+F.yaxis):F.type==="scatterpolargl"&&w.pushUnique(R,F.subplot))}for(D=0;D<I.length;D++)O=P._plots[I[D]],O._scene&&O._scene.draw();for(D=0;D<R.length;D++)O=P[R[D]]._subplot,O._scene&&O._scene.draw()}},H.doAutoRangeAndConstraints=function(k){for(var P=u.list(k,"",!0),z,I={},R=0;R<P.length;R++)if(z=P[R],!I[z._id]){I[z._id]=1,h(k,z),p(k,z);var D=z._matchGroup;if(D)for(var O in D){var F=u.getFromId(k,O);p(k,F,z.range),I[O]=1}}f(k)},H.finalDraw=function(k){l.getComponentMethod("rangeslider","draw")(k),l.getComponentMethod("rangeselector","draw")(k)},H.drawMarginPushers=function(k){l.getComponentMethod("legend","draw")(k),l.getComponentMethod("rangeselector","draw")(k),l.getComponentMethod("sliders","draw")(k),l.getComponentMethod("updatemenus","draw")(k),l.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(t,B,H){var d=t("../lib"),l=d.isPlainObject,b=t("./plot_schema"),w=t("../plots/plots"),e=t("../plots/attributes"),o=t("./plot_template"),a=t("./plot_config").dfltConfig;H.makeTemplate=function(v){v=d.isPlainObject(v)?v:d.getGraphDiv(v),v=d.extendDeep({_context:a},{data:v.data,layout:v.layout}),w.supplyDefaults(v);var y=v.data||[],g=v.layout||{};g._basePlotModules=v._fullLayout._basePlotModules,g._modules=v._fullLayout._modules;var A={data:{},layout:{}};y.forEach(function(P){var z={};u(P,z,i.bind(null,P));var I=d.coerce(P,{},e,"type"),R=A.data[I];R||(R=A.data[I]=[]),R.push(z)}),u(g,A.layout,s.bind(null,g)),delete A.layout.template;var m=g.template;if(l(m)){var M=m.layout,_,T,x,c,L,S;l(M)&&n(M,A.layout);var k=m.data;if(l(k)){for(T in A.data)if(x=k[T],Array.isArray(x)){for(L=A.data[T],S=L.length,c=x.length,_=0;_<S;_++)n(x[_%c],L[_]);for(_=S;_<c;_++)L.push(d.extendDeep({},x[_]))}for(T in k)T in A.data||(A.data[T]=d.extendDeep([],k[T]))}}return A};function n(v,y){v=d.extendDeep({},v);var g=Object.keys(v).sort(),A,m;function M(L,S,k){if(l(S)&&l(L))n(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=o.arrayTemplater({_template:v},k);for(m=0;m<S.length;m++){var z=S[m],I=P.newItem(z)._template;I&&n(I,z)}var R=P.defaultItems();for(m=0;m<R.length;m++)S.push(R[m]._template);for(m=0;m<S.length;m++)delete S[m].templateitemname}}for(A=0;A<g.length;A++){var _=g[A],T=v[_];if(_ in y?M(T,y[_],_):y[_]=T,r(_)===_)for(var x in y){var c=r(x);x!==c&&c===_&&!(x in v)&&M(T,y[x],_)}}}function r(v){return v.replace(/[0-9]+$/,"")}function u(v,y,g,A,m){var M=m&&g(m);for(var _ in v){var T=v[_],x=f(v,_,A),c=f(v,_,m),L=g(c);if(!L){var S=r(_);S!==_&&(c=f(v,S,m),L=g(c))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(T)))if(!L.valType&&l(T))u(T,y,g,x,c);else if(L._isLinkedToArray&&Array.isArray(T))for(var k=!1,P=0,z={},I=0;I<T.length;I++){var R=T[I];if(l(R)){var D=R.name;if(D)z[D]||(u(R,y,g,f(T,P,x),f(T,P,c)),P++,z[D]=1);else if(!k){var O=o.arrayDefaultKey(_),F=f(v,O,A),Y=f(T,P,x);u(R,y,g,Y,f(T,P,c));var X=d.nestedProperty(y,Y),q=d.nestedProperty(y,F);q.set(X.get()),X.set(null),k=!0}}}else{var $=d.nestedProperty(y,x);$.set(T)}}}function s(v,y){return b.getLayoutValObject(v,d.nestedProperty({},y).parts)}function i(v,y){return b.getTraceValObject(v,d.nestedProperty({},y).parts)}function f(v,y,g){var A;return g?Array.isArray(v)?A=g+"["+y+"]":A=g+"."+y:A=y,A}H.validateTemplate=function(v,y){var g=d.extendDeep({},{_context:a,data:v.data,layout:v.layout}),A=g.layout||{};l(y)||(y=A.template||{});var m=y.layout,M=y.data,_=[];g.layout=A,g.layout.template=y,w.supplyDefaults(g);var T=g._fullLayout,x=g._fullData,c={};function L(F,Y){for(var X in F)if(X.charAt(0)!=="_"&&l(F[X])){var q=r(X),$=[],V;for(V=0;V<Y.length;V++)$.push(f(F,X,Y[V])),q!==X&&$.push(f(F,q,Y[V]));for(V=0;V<$.length;V++)c[$[V]]=1;L(F[X],$)}}function S(F,Y){for(var X in F)if(X.indexOf("defaults")===-1&&l(F[X])){var q=f(F,X,Y);c[q]?S(F[X],q):_.push({code:"unused",path:q})}}if(l(m)?(L(T,["layout"]),S(m,"layout")):_.push({code:"layout"}),!l(M))_.push({code:"data"});else{for(var k={},P,z=0;z<x.length;z++){var I=x[z];P=I.type,k[P]=(k[P]||0)+1,I._fullInput._template||_.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in M){var R=M[P].length,D=k[P]||0;R>D?_.push({code:"unused",traceType:P,templateCount:R,dataCount:D}):D>R&&_.push({code:"reused",traceType:P,templateCount:R,dataCount:D})}}function O(F,Y){for(var X in F)if(X.charAt(0)!=="_"){var q=F[X],$=f(F,X,Y);l(q)?(Array.isArray(F)&&q._template===!1&&q.templateitemname&&_.push({code:"missing",path:$,templateitemname:q.templateitemname}),O(q,$)):Array.isArray(q)&&h(q)&&O(q,$)}}if(O({data:x,layout:T},""),_.length)return _.map(p)};function h(v){for(var y=0;y<v.length;y++)if(l(v[y]))return!0}function p(v){var y;switch(v.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":v.path?y="There are no templates for item "+v.path+" with name "+v.templateitemname:y="There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":v.path?y="The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?y="Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":y="The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type.";break}return v.msg=y,v}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./plot_api"),b=t("../plots/plots"),w=t("../lib"),e=t("../snapshot/helpers"),o=t("../snapshot/tosvg"),a=t("../snapshot/svgtoimg"),n=t("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function u(s,i){i=i||{};var f,h,p,v;w.isPlainObject(s)?(f=s.data||[],h=s.layout||{},p=s.config||{},v={}):(s=w.getGraphDiv(s),f=w.extendDeep([],s.data),h=w.extendDeep({},s.layout),p=s._context,v=s._fullLayout||{});function y(D){return!(D in i)||w.validate(i[D],r[D])}if(!y("width")&&i.width!==null||!y("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+w.join2(r.format.values,", "," or ")+".");var g={};function A(D,O){return w.coerce(i,g,r,D,O)}var m=A("format"),M=A("width"),_=A("height"),T=A("scale"),x=A("setBackground"),c=A("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=w.extendFlat({},h);M?S.width=M:i.width===null&&d(v.width)&&(S.width=v.width),_?S.height=_:i.height===null&&d(v.height)&&(S.height=v.height);var k=w.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:x}),P=e.getRedrawFunc(L);function z(){return new Promise(function(D){setTimeout(D,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(D,O){var F=o(L,m,T),Y=L._fullLayout.width,X=L._fullLayout.height;function q(){l.purge(L),document.body.removeChild(L)}if(m==="full-json"){var $=b.graphJson(L,!1,"keepdata","object",!0,!0);return $.version=n,$=JSON.stringify($),q(),D(c?$:e.encodeJSON($))}if(q(),m==="svg")return D(c?F:e.encodeSVG(F));var V=document.createElement("canvas");V.id=w.randstr(),a({format:m,width:Y,height:X,scale:T,canvas:V,svg:F,promise:!0}).then(D).catch(O)})}function R(D){return c?D.replace(e.IMAGE_URL_PREFIX,""):D}return new Promise(function(D,O){l.newPlot(L,f,S,k).then(P).then(z).then(I).then(function(F){D(R(F))}).catch(function(F){O(F)})})}B.exports=u},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(t,B,H){var d=t("../lib"),l=t("../plots/plots"),b=t("./plot_schema"),w=t("./plot_config").dfltConfig,e=d.isPlainObject,o=Array.isArray,a=d.isArrayOrTypedArray;B.exports=function(A,m){A===void 0&&(A=[]),m===void 0&&(m={});var M=b.get(),_=[],T={_context:d.extendFlat({},w)},x,c;o(A)?(T.data=d.extendDeep([],A),x=A):(T.data=[],x=[],_.push(i("array","data"))),e(m)?(T.layout=d.extendDeep({},m),c=m):(T.layout={},c={},arguments.length>1&&_.push(i("object","layout"))),l.supplyDefaults(T);for(var L=T._fullData,S=x.length,k=0;k<S;k++){var P=x[k],z=["data",k];if(!e(P)){_.push(i("object",z));continue}var I=L[k],R=I.type,D=M.traces[R].attributes;D.type={valType:"enumerated",values:[R]},I.visible===!1&&P.visible!==!1&&_.push(i("invisible",z)),n(P,I,D,_,z);var O=P.transforms,F=I.transforms;if(O){o(O)||_.push(i("array",z,["transforms"])),z.push("transforms");for(var Y=0;Y<O.length;Y++){var X=["transforms",Y],q=O[Y].type;if(!e(O[Y])){_.push(i("object",z,X));continue}var $=M.transforms[q]?M.transforms[q].attributes:{};$.type={valType:"enumerated",values:Object.keys(M.transforms)},n(O[Y],F[Y],$,_,z,X)}}}var V=T._fullLayout,K=r(M,L);return n(c,V,K,_,"layout"),_.length===0?void 0:_};function n(g,A,m,M,_,T){T=T||[];for(var x=Object.keys(g),c=0;c<x.length;c++){var L=x[c];if(L!=="transforms"){var S=T.slice();S.push(L);var k=g[L],P=A[L],z=h(m,L),I=(z||{}).valType,R=I==="info_array",D=I==="colorscale",O=(z||{}).items;if(!f(m,L))M.push(i("schema",_,S));else if(e(k)&&e(P)&&I!=="any")n(k,P,z,M,_,S);else if(R&&o(k)){k.length>P.length&&M.push(i("unused",_,S.concat(P.length)));var F=P.length,Y=Array.isArray(O);Y&&(F=Math.min(F,O.length));var X,q,$,V,K;if(z.dimensions===2)for(q=0;q<F;q++)if(o(k[q])){k[q].length>P[q].length&&M.push(i("unused",_,S.concat(q,P[q].length)));var se=P[q].length;for(X=0;X<(Y?Math.min(se,O[q].length):se);X++)$=Y?O[q][X]:O,V=k[q][X],K=P[q][X],d.validate(V,$)?K!==V&&K!==+V&&M.push(i("dynamic",_,S.concat(q,X),V,K)):M.push(i("value",_,S.concat(q,X),V))}else M.push(i("array",_,S.concat(q),k[q]));else for(q=0;q<F;q++)$=Y?O[q]:O,V=k[q],K=P[q],d.validate(V,$)?K!==V&&K!==+V&&M.push(i("dynamic",_,S.concat(q),V,K)):M.push(i("value",_,S.concat(q),V))}else if(z.items&&!R&&o(k)){var ue=O[Object.keys(O)[0]],oe=[],U,G;for(U=0;U<P.length;U++){var re=P[U]._index||U;if(G=S.slice(),G.push(re),e(k[re])&&e(P[U])){oe.push(re);var ee=k[re],j=P[U];e(ee)&&ee.visible!==!1&&j.visible===!1?M.push(i("invisible",_,G)):n(ee,j,ue,M,_,G)}}for(U=0;U<k.length;U++)G=S.slice(),G.push(U),e(k[U])?oe.indexOf(U)===-1&&M.push(i("unused",_,G)):M.push(i("object",_,G,k[U]))}else!e(k)&&e(P)?M.push(i("object",_,S,k)):!a(k)&&a(P)&&!R&&!D?M.push(i("array",_,S,k)):L in A?d.validate(k,z)?z.valType==="enumerated"&&(z.coerceNumber&&k!==+P||k!==P)&&M.push(i("dynamic",_,S,k,P)):M.push(i("value",_,S,k)):M.push(i("unused",_,S,k))}}return M}function r(g,A){for(var m=g.layout.layoutAttributes,M=0;M<A.length;M++){var _=A[M],T=g.traces[_.type],x=T.layoutAttributes;x&&(_.subplot?d.extendFlat(m[T.attributes.subplot.dflt],x):d.extendFlat(m,x))}return m}var u={object:function(g,A){var m;return g==="layout"&&A===""?m="The layout argument":g[0]==="data"&&A===""?m="Trace "+g[1]+" in the data argument":m=s(g)+"key "+A,m+" must be linked to an object container"},array:function(g,A){var m;return g==="data"?m="The data argument":m=s(g)+"key "+A,m+" must be linked to an array container"},schema:function(g,A){return s(g)+"key "+A+" is not part of the schema"},unused:function(g,A,m){var M=e(m)?"container":"key";return s(g)+M+" "+A+" did not get coerced"},dynamic:function(g,A,m,M){return[s(g)+"key",A,"(set to '"+m+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(g,A){return(A?s(g)+"item "+A:"Trace "+g[1])+" got defaulted to be not visible"},value:function(g,A,m){return[s(g)+"key "+A,"is set to an invalid value ("+m+")"].join(" ")}};function s(g){return o(g)?"In data trace "+g[1]+", ":"In "+g+", "}function i(g,A,m,M,_){m=m||"";var T,x;o(A)?(T=A[0],x=A[1]):(T=A,x=null);var c=y(m),L=u[g](A,c,M,_);return d.log(L),{code:g,container:T,trace:x,path:m,astr:c,msg:L}}function f(g,A){var m=v(A),M=m.keyMinusId,_=m.id;return M in g&&g[M]._isSubplotObj&&_?!0:A in g}function h(g,A){if(A in g)return g[A];var m=v(A);return g[m.keyMinusId]}var p=d.counterRegex("([a-z]+)");function v(g){var A=g.match(p);return{keyMinusId:A&&A[1],id:A&&A[2]}}function y(g){if(!o(g))return String(g);for(var A="",m=0;m<g.length;m++){var M=g[m];typeof M=="number"?A=A.substr(0,A.length-1)+"["+M+"]":A+=M,m<g.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(t,B,H){B.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_template");B.exports=function(w,e,o){var a=o.name,n=o.inclusionAttr||"visible",r=e[a],u=d.isArrayOrTypedArray(w[a])?w[a]:[],s=e[a]=[],i=l.arrayTemplater(e,a,n),f,h;for(f=0;f<u.length;f++){var p=u[f];d.isPlainObject(p)?h=i.newItem(p):(h=i.newItem({}),h[n]=!1),h._index=f,h[n]!==!1&&o.handleItemDefaults(p,h,e,o),s.push(h)}var v=i.defaultItems();for(f=0;f<v.length;f++)h=v[f],h._index=s.length,o.handleItemDefaults({},h,e,o,{}),s.push(h);if(d.isArrayOrTypedArray(r)){var y=Math.min(r.length,s.length);for(f=0;f<y;f++)d.relinkPrivateKeys(s[f],r[f])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(t,B,H){var d=t("./font_attributes"),l=t("../components/fx/attributes");B.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:d({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:l.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=l.dateTime2ms,w=l.incrementMonth,e=t("../../constants/numerical"),o=e.ONEAVGMONTH;B.exports=function(n,r,u,s){if(r.type!=="date")return{vals:s};var i=n[u+"periodalignment"];if(!i)return{vals:s};var f=n[u+"period"],h;if(d(f)){if(f=+f,f<=0)return{vals:s}}else if(typeof f=="string"&&f.charAt(0)==="M"){var p=+f.substring(1);if(p>0&&Math.round(p)===p)h=p;else return{vals:s}}for(var v=r.calendar,y=i==="start",g=i==="end",A=n[u+"period0"],m=b(A,v)||0,M=[],_=[],T=[],x=s.length,c=0;c<x;c++){var L=s[c],S,k,P;if(h){for(S=Math.round((L-m)/(h*o)),P=w(m,h*S,v);P>L;)P=w(P,-h,v);for(;P<=L;)P=w(P,h,v);k=w(P,-h,v)}else{for(S=Math.round((L-m)/f),P=m+S*f;P>L;)P-=f;for(;P<=L;)P+=f;k=P-f}M[c]=y?k:g?P:(k+P)/2,_[c]=k,T[c]=P}return{vals:M,starts:_,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(t,B,H){B.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),o=t("../../components/drawing"),a=t("./axis_ids"),n=a.getFromId,r=a.isLinked;B.exports={getAutoRange:u,makePadFn:i,doAutoRange:v,findExtremes:y,concatExtremes:p};function u(x,c){var L,S,k=[],P=x._fullLayout,z=i(P,c,0),I=i(P,c,1),R=p(x,c),D=R.min,O=R.max;if(D.length===0||O.length===0)return b.simpleMap(c.range,c.r2l);var F=D[0].val,Y=O[0].val;for(L=1;L<D.length&&F===Y;L++)F=Math.min(F,D[L].val);for(L=1;L<O.length&&F===Y;L++)Y=Math.max(Y,O[L].val);var X=!1;if(c.range){var q=b.simpleMap(c.range,c.r2l);X=q[1]<q[0]}c.autorange==="reversed"&&(X=!0,c.autorange=!0);var $=c.rangemode,V=$==="tozero",K=$==="nonnegative",se=c._length,ue=se/10,oe=0,U,G,re,ee,j,Q;for(L=0;L<D.length;L++)for(U=D[L],S=0;S<O.length;S++)G=O[S],Q=G.val-U.val-s(c,U.val,G.val),Q>0&&(j=se-z(U)-I(G),j>ue?Q/j>oe&&(re=U,ee=G,oe=Q/j):Q/se>oe&&(re={val:U.val,nopad:1},ee={val:G.val,nopad:1},oe=Q/se));function ne(ce,ye){return Math.max(ce,I(ye))}if(F===Y){var ae=F-1,ie=F+1;if(V)if(F===0)k=[0,1];else{var fe=(F>0?O:D).reduce(ne,0),me=F/(1-Math.min(.5,fe/se));k=F>0?[0,me]:[me,0]}else K?k=[Math.max(0,ae),Math.max(1,ie)]:k=[ae,ie]}else V?(re.val>=0&&(re={val:0,nopad:1}),ee.val<=0&&(ee={val:0,nopad:1})):K&&(re.val-oe*z(re)<0&&(re={val:0,nopad:1}),ee.val<=0&&(ee={val:1,nopad:1})),oe=(ee.val-re.val-s(c,U.val,G.val))/(se-z(re)-I(ee)),k=[re.val-oe*z(re),ee.val+oe*I(ee)];return X&&k.reverse(),b.simpleMap(k,c.l2r||Number)}function s(x,c,L){var S=0;if(x.rangebreaks)for(var k=x.locateBreaks(c,L),P=0;P<k.length;P++){var z=k[P];S+=z.max-z.min}return S}function i(x,c,L){var S=.05*c._length,k=c._anchorAxis||{};if((c.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=c.autorange==="reversed";if(!P){var z=b.simpleMap(c.range,c.r2l);P=z[1]<z[0]}P&&(L=!L)}var I=0;return r(x,c._id)||(I=h(x,c,L)),S=Math.max(I,S),c.constrain==="domain"&&c._inputDomain&&(S*=(c._inputDomain[1]-c._inputDomain[0])/(c.domain[1]-c.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?S:I)}}var f=3;function h(x,c,L){var S=0,k=c._id.charAt(0)==="x";for(var P in x._plots){var z=x._plots[P];if(!(c._id!==z.xaxis._id&&c._id!==z.yaxis._id)){var I=(k?z.yaxis:z.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var R=b.deg2rad(I._tickAngles[I._id+"tick"]||0),D=Math.abs(Math.cos(R)),O=Math.abs(Math.sin(R));if(!I._vals[0].bb){var F=I._id+"tick",Y=I._selections[F];Y.each(function(se){var ue=d.select(this),oe=ue.select(".text-math-group");oe.empty()&&(se.bb=o.bBox(ue.node()))})}for(var X=0;X<I._vals.length;X++){var q=I._vals[X],$=q.bb;if($){var V=2*f+$.width,K=2*f+$.height;S=Math.max(S,k?Math.max(V*D,K*O):Math.max(K*D,V*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function p(x,c,L){var S=c._id,k=x._fullData,P=x._fullLayout,z=[],I=[],R,D,O;function F(V,K){for(R=0;R<K.length;R++){var se=V[K[R]],ue=(se._extremes||{})[S];if(se.visible===!0&&ue){for(D=0;D<ue.min.length;D++)O=ue.min[D],g(z,O.val,O.pad,{extrapad:O.extrapad});for(D=0;D<ue.max.length;D++)O=ue.max[D],A(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(F(k,c._traceIndices),F(P.annotations||[],c._annIndices||[]),F(P.shapes||[],c._shapeIndices||[]),c._matchGroup&&!L){for(var Y in c._matchGroup)if(Y!==c._id){var X=n(x,Y),q=p(x,X,!0),$=c._length/X._length;for(D=0;D<q.min.length;D++)O=q.min[D],g(z,O.val,O.pad*$,{extrapad:O.extrapad});for(D=0;D<q.max.length;D++)O=q.max[D],A(I,O.val,O.pad*$,{extrapad:O.extrapad})}}return{min:z,max:I}}function v(x,c,L){if(c.setScale(),c.autorange){c.range=L?L.slice():u(x,c),c._r=c.range.slice(),c._rl=b.simpleMap(c._r,c.r2l);var S=c._input,k={};k[c._attr+".range"]=c.range,k[c._attr+".autorange"]=c.autorange,e.call("_storeDirectGUIEdit",x.layout,x._fullLayout._preGUI,k),S.range=c.range.slice(),S.autorange=c.autorange}var P=c._anchorAxis;if(P&&P.rangeslider){var z=P.rangeslider[c._name];z&&z.rangemode==="auto"&&(z.range=u(x,c)),P._input.rangeslider[c._name]=b.extendFlat({},z)}}function y(x,c,L){L||(L={}),x._m||x.setScale();var S=[],k=[],P=c.length,z=L.padded||!1,I=L.tozero&&(x.type==="linear"||x.type==="-"),R=x.type==="log",D=!1,O=L.vpadLinearized||!1,F,Y,X,q,$,V,K,se,ue;function oe(ae){if(Array.isArray(ae))return D=!0,function(fe){return Math.max(Number(ae[fe]||0),0)};var ie=Math.max(Number(ae||0),0);return function(){return ie}}var U=oe((x._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),G=oe((x._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),re=oe(L.vpadplus||L.vpad),ee=oe(L.vpadminus||L.vpad);if(!D){if(se=1/0,ue=-1/0,R)for(F=0;F<P;F++)Y=c[F],Y<se&&Y>0&&(se=Y),Y>ue&&Y<w&&(ue=Y);else for(F=0;F<P;F++)Y=c[F],Y<se&&Y>-w&&(se=Y),Y>ue&&Y<w&&(ue=Y);c=[se,ue],P=2}var j={tozero:I,extrapad:z};function Q(ae){X=c[ae],!!l(X)&&(V=U(ae),K=G(ae),O?(q=x.c2l(X)-ee(ae),$=x.c2l(X)+re(ae)):(se=X-ee(ae),ue=X+re(ae),R&&se<ue/10&&(se=ue/10),q=x.c2l(se),$=x.c2l(ue)),I&&(q=Math.min(0,q),$=Math.max(0,$)),M(q)&&g(S,q,K,j),M($)&&A(k,$,V,j))}var ne=Math.min(6,P);for(F=0;F<ne;F++)Q(F);for(F=P-1;F>=ne;F--)Q(F);return{min:S,max:k,opts:L}}function g(x,c,L,S){m(x,c,L,S,_)}function A(x,c,L,S){m(x,c,L,S,T)}function m(x,c,L,S,k){for(var P=S.tozero,z=S.extrapad,I=!0,R=0;R<x.length&&I;R++){var D=x[R];if(k(D.val,c)&&D.pad>=L&&(D.extrapad||!z)){I=!1;break}else k(c,D.val)&&D.pad<=L&&(z||!D.extrapad)&&(x.splice(R,1),R--)}if(I){var O=P&&c===0;x.push({val:c,pad:O?0:L,extrapad:O?!1:z})}}function M(x){return l(x)&&Math.abs(x)<w}function _(x,c){return x<=c}function T(x,c){return x>=c}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib"),o=e.strTranslate,a=t("../../lib/svg_text_utils"),n=t("../../components/titles"),r=t("../../components/color"),u=t("../../components/drawing"),s=t("./layout_attributes"),i=t("./clean_ticks"),f=t("../../constants/numerical"),h=f.ONEMAXYEAR,p=f.ONEAVGYEAR,v=f.ONEMINYEAR,y=f.ONEMAXQUARTER,g=f.ONEAVGQUARTER,A=f.ONEMINQUARTER,m=f.ONEMAXMONTH,M=f.ONEAVGMONTH,_=f.ONEMINMONTH,T=f.ONEWEEK,x=f.ONEDAY,c=x/2,L=f.ONEHOUR,S=f.ONEMIN,k=f.ONESEC,P=f.MINUS_SIGN,z=f.BADNUM,I={K:"zeroline"},R={K:"gridline",L:"path"},D={K:"tick",L:"path"},O={K:"tick",L:"text"},F=t("../../constants/alignment"),Y=F.MID_SHIFT,X=F.CAP_SHIFT,q=F.LINE_SPACING,$=F.OPPOSITE_SIDE,V=3,K=B.exports={};K.setConvert=t("./set_convert");var se=t("./axis_autotype"),ue=t("./axis_ids"),oe=ue.idSort,U=ue.isLinked;K.id2name=ue.id2name,K.name2id=ue.name2id,K.cleanId=ue.cleanId,K.list=ue.list,K.listIds=ue.listIds,K.getFromId=ue.getFromId,K.getFromTrace=ue.getFromTrace;var G=t("./autorange");K.getAutoRange=G.getAutoRange,K.findExtremes=G.findExtremes;var re=1e-4;function ee(we){var Se=(we[1]-we[0])*re;return[we[0]-Se,we[1]+Se]}K.coerceRef=function(we,Se,De,Xe,$e,ot){var st=Xe.charAt(Xe.length-1),pt=De._fullLayout._subplots[st+"axis"],wt=Xe+"ref",Yt={};return $e||($e=pt[0]||(typeof ot=="string"?ot:ot[0])),ot||(ot=$e),pt=pt.concat(pt.map(function(mr){return mr+" domain"})),Yt[wt]={valType:"enumerated",values:pt.concat(ot?typeof ot=="string"?[ot]:ot:[]),dflt:$e},e.coerce(we,Se,Yt,wt)},K.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},K.coercePosition=function(we,Se,De,Xe,$e,ot){var st,pt,wt=K.getRefType(Xe);if(wt!=="range")st=e.ensureNumber,pt=De($e,ot);else{var Yt=K.getFromId(Se,Xe);ot=Yt.fraction2r(ot),pt=De($e,ot),st=Yt.cleanPos}we[$e]=st(pt)},K.cleanPosition=function(we,Se,De){var Xe=De==="paper"||De==="pixel"?e.ensureNumber:K.getFromId(Se,De).cleanPos;return Xe(we)},K.redrawComponents=function(we,Se){Se=Se||K.listIds(we);var De=we._fullLayout;function Xe($e,ot,st,pt){for(var wt=w.getComponentMethod($e,ot),Yt={},mr=0;mr<Se.length;mr++)for(var xr=De[K.id2name(Se[mr])],Tr=xr[st],yr=0;yr<Tr.length;yr++){var Dr=Tr[yr];if(!Yt[Dr]&&(wt(we,Dr),Yt[Dr]=1,pt))return}}Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0)};var j=K.getDataConversions=function(we,Se,De,Xe){var $e,ot=De==="x"||De==="y"||De==="z"?De:Xe;if(Array.isArray(ot)){if($e={type:se(Xe,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},K.setConvert($e),$e.type==="category")for(var st=0;st<Xe.length;st++)$e.d2c(Xe[st])}else $e=K.getFromTrace(we,Se,ot);return $e?{d2c:$e.d2c,c2d:$e.c2d}:ot==="ids"?{d2c:ne,c2d:ne}:{d2c:Q,c2d:Q}};function Q(we){return+we}function ne(we){return String(we)}K.getDataToCoordFunc=function(we,Se,De,Xe){return j(we,Se,De,Xe).d2c},K.counterLetter=function(we){var Se=we.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},K.minDtick=function(we,Se,De,Xe){["log","category","multicategory"].indexOf(we.type)!==-1||!Xe?we._minDtick=0:we._minDtick===void 0?(we._minDtick=Se,we._forceTick0=De):we._minDtick&&((we._minDtick/Se+1e-6)%1<2e-6&&((De-we._forceTick0)/Se%1+1.000001)%1<2e-6?(we._minDtick=Se,we._forceTick0=De):((Se/we._minDtick+1e-6)%1>2e-6||((De-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},K.saveRangeInitial=function(we,Se){for(var De=K.list(we,"",!0),Xe=!1,$e=0;$e<De.length;$e++){var ot=De[$e],st=ot._rangeInitial===void 0,pt=st||!(ot.range[0]===ot._rangeInitial[0]&&ot.range[1]===ot._rangeInitial[1]);(st&&ot.autorange===!1||Se&&pt)&&(ot._rangeInitial=ot.range.slice(),Xe=!0)}return Xe},K.saveShowSpikeInitial=function(we,Se){for(var De=K.list(we,"",!0),Xe=!1,$e="on",ot=0;ot<De.length;ot++){var st=De[ot],pt=st._showSpikeInitial===void 0,wt=pt||st.showspikes!==st._showspikes;(pt||Se&&wt)&&(st._showSpikeInitial=st.showspikes,Xe=!0),$e==="on"&&!st.showspikes&&($e="off")}return we._fullLayout._cartesianSpikesEnabled=$e,Xe},K.autoBin=function(we,Se,De,Xe,$e,ot){var st=e.aggNums(Math.min,null,we),pt=e.aggNums(Math.max,null,we);if(Se.type==="category"||Se.type==="multicategory")return{start:st-.5,end:pt+.5,size:Math.max(1,Math.round(ot)||1),_dataSpan:pt-st};$e||($e=Se.calendar);var wt;if(Se.type==="log"?wt={type:"linear",range:[st,pt]}:wt={type:Se.type,range:e.simpleMap([st,pt],Se.c2r,0,$e),calendar:$e},K.setConvert(wt),ot=ot&&i.dtick(ot,wt.type),ot)wt.dtick=ot,wt.tick0=i.tick0(void 0,wt.type,$e);else{var Yt;if(De)Yt=(pt-st)/De;else{var mr=e.distinctVals(we),xr=Math.pow(10,Math.floor(Math.log(mr.minDiff)/Math.LN10)),Tr=xr*e.roundUp(mr.minDiff/xr,[.9,1.9,4.9,9.9],!0);Yt=Math.max(Tr,2*e.stdev(we)/Math.pow(we.length,Xe?.25:.4)),l(Yt)||(Yt=1)}K.autoTicks(wt,Yt)}var yr=wt.dtick,Dr=K.tickIncrement(K.tickFirst(wt),yr,"reverse",$e),tn,wr;if(typeof yr=="number")Dr=ae(Dr,we,wt,st,pt),wr=1+Math.floor((pt-Dr)/yr),tn=Dr+wr*yr;else for(wt.dtick.charAt(0)==="M"&&(Dr=ie(Dr,we,yr,st,$e)),tn=Dr,wr=0;tn<=pt;)tn=K.tickIncrement(tn,yr,!1,$e),wr++;return{start:Se.c2r(Dr,0,$e),end:Se.c2r(tn,0,$e),size:yr,_dataSpan:pt-st}};function ae(we,Se,De,Xe,$e){var ot=0,st=0,pt=0,wt=0;function Yt(yr){return(1+(yr-we)*100/De.dtick)%100<2}for(var mr=0;mr<Se.length;mr++)Se[mr]%1==0?pt++:l(Se[mr])||wt++,Yt(Se[mr])&&ot++,Yt(Se[mr]+De.dtick/2)&&st++;var xr=Se.length-wt;if(pt===xr&&De.type!=="date")De.dtick<1?we=Xe-.5*De.dtick:(we-=.5,we+De.dtick<Xe&&(we+=De.dtick));else if(st<xr*.1&&(ot>xr*.3||Yt(Xe)||Yt($e))){var Tr=De.dtick/2;we+=we+Tr<Xe?Tr:-Tr}return we}function ie(we,Se,De,Xe,$e){var ot=e.findExactDates(Se,$e),st=.8;if(ot.exactDays>st){var pt=Number(De.substr(1));ot.exactYears>st&&pt%12==0?we=K.tickIncrement(we,"M6","reverse")+x*1.5:ot.exactMonths>st?we=K.tickIncrement(we,"M1","reverse")+x*15.5:we-=c;var wt=K.tickIncrement(we,De);if(wt<=Xe)return wt}return we}K.prepTicks=function(we,Se){var De=e.simpleMap(we.range,we.r2l,void 0,void 0,Se);if(we._dtickInit=we.dtick,we._tick0Init=we.tick0,we.tickmode==="auto"||!we.dtick){var Xe=we.nticks,$e;Xe||(we.type==="category"||we.type==="multicategory"?($e=we.tickfont?e.bigFont(we.tickfont.size||12):15,Xe=we._length/$e):($e=we._id.charAt(0)==="y"?40:80,Xe=e.constrain(we._length/$e,4,9)+1),we._name==="radialaxis"&&(Xe*=2)),we.tickmode==="array"&&(Xe*=100),we._roughDTick=Math.abs(De[1]-De[0])/Xe,K.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&me(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),Ye(we)};function fe(we){return+we.substring(1)}function me(we){var Se;function De(){return!(l(we.dtick)||we.dtick.charAt(0)!=="M")}var Xe=De(),$e=K.getTickFormat(we);if($e){var ot=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test($e)||(/%[HI]/.test($e)?(Se=L,ot&&!Xe&&we.dtick<L&&(we.dtick=L)):/%p/.test($e)?(Se=c,ot&&!Xe&&we.dtick<c&&(we.dtick=c)):/%[Aadejuwx]/.test($e)?(Se=x,ot&&!Xe&&we.dtick<x&&(we.dtick=x)):/%[UVW]/.test($e)?(Se=T,ot&&!Xe&&we.dtick<T&&(we.dtick=T)):/%[Bbm]/.test($e)?(Se=M,ot&&(Xe?fe(we.dtick)<1:we.dtick<_)&&(we.dtick="M1")):/%[q]/.test($e)?(Se=g,ot&&(Xe?fe(we.dtick)<3:we.dtick<A)&&(we.dtick="M3")):/%[Yy]/.test($e)&&(Se=p,ot&&(Xe?fe(we.dtick)<12:we.dtick<v)&&(we.dtick="M12")))}Xe=De(),Xe&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=Se}function ce(we,Se,De){for(var Xe=0;Xe<we.length;Xe++){var $e=we[Xe].value,ot=Xe,st=Xe+1;Xe<we.length-1?(ot=Xe,st=Xe+1):Xe>0?(ot=Xe-1,st=Xe):(ot=Xe,st=Xe);var pt=we[ot].value,wt=we[st].value,Yt=Math.abs(wt-pt),mr=De||Yt,xr=0;mr>=v?Yt>=v&&Yt<=h?xr=Yt:xr=p:De===g&&mr>=A?Yt>=A&&Yt<=y?xr=Yt:xr=g:mr>=_?Yt>=_&&Yt<=m?xr=Yt:xr=M:De===T&&mr>=T?xr=T:mr>=x?xr=x:De===c&&mr>=c?xr=c:De===L&&mr>=L&&(xr=L);var Tr;xr>=Yt&&(xr=Yt,Tr=!0);var yr=$e+xr;if(Se.rangebreaks&&xr>0){for(var Dr=84,tn=0,wr=0;wr<Dr;wr++){var gr=(wr+.5)/Dr;Se.maskBreaks($e*(1-gr)+gr*yr)!==z&&tn++}xr*=tn/Dr,xr||(we[Xe].drop=!0),Tr&&Yt>T&&(xr=Yt)}(xr>0||Xe===0)&&(we[Xe].periodX=$e+xr/2)}}K.calcTicks=function(Se,De){K.prepTicks(Se,De);var Xe=e.simpleMap(Se.range,Se.r2l,void 0,void 0,De);if(Se.tickmode==="array")return ye(Se);var $e=ee(Xe),ot=$e[0],st=$e[1],pt=Xe[1]<Xe[0],wt=Math.min(Xe[0],Xe[1]),Yt=Math.max(Xe[0],Xe[1]),mr=Se.type==="log"&&!(l(Se.dtick)||Se.dtick.charAt(0)==="L"),xr=Se.ticklabelmode==="period";if(Se._tmin=K.tickFirst(Se,De),Se._tmin<ot!==pt)return[];(Se.type==="category"||Se.type==="multicategory")&&(st=pt?Math.max(-.5,st):Math.min(Se._categories.length-.5,st));var Tr=Se._tmin;Se.rangebreaks&&Se._tick0Init!==Se.tick0&&(Tr=tr(Tr,Se),pt||(Tr=K.tickIncrement(Tr,Se.dtick,!pt,Se.calendar))),xr&&(Tr=K.tickIncrement(Tr,Se.dtick,!pt,Se.calendar));for(var yr=Math.max(1e3,Se._length||0),Dr=[],tn=null;pt?Tr>=st:Tr<=st;Tr=K.tickIncrement(Tr,Se.dtick,pt,Se.calendar)){if(Se.rangebreaks&&!pt){if(Tr<ot)continue;if(Se.maskBreaks(Tr)===z&&tr(Tr,Se)>=Yt)break}if(Dr.length>yr||Tr===tn)break;tn=Tr;var wr=!1;mr&&Tr!==(Tr|0)&&(wr=!0),Dr.push({minor:wr,value:Tr})}xr&&ce(Dr,Se,Se._definedDelta);var gr;if(Se.rangebreaks){var yn=Se._id.charAt(0)==="y",Gr=1;Se.tickmode==="auto"&&(Gr=Se.tickfont?Se.tickfont.size:12);var Ar=NaN;for(gr=Dr.length-1;gr>-1;gr--){if(Dr[gr].drop){Dr.splice(gr,1);continue}Dr[gr].value=tr(Dr[gr].value,Se);var nn=Se.c2p(Dr[gr].value);(yn?Ar>nn-Gr:Ar<nn+Gr)?Dr.splice(pt?gr+1:gr,1):Ar=nn}}kr(Se)&&Math.abs(Xe[1]-Xe[0])===360&&Dr.pop(),Se._tmax=(Dr[Dr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var fn=[],Xr,at;for(gr=0;gr<Dr.length;gr++){var Ft=Dr[gr].minor,er=Dr[gr].value;Xr=K.tickText(Se,er,!1,Ft),at=Dr[gr].periodX,at!==void 0&&(Xr.periodX=at,(at>Yt||at<wt)&&(at>Yt&&(Xr.periodX=Yt),at<wt&&(Xr.periodX=wt),Xr.text=" ",Se._prevDateHead="")),fn.push(Xr)}return Se._inCalcTicks=!1,fn};function ye(we){var Se=we.tickvals,De=we.ticktext,Xe=new Array(Se.length),$e=e.simpleMap(we.range,we.r2l),ot=ee($e),st=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),wt=0;Array.isArray(De)||(De=[]);var Yt=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var mr=0;mr<Se.length;mr++){var xr=Yt(Se[mr]);xr>st&&xr<pt&&(De[mr]===void 0?Xe[wt]=K.tickText(we,xr):Xe[wt]=qe(we,xr,String(De[mr])),wt++)}return wt<Se.length&&Xe.splice(wt,Se.length-wt),we.rangebreaks&&(Xe=Xe.filter(function(Tr){return we.maskBreaks(Tr.x)!==z})),Xe}var xe=[2,5,10],ke=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Oe=[1,2,3,7,14],He=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function Ie(we,Se,De){return Se*e.roundUp(we/Se,De)}K.autoTicks=function(we,Se){var De;function Xe(mr){return Math.pow(mr,Math.floor(Math.log(Se)/Math.LN10))}if(we.type==="date"){we.tick0=e.dateTick0(we.calendar,0);var $e=2*Se;if($e>p)Se/=p,De=Xe(10),we.dtick="M"+12*Ie(Se,De,xe);else if($e>M)Se/=M,we.dtick="M"+Ie(Se,1,ke);else if($e>x){we.dtick=Ie(Se,x,we._hasDayOfWeekBreaks?[1,2,7,14]:Oe);var ot=K.getTickFormat(we),st=we.ticklabelmode==="period";st&&(we._rawTick0=we.tick0),/%[uVW]/.test(ot)?we.tick0=e.dateTick0(we.calendar,2):we.tick0=e.dateTick0(we.calendar,1),st&&(we._dowTick0=we.tick0)}else $e>L?we.dtick=Ie(Se,L,ke):$e>S?we.dtick=Ie(Se,S,Ae):$e>k?we.dtick=Ie(Se,k,Ae):(De=Xe(10),we.dtick=Ie(Se,De,xe))}else if(we.type==="log"){we.tick0=0;var pt=e.simpleMap(we.range,we.r2l);if(Se>.7)we.dtick=Math.ceil(Se);else if(Math.abs(pt[1]-pt[0])<1){var wt=1.5*Math.abs((pt[1]-pt[0])/Se);Se=Math.abs(Math.pow(10,pt[1])-Math.pow(10,pt[0]))/wt,De=Xe(10),we.dtick="L"+Ie(Se,De,xe)}else we.dtick=Se>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(Se,1))):kr(we)?(we.tick0=0,De=1,we.dtick=Ie(Se,De,_e)):(we.tick0=0,De=Xe(10),we.dtick=Ie(Se,De,xe));if(we.dtick===0&&(we.dtick=1),!l(we.dtick)&&typeof we.dtick!="string"){var Yt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Yt)}};function Ye(we){var Se=we.dtick;if(we._tickexponent=0,!l(Se)&&typeof Se!="string"&&(Se=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var De=we.r2l(we.tick0),Xe=we.l2r(De).replace(/(^-|i)/g,""),$e=Xe.length;if(String(Se).charAt(0)==="M")$e>10||Xe.substr(5)!=="01-01"?we._tickround="d":we._tickround=+Se.substr(1)%12==0?"y":"m";else if(Se>=x&&$e<=10||Se>=x*15)we._tickround="d";else if(Se>=S&&$e<=16||Se>=L)we._tickround="M";else if(Se>=k&&$e<=19||Se>=S)we._tickround="S";else{var ot=we.l2r(De+Se).replace(/^-/,"").length;we._tickround=Math.max($e,ot)-20,we._tickround<0&&(we._tickround=4)}}else if(l(Se)||Se.charAt(0)==="L"){var st=we.range.map(we.r2d||Number);l(Se)||(Se=Number(Se.substr(1))),we._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var pt=Math.max(Math.abs(st[0]),Math.abs(st[1])),wt=Math.floor(Math.log(pt)/Math.LN10+.01),Yt=we.minexponent===void 0?3:we.minexponent;Math.abs(wt)>Yt&&(Bt(we.exponentformat)&&!Lt(wt)?we._tickexponent=3*Math.round((wt-1)/3):we._tickexponent=wt)}else we._tickround=null}K.tickIncrement=function(we,Se,De,Xe){var $e=De?-1:1;if(l(Se))return e.increment(we,$e*Se);var ot=Se.charAt(0),st=$e*Number(Se.substr(1));if(ot==="M")return e.incrementMonth(we,st,Xe);if(ot==="L")return Math.log(Math.pow(10,we)+st)/Math.LN10;if(ot==="D"){var pt=Se==="D2"?Ge:He,wt=we+$e*.01,Yt=e.roundUp(e.mod(wt,1),pt,De);return Math.floor(wt)+Math.log(d.round(Math.pow(10,Yt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},K.tickFirst=function(we,Se){var De=we.r2l||Number,Xe=e.simpleMap(we.range,De,void 0,void 0,Se),$e=Xe[1]<Xe[0],ot=$e?Math.floor:Math.ceil,st=ee(Xe)[0],pt=we.dtick,wt=De(we.tick0);if(l(pt)){var Yt=ot((st-wt)/pt)*pt+wt;return(we.type==="category"||we.type==="multicategory")&&(Yt=e.constrain(Yt,0,we._categories.length-1)),Yt}var mr=pt.charAt(0),xr=Number(pt.substr(1));if(mr==="M"){for(var Tr=0,yr=wt,Dr,tn,wr;Tr<10;){if(Dr=K.tickIncrement(yr,pt,$e,we.calendar),(Dr-st)*(yr-st)<=0)return $e?Math.min(yr,Dr):Math.max(yr,Dr);tn=(st-(yr+Dr)/2)/(Dr-yr),wr=mr+(Math.abs(Math.round(tn))||1)*xr,yr=K.tickIncrement(yr,wr,tn<0?!$e:$e,we.calendar),Tr++}return e.error("tickFirst did not converge",we),yr}else{if(mr==="L")return Math.log(ot((Math.pow(10,st)-wt)/xr)*xr+wt)/Math.LN10;if(mr==="D"){var gr=pt==="D2"?Ge:He,yn=e.roundUp(e.mod(st,1),gr,$e);return Math.floor(st)+Math.log(d.round(Math.pow(10,yn),1))/Math.LN10}else throw"unrecognized dtick "+String(pt)}},K.tickText=function(we,Se,De,Xe){var $e=qe(we,Se),ot=we.tickmode==="array",st=De||ot,pt=we.type,wt=pt==="category"?we.d2l_noadd:we.d2l,Yt;if(ot&&Array.isArray(we.ticktext)){var mr=e.simpleMap(we.range,we.r2l),xr=(Math.abs(mr[1]-mr[0])-(we._lBreaks||0))/1e4;for(Yt=0;Yt<we.ticktext.length&&!(Math.abs(Se-wt(we.tickvals[Yt]))<xr);Yt++);if(Yt<we.ticktext.length)return $e.text=String(we.ticktext[Yt]),$e}function Tr(tn){if(tn===void 0)return!0;if(De)return tn==="none";var wr={first:we._tmin,last:we._tmax}[tn];return tn!=="all"&&Se!==wr}var yr=De?"never":we.exponentformat!=="none"&&Tr(we.showexponent)?"hide":"";if(pt==="date"?Ue(we,$e,De,st):pt==="log"?Re(we,$e,De,st,yr):pt==="category"?Ve(we,$e):pt==="multicategory"?dt(we,$e,De):kr(we)?Gt(we,$e,De,st,yr):Dt(we,$e,De,st,yr),Xe||(we.tickprefix&&!Tr(we.showtickprefix)&&($e.text=we.tickprefix+$e.text),we.ticksuffix&&!Tr(we.showticksuffix)&&($e.text+=we.ticksuffix)),we.tickson==="boundaries"||we.showdividers){var Dr=function(tn){var wr=we.l2p(tn);return wr>=0&&wr<=we._length?tn:null};$e.xbnd=[Dr($e.x-.5),Dr($e.x+we.dtick-.5)]}return $e},K.hoverLabelText=function(we,Se,De){De&&(we=e.extendFlat({},we,{hoverformat:De}));var Xe=Array.isArray(Se)?Se[0]:Se,$e=Array.isArray(Se)?Se[1]:void 0;if($e!==void 0&&$e!==Xe)return K.hoverLabelText(we,Xe,De)+" - "+K.hoverLabelText(we,$e,De);var ot=we.type==="log"&&Xe<=0,st=K.tickText(we,we.c2l(ot?-Xe:Xe),"hover").text;return ot?Xe===0?"0":P+st:st};function qe(we,Se,De){var Xe=we.tickfont||{};return{x:Se,dx:0,dy:0,text:De||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}function Ue(we,Se,De,Xe){var $e=we._tickround,ot=De&&we.hoverformat||K.getTickFormat(we);Xe&&(l($e)?$e=4:$e={y:"m",m:"d",d:"M",M:"S",S:4}[$e]);var st=e.formatDate(Se.x,ot,$e,we._dateFormat,we.calendar,we._extraFormat),pt,wt=st.indexOf(`
`);if(wt!==-1&&(pt=st.substr(wt+1),st=st.substr(0,wt)),Xe&&(st==="00:00:00"||st==="00:00"?(st=pt,pt=""):st.length===8&&(st=st.replace(/:00$/,""))),pt)if(De)$e==="d"?st+=", "+pt:st=pt+(st?", "+st:"");else if(!we._inCalcTicks||we._prevDateHead!==pt)we._prevDateHead=pt,st+="<br>"+pt;else{var Yt=Or(we),mr=we._trueSide||we.side;(!Yt&&mr==="top"||Yt&&mr==="bottom")&&(st+="<br> ")}Se.text=st}function Re(we,Se,De,Xe,$e){var ot=we.dtick,st=Se.x,pt=we.tickformat,wt=typeof ot=="string"&&ot.charAt(0);if($e==="never"&&($e=""),Xe&&wt!=="L"&&(ot="L3",wt="L"),pt||wt==="L")Se.text=Mt(Math.pow(10,st),we,$e,Xe);else if(l(ot)||wt==="D"&&e.mod(st+.01,1)<.1){var Yt=Math.round(st),mr=Math.abs(Yt),xr=we.exponentformat;xr==="power"||Bt(xr)&&Lt(Yt)?(Yt===0?Se.text=1:Yt===1?Se.text="10":Se.text="10<sup>"+(Yt>1?"":P)+mr+"</sup>",Se.fontSize*=1.25):(xr==="e"||xr==="E")&&mr>2?Se.text="1"+xr+(Yt>0?"+":P)+mr:(Se.text=Mt(Math.pow(10,st),we,"","fakehover"),ot==="D1"&&we._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(wt==="D")Se.text=String(Math.round(Math.pow(10,e.mod(st,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(ot);if(we.dtick==="D1"){var Tr=String(Se.text).charAt(0);(Tr==="0"||Tr==="1")&&(we._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(we.range[1]>we.range[0]?1:-1)*Se.fontSize*(st<0?.5:.25)))}}function Ve(we,Se){var De=we._categories[Math.round(Se.x)];De===void 0&&(De=""),Se.text=String(De)}function dt(we,Se,De){var Xe=Math.round(Se.x),$e=we._categories[Xe]||[],ot=$e[1]===void 0?"":String($e[1]),st=$e[0]===void 0?"":String($e[0]);De?Se.text=st+" - "+ot:(Se.text=ot,Se.text2=st)}function Dt(we,Se,De,Xe,$e){$e==="never"?$e="":we.showexponent==="all"&&Math.abs(Se.x/we.dtick)<1e-6&&($e="hide"),Se.text=Mt(Se.x,we,$e,Xe)}function Gt(we,Se,De,Xe,$e){if(we.thetaunit==="radians"&&!De){var ot=Se.x/180;if(ot===0)Se.text="0";else{var st=kt(ot);if(st[1]>=100)Se.text=Mt(e.deg2rad(Se.x),we,$e,Xe);else{var pt=Se.x<0;st[1]===1?st[0]===1?Se.text="\u03C0":Se.text=st[0]+"\u03C0":Se.text=["<sup>",st[0],"</sup>","\u2044","<sub>",st[1],"</sub>","\u03C0"].join(""),pt&&(Se.text=P+Se.text)}}}else Se.text=Mt(Se.x,we,$e,Xe)}function kt(we){function Se(pt,wt){return Math.abs(pt-wt)<=1e-6}function De(pt,wt){return Se(wt,0)?pt:De(wt,pt%wt)}function Xe(pt){for(var wt=1;!Se(Math.round(pt*wt)/wt,pt);)wt*=10;return wt}var $e=Xe(we),ot=we*$e,st=Math.abs(De(ot,$e));return[Math.round(ot/st),Math.round($e/st)]}var zt=["f","p","n","\u03BC","m","","k","M","G","T"];function Bt(we){return we==="SI"||we==="B"}function Lt(we){return we>14||we<-15}function Mt(we,Se,De,Xe){var $e=we<0,ot=Se._tickround,st=De||Se.exponentformat||"B",pt=Se._tickexponent,wt=K.getTickFormat(Se),Yt=Se.separatethousands;if(Xe){var mr={exponentformat:st,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:l(we)&&Math.abs(we)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,we||1]};Ye(mr),ot=(Number(mr._tickround)||0)+4,pt=mr._tickexponent,Se.hoverformat&&(wt=Se.hoverformat)}if(wt)return Se._numFormat(wt)(we).replace(/-/g,P);var xr=Math.pow(10,-ot)/2;if(st==="none"&&(pt=0),we=Math.abs(we),we<xr)we="0",$e=!1;else{if(we+=xr,pt&&(we*=Math.pow(10,-pt),ot+=pt),ot===0)we=String(Math.floor(we));else if(ot<0){we=String(Math.round(we)),we=we.substr(0,we.length+ot);for(var Tr=ot;Tr<0;Tr++)we+="0"}else{we=String(we);var yr=we.indexOf(".")+1;yr&&(we=we.substr(0,yr+ot).replace(/\.?0+$/,""))}we=e.numSeparate(we,Se._separators,Yt)}if(pt&&st!=="hide"){Bt(st)&&Lt(pt)&&(st="power");var Dr;pt<0?Dr=P+-pt:st!=="power"?Dr="+"+pt:Dr=String(pt),st==="e"||st==="E"?we+=st+Dr:st==="power"?we+="\xD710<sup>"+Dr+"</sup>":st==="B"&&pt===9?we+="B":Bt(st)&&(we+=zt[pt/3+5])}return $e?P+we:we}K.getTickFormat=function(we){var Se;function De(wt){return typeof wt!="string"?wt:Number(wt.replace("M",""))*M}function Xe(wt,Yt){var mr=["L","D"];if(typeof wt==typeof Yt){if(typeof wt=="number")return wt-Yt;var xr=mr.indexOf(wt.charAt(0)),Tr=mr.indexOf(Yt.charAt(0));return xr===Tr?Number(wt.replace(/(L|D)/g,""))-Number(Yt.replace(/(L|D)/g,"")):xr-Tr}else return typeof wt=="number"?1:-1}function $e(wt,Yt,mr){var xr=mr||function(Dr){return Dr},Tr=Yt[0],yr=Yt[1];return(!Tr&&typeof Tr!="number"||xr(Tr)<=xr(wt))&&(!yr&&typeof yr!="number"||xr(yr)>=xr(wt))}function ot(wt,Yt){var mr=Yt[0]===null,xr=Yt[1]===null,Tr=Xe(wt,Yt[0])>=0,yr=Xe(wt,Yt[1])<=0;return(mr||Tr)&&(xr||yr)}var st,pt;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(Se=0;Se<we.tickformatstops.length;Se++)if(pt=we.tickformatstops[Se],pt.enabled&&$e(we.dtick,pt.dtickrange,De)){st=pt;break}break}case"log":{for(Se=0;Se<we.tickformatstops.length;Se++)if(pt=we.tickformatstops[Se],pt.enabled&&ot(we.dtick,pt.dtickrange)){st=pt;break}break}}return st?st.value:we.tickformat},K.getSubplots=function(we,Se){var De=we._fullLayout._subplots,Xe=De.cartesian.concat(De.gl2d||[]),$e=Se?K.findSubplotsWithAxis(Xe,Se):Xe;return $e.sort(function(ot,st){var pt=ot.substr(1).split("y"),wt=st.substr(1).split("y");return pt[0]===wt[0]?+pt[1]-+wt[1]:+pt[0]-+wt[0]}),$e},K.findSubplotsWithAxis=function(we,Se){for(var De=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),Xe=[],$e=0;$e<we.length;$e++){var ot=we[$e];De.test(ot)&&Xe.push(ot)}return Xe},K.makeClipPaths=function(we){var Se=we._fullLayout;if(!Se._hasOnlyLargeSploms){var De={_offset:0,_length:Se.width,_id:""},Xe={_offset:0,_length:Se.height,_id:""},$e=K.list(we,"x",!0),ot=K.list(we,"y",!0),st=[],pt,wt;for(pt=0;pt<$e.length;pt++)for(st.push({x:$e[pt],y:Xe}),wt=0;wt<ot.length;wt++)pt===0&&st.push({x:De,y:ot[wt]}),st.push({x:$e[pt],y:ot[wt]});var Yt=Se._clips.selectAll(".axesclip").data(st,function(mr){return mr.x._id+mr.y._id});Yt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(mr){return"clip"+Se._uid+mr.x._id+mr.y._id}).append("rect"),Yt.exit().remove(),Yt.each(function(mr){d.select(this).select("rect").attr({x:mr.x._offset||0,y:mr.y._offset||0,width:mr.x._length||1,height:mr.y._length||1})})}},K.draw=function(we,Se,De){var Xe=we._fullLayout;Se==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(ot){var st=ot[0],pt=Xe._plots[st];if(pt){var wt=pt.xaxis,Yt=pt.yaxis;pt.xaxislayer.selectAll("."+wt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Yt._id+"tick").remove(),pt.xaxislayer.selectAll("."+wt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Yt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+wt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Yt._id+"divider").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+wt._id+"title").remove(),Xe._infolayer.select(".g-"+Yt._id+"title").remove()}});var $e=!Se||Se==="redraw"?K.listIds(we):Se;return e.syncOrAsync($e.map(function(ot){return function(){if(!!ot){var st=K.getFromId(we,ot),pt=K.drawOne(we,st,De);return st._r=st.range.slice(),st._rl=e.simpleMap(st._r,st.r2l),pt}}}))},K.drawOne=function(we,Se,De){De=De||{};var Xe,$e,ot;Se.setScale();var st=we._fullLayout,pt=Se._id,wt=pt.charAt(0),Yt=K.counterLetter(pt),mr=st._plots[Se._mainSubplot];if(!mr)return;var xr=mr[wt+"axislayer"],Tr=Se._mainLinePosition,yr=Se._mainMirrorPosition,Dr=Se._vals=K.calcTicks(Se),tn=[Se.mirror,Tr,yr].join("_");for(Xe=0;Xe<Dr.length;Xe++)Dr[Xe].axInfo=tn;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var wr={};function gr(ca){var ra=pt+(ca||"tick");return wr[ra]||(wr[ra]=Ce(Se,ra)),wr[ra]}if(!!Se.visible){var yn=K.makeTransTickFn(Se),Gr=K.makeTransTickLabelFn(Se),Ar,nn,fn=Se.ticks==="inside",Xr=Se.ticks==="outside";if(Se.tickson==="boundaries"){var at=it(Se,Dr);nn=K.clipEnds(Se,at),Ar=fn?nn:at}else nn=K.clipEnds(Se,Dr),Ar=fn&&Se.ticklabelmode!=="period"?nn:Dr;var Ft=Se._gridVals=nn,er=Qe(Se,Dr);if(!st._hasOnlyLargeSploms){var hr=Se._subplotsWith,Yr={};for(Xe=0;Xe<hr.length;Xe++){$e=hr[Xe],ot=st._plots[$e];var zr=ot[Yt+"axis"],Pr=zr._mainAxis._id;if(!Yr[Pr]){Yr[Pr]=1;var br=wt==="x"?"M0,"+zr._offset+"v"+zr._length:"M"+zr._offset+",0h"+zr._length;K.drawGrid(we,Se,{vals:Ft,counterAxis:zr,layer:ot.gridlayer.select("."+pt),path:br,transFn:yn}),K.drawZeroLine(we,Se,{counterAxis:zr,layer:ot.zerolinelayer,path:br,transFn:yn})}}}var jr=K.getTickSigns(Se),zn=[];if(Se.ticks){var kn=K.makeTickPath(Se,Tr,jr[2]),ta,ia;Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(ta=K.makeTickPath(Se,yr,jr[3]),ia=kn+ta):(ta="",ia=kn);var Aa;if(Se.showdividers&&Xr&&Se.tickson==="boundaries"){var ya={};for(Xe=0;Xe<er.length;Xe++)ya[er[Xe].x]=1;Aa=function(ca){return ya[ca.x]?ta:ia}}else Aa=ia;K.drawTicks(we,Se,{vals:Ar,layer:xr,path:Aa,transFn:yn}),Se.mirror==="allticks"&&(zn=Object.keys(Se._linepositions||{}))}for(Xe=0;Xe<zn.length;Xe++){$e=zn[Xe],ot=st._plots[$e];var pr=Se._linepositions[$e]||[],vn=K.makeTickPath(Se,pr[0],jr[0])+K.makeTickPath(Se,pr[1],jr[1]);K.drawTicks(we,Se,{vals:Ar,layer:ot[wt+"axislayer"],path:vn,transFn:yn})}var $r=[];if($r.push(function(){return K.drawLabels(we,Se,{vals:Dr,layer:xr,plotinfo:ot,transFn:Gr,labelFns:K.makeLabelFns(Se,Tr)})}),Se.type==="multicategory"){var Fn={x:2,y:10}[wt];$r.push(function(){var ca={x:"height",y:"width"}[wt],ra=gr()[ca]+Fn+(Se._tickAngles[pt+"tick"]?Se.tickfont.size*q:0);return K.drawLabels(we,Se,{vals:ht(Se,Dr),layer:xr,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:yn,labelFns:K.makeLabelFns(Se,Tr+ra*jr[4])})}),$r.push(function(){return Se._depth=jr[4]*(gr("tick2")[Se.side]-Tr),Pt(we,Se,{vals:er,layer:xr,path:K.makeTickPath(Se,Tr,jr[4],Se._depth),transFn:yn})})}else Se.title.hasOwnProperty("standoff")&&$r.push(function(){Se._depth=jr[4]*(gr()[Se.side]-Tr)});var Nn=w.getComponentMethod("rangeslider","isVisible")(Se);return $r.push(function(){var ca=Se.side.charAt(0),ra=$[Se.side].charAt(0),Un=K.getPxPosition(we,Se),ua=Xr?Se.ticklen:0,da,ur,Rr,on;if((Se.automargin||Nn)&&(Se.type==="multicategory"?da=gr("tick2"):(da=gr(),wt==="x"&&ca==="b"&&(Se._depth=Math.max(da.width>0?da.bottom-Un:0,ua)))),Se.automargin){ur={x:0,y:0,r:0,l:0,t:0,b:0};var rn=[0,1];if(wt==="x"){if(ca==="b"?ur[ca]=Se._depth:(ur[ca]=Se._depth=Math.max(da.width>0?Un-da.top:0,ua),rn.reverse()),da.width>0){var gn=da.right-(Se._offset+Se._length);gn>0&&(ur.xr=1,ur.r=gn);var wn=Se._offset-da.left;wn>0&&(ur.xl=0,ur.l=wn)}}else if(ca==="l"?ur[ca]=Se._depth=Math.max(da.height>0?Un-da.left:0,ua):(ur[ca]=Se._depth=Math.max(da.height>0?da.right-Un:0,ua),rn.reverse()),da.height>0){var pn=da.bottom-(Se._offset+Se._length);pn>0&&(ur.yb=0,ur.b=pn);var cr=Se._offset-da.top;cr>0&&(ur.yt=1,ur.t=cr)}ur[Yt]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[rn[0]],Se.title.text!==st._dfltTitle[wt]&&(ur[ca]+=St(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(Rr={x:0,y:0,r:0,l:0,t:0,b:0},Rr[ra]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(Rr[ra]+=ua),Se.mirror===!0||Se.mirror==="ticks"?Rr[Yt]=Se._anchorAxis.domain[rn[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(Rr[Yt]=[Se._counterDomainMin,Se._counterDomainMax][rn[1]]))}Nn&&(on=w.getComponentMethod("rangeslider","autoMarginOpts")(we,Se)),b.autoMargin(we,gt(Se),ur),b.autoMargin(we,Et(Se),Rr),b.autoMargin(we,rr(Se),on)}),!De.skipTitle&&!(Nn&&Se.side==="bottom")&&$r.push(function(){return Nt(we,Se)}),e.syncOrAsync($r)}};function it(we,Se){var De=[],Xe,$e=function(ot,st){var pt=ot.xbnd[st];pt!==null&&De.push(e.extendFlat({},ot,{x:pt}))};if(Se.length){for(Xe=0;Xe<Se.length;Xe++)$e(Se[Xe],0);$e(Se[Xe-1],1)}return De}function ht(we,Se){for(var De=[],Xe={},$e=0;$e<Se.length;$e++){var ot=Se[$e];Xe[ot.text2]?Xe[ot.text2].push(ot.x):Xe[ot.text2]=[ot.x]}for(var st in Xe)De.push(qe(we,e.interp(Xe[st],.5),st));return De}function Qe(we,Se){var De=[],Xe,$e,ot=Se.length&&Se[Se.length-1].x<Se[0].x,st=function(wt,Yt){var mr=wt.xbnd[Yt];mr!==null&&De.push(e.extendFlat({},wt,{x:mr}))};if(we.showdividers&&Se.length){for(Xe=0;Xe<Se.length;Xe++){var pt=Se[Xe];pt.text2!==$e&&st(pt,ot?1:0),$e=pt.text2}st(Se[Xe-1],ot?0:1)}return De}function Ce(we,Se){var De,Xe,$e,ot;return we._selections[Se].size()?(De=1/0,Xe=-1/0,$e=1/0,ot=-1/0,we._selections[Se].each(function(){var st=Je(this),pt=u.bBox(st.node().parentNode);De=Math.min(De,pt.top),Xe=Math.max(Xe,pt.bottom),$e=Math.min($e,pt.left),ot=Math.max(ot,pt.right)})):(De=0,Xe=0,$e=0,ot=0),{top:De,bottom:Xe,left:$e,right:ot,height:Xe-De,width:ot-$e}}K.getTickSigns=function(we){var Se=we._id.charAt(0),De={x:"top",y:"right"}[Se],Xe=we.side===De?1:-1,$e=[-1,1,Xe,-Xe];return we.ticks!=="inside"==(Se==="x")&&($e=$e.map(function(ot){return-ot})),we.side&&$e.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),$e},K.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(Se){return o(we._offset+we.l2p(Se.x),0)}:function(Se){return o(0,we._offset+we.l2p(Se.x))}},K.makeTransTickLabelFn=function(we){var Se=rt(we),De=Se[0],Xe=Se[1];return we._id.charAt(0)==="x"?function($e){return o(De+we._offset+we.l2p(je($e)),Xe)}:function($e){return o(Xe,De+we._offset+we.l2p(je($e)))}};function je(we){return we.periodX!==void 0?we.periodX:we.x}function rt(we){var Se=we.ticklabelposition||"",De=function(yr){return Se.indexOf(yr)!==-1},Xe=De("top"),$e=De("left"),ot=De("right"),st=De("bottom"),pt=De("inside"),wt=st||$e||Xe||ot;if(!wt&&!pt)return[0,0];var Yt=we.side,mr=wt?(we.tickwidth||0)/2:0,xr=V,Tr=we.tickfont?we.tickfont.size:12;return(st||Xe)&&(mr+=Tr*X,xr+=(we.linewidth||0)/2),($e||ot)&&(mr+=(we.linewidth||0)/2,xr+=V),pt&&Yt==="top"&&(xr-=Tr*(1-X)),($e||Xe)&&(mr=-mr),(Yt==="bottom"||Yt==="right")&&(xr=-xr),[wt?mr:0,pt?xr:0]}K.makeTickPath=function(we,Se,De,Xe){Xe=Xe!==void 0?Xe:we.ticklen;var $e=we._id.charAt(0),ot=(we.linewidth||1)/2;return $e==="x"?"M0,"+(Se+ot*De)+"v"+Xe*De:"M"+(Se+ot*De)+",0h"+Xe*De},K.makeLabelFns=function(we,Se,De){var Xe=we.ticklabelposition||"",$e=function(Yr){return Xe.indexOf(Yr)!==-1},ot=$e("top"),st=$e("left"),pt=$e("right"),wt=$e("bottom"),Yt=wt||st||ot||pt,mr=$e("inside"),xr=Xe==="inside"&&we.ticks==="inside"||!mr&&we.ticks==="outside"&&we.tickson!=="boundaries",Tr=0,yr=0,Dr=xr?we.ticklen:0;if(mr?Dr*=-1:Yt&&(Dr=0),xr&&(Tr+=Dr,De)){var tn=e.deg2rad(De);Tr=Dr*Math.cos(tn)+1,yr=Dr*Math.sin(tn)}we.showticklabels&&(xr||we.showline)&&(Tr+=.2*we.tickfont.size),Tr+=(we.linewidth||1)/2*(mr?-1:1);var wr={labelStandoff:Tr,labelShift:yr},gr,yn,Gr,Ar,nn=0,fn=we.side,Xr=we._id.charAt(0),at=we.tickangle,Ft;if(Xr==="x")Ft=!mr&&fn==="bottom"||mr&&fn==="top",Ar=Ft?1:-1,mr&&(Ar*=-1),gr=yr*Ar,yn=Se+Tr*Ar,Gr=Ft?1:-.2,Math.abs(at)===90&&(mr?Gr+=Y:at===-90&&fn==="bottom"?Gr=X:at===90&&fn==="top"?Gr=Y:Gr=.5,nn=Y/2*(at/90)),wr.xFn=function(Yr){return Yr.dx+gr+nn*Yr.fontSize},wr.yFn=function(Yr){return Yr.dy+yn+Yr.fontSize*Gr},wr.anchorFn=function(Yr,zr){if(Yt){if(st)return"end";if(pt)return"start"}return!l(zr)||zr===0||zr===180?"middle":zr*Ar<0!==mr?"end":"start"},wr.heightFn=function(Yr,zr,Pr){return zr<-60||zr>60?-.5*Pr:we.side==="top"!==mr?-Pr:0};else if(Xr==="y"){if(Ft=!mr&&fn==="left"||mr&&fn==="right",Ar=Ft?1:-1,mr&&(Ar*=-1),gr=Tr,yn=yr*Ar,Gr=0,!mr&&Math.abs(at)===90&&(at===-90&&fn==="left"||at===90&&fn==="right"?Gr=X:Gr=.5),mr){var er=l(at)?+at:0;if(er!==0){var hr=e.deg2rad(er);nn=Math.abs(Math.sin(hr))*X*Ar,Gr=0}}wr.xFn=function(Yr){return Yr.dx+Se-(gr+Yr.fontSize*Gr)*Ar+nn*Yr.fontSize},wr.yFn=function(Yr){return Yr.dy+yn+Yr.fontSize*Y},wr.anchorFn=function(Yr,zr){return l(zr)&&Math.abs(zr)===90?"middle":Ft?"end":"start"},wr.heightFn=function(Yr,zr,Pr){return we.side==="right"&&(zr*=-1),zr<-30?-Pr:zr<30?-.5*Pr:0}}return wr};function ut(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}K.drawTicks=function(we,Se,De){De=De||{};var Xe=Se._id+"tick",$e=De.vals;Se.ticklabelmode==="period"&&($e=$e.slice(),$e.shift());var ot=De.layer.selectAll("path."+Xe).data(Se.ticks?$e:[],ut);ot.exit().remove(),ot.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",De.crisp!==!1).call(r.stroke,Se.tickcolor).style("stroke-width",u.crispRound(we,Se.tickwidth,1)+"px").attr("d",De.path).style("display",null),et(Se,[D]),ot.attr("transform",De.transFn)},K.drawGrid=function(we,Se,De){De=De||{};var Xe=Se._id+"grid",$e=De.vals,ot=De.counterAxis;if(Se.showgrid===!1)$e=[];else if(ot&&K.shouldShowZeroLine(we,Se,ot))for(var st=Se.tickmode==="array",pt=0;pt<$e.length;pt++){var wt=$e[pt].x;if(st?!wt:Math.abs(wt)<Se.dtick/100)if($e=$e.slice(0,pt).concat($e.slice(pt+1)),st)pt--;else break}var Yt=De.layer.selectAll("path."+Xe).data($e,ut);Yt.exit().remove(),Yt.enter().append("path").classed(Xe,1).classed("crisp",De.crisp!==!1),Se._gw=u.crispRound(we,Se.gridwidth,1),Yt.attr("transform",De.transFn).attr("d",De.path).call(r.stroke,Se.gridcolor||"#ddd").style("stroke-width",Se._gw+"px").style("display",null),et(Se,[R]),typeof De.path=="function"&&Yt.attr("d",De.path)},K.drawZeroLine=function(we,Se,De){De=De||De;var Xe=Se._id+"zl",$e=K.shouldShowZeroLine(we,Se,De.counterAxis),ot=De.layer.selectAll("path."+Xe).data($e?[{x:0,id:Se._id}]:[]);ot.exit().remove(),ot.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",De.crisp!==!1).each(function(){De.layer.selectAll("path").sort(function(st,pt){return oe(st.id,pt.id)})}),ot.attr("transform",De.transFn).attr("d",De.path).call(r.stroke,Se.zerolinecolor||r.defaultLine).style("stroke-width",u.crispRound(we,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),et(Se,[I])},K.drawLabels=function(we,Se,De){De=De||{};var Xe=we._fullLayout,$e=Se._id,ot=$e.charAt(0),st=De.cls||$e+"tick",pt=De.vals,wt=De.labelFns,Yt=De.secondary?0:Se.tickangle,mr=(Se._prevTickAngles||{})[st],xr=De.layer.selectAll("g."+st).data(Se.showticklabels?pt:[],ut),Tr=[];xr.enter().append("g").classed(st,1).append("text").attr("text-anchor","middle").each(function(Ar){var nn=d.select(this),fn=we._promises.length;nn.call(a.positionText,wt.xFn(Ar),wt.yFn(Ar)).call(u.font,Ar.font,Ar.fontSize,Ar.fontColor).text(Ar.text).call(a.convertToTspans,we),we._promises[fn]?Tr.push(we._promises.pop().then(function(){yr(nn,Yt)})):yr(nn,Yt)}),et(Se,[O]),xr.exit().remove(),De.repositionOnUpdate&&xr.each(function(Ar){d.select(this).select("text").call(a.positionText,wt.xFn(Ar),wt.yFn(Ar))});function yr(Ar,nn){Ar.each(function(fn){var Xr=d.select(this),at=Xr.select(".text-math-group"),Ft=wt.anchorFn(fn,nn),er=De.transFn.call(Xr.node(),fn)+(l(nn)&&+nn!=0?" rotate("+nn+","+wt.xFn(fn)+","+(wt.yFn(fn)-fn.fontSize/2)+")":""),hr=a.lineCount(Xr),Yr=q*fn.fontSize,zr=wt.heightFn(fn,l(nn)?+nn:0,(hr-1)*Yr);if(zr&&(er+=o(0,zr)),at.empty()){var Pr=Xr.select("text");Pr.attr({transform:er,"text-anchor":Ft}),Pr.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var br=u.bBox(at.node()).width,jr=br*{end:-.5,start:.5}[Ft];at.attr("transform",er+o(jr,0))}})}Se._adjustTickLabelsOverflow=function(){var Ar=Se.ticklabeloverflow;if(!(!Ar||Ar==="allow")){var nn=Ar.indexOf("hide")!==-1,fn=Se._id.charAt(0)==="x",Xr=0,at=fn?we._fullLayout.width:we._fullLayout.height;if(Ar.indexOf("domain")!==-1){var Ft=e.simpleMap(Se.range,Se.r2l);Xr=Se.l2p(Ft[0])+Se._offset,at=Se.l2p(Ft[1])+Se._offset}var er=Math.min(Xr,at),hr=Math.max(Xr,at),Yr=Se.side,zr=1/0,Pr=-1/0;xr.each(function(kn){var ta=d.select(this),ia=ta.select(".text-math-group");if(ia.empty()){var Aa=u.bBox(ta.node()),ya=0;fn?(Aa.right>hr||Aa.left<er)&&(ya=1):(Aa.bottom>hr||Aa.top+(Se.tickangle?0:kn.fontSize/4)<er)&&(ya=1);var pr=ta.select("text");ya?nn&&pr.style("opacity",0):(pr.style("opacity",1),Yr==="bottom"||Yr==="right"?zr=Math.min(zr,fn?Aa.top:Aa.left):zr=-1/0,Yr==="top"||Yr==="left"?Pr=Math.max(Pr,fn?Aa.bottom:Aa.right):Pr=1/0)}});for(var br in Xe._plots){var jr=Xe._plots[br];if(!(Se._id!==jr.xaxis._id&&Se._id!==jr.yaxis._id)){var zn=fn?jr.yaxis:jr.xaxis;zn&&(zn["_visibleLabelMin_"+Se._id]=zr,zn["_visibleLabelMax_"+Se._id]=Pr)}}}},Se._hideCounterAxisInsideTickLabels=function(Ar){var nn=Se._id.charAt(0)==="x",fn=[];for(var Xr in Xe._plots){var at=Xe._plots[Xr];Se._id!==at.xaxis._id&&Se._id!==at.yaxis._id||fn.push(nn?at.yaxis:at.xaxis)}fn.forEach(function(Ft,er){Ft&&Or(Ft)&&(Ar||[I,R,D,O]).forEach(function(hr){var Yr=hr.K==="tick"&&hr.L==="text"&&Se.ticklabelmode==="period",zr=Xe._plots[Se._mainSubplot],Pr;hr.K===I.K?Pr=zr.zerolinelayer.selectAll("."+Se._id+"zl"):hr.K===R.K?Pr=zr.gridlayer.selectAll("."+Se._id):Pr=zr[Se._id.charAt(0)+"axislayer"],Pr.each(function(){var br=d.select(this);hr.L&&(br=br.selectAll(hr.L)),br.each(function(jr){var zn=Se.l2p(Yr?je(jr):jr.x)+Se._offset,kn=d.select(this);zn<Se["_visibleLabelMax_"+Ft._id]&&zn>Se["_visibleLabelMin_"+Ft._id]?kn.style("display","none"):hr.K==="tick"&&!er&&kn.style("display",null)})})})})},yr(xr,mr+1?mr:Yt);function Dr(){return Tr.length&&Promise.all(Tr)}var tn=null;function wr(){if(yr(xr,Yt),pt.length&&ot==="x"&&!l(Yt)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){tn=0;var Ar=0,nn=[],fn;if(xr.each(function(Aa){Ar=Math.max(Ar,Aa.fontSize);var ya=Se.l2p(Aa.x),pr=Je(this),vn=u.bBox(pr.node());nn.push({top:0,bottom:10,height:10,left:ya-vn.width/2,right:ya+vn.width/2+2,width:vn.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!De.secondary){var Xr=2;for(Se.ticks&&(Xr+=Se.tickwidth/2),fn=0;fn<nn.length;fn++){var at=pt[fn].xbnd,Ft=nn[fn];if(at[0]!==null&&Ft.left-Se.l2p(at[0])<Xr||at[1]!==null&&Se.l2p(at[1])-Ft.right<Xr){tn=90;break}}}else{var er=pt.length,hr=Math.abs((pt[er-1].x-pt[0].x)*Se._m)/(er-1),Yr=Se.ticklabelposition||"",zr=function(Aa){return Yr.indexOf(Aa)!==-1},Pr=zr("top"),br=zr("left"),jr=zr("right"),zn=zr("bottom"),kn=zn||br||Pr||jr,ta=kn?(Se.tickwidth||0)+2*V:0,ia=hr<Ar*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(fn=0;fn<nn.length-1;fn++)if(e.bBoxIntersect(nn[fn],nn[fn+1],ta)){tn=ia?90:30;break}}tn&&yr(xr,tn)}}Se._selections&&(Se._selections[st]=xr);var gr=[Dr];Se.automargin&&Xe._redrawFromAutoMarginCount&&mr===90?(tn=90,gr.push(function(){yr(xr,mr)})):gr.push(wr),Se._tickAngles&&gr.push(function(){Se._tickAngles[st]=tn===null?l(Yt)?Yt:0:tn});var yn=Se._anchorAxis;yn&&yn.autorange&&Or(Se)&&!U(Xe,Se._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[yn._name+".autorange"]=yn.autorange,gr.push(function(){xr.each(function(nn,fn){var Xr=Je(this),at=Xr.select(".text-math-group");at.empty()&&(Se._vals[fn].bb=u.bBox(Xr.node()))})}));var Gr=e.syncOrAsync(gr);return Gr&&Gr.then&&we._promises.push(Gr),Gr};function Pt(we,Se,De){var Xe=Se._id+"divider",$e=De.vals,ot=De.layer.selectAll("path."+Xe).data($e,ut);ot.exit().remove(),ot.enter().insert("path",":first-child").classed(Xe,1).classed("crisp",1).call(r.stroke,Se.dividercolor).style("stroke-width",u.crispRound(we,Se.dividerwidth,1)+"px"),ot.attr("transform",De.transFn).attr("d",De.path)}K.getPxPosition=function(we,Se){var De=we._fullLayout._size,Xe=Se._id.charAt(0),$e=Se.side,ot;if(Se.anchor!=="free"?ot=Se._anchorAxis:Xe==="x"?ot={_offset:De.t+(1-(Se.position||0))*De.h,_length:0}:Xe==="y"&&(ot={_offset:De.l+(Se.position||0)*De.w,_length:0}),$e==="top"||$e==="left")return ot._offset;if($e==="bottom"||$e==="right")return ot._offset+ot._length};function St(we){var Se=we.title.font.size,De=(we.title.text.match(a.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?De?Se*(X+De*q):Se*X:De?Se*(De+1)*q:Se}function Nt(we,Se){var De=we._fullLayout,Xe=Se._id,$e=Xe.charAt(0),ot=Se.title.font.size,st;if(Se.title.hasOwnProperty("standoff"))st=Se._depth+Se.title.standoff+St(Se);else{var pt=Or(Se);if(Se.type==="multicategory")st=Se._depth;else{var wt=1.5*ot;pt&&(wt=.5*ot,Se.ticks==="outside"&&(wt+=Se.ticklen)),st=10+wt+(Se.linewidth?Se.linewidth-1:0)}pt||($e==="x"?st+=Se.side==="top"?ot*(Se.showticklabels?1:0):ot*(Se.showticklabels?1.5:.5):st+=Se.side==="right"?ot*(Se.showticklabels?1:.5):ot*(Se.showticklabels?.5:0))}var Yt=K.getPxPosition(we,Se),mr,xr,Tr;$e==="x"?(xr=Se._offset+Se._length/2,Tr=Se.side==="top"?Yt-st:Yt+st):(Tr=Se._offset+Se._length/2,xr=Se.side==="right"?Yt+st:Yt-st,mr={rotate:"-90",offset:0});var yr;if(Se.type!=="multicategory"){var Dr=Se._selections[Se._id+"tick"];if(yr={selection:Dr,side:Se.side},Dr&&Dr.node()&&Dr.node().parentNode){var tn=u.getTranslate(Dr.node().parentNode);yr.offsetLeft=tn.x,yr.offsetTop=tn.y}Se.title.hasOwnProperty("standoff")&&(yr.pad=0)}return n.draw(we,Xe+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:De._dfltTitle[$e],avoid:yr,transform:mr,attributes:{x:xr,y:Tr,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(we,Se,De){var Xe=e.simpleMap(Se.range,Se.r2l);return Xe[0]*Xe[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===z)&&(Xt(Se,0)||!Ot(we,Se,De,Xe)||Kt(we,Se))},K.clipEnds=function(we,Se){return Se.filter(function(De){return Xt(we,De.x)})};function Xt(we,Se){var De=we.l2p(Se);return De>1&&De<we._length-1}function Ot(we,Se,De,Xe){var $e=De._mainAxis;if(!$e)return;var ot=we._fullLayout,st=Se._id.charAt(0),pt=K.counterLetter(Se._id),wt=Se._offset+(Math.abs(Xe[0])<Math.abs(Xe[1])==(st==="x")?0:Se._length);function Yt(Dr){if(!Dr.showline||!Dr.linewidth)return!1;var tn=Math.max((Dr.linewidth+Se.zerolinewidth)/2,1);function wr(Gr){return typeof Gr=="number"&&Math.abs(Gr-wt)<tn}if(wr(Dr._mainLinePosition)||wr(Dr._mainMirrorPosition))return!0;var gr=Dr._linepositions||{};for(var yn in gr)if(wr(gr[yn][0])||wr(gr[yn][1]))return!0}var mr=ot._plots[De._mainSubplot];if(!(mr.mainplotinfo||mr).overlays.length)return Yt(De);for(var xr=K.list(we,pt),Tr=0;Tr<xr.length;Tr++){var yr=xr[Tr];if(yr._mainAxis===$e&&Yt(yr))return!0}}function Kt(we,Se){for(var De=we._fullData,Xe=Se._mainSubplot,$e=Se._id.charAt(0),ot=0;ot<De.length;ot++){var st=De[ot];if(st.visible===!0&&st.xaxis+st.yaxis===Xe&&(w.traceIs(st,"bar-like")&&st.orientation==={x:"h",y:"v"}[$e]||st.fill&&st.fill.charAt(st.fill.length-1)===$e))return!0}return!1}function Je(we){var Se=d.select(we),De=Se.select(".text-math-group");return De.empty()?Se.select("text"):De}K.allowAutoMargin=function(we){for(var Se=K.list(we,"",!0),De=0;De<Se.length;De++){var Xe=Se[De];Xe.automargin&&(b.allowAutoMargin(we,gt(Xe)),Xe.mirror&&b.allowAutoMargin(we,Et(Xe))),w.getComponentMethod("rangeslider","isVisible")(Xe)&&b.allowAutoMargin(we,rr(Xe))}};function gt(we){return we._id+".automargin"}function Et(we){return gt(we)+".mirror"}function rr(we){return we._id+".rangeslider"}K.swap=function(we,Se){for(var De=vr(we,Se),Xe=0;Xe<De.length;Xe++)dr(we,De[Xe].x,De[Xe].y)};function vr(we,Se){var De=[],Xe,$e;for(Xe=0;Xe<Se.length;Xe++){var ot=[],st=we._fullData[Se[Xe]].xaxis,pt=we._fullData[Se[Xe]].yaxis;if(!(!st||!pt)){for($e=0;$e<De.length;$e++)(De[$e].x.indexOf(st)!==-1||De[$e].y.indexOf(pt)!==-1)&&ot.push($e);if(!ot.length){De.push({x:[st],y:[pt]});continue}var wt=De[ot[0]],Yt;if(ot.length>1)for($e=1;$e<ot.length;$e++)Yt=De[ot[$e]],or(wt.x,Yt.x),or(wt.y,Yt.y);or(wt.x,[st]),or(wt.y,[pt])}}return De}function or(we,Se){for(var De=0;De<Se.length;De++)we.indexOf(Se[De])===-1&&we.push(Se[De])}function dr(we,Se,De){var Xe=[],$e=[],ot=we.layout,st,pt;for(st=0;st<Se.length;st++)Xe.push(K.getFromId(we,Se[st]));for(st=0;st<De.length;st++)$e.push(K.getFromId(we,De[st]));var wt=Object.keys(s),Yt=["anchor","domain","overlaying","position","side","tickangle","editType"],mr=["linear","log"];for(st=0;st<wt.length;st++){var xr=wt[st],Tr=Xe[0][xr],yr=$e[0][xr],Dr=!0,tn=!1,wr=!1;if(!(xr.charAt(0)==="_"||typeof Tr=="function"||Yt.indexOf(xr)!==-1)){for(pt=1;pt<Xe.length&&Dr;pt++){var gr=Xe[pt][xr];xr==="type"&&mr.indexOf(Tr)!==-1&&mr.indexOf(gr)!==-1&&Tr!==gr?tn=!0:gr!==Tr&&(Dr=!1)}for(pt=1;pt<$e.length&&Dr;pt++){var yn=$e[pt][xr];xr==="type"&&mr.indexOf(yr)!==-1&&mr.indexOf(yn)!==-1&&yr!==yn?wr=!0:$e[pt][xr]!==yr&&(Dr=!1)}Dr&&(tn&&(ot[Xe[0]._name].type="linear"),wr&&(ot[$e[0]._name].type="linear"),Lr(ot,xr,Xe,$e,we._fullLayout._dfltTitle))}}for(st=0;st<we._fullLayout.annotations.length;st++){var Gr=we._fullLayout.annotations[st];Se.indexOf(Gr.xref)!==-1&&De.indexOf(Gr.yref)!==-1&&e.swapAttrs(ot.annotations[st],["?"])}}function Lr(we,Se,De,Xe,$e){var ot=e.nestedProperty,st=ot(we[De[0]._name],Se).get(),pt=ot(we[Xe[0]._name],Se).get(),wt;for(Se==="title"&&(st&&st.text===$e.x&&(st.text=$e.y),pt&&pt.text===$e.y&&(pt.text=$e.x)),wt=0;wt<De.length;wt++)ot(we,De[wt]._name+"."+Se).set(pt);for(wt=0;wt<Xe.length;wt++)ot(we,Xe[wt]._name+"."+Se).set(st)}function kr(we){return we._id==="angularaxis"}function tr(we,Se){for(var De=Se._rangebreaks.length,Xe=0;Xe<De;Xe++){var $e=Se._rangebreaks[Xe];if(we>=$e.min&&we<$e.max)return $e.max}return we}function Or(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function et(we,Se){Or(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM,w=l.isArrayOrTypedArray,e=l.isDateTime,o=l.cleanNumber,a=Math.round;B.exports=function(p,v,y){var g=p,A=y.noMultiCategory;if(w(g)&&!g.length)return"-";if(!A&&f(g))return"multicategory";if(A&&Array.isArray(g[0])){for(var m=[],M=0;M<g.length;M++)if(w(g[M]))for(var _=0;_<g[M].length;_++)m.push(g[M][_]);g=m}if(u(g,v))return"date";var T=y.autotypenumbers!=="strict";return i(g,T)?"category":r(g,T)?"linear":"-"};function n(h,p){return p?d(h):typeof h=="number"}function r(h,p){for(var v=h.length,y=0;y<v;y++)if(n(h[y],p))return!0;return!1}function u(h,p){for(var v=h.length,y=s(v),g=0,A=0,m={},M=0;M<v;M+=y){var _=a(M),T=h[_],x=String(T);m[x]||(m[x]=1,e(T,p)&&g++,d(T)&&A++)}return g>A*2}function s(h){return Math.max(1,(h-1)/1e3)}function i(h,p){for(var v=h.length,y=s(v),g=0,A=0,m={},M=0;M<v;M+=y){var _=a(M),T=h[_],x=String(T);if(!m[x]){m[x]=1;var c=typeof T;c==="boolean"?A++:(p?o(T)!==b:c==="number")?g++:c==="string"&&A++}}return A>g*2}function f(h){return w(h[0])&&w(h[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../lib"),w=t("../array_container_defaults"),e=t("./layout_attributes"),o=t("./tick_value_defaults"),a=t("./tick_mark_defaults"),n=t("./tick_label_defaults"),r=t("./prefix_suffix_defaults"),u=t("./category_order_defaults"),s=t("./line_grid_defaults"),i=t("./set_convert"),f=t("./constants").WEEKDAY_PATTERN,h=t("./constants").HOUR_PATTERN;B.exports=function(A,m,M,_,T){var x=_.letter,c=_.font||{},L=_.splomStash||{},S=M("visible",!_.visibleDflt),k=m._template||{},P=m.type||k.type||"-",z;if(P==="date"){var I=l.getComponentMethod("calendars","handleDefaults");I(A,m,"calendar",_.calendar),_.noTicklabelmode||(z=M("ticklabelmode"))}var R="";(!_.noTicklabelposition||P==="multicategory")&&(R=b.coerce(A,m,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:z==="period"?["outside","inside"]:x==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||M("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),i(m,T);var D=!m.isValidRange(A.range);D&&_.reverseDflt&&(D="reversed");var O=M("autorange",D);O&&(P==="linear"||P==="-")&&M("rangemode"),M("range"),m.cleanRange(),u(A,m,M,_),P!=="category"&&!_.noHover&&M("hoverformat");var F=M("color"),Y=F!==e.color.dflt?F:c.color,X=L.label||T._dfltTitle[x];if(r(A,m,M,P,_),!S)return m;M("title.text",X),b.coerceFont(M,"title.font",{family:c.family,size:b.bigFont(c.size),color:Y}),o(A,m,M,P),n(A,m,M,P,_),a(A,m,M,_),s(A,m,M,{dfltColor:F,bgColor:_.bgColor,showGrid:_.showGrid,attributes:e}),(m.showline||m.ticks)&&M("mirror"),_.automargin&&M("automargin");var q=P==="multicategory";if(!_.noTickson&&(P==="category"||q)&&(m.ticks||m.showgrid)){var $;q&&($="boundaries");var V=M("tickson",$);V==="boundaries"&&delete m.ticklabelposition}if(q){var K=M("showdividers");K&&(M("dividercolor"),M("dividerwidth"))}if(P==="date")if(w(A,m,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),!m.rangebreaks.length)delete m.rangebreaks;else{for(var se=0;se<m.rangebreaks.length;se++)if(m.rangebreaks[se].pattern===f){m._hasDayOfWeekBreaks=!0;break}if(i(m,T),T._has("scattergl")||T._has("splom"))for(var ue=0;ue<_.data.length;ue++){var oe=_.data[ue];(oe.type==="scattergl"||oe.type==="splom")&&(oe.visible=!1,b.warn(oe.type+" traces do not work on axes with rangebreaks. Setting trace "+oe.index+" to `visible: false`."))}}return m};function p(g,A,m){function M(z,I){return b.coerce(g,A,e.rangebreaks,z,I)}var _=M("enabled");if(_){var T=M("bounds");if(T&&T.length>=2){var x="",c,L;if(T.length===2){for(c=0;c<2;c++)if(L=y(T[c]),L){x=f;break}}var S=M("pattern",x);if(S===f)for(c=0;c<2;c++)L=y(T[c]),L&&(A.bounds[c]=T[c]=L-1);if(S)for(c=0;c<2;c++)switch(L=T[c],S){case f:if(!d(L)){A.enabled=!1;return}if(L=+L,L!==Math.floor(L)||L<0||L>=7){A.enabled=!1;return}A.bounds[c]=T[c]=L;break;case h:if(!d(L)){A.enabled=!1;return}if(L=+L,L<0||L>24){A.enabled=!1;return}A.bounds[c]=T[c]=L;break}if(m.autorange===!1){var k=m.range;if(k[0]<k[1]){if(T[0]<k[0]&&T[1]>k[1]){A.enabled=!1;return}}else if(T[0]>k[0]&&T[1]<k[1]){A.enabled=!1;return}}}else{var P=M("values");if(P&&P.length)M("dvalue");else{A.enabled=!1;return}}}}var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(g){if(typeof g=="string")return v[g.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(t,B,H){var d=t("../../constants/docs"),l=d.FORMAT_LINK,b=d.DATE_FORMAT_LINK;function w(a,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:o)("hover text",a)+["By default the values are formatted using "+(n?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}}function e(a,n){return["Sets the "+a+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+l+"."].join(" ")}function o(a,n){return e(a,n)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}B.exports={axisHoverFormat:w,descriptionOnlyNumbers:e,descriptionWithDates:o}},{"../../constants/docs":474}],558:[function(t,B,H){var d=t("../../registry"),l=t("./constants");H.id2name=function(e){if(!(typeof e!="string"||!e.match(l.AX_ID_PATTERN))){var o=e.split(" ")[0].substr(1);return o==="1"&&(o=""),e.charAt(0)+"axis"+o}},H.name2id=function(e){if(!!e.match(l.AX_NAME_PATTERN)){var o=e.substr(5);return o==="1"&&(o=""),e.charAt(0)+o}},H.cleanId=function(e,o,a){var n=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(l.AX_ID_PATTERN))&&!(o&&e.charAt(0)!==o)&&!(n&&!a)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(n&&a?" domain":"")}},H.list=function(w,e,o){var a=w._fullLayout;if(!a)return[];var n=H.listIds(w,e),r=new Array(n.length),u;for(u=0;u<n.length;u++){var s=n[u];r[u]=a[s.charAt(0)+"axis"+s.substr(1)]}if(!o){var i=a._subplots.gl3d||[];for(u=0;u<i.length;u++){var f=a[i[u]];e?r.push(f[e+"axis"]):r.push(f.xaxis,f.yaxis,f.zaxis)}}return r},H.listIds=function(w,e){var o=w._fullLayout;if(!o)return[];var a=o._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)},H.getFromId=function(w,e,o){var a=w._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),o==="x"?e=e.replace(/y[0-9]*/,""):o==="y"&&(e=e.replace(/x[0-9]*/,"")),a[H.id2name(e)]},H.getFromTrace=function(w,e,o){var a=w._fullLayout,n=null;if(d.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(n=a[r][o+"axis"])}else n=H.getFromId(w,e[o+"axis"]||o);return n},H.idSort=function(w,e){var o=w.charAt(0),a=e.charAt(0);return o!==a?o>a?1:-1:+(w.substr(1)||1)-+(e.substr(1)||1)},H.ref2id=function(w){return/^[xyz]/.test(w)?w.split(" ")[0]:!1};function b(w,e){if(e&&e.length){for(var o=0;o<e.length;o++)if(e[o][w])return!0}return!1}H.isLinked=function(w,e){return b(e,w._axisMatchGroups)||b(e,w._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(t,B,H){function d(l,b){var w=b.dataAttr||l._id.charAt(0),e={},o,a,n;if(b.axData)o=b.axData;else for(o=[],a=0;a<b.data.length;a++){var r=b.data[a];r[w+"axis"]===l._id&&o.push(r)}for(a=0;a<o.length;a++){var u=o[a][w];for(n=0;n<u.length;n++){var s=u[n];s!=null&&(e[s]=1)}}return Object.keys(e)}B.exports=function(b,w,e,o){if(w.type==="category"){var a=b.categoryarray,n=Array.isArray(a)&&a.length>0,r;n&&(r="array");var u=e("categoryorder",r),s;u==="array"&&(s=e("categoryarray")),!n&&u==="array"&&(u=w.categoryorder="trace"),u==="trace"?w._initialCategories=[]:u==="array"?w._initialCategories=s.slice():(s=d(w,o).sort(),u==="category ascending"?w._initialCategories=s:u==="category descending"&&(w._initialCategories=s.reverse()))}}},{}],560:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical"),w=b.ONEDAY,e=b.ONEWEEK;H.dtick=function(o,a){var n=a==="log",r=a==="date",u=a==="category",s=r?w:1;if(!o)return s;if(d(o))return o=Number(o),o<=0?s:u?Math.max(1,Math.round(o)):r?Math.max(.1,o):o;if(typeof o!="string"||!(r||n))return s;var i=o.charAt(0),f=o.substr(1);return f=d(f)?Number(f):0,f<=0||!(r&&i==="M"&&f===Math.round(f)||n&&i==="L"||n&&i==="D"&&(f===1||f===2))?s:o},H.tick0=function(o,a,n,r){if(a==="date")return l.cleanDate(o,l.dateTick0(n,r%e==0?1:0));if(!(r==="D1"||r==="D2"))return d(o)?Number(o):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(t,B,H){var d=t("../../lib/regex").counter;B.exports={idRegex:{x:d("x","( domain)?"),y:d("y","( domain)?")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(t,B,H){var d=t("../../lib"),l=t("./autorange"),b=t("./axis_ids").id2name,w=t("./layout_attributes"),e=t("./scale_zoom"),o=t("./set_convert"),a=t("../../constants/numerical").ALMOST_EQUAL,n=t("../../constants/alignment").FROM_BL;H.handleDefaults=function(v,y,g){var A=g.axIds,m=g.axHasImage,M=y._axisConstraintGroups=[],_=y._axisMatchGroups=[],T,x,c,L,S,k,P,z;for(T=0;T<A.length;T++)L=b(A[T]),S=v[L],k=y[L],r(S,k,{axIds:A,layoutOut:y,hasImage:m[L]});function I(V,K){for(T=0;T<V.length;T++){x=V[T];for(c in x)y[b(c)][K]=x}}for(I(_,"_matchGroup"),T=0;T<M.length;T++){x=M[T];for(c in x)if(k=y[b(c)],k.fixedrange){for(var R in x){var D=b(R);(v[D]||{}).fixedrange===!1&&d.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),y[D].fixedrange=!0}break}}for(T=0;T<M.length;){x=M[T];for(c in x){k=y[b(c)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(x).length&&(M.splice(T,1),T--);break}T++}I(M,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,Y=!1;function X(){z=k[P],P==="rangebreaks"&&(Y=k._hasDayOfWeekBreaks)}for(T=0;T<_.length;T++){x=_[T];for(var q=0;q<O.length;q++){P=O[q],z=null;var $;for(c in x)if(L=b(c),S=v[L],k=y[L],P in k){if(!k.matches&&($=k,P in S)){X();break}z===null&&P in S&&X()}if(P==="range"&&z&&(F=!0),P==="autorange"&&z===null&&F&&(z=!1),z===null&&P in $&&(z=$[P]),z!==null)for(c in x)k=y[b(c)],k[P]=P==="range"?z.slice():z,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=Y,o(k,y))}}};function r(v,y,g){var A=g.axIds,m=g.layoutOut,M=g.hasImage,_=m._axisConstraintGroups,T=m._axisMatchGroups,x=y._id,c=x.charAt(0),L=((m._splomAxes||{})[c]||{})[x]||{},S=y._id,k=S.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P(oe,U){return d.coerce(v,y,w,oe,U)}P("constrain",M?"domain":"range"),d.coerce(v,y,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var z=y.type,I,R,D=[];for(I=0;I<A.length;I++)if(R=A[I],R!==S){var O=m[b(R)];O.type===z&&D.push(R)}var F=s(_,S);if(F){var Y=[];for(I=0;I<D.length;I++)R=D[I],F[R]||Y.push(R);D=Y}var X=D.length,q,$;X&&(v.matches||L.matches)&&(q=d.coerce(v,y,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var V=M&&!k?y.anchor:void 0;if(X&&!q&&(v.scaleanchor||V)&&($=d.coerce(v,y,{scaleanchor:{valType:"enumerated",values:D}},"scaleanchor",V)),q){y._matchGroup=i(T,S,q,1);var K=m[b(q)],se=u(m,y)/u(m,K);k!==(q.charAt(0)==="x")&&(se=(k?"x":"y")+se),i(_,S,q,se)}else v.matches&&A.indexOf(v.matches)!==-1&&d.warn("ignored "+y._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if($){var ue=P("scaleratio");ue||(ue=y.scaleratio=1),i(_,S,$,ue)}else v.scaleanchor&&A.indexOf(v.scaleanchor)!==-1&&d.warn("ignored "+y._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function u(v,y){var g=y.domain;return g||(g=v[b(y.overlaying)].domain),g[1]-g[0]}function s(v,y){for(var g=0;g<v.length;g++)if(v[g][y])return v[g];return null}function i(v,y,g,A){var m,M,_,T,x,c=s(v,y);c===null?(c={},c[y]=1,x=v.length,v.push(c)):x=v.indexOf(c);var L=Object.keys(c);for(m=0;m<v.length;m++)if(_=v[m],m!==x&&_[g]){var S=_[g];for(M=0;M<L.length;M++)T=L[M],_[T]=f(S,f(A,c[T]));v.splice(x,1);return}if(A!==1)for(M=0;M<L.length;M++){var k=L[M];c[k]=f(A,c[k])}c[g]=1}function f(v,y){var g="",A="",m,M;typeof v=="string"&&(g=v.match(/^[xy]*/)[0],m=g.length,v=+v.substr(m)),typeof y=="string"&&(A=y.match(/^[xy]*/)[0],M=A.length,y=+y.substr(M));var _=v*y;return!m&&!M?_:!m||!M||g.charAt(0)===A.charAt(0)?g+A+v*y:m===M?_:(m>M?g.substr(M):A.substr(m))+_}function h(v,y){for(var g=y._size,A=g.h/g.w,m={},M=Object.keys(v),_=0;_<M.length;_++){var T=M[_],x=v[T];if(typeof x=="string"){var c=x.match(/^[xy]*/)[0],L=c.length;x=+x.substr(L);for(var S=c.charAt(0)==="y"?A:1/A,k=0;k<L;k++)x*=S}m[T]=x}return m}H.enforce=function(y){var g=y._fullLayout,A=g._axisConstraintGroups||[],m,M,_,T,x,c,L,S;for(m=0;m<A.length;m++){_=h(A[m],g);var k=Object.keys(_),P=1/0,z=0,I=1/0,R={},D={},O=!1;for(M=0;M<k.length;M++)T=k[M],D[T]=x=g[b(T)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),R[T]=c=Math.abs(x._m)/_[T],P=Math.min(P,c),(x.constrain==="domain"||!x._constraintShrinkable)&&(I=Math.min(I,c)),delete x._constraintShrinkable,z=Math.max(z,c),x.constrain==="domain"&&(O=!0);if(!(P>a*z&&!O)){for(M=0;M<k.length;M++)if(T=k[M],c=R[T],x=D[T],L=x.constrain,c!==I||L==="domain")if(S=c/I,L==="range")e(x,S);else{var F=x._inputDomain,Y=(x.domain[1]-x.domain[0])/(F[1]-F[0]),X=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if(S/=Y,S*X<1){x.domain=x._input.domain=F.slice(),e(x,S);continue}if(X<1&&(x.range=x._input.range=x._inputRange.slice(),S*=X),x.autorange){var q=x.r2l(x.range[0]),$=x.r2l(x.range[1]),V=(q+$)/2,K=V,se=V,ue=Math.abs($-V),oe=V-ue*S*1.0001,U=V+ue*S*1.0001,G=l.makePadFn(g,x,0),re=l.makePadFn(g,x,1);p(x,S);var ee=Math.abs(x._m),j=l.concatExtremes(y,x),Q=j.min,ne=j.max,ae,ie;for(ie=0;ie<Q.length;ie++)ae=Q[ie].val-G(Q[ie])/ee,ae>oe&&ae<K&&(K=ae);for(ie=0;ie<ne.length;ie++)ae=ne[ie].val+re(ne[ie])/ee,ae<U&&ae>se&&(se=ae);var fe=(se-K)/(2*ue);S/=fe,K=x.l2r(K),se=x.l2r(se),x.range=x._input.range=q<$?[K,se]:[se,K]}p(x,S)}}}},H.getAxisGroup=function(y,g){for(var A=y._axisMatchGroups,m=0;m<A.length;m++){var M=A[m];if(M[g])return"g"+m}return g},H.clean=function(y,g){if(g._inputDomain){for(var A=!1,m=g._id,M=y._fullLayout._axisConstraintGroups,_=0;_<M.length;_++)if(M[_][m]){A=!0;break}(!A||g.constrain!=="domain")&&(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}};function p(v,y){var g=v._inputDomain,A=n[v.constraintoward],m=g[0]+(g[1]-g[0])*A;v.domain=v._input.domain=[m+(g[0]-m)/y,m+(g[1]-m)/y],v.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("tinycolor2"),e=t("has-passive-events"),o=t("../../registry"),a=l.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/color"),u=t("../../components/drawing"),s=t("../../components/fx"),i=t("./axes"),f=t("../../lib/setcursor"),h=t("../../components/dragelement"),p=t("../../components/dragelement/helpers"),v=p.selectingOrDrawing,y=p.freeMode,g=t("../../constants/alignment").FROM_TL,A=t("../../lib/clear_gl_canvases"),m=t("../../plot_api/subroutines").redrawReglTraces,M=t("../plots"),_=t("./axis_ids").getFromId,T=t("./select").prepSelect,x=t("./select").clearSelect,c=t("./select").selectOnClick,L=t("./scale_zoom"),S=t("./constants"),k=S.MINDRAG,P=S.MINZOOM,z=!0;function I(ae,ie,fe,me,ce,ye,xe,ke){var Ae=ae._fullLayout._zoomlayer,Oe=xe+ke==="nsew",He=(xe+ke).length===1,Ge,_e,Ie,Ye,qe,Ue,Re,Ve,dt,Dt,Gt,kt,zt,Bt,Lt,Mt,it,ht,Qe,Ce,je,rt,ut;function Pt(){if(Ge=ie.xaxis,_e=ie.yaxis,dt=Ge._length,Dt=_e._length,Re=Ge._offset,Ve=_e._offset,Ie={},Ie[Ge._id]=Ge,Ye={},Ye[_e._id]=_e,xe&&ke)for(var wr=ie.overlays,gr=0;gr<wr.length;gr++){var yn=wr[gr].xaxis;Ie[yn._id]=yn;var Gr=wr[gr].yaxis;Ye[Gr._id]=Gr}qe=ne(Ie),Ue=ne(Ye),zt=O(qe,ke),Bt=O(Ue,xe),Lt=!Bt&&!zt,kt=j(ae,ae._fullLayout._axisMatchGroups,Ie,Ye),Gt=j(ae,ae._fullLayout._axisConstraintGroups,Ie,Ye,kt);var Ar=Gt.isSubplotConstrained||kt.isSubplotConstrained;Mt=ke||Ar,it=xe||Ar;var nn=ae._fullLayout;ht=nn._has("scattergl"),Qe=nn._has("splom"),Ce=nn._has("svg")}Pt();var St=$(Bt+zt,ae._fullLayout.dragmode,Oe),Nt=D(ie,xe+ke+"drag",St,fe,me,ce,ye);if(Lt&&!Oe)return Nt.onmousedown=null,Nt.style.pointerEvents="none",Nt;var Xt={element:Nt,gd:ae,plotinfo:ie};Xt.prepFn=function(wr,gr,yn){var Gr=Xt.dragmode,Ar=ae._fullLayout.dragmode;Ar!==Gr&&(Xt.dragmode=Ar),Pt(),rt=ae._fullLayout._invScaleX,ut=ae._fullLayout._invScaleY,Lt||(Oe?wr.shiftKey?Ar==="pan"?Ar="zoom":v(Ar)||(Ar="pan"):wr.ctrlKey&&(Ar="pan"):Ar="pan"),y(Ar)?Xt.minDrag=1:Xt.minDrag=void 0,v(Ar)?(Xt.xaxes=qe,Xt.yaxes=Ue,T(wr,gr,yn,Xt,Ar)):(Xt.clickFn=Kt,v(Gr)&&Ot(),Lt||(Ar==="zoom"?(Xt.moveFn=et,Xt.doneFn=Se,Xt.minDrag=1,Or(wr,gr,yn)):Ar==="pan"&&(Xt.moveFn=pt,Xt.doneFn=xr))),ae._fullLayout._redrag=function(){var nn=ae._dragdata;if(nn&&nn.element===Nt){var fn=ae._fullLayout.dragmode;v(fn)||(Pt(),Tr([0,0,dt,Dt]),Xt.moveFn(nn.dx,nn.dy))}}};function Ot(){Xt.plotinfo.selection=!1,x(ae)}function Kt(wr,gr){var yn=Xt.gd;if(yn._fullLayout._activeShapeIndex>=0){yn._fullLayout._deactivateShape(yn);return}var Gr=yn._fullLayout.clickmode;if(oe(yn),wr===2&&!He&&mr(),Oe)Gr.indexOf("select")>-1&&c(gr,yn,qe,Ue,ie.id,Xt),Gr.indexOf("event")>-1&&s.click(yn,gr,ie.id);else if(wr===1&&He){var Ar=xe?_e:Ge,nn=xe==="s"||ke==="w"?0:1,fn=Ar._name+".range["+nn+"]",Xr=F(Ar,nn),at="left",Ft="middle";if(Ar.fixedrange)return;xe?(Ft=xe==="n"?"top":"bottom",Ar.side==="right"&&(at="right")):ke==="e"&&(at="right"),yn._context.showAxisRangeEntryBoxes&&d.select(Nt).call(n.makeEditable,{gd:yn,immediate:!0,background:yn._fullLayout.paper_bgcolor,text:String(Xr),fill:Ar.tickfont?Ar.tickfont.color:"#444",horizontalAlign:at,verticalAlign:Ft}).on("edit",function(er){var hr=Ar.d2r(er);hr!==void 0&&o.call("_guiRelayout",yn,fn,hr)})}}h.init(Xt);var Je,gt,Et,rr,vr,or,dr,Lr,kr,tr;function Or(wr,gr,yn){var Gr=Nt.getBoundingClientRect();Je=gr-Gr.left,gt=yn-Gr.top,ae._fullLayout._calcInverseTransform(ae);var Ar=l.apply3DTransform(ae._fullLayout._invTransform)(Je,gt);Je=Ar[0],gt=Ar[1],Et={l:Je,r:Je,w:0,t:gt,b:gt,h:0},rr=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:w(ae._fullLayout.plot_bgcolor).getLuminance(),vr="M0,0H"+dt+"V"+Dt+"H0V0",or=!1,dr="xy",tr=!1,Lr=V(Ae,rr,Re,Ve,vr),kr=K(Ae,Re,Ve)}function et(wr,gr){if(ae._transitioningWithDuration)return!1;var yn=Math.max(0,Math.min(dt,rt*wr+Je)),Gr=Math.max(0,Math.min(Dt,ut*gr+gt)),Ar=Math.abs(yn-Je),nn=Math.abs(Gr-gt);Et.l=Math.min(Je,yn),Et.r=Math.max(Je,yn),Et.t=Math.min(gt,Gr),Et.b=Math.max(gt,Gr);function fn(){dr="",Et.r=Et.l,Et.t=Et.b,kr.attr("d","M0,0Z")}if(Gt.isSubplotConstrained)Ar>P||nn>P?(dr="xy",Ar/dt>nn/Dt?(nn=Ar*Dt/dt,gt>Gr?Et.t=gt-nn:Et.b=gt+nn):(Ar=nn*dt/Dt,Je>yn?Et.l=Je-Ar:Et.r=Je+Ar),kr.attr("d",ee(Et))):fn();else if(kt.isSubplotConstrained)if(Ar>P||nn>P){dr="xy";var Xr=Math.min(Et.l/dt,(Dt-Et.b)/Dt),at=Math.max(Et.r/dt,(Dt-Et.t)/Dt);Et.l=Xr*dt,Et.r=at*dt,Et.b=(1-Xr)*Dt,Et.t=(1-at)*Dt,kr.attr("d",ee(Et))}else fn();else!Bt||nn<Math.min(Math.max(Ar*.6,k),P)?Ar<k||!zt?fn():(Et.t=0,Et.b=Dt,dr="x",kr.attr("d",G(Et,gt))):!zt||Ar<Math.min(nn*.6,P)?(Et.l=0,Et.r=dt,dr="y",kr.attr("d",re(Et,Je))):(dr="xy",kr.attr("d",ee(Et)));Et.w=Et.r-Et.l,Et.h=Et.b-Et.t,dr&&(tr=!0),ae._dragged=tr,se(Lr,kr,Et,vr,or,rr),we(),ae.emit("plotly_relayouting",je),or=!0}function we(){je={},(dr==="xy"||dr==="x")&&(Y(qe,Et.l/dt,Et.r/dt,je,Gt.xaxes),wt("x",je)),(dr==="xy"||dr==="y")&&(Y(Ue,(Dt-Et.b)/Dt,(Dt-Et.t)/Dt,je,Gt.yaxes),wt("y",je))}function Se(){we(),oe(ae),xr(),U(ae)}var De=[0,0,dt,Dt],Xe=null,$e=S.REDRAWDELAY,ot=ie.mainplot?ae._fullLayout._plots[ie.mainplot]:ie;function st(wr){if(!ae._context._scrollZoom.cartesian&&!ae._fullLayout._enablescrollzoom)return;if(Ot(),ae._transitioningWithDuration){wr.preventDefault(),wr.stopPropagation();return}Pt(),clearTimeout(Xe);var gr=-wr.deltaY;if(isFinite(gr)||(gr=wr.wheelDelta/10),!isFinite(gr)){l.log("Did not find wheel motion attributes: ",wr);return}var yn=Math.exp(-Math.min(Math.max(gr,-20),20)/200),Gr=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ar=(wr.clientX-Gr.left)/Gr.width,nn=(Gr.bottom-wr.clientY)/Gr.height,fn;function Xr(at,Ft,er){if(at.fixedrange)return;var hr=l.simpleMap(at.range,at.r2l),Yr=hr[0]+(hr[1]-hr[0])*Ft;function zr(Pr){return at.l2r(Yr+(Pr-Yr)*er)}at.range=hr.map(zr)}if(Mt){for(ke||(Ar=.5),fn=0;fn<qe.length;fn++)Xr(qe[fn],Ar,yn);wt("x"),De[2]*=yn,De[0]+=De[2]*Ar*(1/yn-1)}if(it){for(xe||(nn=.5),fn=0;fn<Ue.length;fn++)Xr(Ue[fn],nn,yn);wt("y"),De[3]*=yn,De[1]+=De[3]*(1-nn)*(1/yn-1)}Tr(De),Yt(),ae.emit("plotly_relayouting",je),Xe=setTimeout(function(){!ae._fullLayout||(De=[0,0,dt,Dt],xr())},$e),wr.preventDefault()}xe.length*ke.length!=1&&Q(Nt,st);function pt(wr,gr){if(wr=wr*rt,gr=gr*ut,ae._transitioningWithDuration)return;if(ae._fullLayout._replotting=!0,zt==="ew"||Bt==="ns"){var yn=zt?-wr:0,Gr=Bt?-gr:0;if(kt.isSubplotConstrained){if(zt&&Bt){var Ar=(wr/dt-gr/Dt)/2;wr=Ar*dt,gr=-Ar*Dt,yn=-wr,Gr=-gr}Bt?yn=-Gr*dt/Dt:Gr=-yn*Dt/dt}zt&&(X(qe,wr),wt("x")),Bt&&(X(Ue,gr),wt("y")),Tr([yn,Gr,dt,Dt]),Yt(),ae.emit("plotly_relayouting",je);return}function nn(zr,Pr,br){for(var jr=1-Pr,zn,kn,ta=0;ta<zr.length;ta++){var ia=zr[ta];if(!ia.fixedrange){zn=ia,kn=ia._rl[jr]+(ia._rl[Pr]-ia._rl[jr])/q(br/ia._length);var Aa=ia.l2r(kn);Aa!==!1&&Aa!==void 0&&(ia.range[Pr]=Aa)}}return zn._length*(zn._rl[Pr]-kn)/(zn._rl[Pr]-zn._rl[jr])}var fn=zt==="w"==(Bt==="n")?1:-1;if(zt&&Bt&&(Gt.isSubplotConstrained||kt.isSubplotConstrained)){var Xr=(wr/dt+fn*gr/Dt)/2;wr=Xr*dt,gr=fn*Xr*Dt}var at,Ft;if(zt==="w"?wr=nn(qe,0,wr):zt==="e"?wr=nn(qe,1,-wr):zt||(wr=0),Bt==="n"?gr=nn(Ue,1,gr):Bt==="s"?gr=nn(Ue,0,-gr):Bt||(gr=0),at=zt==="w"?wr:0,Ft=Bt==="n"?gr:0,Gt.isSubplotConstrained&&!kt.isSubplotConstrained||kt.isSubplotConstrained&&zt&&Bt&&fn>0){var er;if(kt.isSubplotConstrained||!zt&&Bt.length===1){for(er=0;er<qe.length;er++)qe[er].range=qe[er]._r.slice(),L(qe[er],1-gr/Dt);wr=gr*dt/Dt,at=wr/2}if(kt.isSubplotConstrained||!Bt&&zt.length===1){for(er=0;er<Ue.length;er++)Ue[er].range=Ue[er]._r.slice(),L(Ue[er],1-wr/dt);gr=wr*Dt/dt,Ft=gr/2}}(!kt.isSubplotConstrained||!Bt)&&wt("x"),(!kt.isSubplotConstrained||!zt)&&wt("y");var hr=dt-wr,Yr=Dt-gr;kt.isSubplotConstrained&&!(zt&&Bt)&&(zt?(Ft=at?0:wr*Dt/dt,Yr=hr*Dt/dt):(at=Ft?0:gr*dt/Dt,hr=Yr*dt/Dt)),Tr([at,Ft,hr,Yr]),Yt(),ae.emit("plotly_relayouting",je)}function wt(wr,gr){for(var yn=kt.isSubplotConstrained?{x:Ue,y:qe}[wr]:kt[wr+"axes"],Gr=kt.isSubplotConstrained?{x:qe,y:Ue}[wr]:[],Ar=0;Ar<yn.length;Ar++){var nn=yn[Ar],fn=nn._id,Xr=kt.xLinks[fn]||kt.yLinks[fn],at=Gr[0]||Ie[Xr]||Ye[Xr];at&&(gr?(gr[nn._name+".range[0]"]=gr[at._name+".range[0]"],gr[nn._name+".range[1]"]=gr[at._name+".range[1]"]):nn.range=at.range.slice())}}function Yt(){var wr=[],gr;function yn(nn){for(gr=0;gr<nn.length;gr++)nn[gr].fixedrange||wr.push(nn[gr]._id)}for(Mt&&(yn(qe),yn(Gt.xaxes),yn(kt.xaxes)),it&&(yn(Ue),yn(Gt.yaxes),yn(kt.yaxes)),je={},gr=0;gr<wr.length;gr++){var Gr=wr[gr],Ar=_(ae,Gr);i.drawOne(ae,Ar,{skipTitle:!0}),je[Ar._name+".range[0]"]=Ar.range[0],je[Ar._name+".range[1]"]=Ar.range[1]}i.redrawComponents(ae,wr)}function mr(){if(!ae._transitioningWithDuration){var wr=ae._context.doubleClick,gr=[];zt&&(gr=gr.concat(qe)),Bt&&(gr=gr.concat(Ue)),kt.xaxes&&(gr=gr.concat(kt.xaxes)),kt.yaxes&&(gr=gr.concat(kt.yaxes));var yn={},Gr,Ar,nn;if(wr==="reset+autosize"){for(wr="autosize",Ar=0;Ar<gr.length;Ar++)if(Gr=gr[Ar],Gr._rangeInitial&&(Gr.range[0]!==Gr._rangeInitial[0]||Gr.range[1]!==Gr._rangeInitial[1])||!Gr._rangeInitial&&!Gr.autorange){wr="reset";break}}if(wr==="autosize")for(Ar=0;Ar<gr.length;Ar++)Gr=gr[Ar],Gr.fixedrange||(yn[Gr._name+".autorange"]=!0);else if(wr==="reset")for((zt||Gt.isSubplotConstrained)&&(gr=gr.concat(Gt.xaxes)),Bt&&!Gt.isSubplotConstrained&&(gr=gr.concat(Gt.yaxes)),Gt.isSubplotConstrained&&(zt?Bt||(gr=gr.concat(Ue)):gr=gr.concat(qe)),Ar=0;Ar<gr.length;Ar++)Gr=gr[Ar],Gr.fixedrange||(Gr._rangeInitial?(nn=Gr._rangeInitial,yn[Gr._name+".range[0]"]=nn[0],yn[Gr._name+".range[1]"]=nn[1]):yn[Gr._name+".autorange"]=!0);ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,yn)}}function xr(){Tr([0,0,dt,Dt]),l.syncOrAsync([M.previousPromises,function(){ae._fullLayout._replotting=!1,o.call("_guiRelayout",ae,je)}],ae)}function Tr(wr){var gr=ae._fullLayout,yn=gr._plots,Gr=gr._subplots.cartesian,Ar,nn,fn,Xr;if(Qe&&o.subplotsRegistry.splom.drag(ae),ht){for(Ar=0;Ar<Gr.length;Ar++)if(nn=yn[Gr[Ar]],fn=nn.xaxis,Xr=nn.yaxis,nn._scene){var at=l.simpleMap(fn.range,fn.r2l),Ft=l.simpleMap(Xr.range,Xr.r2l);nn._scene.update({range:[at[0],Ft[0],at[1],Ft[1]]})}}if((Qe||ht)&&(A(ae),m(ae)),Ce){var er=wr[2]/Ge._length,hr=wr[3]/_e._length;for(Ar=0;Ar<Gr.length;Ar++){nn=yn[Gr[Ar]],fn=nn.xaxis,Xr=nn.yaxis;var Yr=(Mt||kt.isSubplotConstrained)&&!fn.fixedrange&&Ie[fn._id],zr=(it||kt.isSubplotConstrained)&&!Xr.fixedrange&&Ye[Xr._id],Pr,br,jr,zn;if(Yr?(Pr=er,jr=ke||kt.isSubplotConstrained?wr[0]:tn(fn,Pr)):kt.xaHash[fn._id]?(Pr=er,jr=wr[0]*fn._length/Ge._length):kt.yaHash[fn._id]?(Pr=hr,jr=Bt==="ns"?-wr[1]*fn._length/_e._length:tn(fn,Pr,{n:"top",s:"bottom"}[Bt])):(Pr=yr(fn,er,hr),jr=Dr(fn,Pr)),zr?(br=hr,zn=xe||kt.isSubplotConstrained?wr[1]:tn(Xr,br)):kt.yaHash[Xr._id]?(br=hr,zn=wr[1]*Xr._length/_e._length):kt.xaHash[Xr._id]?(br=er,zn=zt==="ew"?-wr[0]*Xr._length/Ge._length:tn(Xr,br,{e:"right",w:"left"}[zt])):(br=yr(Xr,er,hr),zn=Dr(Xr,br)),!(!Pr&&!br)){Pr||(Pr=1),br||(br=1);var kn=fn._offset-jr/Pr,ta=Xr._offset-zn/br;nn.clipRect.call(u.setTranslate,jr,zn).call(u.setScale,Pr,br),nn.plot.call(u.setTranslate,kn,ta).call(u.setScale,1/Pr,1/br),(Pr!==nn.xScaleFactor||br!==nn.yScaleFactor)&&(u.setPointGroupScale(nn.zoomScalePts,Pr,br),u.setTextPointsScale(nn.zoomScaleTxt,Pr,br)),u.hideOutsideRangePoints(nn.clipOnAxisFalseTraces,nn),nn.xScaleFactor=Pr,nn.yScaleFactor=br}}}}function yr(wr,gr,yn){return wr.fixedrange?0:Mt&&Gt.xaHash[wr._id]?gr:it&&(Gt.isSubplotConstrained?Gt.xaHash:Gt.yaHash)[wr._id]?yn:0}function Dr(wr,gr){return gr?(wr.range=wr._r.slice(),L(wr,gr),tn(wr,gr)):0}function tn(wr,gr,yn){return wr._length*(1-gr)*g[yn||wr.constraintoward||"middle"]}return Nt}function R(ae,ie,fe,me){var ce=l.ensureSingle(ae.draglayer,ie,fe,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return ce.call(f,me),ce.node()}function D(ae,ie,fe,me,ce,ye,xe){var ke=R(ae,"rect",ie,fe);return d.select(ke).call(u.setRect,me,ce,ye,xe),ke}function O(ae,ie){for(var fe=0;fe<ae.length;fe++)if(!ae[fe].fixedrange)return ie;return""}function F(ae,ie){var fe=ae.range[ie],me=Math.abs(fe-ae.range[1-ie]),ce;return ae.type==="date"?fe:ae.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(me)/Math.LN10))+3,b("."+ce+"g")(Math.pow(10,fe))):(ce=Math.floor(Math.log(Math.abs(fe))/Math.LN10)-Math.floor(Math.log(me)/Math.LN10)+4,b("."+String(ce)+"g")(fe))}function Y(ae,ie,fe,me,ce){for(var ye=0;ye<ae.length;ye++){var xe=ae[ye];if(!xe.fixedrange)if(xe.rangebreaks){var ke=xe._id.charAt(0)==="y",Ae=ke?1-ie:ie,Oe=ke?1-fe:fe;me[xe._name+".range[0]"]=xe.l2r(xe.p2l(Ae*xe._length)),me[xe._name+".range[1]"]=xe.l2r(xe.p2l(Oe*xe._length))}else{var He=xe._rl[0],Ge=xe._rl[1]-He;me[xe._name+".range[0]"]=xe.l2r(He+Ge*ie),me[xe._name+".range[1]"]=xe.l2r(He+Ge*fe)}}if(ce&&ce.length){var _e=(ie+(1-fe))/2;Y(ce,_e,1-_e,me,[])}}function X(ae,ie){for(var fe=0;fe<ae.length;fe++){var me=ae[fe];if(!me.fixedrange)if(me.rangebreaks){var ce=0,ye=me._length,xe=me.p2l(ce+ie)-me.p2l(ce),ke=me.p2l(ye+ie)-me.p2l(ye),Ae=(xe+ke)/2;me.range=[me.l2r(me._rl[0]-Ae),me.l2r(me._rl[1]-Ae)]}else me.range=[me.l2r(me._rl[0]-ie/me._m),me.l2r(me._rl[1]-ie/me._m)]}}function q(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function $(ae,ie,fe){return ae?ae==="nsew"?fe?"":ie==="pan"?"move":"crosshair":ae.toLowerCase()+"-resize":"pointer"}function V(ae,ie,fe,me,ce){return ae.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(fe,me)).attr("d",ce+"Z")}function K(ae,ie,fe){return ae.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(ie,fe)).attr("d","M0,0Z")}function se(ae,ie,fe,me,ce,ye){ae.attr("d",me+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),ue(ae,ie,ce,ye)}function ue(ae,ie,fe,me){fe||(ae.transition().style("fill",me>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function oe(ae){d.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(ae){z&&ae.data&&ae._context.showTips&&(l.notifier(l._(ae,"Double-click to zoom back out"),"long"),z=!1)}function G(ae,ie){return"M"+(ae.l-.5)+","+(ie-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(ae.r+.5)+","+(ie-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function re(ae,ie){return"M"+(ie-P-.5)+","+(ae.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ie-P-.5)+","+(ae.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function ee(ae){var ie=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,P)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function j(ae,ie,fe,me,ce){for(var ye=!1,xe={},ke={},Ae,Oe,He,Ge,_e=(ce||{}).xaHash,Ie=(ce||{}).yaHash,Ye=0;Ye<ie.length;Ye++){var qe=ie[Ye];for(Ae in fe)if(qe[Ae]){for(He in qe)!(ce&&(_e[He]||Ie[He]))&&!(He.charAt(0)==="x"?fe:me)[He]&&(xe[He]=Ae);for(Oe in me)!(ce&&(_e[Oe]||Ie[Oe]))&&qe[Oe]&&(ye=!0)}for(Oe in me)if(qe[Oe])for(Ge in qe)!(ce&&(_e[Ge]||Ie[Ge]))&&!(Ge.charAt(0)==="x"?fe:me)[Ge]&&(ke[Ge]=Oe)}ye&&(l.extendFlat(xe,ke),ke={});var Ue={},Re=[];for(He in xe){var Ve=_(ae,He);Re.push(Ve),Ue[Ve._id]=Ve}var dt={},Dt=[];for(Ge in ke){var Gt=_(ae,Ge);Dt.push(Gt),dt[Gt._id]=Gt}return{xaHash:Ue,yaHash:dt,xaxes:Re,yaxes:Dt,xLinks:xe,yLinks:ke,isSubplotConstrained:ye}}function Q(ae,ie){if(!e)ae.onwheel!==void 0?ae.onwheel=ie:ae.onmousewheel!==void 0?ae.onmousewheel=ie:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ie,{passive:!1}));else{var fe=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(fe,ae._onwheel),ae._onwheel=ie,ae.addEventListener(fe,ie,{passive:!1})}}function ne(ae){var ie=[];for(var fe in ae)ie.push(ae[fe]);return ie}B.exports={makeDragBox:I,makeDragger:R,makeRectDragger:D,makeZoombox:V,makeCorners:K,updateZoombox:se,xyCorners:ee,transitionZoombox:ue,removeZoombox:oe,showDoubleClickNotifier:U,attachWheelEventHandler:Q}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/fx"),b=t("../../components/dragelement"),w=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,o=t("./constants").DRAGGERSIZE;H.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){d.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var u=Object.keys(r._plots||{}).sort(function(i,f){if((r._plots[i].mainplot&&!0)===(r._plots[f].mainplot&&!0)){var h=i.split("y"),p=f.split("y");return h[0]===p[0]?Number(h[1]||1)-Number(p[1]||1):Number(h[0]||1)-Number(p[0]||1)}return r._plots[i].mainplot?1:-1});u.forEach(function(i){var f=r._plots[i],h=f.xaxis,p=f.yaxis;if(!f.mainplot){var v=e(n,f,h._offset,p._offset,h._length,p._length,"ns","ew");v.onmousemove=function(A){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===i&&n._fullLayout._plots[i]&&l.hover(n,A,i)},l.hover(n,A,i),n._fullLayout._lasthover=v,n._fullLayout._hoversubplot=i},v.onmouseout=function(A){n._dragging||(n._fullLayout._hoversubplot=null,b.unhover(n,A))},n._context.showAxisDragHandles&&(e(n,f,h._offset-o,p._offset-o,o,o,"n","w"),e(n,f,h._offset+h._length,p._offset-o,o,o,"n","e"),e(n,f,h._offset-o,p._offset+p._length,o,o,"s","w"),e(n,f,h._offset+h._length,p._offset+p._length,o,o,"s","e"))}if(n._context.showAxisDragHandles){if(i===h._mainSubplot){var y=h._mainLinePosition;h.side==="top"&&(y-=o),e(n,f,h._offset+h._length*.1,y,h._length*.8,o,"","ew"),e(n,f,h._offset,y,h._length*.1,o,"","w"),e(n,f,h._offset+h._length*.9,y,h._length*.1,o,"","e")}if(i===p._mainSubplot){var g=p._mainLinePosition;p.side!=="right"&&(g-=o),e(n,f,g,p._offset+p._length*.1,o,p._length*.8,"ns",""),e(n,f,g,p._offset+p._length*.9,o,p._length*.1,"s",""),e(n,f,g,p._offset,o,p._length*.1,"n","")}}});var s=r._hoverlayer.node();s.onmousemove=function(i){i.target=n._fullLayout._lasthover,l.hover(n,i,r._hoversubplot)},s.onclick=function(i){i.target=n._fullLayout._lasthover,l.click(n,i)},s.onmousedown=function(i){n._fullLayout._lasthover.onmousedown(i)},H.updateFx(n)}},H.updateFx=function(a){var n=a._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";w(n._draggers,r)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(t,B,H){function d(b){var w=b._fullLayout._zoomlayer;w&&w.selectAll(".outline-controllers").remove()}function l(b){var w=b._fullLayout._zoomlayer;w&&w.selectAll(".select-outline").remove(),b._fullLayout._drawing=!1}B.exports={clearOutlineControllers:d,clearSelect:l}},{}],566:[function(t,B,H){var d=t("../../lib").strTranslate;function l(o,a){switch(o.type){case"log":return o.p2d(a);case"date":return o.p2r(a,0,o.calendar);default:return o.p2r(a)}}function b(o,a){switch(o.type){case"log":return o.d2p(a);case"date":return o.r2p(a,0,o.calendar);default:return o.r2p(a)}}function w(o){var a=o._id.charAt(0)==="y"?1:0;return function(n){return l(o,n[a])}}function e(o){return d(o.xaxis._offset,o.yaxis._offset)}B.exports={p2r:l,r2p:b,axValue:w,getTransform:e}},{"../../lib":503}],567:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("./axis_ids");B.exports=function(e){return function(a,n){var r=a[e];if(!!Array.isArray(r))for(var u=d.subplotsRegistry.cartesian,s=u.idRegex,i=n._subplots,f=i.xaxis,h=i.yaxis,p=i.cartesian,v=n._has("cartesian")||n._has("gl2d"),y=0;y<r.length;y++){var g=r[y];if(!!l.isPlainObject(g)){var A=b.cleanId(g.xref,"x",!1),m=b.cleanId(g.yref,"y",!1),M=s.x.test(A),_=s.y.test(m);if(M||_){v||l.pushUnique(n._basePlotModules,u);var T=!1;M&&f.indexOf(A)===-1&&(f.push(A),T=!0),_&&h.indexOf(m)===-1&&(h.push(m),T=!0),T&&M&&_&&p.push(A+m)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=t("../plots"),e=t("../../components/drawing"),o=t("../get_data").getModuleCalcData,a=t("./axis_ids"),n=t("./constants"),r=t("../../constants/xmlns_namespaces"),u=b.ensureSingle;function s(y,g,A){return b.ensureSingle(y,g,A,function(m){m.datum(A)})}H.name="cartesian",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=n.idRegex,H.attrRegex=n.attrRegex,H.attributes=t("./attributes"),H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.transitionAxes=t("./transition_axes"),H.finalizeSubplots=function(y,g){var A=g._subplots,m=A.xaxis,M=A.yaxis,_=A.cartesian,T=_.concat(A.gl2d||[]),x={},c={},L,S,k;for(L=0;L<T.length;L++){var P=T[L].split("y");x[P[0]]=1,c["y"+P[1]]=1}for(L=0;L<m.length;L++)S=m[L],x[S]||(k=(y[a.id2name(S)]||{}).anchor,n.idRegex.y.test(k)||(k="y"),_.push(S+k),T.push(S+k),c[k]||(c[k]=1,b.pushUnique(M,k)));for(L=0;L<M.length;L++)k=M[L],c[k]||(S=(y[a.id2name(k)]||{}).anchor,n.idRegex.x.test(S)||(S="x"),_.push(S+k),T.push(S+k),x[S]||(x[S]=1,b.pushUnique(m,S)));if(!T.length){S="",k="";for(var z in y)if(n.attrRegex.test(z)){var I=z.charAt(0);I==="x"?(!S||+z.substr(5)<+S.substr(5))&&(S=z):(!k||+z.substr(5)<+k.substr(5))&&(k=z)}S=S?a.name2id(S):"x",k=k?a.name2id(k):"y",m.push(S),M.push(k),_.push(S+k)}},H.plot=function(y,g,A,m){var M=y._fullLayout,_=M._subplots.cartesian,T=y.calcdata,x;if(!Array.isArray(g))for(g=[],x=0;x<T.length;x++)g.push(x);for(x=0;x<_.length;x++){for(var c=_[x],L=M._plots[c],S=[],k,P=0;P<T.length;P++){var z=T[P],I=z[0].trace;I.xaxis+I.yaxis===c&&((g.indexOf(I.index)!==-1||I.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===c&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(z)),k=z)}i(y,L,S,A,m)}};function i(y,g,A,m,M){for(var _=n.traceLayerClasses,T=y._fullLayout,x=T._modules,c,L,S,k=[],P=[],z=0;z<x.length;z++){c=x[z];var I=c.name,R=l.modules[I].categories;if(R.svg){var D=c.layerName||I+"layer",O=c.plot;L=o(A,O),S=L[0],A=L[1],S.length&&k.push({i:_.indexOf(D),className:D,plotMethod:O,cdModule:S}),R.zoomScale&&P.push("."+D)}}k.sort(function(X,q){return X.i-q.i});var F=g.plot.selectAll("g.mlayer").data(k,function(X){return X.className});if(F.enter().append("g").attr("class",function(X){return X.className}).classed("mlayer",!0).classed("rangeplot",g.isRangePlot),F.exit().remove(),F.order(),F.each(function(X){var q=d.select(this),$=X.className;X.plotMethod(y,g,X.cdModule,q,m,M),n.clipOnAxisFalseQuery.indexOf("."+$)===-1&&e.setClipUrl(q,g.layerClipId,y)}),T._has("scattergl")&&(c=l.getModule("scattergl"),S=o(A,c)[0],c.plot(y,g,S)),!y._context.staticPlot&&(g._hasClipOnAxisFalse&&(g.clipOnAxisFalseTraces=g.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Y=g.plot.selectAll(P.join(",")).selectAll(".trace");g.zoomScalePts=Y.selectAll("path.point"),g.zoomScaleTxt=Y.selectAll(".textpoint")}}H.clean=function(y,g,A,m){var M=m._plots||{},_=g._plots||{},T=m._subplots||{},x,c,L;if(m._hasOnlyLargeSploms&&!g._hasOnlyLargeSploms)for(L in M)x=M[L],x.plotgroup&&x.plotgroup.remove();var S=m._has&&m._has("gl"),k=g._has&&g._has("gl");if(S&&!k)for(L in M)x=M[L],x._scene&&x._scene.destroy();if(T.xaxis&&T.yaxis){var P=a.listIds({_fullLayout:m});for(c=0;c<P.length;c++){var z=P[c];g[a.id2name(z)]||m._infolayer.selectAll(".g-"+z+"title").remove()}}var I=m._has&&m._has("cartesian"),R=g._has&&g._has("cartesian");if(I&&!R)p(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(T.cartesian)for(c=0;c<T.cartesian.length;c++){var D=T.cartesian[c];if(!_[D]){var O="."+D+",."+D+"-x,."+D+"-y";m._cartesianlayer.selectAll(O).remove(),v(D,m)}}},H.drawFramework=function(y){var g=y._fullLayout,A=f(y),m=g._cartesianlayer.selectAll(".subplot").data(A,String);m.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),m.order(),m.exit().call(p,g),m.each(function(M){var _=M[0],T=g._plots[_];T.plotgroup=d.select(this),h(y,T),T.draglayer=u(g._draggers,"g",_)})},H.rangePlot=function(y,g,A){h(y,g),i(y,g,A),w.style(y)};function f(y){var g=y._fullLayout,A=g._subplots.cartesian,m=A.length,M,_,T,x,c,L,S=[],k=[];for(M=0;M<m;M++){T=A[M],x=g._plots[T],c=x.xaxis,L=x.yaxis;var P=c._mainAxis,z=L._mainAxis,I=P._id+z._id,R=g._plots[I];x.overlays=[],I!==T&&R?(x.mainplot=I,x.mainplotinfo=R,k.push(T)):(x.mainplot=void 0,x.mainplotinfo=void 0,S.push(T))}for(M=0;M<k.length;M++)T=k[M],x=g._plots[T],x.mainplotinfo.overlays.push(x);var D=S.concat(k),O=new Array(m);for(M=0;M<m;M++){T=D[M],x=g._plots[T],c=x.xaxis,L=x.yaxis;var F=[T,c.layer,L.layer,c.overlaying||"",L.overlaying||""];for(_=0;_<x.overlays.length;_++)F.push(x.overlays[_].id);O[M]=F}return O}function h(y,g){var A=g.plotgroup,m=g.id,M=n.layerValue2layerClass[g.xaxis.layer],_=n.layerValue2layerClass[g.yaxis.layer],T=y._fullLayout._hasOnlyLargeSploms;if(g.mainplot){var c=g.mainplotinfo,L=c.plotgroup,S=m+"-x",k=m+"-y";g.gridlayer=c.gridlayer,g.zerolinelayer=c.zerolinelayer,u(c.overlinesBelow,"path",S),u(c.overlinesBelow,"path",k),u(c.overaxesBelow,"g",S),u(c.overaxesBelow,"g",k),g.plot=u(c.overplot,"g",m),u(c.overlinesAbove,"path",S),u(c.overlinesAbove,"path",k),u(c.overaxesAbove,"g",S),u(c.overaxesAbove,"g",k),g.xlines=L.select(".overlines-"+M).select("."+S),g.ylines=L.select(".overlines-"+_).select("."+k),g.xaxislayer=L.select(".overaxes-"+M).select("."+S),g.yaxislayer=L.select(".overaxes-"+_).select("."+k)}else if(T)g.xlines=u(A,"path","xlines-above"),g.ylines=u(A,"path","ylines-above"),g.xaxislayer=u(A,"g","xaxislayer-above"),g.yaxislayer=u(A,"g","yaxislayer-above");else{var x=u(A,"g","layer-subplot");g.shapelayer=u(x,"g","shapelayer"),g.imagelayer=u(x,"g","imagelayer"),g.gridlayer=u(A,"g","gridlayer"),g.zerolinelayer=u(A,"g","zerolinelayer"),u(A,"path","xlines-below"),u(A,"path","ylines-below"),g.overlinesBelow=u(A,"g","overlines-below"),u(A,"g","xaxislayer-below"),u(A,"g","yaxislayer-below"),g.overaxesBelow=u(A,"g","overaxes-below"),g.plot=u(A,"g","plot"),g.overplot=u(A,"g","overplot"),g.xlines=u(A,"path","xlines-above"),g.ylines=u(A,"path","ylines-above"),g.overlinesAbove=u(A,"g","overlines-above"),u(A,"g","xaxislayer-above"),u(A,"g","yaxislayer-above"),g.overaxesAbove=u(A,"g","overaxes-above"),g.xlines=A.select(".xlines-"+M),g.ylines=A.select(".ylines-"+_),g.xaxislayer=A.select(".xaxislayer-"+M),g.yaxislayer=A.select(".yaxislayer-"+_)}T||(s(g.gridlayer,"g",g.xaxis._id),s(g.gridlayer,"g",g.yaxis._id),g.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(a.idSort)),g.xlines.style("fill","none").classed("crisp",!0),g.ylines.style("fill","none").classed("crisp",!0)}function p(y,g){if(!!y){var A={};y.each(function(c){var L=c[0],S=d.select(this);S.remove(),v(L,g),A[L]=!0});for(var m in g._plots)for(var M=g._plots[m],_=M.overlays||[],T=0;T<_.length;T++){var x=_[T];A[x.id]&&x.plot.selectAll(".trace").remove()}}}function v(y,g){g._draggers.selectAll("g."+y).remove(),g._defs.select("#clip"+g._uid+y+"plot").remove()}H.toSVG=function(y){var g=y._fullLayout._glimages,A=d.select(y).selectAll(".svg-container"),m=A.filter(function(_,T){return T===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var _=this,T=_.toDataURL("image/png"),x=g.append("svg:image");x.attr({xmlns:r.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}m.each(M)},H.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(t,B,H){var d=t("../font_attributes"),l=t("../../components/color/attributes"),b=t("../../components/drawing/attributes").dash,w=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,o=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=t("../../constants/numerical").ONEDAY,n=t("./constants"),r=n.HOUR_PATTERN,u=n.WEEKDAY_PATTERN;B.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:l.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[u,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:w({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:l.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../components/fx/helpers").isUnifiedHover,w=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),o=t("../layout_attributes"),a=t("./layout_attributes"),n=t("./type_defaults"),r=t("./axis_defaults"),u=t("./constraints"),s=t("./position_defaults"),i=t("./axis_ids"),f=i.id2name,h=i.name2id,p=t("./constants").AX_ID_PATTERN,v=t("../../registry"),y=v.traceIs,g=v.getComponentMethod;function A(m,M,_){Array.isArray(m[M])?m[M].push(_):m[M]=[_]}B.exports=function(M,_,T){var x=_.autotypenumbers,c={},L={},S={},k={},P={},z={},I={},R={},D={},O={},F,Y;for(F=0;F<T.length;F++){var X=T[F];if(!(!y(X,"cartesian")&&!y(X,"gl2d"))){var q;if(X.xaxis)q=f(X.xaxis),A(c,q,X);else if(X.xaxes)for(Y=0;Y<X.xaxes.length;Y++)A(c,f(X.xaxes[Y]),X);var $;if(X.yaxis)$=f(X.yaxis),A(c,$,X);else if(X.yaxes)for(Y=0;Y<X.yaxes.length;Y++)A(c,f(X.yaxes[Y]),X);if(X.type==="funnel"?X.orientation==="h"?(q&&(L[q]=!0),$&&(I[$]=!0)):$&&(S[$]=!0):X.type==="image"?($&&(R[$]=!0),q&&(R[q]=!0)):($&&(P[$]=!0,z[$]=!0),(!y(X,"carpet")||X.type==="carpet"&&!X._cheater)&&q&&(k[q]=!0)),X.type==="carpet"&&X._cheater&&q&&(L[q]=!0),y(X,"2dMap")&&(D[q]=!0,D[$]=!0),y(X,"oriented")){var V=X.orientation==="h"?$:q;O[V]=!0}}}var K=_._subplots,se=K.xaxis,ue=K.yaxis,oe=d.simpleMap(se,f),U=d.simpleMap(ue,f),G=oe.concat(U),re=l.background;se.length&&ue.length&&(re=d.coerce(M,_,o,"plot_bgcolor"));var ee=l.combine(re,_.paper_bgcolor),j,Q,ne,ae,ie;function fe(){var Qe=c[j]||[];ie._traceIndices=Qe.map(function(Ce){return Ce._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=j,ie._id=Q}function me(Qe,Ce){return d.coerce(ae,ie,a,Qe,Ce)}function ce(Qe,Ce){return d.coerce2(ae,ie,a,Qe,Ce)}function ye(Qe){return Qe==="x"?ue:se}function xe(Qe,Ce){for(var je=Qe==="x"?oe:U,rt=[],ut=0;ut<je.length;ut++){var Pt=je[ut];Pt!==Ce&&!(M[Pt]||{}).overlaying&&rt.push(h(Pt))}return rt}var ke={x:ye("x"),y:ye("y")},Ae=ke.x.concat(ke.y),Oe={},He=[];function Ge(){var Qe=ae.matches;p.test(Qe)&&Ae.indexOf(Qe)===-1&&(Oe[Qe]=ae.type,He=Object.keys(Oe))}var _e=w(M,_),Ie=b(_e);for(F=0;F<G.length;F++){j=G[F],Q=h(j),ne=j.charAt(0),d.isPlainObject(M[j])||(M[j]={}),ae=M[j],ie=e.newContainer(_,j,ne+"axis"),fe();var Ye=ne==="x"&&!k[j]&&L[j]||ne==="y"&&!P[j]&&S[j],qe=ne==="y"&&(!z[j]&&I[j]||R[j]),Ue={letter:ne,font:_.font,outerTicks:D[j],showGrid:!O[j],data:c[j]||[],bgColor:ee,calendar:_.calendar,automargin:!0,visibleDflt:Ye,reverseDflt:qe,autotypenumbersDflt:x,splomStash:((_._splomAxes||{})[ne]||{})[Q]};me("uirevision",_.uirevision),n(ae,ie,me,Ue),r(ae,ie,me,Ue,_);var Re=Ie&&ne===_e.charAt(0),Ve=ce("spikecolor",Ie?ie.color:void 0),dt=ce("spikethickness",Ie?1.5:void 0),Dt=ce("spikedash",Ie?"dot":void 0),Gt=ce("spikemode",Ie?"across":void 0),kt=ce("spikesnap"),zt=me("showspikes",!!Re||!!Ve||!!dt||!!Dt||!!Gt||!!kt);zt||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),s(ae,ie,me,{letter:ne,counterAxes:ke[ne],overlayableAxes:xe(ne,j),grid:_.grid}),me("title.standoff"),Ge(),ie._input=ae}for(F=0;F<He.length;){Q=He[F++],j=f(Q),ne=j.charAt(0),d.isPlainObject(M[j])||(M[j]={}),ae=M[j],ie=e.newContainer(_,j,ne+"axis"),fe();var Bt={letter:ne,font:_.font,outerTicks:D[j],showGrid:!O[j],data:[],bgColor:ee,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:x,splomStash:((_._splomAxes||{})[ne]||{})[Q]};me("uirevision",_.uirevision),ie.type=Oe[Q]||"linear",r(ae,ie,me,Bt,_),s(ae,ie,me,{letter:ne,counterAxes:ke[ne],overlayableAxes:xe(ne,j),grid:_.grid}),me("fixedrange"),Ge(),ie._input=ae}var Lt=g("rangeslider","handleDefaults"),Mt=g("rangeselector","handleDefaults");for(F=0;F<oe.length;F++)j=oe[F],ae=M[j],ie=_[j],Lt(M,_,j),ie.type==="date"&&Mt(ae,ie,_,U,ie.calendar),me("fixedrange");for(F=0;F<U.length;F++){j=U[F],ae=M[j],ie=_[j];var it=_[f(ie.anchor)],ht=g("rangeslider","isVisible")(it);me("fixedrange",ht)}u.handleDefaults(M,_,{axIds:Ae.concat(He).sort(i.idSort),axHasImage:R})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(t,B,H){var d=t("tinycolor2").mix,l=t("../../components/color/attributes").lightFraction,b=t("../../lib");B.exports=function(e,o,a,n){n=n||{};var r=n.dfltColor;function u(M,_){return b.coerce2(e,o,n.attributes,M,_)}var s=u("linecolor",r),i=u("linewidth"),f=a("showline",n.showLine||!!s||!!i);f||(delete o.linecolor,delete o.linewidth);var h=d(r,n.bgColor,n.blend||l).toRgbString(),p=u("gridcolor",h),v=u("gridwidth"),y=a("showgrid",n.showGrid||!!p||!!v);if(y||(delete o.gridcolor,delete o.gridwidth),!n.noZeroLine){var g=u("zerolinecolor",r),A=u("zerolinewidth"),m=a("zeroline",n.showGrid||!!g||!!A);m||(delete o.zerolinecolor,delete o.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib");B.exports=function(w,e,o,a){var n=a.counterAxes||[],r=a.overlayableAxes||[],u=a.letter,s=a.grid,i,f,h,p;s&&(f=s._domains[u][s._axisMap[e._id]],i=s._anchors[e._id],f&&(h=s[u+"side"].split(" ")[0],p=s.domain[u][h==="right"||h==="top"?1:0])),f=f||[0,1],i=i||(d(w.position)?"free":n[0]||"free"),h=h||(u==="x"?"bottom":"left"),p=p||0;var v=l.coerce(w,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:i}},"anchor");v==="free"&&o("position",p),l.coerce(w,e,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");var y=!1;if(r.length&&(y=l.coerce(w,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!y){var g=o("domain",f);g[0]>g[1]-1/4096&&(e.domain=f),l.noneOrAll(w.domain,e.domain,f)}return o("layer"),e}},{"../../lib":503,"fast-isnumeric":190}],573:[function(t,B,H){var d=t("./show_dflt");B.exports=function(b,w,e,o,a){a||(a={});var n=a.tickSuffixDflt,r=d(b),u=e("tickprefix");u&&e("showtickprefix",r);var s=e("ticksuffix",n);s&&e("showticksuffix",r)}},{"./show_dflt":577}],574:[function(t,B,H){var d=t("../../constants/alignment").FROM_BL;B.exports=function(b,w,e){e===void 0&&(e=d[b.constraintoward||"center"]);var o=[b.r2l(b.range[0]),b.r2l(b.range[1])],a=o[0]+(o[1]-o[0])*e;b.range=b._input.range=[b.l2r(a+(o[0]-a)*w),b.l2r(a+(o[1]-a)*w)],b.setScale()}},{"../../constants/alignment":471}],575:[function(t,B,H){var d=t("polybooljs"),l=t("../../registry"),b=t("../../components/drawing").dashStyle,w=t("../../components/color"),e=t("../../components/fx"),o=t("../../components/fx/helpers").makeEventData,a=t("../../components/dragelement/helpers"),n=a.freeMode,r=a.rectMode,u=a.drawMode,s=a.openMode,i=a.selectMode,f=t("../../components/shapes/draw_newshape/display_outlines"),h=t("../../components/shapes/draw_newshape/helpers").handleEllipse,p=t("../../components/shapes/draw_newshape/newshapes"),v=t("../../lib"),y=t("../../lib/polygon"),g=t("../../lib/throttle"),A=t("./axis_ids").getFromId,m=t("../../lib/clear_gl_canvases"),M=t("../../plot_api/subroutines").redrawReglTraces,_=t("./constants"),T=_.MINSELECT,x=y.filter,c=y.tester,L=t("./handle_outline").clearSelect,S=t("./helpers"),k=S.p2r,P=S.axValue,z=S.getTransform;function I(j,Q,ne,ae,ie){var fe=n(ie),me=r(ie),ce=s(ie),ye=u(ie),xe=i(ie),ke=ie==="drawline",Ae=ie==="drawcircle",Oe=ke||Ae,He=ae.gd,Ge=He._fullLayout,_e=Ge._zoomlayer,Ie=ae.element.getBoundingClientRect(),Ye=ae.plotinfo,qe=z(Ye),Ue=Q-Ie.left,Re=ne-Ie.top;Ge._calcInverseTransform(He);var Ve=v.apply3DTransform(Ge._invTransform)(Ue,Re);Ue=Ve[0],Re=Ve[1];var dt=Ge._invScaleX,Dt=Ge._invScaleY,Gt=Ue,kt=Re,zt="M"+Ue+","+Re,Bt=ae.xaxes[0]._length,Lt=ae.yaxes[0]._length,Mt=ae.xaxes.concat(ae.yaxes),it=j.altKey&&!(u(ie)&&ce),ht,Qe,Ce,je,rt,ut,Pt;X(j,He,ae),fe&&(ht=x([[Ue,Re]],_.BENDPX));var St=_e.selectAll("path.select-outline-"+Ye.id).data(ye?[0]:[1,2]),Nt=Ge.newshape;St.enter().append("path").attr("class",function(rr){return"select-outline select-outline-"+rr+" select-outline-"+Ye.id}).style(ye?{opacity:Nt.opacity/2,fill:ce?void 0:Nt.fillcolor,stroke:Nt.line.color,"stroke-dasharray":b(Nt.line.dash,Nt.line.width),"stroke-width":Nt.line.width+"px"}:{}).attr("fill-rule",Nt.fillrule).classed("cursor-move",!!ye).attr("transform",qe).attr("d",zt+"Z");var Xt=_e.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform",qe).attr("d","M0,0Z"),Ot=Ge._uid+_.SELECTID,Kt=[],Je=$(He,ae.xaxes,ae.yaxes,ae.subplot);function gt(rr,vr){return rr-vr}var Et;Ye.fillRangeItems?Et=Ye.fillRangeItems:me?Et=function(rr,vr){var or=rr.range={};for(rt=0;rt<Mt.length;rt++){var dr=Mt[rt],Lr=dr._id.charAt(0);or[dr._id]=[k(dr,vr[Lr+"min"]),k(dr,vr[Lr+"max"])].sort(gt)}}:Et=function(rr,vr,or){var dr=rr.lassoPoints={};for(rt=0;rt<Mt.length;rt++){var Lr=Mt[rt];dr[Lr._id]=or.filtered.map(P(Lr))}},ae.moveFn=function(rr,vr){Gt=Math.max(0,Math.min(Bt,dt*rr+Ue)),kt=Math.max(0,Math.min(Lt,Dt*vr+Re));var or=Math.abs(Gt-Ue),dr=Math.abs(kt-Re);if(me){var Lr,kr,tr;if(xe){var Or=Ge.selectdirection;switch(Or==="any"?dr<Math.min(or*.6,T)?Lr="h":or<Math.min(dr*.6,T)?Lr="v":Lr="d":Lr=Or,Lr){case"h":kr=Ae?Lt/2:0,tr=Lt;break;case"v":kr=Ae?Bt/2:0,tr=Bt;break}}if(ye)switch(Ge.newshape.drawdirection){case"vertical":Lr="h",kr=Ae?Lt/2:0,tr=Lt;break;case"horizontal":Lr="v",kr=Ae?Bt/2:0,tr=Bt;break;case"ortho":or<dr?(Lr="h",kr=Re,tr=kt):(Lr="v",kr=Ue,tr=Gt);break;default:Lr="d"}Lr==="h"?(je=Oe?h(Ae,[Gt,kr],[Gt,tr]):[[Ue,kr],[Ue,tr],[Gt,tr],[Gt,kr]],je.xmin=Oe?Gt:Math.min(Ue,Gt),je.xmax=Oe?Gt:Math.max(Ue,Gt),je.ymin=Math.min(kr,tr),je.ymax=Math.max(kr,tr),Xt.attr("d","M"+je.xmin+","+(Re-T)+"h-4v"+2*T+"h4ZM"+(je.xmax-1)+","+(Re-T)+"h4v"+2*T+"h-4Z")):Lr==="v"?(je=Oe?h(Ae,[kr,kt],[tr,kt]):[[kr,Re],[kr,kt],[tr,kt],[tr,Re]],je.xmin=Math.min(kr,tr),je.xmax=Math.max(kr,tr),je.ymin=Oe?kt:Math.min(Re,kt),je.ymax=Oe?kt:Math.max(Re,kt),Xt.attr("d","M"+(Ue-T)+","+je.ymin+"v-4h"+2*T+"v4ZM"+(Ue-T)+","+(je.ymax-1)+"v4h"+2*T+"v-4Z")):Lr==="d"&&(je=Oe?h(Ae,[Ue,Re],[Gt,kt]):[[Ue,Re],[Ue,kt],[Gt,kt],[Gt,Re]],je.xmin=Math.min(Ue,Gt),je.xmax=Math.max(Ue,Gt),je.ymin=Math.min(Re,kt),je.ymax=Math.max(Re,kt),Xt.attr("d","M0,0Z"))}else fe&&(ht.addPt([Gt,kt]),je=ht.filtered);ae.selectionDefs&&ae.selectionDefs.length?(Ce=G(ae.mergedPolygons,je,it),je.subtract=it,Qe=Y(ae.selectionDefs.concat([je]))):(Ce=[je],Qe=c(je)),f(ee(Ce,ce),St,ae),xe&&g.throttle(Ot,_.SELECTDELAY,function(){Kt=[];var et,we;for(rt=0;rt<Je.length;rt++)if(ut=Je[rt],we=ut._module.selectPoints(ut,Qe),et=re(we,ut),Kt.length)for(var Se=0;Se<et.length;Se++)Kt.push(et[Se]);else Kt=et;Pt={points:Kt},U(He,Je,Pt),Et(Pt,je,ht),ae.gd.emit("plotly_selecting",Pt)})},ae.clickFn=function(rr,vr){if(Xt.remove(),He._fullLayout._activeShapeIndex>=0){He._fullLayout._deactivateShape(He);return}if(!ye){var or=Ge.clickmode;g.done(Ot).then(function(){if(g.clear(Ot),rr===2){for(St.remove(),rt=0;rt<Je.length;rt++)ut=Je[rt],ut._module.selectPoints(ut,!1);U(He,Je),q(ae),He.emit("plotly_deselect",null)}else or.indexOf("select")>-1&&R(vr,He,ae.xaxes,ae.yaxes,ae.subplot,ae,St),or==="event"&&He.emit("plotly_selected",void 0);e.click(He,vr)}).catch(v.error)}},ae.doneFn=function(){Xt.remove(),g.done(Ot).then(function(){g.clear(Ot),ae.gd.emit("plotly_selected",Pt),je&&ae.selectionDefs&&(je.subtract=it,ae.selectionDefs.push(je),ae.mergedPolygons.length=0,[].push.apply(ae.mergedPolygons,Ce)),ae.doneFnCompleted&&ae.doneFnCompleted(Kt)}).catch(v.error),ye&&q(ae)}}function R(j,Q,ne,ae,ie,fe,me){var ce=Q._hoverdata,ye=Q._fullLayout,xe=ye.clickmode,ke=xe.indexOf("event")>-1,Ae=[],Oe,He,Ge,_e,Ie,Ye,qe,Ue,Re,Ve;if(V(ce)){X(j,Q,fe),Oe=$(Q,ne,ae,ie);var dt=K(ce,Oe),Dt=dt.pointNumbers.length>0;if(Dt?ue(Oe,dt):oe(Oe)&&(qe=se(dt))){for(me&&me.remove(),Ve=0;Ve<Oe.length;Ve++)He=Oe[Ve],He._module.selectPoints(He,!1);U(Q,Oe),q(fe),ke&&Q.emit("plotly_deselect",null)}else{Ue=j.shiftKey&&(qe!==void 0?qe:se(dt)),Ge=D(dt.pointNumber,dt.searchInfo,Ue);var Gt=fe.selectionDefs.concat([Ge]);for(_e=Y(Gt),Ve=0;Ve<Oe.length;Ve++)if(Ie=Oe[Ve]._module.selectPoints(Oe[Ve],_e),Ye=re(Ie,Oe[Ve]),Ae.length)for(var kt=0;kt<Ye.length;kt++)Ae.push(Ye[kt]);else Ae=Ye;if(Re={points:Ae},U(Q,Oe,Re),Ge&&fe&&fe.selectionDefs.push(Ge),me){var zt=fe.mergedPolygons,Bt=s(fe.dragmode);f(ee(zt,Bt),me,fe)}ke&&Q.emit("plotly_selected",Re)}}}function D(j,Q,ne){return{pointNumber:j,searchInfo:Q,subtract:ne}}function O(j){return"pointNumber"in j&&"searchInfo"in j}function F(j){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Q,ne,ae,ie){var fe=j.searchInfo.cd[0].trace._expandedIndex,me=ie.cd[0].trace._expandedIndex;return me===fe&&ae===j.pointNumber},isRect:!1,degenerate:!1,subtract:j.subtract}}function Y(j){for(var Q=[],ne=O(j[0])?0:j[0][0][0],ae=ne,ie=O(j[0])?0:j[0][0][1],fe=ie,me=0;me<j.length;me++)if(O(j[me]))Q.push(F(j[me]));else{var ce=y.tester(j[me]);ce.subtract=j[me].subtract,Q.push(ce),ne=Math.min(ne,ce.xmin),ae=Math.max(ae,ce.xmax),ie=Math.min(ie,ce.ymin),fe=Math.max(fe,ce.ymax)}function ye(xe,ke,Ae,Oe){for(var He=!1,Ge=0;Ge<Q.length;Ge++)Q[Ge].contains(xe,ke,Ae,Oe)&&(He=Q[Ge].subtract===!1);return He}return{xmin:ne,xmax:ae,ymin:ie,ymax:fe,pts:[],contains:ye,isRect:!1,degenerate:!1}}function X(j,Q,ne){Q._fullLayout._drawing=!1;var ae=Q._fullLayout,ie=ne.plotinfo,fe=ne.dragmode,me=ae._lastSelectedSubplot&&ae._lastSelectedSubplot===ie.id,ce=(j.shiftKey||j.altKey)&&!(u(fe)&&s(fe));me&&ce&&ie.selection&&ie.selection.selectionDefs&&!ne.selectionDefs?(ne.selectionDefs=ie.selection.selectionDefs,ne.mergedPolygons=ie.selection.mergedPolygons):(!ce||!ie.selection)&&q(ne),me||(L(Q),ae._lastSelectedSubplot=ie.id)}function q(j){var Q=j.dragmode,ne=j.plotinfo,ae=j.gd;if(ae._fullLayout._activeShapeIndex>=0&&ae._fullLayout._deactivateShape(ae),u(Q)){var ie=ae._fullLayout,fe=ie._zoomlayer,me=fe.selectAll(".select-outline-"+ne.id);if(me&&ae._fullLayout._drawing){var ce=p(me,j);ce&&l.call("_guiRelayout",ae,{shapes:ce}),ae._fullLayout._drawing=!1}}ne.selection={},ne.selection.selectionDefs=j.selectionDefs=[],ne.selection.mergedPolygons=j.mergedPolygons=[]}function $(j,Q,ne,ae){var ie=[],fe=Q.map(function(He){return He._id}),me=ne.map(function(He){return He._id}),ce,ye,xe;for(xe=0;xe<j.calcdata.length;xe++)if(ce=j.calcdata[xe],ye=ce[0].trace,!(ye.visible!==!0||!ye._module||!ye._module.selectPoints))if(ae&&(ye.subplot===ae||ye.geo===ae))ie.push(Oe(ye._module,ce,Q[0],ne[0]));else if(ye.type==="splom"&&ye._xaxes[fe[0]]&&ye._yaxes[me[0]]){var ke=Oe(ye._module,ce,Q[0],ne[0]);ke.scene=j._fullLayout._splomScenes[ye.uid],ie.push(ke)}else if(ye.type==="sankey"){var Ae=Oe(ye._module,ce,Q[0],ne[0]);ie.push(Ae)}else{if(fe.indexOf(ye.xaxis)===-1||me.indexOf(ye.yaxis)===-1)continue;ie.push(Oe(ye._module,ce,A(j,ye.xaxis),A(j,ye.yaxis)))}return ie;function Oe(He,Ge,_e,Ie){return{_module:He,cd:Ge,xaxis:_e,yaxis:Ie}}}function V(j){return j&&Array.isArray(j)&&j[0].hoverOnBox!==!0}function K(j,Q){var ne=j[0],ae=-1,ie=[],fe,me;for(me=0;me<Q.length;me++)if(fe=Q[me],ne.fullData._expandedIndex===fe.cd[0].trace._expandedIndex){if(ne.hoverOnBox===!0)break;ne.pointNumber!==void 0?ae=ne.pointNumber:ne.binNumber!==void 0&&(ae=ne.binNumber,ie=ne.pointNumbers);break}return{pointNumber:ae,pointNumbers:ie,searchInfo:fe}}function se(j){var Q=j.searchInfo.cd[0].trace,ne=j.pointNumber,ae=j.pointNumbers,ie=ae.length>0,fe=ie?ae[0]:ne;return Q.selectedpoints?Q.selectedpoints.indexOf(fe)>-1:!1}function ue(j,Q){var ne=[],ae,ie,fe,me;for(me=0;me<j.length;me++)ae=j[me],ae.cd[0].trace.selectedpoints&&ae.cd[0].trace.selectedpoints.length>0&&ne.push(ae);if(ne.length===1&&(fe=ne[0]===Q.searchInfo,fe&&(ie=Q.searchInfo.cd[0].trace,ie.selectedpoints.length===Q.pointNumbers.length))){for(me=0;me<Q.pointNumbers.length;me++)if(ie.selectedpoints.indexOf(Q.pointNumbers[me])<0)return!1;return!0}return!1}function oe(j){var Q=0,ne,ae,ie;for(ie=0;ie<j.length;ie++)if(ne=j[ie],ae=ne.cd[0].trace,ae.selectedpoints&&(ae.selectedpoints.length>1||(Q+=ae.selectedpoints.length,Q>1)))return!1;return Q===1}function U(j,Q,ne){var ae,ie,fe,me;for(ae=0;ae<Q.length;ae++){var ce=Q[ae].cd[0].trace._fullInput,ye=j._fullLayout._tracePreGUI[ce.uid]||{};ye.selectedpoints===void 0&&(ye.selectedpoints=ce._input.selectedpoints||null)}if(ne){var xe=ne.points||[];for(ae=0;ae<Q.length;ae++)me=Q[ae].cd[0].trace,me._input.selectedpoints=me._fullInput.selectedpoints=[],me._fullInput!==me&&(me.selectedpoints=[]);for(ae=0;ae<xe.length;ae++){var ke=xe[ae],Ae=ke.data,Oe=ke.fullData;ke.pointIndices?([].push.apply(Ae.selectedpoints,ke.pointIndices),me._fullInput!==me&&[].push.apply(Oe.selectedpoints,ke.pointIndices)):(Ae.selectedpoints.push(ke.pointIndex),me._fullInput!==me&&Oe.selectedpoints.push(ke.pointIndex))}}else for(ae=0;ae<Q.length;ae++)me=Q[ae].cd[0].trace,delete me.selectedpoints,delete me._input.selectedpoints,me._fullInput!==me&&delete me._fullInput.selectedpoints;var He=!1;for(ae=0;ae<Q.length;ae++){ie=Q[ae],fe=ie.cd,me=fe[0].trace,l.traceIs(me,"regl")&&(He=!0);var Ge=ie._module,_e=Ge.styleOnSelect||Ge.style;_e&&(_e(j,fe,fe[0].node3),fe[0].nodeRangePlot3&&_e(j,fe,fe[0].nodeRangePlot3))}He&&(m(j),M(j))}function G(j,Q,ne){var ae;return ne?(ae=d.difference({regions:j,inverted:!1},{regions:[Q],inverted:!1}),ae.regions):(ae=d.union({regions:j,inverted:!1},{regions:[Q],inverted:!1}),ae.regions)}function re(j,Q){if(Array.isArray(j))for(var ne=Q.cd,ae=Q.cd[0].trace,ie=0;ie<j.length;ie++)j[ie]=o(j[ie],ae,ne);return j}function ee(j,Q){for(var ne=[],ae=0;ae<j.length;ae++){ne[ae]=[];for(var ie=0;ie<j[ae].length;ie++){ne[ae][ie]=[],ne[ae][ie][0]=ie?"L":"M";for(var fe=0;fe<j[ae][ie].length;fe++)ne[ae][ie].push(j[ae][ie][fe])}Q||ne[ae].push(["Z",ne[ae][0][1],ne[ae][0][2]])}return ne}B.exports={prepSelect:I,clearSelect:L,clearSelectionsCache:q,selectOnClick:R}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").utcFormat,b=t("../../lib"),w=b.numberFormat,e=t("fast-isnumeric"),o=b.cleanNumber,a=b.ms2DateTime,n=b.dateTime2ms,r=b.ensureNumber,u=b.isArrayOrTypedArray,s=t("../../constants/numerical"),i=s.FP_SAFE,f=s.BADNUM,h=s.LOG_CLIP,p=s.ONEWEEK,v=s.ONEDAY,y=s.ONEHOUR,g=s.ONEMIN,A=s.ONESEC,m=t("./axis_ids"),M=t("./constants"),_=M.HOUR_PATTERN,T=M.WEEKDAY_PATTERN;function x(L){return Math.pow(10,L)}function c(L){return L!=null}B.exports=function(S,k){k=k||{};var P=S._id||"x",z=P.charAt(0);function I(G,re){if(G>0)return Math.log(G)/Math.LN10;if(G<=0&&re&&S.range&&S.range.length===2){var ee=S.range[0],j=S.range[1];return .5*(ee+j-2*h*Math.abs(ee-j))}else return f}function R(G,re,ee,j){if((j||{}).msUTC&&e(G))return+G;var Q=n(G,ee||S.calendar);if(Q===f)if(e(G)){G=+G;var ne=Math.floor(b.mod(G+.05,1)*10),ae=Math.round(G-ne/10);Q=n(new Date(ae))+ne/10}else return f;return Q}function D(G,re,ee){return a(G,re,ee||S.calendar)}function O(G){return S._categories[Math.round(G)]}function F(G){if(c(G)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[G]!==void 0)return S._categoriesMap[G];S._categories.push(typeof G=="number"?String(G):G);var re=S._categories.length-1;return S._categoriesMap[G]=re,re}return f}function Y(G,re){for(var ee=new Array(re),j=0;j<re;j++){var Q=(G[0]||[])[j],ne=(G[1]||[])[j];ee[j]=X([Q,ne])}return ee}function X(G){if(S._categoriesMap)return S._categoriesMap[G]}function q(G){var re=X(G);if(re!==void 0)return re;if(e(G))return+G}function $(G){return e(G)?+G:X(G)}function V(G,re,ee){return d.round(ee+re*G,2)}function K(G,re,ee){return(G-ee)/re}var se=function(re){return e(re)?V(re,S._m,S._b):f},ue=function(G){return K(G,S._m,S._b)};if(S.rangebreaks){var oe=z==="y";se=function(G){if(!e(G))return f;var re=S._rangebreaks.length;if(!re)return V(G,S._m,S._b);var ee=oe;S.range[0]>S.range[1]&&(ee=!ee);for(var j=ee?-1:1,Q=j*G,ne=0,ae=0;ae<re;ae++){var ie=j*S._rangebreaks[ae].min,fe=j*S._rangebreaks[ae].max;if(Q<ie)break;if(Q>fe)ne=ae+1;else{ne=Q<(ie+fe)/2?ae:ae+1;break}}var me=S._B[ne]||0;return isFinite(me)?V(G,S._m2,me):0},ue=function(G){var re=S._rangebreaks.length;if(!re)return K(G,S._m,S._b);for(var ee=0,j=0;j<re&&!(G<S._rangebreaks[j].pmin);j++)G>S._rangebreaks[j].pmax&&(ee=j+1);return K(G,S._m2,S._B[ee])}}S.c2l=S.type==="log"?I:r,S.l2c=S.type==="log"?x:r,S.l2p=se,S.p2l=ue,S.c2p=S.type==="log"?function(G,re){return se(I(G,re))}:se,S.p2c=S.type==="log"?function(G){return x(ue(G))}:ue,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=o,S.c2d=S.c2r=S.l2d=S.l2r=r,S.d2p=S.r2p=function(G){return S.l2p(o(G))},S.p2d=S.p2r=ue,S.cleanPos=r):S.type==="log"?(S.d2r=S.d2l=function(G,re){return I(o(G),re)},S.r2d=S.r2c=function(G){return x(o(G))},S.d2c=S.r2l=o,S.c2d=S.l2r=r,S.c2r=I,S.l2d=x,S.d2p=function(G,re){return S.l2p(S.d2r(G,re))},S.p2d=function(G){return x(ue(G))},S.r2p=function(G){return S.l2p(o(G))},S.p2r=ue,S.cleanPos=r):S.type==="date"?(S.d2r=S.r2d=b.identity,S.d2c=S.r2c=S.d2l=S.r2l=R,S.c2d=S.c2r=S.l2d=S.l2r=D,S.d2p=S.r2p=function(G,re,ee){return S.l2p(R(G,0,ee))},S.p2d=S.p2r=function(G,re,ee){return D(ue(G),re,ee)},S.cleanPos=function(G){return b.cleanDate(G,f,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=F,S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=q,S.r2c=function(G){var re=$(G);return re!==void 0?re:S.fraction2r(.5)},S.l2r=S.c2r=r,S.r2l=$,S.d2p=function(G){return S.l2p(S.r2c(G))},S.p2d=function(G){return O(ue(G))},S.r2p=S.d2p,S.p2r=ue,S.cleanPos=function(G){return typeof G=="string"&&G!==""?G:r(G)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=q,S.r2c=function(G){var re=q(G);return re!==void 0?re:S.fraction2r(.5)},S.r2c_just_indices=X,S.l2r=S.c2r=r,S.r2l=q,S.d2p=function(G){return S.l2p(S.r2c(G))},S.p2d=function(G){return O(ue(G))},S.r2p=S.d2p,S.p2r=ue,S.cleanPos=function(G){return Array.isArray(G)||typeof G=="string"&&G!==""?G:r(G)},S.setupMultiCategory=function(G){var re=S._traceIndices,ee,j,Q=S._matchGroup;if(Q&&S._categories.length===0){for(var ne in Q)if(ne!==P){var ae=k[m.id2name(ne)];re=re.concat(ae._traceIndices)}}var ie=[[0,{}],[0,{}]],fe=[];for(ee=0;ee<re.length;ee++){var me=G[re[ee]];if(z in me){var ce=me[z],ye=me._length||b.minRowLength(ce);if(u(ce[0])&&u(ce[1]))for(j=0;j<ye;j++){var xe=ce[0][j],ke=ce[1][j];c(xe)&&c(ke)&&(fe.push([xe,ke]),xe in ie[0][1]||(ie[0][1][xe]=ie[0][0]++),ke in ie[1][1]||(ie[1][1][ke]=ie[1][0]++))}}}for(fe.sort(function(Ae,Oe){var He=ie[0][1],Ge=He[Ae[0]]-He[Oe[0]];if(Ge)return Ge;var _e=ie[1][1];return _e[Ae[1]]-_e[Oe[1]]}),ee=0;ee<fe.length;ee++)F(fe[ee])}),S.fraction2r=function(G){var re=S.r2l(S.range[0]),ee=S.r2l(S.range[1]);return S.l2r(re+G*(ee-re))},S.r2fraction=function(G){var re=S.r2l(S.range[0]),ee=S.r2l(S.range[1]);return(S.r2l(G)-re)/(ee-re)},S.cleanRange=function(G,re){re||(re={}),G||(G="range");var ee=b.nestedProperty(S,G).get(),j,Q;if(S.type==="date"?Q=b.dfltRange(S.calendar):z==="y"?Q=M.DFLTRANGEY:S._name==="realaxis"?Q=[0,1]:Q=re.dfltRange||M.DFLTRANGEX,Q=Q.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(Q[0]=0),!ee||ee.length!==2){b.nestedProperty(S,G).set(Q);return}for(S.type==="date"&&!S.autorange&&(ee[0]=b.cleanDate(ee[0],f,S.calendar),ee[1]=b.cleanDate(ee[1],f,S.calendar)),j=0;j<2;j++)if(S.type==="date"){if(!b.isDateTime(ee[j],S.calendar)){S[G]=Q;break}if(S.r2l(ee[0])===S.r2l(ee[1])){var ne=b.constrain(S.r2l(ee[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);ee[0]=S.l2r(ne-1e3),ee[1]=S.l2r(ne+1e3);break}}else{if(!e(ee[j]))if(e(ee[1-j]))ee[j]=ee[1-j]*(j?10:.1);else{S[G]=Q;break}if(ee[j]<-i?ee[j]=-i:ee[j]>i&&(ee[j]=i),ee[0]===ee[1]){var ae=Math.max(1,Math.abs(ee[0]*1e-6));ee[0]-=ae,ee[1]+=ae}}},S.setScale=function(G){var re=k._size;if(S.overlaying){var ee=m.getFromId({_fullLayout:k},S.overlaying);S.domain=ee.domain}var j=G&&S._r?"_r":"range",Q=S.calendar;S.cleanRange(j);var ne=S.r2l(S[j][0],Q),ae=S.r2l(S[j][1],Q),ie=z==="y";if(ie?(S._offset=re.t+(1-S.domain[1])*re.h,S._length=re.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ne-ae),S._b=-S._m*ae):(S._offset=re.l+S.domain[0]*re.w,S._length=re.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ae-ne),S._b=-S._m*ne),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var fe,me;if(S._rangebreaks=S.locateBreaks(Math.min(ne,ae),Math.max(ne,ae)),S._rangebreaks.length){for(fe=0;fe<S._rangebreaks.length;fe++)me=S._rangebreaks[fe],S._lBreaks+=Math.abs(me.max-me.min);var ce=ie;ne>ae&&(ce=!ce),ce&&S._rangebreaks.reverse();var ye=ce?-1:1;for(S._m2=ye*S._length/(Math.abs(ae-ne)-S._lBreaks),S._B.push(-S._m2*(ie?ae:ne)),fe=0;fe<S._rangebreaks.length;fe++)me=S._rangebreaks[fe],S._B.push(S._B[S._B.length-1]-ye*S._m2*(me.max-me.min));for(fe=0;fe<S._rangebreaks.length;fe++)me=S._rangebreaks[fe],me.pmin=se(me.min),me.pmax=se(me.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(G){var re=S.rangebreaks||[],ee,j,Q,ne,ae;re._cachedPatterns||(re._cachedPatterns=re.map(function(He){return He.enabled&&He.bounds?b.simpleMap(He.bounds,He.pattern?o:S.d2c):null})),re._cachedValues||(re._cachedValues=re.map(function(He){return He.enabled&&He.values?b.simpleMap(He.values,S.d2c).sort(b.sorterAsc):null}));for(var ie=0;ie<re.length;ie++){var fe=re[ie];if(fe.enabled){if(fe.bounds){var me=fe.pattern;switch(ee=re._cachedPatterns[ie],j=ee[0],Q=ee[1],me){case T:ae=new Date(G),ne=ae.getUTCDay(),j>Q&&(Q+=7,ne<j&&(ne+=7));break;case _:ae=new Date(G);var ce=ae.getUTCHours(),ye=ae.getUTCMinutes(),xe=ae.getUTCSeconds(),ke=ae.getUTCMilliseconds();ne=ce+(ye/60+xe/3600+ke/36e5),j>Q&&(Q+=24,ne<j&&(ne+=24));break;case"":ne=G;break}if(ne>=j&&ne<Q)return f}else for(var Ae=re._cachedValues[ie],Oe=0;Oe<Ae.length;Oe++)if(j=Ae[Oe],Q=j+fe.dvalue,G>=j&&G<Q)return f}}return G},S.locateBreaks=function(G,re){var ee,j,Q,ne,ae=[];if(!S.rangebreaks)return ae;var ie=S.rangebreaks.slice().sort(function(_e,Ie){return _e.pattern===T&&Ie.pattern===_?-1:Ie.pattern===T&&_e.pattern===_?1:0}),fe=function(_e,Ie){if(_e=b.constrain(_e,G,re),Ie=b.constrain(Ie,G,re),_e!==Ie){for(var Ye=!0,qe=0;qe<ae.length;qe++){var Ue=ae[qe];_e<Ue.max&&Ie>=Ue.min&&(_e<Ue.min&&(Ue.min=_e),Ie>Ue.max&&(Ue.max=Ie),Ye=!1)}Ye&&ae.push({min:_e,max:Ie})}};for(ee=0;ee<ie.length;ee++){var me=ie[ee];if(me.enabled)if(me.bounds){var ce=G,ye=re;me.pattern&&(ce=Math.floor(ce)),j=b.simpleMap(me.bounds,me.pattern?o:S.r2l),Q=j[0],ne=j[1];var xe=new Date(ce),ke,Ae;switch(me.pattern){case T:Ae=p,ke=((ne<Q?7:0)+(ne-Q))*v,ce+=Q*v-(xe.getUTCDay()*v+xe.getUTCHours()*y+xe.getUTCMinutes()*g+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;case _:Ae=v,ke=((ne<Q?24:0)+(ne-Q))*y,ce+=Q*y-(xe.getUTCHours()*y+xe.getUTCMinutes()*g+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;default:ce=Math.min(j[0],j[1]),ye=Math.max(j[0],j[1]),Ae=ye-ce,ke=Ae}for(var Oe=ce;Oe<ye;Oe+=Ae)fe(Oe,Oe+ke)}else for(var He=b.simpleMap(me.values,S.d2c),Ge=0;Ge<He.length;Ge++)Q=He[Ge],ne=Q+me.dvalue,fe(Q,ne)}return ae.sort(function(_e,Ie){return _e.min-Ie.min}),ae},S.makeCalcdata=function(G,re,ee){var j,Q,ne,ae,ie=S.type,fe=ie==="date"&&G[re+"calendar"];if(re in G){if(j=G[re],ae=G._length||b.minRowLength(j),b.isTypedArray(j)&&(ie==="linear"||ie==="log")){if(ae===j.length)return j;if(j.subarray)return j.subarray(0,ae)}if(ie==="multicategory")return Y(j,ae);for(Q=new Array(ae),ne=0;ne<ae;ne++)Q[ne]=S.d2c(j[ne],0,fe,ee)}else{var me=re+"0"in G?S.d2c(G[re+"0"],0,fe):0,ce=G["d"+re]?Number(G["d"+re]):1;for(j=G[{x:"y",y:"x"}[re]],ae=G._length||j.length,Q=new Array(ae),ne=0;ne<ae;ne++)Q[ne]=me+ne*ce}if(S.rangebreaks)for(ne=0;ne<ae;ne++)Q[ne]=S.maskBreaks(Q[ne]);return Q},S.isValidRange=function(G){return Array.isArray(G)&&G.length===2&&e(S.r2l(G[0]))&&e(S.r2l(G[1]))},S.isPtWithinRange=function(G,re){var ee=S.c2l(G[z],null,re),j=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return j<Q?j<=ee&&ee<=Q:Q<=ee&&ee<=j},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var G=S._matchGroup;if(G){var re=null,ee=null;for(var j in G){var Q=k[m.id2name(j)];if(Q._categories){re=Q._categories,ee=Q._categoriesMap;break}}re&&ee?(S._categories=re,S._categoriesMap=ee):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ne=0;ne<S._initialCategories.length;ne++)F(S._initialCategories[ne])},S.sortByInitialCategories=function(){var G=[];if(S._emptyCategories(),S._initialCategories)for(var re=0;re<S._initialCategories.length;re++)F(S._initialCategories[re]);G=G.concat(S._traceIndices);var ee=S._matchGroup;for(var j in ee)if(P!==j){var Q=k[m.id2name(j)];Q._categories=S._categories,Q._categoriesMap=S._categoriesMap,G=G.concat(Q._traceIndices)}return G};var U=k._d3locale;S.type==="date"&&(S._dateFormat=U?U.timeFormat:l,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=U?U.numberFormat:w,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(t,B,H){B.exports=function(l){var b=["showexponent","showtickprefix","showticksuffix"],w=b.filter(function(o){return l[o]!==void 0}),e=function(o){return l[o]===l[w[0]]};if(w.every(e)||w.length===1)return l[w[0]]}},{}],578:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color").contrast,b=t("./layout_attributes"),w=t("./show_dflt"),e=t("../array_container_defaults");B.exports=function(n,r,u,s,i){i||(i={});var f=w(n),h=u("showticklabels");if(h){var p=i.font||{},v=r.color,y=r.ticklabelposition||"",g=y.indexOf("inside")!==-1?l(i.bgColor):v&&v!==b.color.dflt?v:p.color;if(d.coerceFont(u,"tickfont",{family:p.family,size:p.size,color:g}),i.noAng||u("tickangle"),s!=="category"){var A=u("tickformat");e(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),r.tickformatstops.length||delete r.tickformatstops,!i.noExp&&!A&&s!=="date"&&(u("showexponent",f),u("exponentformat"),u("minexponent"),u("separatethousands"))}}};function o(a,n){function r(s,i){return d.coerce(a,n,b.tickformatstops,s,i)}var u=r("enabled");u&&(r("dtickrange"),r("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e,o,a){var n=d.coerce2(w,e,l,"ticklen"),r=d.coerce2(w,e,l,"tickwidth"),u=d.coerce2(w,e,l,"tickcolor",e.color),s=o("ticks",a.outerTicks||n||r||u?"outside":"");s||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(t,B,H){var d=t("./clean_ticks"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a){function n(v){var y=w[v];return y!==void 0?y:(e._template||{})[v]}var r=n("tick0"),u=n("dtick"),s=n("tickvals"),i=l(s)?"array":u?"linear":"auto",f=o("tickmode",i);if(f==="auto")o("nticks");else if(f==="linear"){var h=e.dtick=d.dtick(u,a);e.tick0=d.tick0(r,a,e.calendar,h)}else if(a!=="multicategory"){var p=o("tickvals");p===void 0?e.tickmode="auto":o("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=t("../../components/drawing"),e=t("./axes");B.exports=function(a,n,r,u){var s=a._fullLayout;if(n.length===0){e.redrawComponents(a);return}function i(_){var T=_.xaxis,x=_.yaxis;s._defs.select("#"+_.clipId+"> rect").call(w.setTranslate,0,0).call(w.setScale,1,1),_.plot.call(w.setTranslate,T._offset,x._offset).call(w.setScale,1,1);var c=_.plot.selectAll(".scatterlayer .trace");c.selectAll(".point").call(w.setPointGroupScale,1,1),c.selectAll(".textpoint").call(w.setTextPointsScale,1,1),c.call(w.hideOutsideRangePoints,_)}function f(_,T){var x=_.plotinfo,c=x.xaxis,L=x.yaxis,S=c._length,k=L._length,P=!!_.xr1,z=!!_.yr1,I=[];if(P){var R=b.simpleMap(_.xr0,c.r2l),D=b.simpleMap(_.xr1,c.r2l),O=R[1]-R[0],F=D[1]-D[0];I[0]=(R[0]*(1-T)+T*D[0]-R[0])/(R[1]-R[0])*S,I[2]=S*(1-T+T*F/O),c.range[0]=c.l2r(R[0]*(1-T)+T*D[0]),c.range[1]=c.l2r(R[1]*(1-T)+T*D[1])}else I[0]=0,I[2]=S;if(z){var Y=b.simpleMap(_.yr0,L.r2l),X=b.simpleMap(_.yr1,L.r2l),q=Y[1]-Y[0],$=X[1]-X[0];I[1]=(Y[1]*(1-T)+T*X[1]-Y[1])/(Y[0]-Y[1])*k,I[3]=k*(1-T+T*$/q),L.range[0]=c.l2r(Y[0]*(1-T)+T*X[0]),L.range[1]=L.l2r(Y[1]*(1-T)+T*X[1])}else I[1]=0,I[3]=k;e.drawOne(a,c,{skipTitle:!0}),e.drawOne(a,L,{skipTitle:!0}),e.redrawComponents(a,[c._id,L._id]);var V=P?S/I[2]:1,K=z?k/I[3]:1,se=P?I[0]:0,ue=z?I[1]:0,oe=P?I[0]/I[2]*S:0,U=z?I[1]/I[3]*k:0,G=c._offset-oe,re=L._offset-U;x.clipRect.call(w.setTranslate,se,ue).call(w.setScale,1/V,1/K),x.plot.call(w.setTranslate,G,re).call(w.setScale,V,K),w.setPointGroupScale(x.zoomScalePts,1/V,1/K),w.setTextPointsScale(x.zoomScaleTxt,1/V,1/K)}var h;u&&(h=u());function p(){for(var _={},T=0;T<n.length;T++){var x=n[T],c=x.plotinfo.xaxis,L=x.plotinfo.yaxis;x.xr1&&(_[c._name+".range"]=x.xr1.slice()),x.yr1&&(_[L._name+".range"]=x.yr1.slice())}return h&&h(),l.call("relayout",a,_).then(function(){for(var S=0;S<n.length;S++)i(n[S].plotinfo)})}function v(){for(var _={},T=0;T<n.length;T++){var x=n[T],c=x.plotinfo.xaxis,L=x.plotinfo.yaxis;x.xr0&&(_[c._name+".range"]=x.xr0.slice()),x.yr0&&(_[L._name+".range"]=x.yr0.slice())}return l.call("relayout",a,_).then(function(){for(var S=0;S<n.length;S++)i(n[S].plotinfo)})}var y,g,A,m=d.ease(r.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,v()});function M(){g=Date.now();for(var _=Math.min(1,(g-y)/r.duration),T=m(_),x=0;x<n.length;x++)f(n[x],T);g-y>r.duration?(p(),A=window.cancelAnimationFrame(M)):A=window.requestAnimationFrame(M)}return y=Date.now(),A=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(t,B,H){var d=t("../../registry").traceIs,l=t("./axis_autotype");B.exports=function(n,r,u,s){u("autotypenumbers",s.autotypenumbersDflt);var i=u("type",(s.splomStash||{}).type);i==="-"&&(b(r,s.data),r.type==="-"?r.type="linear":n.type=r.type)};function b(a,n){if(a.type==="-"){var r=a._id,u=r.charAt(0),s;r.indexOf("scene")!==-1&&(r=u);var i=w(n,r,u);if(!!i){if(i.type==="histogram"&&u==={v:"y",h:"x"}[i.orientation||"v"]){a.type="linear";return}var f=u+"calendar",h=i[f],p={noMultiCategory:!d(i,"cartesian")||d(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&u==={h:"x",v:"y"}[i.orientation||"v"]&&(p.noMultiCategory=!0),p.autotypenumbers=a.autotypenumbers,o(i,u)){var v=e(i),y=[];for(s=0;s<n.length;s++){var g=n[s];!d(g,"box-violin")||(g[u+"axis"]||u)!==r||(g[v]!==void 0?y.push(g[v][0]):g.name!==void 0?y.push(g.name):y.push("text"),g[f]!==h&&(h=void 0))}a.type=l(y,h,p)}else if(i.type==="splom"){var A=i.dimensions,m=A[i._axesDim[r]];m.visible&&(a.type=l(m.values,h,p))}else a.type=l(i[u]||[i[u+"0"]],h,p)}}}function w(a,n,r){for(var u=0;u<a.length;u++){var s=a[u];if(s.type==="splom"&&s._length>0&&(s["_"+r+"axes"]||{})[n])return s;if((s[r+"axis"]||r)===n){if(o(s,r))return s;if((s[r]||[]).length||s[r+"0"])return s}}}function e(a){return{v:"x",h:"y"}[a.orientation||"v"]}function o(a,n){var r=e(a),u=d(a,"box-violin"),s=d(a._fullInput||{},"candlestick");return u&&!s&&n===r&&a[r]===void 0&&a[r+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(t,B,H){var d=t("../registry"),l=t("../lib");H.manageCommandObserver=function(n,r,u,s){var i={},f=!0;r&&r._commandObserver&&(i=r._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var h=H.hasSimpleAPICommandBindings(n,u,i.lookupTable);if(r&&r._commandObserver){if(h)return i;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,i}if(h){b(n,h,i.cache),i.check=function(){if(!!f){var g=b(n,h,i.cache);return g.changed&&s&&i.lookupTable[g.value]!==void 0&&(i.disable(),Promise.resolve(s({value:g.value,type:h.type,prop:h.prop,traces:h.traces,index:i.lookupTable[g.value]})).then(i.enable,i.enable)),g.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],v=0;v<p.length;v++)n._internalOn(p[v],i.check);i.remove=function(){for(var y=0;y<p.length;y++)n._removeInternalListener(p[y],i.check)}}else l.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){f=!1},i.enable=function(){f=!0},r&&(r._commandObserver=i),i},H.hasSimpleAPICommandBindings=function(n,r,u){var s,i=r.length,f;for(s=0;s<i;s++){var h,p=r[s],v=p.method,y=p.args;if(Array.isArray(y)||(y=[]),!v)return!1;var g=H.computeAPICommandBindings(n,v,y);if(g.length!==1)return!1;if(!f)f=g[0],Array.isArray(f.traces)&&f.traces.sort();else{if(h=g[0],h.type!==f.type||h.prop!==f.prop)return!1;if(Array.isArray(f.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var A=0;A<f.traces.length;A++)if(f.traces[A]!==h.traces[A])return!1}else return!1;else if(h.prop!==f.prop)return!1}h=g[0];var m=h.value;if(Array.isArray(m))if(m.length===1)m=m[0];else return!1;u&&(u[m]=s)}return f};function b(n,r,u){var s,i,f,h=!1;if(r.type==="data")s=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")s=n._fullLayout;else return!1;return i=l.nestedProperty(s,r.prop).get(),f=u[r.type]=u[r.type]||{},f.hasOwnProperty(r.prop)&&f[r.prop]!==i&&(h=!0),f[r.prop]=i,{changed:h,value:i}}H.executeAPICommand=function(n,r,u){if(r==="skip")return Promise.resolve();var s=d.apiMethodRegistry[r],i=[n];Array.isArray(u)||(u=[]);for(var f=0;f<u.length;f++)i.push(u[f]);return s.apply(null,i).catch(function(h){return l.warn("API call to Plotly."+r+" rejected.",h),Promise.reject(h)})},H.computeAPICommandBindings=function(n,r,u){var s;switch(Array.isArray(u)||(u=[]),r){case"restyle":s=o(n,u);break;case"relayout":s=e(n,u);break;case"update":s=o(n,[u[0],u[2]]).concat(e(n,[u[1]]));break;case"animate":s=w(n,u);break;default:s=[]}return s};function w(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(n,r){var u=[],s=r[0],i={};if(typeof s=="string")i[s]=r[1];else if(l.isPlainObject(s))i=s;else return u;return a(i,function(f,h,p){u.push({type:"layout",prop:f,value:p})},"",0),u}function o(n,r){var u,s,i,f,h=[];if(s=r[0],i=r[1],u=r[2],f={},typeof s=="string")f[s]=i;else if(l.isPlainObject(s))f=s,u===void 0&&(u=i);else return h;return u===void 0&&(u=null),a(f,function(p,v,y){var g,A;if(Array.isArray(y)){A=y.slice();var m=Math.min(A.length,n.data.length);u&&(m=Math.min(m,u.length)),g=[];for(var M=0;M<m;M++)g[M]=u?u[M]:M}else A=y,g=u?u.slice():null;if(g===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(g)){if(!Array.isArray(A)){var _=A;A=[];for(var T=0;T<g.length;T++)A[T]=_}A.length=Math.min(g.length,A.length)}h.push({type:"data",prop:p,traces:g,value:A})},"",0),h}function a(n,r,u,s){Object.keys(n).forEach(function(i){var f=n[i];if(i[0]!=="_"){var h=u+(s>0?".":"")+i;l.isPlainObject(f)?a(f,r,h,s+1):r(h,i,f)}})}},{"../lib":503,"../registry":638}],584:[function(t,B,H){var d=t("../lib/extend").extendFlat;H.attributes=function(l,b){l=l||{},b=b||{};var w={valType:"info_array",editType:l.editType,items:[{valType:"number",min:0,max:1,editType:l.editType},{valType:"number",min:0,max:1,editType:l.editType}],dflt:[0,1]};l.name&&l.name+"",l.trace,b.description&&""+b.description;var e={x:d({},w,{}),y:d({},w,{}),editType:l.editType};return l.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:l.editType},e.column={valType:"integer",min:0,dflt:0,editType:l.editType}),e},H.defaults=function(l,b,w,e){var o=e&&e.x||[0,1],a=e&&e.y||[0,1],n=b.grid;if(n){var r=w("domain.column");r!==void 0&&(r<n.columns?o=n._domains.x[r]:delete l.domain.column);var u=w("domain.row");u!==void 0&&(u<n.rows?a=n._domains.y[u]:delete l.domain.row)}var s=w("domain.x",o),i=w("domain.y",a);s[0]<s[1]||(l.domain.x=o.slice()),i[0]<i[1]||(l.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(t,B,H){B.exports=function(d){var l=d.editType,b=d.colorEditType;b===void 0&&(b=l);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:l},size:{valType:"number",min:1,editType:l},color:{valType:"color",editType:b},editType:l};return d.autoSize&&(w.size.dflt="auto"),d.autoColor&&(w.color.dflt="auto"),d.arrayOk&&(w.family.arrayOk=!0,w.size.arrayOk=!0,w.color.arrayOk=!0),w}},{}],586:[function(t,B,H){B.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(t,B,H){H.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},H.axesNames=["lonaxis","lataxis"],H.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},H.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},H.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},H.clipPad=.001,H.precision=.1,H.landColor="#F0DC82",H.waterColor="#3399FF",H.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},H.sphereSVG={type:"Sphere"},H.fillLayers={ocean:1,land:1,lakes:1},H.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},H.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],H.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],H.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-geo"),b=l.geoPath,w=l.geoDistance,e=t("d3-geo-projection"),o=t("../../registry"),a=t("../../lib"),n=a.strTranslate,r=t("../../components/color"),u=t("../../components/drawing"),s=t("../../components/fx"),i=t("../plots"),f=t("../cartesian/axes"),h=t("../cartesian/autorange").getAutoRange,p=t("../../components/dragelement"),v=t("../cartesian/select").prepSelect,y=t("../cartesian/select").clearSelect,g=t("../cartesian/select").selectOnClick,A=t("./zoom"),m=t("./constants"),M=t("../../lib/geo_location_utils"),_=t("../../lib/topojson_utils"),T=t("topojson-client").feature;function x(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var c=x.prototype;B.exports=function(z){return new x(z)},c.plot=function(P,z,I){var R=this,D=z[this.id],O=[],F=!1;for(var Y in m.layerNameToAdjective)if(Y!=="frame"&&D["show"+Y]){F=!0;break}for(var X=0;X<P.length;X++)if(P[0][0].trace.locationmode){F=!0;break}if(F){var q=_.getTopojsonName(D);(R.topojson===null||q!==R.topojsonName)&&(R.topojsonName=q,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&O.push(R.fetchTopojson()))}O=O.concat(M.fetchTraceGeoData(P)),I.push(new Promise(function($,V){Promise.all(O).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,z),$()}).catch(V)}))},c.fetchTopojson=function(){var P=this,z=_.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,R){d.json(z,function(D,O){if(D)return D.status===404?R(new Error(["plotly.js could not find topojson file at",z,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):R(new Error(["unexpected error while fetching topojson file at",z].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},c.update=function(P,z){var I=z[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var D=P[R],O=D[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(D,z)}var F=this.updateProjection(P,z);if(!F){(!this.viewInitial||this.scope!==I.scope)&&this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(z,I),this.updateDims(z,I),this.updateFx(z,I),i.generalUpdatePerTraceModule(this.graphDiv,this,P,I);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var X=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=X.selectAll("path"),this.render()}},c.updateProjection=function(P,z){var I=this.graphDiv,R=z[this.id],D=z._size,O=R.domain,F=R.projection,Y=R.lonaxis,X=R.lataxis,q=Y._ax,$=X._ax,V=this.projection=L(R),K=[[D.l+D.w*O.x[0],D.t+D.h*(1-O.y[1])],[D.l+D.w*O.x[1],D.t+D.h*(1-O.y[0])]],se=R.center||{},ue=F.rotation||{},oe=Y.range||[],U=X.range||[];if(R.fitbounds){q._length=K[1][0]-K[0][0],$._length=K[1][1]-K[0][1],q.range=h(I,q),$.range=h(I,$);var G=(q.range[0]+q.range[1])/2,re=($.range[0]+$.range[1])/2;if(R._isScoped)se={lon:G,lat:re};else if(R._isClipped){se={lon:G,lat:re},ue={lon:G,lat:re,roll:ue.roll};var ee=F.type,j=m.lonaxisSpan[ee]/2||180,Q=m.lataxisSpan[ee]/2||90;oe=[G-j,G+j],U=[re-Q,re+Q]}else se={lon:G,lat:re},ue={lon:G,lat:ue.lat,roll:ue.roll}}V.center([se.lon-ue.lon,se.lat-ue.lat]).rotate([-ue.lon,-ue.lat,ue.roll]).parallels(F.parallels);var ne=k(oe,U);V.fitExtent(K,ne);var ae=this.bounds=V.getBounds(ne),ie=this.fitScale=V.scale(),fe=V.translate();if(R.fitbounds){var me=V.getBounds(k(q.range,$.range)),ce=Math.min((ae[1][0]-ae[0][0])/(me[1][0]-me[0][0]),(ae[1][1]-ae[0][1])/(me[1][1]-me[0][1]));isFinite(ce)?V.scale(ce*ie):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else V.scale(F.scale*ie);var ye=this.midPt=[(ae[0][0]+ae[1][0])/2,(ae[0][1]+ae[1][1])/2];if(V.translate([fe[0]+(ye[0]-fe[0]),fe[1]+(ye[1]-fe[1])]).clipExtent(ae),R._isAlbersUsa){var xe=V([se.lon,se.lat]),ke=V.translate();V.translate([ke[0]-(xe[0]-ke[0]),ke[1]-(xe[1]-ke[1])])}},c.updateBaseLayers=function(P,z){var I=this,R=I.topojson,D=I.layers,O=I.basePaths;function F(K){return K==="lonaxis"||K==="lataxis"}function Y(K){return Boolean(m.lineLayers[K])}function X(K){return Boolean(m.fillLayers[K])}var q=this.hasChoropleth?m.layersForChoropleth:m.layers,$=q.filter(function(K){return Y(K)||X(K)?z["show"+K]:F(K)?z[K].showgrid:!0}),V=I.framework.selectAll(".layer").data($,String);V.exit().each(function(K){delete D[K],delete O[K],d.select(this).remove()}),V.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var se=D[K]=d.select(this);K==="bg"?I.bgRect=se.append("rect").style("pointer-events","all"):F(K)?O[K]=se.append("path").style("fill","none"):K==="backplot"?se.append("g").classed("choroplethlayer",!0):K==="frontplot"?se.append("g").classed("scatterlayer",!0):Y(K)?O[K]=se.append("path").style("fill","none").style("stroke-miterlimit",2):X(K)&&(O[K]=se.append("path").style("stroke","none"))}),V.order(),V.each(function(K){var se=O[K],ue=m.layerNameToAdjective[K];K==="frame"?se.datum(m.sphereSVG):Y(K)||X(K)?se.datum(T(R,R.objects[K])):F(K)&&se.datum(S(K,z,P)).call(r.stroke,z[K].gridcolor).call(u.dashLine,"",z[K].gridwidth),Y(K)?se.call(r.stroke,z[ue+"color"]).call(u.dashLine,"",z[ue+"width"]):X(K)&&se.call(r.fill,z[ue+"color"])})},c.updateDims=function(P,z){var I=this.bounds,R=(z.framewidth||0)/2,D=I[0][0]-R,O=I[0][1]-R,F=I[1][0]-D+R,Y=I[1][1]-O+R;u.setRect(this.clipRect,D,O,F,Y),this.bgRect.call(u.setRect,D,O,F,Y).call(r.fill,z.bgcolor),this.xaxis._offset=D,this.xaxis._length=F,this.yaxis._offset=O,this.yaxis._length=Y},c.updateFx=function(P,z){var I=this,R=I.graphDiv,D=I.bgRect,O=P.dragmode,F=P.clickmode;if(I.isStatic)return;function Y(){var V=I.viewInitial,K={};for(var se in V)K[I.id+"."+se]=V[se];o.call("_guiRelayout",R,K),R.emit("plotly_doubleclick",null)}function X(V){return I.projection.invert([V[0]+I.xaxis._offset,V[1]+I.yaxis._offset])}var q;O==="select"?q=function(V,K){var se=V.range={};se[I.id]=[X([K.xmin,K.ymin]),X([K.xmax,K.ymax])]}:O==="lasso"&&(q=function(V,K,se){var ue=V.lassoPoints={};ue[I.id]=se.filtered.map(X)});var $={element:I.bgRect.node(),gd:R,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:q},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(V){V===2&&y(R)}};O==="pan"?(D.node().onmousedown=null,D.call(A(I,z)),D.on("dblclick.zoom",Y),R._context._scrollZoom.geo||D.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(D.on(".zoom",null),$.prepFn=function(V,K,se){v(V,K,se,$,O)},p.init($)),D.on("mousemove",function(){var V=I.projection.invert(a.getPositionFromD3Event());if(!V)return p.unhover(R,d.event);I.xaxis.p2c=function(){return V[0]},I.yaxis.p2c=function(){return V[1]},s.hover(R,d.event,I.id)}),D.on("mouseout",function(){R._dragging||p.unhover(R,d.event)}),D.on("click",function(){O!=="select"&&O!=="lasso"&&(F.indexOf("select")>-1&&g(d.event,R,[I.xaxis],[I.yaxis],I.id,$),F.indexOf("event")>-1&&s.click(R,d.event))})},c.makeFramework=function(){var P=this,z=P.graphDiv,I=z._fullLayout,R="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",R),P.clipRect=P.clipDef.append("rect"),P.framework=d.select(P.container).append("g").attr("class","geo "+P.id).call(u.setClipUrl,R,z),P.project=function(D){var O=P.projection(D);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(D){return P.project(D)[0]}},P.yaxis={_id:"y",c2p:function(D){return P.project(D)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(P.mockAxis,I)},c.saveViewInitial=function(P){var z=P.center||{},I=P.projection,R=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var D;P._isScoped?D={"center.lon":z.lon,"center.lat":z.lat}:P._isClipped?D={"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:D={"center.lon":z.lon,"center.lat":z.lat,"projection.rotation.lon":R.lon},a.extendFlat(this.viewInitial,D)},c.render=function(){var P=this.projection,z=P.getPath(),I;function R(O){var F=P(O.lonlat);return F?n(F[0],F[1]):null}function D(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",z);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return z(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",D).attr("transform",R)};function L(P){var z=P.projection,I=z.type,R=m.projNames[I];R="geo"+a.titleCase(R);for(var D=l[R]||e[R],O=D(),F=P._isSatellite?Math.acos(1/z.distance)*180/Math.PI:P._isClipped?m.lonaxisSpan[I]/2:null,Y=["center","rotate","parallels","clipExtent"],X=function(V){return V?O:[]},q=0;q<Y.length;q++){var $=Y[q];typeof O[$]!="function"&&(O[$]=X)}return O.isLonLatOverEdges=function(V){if(O(V)===null)return!0;if(F){var K=O.rotate(),se=w(V,[-K[0],-K[1]]),ue=F*Math.PI/180;return se>ue}else return!1},O.getPath=function(){return b().projection(O)},O.getBounds=function(V){return O.getPath().bounds(V)},O.precision(m.precision),P._isSatellite&&O.tilt(z.tilt).distance(z.distance),F&&O.clipAngle(F-m.clipPad),O}function S(P,z,I){var R=1e-6,D=2.5,O=z[P],F=m.scopeDefaults[z.scope],Y,X,q;P==="lonaxis"?(Y=F.lonaxisRange,X=F.lataxisRange,q=function(re,ee){return[re,ee]}):P==="lataxis"&&(Y=F.lataxisRange,X=F.lonaxisRange,q=function(re,ee){return[ee,re]});var $={type:"linear",range:[Y[0],Y[1]-R],tick0:O.tick0,dtick:O.dtick};f.setConvert($,I);var V=f.calcTicks($);!z.isScoped&&P==="lonaxis"&&V.pop();for(var K=V.length,se=new Array(K),ue=0;ue<K;ue++)for(var oe=V[ue].x,U=se[ue]=[],G=X[0];G<X[1]+D;G+=D)U.push(q(oe,G));return{type:"MultiLineString",coordinates:se}}function k(P,z){var I=m.clipPad,R=P[0]+I,D=P[1]-I,O=z[0]+I,F=z[1]-I;R>0&&D<0&&(D+=360);var Y=(D-R)/4;return{type:"Polygon",coordinates:[[[R,O],[R,F],[R+Y,F],[R+2*Y,F],[R+3*Y,F],[D,F],[D,O],[D-Y,O],[D-2*Y,O],[D-3*Y,O],[R,O]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(t,B,H){var d=t("../../plots/get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("./geo"),w="geo",e=l(w),o={};o[w]={valType:"subplotid",dflt:w,editType:"calc"};function a(u){for(var s=u._fullLayout,i=u.calcdata,f=s._subplots[w],h=0;h<f.length;h++){var p=f[h],v=d(i,w,p),y=s[p],g=y._subplot;g||(g=b({id:p,graphDiv:u,container:s._geolayer.node(),topojsonURL:u._context.topojsonURL,staticPlot:u._context.staticPlot}),s[p]._subplot=g),g.plot(v,s,u._promises)}}function n(u,s,i,f){for(var h=f._subplots[w]||[],p=0;p<h.length;p++){var v=h[p],y=f[v]._subplot;!s[v]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function r(u){for(var s=u._fullLayout,i=s._subplots[w],f=0;f<i.length;f++){var h=s[i[f]],p=h._subplot;p.updateFx(s,h)}}B.exports={attr:w,name:w,idRoot:w,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:a,updateFx:r,clean:n}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../domain").attributes,b=t("./constants"),w=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/sort_object_keys"),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},a=B.exports=w({domain:l({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(b.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(b.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:b.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:b.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:b.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:b.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:o,lataxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(t,B,H){var d=t("../../lib"),l=t("../subplot_defaults"),b=t("../get_data").getSubplotData,w=t("./constants"),e=t("./layout_attributes"),o=w.axesNames;B.exports=function(r,u,s){l(r,u,s,{type:"geo",attributes:e,handleDefaults:a,fullData:s,partition:"y"})};function a(n,r,u,s){var i=b(s.fullData,"geo",s.id),f=i.map(function(U){return U._expandedIndex}),h=u("resolution"),p=u("scope"),v=w.scopeDefaults[p],y=u("projection.type",v.projType),g=r._isAlbersUsa=y==="albers usa";g&&(p=r.scope="usa");var A=r._isScoped=p!=="world",m=r._isSatellite=y==="satellite",M=r._isConic=y.indexOf("conic")!==-1||y==="albers",_=r._isClipped=!!w.lonaxisSpan[y];if(n.visible===!1){var T=d.extendDeep({},r._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),r._template=T}for(var x=u("visible"),c,L=0;L<o.length;L++){var S=o[L],k=[30,10][L],P;if(A)P=v[S+"Range"];else{var z=w[S+"Span"],I=(z[y]||z["*"])/2,R=u("projection.rotation."+S.substr(0,3),v.projRotate[L]);P=[R-I,R+I]}var D=u(S+".range",P);u(S+".tick0"),u(S+".dtick",k),c=u(S+".showgrid",x?void 0:!1),c&&(u(S+".gridcolor"),u(S+".gridwidth")),r[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:f,setScale:d.identity,c2l:d.identity,r2l:d.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var O=r.lonaxis.range,F=r.lataxis.range,Y=O[0],X=O[1];Y>0&&X<0&&(X+=360);var q=(Y+X)/2,$;if(!g){var V=A?v.projRotate:[q,0,0];$=u("projection.rotation.lon",V[0]),u("projection.rotation.lat",V[1]),u("projection.rotation.roll",V[2]),c=u("showcoastlines",!A&&x),c&&(u("coastlinecolor"),u("coastlinewidth")),c=u("showocean",x?void 0:!1),c&&u("oceancolor")}var K,se;if(g?(K=-96.6,se=38.7):(K=A?q:$,se=(F[0]+F[1])/2),u("center.lon",K),u("center.lat",se),m&&(u("projection.tilt"),u("projection.distance")),M){var ue=v.projParallels||[0,60];u("projection.parallels",ue)}u("projection.scale"),c=u("showland",x?void 0:!1),c&&u("landcolor"),c=u("showlakes",x?void 0:!1),c&&u("lakecolor"),c=u("showrivers",x?void 0:!1),c&&(u("rivercolor"),u("riverwidth")),c=u("showcountries",A&&p!=="usa"&&x),c&&(u("countrycolor"),u("countrywidth")),(p==="usa"||p==="north america"&&h===50)&&(u("showsubunits",x),u("subunitcolor"),u("subunitwidth")),A||(c=u("showframe",x),c&&(u("framecolor"),u("framewidth"))),u("bgcolor");var oe=u("fitbounds");oe&&(delete r.projection.scale,A?(delete r.center.lon,delete r.center.lat):_?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../registry"),w=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function n(S,k){var P=S.projection,z;return k._isScoped?z=s:k._isClipped?z=f:z=i,z(S,P)}B.exports=n;function r(S,k){return d.behavior.zoom().translate(k.translate()).scale(k.scale())}function u(S,k,P){var z=S.id,I=S.graphDiv,R=I.layout,D=R[z],O=I._fullLayout,F=O[z],Y={},X={};function q($,V){Y[z+"."+$]=l.nestedProperty(D,$).get(),b.call("_storeDirectGUIEdit",R,O._preGUI,Y);var K=l.nestedProperty(F,$);K.get()!==V&&(K.set(V),l.nestedProperty(D,$).set(V),X[z+"."+$]=V)}P(q),q("projection.scale",k.scale()/S.fitScale),q("fitbounds",!1),I.emit("plotly_relayout",X)}function s(S,k){var P=r(S,k);function z(){d.select(this).style(o)}function I(){k.scale(d.event.scale).translate(d.event.translate),S.render();var O=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function R(O){var F=k.invert(S.midPt);O("center.lon",F[0]),O("center.lat",F[1])}function D(){d.select(this).style(a),u(S,k,R)}return P.on("zoomstart",z).on("zoom",I).on("zoomend",D),P}function i(S,k){var P=r(S,k),z=2,I,R,D,O,F,Y,X,q,$;function V(G){return k.invert(G)}function K(G){var re=V(G);if(!re)return!0;var ee=k(re);return Math.abs(ee[0]-G[0])>z||Math.abs(ee[1]-G[1])>z}function se(){d.select(this).style(o),I=d.mouse(this),R=k.rotate(),D=k.translate(),O=R,F=V(I)}function ue(){if(Y=d.mouse(this),K(I)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(d.event.scale),k.translate([D[0],d.event.translate[1]]),F?V(Y)&&(q=V(Y),X=[O[0]+(q[0]-F[0]),R[1],R[2]],k.rotate(X),O=X):(I=Y,F=V(I)),$=!0,S.render();var G=k.rotate(),re=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":re[0],"geo.center.lat":re[1],"geo.projection.rotation.lon":-G[0]})}function oe(){d.select(this).style(a),$&&u(S,k,U)}function U(G){var re=k.rotate(),ee=k.invert(S.midPt);G("projection.rotation.lon",-re[0]),G("center.lon",ee[0]),G("center.lat",ee[1])}return P.on("zoomstart",se).on("zoom",ue).on("zoomend",oe),P}function f(S,k){k.rotate(),k.scale();var P=r(S,k),z=L(P,"zoomstart","zoom","zoomend"),I=0,R=P.on,D;P.on("zoomstart",function(){d.select(this).style(o);var q=d.mouse(this),$=k.rotate(),V=$,K=k.translate(),se=p($);D=h(k,q),R.call(P,"zoom",function(){var ue=d.mouse(this);if(k.scale(d.event.scale),!D)q=ue,D=h(k,q);else if(h(k,ue)){k.rotate($).translate(K);var oe=h(k,ue),U=y(D,oe),G=_(v(se,U)),re=g(G,D,V);(!isFinite(re[0])||!isFinite(re[1])||!isFinite(re[2]))&&(re=V),k.rotate(re),V=re}F(z.of(this,arguments))}),O(z.of(this,arguments))}).on("zoomend",function(){d.select(this).style(a),R.call(P,"zoom",null),Y(z.of(this,arguments)),u(S,k,X)}).on("zoom.redraw",function(){S.render();var q=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-q[0],"geo.projection.rotation.lat":-q[1]})});function O(q){I++||q({type:"zoomstart"})}function F(q){q({type:"zoom"})}function Y(q){--I||q({type:"zoomend"})}function X(q){var $=k.rotate();q("projection.rotation.lon",-$[0]),q("projection.rotation.lat",-$[1])}return d.rebind(P,z,"on")}function h(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&T(P)}function p(S){var k=.5*S[0]*w,P=.5*S[1]*w,z=.5*S[2]*w,I=Math.sin(k),R=Math.cos(k),D=Math.sin(P),O=Math.cos(P),F=Math.sin(z),Y=Math.cos(z);return[R*O*Y+I*D*F,I*O*Y-R*D*F,R*D*Y+I*O*F,R*O*F-I*D*Y]}function v(S,k){var P=S[0],z=S[1],I=S[2],R=S[3],D=k[0],O=k[1],F=k[2],Y=k[3];return[P*D-z*O-I*F-R*Y,P*O+z*D+I*Y-R*F,P*F-z*Y+I*D+R*O,P*Y+z*F-I*O+R*D]}function y(S,k){if(!(!S||!k)){var P=c(S,k),z=Math.sqrt(x(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,x(S,k)))),R=Math.sin(I)/z;return z&&[Math.cos(I),P[2]*R,-P[1]*R,P[0]*R]}}function g(S,k,P){var z=M(k,2,S[0]);z=M(z,1,S[1]),z=M(z,0,S[2]-P[2]);var I=k[0],R=k[1],D=k[2],O=z[0],F=z[1],Y=z[2],X=Math.atan2(R,I)*e,q=Math.sqrt(I*I+R*R),$,V;Math.abs(F)>q?(V=(F>0?90:-90)-X,$=0):(V=Math.asin(F/q)*e-X,$=Math.sqrt(q*q-F*F));var K=180-V-2*X,se=(Math.atan2(Y,O)-Math.atan2(D,$))*e,ue=(Math.atan2(Y,O)-Math.atan2(D,-$))*e,oe=A(P[0],P[1],V,se),U=A(P[0],P[1],K,ue);return oe<=U?[V,se,P[2]]:[K,ue,P[2]]}function A(S,k,P,z){var I=m(P-S),R=m(z-k);return Math.sqrt(I*I+R*R)}function m(S){return(S%360+540)%360-180}function M(S,k,P){var z=P*w,I=S.slice(),R=k===0?1:0,D=k===2?1:2,O=Math.cos(z),F=Math.sin(z);return I[R]=S[R]*O-S[D]*F,I[D]=S[D]*O+S[R]*F,I}function _(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function T(S){var k=S[0]*w,P=S[1]*w,z=Math.cos(P);return[z*Math.cos(k),z*Math.sin(k),Math.sin(P)]}function x(S,k){for(var P=0,z=0,I=S.length;z<I;++z)P+=S[z]*k[z];return P}function c(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,z=[];++k<P;)z.push(arguments[k]);var I=d.dispatch.apply(null,z);return I.of=function(R,D){return function(O){var F;try{F=O.sourceEvent=d.event,O.target=S,d.event=O,I[O.type].apply(R,D)}finally{d.event=F}}},I}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(t,B,H){var d=t("../registry"),l=t("./cartesian/constants").SUBPLOT_PATTERN;H.getSubplotCalcData=function(b,w,e){var o=d.subplotsRegistry[w];if(!o)return[];for(var a=o.attr,n=[],r=0;r<b.length;r++){var u=b[r],s=u[0].trace;s[a]===e&&n.push(u)}return n},H.getModuleCalcData=function(b,w){var e=[],o=[],a;if(typeof w=="string"?a=d.getModule(w).plot:typeof w=="function"?a=w:a=w.plot,!a)return[e,b];for(var n=0;n<b.length;n++){var r=b[n],u=r[0].trace;u.visible!==!0||u._length===0||(u._module.plot===a?e.push(r):o.push(r))}return[e,o]},H.getSubplotData=function(w,e,o){if(!d.subplotsRegistry[e])return[];var a=d.subplotsRegistry[e].attr,n=[],r,u,s;if(e==="gl2d"){var i=o.match(l);u="x"+i[1],s="y"+i[2]}for(var f=0;f<w.length;f++)r=w[f],e==="gl2d"&&d.traceIs(r,"gl2d")?r[a[0]]===u&&r[a[1]]===s&&n.push(r):r[a]===o&&n.push(r);return n}},{"../registry":638,"./cartesian/constants":561}],594:[function(t,B,H){var d=t("mouse-change"),l=t("mouse-wheel"),b=t("mouse-event-offset"),w=t("../cartesian/constants"),e=t("has-passive-events");B.exports=a;function o(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(n){var r=n.mouseContainer,u=n.glplot,s=new o(r,u);function i(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function f(){for(var p=n.graphDiv._fullLayout._axisConstraintGroups,v=n.xaxis._id,y=n.yaxis._id,g=0;g<p.length;g++)if(p[g][v]!==-1){if(p[g][y]!==-1)return!0;break}return!1}s.mouseListener=d(r,h),r.addEventListener("touchstart",function(p){var v=b(p.changedTouches[0],r);h(0,v[0],v[1]),h(1,v[0],v[1]),p.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(p){p.preventDefault();var v=b(p.changedTouches[0],r);h(1,v[0],v[1]),p.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(p){h(0,s.lastPos[0],s.lastPos[1]),p.preventDefault()},e?{passive:!1}:!1);function h(p,v,y){var g=n.calcDataBox(),A=u.viewBox,m=s.lastPos[0],M=s.lastPos[1],_=w.MINDRAG*u.pixelRatio,T=w.MINZOOM*u.pixelRatio,x,c;v*=u.pixelRatio,y*=u.pixelRatio,y=A[3]-A[1]-y;function L(R,D,O){var F=Math.min(D,O),Y=Math.max(D,O);F!==Y?(g[R]=F,g[R+2]=Y,s.dataBox=g,n.setRanges(g)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(p){var S=v/(A[2]-A[0])*(g[2]-g[0])+g[0],k=y/(A[3]-A[1])*(g[3]-g[1])+g[1];s.boxInited||(s.boxStart[0]=S,s.boxStart[1]=k,s.dragStart[0]=v,s.dragStart[1]=y),s.boxEnd[0]=S,s.boxEnd[1]=k,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-v)<T,z=Math.abs(s.dragStart[1]-y)<T;if(f()&&!(P&&z)){x=s.boxEnd[0]-s.boxStart[0],c=s.boxEnd[1]-s.boxStart[1];var I=(g[3]-g[1])/(g[2]-g[0]);Math.abs(x*I)>Math.abs(c)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(x)*I*(c>=0?1:-1),s.boxEnd[1]<g[1]?(s.boxEnd[1]=g[1],s.boxEnd[0]=s.boxStart[0]+(g[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>g[3]&&(s.boxEnd[1]=g[3],s.boxEnd[0]=s.boxStart[0]+(g[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(c)/I*(x>=0?1:-1),s.boxEnd[0]<g[0]?(s.boxEnd[0]=g[0],s.boxEnd[1]=s.boxStart[1]+(g[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>g[2]&&(s.boxEnd[0]=g[2],s.boxEnd[1]=s.boxStart[1]+(g[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),z&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(x=s.boxStart[0]!==s.boxEnd[0],c=s.boxStart[1]!==s.boxEnd[1],x||c?(x&&(L(0,s.boxStart[0],s.boxEnd[0]),n.xaxis.autorange=!1),c&&(L(1,s.boxStart[1],s.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,p?(s.panning||(s.dragStart[0]=v,s.dragStart[1]=y),Math.abs(s.dragStart[0]-v)<_&&(v=s.dragStart[0]),Math.abs(s.dragStart[1]-y)<_&&(y=s.dragStart[1]),x=(m-v)*(g[2]-g[0])/(u.viewBox[2]-u.viewBox[0]),c=(M-y)*(g[3]-g[1])/(u.viewBox[3]-u.viewBox[1]),g[0]+=x,g[2]+=x,g[1]+=c,g[3]+=c,n.setRanges(g),s.panning=!0,s.lastInputTime=Date.now(),i(),n.cameraChanged(),n.handleAnnotations()):s.panning&&(s.panning=!1,n.relayoutCallback());break}s.lastPos[0]=v,s.lastPos[1]=y}return s.wheelListener=l(r,function(p,v){if(!n.scrollZoom)return!1;var y=n.calcDataBox(),g=u.viewBox,A=s.lastPos[0],m=s.lastPos[1],M=Math.exp(5*v/(g[3]-g[1])),_=A/(g[2]-g[0])*(y[2]-y[0])+y[0],T=m/(g[3]-g[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-_)*M+_,y[2]=(y[2]-_)*M+_,y[1]=(y[1]-T)*M+T,y[3]=(y[3]-T)*M+T,n.setRanges(y),s.lastInputTime=Date.now(),i(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(t,B,H){var d=t("../cartesian/axes"),l=t("../../lib/str2rgbarray");function b(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var w=b.prototype,e=["xaxis","yaxis"];w.merge=function(a){this.titleEnable=!1,this.backgroundColor=l(a.plot_bgcolor);var n,r,u,s,i,f,h,p,v,y,g;for(y=0;y<2;++y){n=e[y];var A=n.charAt(0);for(r=a[this.scene[n]._name],u=r.title.text===this.scene.fullLayout._dfltTitle[A]?"":r.title.text,g=0;g<=2;g+=2)this.labelEnable[y+g]=!1,this.labels[y+g]=u,this.labelColor[y+g]=l(r.title.font.color),this.labelFont[y+g]=r.title.font.family,this.labelSize[y+g]=r.title.font.size,this.labelPad[y+g]=this.getLabelPad(n,r),this.tickEnable[y+g]=!1,this.tickColor[y+g]=l((r.tickfont||{}).color),this.tickAngle[y+g]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[y+g]=this.getTickPad(r),this.tickMarkLength[y+g]=0,this.tickMarkWidth[y+g]=r.tickwidth||0,this.tickMarkColor[y+g]=l(r.tickcolor),this.borderLineEnable[y+g]=!1,this.borderLineColor[y+g]=l(r.linecolor),this.borderLineWidth[y+g]=r.linewidth||0;h=this.hasSharedAxis(r),i=this.hasAxisInDfltPos(n,r)&&!h,f=this.hasAxisInAltrPos(n,r)&&!h,s=r.mirror||!1,p=h?String(s).indexOf("all")!==-1:!!s,v=h?s==="allticks":String(s).indexOf("ticks")!==-1,i?this.labelEnable[y]=!0:f&&(this.labelEnable[y+2]=!0),i?this.tickEnable[y]=r.showticklabels:f&&(this.tickEnable[y+2]=r.showticklabels),(i||p)&&(this.borderLineEnable[y]=r.showline),(f||p)&&(this.borderLineEnable[y+2]=r.showline),(i||v)&&(this.tickMarkLength[y]=this.getTickMarkLength(r)),(f||v)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(r)),this.gridLineEnable[y]=r.showgrid,this.gridLineColor[y]=l(r.gridcolor),this.gridLineWidth[y]=r.gridwidth,this.zeroLineEnable[y]=r.zeroline,this.zeroLineColor[y]=l(r.zerolinecolor),this.zeroLineWidth[y]=r.zerolinewidth}},w.hasSharedAxis=function(a){var n=this.scene,r=n.fullLayout._subplots.gl2d,u=d.findSubplotsWithAxis(r,a);return u.indexOf(n.id)!==0},w.hasAxisInDfltPos=function(a,n){var r=n.side;if(a==="xaxis")return r==="bottom";if(a==="yaxis")return r==="left"},w.hasAxisInAltrPos=function(a,n){var r=n.side;if(a==="xaxis")return r==="top";if(a==="yaxis")return r==="right"},w.getLabelPad=function(a,n){var r=1.5,u=n.title.font.size,s=n.showticklabels;if(a==="xaxis")return n.side==="top"?-10+u*(r+(s?1:0)):-10+u*(r+(s?.5:0));if(a==="yaxis")return n.side==="right"?10+u*(r+(s?1:.5)):10+u*(r+(s?.5:0))},w.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},w.getTickMarkLength=function(a){if(!a.ticks)return 0;var n=a.ticklen;return a.ticks==="inside"?-n:n};function o(a){return new b(a)}B.exports=o},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("./scene2d"),b=t("../layout_attributes"),w=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),o=t("../cartesian"),a=t("../../components/fx/layout_attributes"),n=t("../get_data").getSubplotData;H.name="gl2d",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=e.idRegex,H.attrRegex=e.attrRegex,H.attributes=t("../cartesian/attributes"),H.supplyLayoutDefaults=function(r,u,s){u._has("cartesian")||o.supplyLayoutDefaults(r,u,s)},H.layoutAttrOverrides=d(o.layoutAttributes,"plot","from-root"),H.baseLayoutAttrOverrides=d({plot_bgcolor:b.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),H.plot=function(u){for(var s=u._fullLayout,i=u._fullData,f=s._subplots.gl2d,h=0;h<f.length;h++){var p=f[h],v=s._plots[p],y=n(i,"gl2d",p),g=v._scene2d;g===void 0&&(g=new l({id:p,graphDiv:u,container:u.querySelector(".gl-container"),staticPlot:u._context.staticPlot,plotGlPixelRatio:u._context.plotGlPixelRatio},s),v._scene2d=g),g.plot(y,u.calcdata,s,u.layout)}},H.clean=function(r,u,s,i){for(var f=i._subplots.gl2d||[],h=0;h<f.length;h++){var p=f[h],v=i._plots[p];if(!!v._scene2d){var y=n(r,"gl2d",p);y.length===0&&(v._scene2d.destroy(),delete i._plots[p])}}o.clean.apply(this,arguments)},H.drawFramework=function(r){r._context.staticPlot||o.drawFramework(r)},H.toSVG=function(r){for(var u=r._fullLayout,s=u._subplots.gl2d,i=0;i<s.length;i++){var f=u._plots[s[i]],h=f._scene2d,p=h.toImage("png"),v=u._glimages.append("svg:image");v.attr({xmlns:w.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}},H.updateFx=function(r){for(var u=r._fullLayout,s=u._subplots.gl2d,i=0;i<s.length;i++){var f=u._plots[s[i]]._scene2d;f.updateFx(u.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/cartesian/axes"),b=t("../../components/fx"),w=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,o=t("../../../stackgl_modules").gl_select_box,a=t("webgl-context"),n=t("./convert"),r=t("./camera"),u=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),i=s.enforce,f=s.clean,h=t("../cartesian/autorange").doAutoRange,p=t("../../components/dragelement/helpers"),v=p.drawMode,y=p.selectMode,g=["xaxis","yaxis"],A,m,M=t("../cartesian/constants").SUBPLOT_PATTERN;function _(c,L){this.container=c.container,this.graphDiv=c.graphDiv,this.pixelRatio=c.plotGlPixelRatio||window.devicePixelRatio,this.id=c.id,this.staticPlot=!!c.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(L),this.glplot=w(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}B.exports=_;var T=_.prototype;T.makeFramework=function(){if(this.staticPlot){if(!m&&(A=document.createElement("canvas"),m=a({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!m))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=m}else{var c=this.container.querySelector(".gl-canvas-focus"),L=a({canvas:c,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){u(this),this.stopped=!0;return}this.canvas=c,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var z=this.container;z.appendChild(k),z.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},T.toImage=function(c){c||(c="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var z=0,I=k-1;z<I;++z,--I)for(var R=0;R<S;++R)for(var D=0;D<4;++D){var O=P[4*(S*z+R)+D];P[4*(S*z+R)+D]=P[4*(S*I+R)+D],P[4*(S*I+R)+D]=O}var F=document.createElement("canvas");F.width=S,F.height=k;var Y=F.getContext("2d"),X=Y.createImageData(S,k);X.data.set(P),Y.putImageData(X,0,0);var q;switch(c){case"jpeg":q=F.toDataURL("image/jpeg");break;case"webp":q=F.toDataURL("image/webp");break;default:q=F.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),q},T.updateSize=function(c){c||(c=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,z=Math.ceil(L*k)|0,I=Math.ceil(L*P)|0;return(c.width!==z||c.height!==I)&&(c.width=z,c.height=I),c},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var c=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<c[L].length;++S)c[L][S].text=c[L][S].text+"";return c};function x(c,L){for(var S=0;S<2;++S){var k=c[S],P=L[S];if(k.length!==P.length)return!0;for(var z=0;z<k.length;++z)if(k[z].x!==P[z].x)return!0}return!1}T.updateRefs=function(c){this.fullLayout=c;var L=this.id.match(M),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},T.relayoutCallback=function(){var c=this.graphDiv,L=this.xaxis,S=this.yaxis,k=c.layout,P={},z=P[L._name+".range"]=L.range.slice(),I=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,d.call("_storeDirectGUIEdit",c.layout,c._fullLayout._preGUI,P);var R=k[L._name];R.range=z,R.autorange=L.autorange;var D=k[S._name];D.range=I,D.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,c.emit("plotly_relayout",P)},T.cameraChanged=function(){var c=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;x(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=c.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var c=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&d.getComponentMethod("annotations","drawOne")(c,S)}},T.destroy=function(){if(!!this.glplot){var c=this.traces;c&&Object.keys(c).map(function(L){c[L].dispose(),delete c[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(c,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(c,L),this.updateFx(S.dragmode);var P=S.width,z=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,P,z];var R={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};f(R,this.xaxis),f(R,this.yaxis);var D=S._size,O=this.xaxis.domain,F=this.yaxis.domain;I.viewBox=[D.l+O[0]*D.w,D.b+F[0]*D.h,P-D.r-(1-O[1])*D.w,z-D.t-(1-F[1])*D.h],this.mouseContainer.style.width=D.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=D.h*(F[1]-F[0])+"px",this.mouseContainer.height=D.h*(F[1]-F[0]),this.mouseContainer.style.left=D.l+O[0]*D.w+"px",this.mouseContainer.style.top=D.t+(1-F[1])*D.h+"px";var Y,X;for(X=0;X<2;++X)Y=this[g[X]],Y._length=I.viewBox[X+2]-I.viewBox[X],h(this.graphDiv,Y),Y.setScale();i(R),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),k.update(I),this.glplot.draw()},T.calcDataBox=function(){var c=this.xaxis,L=this.yaxis,S=c.range,k=L.range,P=c.r2l,z=L.r2l;return[P(S[0]),z(k[0]),P(S[1]),z(k[1])]},T.setRanges=function(c){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(c[0]),k(c[2])],S.range=[P(c[1]),P(c[3])]},T.updateTraces=function(c,L){var S=Object.keys(this.traces),k,P,z;this.fullData=c;e:for(k=0;k<S.length;k++){var I=S[k],R=this.traces[I];for(P=0;P<c.length;P++)if(z=c[P],z.uid===I&&z.type===R.type)continue e;R.dispose(),delete this.traces[I]}for(k=0;k<c.length;k++){z=c[k];var D=L[k],O=this.traces[z.uid];O?O.update(z,D):(O=z._module.plot(this,z,D),this.traces[z.uid]=O)}this.glplot.objects.sort(function(F,Y){return F._trace.index-Y._trace.index})},T.updateFx=function(c){y(c)||v(c)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),c==="pan"?this.mouseContainer.style.cursor="move":c==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},T.emitPointAction=function(c,L){for(var S=c.trace.uid,k=c.pointIndex,P,z=0;z<this.fullData.length;z++)this.fullData[z].uid===S&&(P=this.fullData[z]);var I={x:c.traceCoord[0],y:c.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(I,P,k),this.graphDiv.emit(L,{points:[I]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var c=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var z=S.x*c.pixelRatio,I=this.canvas.height-c.pixelRatio*S.y,R;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(D[O]=c.dataBox[O],D[O+2]=c.dataBox[O+2]);c.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var F=P._size,Y=this.xaxis.domain,X=this.yaxis.domain;R=c.pick(z/c.pixelRatio+F.l+Y[0]*F.w,I/c.pixelRatio-(F.t+(1-X[1])*F.h));var q=R&&R.object._trace.handlePick(R);if(q&&k&&this.emitPointAction(q,"plotly_click"),R&&R.object._trace.hoverinfo!=="skip"&&P.hovermode&&q&&(!this.lastPickResult||this.lastPickResult.traceUid!==q.trace.uid||this.lastPickResult.dataCoord[0]!==q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==q.dataCoord[1])){var $=q;this.lastPickResult={traceUid:q.trace?q.trace.uid:null,dataCoord:q.dataCoord.slice()},this.spikes.update({center:R.dataCoord}),$.screenCoord=[((c.viewBox[2]-c.viewBox[0])*(R.dataCoord[0]-c.dataBox[0])/(c.dataBox[2]-c.dataBox[0])+c.viewBox[0])/c.pixelRatio,(this.canvas.height-(c.viewBox[3]-c.viewBox[1])*(R.dataCoord[1]-c.dataBox[1])/(c.dataBox[3]-c.dataBox[1])-c.viewBox[1])/c.pixelRatio],this.emitPointAction(q,"plotly_hover");var V=this.fullData[$.trace.index]||{},K=$.pointIndex,se=b.castHoverinfo(V,P,K);if(se&&se!=="all"){var ue=se.split("+");ue.indexOf("x")===-1&&($.traceCoord[0]=void 0),ue.indexOf("y")===-1&&($.traceCoord[1]=void 0),ue.indexOf("z")===-1&&($.traceCoord[2]=void 0),ue.indexOf("text")===-1&&($.textLabel=void 0),ue.indexOf("name")===-1&&($.name=void 0)}b.loneHover({x:$.screenCoord[0],y:$.screenCoord[1],xLabel:this.hoverFormatter("xaxis",$.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",$.traceCoord[1]),zLabel:$.traceCoord[2],text:$.textLabel,name:$.name,color:b.castHoverOption(V,K,"bgcolor")||$.color,borderColor:b.castHoverOption(V,K,"bordercolor"),fontFamily:b.castHoverOption(V,K,"font.family"),fontSize:b.castHoverOption(V,K,"font.size"),fontColor:b.castHoverOption(V,K,"font.color"),nameLength:b.castHoverOption(V,K,"namelength"),textAlign:b.castHoverOption(V,K,"align")},{container:this.svgContainer,gd:this.graphDiv})}}R||this.unhover(),c.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},T.hoverFormatter=function(c,L){if(L!==void 0){var S=this[c];return l.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("../../components/fx/layout_attributes"),b=t("./scene"),w=t("../get_data").getSubplotData,e=t("../../lib"),o=t("../../constants/xmlns_namespaces"),a="gl3d",n="scene";H.name=a,H.attr=n,H.idRoot=n,H.idRegex=H.attrRegex=e.counterRegex("scene"),H.attributes=t("./layout/attributes"),H.layoutAttributes=t("./layout/layout_attributes"),H.baseLayoutAttrOverrides=d({hoverlabel:l.hoverlabel},"plot","nested"),H.supplyLayoutDefaults=t("./layout/defaults"),H.plot=function(u){for(var s=u._fullLayout,i=u._fullData,f=s._subplots[a],h=0;h<f.length;h++){var p=f[h],v=w(i,a,p),y=s[p],g=y.camera,A=y._scene;A||(A=new b({id:p,graphDiv:u,container:u.querySelector(".gl-container"),staticPlot:u._context.staticPlot,plotGlPixelRatio:u._context.plotGlPixelRatio,camera:g},s),y._scene=A),A.viewInitial||(A.viewInitial={up:{x:g.up.x,y:g.up.y,z:g.up.z},eye:{x:g.eye.x,y:g.eye.y,z:g.eye.z},center:{x:g.center.x,y:g.center.y,z:g.center.z}}),A.plot(v,s,u.layout)}},H.clean=function(r,u,s,i){for(var f=i._subplots[a]||[],h=0;h<f.length;h++){var p=f[h];!u[p]&&!!i[p]._scene&&(i[p]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+p).remove())}},H.toSVG=function(r){for(var u=r._fullLayout,s=u._subplots[a],i=u._size,f=0;f<s.length;f++){var h=u[s[f]],p=h.domain,v=h._scene,y=v.toImage("png"),g=u._glimages.append("svg:image");g.attr({xmlns:o.svg,"xlink:href":y,x:i.l+i.w*p.x[0],y:i.t+i.h*(1-p.y[1]),width:i.w*(p.x[1]-p.x[0]),height:i.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),v.destroy()}},H.cleanId=function(u){if(!!u.match(/^scene[0-9]*$/)){var s=u.substr(5);return s==="1"&&(s=""),n+s}},H.updateFx=function(r){for(var u=r._fullLayout,s=u._subplots[a],i=0;i<s.length;i++){var f=u[s[i]]._scene;f.updateFx(u.dragmode,u.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(t,B,H){B.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(t,B,H){var d=t("../../../components/color"),l=t("../../cartesian/layout_attributes"),b=t("../../../lib/extend").extendFlat,w=t("../../../plot_api/edit_types").overrideAll;B.exports=w({visible:l.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:l.color,categoryorder:l.categoryorder,categoryarray:l.categoryarray,title:{text:l.title.text,font:l.title.font},type:b({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:l.autorange,rangemode:l.rangemode,range:b({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,mirror:l.mirror,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,tickfont:l.tickfont,tickangle:l.tickangle,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:l.showline,linecolor:l.linecolor,linewidth:l.linewidth,showgrid:l.showgrid,gridcolor:b({},l.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:l.gridwidth,zeroline:l.zeroline,zerolinecolor:l.zerolinecolor,zerolinewidth:l.zerolinewidth,_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(t,B,H){var d=t("tinycolor2").mix,l=t("../../../lib"),b=t("../../../plot_api/plot_template"),w=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),o=t("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);B.exports=function(u,s,i){var f,h;function p(g,A){return l.coerce(f,h,w,g,A)}for(var v=0;v<a.length;v++){var y=a[v];f=u[y]||{},h=b.newContainer(s,y),h._id=y[0]+i.scene,h._name=y,e(f,h,p,i),o(f,h,p,{font:i.font,letter:y[0],data:i.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),p("gridcolor",d(h.color,i.bgColor,n).toRgbString()),p("title.text",y[0]),h.setScale=l.noop,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",h.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(t,B,H){var d=t("../../../lib/str2rgbarray"),l=t("../../../lib"),b=["xaxis","yaxis","zaxis"];function w(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=w.prototype;e.merge=function(a,n){for(var r=this,u=0;u<3;++u){var s=n[b[u]];if(!s.visible){r.tickEnable[u]=!1,r.labelEnable[u]=!1,r.lineEnable[u]=!1,r.lineTickEnable[u]=!1,r.gridEnable[u]=!1,r.zeroEnable[u]=!1,r.backgroundEnable[u]=!1;continue}r.labels[u]=a._meta?l.templateString(s.title.text,a._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(r.labelColor[u]=d(s.title.font.color)),s.title.font.family&&(r.labelFont[u]=s.title.font.family),s.title.font.size&&(r.labelSize[u]=s.title.font.size)),"showline"in s&&(r.lineEnable[u]=s.showline),"linecolor"in s&&(r.lineColor[u]=d(s.linecolor)),"linewidth"in s&&(r.lineWidth[u]=s.linewidth),"showgrid"in s&&(r.gridEnable[u]=s.showgrid),"gridcolor"in s&&(r.gridColor[u]=d(s.gridcolor)),"gridwidth"in s&&(r.gridWidth[u]=s.gridwidth),s.type==="log"?r.zeroEnable[u]=!1:"zeroline"in s&&(r.zeroEnable[u]=s.zeroline),"zerolinecolor"in s&&(r.zeroLineColor[u]=d(s.zerolinecolor)),"zerolinewidth"in s&&(r.zeroLineWidth[u]=s.zerolinewidth),"ticks"in s&&!!s.ticks?r.lineTickEnable[u]=!0:r.lineTickEnable[u]=!1,"ticklen"in s&&(r.lineTickLength[u]=r._defaultLineTickLength[u]=s.ticklen),"tickcolor"in s&&(r.lineTickColor[u]=d(s.tickcolor)),"tickwidth"in s&&(r.lineTickWidth[u]=s.tickwidth),"tickangle"in s&&(r.tickAngle[u]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(r.tickEnable[u]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(r.tickColor[u]=d(s.tickfont.color)),s.tickfont.family&&(r.tickFont[u]=s.tickfont.family),s.tickfont.size&&(r.tickSize[u]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(r.lineTickMirror[u]=!0,r.lineMirror[u]=!0):s.mirror===!0?(r.lineTickMirror[u]=!1,r.lineMirror[u]=!0):(r.lineTickMirror[u]=!1,r.lineMirror[u]=!1):r.lineMirror[u]=!1,"showbackground"in s&&s.showbackground!==!1?(r.backgroundEnable[u]=!0,r.backgroundColor[u]=d(s.backgroundcolor)):r.backgroundEnable[u]=!1}};function o(a,n){var r=new w;return r.merge(a,n),r}B.exports=o},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(t,B,H){var d=t("../../../lib"),l=t("../../../components/color"),b=t("../../../registry"),w=t("../../subplot_defaults"),e=t("./axis_defaults"),o=t("./layout_attributes"),a=t("../../get_data").getSubplotData,n="gl3d";B.exports=function(s,i,f){var h=i._basePlotModules.length>1;function p(v){if(!h){var y=d.validate(s[v],o[v]);if(y)return s[v]}}w(s,i,f,{type:n,attributes:o,handleDefaults:r,fullLayout:i,font:i.font,fullData:f,getDfltFromLayout:p,autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})};function r(u,s,i,f){for(var h=i("bgcolor"),p=l.combine(h,f.paper_bgcolor),v=["up","center","eye"],y=0;y<v.length;y++)i("camera."+v[y]+".x"),i("camera."+v[y]+".y"),i("camera."+v[y]+".z");i("camera.projection.type");var g=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),A=g?"manual":"auto",m=i("aspectmode",A);g||(u.aspectratio=s.aspectratio={x:1,y:1,z:1},m==="manual"&&(s.aspectmode="auto"),u.aspectmode=s.aspectmode);var M=a(f.fullData,n,f.id);e(u,s,{font:f.font,scene:f.id,data:M,bgColor:p,calendar:f.calendar,autotypenumbersDflt:f.autotypenumbersDflt,fullLayout:f.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(u,s,f);var _=f.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",u.camera&&u.camera.up){var T=u.camera.up.x,x=u.camera.up.y,c=u.camera.up.z;c!==0&&(!T||!x||!c||c/Math.sqrt(T*T+x*x+c*c)>.999)&&(_="turntable")}else _="turntable";i("dragmode",_),i("hovermode",f.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(t,B,H){var d=t("./axis_attributes"),l=t("../../domain").attributes,b=t("../../../lib/extend").extendFlat,w=t("../../../lib").counterRegex;function e(o,a,n){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}B.exports={_arrayAttrRegexps:[w("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:l({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:d,yaxis:d,zaxis:d,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(t,B,H){var d=t("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var w=b.prototype;w.merge=function(o){for(var a=0;a<3;++a){var n=o[l[a]];if(!n.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=n.showspikes,this.colors[a]=d(n.spikecolor),this.drawSides[a]=n.spikesides,this.lineWidth[a]=n.spikethickness}};function e(o){var a=new b;return a.merge(o),a}B.exports=e},{"../../../lib/str2rgbarray":528}],606:[function(t,B,H){B.exports=o;var d=t("../../cartesian/axes"),l=t("../../../lib"),b=["xaxis","yaxis","zaxis"],w=[0,0,0];function e(a){for(var n=new Array(3),r=0;r<3;++r){for(var u=a[r],s=new Array(u.length),i=0;i<u.length;++i)s[i]=u[i].x;n[r]=s}return n}function o(a){for(var n=a.axesOptions,r=a.glplot.axesPixels,u=a.fullSceneLayout,s=[[],[],[]],i=0;i<3;++i){var f=u[b[i]];if(f._length=(r[i].hi-r[i].lo)*r[i].pixelsPerDataUnit/a.dataScale[i],Math.abs(f._length)===1/0||isNaN(f._length))s[i]=[];else{f._input_range=f.range.slice(),f.range[0]=r[i].lo/a.dataScale[i],f.range[1]=r[i].hi/a.dataScale[i],f._m=1/(a.dataScale[i]*r[i].pixelsPerDataUnit),f.range[0]===f.range[1]&&(f.range[0]-=1,f.range[1]+=1);var h=f.tickmode;if(f.tickmode==="auto"){f.tickmode="linear";var p=f.nticks||l.constrain(f._length/40,4,9);d.autoTicks(f,Math.abs(f.range[1]-f.range[0])/p)}for(var v=d.calcTicks(f,{msUTC:!0}),y=0;y<v.length;++y)v[y].x=v[y].x*a.dataScale[i],f.type==="date"&&(v[y].text=v[y].text.replace(/\<br\>/g," "));s[i]=v,f.tickmode=h}}n.ticks=s;for(var i=0;i<3;++i){w[i]=.5*(a.glplot.bounds[0][i]+a.glplot.bounds[1][i]);for(var y=0;y<2;++y)n.bounds[y][i]=a.glplot.bounds[y][i]}a.contourLevels=e(s)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(t,B,H){function d(b,w){var e=[0,0,0,0],o,a;for(o=0;o<4;++o)for(a=0;a<4;++a)e[a]+=b[4*o+a]*w[o];return e}function l(b,w){var e=d(b.projection,d(b.view,d(b.model,[w[0],w[1],w[2],1])));return e}B.exports=l},{}],608:[function(t,B,H){var d=t("../../../stackgl_modules").gl_plot3d,l=d.createCamera,b=d.createScene,w=t("webgl-context"),e=t("has-passive-events"),o=t("../../registry"),a=t("../../lib"),n=a.preserveDrawingBuffer(),r=t("../../plots/cartesian/axes"),u=t("../../components/fx"),s=t("../../lib/str2rgbarray"),i=t("../../lib/show_no_webgl_msg"),f=t("./project"),h=t("./layout/convert"),p=t("./layout/spikes"),v=t("./layout/tick_marks"),y,g;function A(P,z){var I=document.createElement("div"),R=P.container;this.graphDiv=P.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",I.appendChild(D),this.svgContainer=D,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",R.appendChild(I),this.fullLayout=z,this.id=P.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(z,z[this.id]),this.spikeOptions=p(z[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=A.prototype;m.prepareOptions=function(){var P=this,z={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!g&&(y=document.createElement("canvas"),g=w({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("error creating static canvas/context for image server");z.gl=g,z.canvas=y}return z};var M=!0;m.tryCreatePlot=function(){var P=this,z=P.prepareOptions(),I=!0;try{P.glplot=b(z)}catch{if(P.staticMode||!M||n)I=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=z.glOptions.preserveDrawingBuffer=!0,P.glplot=b(z)}catch{n=z.glOptions.preserveDrawingBuffer=!1,I=!1}}}return M=!1,I},m.initializeGLCamera=function(){var P=this,z=P.fullSceneLayout.camera,I=z.projection.type==="orthographic";P.camera=l(P.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var z=P.tryCreatePlot();if(!z)return i(P);P.traces={},P.make4thDimension();var I=P.graphDiv,R=I.layout,D=function(){var F={};return P.isCameraChanged(R)&&(F[P.id+".camera"]=P.getCamera()),P.isAspectChanged(R)&&(F[P.id+".aspectratio"]=P.glplot.getAspectratio(),R[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=R[P.id].aspectmode=F[P.id+".aspectmode"]="manual")),F},O=function(F){if(F.fullSceneLayout.dragmode!==!1){var Y=D();F.saveLayout(R),F.graphDiv.emit("plotly_relayout",Y)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(F){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var Y=F.deltaX>F.deltaY?1.1:1/1.1,X=P.glplot.getAspectratio();P.glplot.setAspectratio({x:Y*X.x,y:Y*X.y,z:Y*X.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var F=D();P.graphDiv.emit("plotly_relayouting",F)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(F){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:F,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},m.render=function(){var P=this,z=P.graphDiv,I,R=P.svgContainer,D=P.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var O=z._fullLayout._invScaleX,F=z._fullLayout._invScaleY,Y=D.width*O,X=D.height*F;R.setAttributeNS(null,"viewBox","0 0 "+Y+" "+X),R.setAttributeNS(null,"width",Y),R.setAttributeNS(null,"height",X),v(P),P.glplot.axes.update(P.axesOptions);for(var q=Object.keys(P.traces),$=null,V=P.glplot.selection,K=0;K<q.length;++K)I=P.traces[q[K]],I.data.hoverinfo!=="skip"&&I.handlePick(V)&&($=I),I.setContourLevels&&I.setContourLevels();function se(me,ce,ye){var xe=P.fullSceneLayout[me+"axis"];return xe.type!=="log"&&(ce=xe.d2l(ce)),r.hoverLabelText(xe,ce,ye)}if($!==null){var ue=f(P.glplot.cameraParams,V.dataCoordinate);I=$.data;var oe=z._fullData[I.index],U=V.index,G={xLabel:se("x",V.traceCoordinate[0],I.xhoverformat),yLabel:se("y",V.traceCoordinate[1],I.yhoverformat),zLabel:se("z",V.traceCoordinate[2],I.zhoverformat)},re=u.castHoverinfo(oe,P.fullLayout,U),ee=(re||"").split("+"),j=re&&re==="all";!oe.hovertemplate&&!j&&(ee.indexOf("x")===-1&&(G.xLabel=void 0),ee.indexOf("y")===-1&&(G.yLabel=void 0),ee.indexOf("z")===-1&&(G.zLabel=void 0),ee.indexOf("text")===-1&&(V.textLabel=void 0),ee.indexOf("name")===-1&&($.name=void 0));var Q,ne=[];I.type==="cone"||I.type==="streamtube"?(G.uLabel=se("x",V.traceCoordinate[3],I.uhoverformat),(j||ee.indexOf("u")!==-1)&&ne.push("u: "+G.uLabel),G.vLabel=se("y",V.traceCoordinate[4],I.vhoverformat),(j||ee.indexOf("v")!==-1)&&ne.push("v: "+G.vLabel),G.wLabel=se("z",V.traceCoordinate[5],I.whoverformat),(j||ee.indexOf("w")!==-1)&&ne.push("w: "+G.wLabel),G.normLabel=V.traceCoordinate[6].toPrecision(3),(j||ee.indexOf("norm")!==-1)&&ne.push("norm: "+G.normLabel),I.type==="streamtube"&&(G.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(j||ee.indexOf("divergence")!==-1)&&ne.push("divergence: "+G.divergenceLabel)),V.textLabel&&ne.push(V.textLabel),Q=ne.join("<br>")):I.type==="isosurface"||I.type==="volume"?(G.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(V.traceCoordinate[3]),I.valuehoverformat),ne.push("value: "+G.valueLabel),V.textLabel&&ne.push(V.textLabel),Q=ne.join("<br>")):Q=V.textLabel;var ae={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:oe._input,fullData:oe,curveNumber:oe.index,pointNumber:U};u.appendArrayPointValue(ae,oe,U),I._module.eventData&&(ae=oe._module.eventData(ae,V,oe,{},U));var ie={points:[ae]};if(P.fullSceneLayout.hovermode){var fe=[];u.loneHover({trace:oe,x:(.5+.5*ue[0]/ue[3])*Y,y:(.5-.5*ue[1]/ue[3])*X,xLabel:G.xLabel,yLabel:G.yLabel,zLabel:G.zLabel,text:Q,name:$.name,color:u.castHoverOption(oe,U,"bgcolor")||$.color,borderColor:u.castHoverOption(oe,U,"bordercolor"),fontFamily:u.castHoverOption(oe,U,"font.family"),fontSize:u.castHoverOption(oe,U,"font.size"),fontColor:u.castHoverOption(oe,U,"font.color"),nameLength:u.castHoverOption(oe,U,"namelength"),textAlign:u.castHoverOption(oe,U,"align"),hovertemplate:a.castOption(oe,U,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ae,G),eventData:[ae]},{container:R,gd:z,inOut_bbox:fe}),ae.bbox=fe[0]}V.buttons&&V.distance<5?z.emit("plotly_click",ie):z.emit("plotly_hover",ie),this.oldEventData=ie}else u.loneUnhover(R),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},m.recoverContext=function(){var P=this;P.glplot.dispose();var z=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!P.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(z)};var _=["xaxis","yaxis","zaxis"];function T(P,z,I){for(var R=P.fullSceneLayout,D=0;D<3;D++){var O=_[D],F=O.charAt(0),Y=R[O],X=z[F],q=z[F+"calendar"],$=z["_"+F+"length"];if(!a.isArrayOrTypedArray(X))I[0][D]=Math.min(I[0][D],0),I[1][D]=Math.max(I[1][D],$-1);else for(var V,K=0;K<($||X.length);K++)if(a.isArrayOrTypedArray(X[K]))for(var se=0;se<X[K].length;++se)V=Y.d2l(X[K][se],0,q),!isNaN(V)&&isFinite(V)&&(I[0][D]=Math.min(I[0][D],V),I[1][D]=Math.max(I[1][D],V));else V=Y.d2l(X[K],0,q),!isNaN(V)&&isFinite(V)&&(I[0][D]=Math.min(I[0][D],V),I[1][D]=Math.max(I[1][D],V))}}function x(P,z){for(var I=P.fullSceneLayout,R=I.annotations||[],D=0;D<3;D++)for(var O=_[D],F=O.charAt(0),Y=I[O],X=0;X<R.length;X++){var q=R[X];if(q.visible){var $=Y.r2l(q[F]);!isNaN($)&&isFinite($)&&(z[0][D]=Math.min(z[0][D],$),z[1][D]=Math.max(z[1][D],$))}}}m.plot=function(P,z,I){var R=this;if(R.plotArgs=[P,z,I],R.glplot.contextLost)return;var D,O,F,Y,X,q,$=z[R.id],V=I[R.id];R.fullLayout=z,R.fullSceneLayout=$,R.axesOptions.merge(z,$),R.spikeOptions.merge($),R.setViewport($),R.updateFx($.dragmode,$.hovermode),R.camera.enableWheel=R.graphDiv._context._scrollZoom.gl3d,R.glplot.setClearColor(s($.bgcolor)),R.setConvert(X),P?Array.isArray(P)||(P=[P]):P=[];var K=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<P.length;++F)D=P[F],!(D.visible!==!0||D._length===0)&&T(this,D,K);x(this,K);var se=[1,1,1];for(Y=0;Y<3;++Y)K[1][Y]===K[0][Y]?se[Y]=1:se[Y]=1/(K[1][Y]-K[0][Y]);for(R.dataScale=se,R.convertAnnotations(this),F=0;F<P.length;++F)D=P[F],!(D.visible!==!0||D._length===0)&&(O=R.traces[D.uid],O?O.data.type===D.type?O.update(D):(O.dispose(),O=D._module.plot(this,D),R.traces[D.uid]=O):(O=D._module.plot(this,D),R.traces[D.uid]=O),O.name=D.name);var ue=Object.keys(R.traces);e:for(F=0;F<ue.length;++F){for(Y=0;Y<P.length;++Y)if(P[Y].uid===ue[F]&&P[Y].visible===!0&&P[Y]._length!==0)continue e;O=R.traces[ue[F]],O.dispose(),delete R.traces[ue[F]]}R.glplot.objects.sort(function(Ye,qe){return Ye._trace.data.index-qe._trace.data.index});var oe=[[0,0,0],[0,0,0]],U=[],G={};for(F=0;F<3;++F){if(X=$[_[F]],q=X.type,q in G?(G[q].acc*=se[F],G[q].count+=1):G[q]={acc:se[F],count:1},X.autorange){oe[0][F]=1/0,oe[1][F]=-1/0;var re=R.glplot.objects,ee=R.fullSceneLayout.annotations||[],j=X._name.charAt(0);for(Y=0;Y<re.length;Y++){var Q=re[Y],ne=Q.bounds,ae=Q._trace.data._pad||0;Q.constructor.name==="ErrorBars"&&X._lowerLogErrorBound?oe[0][F]=Math.min(oe[0][F],X._lowerLogErrorBound):oe[0][F]=Math.min(oe[0][F],ne[0][F]/se[F]-ae),oe[1][F]=Math.max(oe[1][F],ne[1][F]/se[F]+ae)}for(Y=0;Y<ee.length;Y++){var ie=ee[Y];if(ie.visible){var fe=X.r2l(ie[j]);oe[0][F]=Math.min(oe[0][F],fe),oe[1][F]=Math.max(oe[1][F],fe)}}if("rangemode"in X&&X.rangemode==="tozero"&&(oe[0][F]=Math.min(oe[0][F],0),oe[1][F]=Math.max(oe[1][F],0)),oe[0][F]>oe[1][F])oe[0][F]=-1,oe[1][F]=1;else{var me=oe[1][F]-oe[0][F];oe[0][F]-=me/32,oe[1][F]+=me/32}if(X.autorange==="reversed"){var ce=oe[0][F];oe[0][F]=oe[1][F],oe[1][F]=ce}}else{var ye=X.range;oe[0][F]=X.r2l(ye[0]),oe[1][F]=X.r2l(ye[1])}oe[0][F]===oe[1][F]&&(oe[0][F]-=1,oe[1][F]+=1),U[F]=oe[1][F]-oe[0][F],R.glplot.setBounds(F,{min:oe[0][F]*se[F],max:oe[1][F]*se[F]})}var xe,ke=$.aspectmode;if(ke==="cube")xe=[1,1,1];else if(ke==="manual"){var Ae=$.aspectratio;xe=[Ae.x,Ae.y,Ae.z]}else if(ke==="auto"||ke==="data"){var Oe=[1,1,1];for(F=0;F<3;++F){X=$[_[F]],q=X.type;var He=G[q];Oe[F]=Math.pow(He.acc,1/He.count)/se[F]}ke==="data"||Math.max.apply(null,Oe)/Math.min.apply(null,Oe)<=4?xe=Oe:xe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");$.aspectratio.x=V.aspectratio.x=xe[0],$.aspectratio.y=V.aspectratio.y=xe[1],$.aspectratio.z=V.aspectratio.z=xe[2],R.glplot.setAspectratio($.aspectratio),R.viewInitial.aspectratio||(R.viewInitial.aspectratio={x:$.aspectratio.x,y:$.aspectratio.y,z:$.aspectratio.z}),R.viewInitial.aspectmode||(R.viewInitial.aspectmode=$.aspectmode);var Ge=$.domain||null,_e=z._size||null;if(Ge&&_e){var Ie=R.container.style;Ie.position="absolute",Ie.left=_e.l+Ge.x[0]*_e.w+"px",Ie.top=_e.t+(1-Ge.y[1])*_e.h+"px",Ie.width=_e.w*(Ge.x[1]-Ge.x[0])+"px",Ie.height=_e.h*(Ge.y[1]-Ge.y[0])+"px"}R.glplot.redraw()},m.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function c(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}m.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},m.setViewport=function(P){var z=this,I=P.camera;z.camera.lookAt.apply(this,c(I)),z.glplot.setAspectratio(P.aspectratio);var R=I.projection.type==="orthographic",D=z.camera._ortho;R!==D&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},m.isCameraChanged=function(P){var z=this,I=z.getCamera(),R=a.nestedProperty(P,z.id+".camera"),D=R.get();function O(q,$,V,K){var se=["up","center","eye"],ue=["x","y","z"];return $[se[V]]&&q[se[V]][ue[K]]===$[se[V]][ue[K]]}var F=!1;if(D===void 0)F=!0;else{for(var Y=0;Y<3;Y++)for(var X=0;X<3;X++)if(!O(I,D,Y,X)){F=!0;break}(!D.projection||I.projection&&I.projection.type!==D.projection.type)&&(F=!0)}return F},m.isAspectChanged=function(P){var z=this,I=z.glplot.getAspectratio(),R=a.nestedProperty(P,z.id+".aspectratio"),D=R.get();return D===void 0||D.x!==I.x||D.y!==I.y||D.z!==I.z},m.saveLayout=function(P){var z=this,I=z.fullLayout,R,D,O,F,Y,X,q=z.isCameraChanged(P),$=z.isAspectChanged(P),V=q||$;if(V){var K={};if(q&&(R=z.getCamera(),D=a.nestedProperty(P,z.id+".camera"),O=D.get(),K[z.id+".camera"]=O),$&&(F=z.glplot.getAspectratio(),Y=a.nestedProperty(P,z.id+".aspectratio"),X=Y.get(),K[z.id+".aspectratio"]=X),o.call("_storeDirectGUIEdit",P,I._preGUI,K),q){D.set(R);var se=a.nestedProperty(I,z.id+".camera");se.set(R)}if($){Y.set(F);var ue=a.nestedProperty(I,z.id+".aspectratio");ue.set(F),z.glplot.redraw()}}return V},m.updateFx=function(P,z){var I=this,R=I.camera;if(R)if(P==="orbit")R.mode="orbit",R.keyBindingMode="rotate";else if(P==="turntable"){R.up=[0,0,1],R.mode="turntable",R.keyBindingMode="rotate";var D=I.graphDiv,O=D._fullLayout,F=I.fullSceneLayout.camera,Y=F.up.x,X=F.up.y,q=F.up.z;if(q/Math.sqrt(Y*Y+X*X+q*q)<.999){var $=I.id+".camera.up",V={x:0,y:0,z:1},K={};K[$]=V;var se=D.layout;o.call("_storeDirectGUIEdit",se,O._preGUI,K),F.up=V,a.nestedProperty(se,$).set(V)}}else R.keyBindingMode=P;I.fullSceneLayout.hovermode=z};function S(P,z,I){for(var R=0,D=I-1;R<D;++R,--D)for(var O=0;O<z;++O)for(var F=0;F<4;++F){var Y=4*(z*R+O)+F,X=4*(z*D+O)+F,q=P[Y];P[Y]=P[X],P[X]=q}}function k(P,z,I){for(var R=0;R<I;++R)for(var D=0;D<z;++D){var O=4*(z*R+D),F=P[O+3];if(F>0)for(var Y=255/F,X=0;X<3;++X)P[O+X]=Math.min(Y*P[O+X],255)}}m.toImage=function(P){var z=this;P||(P="png"),z.staticMode&&z.container.appendChild(y),z.glplot.redraw();var I=z.glplot.gl,R=I.drawingBufferWidth,D=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(R*D*4);I.readPixels(0,0,R,D,I.RGBA,I.UNSIGNED_BYTE,O),S(O,R,D),k(O,R,D);var F=document.createElement("canvas");F.width=R,F.height=D;var Y=F.getContext("2d"),X=Y.createImageData(R,D);X.data.set(O),Y.putImageData(X,0,0);var q;switch(P){case"jpeg":q=F.toDataURL("image/jpeg");break;case"webp":q=F.toDataURL("image/webp");break;default:q=F.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(y),q},m.setConvert=function(){for(var P=this,z=0;z<3;z++){var I=P.fullSceneLayout[_[z]];r.setConvert(I,P.fullLayout),I.setScale=a.noop}},m.make4thDimension=function(){var P=this,z=P.graphDiv,I=z._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},B.exports=A},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(t,B,H){B.exports=function(l,b,w,e){e=e||l.length;for(var o=new Array(e),a=0;a<e;a++)o[a]=[l[a],b[a],w[a]];return o}},{}],610:[function(t,B,H){var d=t("./font_attributes"),l=t("./animation_attributes"),b=t("../components/color/attributes"),w=t("../components/shapes/draw_newshape/attributes"),e=t("./pad_attributes"),o=t("../lib/extend").extendFlat,a=d({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=b.defaultLine,B.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:w.newshape,activeshape:w.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},l.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(t,B,H){var d=t("../../lib/sort_object_keys"),l="1.10.1",b='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',b].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),o=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:b,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:o,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=d(a);B.exports={requiredVersion:l,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+l+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=b.split(" "),o=e[0],a=e[1],n=d.isArrayOrTypedArray(w)?d.mean(w):w,r=.5+n/100,u=1.5+n/100,s=["",""],i=[0,0];switch(o){case"top":s[0]="top",i[1]=-u;break;case"bottom":s[0]="bottom",i[1]=u;break}switch(a){case"left":s[1]="right",i[0]=-r;break;case"right":s[1]="left",i[0]=r;break}var f;return s[0]&&s[1]?f=s.join("-"):s[0]?f=s[0]:s[1]?f=s[1]:f="center",{anchor:f,offset:i}}},{"../../lib":503}],613:[function(t,B,H){var d=t("mapbox-gl/dist/mapbox-gl-unminified"),l=t("../../lib"),b=l.strTranslate,w=l.strScale,e=t("../../plots/get_data").getSubplotCalcData,o=t("../../constants/xmlns_namespaces"),a=t("@plotly/d3"),n=t("../../components/drawing"),r=t("../../lib/svg_text_utils"),u=t("./mapbox"),s="mapbox",i=H.constants=t("./constants");H.name=s,H.attr="subplot",H.idRoot=s,H.idRegex=H.attrRegex=l.counterRegex(s),H.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.plot=function(v){var y=v._fullLayout,g=v.calcdata,A=y._subplots[s];if(d.version!==i.requiredVersion)throw new Error(i.wrongVersionErrorMsg);var m=f(v,A);d.accessToken=m;for(var M=0;M<A.length;M++){var _=A[M],T=e(g,s,_),x=y[_],c=x._subplot;c||(c=new u(v,_),y[_]._subplot=c),c.viewInitial||(c.viewInitial={center:l.extendFlat({},x.center),zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),c.plot(T,y,v._promises)}},H.clean=function(p,v,y,g){for(var A=g._subplots[s]||[],m=0;m<A.length;m++){var M=A[m];!v[M]&&!!g[M]._subplot&&g[M]._subplot.destroy()}},H.toSVG=function(p){for(var v=p._fullLayout,y=v._subplots[s],g=v._size,A=0;A<y.length;A++){var m=v[y[A]],M=m.domain,_=m._subplot,T=_.toImage("png"),x=v._glimages.append("svg:image");x.attr({xmlns:o.svg,"xlink:href":T,x:g.l+g.w*M.x[0],y:g.t+g.h*(1-M.y[1]),width:g.w*(M.x[1]-M.x[0]),height:g.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var c=a.select(m._subplot.div),L=c.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=v._glimages.append("g");S.attr("transform",b(g.l+g.w*M.x[0]+10,g.t+g.h*(1-M.y[0])-31)),S.append("path").attr("d",i.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",i.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",i.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",i.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=c.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=v._glimages.append("g"),z=P.append("text");z.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var I=n.bBox(z.node()),R=g.w*(M.x[1]-M.x[0]);if(I.width>R/2){var D=k.split("|").join("<br>");z.text(D).attr("data-unformatted",D).call(r.convertToTspans,p),I=n.bBox(z.node())}z.attr("transform",b(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>R&&(O=R/(I.width+6));var F=[g.l+g.w*M.x[1],g.t+g.h*(1-M.y[0])];P.attr("transform",b(F[0],F[1])+w(O))}};function f(p,v){var y=p._fullLayout,g=p._context;if(g.mapboxAccessToken==="")return"";for(var A=[],m=[],M=!1,_=!1,T=0;T<v.length;T++){var x=y[v[T]],c=x.accesstoken;h(x.style)&&(c?l.pushUnique(A,c):(h(x._input.style)&&(l.error("Uses Mapbox map style, but did not set an access token."),M=!0),_=!0)),c&&l.pushUnique(m,c)}if(_){var L=M?i.noAccessTokenErrorMsg:i.missingStyleErrorMsg;throw l.error(L),new Error(L)}return A.length?(A.length>1&&l.warn(i.multipleTokensErrorMsg),A[0]):(m.length&&l.log(["Listed mapbox access token(s)",m.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function h(p){return typeof p=="string"&&(i.styleValuesMapbox.indexOf(p)!==-1||p.indexOf("mapbox://")===0)}H.updateFx=function(p){for(var v=p._fullLayout,y=v._subplots[s],g=0;g<y.length;g++){var A=v[y[g]]._subplot;A.updateFx(v)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/svg_text_utils").sanitizeHTML,b=t("./convert_text_opts"),w=t("./constants");function e(u,s){this.subplot=u,this.uid=u.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=w.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;o.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=a(s)},o.needsNewImage=function(u){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&u.sourcetype==="image"&&(this.source!==u.source||JSON.stringify(this.coordinates)!==JSON.stringify(u.coordinates))},o.needsNewSource=function(u){return this.sourceType!==u.sourcetype||JSON.stringify(this.source)!==JSON.stringify(u.source)||this.layerType!==u.type},o.needsNewLayer=function(u){return this.layerType!==u.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(u){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:u.source,coordinates:u.coordinates});var i=this.findFollowingMapboxLayerId(this.lookupBelow());i!==null&&this.subplot.map.moveLayer(this.idLayer,i)},o.updateSource=function(u){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=u.sourcetype,this.source=u.source,!!a(u)){var i=r(u);s.addSource(this.idSource,i)}},o.findFollowingMapboxLayerId=function(u){if(u==="traces")for(var s=this.subplot.getMapLayers(),i=0;i<s.length;i++){var f=s[i].id;if(typeof f=="string"&&f.indexOf(w.traceLayerPrefix)===0){u=f;break}}return u},o.updateLayer=function(u){var s=this.subplot,i=n(u),f=this.lookupBelow(),h=this.findFollowingMapboxLayerId(f);this.removeLayer(),a(u)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":u.sourcelayer||"",type:u.type,minzoom:u.minzoom,maxzoom:u.maxzoom,layout:i.layout,paint:i.paint},h),this.layerType=u.type,this.below=f},o.updateStyle=function(u){if(a(u)){var s=n(u);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},o.removeLayer=function(){var u=this.subplot.map;u.getLayer(this.idLayer)&&u.removeLayer(this.idLayer)},o.dispose=function(){var u=this.subplot.map;u.getLayer(this.idLayer)&&u.removeLayer(this.idLayer),u.getSource(this.idSource)&&u.removeSource(this.idSource)};function a(u){if(!u.visible)return!1;var s=u.source;if(Array.isArray(s)&&s.length>0){for(var i=0;i<s.length;i++)if(typeof s[i]!="string"||s[i].length===0)return!1;return!0}return d.isPlainObject(s)||typeof s=="string"&&s.length>0}function n(u){var s={},i={};switch(u.type){case"circle":d.extendFlat(i,{"circle-radius":u.circle.radius,"circle-color":u.color,"circle-opacity":u.opacity});break;case"line":d.extendFlat(i,{"line-width":u.line.width,"line-color":u.color,"line-opacity":u.opacity,"line-dasharray":u.line.dash});break;case"fill":d.extendFlat(i,{"fill-color":u.color,"fill-outline-color":u.fill.outlinecolor,"fill-opacity":u.opacity});break;case"symbol":var f=u.symbol,h=b(f.textposition,f.iconsize);d.extendFlat(s,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":h.anchor,"text-offset":h.offset,"symbol-placement":f.placement}),d.extendFlat(i,{"icon-color":u.color,"text-color":f.textfont.color,"text-opacity":u.opacity});break;case"raster":d.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":u.opacity});break}return{layout:s,paint:i}}function r(u){var s=u.sourcetype,i=u.source,f={type:s},h;return s==="geojson"?h="data":s==="vector"?h=typeof i=="string"?"url":"tiles":s==="raster"?(h="tiles",f.tileSize=256):s==="image"&&(h="url",f.coordinates=u.coordinates),f[h]=i,u.sourceattribution&&(f.attribution=l(u.sourceattribution)),f}B.exports=function(s,i,f){var h=new e(s,i);return h.update(f),h}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color").defaultLine,b=t("../domain").attributes,w=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,o=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray,n=t("./constants"),r=w({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var u=B.exports=o({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:l},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:l}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:d.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");u.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(t,B,H){var d=t("../../lib"),l=t("../subplot_defaults"),b=t("../array_container_defaults"),w=t("./layout_attributes");B.exports=function(n,r,u){l(n,r,u,{type:"mapbox",attributes:w,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(a,n,r,u){r("accesstoken",u.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),b(a,n,{name:"layers",handleItemDefaults:o}),n._input=a}function o(a,n){function r(p,v){return d.coerce(a,n,w.layers,p,v)}var u=r("visible");if(u){var s=r("sourcetype"),i=s==="raster"||s==="image";r("source"),r("sourceattribution"),s==="vector"&&r("sourcelayer"),s==="image"&&r("coordinates");var f;i&&(f="raster");var h=r("type",f);i&&h!=="raster"&&(h=n.type="raster",d.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),h==="circle"&&r("circle.radius"),h==="line"&&(r("line.width"),r("line.dash")),h==="fill"&&r("fill.outlinecolor"),h==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),d.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(t,B,H){var d=t("mapbox-gl/dist/mapbox-gl-unminified"),l=t("../../lib"),b=t("../../lib/geo_location_utils"),w=t("../../registry"),e=t("../cartesian/axes"),o=t("../../components/dragelement"),a=t("../../components/fx"),n=t("../../components/dragelement/helpers"),r=n.rectMode,u=n.drawMode,s=n.selectMode,i=t("../cartesian/select").prepSelect,f=t("../cartesian/select").clearSelect,h=t("../cartesian/select").clearSelectionsCache,p=t("../cartesian/select").selectOnClick,v=t("./constants"),y=t("./layers");function g(x,c){this.id=c,this.gd=x;var L=x._fullLayout,S=x._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=g.prototype;A.plot=function(x,c,L){var S=this,k=c[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(z,I){S.updateMap(x,c,z,I)}):P=new Promise(function(z,I){S.createMap(x,c,z,I)}),L.push(P)},A.createMap=function(x,c,L,S){var k=this,P=c[k.id],z=k.styleObj=M(P.style);k.accessToken=P.accesstoken;var I=k.map=new d.Map({container:k.div,style:z.style,center:T(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new d.AttributionControl({compact:!0}));I._canvas.style.left="0px",I._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(x,c);var R=[];R.push(new Promise(function(D){I.once("load",D)})),R=R.concat(b.fetchTraceGeoData(x)),Promise.all(R).then(function(){k.fillBelowLookup(x,c),k.updateData(x),k.updateLayout(c),k.resolveOnRender(L)}).catch(S)},A.updateMap=function(x,c,L,S){var k=this,P=k.map,z=c[this.id];k.rejectOnError(S);var I=[],R=M(z.style);JSON.stringify(k.styleObj)!==JSON.stringify(R)&&(k.styleObj=R,P.setStyle(R.style),k.traceHash={},I.push(new Promise(function(D){P.once("styledata",D)}))),I=I.concat(b.fetchTraceGeoData(x)),Promise.all(I).then(function(){k.fillBelowLookup(x,c),k.updateData(x),k.updateLayout(c),k.resolveOnRender(L)}).catch(S)},A.fillBelowLookup=function(x,c){var L=c[this.id],S=L.layers,k,P,z=this.belowLookup={},I=!1;for(k=0;k<x.length;k++){var R=x[k][0].trace,D=R._module;typeof R.below=="string"?P=R.below:D.getBelow&&(P=D.getBelow(R,this)),P===""&&(I=!0),z["trace-"+R.uid]=P||""}for(k=0;k<S.length;k++){var O=S[k];typeof O.below=="string"?P=O.below:I?P="traces":P="",z["layout-"+k]=P}var F={},Y,X;for(Y in z)P=z[Y],F[P]?F[P].push(Y):F[P]=[Y];for(P in F){var q=F[P];if(q.length>1)for(k=0;k<q.length;k++)Y=q[k],Y.indexOf("trace-")===0?(X=Y.split("trace-")[1],this.traceHash[X]&&(this.traceHash[X].below=null)):Y.indexOf("layout-")===0&&(X=Y.split("layout-")[1],this.layerList[X]&&(this.layerList[X].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(x){var c=this.traceHash,L,S,k,P,z=x.slice().sort(function(F,Y){return m[F[0].trace.type]-m[Y[0].trace.type]});for(k=0;k<z.length;k++){var I=z[k];S=I[0].trace,L=c[S.uid];var R=!1;L&&(L.type===S.type?(L.update(I),R=!0):L.dispose()),!R&&S._module&&(c[S.uid]=S._module.plot(this,I))}var D=Object.keys(c);e:for(k=0;k<D.length;k++){var O=D[k];for(P=0;P<x.length;P++)if(S=x[P][0].trace,O===S.uid)continue e;L=c[O],L.dispose(),delete c[O]}},A.updateLayout=function(x){var c=this.map,L=x[this.id];!this.dragging&&!this.wheeling&&(c.setCenter(T(L.center)),c.setZoom(L.zoom),c.setBearing(L.bearing),c.setPitch(L.pitch)),this.updateLayers(x),this.updateFramework(x),this.updateFx(x),this.map.resize(),this.gd._context._scrollZoom.mapbox?c.scrollZoom.enable():c.scrollZoom.disable()},A.resolveOnRender=function(x){var c=this.map;c.on("render",function L(){c.loaded()&&(c.off("render",L),setTimeout(x,10))})},A.rejectOnError=function(x){var c=this.map;function L(){x(new Error(v.mapOnErrorMsg))}c.once("error",L),c.once("style.error",L),c.once("source.error",L),c.once("tile.error",L),c.once("layer.error",L)},A.createFramework=function(x){var c=this,L=c.div=document.createElement("div");L.id=c.uid,L.style.position="absolute",c.container.appendChild(L),c.xaxis={_id:"x",c2p:function(S){return c.project(S).x}},c.yaxis={_id:"y",c2p:function(S){return c.project(S).y}},c.updateFramework(x),c.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(c.mockAxis,x)},A.initFx=function(x,c){var L=this,S=L.gd,k=L.map;k.on("moveend",function(I){if(!!L.map){var R=S._fullLayout;if(I.originalEvent||L.wheeling){var D=R[L.id];w.call("_storeDirectGUIEdit",S.layout,R._preGUI,L.getViewEdits(D));var O=L.getView();D._input.center=D.center=O.center,D._input.zoom=D.zoom=O.zoom,D._input.bearing=D.bearing=O.bearing,D._input.pitch=D.pitch=O.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(O))}I.originalEvent&&I.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),R._rehover&&R._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(I){var R=L.div.getBoundingClientRect(),D=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return R},L.xaxis.p2c=function(){return k.unproject(D).lng},L.yaxis.p2c=function(){return k.unproject(D).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&a.hover(S,I,L.id)},a.hover(S,I,L.id),S._fullLayout._hoversubplot=L.id});function P(){a.loneUnhover(c._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function z(){var I=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(I))}k.on("drag",z),k.on("zoom",z),k.on("dblclick",function(){var I=S._fullLayout[L.id];w.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(I));var R=L.viewInitial;k.setCenter(T(R.center)),k.setZoom(R.zoom),k.setBearing(R.bearing),k.setPitch(R.pitch);var D=L.getView();I._input.center=I.center=D.center,I._input.zoom=I.zoom=D.zoom,I._input.bearing=I.bearing=D.bearing,I._input.pitch=I.pitch=D.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(D))}),L.clearSelect=function(){h(L.dragOptions),f(L.dragOptions.gd)},L.onClickInPanFn=function(I){return function(R){var D=S._fullLayout.clickmode;D.indexOf("select")>-1&&p(R.originalEvent,S,[L.xaxis],[L.yaxis],L.id,I),D.indexOf("event")>-1&&a.click(S,R.originalEvent)}}},A.updateFx=function(x){var c=this,L=c.map,S=c.gd;if(c.isStatic)return;function k(R){var D=c.map.unproject(R);return[D.lng,D.lat]}var P=x.dragmode,z;r(P)?z=function(R,D){var O=R.range={};O[c.id]=[k([D.xmin,D.ymin]),k([D.xmax,D.ymax])]}:z=function(R,D,O){var F=R.lassoPoints={};F[c.id]=O.filtered.map(k)};var I=c.dragOptions;c.dragOptions=l.extendDeep(I||{},{dragmode:x.dragmode,element:c.div,gd:S,plotinfo:{id:c.id,domain:x[c.id].domain,xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:z},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id}),L.off("click",c.onClickInPanHandler),s(P)||u(P)?(L.dragPan.disable(),L.on("zoomstart",c.clearSelect),c.dragOptions.prepFn=function(R,D,O){i(R,D,O,c.dragOptions,P)},o.init(c.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",c.clearSelect),c.div.onmousedown=null,c.onClickInPanHandler=c.onClickInPanFn(c.dragOptions),L.on("click",c.onClickInPanHandler))},A.updateFramework=function(x){var c=x[this.id].domain,L=x._size,S=this.div.style;S.width=L.w*(c.x[1]-c.x[0])+"px",S.height=L.h*(c.y[1]-c.y[0])+"px",S.left=L.l+c.x[0]*L.w+"px",S.top=L.t+(1-c.y[1])*L.h+"px",this.xaxis._offset=L.l+c.x[0]*L.w,this.xaxis._length=L.w*(c.x[1]-c.x[0]),this.yaxis._offset=L.t+(1-c.y[1])*L.h,this.yaxis._length=L.h*(c.y[1]-c.y[0])},A.updateLayers=function(x){var c=x[this.id],L=c.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(y(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(x,c,L){for(var S in L)this.map[c](x,S,L[S])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(x,c){var L=this.map;if(typeof c=="string"){if(c===""){L.addLayer(x,c);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(c===S[k].id){L.addLayer(x,c);return}l.warn(["Trying to add layer with *below* value",c,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(x)},A.project=function(x){return this.map.project(new d.LngLat(x[0],x[1]))},A.getView=function(){var x=this.map,c=x.getCenter(),L=c.lng,S=c.lat,k={lon:L,lat:S},P=x.getCanvas(),z=parseInt(P.style.width),I=parseInt(P.style.height);return{center:k,zoom:x.getZoom(),bearing:x.getBearing(),pitch:x.getPitch(),_derived:{coordinates:[x.unproject([0,0]).toArray(),x.unproject([z,0]).toArray(),x.unproject([z,I]).toArray(),x.unproject([0,I]).toArray()]}}},A.getViewEdits=function(x){for(var c=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[c+"."+P]=x[P]}return S},A.getViewEditsWithDerived=function(x){var c=this.id,L=this.getViewEdits(x);return L[c+"._derived"]=x._derived,L};function M(x){var c={};return l.isPlainObject(x)?(c.id=x.id,c.style=x):typeof x=="string"?(c.id=x,v.styleValuesMapbox.indexOf(x)!==-1?c.style=_(x):v.stylesNonMapbox[x]?c.style=v.stylesNonMapbox[x]:c.style=x):(c.id=v.styleValueDflt,c.style=_(v.styleValueDflt)),c.transition={duration:0,delay:0},c}function _(x){return v.styleUrlPrefix+x+"-"+v.styleUrlSuffix}function T(x){return[x.lon,x.lat]}B.exports=g},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(t,B,H){B.exports=function(d){var l=d.editType;return{t:{valType:"number",dflt:0,editType:l},r:{valType:"number",dflt:0,editType:l},b:{valType:"number",dflt:0,editType:l},l:{valType:"number",dflt:0,editType:l},editType:l}}},{}],619:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").timeFormatLocale,b=t("d3-format").formatLocale,w=t("fast-isnumeric"),e=t("../registry"),o=t("../plot_api/plot_schema"),a=t("../plot_api/plot_template"),n=t("../lib"),r=t("../components/color"),u=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),i=t("./cartesian/handle_outline").clearSelect,f=t("./animation_attributes"),h=t("./frame_attributes"),p=t("../plots/get_data").getModuleCalcData,v=n.relinkPrivateKeys,y=n._,g=B.exports={};n.extendFlat(g,e),g.attributes=t("./attributes"),g.attributes.type.values=g.allTypes,g.fontAttrs=t("./font_attributes"),g.layoutAttributes=t("./layout_attributes"),g.fontWeight="normal";var A=g.transformsRegistry,m=t("./command");g.executeAPICommand=m.executeAPICommand,g.computeAPICommandBindings=m.computeAPICommandBindings,g.manageCommandObserver=m.manageCommandObserver,g.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,g.redrawText=function(U){return U=n.getGraphDiv(U),new Promise(function(G){setTimeout(function(){!U._fullLayout||(e.getComponentMethod("annotations","draw")(U),e.getComponentMethod("legend","draw")(U),e.getComponentMethod("colorbar","draw")(U),G(g.previousPromises(U)))},300)})},g.resize=function(U){U=n.getGraphDiv(U);var G,re=new Promise(function(ee,j){(!U||n.isHidden(U))&&j(new Error("Resize must be passed a displayed plot div element.")),U._redrawTimer&&clearTimeout(U._redrawTimer),U._resolveResize&&(G=U._resolveResize),U._resolveResize=ee,U._redrawTimer=setTimeout(function(){if(!U.layout||U.layout.width&&U.layout.height||n.isHidden(U)){ee(U);return}delete U.layout.width,delete U.layout.height;var Q=U.changed;U.autoplay=!0,e.call("relayout",U,{autosize:!0}).then(function(){U.changed=Q,U._resolveResize===ee&&(delete U._resolveResize,ee(U))})},100)});return G&&G(re),re},g.previousPromises=function(U){if((U._promises||[]).length)return Promise.all(U._promises).then(function(){U._promises=[]})},g.addLinks=function(U){if(!(!U._context.showLink&&!U._context.showSources)){var G=U._fullLayout,re=n.ensureSingle(G._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var fe=d.select(this);fe.append("tspan").classed("js-link-to-tool",!0),fe.append("tspan").classed("js-link-spacer",!0),fe.append("tspan").classed("js-sourcelinks",!0)})}),ee=re.node(),j={y:G._paper.attr("height")-9};document.body.contains(ee)&&ee.getComputedTextLength()>=G.width-20?(j["text-anchor"]="start",j.x=5):(j["text-anchor"]="end",j.x=G._paper.attr("width")-7),re.attr(j);var Q=re.select(".js-link-to-tool"),ne=re.select(".js-link-spacer"),ae=re.select(".js-sourcelinks");U._context.showSources&&U._context.showSources(U),U._context.showLink&&M(U,Q),ne.text(Q.text()&&ae.text()?" - ":"")}};function M(U,G){G.text("");var re=G.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(U._context.linkText+" "+String.fromCharCode(187));if(U._context.sendData)re.on("click",function(){g.sendDataToCloud(U)});else{var ee=window.location.pathname.split("/"),j=window.location.search;re.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ee[2].split(".")[0]+"/"+ee[1]+j})}}g.sendDataToCloud=function(U){var G=(window.PLOTLYENV||{}).BASE_URL||U._context.plotlyServerURL;if(!!G){U.emit("plotly_beforeexport");var re=d.select(U).append("div").attr("id","hiddenform").style("display","none"),ee=re.append("form").attr({action:G+"/external",method:"post",target:"_blank"}),j=ee.append("input").attr({type:"text",name:"data"});return j.node().value=g.graphJson(U,!1,"keepdata"),ee.node().submit(),re.remove(),U.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];g.supplyDefaults=function(U,G){var re=G&&G.skipUpdateCalc,ee=U._fullLayout||{};if(ee._skipDefaults){delete ee._skipDefaults;return}var j=U._fullLayout={},Q=U.layout||{},ne=U._fullData||[],ae=U._fullData=[],ie=U.data||[],fe=U.calcdata||[],me=U._context||{},ce;U._transitionData||g.createTransitionData(U),j._dfltTitle={plot:y(U,"Click to enter Plot title"),x:y(U,"Click to enter X axis title"),y:y(U,"Click to enter Y axis title"),colorbar:y(U,"Click to enter Colorscale title"),annotation:y(U,"new text")},j._traceWord=y(U,"trace");var ye=L(U,_);if(j._mapboxAccessToken=me.mapboxAccessToken,ee._initialAutoSizeIsDone){var xe=ee.width,ke=ee.height;g.supplyLayoutGlobalDefaults(Q,j,ye),Q.width||(j.width=xe),Q.height||(j.height=ke),g.sanitizeMargins(j)}else{g.supplyLayoutGlobalDefaults(Q,j,ye);var Ae=!Q.width||!Q.height,Oe=j.autosize,He=me.autosizable,Ge=Ae&&(Oe||He);Ge?g.plotAutoSize(U,Q,j):Ae&&g.sanitizeMargins(j),!Oe&&Ae&&(Q.width=j.width,Q.height=j.height)}j._d3locale=S(ye,j.separators),j._extraFormat=L(U,T),j._initialAutoSizeIsDone=!0,j._dataLength=ie.length,j._modules=[],j._visibleModules=[],j._basePlotModules=[];var _e=j._subplots=c(),Ie=j._splomAxes={x:{},y:{}},Ye=j._splomSubplots={};j._splomGridDflt={},j._scatterStackOpts={},j._firstScatter={},j._alignmentOpts={},j._colorAxes={},j._requestRangeslider={},j._traceUids=x(ne,ie),j._globalTransforms=(U._context||{}).globalTransforms,g.supplyDataDefaults(ie,ae,Q,j);var qe=Object.keys(Ie.x),Ue=Object.keys(Ie.y);if(qe.length>1&&Ue.length>1){for(e.getComponentMethod("grid","sizeDefaults")(Q,j),ce=0;ce<qe.length;ce++)n.pushUnique(_e.xaxis,qe[ce]);for(ce=0;ce<Ue.length;ce++)n.pushUnique(_e.yaxis,Ue[ce]);for(var Re in Ye)n.pushUnique(_e.cartesian,Re)}if(j._has=g._hasPlotType.bind(j),ne.length===ae.length)for(ce=0;ce<ae.length;ce++)v(ae[ce],ne[ce]);g.supplyLayoutModuleDefaults(Q,j,ae,U._transitionData);var Ve=j._visibleModules,dt=[];for(ce=0;ce<Ve.length;ce++){var Dt=Ve[ce].crossTraceDefaults;Dt&&n.pushUnique(dt,Dt)}for(ce=0;ce<dt.length;ce++)dt[ce](ae,j);j._hasOnlyLargeSploms=j._basePlotModules.length===1&&j._basePlotModules[0].name==="splom"&&qe.length>15&&Ue.length>15&&j.shapes.length===0&&j.images.length===0,g.linkSubplots(ae,j,ne,ee),g.cleanPlot(ae,j,ne,ee);var Gt=!!(ee._has&&ee._has("gl2d")),kt=!!(j._has&&j._has("gl2d")),zt=!!(ee._has&&ee._has("cartesian")),Bt=!!(j._has&&j._has("cartesian")),Lt=zt||Gt,Mt=Bt||kt;Lt&&!Mt?ee._bgLayer.remove():Mt&&!Lt&&(j._shouldCreateBgLayer=!0),ee._zoomlayer&&!U._dragging&&i({_fullLayout:ee}),k(ae,j),v(j,ee),e.getComponentMethod("colorscale","crossTraceDefaults")(ae,j),j._preGUI||(j._preGUI={}),j._tracePreGUI||(j._tracePreGUI={});var it=j._tracePreGUI,ht={},Qe;for(Qe in it)ht[Qe]="old";for(ce=0;ce<ae.length;ce++)Qe=ae[ce]._fullInput.uid,ht[Qe]||(it[Qe]={}),ht[Qe]="new";for(Qe in ht)ht[Qe]==="old"&&delete it[Qe];D(j),e.getComponentMethod("rangeslider","makeData")(j),!re&&fe.length===ae.length&&g.supplyDefaultsUpdateCalc(fe,ae)},g.supplyDefaultsUpdateCalc=function(U,G){for(var re=0;re<G.length;re++){var ee=G[re],j=(U[re]||[])[0];if(j&&j.trace){var Q=j.trace;if(Q._hasCalcTransform){var ne=Q._arrayAttrs,ae,ie,fe;for(ae=0;ae<ne.length;ae++)ie=ne[ae],fe=n.nestedProperty(Q,ie).get().slice(),n.nestedProperty(ee,ie).set(fe)}j.trace=ee}}};function x(U,G){var re=G.length,ee=[],j,Q;for(j=0;j<U.length;j++){var ne=U[j]._fullInput;ne!==Q&&ee.push(ne),Q=ne}var ae=ee.length,ie=new Array(re),fe={};function me(xe,ke){ie[ke]=xe,fe[xe]=1}function ce(xe,ke){if(xe&&typeof xe=="string"&&!fe[xe])return me(xe,ke),!0}for(j=0;j<re;j++){var ye=G[j].uid;typeof ye=="number"&&(ye=String(ye)),!ce(ye,j)&&(j<ae&&ce(ee[j].uid,j)||me(n.randstr(fe),j))}return ie}function c(){var U=e.collectableSubplotTypes,G={},re,ee;if(!U){U=[];var j=e.subplotsRegistry;for(var Q in j){var ne=j[Q],ae=ne.attr;if(ae&&(U.push(Q),Array.isArray(ae)))for(ee=0;ee<ae.length;ee++)n.pushUnique(U,ae[ee])}}for(re=0;re<U.length;re++)G[U[re]]=[];return G}function L(U,G){var re=U._context.locale;re||(re="en-US");var ee=!1,j={};function Q(ce){for(var ye=!0,xe=0;xe<G.length;xe++){var ke=G[xe];j[ke]||(ce[ke]?j[ke]=ce[ke]:ye=!1)}ye&&(ee=!0)}for(var ne=0;ne<2;ne++){for(var ae=U._context.locales,ie=0;ie<2;ie++){var fe=(ae[re]||{}).format;if(fe&&(Q(fe),ee))break;ae=e.localeRegistry}var me=re.split("-")[0];if(ee||me===re)break;re=me}return ee||Q(e.localeRegistry.en.format),j}function S(U,G){return U.decimal=G.charAt(0),U.thousands=G.charAt(1),{numberFormat:function(re){try{re=b(U).format(n.adjustFormat(re))}catch{return n.warnBadFormat(re),n.noFormat}return re},timeFormat:l(U).utcFormat}}function k(U,G){var re,ee=[];G.meta&&(re=G._meta={meta:G.meta,layout:{meta:G.meta}});for(var j=0;j<U.length;j++){var Q=U[j];Q.meta?ee[Q.index]=Q._meta={meta:Q.meta}:G.meta&&(Q._meta={meta:G.meta}),G.meta&&(Q._meta.layout={meta:G.meta})}ee.length&&(re||(re=G._meta={}),re.data=ee)}g.createTransitionData=function(U){U._transitionData||(U._transitionData={}),U._transitionData._frames||(U._transitionData._frames=[]),U._transitionData._frameHash||(U._transitionData._frameHash={}),U._transitionData._counter||(U._transitionData._counter=0),U._transitionData._interruptCallbacks||(U._transitionData._interruptCallbacks=[])},g._hasPlotType=function(U){var G,re=this._basePlotModules||[];for(G=0;G<re.length;G++)if(re[G].name===U)return!0;var ee=this._modules||[];for(G=0;G<ee.length;G++){var j=ee[G].name;if(j===U)return!0;var Q=e.modules[j];if(Q&&Q.categories[U])return!0}return!1},g.cleanPlot=function(U,G,re,ee){var j,Q,ne=ee._basePlotModules||[];for(j=0;j<ne.length;j++){var ae=ne[j];ae.clean&&ae.clean(U,G,re,ee)}var ie=ee._has&&ee._has("gl"),fe=G._has&&G._has("gl");ie&&!fe&&ee._glcontainer!==void 0&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.selectAll(".no-webgl").remove(),ee._glcanvas=null);var me=!!ee._infolayer;e:for(j=0;j<re.length;j++){var ce=re[j],ye=ce.uid;for(Q=0;Q<U.length;Q++){var xe=U[Q];if(ye===xe.uid)continue e}me&&ee._infolayer.select(".cb"+ye).remove()}},g.linkSubplots=function(U,G,re,ee){var j,Q,ne=ee._plots||{},ae=G._plots={},ie=G._subplots,fe={_fullData:U,_fullLayout:G},me=ie.cartesian.concat(ie.gl2d||[]);for(j=0;j<me.length;j++){var ce=me[j],ye=ne[ce],xe=s.getFromId(fe,ce,"x"),ke=s.getFromId(fe,ce,"y"),Ae;for(ye?Ae=ae[ce]=ye:(Ae=ae[ce]={},Ae.id=ce),xe._counterAxes.push(ke._id),ke._counterAxes.push(xe._id),xe._subplotsWith.push(ce),ke._subplotsWith.push(ce),Ae.xaxis=xe,Ae.yaxis=ke,Ae._hasClipOnAxisFalse=!1,Q=0;Q<U.length;Q++){var Oe=U[Q];if(Oe.xaxis===Ae.xaxis._id&&Oe.yaxis===Ae.yaxis._id&&Oe.cliponaxis===!1){Ae._hasClipOnAxisFalse=!0;break}}}var He=s.list(fe,null,!0),Ge;for(j=0;j<He.length;j++){Ge=He[j];var _e=null;Ge.overlaying&&(_e=s.getFromId(fe,Ge.overlaying),_e&&_e.overlaying&&(Ge.overlaying=!1,_e=null)),Ge._mainAxis=_e||Ge,_e&&(Ge.domain=_e.domain.slice()),Ge._anchorAxis=Ge.anchor==="free"?null:s.getFromId(fe,Ge.anchor)}for(j=0;j<He.length;j++)if(Ge=He[j],Ge._counterAxes.sort(s.idSort),Ge._subplotsWith.sort(n.subplotSort),Ge._mainSubplot=P(Ge,G),Ge._counterAxes.length&&(Ge.spikemode&&Ge.spikemode.indexOf("across")!==-1||Ge.automargin&&Ge.mirror&&Ge.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Ge))){var Ie=1,Ye=0;for(Q=0;Q<Ge._counterAxes.length;Q++){var qe=s.getFromId(fe,Ge._counterAxes[Q]);Ie=Math.min(Ie,qe.domain[0]),Ye=Math.max(Ye,qe.domain[1])}Ie<Ye&&(Ge._counterDomainMin=Ie,Ge._counterDomainMax=Ye)}};function P(U,G){var re={_fullLayout:G},ee=U._id.charAt(0)==="x",j=U._mainAxis._anchorAxis,Q="",ne="",ae="";if(j&&(ae=j._mainAxis._id,Q=ee?U._id+ae:ae+U._id),!Q||!G._plots[Q]){Q="";for(var ie=U._counterAxes,fe=0;fe<ie.length;fe++){var me=ie[fe],ce=ee?U._id+me:me+U._id;ne||(ne=ce);var ye=s.getFromId(re,me);if(ae&&ye.overlaying===ae){Q=ce;break}}}return Q||ne}g.clearExpandedTraceDefaultColors=function(U){var G,re,ee;function j(ne,ae,ie,fe){re[fe]=ae,re.length=fe+1,ne.valType==="color"&&ne.dflt===void 0&&G.push(re.join("."))}for(re=[],G=U._module._colorAttrs,G||(U._module._colorAttrs=G=[],o.crawl(U._module.attributes,j)),ee=0;ee<G.length;ee++){var Q=n.nestedProperty(U,"_input."+G[ee]);Q.get()||n.nestedProperty(U,G[ee]).set(null)}},g.supplyDataDefaults=function(U,G,re,ee){var j=ee._modules,Q=ee._visibleModules,ne=ee._basePlotModules,ae=0,ie=0,fe,me,ce;ee._transformModules=[];function ye(Ue){G.push(Ue);var Re=Ue._module;!Re||(n.pushUnique(j,Re),Ue.visible===!0&&n.pushUnique(Q,Re),n.pushUnique(ne,Ue._module.basePlotModule),ae++,Ue._input.visible!==!1&&ie++)}var xe={},ke=[],Ae=(re.template||{}).data||{},Oe=a.traceTemplater(Ae);for(fe=0;fe<U.length;fe++){if(ce=U[fe],me=Oe.newTrace(ce),me.uid=ee._traceUids[fe],g.supplyTraceDefaults(ce,me,ie,ee,fe),me.index=fe,me._input=ce,me._expandedIndex=ae,me.transforms&&me.transforms.length)for(var He=ce.visible!==!1&&me.visible===!1,Ge=I(me,G,re,ee),_e=0;_e<Ge.length;_e++){var Ie=Ge[_e],Ye={_template:me._template,type:me.type,uid:me.uid+_e};He&&Ie.visible===!1&&delete Ie.visible,g.supplyTraceDefaults(Ie,Ye,ae,ee,fe),v(Ye,Ie),Ye.index=fe,Ye._input=ce,Ye._fullInput=me,Ye._expandedIndex=ae,Ye._expandedInput=Ie,ye(Ye)}else me._fullInput=me,me._expandedInput=me,ye(me);e.traceIs(me,"carpetAxis")&&(xe[me.carpet]=me),e.traceIs(me,"carpetDependent")&&ke.push(fe)}for(fe=0;fe<ke.length;fe++)if(me=G[ke[fe]],!!me.visible){var qe=xe[me.carpet];if(me._carpet=qe,!qe||!qe.visible){me.visible=!1;continue}me.xaxis=qe.xaxis,me.yaxis=qe.yaxis}},g.supplyAnimationDefaults=function(U){U=U||{};var G,re={};function ee(j,Q){return n.coerce(U||{},re,f,j,Q)}if(ee("mode"),ee("direction"),ee("fromcurrent"),Array.isArray(U.frame))for(re.frame=[],G=0;G<U.frame.length;G++)re.frame[G]=g.supplyAnimationFrameDefaults(U.frame[G]||{});else re.frame=g.supplyAnimationFrameDefaults(U.frame||{});if(Array.isArray(U.transition))for(re.transition=[],G=0;G<U.transition.length;G++)re.transition[G]=g.supplyAnimationTransitionDefaults(U.transition[G]||{});else re.transition=g.supplyAnimationTransitionDefaults(U.transition||{});return re},g.supplyAnimationFrameDefaults=function(U){var G={};function re(ee,j){return n.coerce(U||{},G,f.frame,ee,j)}return re("duration"),re("redraw"),G},g.supplyAnimationTransitionDefaults=function(U){var G={};function re(ee,j){return n.coerce(U||{},G,f.transition,ee,j)}return re("duration"),re("easing"),G},g.supplyFrameDefaults=function(U){var G={};function re(ee,j){return n.coerce(U,G,h,ee,j)}return re("group"),re("name"),re("traces"),re("baseframe"),re("data"),re("layout"),G},g.supplyTraceDefaults=function(U,G,re,ee,j){var Q=ee.colorway||r.defaults,ne=Q[re%Q.length],ae;function ie(Ge,_e){return n.coerce(U,G,g.attributes,Ge,_e)}var fe=ie("visible");ie("type"),ie("name",ee._traceWord+" "+j),ie("uirevision",ee.uirevision);var me=g.getModule(G);if(G._module=me,me){var ce=me.basePlotModule,ye=ce.attr,xe=ce.attributes;if(ye&&xe){var ke=ee._subplots,Ae="";if(fe||ce.name!=="gl2d"){if(Array.isArray(ye))for(ae=0;ae<ye.length;ae++){var Oe=ye[ae],He=n.coerce(U,G,xe,Oe);ke[Oe]&&n.pushUnique(ke[Oe],He),Ae+=He}else Ae=n.coerce(U,G,xe,ye);ke[ce.name]&&n.pushUnique(ke[ce.name],Ae)}}}return fe&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(G,"showLegend")?(n.coerce(U,G,me.attributes.showlegend?me.attributes:g.attributes,"showlegend"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),G._dfltShowLegend=!0):G._dfltShowLegend=!1,me&&me.supplyDefaults(U,G,ne,ee),e.traceIs(G,"noOpacity")||ie("opacity"),e.traceIs(G,"notLegendIsolatable")&&(G.visible=!!G.visible),e.traceIs(G,"noHover")||(G.hovertemplate||n.coerceHoverinfo(U,G,ee),G.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(U,G,ne,ee)),me&&me.selectPoints&&ie("selectedpoints"),g.supplyTransformDefaults(U,G,ee)),G};function z(U){var G=U.transforms;if(Array.isArray(G)&&G.length)for(var re=0;re<G.length;re++){var ee=G[re],j=ee._module||A[ee.type];if(j&&j.makesData)return!0}return!1}g.hasMakesDataTransform=z,g.supplyTransformDefaults=function(U,G,re){if(!!(G._length||z(U))){var ee=re._globalTransforms||[],j=re._transformModules||[];if(!(!Array.isArray(U.transforms)&&ee.length===0))for(var Q=U.transforms||[],ne=ee.concat(Q),ae=G.transforms=[],ie=0;ie<ne.length;ie++){var fe=ne[ie],me=fe.type,ce=A[me],ye,xe=!(fe._module&&fe._module===ce),ke=ce&&typeof ce.transform=="function";ce||n.warn("Unrecognized transform type "+me+"."),ce&&ce.supplyDefaults&&(xe||ke)?(ye=ce.supplyDefaults(fe,G,re,U),ye.type=me,ye._module=ce,n.pushUnique(j,ce)):ye=n.extendFlat({},fe),ae.push(ye)}}};function I(U,G,re,ee){for(var j=U.transforms,Q=[U],ne=0;ne<j.length;ne++){var ae=j[ne],ie=A[ae.type];ie&&ie.transform&&(Q=ie.transform(Q,{transform:ae,fullTrace:U,fullData:G,layout:re,fullLayout:ee,transformIndex:ne}))}return Q}g.supplyLayoutGlobalDefaults=function(U,G,re){function ee(fe,me){return n.coerce(U,G,g.layoutAttributes,fe,me)}var j=U.template;n.isPlainObject(j)&&(G.template=j,G._template=j.layout,G._dataTemplate=j.data),ee("autotypenumbers");var Q=n.coerceFont(ee,"font"),ne=Q.size;n.coerceFont(ee,"title.font",n.extendFlat({},Q,{size:Math.round(ne*1.4)})),ee("title.text",G._dfltTitle.plot),ee("title.xref"),ee("title.yref"),ee("title.x"),ee("title.y"),ee("title.xanchor"),ee("title.yanchor"),ee("title.pad.t"),ee("title.pad.r"),ee("title.pad.b"),ee("title.pad.l");var ae=ee("uniformtext.mode");ae&&ee("uniformtext.minsize"),ee("autosize",!(U.width&&U.height)),ee("width"),ee("height"),ee("margin.l"),ee("margin.r"),ee("margin.t"),ee("margin.b"),ee("margin.pad"),ee("margin.autoexpand"),U.width&&U.height&&g.sanitizeMargins(G),e.getComponentMethod("grid","sizeDefaults")(U,G),ee("paper_bgcolor"),ee("separators",re.decimal+re.thousands),ee("hidesources"),ee("colorway"),ee("datarevision");var ie=ee("uirevision");ee("editrevision",ie),ee("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(U,G),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(U,G,ee),ee("meta"),n.isPlainObject(U.transition)&&(ee("transition.duration"),ee("transition.easing"),ee("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(U,G,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(U,G,ee)};function R(U){return typeof U=="string"&&U.substr(U.length-2)==="px"&&parseFloat(U)}g.plotAutoSize=function(G,re,ee){var j=G._context||{},Q=j.frameMargins,ne,ae,ie=n.isPlotDiv(G);if(ie&&G.emit("plotly_autosize"),j.fillFrame)ne=window.innerWidth,ae=window.innerHeight,document.body.style.overflow="hidden";else{var fe=ie?window.getComputedStyle(G):{};if(ne=R(fe.width)||R(fe.maxWidth)||ee.width,ae=R(fe.height)||R(fe.maxHeight)||ee.height,w(Q)&&Q>0){var me=1-2*Q;ne=Math.round(me*ne),ae=Math.round(me*ae)}}var ce=g.layoutAttributes.width.min,ye=g.layoutAttributes.height.min;ne<ce&&(ne=ce),ae<ye&&(ae=ye);var xe=!re.width&&Math.abs(ee.width-ne)>1,ke=!re.height&&Math.abs(ee.height-ae)>1;(ke||xe)&&(xe&&(ee.width=ne),ke&&(ee.height=ae)),G._initialAutoSize||(G._initialAutoSize={width:ne,height:ae}),g.sanitizeMargins(ee)},g.supplyLayoutModuleDefaults=function(U,G,re,ee){var j=e.componentsRegistry,Q=G._basePlotModules,ne,ae,ie,fe=e.subplotsRegistry.cartesian;for(ne in j)ie=j[ne],ie.includeBasePlot&&ie.includeBasePlot(U,G);Q.length||Q.push(fe),G._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(U,G),fe.finalizeSubplots(U,G));for(var me in G._subplots)G._subplots[me].sort(n.subplotSort);for(ae=0;ae<Q.length;ae++)ie=Q[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,G,re);var ce=G._modules;for(ae=0;ae<ce.length;ae++)ie=ce[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,G,re);var ye=G._transformModules;for(ae=0;ae<ye.length;ae++)ie=ye[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,G,re,ee);for(ne in j)ie=j[ne],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,G,re)},g.purge=function(U){var G=U._fullLayout||{};G._glcontainer!==void 0&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.remove(),G._glcanvas=null),G._modeBar&&G._modeBar.destroy(),U._transitionData&&(U._transitionData._interruptCallbacks&&(U._transitionData._interruptCallbacks.length=0),U._transitionData._animationRaf&&window.cancelAnimationFrame(U._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(U),delete U.data,delete U.layout,delete U._fullData,delete U._fullLayout,delete U.calcdata,delete U.empty,delete U.fid,delete U.undoqueue,delete U.undonum,delete U.autoplay,delete U.changed,delete U._promises,delete U._redrawTimer,delete U._hmlumcount,delete U._hmpixcount,delete U._transitionData,delete U._transitioning,delete U._initialAutoSize,delete U._transitioningWithDuration,delete U._dragging,delete U._dragged,delete U._dragdata,delete U._hoverdata,delete U._snapshotInProgress,delete U._editing,delete U._mouseDownTime,delete U._legendMouseDownTime,U.removeAllListeners&&U.removeAllListeners()},g.style=function(U){var G=U._fullLayout._visibleModules,re=[],ee;for(ee=0;ee<G.length;ee++){var j=G[ee];j.style&&n.pushUnique(re,j.style)}for(ee=0;ee<re.length;ee++)re[ee](U)},g.sanitizeMargins=function(U){if(!(!U||!U.margin)){var G=U.width,re=U.height,ee=U.margin,j=G-(ee.l+ee.r),Q=re-(ee.t+ee.b),ne;j<0&&(ne=(G-1)/(ee.l+ee.r),ee.l=Math.floor(ne*ee.l),ee.r=Math.floor(ne*ee.r)),Q<0&&(ne=(re-1)/(ee.t+ee.b),ee.t=Math.floor(ne*ee.t),ee.b=Math.floor(ne*ee.b))}},g.clearAutoMarginIds=function(U){U._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(U,G){U._fullLayout._pushmarginIds[G]=1};function D(U){var G=U.margin;if(!U._size){var re=U._size={l:Math.round(G.l),r:Math.round(G.r),t:Math.round(G.t),b:Math.round(G.b),p:Math.round(G.pad)};re.w=Math.round(U.width)-re.l-re.r,re.h=Math.round(U.height)-re.t-re.b}U._pushmargin||(U._pushmargin={}),U._pushmarginIds||(U._pushmarginIds={})}var O=2,F=2,Y=64,X=64;g.autoMargin=function(U,G,re){var ee=U._fullLayout,j=ee.width,Q=ee.height,ne=ee.margin,ae=n.constrain(j-ne.l-ne.r,O,Y),ie=n.constrain(Q-ne.t-ne.b,F,X),fe=Math.max(0,j-ae),me=Math.max(0,Q-ie),ce=ee._pushmargin,ye=ee._pushmarginIds;if(ne.autoexpand!==!1){if(!re)delete ce[G],delete ye[G];else{var xe=re.pad;if(xe===void 0&&(xe=Math.min(12,ne.l,ne.r,ne.t,ne.b)),fe){var ke=(re.l+re.r)/fe;ke>1&&(re.l/=ke,re.r/=ke)}if(me){var Ae=(re.t+re.b)/me;Ae>1&&(re.t/=Ae,re.b/=Ae)}var Oe=re.xl!==void 0?re.xl:re.x,He=re.xr!==void 0?re.xr:re.x,Ge=re.yt!==void 0?re.yt:re.y,_e=re.yb!==void 0?re.yb:re.y;ce[G]={l:{val:Oe,size:re.l+xe},r:{val:He,size:re.r+xe},b:{val:_e,size:re.b+xe},t:{val:Ge,size:re.t+xe}},ye[G]=1}if(!ee._replotting)return g.doAutoMargin(U)}},g.doAutoMargin=function(U){var G=U._fullLayout,re=G.width,ee=G.height;G._size||(G._size={}),D(G);var j=G._size,Q=G.margin,ne=n.extendFlat({},j),ae=Q.l,ie=Q.r,fe=Q.t,me=Q.b,ce=G._pushmargin,ye=G._pushmarginIds;if(G.margin.autoexpand!==!1){for(var xe in ce)ye[xe]||delete ce[xe];ce.base={l:{val:0,size:ae},r:{val:1,size:ie},t:{val:1,size:fe},b:{val:0,size:me}};for(var ke in ce){var Ae=ce[ke].l||{},Oe=ce[ke].b||{},He=Ae.val,Ge=Ae.size,_e=Oe.val,Ie=Oe.size;for(var Ye in ce){if(w(Ge)&&ce[Ye].r){var qe=ce[Ye].r.val,Ue=ce[Ye].r.size;if(qe>He){var Re=(Ge*qe+(Ue-re)*He)/(qe-He),Ve=(Ue*(1-He)+(Ge-re)*(1-qe))/(qe-He);Re+Ve>ae+ie&&(ae=Re,ie=Ve)}}if(w(Ie)&&ce[Ye].t){var dt=ce[Ye].t.val,Dt=ce[Ye].t.size;if(dt>_e){var Gt=(Ie*dt+(Dt-ee)*_e)/(dt-_e),kt=(Dt*(1-_e)+(Ie-ee)*(1-dt))/(dt-_e);Gt+kt>me+fe&&(me=Gt,fe=kt)}}}}}var zt=n.constrain(re-Q.l-Q.r,O,Y),Bt=n.constrain(ee-Q.t-Q.b,F,X),Lt=Math.max(0,re-zt),Mt=Math.max(0,ee-Bt);if(Lt){var it=(ae+ie)/Lt;it>1&&(ae/=it,ie/=it)}if(Mt){var ht=(me+fe)/Mt;ht>1&&(me/=ht,fe/=ht)}if(j.l=Math.round(ae),j.r=Math.round(ie),j.t=Math.round(fe),j.b=Math.round(me),j.p=Math.round(Q.pad),j.w=Math.round(re)-j.l-j.r,j.h=Math.round(ee)-j.t-j.b,!G._replotting&&g.didMarginChange(ne,j)){"_redrawFromAutoMarginCount"in G?G._redrawFromAutoMarginCount++:G._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(ye).length);if(G._redrawFromAutoMarginCount<Qe)return e.call("_doPlot",U);G._size=ne,n.warn("Too many auto-margin redraws.")}q(U)};function q(U){var G=s.list(U,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(re){for(var ee=0;ee<G.length;ee++){var j=G[ee][re];j&&j()}})}var $=["l","r","t","b","p","w","h"];g.didMarginChange=function(U,G){for(var re=0;re<$.length;re++){var ee=$[re],j=U[ee],Q=G[ee];if(!w(j)||Math.abs(Q-j)>1)return!0}return!1},g.graphJson=function(U,G,re,ee,j,Q){(j&&G&&!U._fullData||j&&!G&&!U._fullLayout)&&g.supplyDefaults(U);var ne=j?U._fullData:U.data,ae=j?U._fullLayout:U.layout,ie=(U._transitionData||{})._frames;function fe(ye,xe){if(typeof ye=="function")return xe?"_function_":null;if(n.isPlainObject(ye)){var ke={},Ae;return Object.keys(ye).sort().forEach(function(Oe){if(["_","["].indexOf(Oe.charAt(0))===-1){if(typeof ye[Oe]=="function"){xe&&(ke[Oe]="_function");return}if(re==="keepdata"){if(Oe.substr(Oe.length-3)==="src")return}else if(re==="keepstream"){if(Ae=ye[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0&&!n.isPlainObject(ye.stream))return}else if(re!=="keepall"&&(Ae=ye[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0))return;ke[Oe]=fe(ye[Oe],xe)}}),ke}return Array.isArray(ye)?ye.map(function(Oe){return fe(Oe,xe)}):n.isTypedArray(ye)?n.simpleMap(ye,n.identity):n.isJSDate(ye)?n.ms2DateTimeLocal(+ye):ye}var me={data:(ne||[]).map(function(ye){var xe=fe(ye);return G&&delete xe.fit,xe})};if(!G&&(me.layout=fe(ae),j)){var ce=ae._size;me.layout.computed={margin:{b:ce.b,l:ce.l,r:ce.r,t:ce.t}}}return ie&&(me.frames=fe(ie)),Q&&(me.config=fe(U._context,!0)),ee==="object"?me:JSON.stringify(me)},g.modifyFrames=function(U,G){var re,ee,j,Q=U._transitionData._frames,ne=U._transitionData._frameHash;for(re=0;re<G.length;re++)switch(ee=G[re],ee.type){case"replace":j=ee.value;var ae=(Q[ee.index]||{}).name,ie=j.name;Q[ee.index]=ne[ie]=j,ie!==ae&&(delete ne[ae],ne[ie]=j);break;case"insert":j=ee.value,ne[j.name]=j,Q.splice(ee.index,0,j);break;case"delete":j=Q[ee.index],delete ne[j.name],Q.splice(ee.index,1);break}return Promise.resolve()},g.computeFrame=function(U,G){var re=U._transitionData._frameHash,ee,j,Q,ne;if(!G)throw new Error("computeFrame must be given a string frame name");var ae=re[G.toString()];if(!ae)return!1;for(var ie=[ae],fe=[ae.name];ae.baseframe&&(ae=re[ae.baseframe.toString()])&&fe.indexOf(ae.name)===-1;)ie.push(ae),fe.push(ae.name);for(var me={};ae=ie.pop();)if(ae.layout&&(me.layout=g.extendLayout(me.layout,ae.layout)),ae.data){if(me.data||(me.data=[]),j=ae.traces,!j)for(j=[],ee=0;ee<ae.data.length;ee++)j[ee]=ee;for(me.traces||(me.traces=[]),ee=0;ee<ae.data.length;ee++)Q=j[ee],Q!=null&&(ne=me.traces.indexOf(Q),ne===-1&&(ne=me.data.length,me.traces[ne]=Q),me.data[ne]=g.extendTrace(me.data[ne],ae.data[ee]))}return me},g.recomputeFrameHash=function(U){for(var G=U._transitionData._frameHash={},re=U._transitionData._frames,ee=0;ee<re.length;ee++){var j=re[ee];j&&j.name&&(G[j.name]=j)}},g.extendObjectWithContainers=function(U,G,re){var ee,j,Q,ne,ae,ie,fe,me,ce=n.extendDeepNoArrays({},G||{}),ye=n.expandObjectPaths(ce),xe={};if(re&&re.length)for(Q=0;Q<re.length;Q++)ee=n.nestedProperty(ye,re[Q]),j=ee.get(),j===void 0?n.nestedProperty(xe,re[Q]).set(null):(ee.set(null),n.nestedProperty(xe,re[Q]).set(j));if(U=n.extendDeepNoArrays(U||{},ye),re&&re.length){for(Q=0;Q<re.length;Q++)if(ae=n.nestedProperty(xe,re[Q]),fe=ae.get(),!!fe){for(ie=n.nestedProperty(U,re[Q]),me=ie.get(),Array.isArray(me)||(me=[],ie.set(me)),ne=0;ne<fe.length;ne++){var ke=fe[ne];ke===null?me[ne]=null:me[ne]=g.extendObjectWithContainers(me[ne],ke)}ie.set(me)}}return U},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=e.layoutArrayContainers,g.extendTrace=function(U,G){return g.extendObjectWithContainers(U,G,g.dataArrayContainers)},g.extendLayout=function(U,G){return g.extendObjectWithContainers(U,G,g.layoutArrayContainers)},g.transition=function(U,G,re,ee,j,Q){var ne={redraw:j.redraw},ae={},ie=[];return ne.prepareFn=function(){for(var fe=Array.isArray(G)?G.length:0,me=ee.slice(0,fe),ce=0;ce<me.length;ce++){var ye=me[ce],xe=U._fullData[ye],ke=xe._module;if(!!ke){if(ke.animatable){var Ae=ke.basePlotModule.name;ae[Ae]||(ae[Ae]=[]),ae[Ae].push(ye)}U.data[me[ce]]=g.extendTrace(U.data[me[ce]],G[ce])}}var Oe=n.expandObjectPaths(n.extendDeepNoArrays({},re)),He=/^[xy]axis[0-9]*$/;for(var Ge in Oe)!He.test(Ge)||delete Oe[Ge].range;g.extendLayout(U.layout,Oe),delete U.calcdata,g.supplyDefaults(U),g.doCalcdata(U);var _e=n.expandObjectPaths(re);if(_e){var Ie=U._fullLayout._plots;for(var Ye in Ie){var qe=Ie[Ye],Ue=qe.xaxis,Re=qe.yaxis,Ve=Ue.range.slice(),dt=Re.range.slice(),Dt=null,Gt=null,kt=null,zt=null;Array.isArray(_e[Ue._name+".range"])?Dt=_e[Ue._name+".range"].slice():Array.isArray((_e[Ue._name]||{}).range)&&(Dt=_e[Ue._name].range.slice()),Array.isArray(_e[Re._name+".range"])?Gt=_e[Re._name+".range"].slice():Array.isArray((_e[Re._name]||{}).range)&&(Gt=_e[Re._name].range.slice()),Ve&&Dt&&(Ue.r2l(Ve[0])!==Ue.r2l(Dt[0])||Ue.r2l(Ve[1])!==Ue.r2l(Dt[1]))&&(kt={xr0:Ve,xr1:Dt}),dt&&Gt&&(Re.r2l(dt[0])!==Re.r2l(Gt[0])||Re.r2l(dt[1])!==Re.r2l(Gt[1]))&&(zt={yr0:dt,yr1:Gt}),(kt||zt)&&ie.push(n.extendFlat({plotinfo:qe},kt,zt))}}return Promise.resolve()},ne.runFn=function(fe){var me,ce=U._fullLayout._basePlotModules,ye=ie.length,xe;if(re)for(xe=0;xe<ce.length;xe++)ce[xe].transitionAxes&&ce[xe].transitionAxes(U,ie,Q,fe);ye?(me=n.extendFlat({},Q),me.duration=0,delete ae.cartesian):me=Q;for(var ke in ae){var Ae=ae[ke],Oe=U._fullData[Ae[0]]._module;Oe.basePlotModule.plot(U,Ae,me,fe)}},V(U,Q,ne)},g.transitionFromReact=function(U,G,re,ee){var j=U._fullLayout,Q=j.transition,ne={},ae=[];return ne.prepareFn=function(){var ie=j._plots;ne.redraw=!1,G.anim==="some"&&(ne.redraw=!0),re.anim==="some"&&(ne.redraw=!0);for(var fe in ie){var me=ie[fe],ce=me.xaxis,ye=me.yaxis,xe=ee[ce._name].range.slice(),ke=ee[ye._name].range.slice(),Ae=ce.range.slice(),Oe=ye.range.slice();ce.setScale(),ye.setScale();var He=null,Ge=null;(ce.r2l(xe[0])!==ce.r2l(Ae[0])||ce.r2l(xe[1])!==ce.r2l(Ae[1]))&&(He={xr0:xe,xr1:Ae}),(ye.r2l(ke[0])!==ye.r2l(Oe[0])||ye.r2l(ke[1])!==ye.r2l(Oe[1]))&&(Ge={yr0:ke,yr1:Oe}),(He||Ge)&&ae.push(n.extendFlat({plotinfo:me},He,Ge))}return Promise.resolve()},ne.runFn=function(ie){for(var fe=U._fullData,me=U._fullLayout,ce=me._basePlotModules,ye,xe,ke,Ae=[],Oe=0;Oe<fe.length;Oe++)Ae.push(Oe);function He(){if(!!U._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].transitionAxes&&ce[_e].transitionAxes(U,ae,ye,ie)}function Ge(){if(!!U._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].plot(U,ke,xe,ie)}ae.length&&G.anim?Q.ordering==="traces first"?(ye=n.extendFlat({},Q,{duration:0}),ke=Ae,xe=Q,setTimeout(He,Q.duration),Ge()):(ye=Q,ke=null,xe=n.extendFlat({},Q,{duration:0}),setTimeout(Ge,ye.duration),He()):ae.length?(ye=Q,He()):G.anim&&(ke=Ae,xe=Q,Ge())},V(U,Q,ne)};function V(U,G,re){var ee=!1;function j(ce){var ye=Promise.resolve();if(!ce)return ye;for(;ce.length;)ye=ye.then(ce.shift());return ye}function Q(ce){if(!!ce)for(;ce.length;)ce.shift()}function ne(){return U.emit("plotly_transitioning",[]),new Promise(function(ce){U._transitioning=!0,G.duration>0&&(U._transitioningWithDuration=!0),U._transitionData._interruptCallbacks.push(function(){ee=!0}),re.redraw&&U._transitionData._interruptCallbacks.push(function(){return e.call("redraw",U)}),U._transitionData._interruptCallbacks.push(function(){U.emit("plotly_transitioninterrupted",[])});var ye=0,xe=0;function ke(){return ye++,function(){xe++,!ee&&xe===ye&&ae(ce)}}re.runFn(ke),setTimeout(ke())})}function ae(ce){if(!!U._transitionData)return Q(U._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(re.redraw)return e.call("redraw",U)}).then(function(){U._transitioning=!1,U._transitioningWithDuration=!1,U.emit("plotly_transitioned",[])}).then(ce)}function ie(){if(!!U._transitionData)return U._transitioning=!1,j(U._transitionData._interruptCallbacks)}var fe=[g.previousPromises,ie,re.prepareFn,g.rehover,ne],me=n.syncOrAsync(fe,U);return(!me||!me.then)&&(me=Promise.resolve()),me.then(function(){return U})}g.doCalcdata=function(U,G){var re=s.list(U),ee=U._fullData,j=U._fullLayout,Q,ne,ae,ie,fe=new Array(ee.length),me=(U.calcdata||[]).slice();for(U.calcdata=fe,j._numBoxes=0,j._numViolins=0,j._violinScaleGroupStats={},U._hmpixcount=0,U._hmlumcount=0,j._piecolormap={},j._sunburstcolormap={},j._treemapcolormap={},j._iciclecolormap={},j._funnelareacolormap={},ae=0;ae<ee.length;ae++)if(Array.isArray(G)&&G.indexOf(ae)===-1){fe[ae]=me[ae];continue}for(ae=0;ae<ee.length;ae++)Q=ee[ae],Q._arrayAttrs=o.findArrayAttributes(Q),Q._extremes={};var ce=j._subplots.polar||[];for(ae=0;ae<ce.length;ae++)re.push(j[ce[ae]].radialaxis,j[ce[ae]].angularaxis);for(var ye in j._colorAxes){var xe=j[ye];xe.cauto!==!1&&(delete xe.cmin,delete xe.cmax)}var ke=!1;function Ae(Ge){if(Q=ee[Ge],ne=Q._module,Q.visible===!0&&Q.transforms){if(ne&&ne.calc){var _e=ne.calc(U,Q);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(ie=0;ie<Q.transforms.length;ie++){var Ie=Q.transforms[ie];ne=A[Ie.type],ne&&ne.calcTransform&&(Q._hasCalcTransform=!0,ke=!0,ne.calcTransform(U,Q,Ie))}}}function Oe(Ge,_e){if(Q=ee[Ge],ne=Q._module,!!ne.isContainer===_e){var Ie=[];if(Q.visible===!0&&Q._length!==0){delete Q._indexToPoints;var Ye=Q.transforms||[];for(ie=Ye.length-1;ie>=0;ie--)if(Ye[ie].enabled){Q._indexToPoints=Ye[ie]._indexToPoints;break}ne&&ne.calc&&(Ie=ne.calc(U,Q))}(!Array.isArray(Ie)||!Ie[0])&&(Ie=[{x:u,y:u}]),Ie[0].t||(Ie[0].t={}),Ie[0].trace=Q,fe[Ge]=Ie}}for(ue(re,ee,j),ae=0;ae<ee.length;ae++)Oe(ae,!0);for(ae=0;ae<ee.length;ae++)Ae(ae);for(ke&&ue(re,ee,j),ae=0;ae<ee.length;ae++)Oe(ae,!0);for(ae=0;ae<ee.length;ae++)Oe(ae,!1);oe(U);var He=se(re,U);if(He.length){for(j._numBoxes=0,j._numViolins=0,ae=0;ae<He.length;ae++)Oe(He[ae],!0);for(ae=0;ae<He.length;ae++)Oe(He[ae],!1);oe(U)}e.getComponentMethod("fx","calc")(U),e.getComponentMethod("errorbars","calc")(U)};var K=/(total|sum|min|max|mean|median) (ascending|descending)/;function se(U,G){var re=[],ee,j,Q,ne,ae;function ie(Lt,Mt,it){var ht=Mt._id.charAt(0);if(Lt==="histogram2dcontour"){var Qe=Mt._counterAxes[0],Ce=s.getFromId(G,Qe),je=ht==="x"||Qe==="x"&&Ce.type==="category",rt=ht==="y"||Qe==="y"&&Ce.type==="category";return function(ut,Pt){return ut===0||Pt===0||je&&ut===it[Pt].length-1||rt&&Pt===it.length-1?-1:(ht==="y"?Pt:ut)-1}}else return function(ut,Pt){return ht==="y"?Pt:ut}}var fe={min:function(Lt){return n.aggNums(Math.min,null,Lt)},max:function(Lt){return n.aggNums(Math.max,null,Lt)},sum:function(Lt){return n.aggNums(function(Mt,it){return Mt+it},null,Lt)},total:function(Lt){return n.aggNums(function(Mt,it){return Mt+it},null,Lt)},mean:function(Lt){return n.mean(Lt)},median:function(Lt){return n.median(Lt)}};for(ee=0;ee<U.length;ee++){var me=U[ee];if(me.type==="category"){var ce=me.categoryorder.match(K);if(ce){var ye=ce[1],xe=ce[2],ke=me._id.charAt(0),Ae=ke==="x",Oe=[];for(j=0;j<me._categories.length;j++)Oe.push([me._categories[j],[]]);for(j=0;j<me._traceIndices.length;j++){var He=me._traceIndices[j],Ge=G._fullData[He];if(Ge.visible===!0){var _e=Ge.type;e.traceIs(Ge,"histogram")&&(delete Ge._xautoBinFinished,delete Ge._yautoBinFinished);var Ie=_e==="splom",Ye=_e==="scattergl",qe=G.calcdata[He];for(Q=0;Q<qe.length;Q++){var Ue=qe[Q],Re,Ve;if(Ie){var dt=Ge._axesDim[me._id];if(!Ae){var Dt=Ge._diag[dt][0];Dt&&(me=G._fullLayout[s.id2name(Dt)])}var Gt=Ue.trace.dimensions[dt].values;for(ne=0;ne<Gt.length;ne++)for(Re=me._categoriesMap[Gt[ne]],ae=0;ae<Ue.trace.dimensions.length;ae++)if(ae!==dt){var kt=Ue.trace.dimensions[ae];Oe[Re][1].push(kt.values[ne])}}else if(Ye){for(ne=0;ne<Ue.t.x.length;ne++)Ae?(Re=Ue.t.x[ne],Ve=Ue.t.y[ne]):(Re=Ue.t.y[ne],Ve=Ue.t.x[ne]),Oe[Re][1].push(Ve);Ue.t&&Ue.t._scene&&delete Ue.t._scene.dirty}else if(Ue.hasOwnProperty("z")){Ve=Ue.z;var zt=ie(Ge.type,me,Ve);for(ne=0;ne<Ve.length;ne++)for(ae=0;ae<Ve[ne].length;ae++)Re=zt(ae,ne),Re+1&&Oe[Re][1].push(Ve[ne][ae])}else for(Re=Ue.p,Re===void 0&&(Re=Ue[ke]),Ve=Ue.s,Ve===void 0&&(Ve=Ue.v),Ve===void 0&&(Ve=Ae?Ue.y:Ue.x),Array.isArray(Ve)||(Ve===void 0?Ve=[]:Ve=[Ve]),ne=0;ne<Ve.length;ne++)Oe[Re][1].push(Ve[ne])}}}me._categoriesValue=Oe;var Bt=[];for(j=0;j<Oe.length;j++)Bt.push([Oe[j][0],fe[ye](Oe[j][1])]);Bt.sort(function(Lt,Mt){return Lt[1]-Mt[1]}),me._categoriesAggregatedValue=Bt,me._initialCategories=Bt.map(function(Lt){return Lt[0]}),xe==="descending"&&me._initialCategories.reverse(),re=re.concat(me.sortByInitialCategories())}}}return re}function ue(U,G,re){var ee={};function j(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(G),ee[ie._id]=1}n.simpleMap(U,j);for(var Q=re._axisMatchGroups||[],ne=0;ne<Q.length;ne++)for(var ae in Q[ne])ee[ae]||j(re[s.id2name(ae)])}function oe(U){var G=U._fullLayout,re=G._visibleModules,ee={},j,Q,ne;for(Q=0;Q<re.length;Q++){var ae=re[Q],ie=ae.crossTraceCalc;if(ie){var fe=ae.basePlotModule.name;ee[fe]?n.pushUnique(ee[fe],ie):ee[fe]=[ie]}}for(ne in ee){var me=ee[ne],ce=G._subplots[ne];if(Array.isArray(ce))for(j=0;j<ce.length;j++){var ye=ce[j],xe=ne==="cartesian"?G._plots[ye]:G[ye];for(Q=0;Q<me.length;Q++)me[Q](U,xe,ye)}else for(Q=0;Q<me.length;Q++)me[Q](U)}}g.rehover=function(U){U._fullLayout._rehover&&U._fullLayout._rehover()},g.redrag=function(U){U._fullLayout._redrag&&U._fullLayout._redrag()},g.generalUpdatePerTraceModule=function(U,G,re,ee){var j=G.traceHash,Q={},ne;for(ne=0;ne<re.length;ne++){var ae=re[ne],ie=ae[0].trace;ie.visible&&(Q[ie.type]=Q[ie.type]||[],Q[ie.type].push(ae))}for(var fe in j)if(!Q[fe]){var me=j[fe][0],ce=me[0].trace;ce.visible=!1,Q[fe]=[me]}for(var ye in Q){var xe=Q[ye],ke=xe[0][0].trace._module;ke.plot(U,G,n.filterVisible(xe),ee)}G.traceHash=Q},g.plotBasePlot=function(U,G,re,ee,j){var Q=e.getModule(U),ne=p(G.calcdata,Q)[0];Q.plot(G,ne,ee,j)},g.cleanBasePlot=function(U,G,re,ee,j){var Q=j._has&&j._has(U),ne=re._has&&re._has(U);Q&&!ne&&j["_"+U+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(t,B,H){B.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/polygon").tester,b=d.findIndexOfMin,w=d.isAngleInsideSector,e=d.angleDelta,o=d.angleDist;function a(A,m,M,_,T){if(!w(m,_))return!1;var x,c;M[0]<M[1]?(x=M[0],c=M[1]):(x=M[1],c=M[0]);var L=l(i(x,_[0],_[1],T)),S=l(i(c,_[0],_[1],T)),k=[A*Math.cos(m),A*Math.sin(m)];return S.contains(k)&&!L.contains(k)}function n(A,m,M,_){var T,x,c=_[0],L=_[1],S=p(Math.sin(m)-Math.sin(A)),k=p(Math.cos(m)-Math.cos(A)),P=Math.tan(M),z=p(1/P),I=S/k,R=L-I*c;return z?S&&k?(T=R/(P-I),x=P*T):k?(T=L*z,x=L):(T=c,x=c*P):S&&k?(T=0,x=R):k?(T=0,x=L):T=x=NaN,[T,x]}function r(A,m,M,_){var T=-m*M,x=m*m+1,c=2*(m*T-M),L=T*T+M*M-A*A,S=Math.sqrt(c*c-4*x*L),k=(-c+S)/(2*x),P=(-c-S)/(2*x);return[[k,m*k+T+_],[P,m*P+T+_]]}function u(A,m){var M=m.length,_=new Array(M+1),T;for(T=0;T<M;T++){var x=m[T];_[T]=[A*Math.cos(x),A*Math.sin(x)]}return _[T]=_[0].slice(),_}function s(A,m,M,_){var T=_.length,x=[],c,L;function S(Y){return[A*Math.cos(Y),A*Math.sin(Y)]}function k(Y,X,q){return n(Y,X,q,S(Y))}function P(Y){return d.mod(Y,T)}function z(Y){return w(Y,[m,M])}var I=b(_,function(Y){return z(Y)?o(Y,m):1/0}),R=k(_[I],_[P(I-1)],m);for(x.push(R),c=I,L=0;L<T;c++,L++){var D=_[P(c)];if(!z(D))break;x.push(S(D))}var O=b(_,function(Y){return z(Y)?o(Y,M):1/0}),F=k(_[O],_[P(O+1)],M);return x.push(F),x.push([0,0]),x.push(x[0].slice()),x}function i(A,m,M,_){return d.isFullCircle([m,M])?u(A,_):s(A,m,M,_)}function f(A,m,M,_){for(var T=1/0,x=1/0,c=i(A,m,M,_),L=0;L<c.length;L++){var S=c[L];T=Math.min(T,S[0]),x=Math.min(x,-S[1])}return[T,x]}function h(A,m){var M=function(x){var c=e(x,A);return c>0?c:1/0},_=b(m,M),T=d.mod(_+1,m.length);return[m[_],m[T]]}function p(A){return Math.abs(A)>1e-10?A:0}function v(A,m,M){m=m||0,M=M||0;for(var _=A.length,T=new Array(_),x=0;x<_;x++){var c=A[x];T[x]=[m+c[0],M-c[1]]}return T}function y(A,m,M,_,T,x){var c=i(A,m,M,_);return"M"+v(c,T,x).join("L")}function g(A,m,M,_,T,x,c){var L,S;A<m?(L=A,S=m):(L=m,S=A);var k=v(i(L,M,_,T),x,c),P=v(i(S,M,_,T),x,c);return"M"+P.reverse().join("L")+"M"+k.join("L")}B.exports={isPtInsidePolygon:a,findPolygonOffset:f,findEnclosingVertexAngles:h,findIntersectionXY:n,findXYatLength:r,clampTiny:p,pathPolygon:y,pathPolygonAnnulus:g}},{"../../lib":503,"../../lib/polygon":515}],622:[function(t,B,H){var d=t("../get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("./polar"),w=t("./constants"),e=w.attr,o=w.name,a=l(o),n={};n[e]={valType:"subplotid",dflt:o,editType:"calc"};function r(s){for(var i=s._fullLayout,f=s.calcdata,h=i._subplots[o],p=0;p<h.length;p++){var v=h[p],y=d(f,o,v),g=i[v]._subplot;g||(g=b(s,v),i[v]._subplot=g),g.plot(y,i,s._promises)}}function u(s,i,f,h){for(var p=h._subplots[o]||[],v=h._has&&h._has("gl"),y=i._has&&i._has("gl"),g=v&&!y,A=0;A<p.length;A++){var m=p[A],M=h[m]._subplot;if(!i[m]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var _ in M.clipPaths)M.clipPaths[_].remove()}g&&M._scene&&(M._scene.destroy(),M._scene=null)}}B.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:u,toSVG:t("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../cartesian/layout_attributes"),b=t("../domain").attributes,w=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,o=e({color:l.color,showline:w({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:w({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth},"plot","from-root"),a=e({tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,layer:l.layer},"plot","from-root"),n={visible:w({},l.visible,{dflt:!0}),type:w({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:w({},l.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:w({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:l.categoryorder,categoryarray:l.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:w({},l.title.text,{editType:"plot",dflt:""}),font:w({},l.title.font,{editType:"plot"}),editType:"plot"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}};w(n,o,a);var r={visible:w({},l.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:l.autotypenumbers,categoryorder:l.categoryorder,categoryarray:l.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};w(r,o,a),B.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../plot_api/plot_template"),w=t("../subplot_defaults"),e=t("../get_data").getSubplotData,o=t("../cartesian/tick_value_defaults"),a=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_label_defaults"),r=t("../cartesian/prefix_suffix_defaults"),u=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),i=t("../cartesian/axis_autotype"),f=t("./layout_attributes"),h=t("./set_convert"),p=t("./constants"),v=p.axisNames;function y(A,m,M,_){var T=M("bgcolor");_.bgColor=l.combine(T,_.paper_bgcolor);var x=M("sector");M("hole");var c=e(_.fullData,p.name,_.id),L=_.layoutOut,S;function k(ue,oe){return M(S+"."+ue,oe)}for(var P=0;P<v.length;P++){S=v[P],d.isPlainObject(A[S])||(A[S]={});var z=A[S],I=b.newContainer(m,S);I._id=I._name=S,I._attr=_.id+"."+S,I._traceIndices=c.map(function(ue){return ue._expandedIndex});var R=p.axisName2dataArray[S],D=g(z,I,k,c,R,_);u(z,I,k,{axData:c,dataAttr:R});var O=k("visible");switch(h(I,m,L),k("uirevision",m.uirevision),I._m=1,S){case"radialaxis":var F=k("autorange",!I.isValidRange(z.range));z.autorange=F,F&&(D==="linear"||D==="-")&&k("rangemode"),F==="reversed"&&(I._m=-1),k("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(D==="date"){d.log("Polar plots do not support date angular axes yet.");for(var Y=0;Y<c.length;Y++)c[Y].visible=!1;D=z.type=I.type="linear"}k(D==="linear"?"thetaunit":"period");var X=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[X]);break}if(r(z,I,k,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var q,$,V,K,se=_.font||{};q=k("color"),$=q===z.color?q:se.color,V=se.size,K=se.family,o(z,I,k,I.type),n(z,I,k,I.type,{font:{color:$,size:V,family:K}}),a(z,I,k,{outerTicks:!0}),s(z,I,k,{dfltColor:q,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",x[0]),k("title.text"),d.coerceFont(k,"title.font",{color:$,size:d.bigFont(V),family:K}))}D!=="category"&&k("hoverformat"),I._input=z}m.angularaxis.type==="category"&&M("gridshape")}function g(A,m,M,_,T,x){var c=M("autotypenumbers",x.autotypenumbersDflt),L=M("type");if(L==="-"){for(var S,k=0;k<_.length;k++)if(_[k].visible){S=_[k];break}S&&S[T]&&(m.type=i(S[T],"gregorian",{noMultiCategory:!0,autotypenumbers:c})),m.type==="-"?m.type="linear":A.type=m.type}return m.type}B.exports=function(m,M,_){w(m,M,_,{type:p.name,attributes:f,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:_,layoutOut:M})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../lib"),e=w.strRotate,o=w.strTranslate,a=t("../../components/color"),n=t("../../components/drawing"),r=t("../plots"),u=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),i=t("./set_convert"),f=t("../cartesian/autorange").doAutoRange,h=t("../cartesian/dragbox"),p=t("../../components/dragelement"),v=t("../../components/fx"),y=t("../../components/titles"),g=t("../cartesian/select").prepSelect,A=t("../cartesian/select").selectOnClick,m=t("../cartesian/select").clearSelect,M=t("../../lib/setcursor"),_=t("../../lib/clear_gl_canvases"),T=t("../../plot_api/subroutines").redrawReglTraces,x=t("../../constants/alignment").MID_SHIFT,c=t("./constants"),L=t("./helpers"),S=t("../smith/helpers"),k=S.smith,P=S.reactanceArc,z=S.resistanceArc,I=S.smithTransform,R=w._,D=w.mod,O=w.deg2rad,F=w.rad2deg;function Y(se,ue,oe){this.isSmith=oe||!1,this.id=ue,this.gd=se,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=se._fullLayout,G="clip"+U._uid+ue;this.clipIds.forTraces=G+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",ue),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=Y.prototype;B.exports=function(ue,oe,U){return new Y(ue,oe,U)},X.plot=function(se,ue){for(var oe=this,U=ue[oe.id],G=!1,re=0;re<se.length;re++){var ee=se[re][0].trace;if(ee.cliponaxis===!1){G=!0;break}}oe._hasClipOnAxisFalse=G,oe.updateLayers(ue,U),oe.updateLayout(ue,U),r.generalUpdatePerTraceModule(oe.gd,oe,se,U),oe.updateFx(ue,U),oe.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},X.updateLayers=function(se,ue){var oe=this,U=oe.isSmith,G=oe.layers,re=oe.getRadial(ue),ee=oe.getAngular(ue),j=c.layerNames,Q=j.indexOf("frontplot"),ne=j.slice(0,Q),ae=ee.layer==="below traces",ie=re.layer==="below traces";ae&&ne.push("angular-line"),ie&&ne.push("radial-line"),ae&&ne.push("angular-axis"),ie&&ne.push("radial-axis"),ne.push("frontplot"),ae||ne.push("angular-line"),ie||ne.push("radial-line"),ae||ne.push("angular-axis"),ie||ne.push("radial-axis");var fe=(U?"smith":"polar")+"sublayer",me=oe.framework.selectAll("."+fe).data(ne,String);me.enter().append("g").attr("class",function(ce){return fe+" "+ce}).each(function(ce){var ye=G[ce]=d.select(this);switch(ce){case"frontplot":U||ye.append("g").classed("barlayer",!0),ye.append("g").classed("scatterlayer",!0);break;case"backplot":ye.append("g").classed("maplayer",!0);break;case"plotbg":G.bg=ye.append("path");break;case"radial-grid":ye.style("fill","none");break;case"angular-grid":ye.style("fill","none");break;case"radial-line":ye.append("line").style("fill","none");break;case"angular-line":ye.append("path").style("fill","none");break}}),me.order()},X.updateLayout=function(se,ue){var oe=this,U=oe.layers,G=se._size,re=oe.getRadial(ue),ee=oe.getAngular(ue),j=ue.domain.x,Q=ue.domain.y;oe.xOffset=G.l+G.w*j[0],oe.yOffset=G.t+G.h*(1-Q[1]);var ne=oe.xLength=G.w*(j[1]-j[0]),ae=oe.yLength=G.h*(Q[1]-Q[0]),ie=oe.getSector(ue);oe.sectorInRad=ie.map(O);var fe=oe.sectorBBox=$(ie),me=fe[2]-fe[0],ce=fe[3]-fe[1],ye=ae/ne,xe=Math.abs(ce/me),ke,Ae,Oe,He,Ge;ye>xe?(ke=ne,Ae=ne*xe,Ge=(ae-Ae)/G.h/2,Oe=[j[0],j[1]],He=[Q[0]+Ge,Q[1]-Ge]):(ke=ae/xe,Ae=ae,Ge=(ne-ke)/G.w/2,Oe=[j[0]+Ge,j[1]-Ge],He=[Q[0],Q[1]]),oe.xLength2=ke,oe.yLength2=Ae,oe.xDomain2=Oe,oe.yDomain2=He;var _e=oe.xOffset2=G.l+G.w*Oe[0],Ie=oe.yOffset2=G.t+G.h*(1-He[1]),Ye=oe.radius=ke/me,qe=oe.innerRadius=oe.getHole(ue)*Ye,Ue=oe.cx=_e-Ye*fe[0],Re=oe.cy=Ie+Ye*fe[3],Ve=oe.cxx=Ue-_e,dt=oe.cyy=Re-Ie,Dt=re.side,Gt;Dt==="counterclockwise"?(Gt=Dt,Dt="top"):Dt==="clockwise"&&(Gt=Dt,Dt="bottom"),oe.radialAxis=oe.mockAxis(se,ue,re,{_id:"x",side:Dt,_trueSide:Gt,domain:[qe/G.w,Ye/G.w]}),oe.angularAxis=oe.mockAxis(se,ue,ee,{side:"right",domain:[0,Math.PI],autorange:!1}),oe.doAutoRange(se,ue),oe.updateAngularAxis(se,ue),oe.updateRadialAxis(se,ue),oe.updateRadialAxisTitle(se,ue),oe.xaxis=oe.mockCartesianAxis(se,ue,{_id:"x",domain:Oe}),oe.yaxis=oe.mockCartesianAxis(se,ue,{_id:"y",domain:He});var kt=oe.pathSubplot();oe.clipPaths.forTraces.select("path").attr("d",kt).attr("transform",o(Ve,dt)),U.frontplot.attr("transform",o(_e,Ie)).call(n.setClipUrl,oe._hasClipOnAxisFalse?null:oe.clipIds.forTraces,oe.gd),U.bg.attr("d",kt).attr("transform",o(Ue,Re)).call(a.fill,ue.bgcolor)},X.mockAxis=function(se,ue,oe,U){var G=w.extendFlat({},oe,U);return i(G,ue,se),G},X.mockCartesianAxis=function(se,ue,oe){var U=this,G=U.isSmith,re=oe._id,ee=w.extendFlat({type:"linear"},oe);s(ee,se);var j={x:[0,2],y:[1,3]};return ee.setRange=function(){var Q=U.sectorBBox,ne=j[re],ae=U.radialAxis._rl,ie=(ae[1]-ae[0])/(1-U.getHole(ue));ee.range=[Q[ne[0]]*ie,Q[ne[1]]*ie]},ee.isPtWithinRange=re==="x"&&!G?function(Q){return U.isPtInside(Q)}:function(){return!0},ee.setRange(),ee.setScale(),ee},X.doAutoRange=function(se,ue){var oe=this,U=oe.gd,G=oe.radialAxis,re=oe.getRadial(ue);f(U,G);var ee=G.range;re.range=ee.slice(),re._input.range=ee.slice(),G._rl=[G.r2l(ee[0],null,"gregorian"),G.r2l(ee[1],null,"gregorian")]},X.updateRadialAxis=function(se,ue){var oe=this,U=oe.gd,G=oe.layers,re=oe.radius,ee=oe.innerRadius,j=oe.cx,Q=oe.cy,ne=oe.getRadial(ue),ae=D(oe.getSector(ue)[0],360),ie=oe.radialAxis,fe=ee<re,me=oe.isSmith;me||(oe.fillViewInitialKey("radialaxis.angle",ne.angle),oe.fillViewInitialKey("radialaxis.range",ie.range.slice()),ie.setGeometry()),ie.tickangle==="auto"&&ae>90&&ae<=270&&(ie.tickangle=180);var ce=me?function(Ye){var qe=I(oe,k([Ye.x,0]));return o(qe[0]-j,qe[1]-Q)}:function(Ye){return o(ie.l2p(Ye.x)+ee,0)},ye=me?function(Ye){return z(oe,Ye.x,-1/0,1/0)}:function(Ye){return oe.pathArc(ie.r2p(Ye.x)+ee)},xe=q(ne);if(oe.radialTickLayout!==xe&&(G["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=xe),fe){ie.setScale();var ke=0,Ae=me?(ie.tickvals||[]).filter(function(Ye){return Ye>=0}).map(function(Ye){return u.tickText(ie,Ye,!0,!1)}):u.calcTicks(ie),Oe=me?Ae:u.clipEnds(ie,Ae),He=u.getTickSigns(ie)[2];me&&((ie.ticks==="top"&&ie.side==="bottom"||ie.ticks==="bottom"&&ie.side==="top")&&(He=-He),ie.ticks==="top"&&ie.side==="top"&&(ke=-ie.ticklen),ie.ticks==="bottom"&&ie.side==="bottom"&&(ke=ie.ticklen)),u.drawTicks(U,ie,{vals:Ae,layer:G["radial-axis"],path:u.makeTickPath(ie,0,He),transFn:ce,crisp:!1}),u.drawGrid(U,ie,{vals:Oe,layer:G["radial-grid"],path:ye,transFn:w.noop,crisp:!1}),u.drawLabels(U,ie,{vals:Ae,layer:G["radial-axis"],transFn:ce,labelFns:u.makeLabelFns(ie,ke)})}var Ge=oe.radialAxisAngle=oe.vangles?F(V(O(ne.angle),oe.vangles)):ne.angle,_e=o(j,Q),Ie=_e+e(-Ge);K(G["radial-axis"],fe&&(ne.showticklabels||ne.ticks),{transform:Ie}),K(G["radial-grid"],fe&&ne.showgrid,{transform:me?"":_e}),K(G["radial-line"].select("line"),fe&&ne.showline,{x1:me?-re:ee,y1:0,x2:re,y2:0,transform:Ie}).attr("stroke-width",ne.linewidth).call(a.stroke,ne.linecolor)},X.updateRadialAxisTitle=function(se,ue,oe){if(!this.isSmith){var U=this,G=U.gd,re=U.radius,ee=U.cx,j=U.cy,Q=U.getRadial(ue),ne=U.id+"title",ae=0;if(Q.title){var ie=n.bBox(U.layers["radial-axis"].node()).height,fe=Q.title.font.size,me=Q.side;ae=me==="top"?fe:me==="counterclockwise"?-(ie+fe*.4):ie+fe*.8}var ce=oe!==void 0?oe:U.radialAxisAngle,ye=O(ce),xe=Math.cos(ye),ke=Math.sin(ye),Ae=ee+re/2*xe+ae*ke,Oe=j-re/2*ke+ae*xe;U.layers["radial-axis-title"]=y.draw(G,ne,{propContainer:Q,propName:U.id+".radialaxis.title",placeholder:R(G,"Click to enter radial axis title"),attributes:{x:Ae,y:Oe,"text-anchor":"middle"},transform:{rotate:-ce}})}},X.updateAngularAxis=function(se,ue){var oe=this,U=oe.gd,G=oe.layers,re=oe.radius,ee=oe.innerRadius,j=oe.cx,Q=oe.cy,ne=oe.getAngular(ue),ae=oe.angularAxis,ie=oe.isSmith;ie||(oe.fillViewInitialKey("angularaxis.rotation",ne.rotation),ae.setGeometry(),ae.setScale());var fe=ie?function(qe){var Ue=I(oe,k([0,qe.x]));return Math.atan2(Ue[0]-j,Ue[1]-Q)-Math.PI/2}:function(qe){return ae.t2g(qe.x)};ae.type==="linear"&&ae.thetaunit==="radians"&&(ae.tick0=F(ae.tick0),ae.dtick=F(ae.dtick));var me=function(qe){return o(j+re*Math.cos(qe),Q-re*Math.sin(qe))},ce=ie?function(qe){var Ue=I(oe,k([0,qe.x]));return o(Ue[0],Ue[1])}:function(qe){return me(fe(qe))},ye=ie?function(qe){var Ue=I(oe,k([0,qe.x])),Re=Math.atan2(Ue[0]-j,Ue[1]-Q)-Math.PI/2;return o(Ue[0],Ue[1])+e(-F(Re))}:function(qe){var Ue=fe(qe);return me(Ue)+e(-F(Ue))},xe=ie?function(qe){return P(oe,qe.x,0,1/0)}:function(qe){var Ue=fe(qe),Re=Math.cos(Ue),Ve=Math.sin(Ue);return"M"+[j+ee*Re,Q-ee*Ve]+"L"+[j+re*Re,Q-re*Ve]},ke=u.makeLabelFns(ae,0),Ae=ke.labelStandoff,Oe={};Oe.xFn=function(qe){var Ue=fe(qe);return Math.cos(Ue)*Ae},Oe.yFn=function(qe){var Ue=fe(qe),Re=Math.sin(Ue)>0?.2:1;return-Math.sin(Ue)*(Ae+qe.fontSize*Re)+Math.abs(Math.cos(Ue))*(qe.fontSize*x)},Oe.anchorFn=function(qe){var Ue=fe(qe),Re=Math.cos(Ue);return Math.abs(Re)<.1?"middle":Re>0?"start":"end"},Oe.heightFn=function(qe,Ue,Re){var Ve=fe(qe);return-.5*(1+Math.sin(Ve))*Re};var He=q(ne);oe.angularTickLayout!==He&&(G["angular-axis"].selectAll("."+ae._id+"tick").remove(),oe.angularTickLayout=He);var Ge=ie?[1/0].concat(ae.tickvals||[]).map(function(qe){return u.tickText(ae,qe,!0,!1)}):u.calcTicks(ae);ie&&(Ge[0].text="\u221E",Ge[0].fontSize*=1.75);var _e;if(ue.gridshape==="linear"?(_e=Ge.map(fe),w.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,oe.vangles=_e,ae.type==="category"&&(Ge=Ge.filter(function(qe){return w.isAngleInsideSector(fe(qe),oe.sectorInRad)})),ae.visible){var Ie=ae.ticks==="inside"?-1:1,Ye=(ae.linewidth||1)/2;u.drawTicks(U,ae,{vals:Ge,layer:G["angular-axis"],path:"M"+Ie*Ye+",0h"+Ie*ae.ticklen,transFn:ye,crisp:!1}),u.drawGrid(U,ae,{vals:Ge,layer:G["angular-grid"],path:xe,transFn:w.noop,crisp:!1}),u.drawLabels(U,ae,{vals:Ge,layer:G["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Oe})}K(G["angular-line"].select("path"),ne.showline,{d:oe.pathSubplot(),transform:o(j,Q)}).attr("stroke-width",ne.linewidth).call(a.stroke,ne.linecolor)},X.updateFx=function(se,ue){if(!this.gd._context.staticPlot){var oe=!this.isSmith;oe&&(this.updateAngularDrag(se),this.updateRadialDrag(se,ue,0),this.updateRadialDrag(se,ue,1)),this.updateHoverAndMainDrag(se)}},X.updateHoverAndMainDrag=function(se){var ue=this,oe=ue.isSmith,U=ue.gd,G=ue.layers,re=se._zoomlayer,ee=c.MINZOOM,j=c.OFFEDGE,Q=ue.radius,ne=ue.innerRadius,ae=ue.cx,ie=ue.cy,fe=ue.cxx,me=ue.cyy,ce=ue.sectorInRad,ye=ue.vangles,xe=ue.radialAxis,ke=L.clampTiny,Ae=L.findXYatLength,Oe=L.findEnclosingVertexAngles,He=c.cornerHalfWidth,Ge=c.cornerLen/2,_e,Ie,Ye=h.makeDragger(G,"path","maindrag","crosshair");d.select(Ye).attr("d",ue.pathSubplot()).attr("transform",o(ae,ie)),Ye.onmousemove=function(Je){v.hover(U,Je,ue.id),U._fullLayout._lasthover=Ye,U._fullLayout._hoversubplot=ue.id},Ye.onmouseout=function(Je){U._dragging||p.unhover(U,Je)};var qe={element:Ye,gd:U,subplot:ue.id,plotinfo:{id:ue.id,xaxis:ue.xaxis,yaxis:ue.yaxis},xaxes:[ue.xaxis],yaxes:[ue.yaxis]},Ue,Re,Ve,dt,Dt,Gt,kt,zt,Bt;function Lt(Je,gt){return Math.sqrt(Je*Je+gt*gt)}function Mt(Je,gt){return Lt(Je-fe,gt-me)}function it(Je,gt){return Math.atan2(me-gt,Je-fe)}function ht(Je,gt){return[Je*Math.cos(gt),Je*Math.sin(-gt)]}function Qe(Je,gt){if(Je===0)return ue.pathSector(2*He);var Et=Ge/Je,rr=gt-Et,vr=gt+Et,or=Math.max(0,Math.min(Je,Q)),dr=or-He,Lr=or+He;return"M"+ht(dr,rr)+"A"+[dr,dr]+" 0,0,0 "+ht(dr,vr)+"L"+ht(Lr,vr)+"A"+[Lr,Lr]+" 0,0,1 "+ht(Lr,rr)+"Z"}function Ce(Je,gt,Et){if(Je===0)return ue.pathSector(2*He);var rr=ht(Je,gt),vr=ht(Je,Et),or=ke((rr[0]+vr[0])/2),dr=ke((rr[1]+vr[1])/2),Lr,kr;if(or&&dr){var tr=dr/or,Or=-1/tr,et=Ae(He,tr,or,dr);Lr=Ae(Ge,Or,et[0][0],et[0][1]),kr=Ae(Ge,Or,et[1][0],et[1][1])}else{var we,Se;dr?(we=Ge,Se=He):(we=He,Se=Ge),Lr=[[or-we,dr-Se],[or+we,dr-Se]],kr=[[or-we,dr+Se],[or+we,dr+Se]]}return"M"+Lr.join("L")+"L"+kr.reverse().join("L")+"Z"}function je(){Ve=null,dt=null,Dt=ue.pathSubplot(),Gt=!1;var Je=U._fullLayout[ue.id];kt=l(Je.bgcolor).getLuminance(),zt=h.makeZoombox(re,kt,ae,ie,Dt),zt.attr("fill-rule","evenodd"),Bt=h.makeCorners(re,ae,ie),m(U)}function rt(Je,gt){return gt=Math.max(Math.min(gt,Q),ne),Je<j?Je=0:Q-Je<j?Je=Q:gt<j?gt=0:Q-gt<j&&(gt=Q),Math.abs(gt-Je)>ee?(Je<gt?(Ve=Je,dt=gt):(Ve=gt,dt=Je),!0):(Ve=null,dt=null,!1)}function ut(Je,gt){Je=Je||Dt,gt=gt||"M0,0Z",zt.attr("d",Je),Bt.attr("d",gt),h.transitionZoombox(zt,Bt,Gt,kt),Gt=!0;var Et={};Ot(Et),U.emit("plotly_relayouting",Et)}function Pt(Je,gt){Je=Je*_e,gt=gt*Ie;var Et=Ue+Je,rr=Re+gt,vr=Mt(Ue,Re),or=Math.min(Mt(Et,rr),Q),dr=it(Ue,Re),Lr,kr;rt(vr,or)&&(Lr=Dt+ue.pathSector(dt),Ve&&(Lr+=ue.pathSector(Ve)),kr=Qe(Ve,dr)+Qe(dt,dr)),ut(Lr,kr)}function St(Je,gt,Et,rr){var vr=L.findIntersectionXY(Et,rr,Et,[Je-fe,me-gt]);return Lt(vr[0],vr[1])}function Nt(Je,gt){var Et=Ue+Je,rr=Re+gt,vr=it(Ue,Re),or=it(Et,rr),dr=Oe(vr,ye),Lr=Oe(or,ye),kr=St(Ue,Re,dr[0],dr[1]),tr=Math.min(St(Et,rr,Lr[0],Lr[1]),Q),Or,et;rt(kr,tr)&&(Or=Dt+ue.pathSector(dt),Ve&&(Or+=ue.pathSector(Ve)),et=[Ce(Ve,dr[0],dr[1]),Ce(dt,dr[0],dr[1])].join(" ")),ut(Or,et)}function Xt(){if(h.removeZoombox(U),!(Ve===null||dt===null)){var Je={};Ot(Je),h.showDoubleClickNotifier(U),b.call("_guiRelayout",U,Je)}}function Ot(Je){var gt=xe._rl,Et=(gt[1]-gt[0])/(1-ne/Q)/Q,rr=[gt[0]+(Ve-ne)*Et,gt[0]+(dt-ne)*Et];Je[ue.id+".radialaxis.range"]=rr}function Kt(Je,gt){var Et=U._fullLayout.clickmode;if(h.removeZoombox(U),Je===2){var rr={};for(var vr in ue.viewInitial)rr[ue.id+"."+vr]=ue.viewInitial[vr];U.emit("plotly_doubleclick",null),b.call("_guiRelayout",U,rr)}Et.indexOf("select")>-1&&Je===1&&A(gt,U,[ue.xaxis],[ue.yaxis],ue.id,qe),Et.indexOf("event")>-1&&v.click(U,gt,ue.id)}qe.prepFn=function(Je,gt,Et){var rr=U._fullLayout.dragmode,vr=Ye.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var or=U._fullLayout._invTransform;_e=U._fullLayout._invScaleX,Ie=U._fullLayout._invScaleY;var dr=w.apply3DTransform(or)(gt-vr.left,Et-vr.top);if(Ue=dr[0],Re=dr[1],ye){var Lr=L.findPolygonOffset(Q,ce[0],ce[1],ye);Ue+=fe+Lr[0],Re+=me+Lr[1]}switch(rr){case"zoom":qe.clickFn=Kt,oe||(ye?qe.moveFn=Nt:qe.moveFn=Pt,qe.doneFn=Xt,je());break;case"select":case"lasso":g(Je,gt,Et,qe,rr);break}},p.init(qe)},X.updateRadialDrag=function(se,ue,oe){var U=this,G=U.gd,re=U.layers,ee=U.radius,j=U.innerRadius,Q=U.cx,ne=U.cy,ae=U.radialAxis,ie=c.radialDragBoxSize,fe=ie/2;if(!ae.visible)return;var me=O(U.radialAxisAngle),ce=ae._rl,ye=ce[0],xe=ce[1],ke=ce[oe],Ae=.75*(ce[1]-ce[0])/(1-U.getHole(ue))/ee,Oe,He,Ge;oe?(Oe=Q+(ee+fe)*Math.cos(me),He=ne-(ee+fe)*Math.sin(me),Ge="radialdrag"):(Oe=Q+(j-fe)*Math.cos(me),He=ne-(j-fe)*Math.sin(me),Ge="radialdrag-inner");var _e=h.makeRectDragger(re,Ge,"crosshair",-fe,-fe,ie,ie),Ie={element:_e,gd:G};K(d.select(_e),ae.visible&&j<ee,{transform:o(Oe,He)});var Ye,qe,Ue;function Re(kt,zt){if(Ye)Ye(kt,zt);else{var Bt=[kt,-zt],Lt=[Math.cos(me),Math.sin(me)],Mt=Math.abs(w.dot(Bt,Lt)/Math.sqrt(w.dot(Bt,Bt)));isNaN(Mt)||(Ye=Mt<.5?Dt:Gt)}var it={};Ve(it),G.emit("plotly_relayouting",it)}function Ve(kt){qe!==null?kt[U.id+".radialaxis.angle"]=qe:Ue!==null&&(kt[U.id+".radialaxis.range["+oe+"]"]=Ue)}function dt(){qe!==null?b.call("_guiRelayout",G,U.id+".radialaxis.angle",qe):Ue!==null&&b.call("_guiRelayout",G,U.id+".radialaxis.range["+oe+"]",Ue)}function Dt(kt,zt){if(oe!==0){var Bt=Oe+kt,Lt=He+zt;qe=Math.atan2(ne-Lt,Bt-Q),U.vangles&&(qe=V(qe,U.vangles)),qe=F(qe);var Mt=o(Q,ne)+e(-qe);re["radial-axis"].attr("transform",Mt),re["radial-line"].select("line").attr("transform",Mt);var it=U.gd._fullLayout,ht=it[U.id];U.updateRadialAxisTitle(it,ht,qe)}}function Gt(kt,zt){var Bt=w.dot([kt,-zt],[Math.cos(me),Math.sin(me)]);if(Ue=ke-Ae*Bt,Ae>0!=(oe?Ue>ye:Ue<xe)){Ue=null;return}var Lt=G._fullLayout,Mt=Lt[U.id];ae.range[oe]=Ue,ae._rl[oe]=Ue,U.updateRadialAxis(Lt,Mt),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var it=!1;for(var ht in U.traceHash){var Qe=U.traceHash[ht],Ce=w.filterVisible(Qe),je=Qe[0][0].trace._module;je.plot(G,U,Ce,Mt),b.traceIs(ht,"gl")&&Ce.length&&(it=!0)}it&&(_(G),T(G))}Ie.prepFn=function(){Ye=null,qe=null,Ue=null,Ie.moveFn=Re,Ie.doneFn=dt,m(G)},Ie.clampFn=function(kt,zt){return Math.sqrt(kt*kt+zt*zt)<c.MINDRAG&&(kt=0,zt=0),[kt,zt]},p.init(Ie)},X.updateAngularDrag=function(se){var ue=this,oe=ue.gd,U=ue.layers,G=ue.radius,re=ue.angularAxis,ee=ue.cx,j=ue.cy,Q=ue.cxx,ne=ue.cyy,ae=c.angularDragBoxSize,ie=h.makeDragger(U,"path","angulardrag","move"),fe={element:ie,gd:oe};d.select(ie).attr("d",ue.pathAnnulus(G,G+ae)).attr("transform",o(ee,j)).call(M,"move");function me(Ue,Re){return Math.atan2(ne+ae-Re,Ue-Q-ae)}var ce=U.frontplot.select(".scatterlayer").selectAll(".trace"),ye=ce.selectAll(".point"),xe=ce.selectAll(".textpoint"),ke,Ae,Oe,He,Ge,_e;function Ie(Ue,Re){var Ve=ue.gd._fullLayout,dt=Ve[ue.id],Dt=ke+Ue*se._invScaleX,Gt=Ae+Re*se._invScaleY,kt=me(Dt,Gt),zt=F(kt-_e);if(He=Oe+zt,U.frontplot.attr("transform",o(ue.xOffset2,ue.yOffset2)+e([-zt,Q,ne])),ue.vangles){Ge=ue.radialAxisAngle+zt;var Bt=o(ee,j)+e(-zt),Lt=o(ee,j)+e(-Ge);U.bg.attr("transform",Bt),U["radial-grid"].attr("transform",Bt),U["radial-axis"].attr("transform",Lt),U["radial-line"].select("line").attr("transform",Lt),ue.updateRadialAxisTitle(Ve,dt,Ge)}else ue.clipPaths.forTraces.select("path").attr("transform",o(Q,ne)+e(zt));ye.each(function(){var rt=d.select(this),ut=n.getTranslate(rt);rt.attr("transform",o(ut.x,ut.y)+e([zt]))}),xe.each(function(){var rt=d.select(this),ut=rt.select("text"),Pt=n.getTranslate(rt);rt.attr("transform",e([zt,ut.attr("x"),ut.attr("y")])+o(Pt.x,Pt.y))}),re.rotation=w.modHalf(He,360),ue.updateAngularAxis(Ve,dt),ue._hasClipOnAxisFalse&&!w.isFullCircle(ue.sectorInRad)&&ce.call(n.hideOutsideRangePoints,ue);var Mt=!1;for(var it in ue.traceHash)if(b.traceIs(it,"gl")){var ht=ue.traceHash[it],Qe=w.filterVisible(ht),Ce=ht[0][0].trace._module;Ce.plot(oe,ue,Qe,dt),Qe.length&&(Mt=!0)}Mt&&(_(oe),T(oe));var je={};Ye(je),oe.emit("plotly_relayouting",je)}function Ye(Ue){Ue[ue.id+".angularaxis.rotation"]=He,ue.vangles&&(Ue[ue.id+".radialaxis.angle"]=Ge)}function qe(){xe.select("text").attr("transform",null);var Ue={};Ye(Ue),b.call("_guiRelayout",oe,Ue)}fe.prepFn=function(Ue,Re,Ve){var dt=se[ue.id];Oe=dt.angularaxis.rotation;var Dt=ie.getBoundingClientRect();ke=Re-Dt.left,Ae=Ve-Dt.top,oe._fullLayout._calcInverseTransform(oe);var Gt=w.apply3DTransform(se._invTransform)(ke,Ae);ke=Gt[0],Ae=Gt[1],_e=me(ke,Ae),fe.moveFn=Ie,fe.doneFn=qe,m(oe)},ue.vangles&&!w.isFullCircle(ue.sectorInRad)&&(fe.prepFn=w.noop,M(d.select(ie),null)),p.init(fe)},X.isPtInside=function(se){if(this.isSmith)return!0;var ue=this.sectorInRad,oe=this.vangles,U=this.angularAxis.c2g(se.theta),G=this.radialAxis,re=G.c2l(se.r),ee=G._rl,j=oe?L.isPtInsidePolygon:w.isPtInsideSector;return j(re,U,ee,ue,oe)},X.pathArc=function(se){var ue=this.sectorInRad,oe=this.vangles,U=oe?L.pathPolygon:w.pathArc;return U(se,ue[0],ue[1],oe)},X.pathSector=function(se){var ue=this.sectorInRad,oe=this.vangles,U=oe?L.pathPolygon:w.pathSector;return U(se,ue[0],ue[1],oe)},X.pathAnnulus=function(se,ue){var oe=this.sectorInRad,U=this.vangles,G=U?L.pathPolygonAnnulus:w.pathAnnulus;return G(se,ue,oe[0],oe[1],U)},X.pathSubplot=function(){var se=this.innerRadius,ue=this.radius;return se?this.pathAnnulus(se,ue):this.pathSector(ue)},X.fillViewInitialKey=function(se,ue){se in this.viewInitial||(this.viewInitial[se]=ue)};function q(se){var ue=se.ticks+String(se.ticklen)+String(se.showticklabels);return"side"in se&&(ue+=se.side),ue}function $(se){var ue=se[0],oe=se[1],U=oe-ue,G=D(ue,360),re=G+U,ee=Math.cos(O(G)),j=Math.sin(O(G)),Q=Math.cos(O(re)),ne=Math.sin(O(re)),ae,ie,fe,me;return G<=90&&re>=90||G>90&&re>=450?me=1:j<=0&&ne<=0?me=0:me=Math.max(j,ne),G<=180&&re>=180||G>180&&re>=540?ae=-1:ee>=0&&Q>=0?ae=0:ae=Math.min(ee,Q),G<=270&&re>=270||G>270&&re>=630?ie=-1:j>=0&&ne>=0?ie=0:ie=Math.min(j,ne),re>=360?fe=1:ee<=0&&Q<=0?fe=0:fe=Math.max(ee,Q),[ae,ie,fe,me]}function V(se,ue){var oe=function(G){return w.angleDist(se,G)},U=w.findIndexOfMin(ue,oe);return ue[U]}function K(se,ue,oe){return ue?(se.attr("display",null),se.attr(oe)):se&&se.attr("display","none"),se}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(t,B,H){var d=t("../../lib"),l=t("../cartesian/set_convert"),b=d.deg2rad,w=d.rad2deg;B.exports=function(u,s,i){switch(l(u,i),u._id){case"x":case"radialaxis":e(u,s);break;case"angularaxis":n(u,s);break}};function e(r,u){var s=u._subplot;r.setGeometry=function(){var i=r._rl[0],f=r._rl[1],h=s.innerRadius,p=(s.radius-h)/(f-i),v=h/p,y=i>f?function(g){return g<=0}:function(g){return g>=0};r.c2g=function(g){var A=r.c2l(g)-i;return(y(A)?A:0)+v},r.g2c=function(g){return r.l2c(g+i-v)},r.g2p=function(g){return g*p},r.c2p=function(g){return r.g2p(r.c2g(g))}}}function o(r,u){return u==="degrees"?b(r):r}function a(r,u){return u==="degrees"?w(r):r}function n(r,u){var s=r.type;if(s==="linear"){var i=r.d2c,f=r.c2d;r.d2c=function(h,p){return o(i(h),p)},r.c2d=function(h,p){return f(a(h,p))}}r.makeCalcdata=function(h,p){var v=h[p],y=h._length,g,A,m=function(c){return r.d2c(c,h.thetaunit)};if(v){if(d.isTypedArray(v)&&s==="linear"){if(y===v.length)return v;if(v.subarray)return v.subarray(0,y)}for(g=new Array(y),A=0;A<y;A++)g[A]=m(v[A])}else{var M=p+"0",_="d"+p,T=M in h?m(h[M]):0,x=h[_]?m(h[_]):(r.period||2*Math.PI)/y;for(g=new Array(y),A=0;A<y;A++)g[A]=T+A*x}return g},r.setGeometry=function(){var h=u.sector,p=h.map(b),v={clockwise:-1,counterclockwise:1}[r.direction],y=b(r.rotation),g=function(L){return v*L+y},A=function(L){return(L-y)/v},m,M,_,T;switch(s){case"linear":M=m=d.identity,T=b,_=w,r.range=d.isFullCircle(p)?[h[0],h[0]+360]:p.map(A).map(w);break;case"category":var x=r._categories.length,c=r.period?Math.max(r.period,x):x;c===0&&(c=1),M=T=function(L){return L*2*Math.PI/c},m=_=function(L){return L*c/Math.PI/2},r.range=[0,c];break}r.c2g=function(L){return g(M(L))},r.g2c=function(L){return m(A(L))},r.t2g=function(L){return g(T(L))},r.g2t=function(L){return _(A(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(t,B,H){B.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(t,B,H){function d(a){return a<0?-1:a>0?1:0}function l(a){var n=a[0],r=a[1];if(!isFinite(n)||!isFinite(r))return[1,0];var u=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/u,2*r/u]}function b(a,n){var r=n[0],u=n[1];return[r*a.radius+a.cx,-u*a.radius+a.cy]}function w(a,n){return n*a.radius}function e(a,n,r,u){var s=b(a,l([r,n])),i=s[0],f=s[1],h=b(a,l([u,n])),p=h[0],v=h[1];if(n===0)return["M"+i+","+f,"L"+p+","+v].join(" ");var y=w(a,1/Math.abs(n));return["M"+i+","+f,"A"+y+","+y+" 0 0,"+(n<0?1:0)+" "+p+","+v].join(" ")}function o(a,n,r,u){var s=w(a,1/(n+1)),i=b(a,l([n,r])),f=i[0],h=i[1],p=b(a,l([n,u])),v=p[0],y=p[1];if(d(r)!==d(u)){var g=b(a,l([n,0])),A=g[0],m=g[1];return["M"+f+","+h,"A"+s+","+s+" 0 0,"+(0<r?0:1)+" "+A+","+m,"A"+s+","+s+" 0 0,"+(u<0?0:1)+v+","+y].join(" ")}return["M"+f+","+h,"A"+s+","+s+" 0 0,"+(u<r?0:1)+" "+v+","+y].join(" ")}B.exports={smith:l,reactanceArc:e,resistanceArc:o,smithTransform:b}},{}],629:[function(t,B,H){var d=t("../get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("../polar/polar"),w=t("./constants"),e=w.attr,o=w.name,a=l(o),n={};n[e]={valType:"subplotid",dflt:o,editType:"calc"};function r(s){for(var i=s._fullLayout,f=s.calcdata,h=i._subplots[o],p=0;p<h.length;p++){var v=h[p],y=d(f,o,v),g=i[v]._subplot;g||(g=b(s,v,!0),i[v]._subplot=g),g.plot(y,i,s._promises)}}function u(s,i,f,h){for(var p=h._subplots[o]||[],v=0;v<p.length;v++){var y=p[v],g=h[y]._subplot;if(!i[y]&&!!g){g.framework.remove();for(var A in g.clipPaths)g.clipPaths[A].remove()}}}B.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:u,toSVG:t("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../cartesian/layout_attributes"),b=t("../domain").attributes,w=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,o=e({color:l.color,showline:w({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:w({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth},"plot","from-root"),a=e({ticklen:l.ticklen,tickwidth:w({},l.tickwidth,{dflt:2}),tickcolor:l.tickcolor,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,tickfont:l.tickfont,tickformat:l.tickformat,hoverformat:l.hoverformat,layer:l.layer},"plot","from-root"),n=w({visible:w({},l.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:w({},l.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,a),r=w({visible:w({},l.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:l.ticks,editType:"calc"},o,a);B.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:d.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../plot_api/plot_template"),w=t("../subplot_defaults"),e=t("../get_data").getSubplotData,o=t("../cartesian/prefix_suffix_defaults"),a=t("../cartesian/tick_label_defaults"),n=t("../cartesian/line_grid_defaults"),r=t("../cartesian/set_convert"),u=t("./layout_attributes"),s=t("./constants"),i=s.axisNames,f=p(function(v){return v.slice().reverse().map(function(y){return-y}).concat([0]).concat(v)},String);function h(v,y,g,A){var m=g("bgcolor");A.bgColor=l.combine(m,A.paper_bgcolor);var M=e(A.fullData,s.name,A.id),_=A.layoutOut,T;function x(X,q){return g(T+"."+X,q)}for(var c=0;c<i.length;c++){T=i[c],d.isPlainObject(v[T])||(v[T]={});var L=v[T],S=b.newContainer(y,T);S._id=S._name=T,S._attr=A.id+"."+T,S._traceIndices=M.map(function(X){return X._expandedIndex});var k=x("visible");if(S.type="linear",r(S,_),o(L,S,x,S.type),k){var P=T==="realaxis";if(P&&x("side"),P)x("tickvals");else{var z=f(y.realaxis.tickvals||u.realaxis.tickvals.dflt);x("tickvals",z)}var I,R,D,O,F=A.font||{};k&&(I=x("color"),R=I===L.color?I:F.color,D=F.size,O=F.family),a(L,S,x,S.type,{noAng:!P,noExp:!0,font:{color:R,size:D,family:O}}),d.coerce2(v,y,u,T+".ticklen"),d.coerce2(v,y,u,T+".tickwidth"),d.coerce2(v,y,u,T+".tickcolor",y.color);var Y=x("ticks");Y||(delete y[T].ticklen,delete y[T].tickwidth,delete y[T].tickcolor),n(L,S,x,{dfltColor:I,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[T]}),x("layer")}x("hoverformat"),delete S.type,S._input=L}}B.exports=function(y,g,A){w(y,g,A,{noUirevision:!0,type:s.name,attributes:u,handleDefaults:h,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:A,layoutOut:g})};function p(v,y){var g={};return function(A){var m=y?y(A):A;if(m in g)return g[m];var M=v(A);return g[m]=M,M}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_template"),b=t("./domain").defaults;B.exports=function(e,o,a,n){var r=n.type,u=n.attributes,s=n.handleDefaults,i=n.partition||"x",f=o._subplots[r],h=f.length,p=h&&f[0].replace(/\d+$/,""),v,y;function g(_,T){return d.coerce(v,y,u,_,T)}for(var A=0;A<h;A++){var m=f[A];e[m]?v=e[m]:v=e[m]={},y=l.newContainer(o,m,p),n.noUirevision||g("uirevision",o.uirevision);var M={};M[i]=[A/h,(A+1)/h],b(y,o,g,M),n.id=m,s(v,y,g,n)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(t,B,H){var d=t("../constants/docs");d.FORMAT_LINK,d.DATE_FORMAT_LINK;function l(b){var w=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var o=[],a=0;a<e.length;a++)o[a]="`"+e[a]+"`";w=w+"Finally, the template string has access to ",e.length===1?w="variable "+o[0]:w="variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return w}H.hovertemplateAttrs=function(b,w){b=b||{},w=w||{},l(w);var e={valType:"string",dflt:"",editType:b.editType||"none"};return b.arrayOk!==!1&&(e.arrayOk=!0),e},H.texttemplateAttrs=function(b,w){b=b||{},w=w||{},l(w);var e={valType:"string",dflt:"",editType:b.editType||"calc"};return b.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(t,B,H){var d=t("./ternary"),l=t("../../plots/get_data").getSubplotCalcData,b=t("../../lib").counterRegex,w="ternary";H.name=w;var e=H.attr="subplot";H.idRoot=w,H.idRegex=H.attrRegex=b(w);var o=H.attributes={};o[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.plot=function(n){for(var r=n._fullLayout,u=n.calcdata,s=r._subplots[w],i=0;i<s.length;i++){var f=s[i],h=l(u,w,f),p=r[f]._subplot;p||(p=new d({id:f,graphDiv:n,container:r._ternarylayer.node()},r),r[f]._subplot=p),p.plot(h,r,n._promises)}},H.clean=function(a,n,r,u){for(var s=u._subplots[w]||[],i=0;i<s.length;i++){var f=s[i],h=u[f]._subplot;!n[f]&&!!h&&(h.plotContainer.remove(),h.clipDef.remove(),h.clipDefRelative.remove(),h.layers["a-title"].remove(),h.layers["b-title"].remove(),h.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../domain").attributes,b=t("../cartesian/layout_attributes"),w=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,o={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},a=B.exports=w({domain:l({name:"ternary"}),bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(t,B,H){var d=t("../../components/color"),l=t("../../plot_api/plot_template"),b=t("../../lib"),w=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),o=t("../cartesian/prefix_suffix_defaults"),a=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_value_defaults"),r=t("../cartesian/line_grid_defaults"),u=t("./layout_attributes"),s=["aaxis","baxis","caxis"];B.exports=function(p,v,y){w(p,v,y,{type:"ternary",attributes:u,handleDefaults:i,font:v.font,paper_bgcolor:v.paper_bgcolor})};function i(h,p,v,y){var g=v("bgcolor"),A=v("sum");y.bgColor=d.combine(g,y.paper_bgcolor);for(var m,M,_,T=0;T<s.length;T++)m=s[T],M=h[m]||{},_=l.newContainer(p,m),_._name=m,f(M,_,y,p);var x=p.aaxis,c=p.baxis,L=p.caxis;x.min+c.min+L.min>=A&&(x.min=0,c.min=0,L.min=0,h.aaxis&&delete h.aaxis.min,h.baxis&&delete h.baxis.min,h.caxis&&delete h.caxis.min)}function f(h,p,v,y){var g=u[p._name];function A(S,k){return b.coerce(h,p,g,S,k)}A("uirevision",y.uirevision),p.type="linear";var m=A("color"),M=m!==g.color.dflt?m:v.font.color,_=p._name,T=_.charAt(0).toUpperCase(),x="Component "+T,c=A("title.text",x);p._hovertitle=c===x?c:T,b.coerceFont(A,"title.font",{family:v.font.family,size:b.bigFont(v.font.size),color:M}),A("min"),n(h,p,A,"linear"),o(h,p,A,"linear"),e(h,p,A,"linear"),a(h,p,A,{outerTicks:!0});var L=A("showticklabels");L&&(b.coerceFont(A,"tickfont",{family:v.font.family,size:v.font.size,color:M}),A("tickangle"),A("tickformat")),r(h,p,A,{dfltColor:m,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../lib"),e=w.strTranslate,o=w._,a=t("../../components/color"),n=t("../../components/drawing"),r=t("../cartesian/set_convert"),u=t("../../lib/extend").extendFlat,s=t("../plots"),i=t("../cartesian/axes"),f=t("../../components/dragelement"),h=t("../../components/fx"),p=t("../../components/dragelement/helpers"),v=p.freeMode,y=p.rectMode,g=t("../../components/titles"),A=t("../cartesian/select").prepSelect,m=t("../cartesian/select").selectOnClick,M=t("../cartesian/select").clearSelect,_=t("../cartesian/select").clearSelectionsCache,T=t("../cartesian/constants");function x(F,Y){this.id=F.id,this.graphDiv=F.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}B.exports=x;var c=x.prototype;c.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},c.plot=function(F,Y){var X=this,q=Y[X.id],$=Y._size;X._hasClipOnAxisFalse=!1;for(var V=0;V<F.length;V++){var K=F[V][0].trace;if(K.cliponaxis===!1){X._hasClipOnAxisFalse=!0;break}}X.updateLayers(q),X.adjustLayout(q,$),s.generalUpdatePerTraceModule(X.graphDiv,X,F,q),X.layers.plotbg.select("path").call(a.fill,q.bgcolor)},c.makeFramework=function(F){var Y=this,X=Y.graphDiv,q=F[Y.id],$=Y.clipId="clip"+Y.layoutId+Y.id,V=Y.clipIdRelative="clip-relative"+Y.layoutId+Y.id;Y.clipDef=w.ensureSingleById(F._clips,"clipPath",$,function(K){K.append("path").attr("d","M0,0Z")}),Y.clipDefRelative=w.ensureSingleById(F._clips,"clipPath",V,function(K){K.append("path").attr("d","M0,0Z")}),Y.plotContainer=w.ensureSingle(Y.container,"g",Y.id),Y.updateLayers(q),n.setClipUrl(Y.layers.backplot,$,X),n.setClipUrl(Y.layers.grids,$,X)},c.updateLayers=function(F){var Y=this,X=Y.layers,q=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&q.push("aaxis","aline"),F.baxis.layer==="below traces"&&q.push("baxis","bline"),F.caxis.layer==="below traces"&&q.push("caxis","cline"),q.push("frontplot"),F.aaxis.layer==="above traces"&&q.push("aaxis","aline"),F.baxis.layer==="above traces"&&q.push("baxis","bline"),F.caxis.layer==="above traces"&&q.push("caxis","cline");var $=Y.plotContainer.selectAll("g.toplevel").data(q,String),V=["agrid","bgrid","cgrid"];$.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var se=d.select(this);X[K]=se,K==="frontplot"?se.append("g").classed("scatterlayer",!0):K==="backplot"?se.append("g").classed("maplayer",!0):K==="plotbg"?se.append("path").attr("d","M0,0Z"):K==="aline"||K==="bline"||K==="cline"?se.append("path"):K==="grids"&&V.forEach(function(ue){X[ue]=se.append("g").classed("grid "+ue,!0)})}),$.order()};var L=Math.sqrt(4/3);c.adjustLayout=function(F,Y){var X=this,q=F.domain,$=(q.x[0]+q.x[1])/2,V=(q.y[0]+q.y[1])/2,K=q.x[1]-q.x[0],se=q.y[1]-q.y[0],ue=K*Y.w,oe=se*Y.h,U=F.sum,G=F.aaxis.min,re=F.baxis.min,ee=F.caxis.min,j,Q,ne,ae,ie,fe;ue>L*oe?(ae=oe,ne=ae*L):(ne=ue,ae=ne/L),ie=K*ne/ue,fe=se*ae/oe,j=Y.l+Y.w*$-ne/2,Q=Y.t+Y.h*(1-V)-ae/2,X.x0=j,X.y0=Q,X.w=ne,X.h=ae,X.sum=U,X.xaxis={type:"linear",range:[G+2*ee-U,U-G-2*re],domain:[$-ie/2,$+ie/2],_id:"x"},r(X.xaxis,X.graphDiv._fullLayout),X.xaxis.setScale(),X.xaxis.isPtWithinRange=function(Ie){return Ie.a>=X.aaxis.range[0]&&Ie.a<=X.aaxis.range[1]&&Ie.b>=X.baxis.range[1]&&Ie.b<=X.baxis.range[0]&&Ie.c>=X.caxis.range[1]&&Ie.c<=X.caxis.range[0]},X.yaxis={type:"linear",range:[G,U-re-ee],domain:[V-fe/2,V+fe/2],_id:"y"},r(X.yaxis,X.graphDiv._fullLayout),X.yaxis.setScale(),X.yaxis.isPtWithinRange=function(){return!0};var me=X.yaxis.domain[0],ce=X.aaxis=u({},F.aaxis,{range:[G,U-re-ee],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[me,me+fe*L],anchor:"free",position:0,_id:"y",_length:ne});r(ce,X.graphDiv._fullLayout),ce.setScale();var ye=X.baxis=u({},F.baxis,{range:[U-G-ee,re],side:"bottom",domain:X.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ne});r(ye,X.graphDiv._fullLayout),ye.setScale();var xe=X.caxis=u({},F.caxis,{range:[U-G-re,ee],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[me,me+fe*L],anchor:"free",position:0,_id:"y",_length:ne});r(xe,X.graphDiv._fullLayout),xe.setScale();var ke="M"+j+","+(Q+ae)+"h"+ne+"l-"+ne/2+",-"+ae+"Z";X.clipDef.select("path").attr("d",ke),X.layers.plotbg.select("path").attr("d",ke);var Ae="M0,"+ae+"h"+ne+"l-"+ne/2+",-"+ae+"Z";X.clipDefRelative.select("path").attr("d",Ae);var Oe=e(j,Q);X.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Oe),X.clipDefRelative.select("path").attr("transform",null);var He=e(j-ye._offset,Q+ae);X.layers.baxis.attr("transform",He),X.layers.bgrid.attr("transform",He);var Ge=e(j+ne/2,Q)+"rotate(30)"+e(0,-ce._offset);X.layers.aaxis.attr("transform",Ge),X.layers.agrid.attr("transform",Ge);var _e=e(j+ne/2,Q)+"rotate(-30)"+e(0,-xe._offset);X.layers.caxis.attr("transform",_e),X.layers.cgrid.attr("transform",_e),X.drawAxes(!0),X.layers.aline.select("path").attr("d",ce.showline?"M"+j+","+(Q+ae)+"l"+ne/2+",-"+ae:"M0,0").call(a.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),X.layers.bline.select("path").attr("d",ye.showline?"M"+j+","+(Q+ae)+"h"+ne:"M0,0").call(a.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),X.layers.cline.select("path").attr("d",xe.showline?"M"+(j+ne/2)+","+Q+"l"+ne/2+","+ae:"M0,0").call(a.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),X.graphDiv._context.staticPlot||X.initInteractions(),n.setClipUrl(X.layers.frontplot,X._hasClipOnAxisFalse?null:X.clipId,X.graphDiv)},c.drawAxes=function(F){var Y=this,X=Y.graphDiv,q=Y.id.substr(7)+"title",$=Y.layers,V=Y.aaxis,K=Y.baxis,se=Y.caxis;if(Y.drawAx(V),Y.drawAx(K),Y.drawAx(se),F){var ue=Math.max(V.showticklabels?V.tickfont.size/2:0,(se.showticklabels?se.tickfont.size*.75:0)+(se.ticks==="outside"?se.ticklen*.87:0)),oe=(K.showticklabels?K.tickfont.size:0)+(K.ticks==="outside"?K.ticklen:0)+3;$["a-title"]=g.draw(X,"a"+q,{propContainer:V,propName:Y.id+".aaxis.title",placeholder:o(X,"Click to enter Component A title"),attributes:{x:Y.x0+Y.w/2,y:Y.y0-V.title.font.size/3-ue,"text-anchor":"middle"}}),$["b-title"]=g.draw(X,"b"+q,{propContainer:K,propName:Y.id+".baxis.title",placeholder:o(X,"Click to enter Component B title"),attributes:{x:Y.x0-oe,y:Y.y0+Y.h+K.title.font.size*.83+oe,"text-anchor":"middle"}}),$["c-title"]=g.draw(X,"c"+q,{propContainer:se,propName:Y.id+".caxis.title",placeholder:o(X,"Click to enter Component C title"),attributes:{x:Y.x0+Y.w+oe,y:Y.y0+Y.h+se.title.font.size*.83+oe,"text-anchor":"middle"}})}},c.drawAx=function(F){var Y=this,X=Y.graphDiv,q=F._name,$=q.charAt(0),V=F._id,K=Y.layers[q],se=30,ue=$+"tickLayout",oe=S(F);Y[ue]!==oe&&(K.selectAll("."+V+"tick").remove(),Y[ue]=oe),F.setScale();var U=i.calcTicks(F),G=i.clipEnds(F,U),re=i.makeTransTickFn(F),ee=i.getTickSigns(F)[2],j=w.deg2rad(se),Q=ee*(F.linewidth||1)/2,ne=ee*F.ticklen,ae=Y.w,ie=Y.h,fe=$==="b"?"M0,"+Q+"l"+Math.sin(j)*ne+","+Math.cos(j)*ne:"M"+Q+",0l"+Math.cos(j)*ne+","+-Math.sin(j)*ne,me={a:"M0,0l"+ie+",-"+ae/2,b:"M0,0l-"+ae/2+",-"+ie,c:"M0,0l-"+ie+","+ae/2}[$];i.drawTicks(X,F,{vals:F.ticks==="inside"?G:U,layer:K,path:fe,transFn:re,crisp:!1}),i.drawGrid(X,F,{vals:G,layer:Y.layers[$+"grid"],path:me,transFn:re,crisp:!1}),i.drawLabels(X,F,{vals:U,layer:K,transFn:re,labelFns:i.makeLabelFns(F,0,se)})};function S(F){return F.ticks+String(F.ticklen)+String(F.showticklabels)}var k=T.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",z="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",I="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",R="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",D=!0;c.clearSelect=function(){_(this.dragOptions),M(this.dragOptions.gd)},c.initInteractions=function(){var F=this,Y=F.layers.plotbg.select("path").node(),X=F.graphDiv,q=X._fullLayout._zoomlayer,$,V;this.dragOptions={element:Y,gd:X,plotinfo:{id:F.id,domain:X._fullLayout[F.id].domain,xaxis:F.xaxis,yaxis:F.yaxis},subplot:F.id,prepFn:function(He,Ge,_e){F.dragOptions.xaxes=[F.xaxis],F.dragOptions.yaxes=[F.yaxis],$=X._fullLayout._invScaleX,V=X._fullLayout._invScaleY;var Ie=F.dragOptions.dragmode=X._fullLayout.dragmode;v(Ie)?F.dragOptions.minDrag=1:F.dragOptions.minDrag=void 0,Ie==="zoom"?(F.dragOptions.moveFn=ye,F.dragOptions.clickFn=ae,F.dragOptions.doneFn=xe,ie(He,Ge,_e)):Ie==="pan"?(F.dragOptions.moveFn=Ae,F.dragOptions.clickFn=ae,F.dragOptions.doneFn=Oe,ke(),F.clearSelect(X)):(y(Ie)||v(Ie))&&A(He,Ge,_e,F.dragOptions,Ie)}};var K,se,ue,oe,U,G,re,ee,j,Q;function ne(He){var Ge={};return Ge[F.id+".aaxis.min"]=He.a,Ge[F.id+".baxis.min"]=He.b,Ge[F.id+".caxis.min"]=He.c,Ge}function ae(He,Ge){var _e=X._fullLayout.clickmode;O(X),He===2&&(X.emit("plotly_doubleclick",null),b.call("_guiRelayout",X,ne({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&He===1&&m(Ge,X,[F.xaxis],[F.yaxis],F.id,F.dragOptions),_e.indexOf("event")>-1&&h.click(X,Ge,F.id)}function ie(He,Ge,_e){var Ie=Y.getBoundingClientRect();K=Ge-Ie.left,se=_e-Ie.top,X._fullLayout._calcInverseTransform(X);var Ye=X._fullLayout._invTransform,qe=w.apply3DTransform(Ye)(K,se);K=qe[0],se=qe[1],ue={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},U=ue,oe=F.aaxis.range[1]-ue.a,G=l(F.graphDiv._fullLayout[F.id].bgcolor).getLuminance(),re="M0,"+F.h+"L"+F.w/2+", 0L"+F.w+","+F.h+"Z",ee=!1,j=q.append("path").attr("class","zoombox").attr("transform",e(F.x0,F.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",re),Q=q.append("path").attr("class","zoombox-corners").attr("transform",e(F.x0,F.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),F.clearSelect(X)}function fe(He,Ge){return 1-Ge/F.h}function me(He,Ge){return 1-(He+(F.h-Ge)/Math.sqrt(3))/F.w}function ce(He,Ge){return(He-(F.h-Ge)/Math.sqrt(3))/F.w}function ye(He,Ge){var _e=K+He*$,Ie=se+Ge*V,Ye=Math.max(0,Math.min(1,fe(K,se),fe(_e,Ie))),qe=Math.max(0,Math.min(1,me(K,se),me(_e,Ie))),Ue=Math.max(0,Math.min(1,ce(K,se),ce(_e,Ie))),Re=(Ye/2+Ue)*F.w,Ve=(1-Ye/2-qe)*F.w,dt=(Re+Ve)/2,Dt=Ve-Re,Gt=(1-Ye)*F.h,kt=Gt-Dt/L;Dt<T.MINZOOM?(U=ue,j.attr("d",re),Q.attr("d","M0,0Z")):(U={a:ue.a+Ye*oe,b:ue.b+qe*oe,c:ue.c+Ue*oe},j.attr("d",re+"M"+Re+","+Gt+"H"+Ve+"L"+dt+","+kt+"L"+Re+","+Gt+"Z"),Q.attr("d","M"+K+","+se+R+"M"+Re+","+Gt+P+"M"+Ve+","+Gt+z+"M"+dt+","+kt+I)),ee||(j.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),ee=!0),X.emit("plotly_relayouting",ne(U))}function xe(){O(X),U!==ue&&(b.call("_guiRelayout",X,ne(U)),D&&X.data&&X._context.showTips&&(w.notifier(o(X,"Double-click to zoom back out"),"long"),D=!1))}function ke(){ue={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},U=ue}function Ae(He,Ge){var _e=He/F.xaxis._m,Ie=Ge/F.yaxis._m;U={a:ue.a-Ie,b:ue.b+(_e+Ie)/2,c:ue.c-(_e-Ie)/2};var Ye=[U.a,U.b,U.c].sort(w.sorterAsc),qe={a:Ye.indexOf(U.a),b:Ye.indexOf(U.b),c:Ye.indexOf(U.c)};Ye[0]<0&&(Ye[1]+Ye[0]/2<0?(Ye[2]+=Ye[0]+Ye[1],Ye[0]=Ye[1]=0):(Ye[2]+=Ye[0]/2,Ye[1]+=Ye[0]/2,Ye[0]=0),U={a:Ye[qe.a],b:Ye[qe.b],c:Ye[qe.c]},Ge=(ue.a-U.a)*F.yaxis._m,He=(ue.c-U.c-ue.b+U.b)*F.xaxis._m);var Ue=e(F.x0+He,F.y0+Ge);F.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ue);var Re=e(-He,-Ge);F.clipDefRelative.select("path").attr("transform",Re),F.aaxis.range=[U.a,F.sum-U.b-U.c],F.baxis.range=[F.sum-U.a-U.c,U.b],F.caxis.range=[F.sum-U.a-U.b,U.c],F.drawAxes(!1),F._hasClipOnAxisFalse&&F.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,F),X.emit("plotly_relayouting",ne(U))}function Oe(){b.call("_guiRelayout",X,ne(U))}Y.onmousemove=function(He){h.hover(X,He,F.id),X._fullLayout._lasthover=Y,X._fullLayout._hoversubplot=F.id},Y.onmouseout=function(He){X._dragging||f.unhover(X,He)},f.init(this.dragOptions)};function O(F){d.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(t,B,H){var d=t("./lib/loggers"),l=t("./lib/noop"),b=t("./lib/push_unique"),w=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,o=t("./lib/extend"),a=t("./plots/attributes"),n=t("./plots/layout_attributes"),r=o.extendFlat,u=o.extendDeepAll;H.modules={},H.allCategories={},H.allTypes=[],H.subplotsRegistry={},H.transformsRegistry={},H.componentsRegistry={},H.layoutArrayContainers=[],H.layoutArrayRegexes=[],H.traceLayoutAttributes={},H.localeRegistry={},H.apiMethodRegistry={},H.collectableSubplotTypes=null,H.register=function(_){if(H.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var T=0;T<_.length;T++){var x=_[T];if(!x)throw new Error("Invalid module was attempted to be registered!");switch(x.moduleType){case"trace":s(x);break;case"transform":h(x);break;case"component":f(x);break;case"locale":p(x);break;case"apiMethod":var c=x.name;H.apiMethodRegistry[c]=x.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},H.getModule=function(M){var _=H.modules[m(M)];return _?_._module:!1},H.traceIs=function(M,_){if(M=m(M),M==="various")return!1;var T=H.modules[M];return T||(M&&d.log("Unrecognized trace type "+M+"."),T=H.modules[a.type.dflt]),!!T.categories[_]},H.getTransformIndices=function(M,_){for(var T=[],x=M.transforms||[],c=0;c<x.length;c++)x[c].type===_&&T.push(c);return T},H.hasTransform=function(M,_){for(var T=M.transforms||[],x=0;x<T.length;x++)if(T[x].type===_)return!0;return!1},H.getComponentMethod=function(M,_){var T=H.componentsRegistry[M];return T&&T[_]||l},H.call=function(){var M=arguments[0],_=[].slice.call(arguments,1);return H.apiMethodRegistry[M].apply(null,_)};function s(M){var _=M.name,T=M.categories,x=M.meta;if(H.modules[_]){d.log("Type "+_+" already registered");return}H.subplotsRegistry[M.basePlotModule.name]||i(M.basePlotModule);for(var c={},L=0;L<T.length;L++)c[T[L]]=!0,H.allCategories[T[L]]=!0;H.modules[_]={_module:M,categories:c},x&&Object.keys(x).length&&(H.modules[_].meta=x),H.allTypes.push(_);for(var S in H.componentsRegistry)y(S,_);M.layoutAttributes&&r(H.traceLayoutAttributes,M.layoutAttributes);var k=M.basePlotModule,P=k.name;if(P==="mapbox"){var z=k.constants.styleRules;for(var I in z)e(".js-plotly-plot .plotly .mapboxgl-"+I,z[I])}(P==="geo"||P==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function i(M){var _=M.name;if(H.subplotsRegistry[_]){d.log("Plot type "+_+" already registered.");return}v(M),H.subplotsRegistry[_]=M;for(var T in H.componentsRegistry)A(T,M.name)}function f(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var _=M.name;H.componentsRegistry[_]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&b(H.layoutArrayContainers,_),v(M));for(var T in H.modules)y(_,T);for(var x in H.subplotsRegistry)A(_,x);for(var c in H.transformsRegistry)g(_,c);M.schema&&M.schema.layout&&u(n,M.schema.layout)}function h(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+M.name,T=typeof M.transform=="function",x=typeof M.calcTransform=="function";if(!T&&!x)throw new Error(_+" is missing a *transform* or *calcTransform* method.");T&&x&&d.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),w(M.attributes)||d.log(_+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&d.log(_+" registered without a *supplyDefaults* method."),H.transformsRegistry[M.name]=M;for(var c in H.componentsRegistry)g(c,M.name)}function p(M){var _=M.name,T=_.split("-")[0],x=M.dictionary,c=M.format,L=x&&Object.keys(x).length,S=c&&Object.keys(c).length,k=H.localeRegistry,P=k[_];if(P||(k[_]=P={}),T!==_){var z=k[T];z||(k[T]=z={}),L&&z.dictionary===P.dictionary&&(z.dictionary=x),S&&z.format===P.format&&(z.format=c)}L&&(P.dictionary=x),S&&(P.format=c)}function v(M){if(M.layoutAttributes){var _=M.layoutAttributes._arrayAttrRegexps;if(_)for(var T=0;T<_.length;T++)b(H.layoutArrayRegexes,_[T])}}function y(M,_){var T=H.componentsRegistry[M].schema;if(!(!T||!T.traces)){var x=T.traces[_];x&&u(H.modules[_]._module.attributes,x)}}function g(M,_){var T=H.componentsRegistry[M].schema;if(!(!T||!T.transforms)){var x=T.transforms[_];x&&u(H.transformsRegistry[_].attributes,x)}}function A(M,_){var T=H.componentsRegistry[M].schema;if(!(!T||!T.subplots)){var x=H.subplotsRegistry[_],c=x.layoutAttributes,L=x.attr==="subplot"?x.name:x.attr;Array.isArray(L)&&(L=L[0]);var S=T.subplots[L];c&&S&&u(c,S)}}function m(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(t,B,H){var d=t("../registry"),l=t("../lib"),b=l.extendFlat,w=l.extendDeep;function e(a){var n;switch(a){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function o(a){var n=["xaxis","yaxis","zaxis"];return n.indexOf(a.slice(0,5))>-1}B.exports=function(n,r){var u,s=n.data,i=n.layout,f=w([],s),h=w({},i,e(r.tileClass)),p=n._context||{};if(r.width&&(h.width=r.width),r.height&&(h.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){h.annotations=[];var v=Object.keys(h);for(u=0;u<v.length;u++)o(v[u])&&(h[v[u]].title={text:""});for(u=0;u<f.length;u++){var y=f[u];y.showscale=!1,y.marker&&(y.marker.showscale=!1),d.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(r.annotations))for(u=0;u<r.annotations.length;u++)h.annotations.push(r.annotations[u]);var g=Object.keys(h).filter(function(T){return T.match(/^scene\d*$/)});if(g.length){var A={};for(r.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),u=0;u<g.length;u++){var m=h[g[u]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),b(m.xaxis,A),b(m.yaxis,A),b(m.zaxis,A),m._scene=null}}var M=document.createElement("div");r.tileClass&&(M.className=r.tileClass);var _={gd:M,td:M,layout:h,data:f,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return r.setBackground!=="transparent"&&(_.config.setBackground=r.setBackground||"opaque"),_.gd.defaultLayout=e(r.tileClass),_}},{"../lib":503,"../registry":638}],640:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/to_image"),b=t("./filesaver"),w=t("./helpers");function e(o,a){var n;return d.isPlainObject(o)||(n=d.getGraphDiv(o)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(r,u){n&&n._snapshotInProgress&&u(new Error("Snapshotting already in progress.")),d.isIE()&&a.format!=="svg"&&u(new Error(w.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var s=l(o,a),i=a.filename||o.fn||"newplot";i+="."+a.format.replace("-","."),s.then(function(f){return n&&(n._snapshotInProgress=!1),b(f,i,a.format)}).then(function(f){r(f)}).catch(function(f){n&&(n._snapshotInProgress=!1),u(f)})})}B.exports=e},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(t,B,H){var d=t("../lib"),l=t("./helpers");function b(w,e,o){var a=document.createElement("a"),n="download"in a,r=new Promise(function(u,s){var i,f;if(d.isIE())return i=l.createBlob(w,"svg"),window.navigator.msSaveBlob(i,e),i=null,u(e);if(n)return i=l.createBlob(w,o),f=l.createObjectURL(i),a.href=f,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),l.revokeObjectURL(f),i=null,u(e);if(d.isSafari()){var h=o==="svg"?",":";base64,";return l.octetStream(h+encodeURIComponent(w)),u(e)}s(new Error("download error"))});return r}B.exports=b},{"../lib":503,"./helpers":642}],642:[function(t,B,H){var d=t("../registry");H.getDelay=function(w){return w._has&&(w._has("gl3d")||w._has("gl2d")||w._has("mapbox"))?500:0},H.getRedrawFunc=function(w){return function(){d.getComponentMethod("colorbar","draw")(w)}},H.encodeSVG=function(w){return"data:image/svg+xml,"+encodeURIComponent(w)},H.encodeJSON=function(w){return"data:application/json,"+encodeURIComponent(w)};var l=window.URL||window.webkitURL;H.createObjectURL=function(w){return l.createObjectURL(w)},H.revokeObjectURL=function(w){return l.revokeObjectURL(w)},H.createBlob=function(w,e){if(e==="svg")return new window.Blob([w],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([w],{type:"application/json;charset=utf-8"});var o=b(window.atob(w));return new window.Blob([o],{type:"image/"+e})},H.octetStream=function(w){document.location.href="data:application/octet-stream"+w};function b(w){for(var e=w.length,o=new ArrayBuffer(e),a=new Uint8Array(o),n=0;n<e;n++)a[n]=w.charCodeAt(n);return o}H.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,H.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(t,B,H){var d=t("./helpers"),l={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};B.exports=l},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(t,B,H){var d=t("../lib"),l=t("events").EventEmitter,b=t("./helpers");function w(e){var o=e.emitter||new l,a=new Promise(function(n,r){var u=window.Image,s=e.svg,i=e.format||"png";if(d.isIE()&&i!=="svg"){var f=new Error(b.MSG_IE_BAD_FORMAT);return r(f),e.promise?a:o.emit("error",f)}var h=e.canvas,p=e.scale||1,v=e.width||300,y=e.height||150,g=p*v,A=p*y,m=h.getContext("2d"),M=new u,_,T;i==="svg"||d.isSafari()?T=b.encodeSVG(s):(_=b.createBlob(s,"svg"),T=b.createObjectURL(_)),h.width=g,h.height=A,M.onload=function(){var x;switch(_=null,b.revokeObjectURL(T),i!=="svg"&&m.drawImage(M,0,0,g,A),i){case"jpeg":x=h.toDataURL("image/jpeg");break;case"png":x=h.toDataURL("image/png");break;case"webp":x=h.toDataURL("image/webp");break;case"svg":x=T;break;default:var c="Image format is not jpeg, png, svg or webp.";if(r(new Error(c)),!e.promise)return o.emit("error",c)}n(x),e.promise||o.emit("success",x)},M.onerror=function(x){if(_=null,b.revokeObjectURL(T),r(x),!e.promise)return o.emit("error",x)},M.src=T});return e.promise?a:o}B.exports=w},{"../lib":503,"./helpers":642,events:84}],645:[function(t,B,H){var d=t("events").EventEmitter,l=t("../registry"),b=t("../lib"),w=t("./helpers"),e=t("./cloneplot"),o=t("./tosvg"),a=t("./svgtoimg");function n(r,u){var s=new d,i=e(r,{format:"png"}),f=i.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);function h(){var v=w.getDelay(f._fullLayout);setTimeout(function(){var y=o(f),g=document.createElement("canvas");g.id=b.randstr(),s=a({format:u.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:g,emitter:s,svg:y}),s.clean=function(){f&&document.body.removeChild(f)}},v)}var p=w.getRedrawFunc(f);return l.call("_doPlot",f,i.data,i.layout,i.config).then(p).then(h).catch(function(v){s.emit("error",v)}),s}B.exports=n},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(t,B,H){var d=t("@plotly/d3"),l=t("../lib"),b=t("../components/drawing"),w=t("../components/color"),e=t("../constants/xmlns_namespaces"),o=/"/g,a="TOBESTRIPPED",n=new RegExp('("'+a+")|("+a+'")',"g");function r(s){var i=d.select("body").append("div").style({display:"none"}).html(""),f=s.replace(/(&[^;]*;)/gi,function(h){return h==="&lt;"?"&#60;":h==="&rt;"?"&#62;":h.indexOf("<")!==-1||h.indexOf(">")!==-1?"":i.html(h).text()});return i.remove(),f}function u(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}B.exports=function(i,f,h){var p=i._fullLayout,v=p._paper,y=p._toppaper,g=p.width,A=p.height,m,M;v.insert("rect",":first-child").call(b.setRect,0,0,g,A).call(w.fill,p.paper_bgcolor);var _=p._basePlotModules||[];for(m=0;m<_.length;m++){var T=_[m];T.toSVG&&T.toSVG(i)}if(y){var x=y.node().childNodes,c=Array.prototype.slice.call(x);for(m=0;m<c.length;m++){var L=c[m];L.childNodes.length&&v.node().appendChild(L)}}p._draggers&&p._draggers.remove(),v.node().style.background="",v.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var P=d.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){P.remove();return}else P.style({visibility:null,display:null});var z=this.style.fontFamily;z&&z.indexOf('"')!==-1&&P.style("font-family",z.replace(o,a))});var S=[];if(p._gradientUrlQueryParts)for(M in p._gradientUrlQueryParts)S.push(M);if(p._patternUrlQueryParts)for(M in p._patternUrlQueryParts)S.push(M);S.length&&v.selectAll(S.join(",")).each(function(){var P=d.select(this),z=this.style.fill;z&&z.indexOf("url(")!==-1&&P.style("fill",z.replace(o,a));var I=this.style.stroke;I&&I.indexOf("url(")!==-1&&P.style("stroke",I.replace(o,a))}),(f==="pdf"||f==="eps")&&v.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),v.node().setAttributeNS(e.xmlns,"xmlns",e.svg),v.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),f==="svg"&&h&&(v.attr("width",h*g),v.attr("height",h*A),v.attr("viewBox","0 0 "+g+" "+A));var k=new window.XMLSerializer().serializeToString(v.node());return k=r(k),k=u(k),k=k.replace(n,"'"),l.isIE()&&(k=k.replace(/"/gi,"'"),k=k.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),k=k.replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.hovertext,b,"htx");var o=w.marker;if(o){d.mergeArray(o.opacity,b,"mo",!0),d.mergeArray(o.color,b,"mc");var a=o.line;a&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"))}}},{"../../lib":503}],648:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),o=t("../../plots/font_attributes"),a=t("./constants"),n=t("../../components/drawing/attributes").pattern,r=t("../../lib/extend").extendFlat,u=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=d.marker,i=s.line,f=r({},i.width,{dflt:0}),h=r({width:f,editType:"calc"},e("marker.line")),p=r({line:h,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});B.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:d.text,texttemplate:w({editType:"plot"},{keys:a.eventDataKeys}),hovertext:d.hovertext,hovertemplate:b({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},u,{}),insidetextfont:r({},u,{}),outsidetextfont:r({},u,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},d.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("../../components/colorscale/helpers").hasColorscale,w=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),o=t("../scatter/calc_selection");B.exports=function(n,r){var u=d.getFromId(n,r.xaxis||"x"),s=d.getFromId(n,r.yaxis||"y"),i,f,h,p,v,y,g={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(i=u.makeCalcdata(r,"x",g),h=s.makeCalcdata(r,"y"),p=l(r,s,"y",h),v=!!r.yperiodalignment,y="y"):(i=s.makeCalcdata(r,"y",g),h=u.makeCalcdata(r,"x"),p=l(r,u,"x",h),v=!!r.xperiodalignment,y="x"),f=p.vals;for(var A=Math.min(f.length,i.length),m=new Array(A),M=0;M<A;M++)m[M]={p:f[M],s:i[M]},v&&(m[M].orig_p=h[M],m[M][y+"End"]=p.ends[M],m[M][y+"Start"]=p.starts[M]),r.ids&&(m[M].id=String(r.ids[M]));return b(r,"marker")&&w(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),b(r,"marker.line")&&w(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(m,r),o(m,r),m}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(t,B,H){B.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib").isArrayOrTypedArray,b=t("../../constants/numerical").BADNUM,w=t("../../registry"),e=t("../../plots/cartesian/axes"),o=t("../../plots/cartesian/constraints").getAxisGroup,a=t("./sieve.js");function n(L,S){for(var k=S.xaxis,P=S.yaxis,z=L._fullLayout,I=L._fullData,R=L.calcdata,D=[],O=[],F=0;F<I.length;F++){var Y=I[F];if(Y.visible===!0&&w.traceIs(Y,"bar")&&Y.xaxis===k._id&&Y.yaxis===P._id&&(Y.orientation==="h"?D.push(R[F]):O.push(R[F]),Y._computePh))for(var X=L.calcdata[F],q=0;q<X.length;q++)typeof X[q].ph0=="function"&&(X[q].ph0=X[q].ph0()),typeof X[q].ph1=="function"&&(X[q].ph1=X[q].ph1())}var $={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};r(L,k,P,O,$),r(L,P,k,D,$)}function r(L,S,k,P,z){if(!!P.length){var I,R,D,O,F;switch(u(k,P),z.mode){case"overlay":s(S,k,P,z);break;case"group":for(I=[],R=[],D=0;D<P.length;D++)O=P[D],F=O[0].trace,F.offset===void 0?R.push(O):I.push(O);R.length&&i(L,S,k,R,z),I.length&&s(S,k,I,z);break;case"stack":case"relative":for(I=[],R=[],D=0;D<P.length;D++)O=P[D],F=O[0].trace,F.base===void 0?R.push(O):I.push(O);R.length&&f(L,S,k,R,z),I.length&&s(S,k,I,z);break}x(P,S)}}function u(L,S){var k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0].trace,R=I.type==="funnel"?I._base:I.base,D,O=I.orientation==="h"?I.xcalendar:I.ycalendar,F=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(l(R)){for(P=0;P<Math.min(R.length,z.length);P++)D=F(R[P],0,O),d(D)?(z[P].b=+D,z[P].hasB=1):z[P].b=0;for(;P<z.length;P++)z[P].b=0}else{D=F(R,0,O);var Y=d(D);for(D=Y?D:0,P=0;P<z.length;P++)z[P].b=D,Y&&(z[P].hasB=1)}}}function s(L,S,k,P){for(var z=0;z<k.length;z++){var I=k[z],R=new a([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});h(L,R,P),P.norm?(M(R),T(S,R,P)):A(S,R)}}function i(L,S,k,P,z){var I=new a(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!z.norm});p(L,S,I,z),_(I,S),z.norm?(M(I),T(k,I,z)):A(k,I)}function f(L,S,k,P,z){var I=new a(P,{posAxis:S,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});h(S,I,z),m(k,I,z);for(var R=0;R<P.length;R++)for(var D=P[R],O=0;O<D.length;O++){var F=D[O];if(F.s!==b){var Y=F.b+F.s===I.get(F.p,F.s);Y&&(F._outmost=!0)}}z.norm&&T(k,I,z)}function h(L,S,k){for(var P=S.minDiff,z=S.traces,I=P*(1-k.gap),R=I,D=R*(1-(k.groupgap||0)),O=-D/2,F=0;F<z.length;F++){var Y=z[F],X=Y[0].t;X.barwidth=D,X.poffset=O,X.bargroupwidth=I,X.bardelta=P}S.binWidth=z[0][0].t.barwidth/100,v(S),y(L,S),g(L,S)}function p(L,S,k,P){for(var z=L._fullLayout,I=k.positions,R=k.distinctPositions,D=k.minDiff,O=k.traces,F=O.length,Y=I.length!==R.length,X=D*(1-P.gap),q=o(z,S._id)+O[0][0].trace.orientation,$=z._alignmentOpts[q]||{},V=0;V<F;V++){var K=O[V],se=K[0].trace,ue=$[se.alignmentgroup]||{},oe=Object.keys(ue.offsetGroups||{}).length,U;oe?U=X/oe:U=Y?X/F:X;var G=U*(1-(P.groupgap||0)),re;oe?re=((2*se._offsetIndex+1-oe)*U-G)/2:re=Y?((2*V+1-F)*U-G)/2:-G/2;var ee=K[0].t;ee.barwidth=G,ee.poffset=re,ee.bargroupwidth=X,ee.bardelta=D}k.binWidth=O[0][0].t.barwidth/100,v(k),y(S,k),g(S,k,Y)}function v(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0],R=I.trace,D=I.t,O=R._offset||R.offset,F=D.poffset,Y;if(l(O)){for(Y=Array.prototype.slice.call(O,0,z.length),P=0;P<Y.length;P++)d(Y[P])||(Y[P]=F);for(P=Y.length;P<z.length;P++)Y.push(F);D.poffset=Y}else O!==void 0&&(D.poffset=O);var X=R._width||R.width,q=D.barwidth;if(l(X)){var $=Array.prototype.slice.call(X,0,z.length);for(P=0;P<$.length;P++)d($[P])||($[P]=q);for(P=$.length;P<z.length;P++)$.push(q);if(D.barwidth=$,O===void 0){for(Y=[],P=0;P<z.length;P++)Y.push(F+(q-$[P])/2);D.poffset=Y}}else X!==void 0&&(D.barwidth=X,O===void 0&&(D.poffset=F+(q-X)/2))}}function y(L,S){for(var k=S.traces,P=c(L),z=0;z<k.length;z++)for(var I=k[z],R=I[0].t,D=R.poffset,O=Array.isArray(D),F=R.barwidth,Y=Array.isArray(F),X=0;X<I.length;X++){var q=I[X],$=q.w=Y?F[X]:F;q[P]=q.p+(O?D[X]:D)+$/2}}function g(L,S,k){var P=S.traces,z=S.minDiff,I=z/2;e.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var R=0;R<P.length;R++){var D=P[R],O=D[0],F=O.trace,Y=[],X,q,$,V;for(V=0;V<D.length;V++)X=D[V],q=X.p-I,$=X.p+I,Y.push(q,$);if(F.width||F.offset){var K=O.t,se=K.poffset,ue=K.barwidth,oe=Array.isArray(se),U=Array.isArray(ue);for(V=0;V<D.length;V++){X=D[V];var G=oe?se[V]:se,re=U?ue[V]:ue;q=X.p+G,$=q+re,Y.push(q,$)}}F._extremes[L._id]=e.findExtremes(L,Y,{padded:!1})}}function A(L,S){for(var k=S.traces,P=c(L),z=0;z<k.length;z++){for(var I=k[z],R=I[0].trace,D=[],O=!1,F=0;F<I.length;F++){var Y=I[F],X=Y.b,q=X+Y.s;Y[P]=q,D.push(q),Y.hasB&&D.push(X),(!Y.hasB||!Y.b)&&(O=!0)}R._extremes[L._id]=e.findExtremes(L,D,{tozero:O,padded:!0})}}function m(L,S,k){var P=c(L),z=S.traces,I,R,D,O,F,Y;for(O=0;O<z.length;O++)if(I=z[O],R=I[0].trace,R.type==="funnel")for(F=0;F<I.length;F++)Y=I[F],Y.s!==b&&S.put(Y.p,-.5*Y.s);for(O=0;O<z.length;O++){I=z[O],R=I[0].trace,D=R.type==="funnel";var X=[];for(F=0;F<I.length;F++)if(Y=I[F],Y.s!==b){var q;D?q=Y.s:q=Y.s+Y.b;var $=S.put(Y.p,q),V=$+q;Y.b=$,Y[P]=V,k.norm||(X.push(V),Y.hasB&&X.push($))}k.norm||(R._extremes[L._id]=e.findExtremes(L,X,{tozero:!0,padded:!0}))}}function M(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],z=0;z<P.length;z++){var I=P[z];I.s!==b&&L.put(I.p,I.b+I.s)}}function _(L,S){for(var k=L.traces,P=0;P<k.length;P++){var z=k[P],I=z[0].trace;if(I.base===void 0)for(var R=new a([z],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),D=0;D<z.length;D++){var O=z[D];if(O.p!==b){var F=R.put(O.p,O.b+O.s);F&&(O.b=F)}}}}function T(L,S,k){var P=S.traces,z=c(L),I=k.norm==="fraction"?1:100,R=I/1e9,D=L.l2c(L.c2l(0)),O=k.mode==="stack"?I:D;function F(re){return d(L.c2l(re))&&(re<D-R||re>O+R||!d(D))}for(var Y=0;Y<P.length;Y++){for(var X=P[Y],q=X[0].trace,$=[],V=!1,K=!1,se=0;se<X.length;se++){var ue=X[se];if(ue.s!==b){var oe=Math.abs(I/S.get(ue.p,ue.s));ue.b*=oe,ue.s*=oe;var U=ue.b,G=U+ue.s;ue[z]=G,$.push(G),K=K||F(G),ue.hasB&&($.push(U),K=K||F(U)),(!ue.hasB||!ue.b)&&(V=!0)}}q._extremes[L._id]=e.findExtremes(L,$,{tozero:V,padded:K})}}function x(L,S){var k=c(S),P={},z,I,R,D=1/0,O=-1/0;for(z=0;z<L.length;z++)for(R=L[z],I=0;I<R.length;I++){var F=R[I].p;d(F)&&(D=Math.min(D,F),O=Math.max(O,F))}var Y=1e4/(O-D),X=P.round=function(oe){return String(Math.round(Y*(oe-D)))};for(z=0;z<L.length;z++){R=L[z],R[0].t.extents=P;var q=R[0].t.poffset,$=Array.isArray(q);for(I=0;I<R.length;I++){var V=R[I],K=V[k]-V.w/2;if(d(K)){var se=V[k]+V.w/2,ue=X(V.p);P[ue]?P[ue]=[Math.min(K,P[ue][0]),Math.max(se,P[ue][1])]:P[ue]=[K,se]}V.p0=V.p+($?q[I]:q),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s}}}function c(L){return L._id.charAt(0)}B.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../registry"),w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./style_defaults"),a=t("../../plots/cartesian/constraints").getAxisGroup,n=t("./attributes"),r=d.coerceFont;function u(h,p,v,y){function g(T,x){return d.coerce(h,p,n,T,x)}var A=w(h,p,y,g);if(!A){p.visible=!1;return}e(h,p,y,g),g("xhoverformat"),g("yhoverformat"),g("orientation",p.x&&!p.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");f(h,p,y,g,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(h,p,g,v,y);var M=(p.marker.line||{}).color,_=b.getComponentMethod("errorbars","supplyDefaults");_(h,p,M||l.defaultLine,{axis:"y"}),_(h,p,M||l.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(p,g)}function s(h,p,v,y){var g=p.orientation,A=p[{v:"x",h:"y"}[g]+"axis"],m=a(v,A)+g,M=v._alignmentOpts||{},_=y("alignmentgroup"),T=M[m];T||(T=M[m]={});var x=T[_];x?x.traces.push(p):x=T[_]={traces:[p],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var c=y("offsetgroup"),L=x.offsetGroups,S=L[c];c&&(S||(S=L[c]={offsetIndex:Object.keys(L).length}),p._offsetIndex=S.offsetIndex)}function i(h,p){var v,y;function g(m){return d.coerce(y._input,y,n,m)}if(p.barmode==="group")for(var A=0;A<h.length;A++)y=h[A],y.type==="bar"&&(v=y._input,s(v,y,p,g))}function f(h,p,v,y,g,A){A=A||{};var m=A.moduleHasSelected!==!1,M=A.moduleHasUnselected!==!1,_=A.moduleHasConstrain!==!1,T=A.moduleHasCliponaxis!==!1,x=A.moduleHasTextangle!==!1,c=A.moduleHasInsideanchor!==!1,L=!!A.hasPathbar,S=Array.isArray(g)||g==="auto",k=S||g==="inside",P=S||g==="outside";if(k||P){var z=r(y,"textfont",v.font),I=d.extendFlat({},z),R=h.textfont&&h.textfont.color,D=!R;if(D&&delete I.color,r(y,"insidetextfont",I),L){var O=d.extendFlat({},z);D&&delete O.color,r(y,"pathbar.textfont",O)}P&&r(y,"outsidetextfont",z),m&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),_&&y("constraintext"),T&&y("cliponaxis"),x&&y("textangle"),y("texttemplate")}k&&c&&y("insidetextanchor")}B.exports={supplyDefaults:u,crossTraceDefaults:i,handleGroupingDefaults:s,handleText:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(t,B,H){B.exports=function(l,b,w){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),w.orientation==="h"?(l.label=l.y,l.value=l.x):(l.label=l.x,l.value=l.y),l}},{}],654:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../../lib").isArrayOrTypedArray;H.coerceString=function(w,e,o){if(typeof e=="string"){if(e||!w.noBlank)return e}else if((typeof e=="number"||e===!0)&&!w.strict)return String(e);return o!==void 0?o:w.dflt},H.coerceNumber=function(w,e,o){if(d(e)){e=+e;var a=w.min,n=w.max,r=a!==void 0&&e<a||n!==void 0&&e>n;if(!r)return e}return o!==void 0?o:w.dflt},H.coerceColor=function(w,e,o){return l(e).isValid()?e:o!==void 0?o:w.dflt},H.coerceEnumerated=function(w,e,o){return w.coerceNumber&&(e=+e),w.values.indexOf(e)!==-1?e:o!==void 0?o:w.dflt},H.getValue=function(w,e){var o;return Array.isArray(w)?e<w.length&&(o=w[e]):o=w,o},H.getLineWidth=function(w,e){var o=0<e.mlw?e.mlw:b(w.marker.line.width)?0:w.marker.line.width;return o}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(t,B,H){var d=t("../../components/fx"),l=t("../../registry"),b=t("../../components/color"),w=t("../../lib").fillText,e=t("./helpers").getLineWidth,o=t("../../plots/cartesian/axes").hoverLabelText,a=t("../../constants/numerical").BADNUM;function n(s,i,f,h,p){var v=r(s,i,f,h,p);if(v){var y=v.cd,g=y[0].trace,A=y[v.index];return v.color=u(g,A),l.getComponentMethod("errorbars","hoverInfo")(A,g,v),[v]}}function r(s,i,f,h,p){var v=s.cd,y=v[0].trace,g=v[0].t,A=h==="closest",m=y.type==="waterfall",M=s.maxHoverDistance,_=s.maxSpikeDistance,T,x,c,L,S,k,P;y.orientation==="h"?(T=f,x=i,c="y",L="x",S=se,k=$):(T=i,x=f,c="x",L="y",k=se,S=$);var z=y[c+"period"],I=A||z;function R(ie){return O(ie,-1)}function D(ie){return O(ie,1)}function O(ie,fe){var me=ie.w;return ie[c]+fe*me/2}function F(ie){return ie[c+"End"]-ie[c+"Start"]}var Y=A?R:z?function(ie){return ie.p-F(ie)/2}:function(ie){return Math.min(R(ie),ie.p-g.bardelta/2)},X=A?D:z?function(ie){return ie.p+F(ie)/2}:function(ie){return Math.max(D(ie),ie.p+g.bardelta/2)};function q(ie,fe,me){return p.finiteRange&&(me=0),d.inbox(ie-T,fe-T,me+Math.min(1,Math.abs(fe-ie)/P)-1)}function $(ie){return q(Y(ie),X(ie),M)}function V(ie){return q(R(ie),D(ie),_)}function K(ie){var fe=ie[L];if(m){var me=Math.abs(ie.rawS)||0;x>0?fe+=me:x<0&&(fe-=me)}return fe}function se(ie){var fe=x,me=ie.b,ce=K(ie);return d.inbox(me-fe,ce-fe,M+(ce-fe)/(ce-me)-1)}function ue(ie){var fe=x,me=ie.b,ce=K(ie);return d.inbox(me-fe,ce-fe,_+(ce-fe)/(ce-me)-1)}var oe=s[c+"a"],U=s[L+"a"];P=Math.abs(oe.r2c(oe.range[1])-oe.r2c(oe.range[0]));function G(ie){return(S(ie)+k(ie))/2}var re=d.getDistanceFunction(h,S,k,G);if(d.getClosest(v,re,s),s.index!==!1&&v[s.index].p!==a){I||(Y=function(ie){return Math.min(R(ie),ie.p-g.bargroupwidth/2)},X=function(ie){return Math.max(D(ie),ie.p+g.bargroupwidth/2)});var ee=s.index,j=v[ee],Q=y.base?j.b+j.s:j.s;s[L+"0"]=s[L+"1"]=U.c2p(j[L],!0),s[L+"LabelVal"]=Q;var ne=g.extents[g.extents.round(j.p)];s[c+"0"]=oe.c2p(A?Y(j):ne[0],!0),s[c+"1"]=oe.c2p(A?X(j):ne[1],!0);var ae=j.orig_p!==void 0;return s[c+"LabelVal"]=ae?j.orig_p:j.p,s.labelLabel=o(oe,s[c+"LabelVal"],y[c+"hoverformat"]),s.valueLabel=o(U,s[L+"LabelVal"],y[L+"hoverformat"]),s.baseLabel=o(U,j.b,y[L+"hoverformat"]),s.spikeDistance=(ue(j)+V(j))/2,s[c+"Spike"]=oe.c2p(j.p,!0),w(j,y,s),s.hovertemplate=y.hovertemplate,s}}function u(s,i){var f=i.mcc||s.marker.color,h=i.mlcc||s.marker.line.color,p=e(s,i);if(b.opacity(f))return f;if(b.opacity(h)&&p)return h}B.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:u}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(t,B,H){B.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/cartesian/axes"),b=t("../../lib"),w=t("./layout_attributes");B.exports=function(e,o,a){function n(g,A){return b.coerce(e,o,w,g,A)}for(var r=!1,u=!1,s=!1,i={},f=n("barmode"),h=0;h<a.length;h++){var p=a[h];if(d.traceIs(p,"bar")&&p.visible)r=!0;else continue;if(f==="group"){var v=p.xaxis+p.yaxis;i[v]&&(s=!0),i[v]=!0}if(p.visible&&p.type==="histogram"){var y=l.getFromId({_fullLayout:o},p[p.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(u=!0)}}if(!r){delete o.barmode;return}f!=="overlay"&&n("barnorm"),n("bargap",u&&!s?0:.2),n("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../lib/svg_text_utils"),e=t("../../components/color"),o=t("../../components/drawing"),a=t("../../registry"),n=t("../../plots/cartesian/axes").tickText,r=t("./uniform_text"),u=r.recordMinTextSize,s=r.clearMinTextSize,i=t("./style"),f=t("./helpers"),h=t("./constants"),p=t("./attributes"),v=p.text,y=p.textposition,g=t("../../components/fx/helpers").appendArrayPointValue,A=h.TEXTPAD;function m(Y){return Y.id}function M(Y){if(Y.ids)return m}function _(Y,X){return Y<X?1:-1}function T(Y,X,q,$){var V=[],K=[],se=$?X:q,ue=$?q:X;return V[0]=se.c2p(Y.s0,!0),K[0]=ue.c2p(Y.p0,!0),V[1]=se.c2p(Y.s1,!0),K[1]=ue.c2p(Y.p1,!0),$?[V,K]:[K,V]}function x(Y,X,q,$){if(!X.uniformtext.mode&&c(q)){var V;return $&&(V=$()),Y.transition().duration(q.duration).ease(q.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()})}else return Y}function c(Y){return Y&&Y.duration>0}function L(Y,X,q,$,V,K){var se=X.xaxis,ue=X.yaxis,oe=Y._fullLayout;V||(V={mode:oe.barmode,norm:oe.barmode,gap:oe.bargap,groupgap:oe.bargroupgap},s("bar",oe));var U=b.makeTraceGroups($,q,"trace bars").each(function(G){var re=d.select(this),ee=G[0].trace,j=ee.type==="waterfall",Q=ee.type==="funnel",ne=ee.type==="bar",ae=ne||Q,ie=0;j&&ee.connector.visible&&ee.connector.mode==="between"&&(ie=ee.connector.line.width/2);var fe=ee.orientation==="h",me=c(V),ce=b.ensureSingle(re,"g","points"),ye=M(ee),xe=ce.selectAll("g.point").data(b.identity,ye);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(Ae,Oe){var He=d.select(this),Ge=T(Ae,se,ue,fe),_e=Ge[0][0],Ie=Ge[0][1],Ye=Ge[1][0],qe=Ge[1][1],Ue=(fe?Ie-_e:qe-Ye)==0;Ue&&ae&&f.getLineWidth(ee,Ae)&&(Ue=!1),Ue||(Ue=!l(_e)||!l(Ie)||!l(Ye)||!l(qe)),Ae.isBlank=Ue,Ue&&(fe?Ie=_e:qe=Ye),ie&&!Ue&&(fe?(_e-=_(_e,Ie)*ie,Ie+=_(_e,Ie)*ie):(Ye-=_(Ye,qe)*ie,qe+=_(Ye,qe)*ie));var Re,Ve;if(ee.type==="waterfall"){if(!Ue){var dt=ee[Ae.dir].marker;Re=dt.line.width,Ve=dt.color}}else Re=f.getLineWidth(ee,Ae),Ve=Ae.mc||ee.marker.color;function Dt(Mt){var it=d.round(Re/2%1,2);return V.gap===0&&V.groupgap===0?d.round(Math.round(Mt)-it,2):Mt}function Gt(Mt,it,ht){return ht&&Mt===it?Mt:Math.abs(Mt-it)>=2?Dt(Mt):Mt>it?Math.ceil(Mt):Math.floor(Mt)}if(!Y._context.staticPlot){var kt=e.opacity(Ve),zt=kt<1||Re>.01?Dt:Gt;_e=zt(_e,Ie,fe),Ie=zt(Ie,_e,fe),Ye=zt(Ye,qe,!fe),qe=zt(qe,Ye,!fe)}var Bt=x(b.ensureSingle(He,"path"),oe,V,K);if(Bt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ie-_e)*(qe-Ye))||Ue&&Y._context.staticPlot?"M0,0Z":"M"+_e+","+Ye+"V"+qe+"H"+Ie+"V"+Ye+"Z").call(o.setClipUrl,X.layerClipId,Y),!oe.uniformtext.mode&&me){var Lt=o.makePointStyleFns(ee);o.singlePointStyle(Ae,Bt,ee,Lt,Y)}S(Y,X,He,G,Oe,_e,Ie,Ye,qe,V,K),X.layerClipId&&o.hideOutsideRangePoint(Ae,He.select("text"),se,ue,ee.xcalendar,ee.ycalendar)});var ke=ee.cliponaxis===!1;o.setClipUrl(re,ke?null:X.layerClipId,Y)});a.getComponentMethod("errorbars","plot")(Y,U,X,V)}function S(Y,X,q,$,V,K,se,ue,oe,U,G){var re=X.xaxis,ee=X.yaxis,j=Y._fullLayout,Q;function ne(Mt,it,ht){var Qe=b.ensureSingle(Mt,"text").text(it).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(o.font,ht).call(w.convertToTspans,Y);return Qe}var ae=$[0].trace,ie=ae.orientation==="h",fe=R(j,$,V,re,ee);Q=D(ae,V);var me=U.mode==="stack"||U.mode==="relative",ce=$[V],ye=!me||ce._outmost;if(!fe||Q==="none"||(ce.isBlank||K===se||ue===oe)&&(Q==="auto"||Q==="inside")){q.select("text").remove();return}var xe=j.font,ke=i.getBarColor($[V],ae),Ae=i.getInsideTextFont(ae,V,xe,ke),Oe=i.getOutsideTextFont(ae,V,xe),He=q.datum();ie?re.type==="log"&&He.s0<=0&&(re.range[0]<re.range[1]?K=0:K=re._length):ee.type==="log"&&He.s0<=0&&(ee.range[0]<ee.range[1]?ue=ee._length:ue=0);var Ge=Math.abs(se-K)-2*A,_e=Math.abs(oe-ue)-2*A,Ie,Ye,qe,Ue,Re;if(Q==="outside"&&!ye&&!ce.hasB&&(Q="inside"),Q==="auto")if(ye){Q="inside",Re=b.ensureUniformFontSize(Y,Ae),Ie=ne(q,fe,Re),Ye=o.bBox(Ie.node()),qe=Ye.width,Ue=Ye.height;var Ve=qe>0&&Ue>0,dt=qe<=Ge&&Ue<=_e,Dt=qe<=_e&&Ue<=Ge,Gt=ie?Ge>=qe*(_e/Ue):_e>=Ue*(Ge/qe);Ve&&(dt||Dt||Gt)?Q="inside":(Q="outside",Ie.remove(),Ie=null)}else Q="inside";if(!Ie){Re=b.ensureUniformFontSize(Y,Q==="outside"?Oe:Ae),Ie=ne(q,fe,Re);var kt=Ie.attr("transform");if(Ie.attr("transform",""),Ye=o.bBox(Ie.node()),qe=Ye.width,Ue=Ye.height,Ie.attr("transform",kt),qe<=0||Ue<=0){Ie.remove();return}}var zt=ae.textangle,Bt,Lt;Q==="outside"?(Lt=ae.constraintext==="both"||ae.constraintext==="outside",Bt=I(K,se,ue,oe,Ye,{isHorizontal:ie,constrained:Lt,angle:zt})):(Lt=ae.constraintext==="both"||ae.constraintext==="inside",Bt=z(K,se,ue,oe,Ye,{isHorizontal:ie,constrained:Lt,angle:zt,anchor:ae.insidetextanchor})),Bt.fontSize=Re.size,u(ae.type==="histogram"?"bar":ae.type,Bt,j),ce.transform=Bt,x(Ie,j,U,G).attr("transform",b.getTextTransform(Bt))}function k(Y){return Y==="auto"?0:Y}function P(Y,X){var q=Math.PI/180*X,$=Math.abs(Math.sin(q)),V=Math.abs(Math.cos(q));return{x:Y.width*V+Y.height*$,y:Y.width*$+Y.height*V}}function z(Y,X,q,$,V,K){var se=!!K.isHorizontal,ue=!!K.constrained,oe=K.angle||0,U=K.anchor||"end",G=U==="end",re=U==="start",ee=K.leftToRight||0,j=(ee+1)/2,Q=1-j,ne=V.width,ae=V.height,ie=Math.abs(X-Y),fe=Math.abs($-q),me=ie>2*A&&fe>2*A?A:0;ie-=2*me,fe-=2*me;var ce=k(oe);oe==="auto"&&!(ne<=ie&&ae<=fe)&&(ne>ie||ae>fe)&&(!(ne>fe||ae>ie)||ne<ae!=ie<fe)&&(ce+=90);var ye=P(V,ce),xe=1;ue&&(xe=Math.min(1,ie/ye.x,fe/ye.y));var ke=V.left*Q+V.right*j,Ae=(V.top+V.bottom)/2,Oe=(Y+A)*Q+(X-A)*j,He=(q+$)/2,Ge=0,_e=0;if(re||G){var Ie=(se?ye.x:ye.y)/2,Ye=se?_(Y,X):_(q,$);se?re?(Oe=Y+Ye*me,Ge=-Ye*Ie):(Oe=X-Ye*me,Ge=Ye*Ie):re?(He=q+Ye*me,_e=-Ye*Ie):(He=$-Ye*me,_e=Ye*Ie)}return{textX:ke,textY:Ae,targetX:Oe,targetY:He,anchorX:Ge,anchorY:_e,scale:xe,rotate:ce}}function I(Y,X,q,$,V,K){var se=!!K.isHorizontal,ue=!!K.constrained,oe=K.angle||0,U=V.width,G=V.height,re=Math.abs(X-Y),ee=Math.abs($-q),j;se?j=ee>2*A?A:0:j=re>2*A?A:0;var Q=1;ue&&(Q=se?Math.min(1,ee/G):Math.min(1,re/U));var ne=k(oe),ae=P(V,ne),ie=(se?ae.x:ae.y)/2,fe=(V.left+V.right)/2,me=(V.top+V.bottom)/2,ce=(Y+X)/2,ye=(q+$)/2,xe=0,ke=0,Ae=se?_(X,Y):_(q,$);return se?(ce=X-Ae*j,xe=Ae*ie):(ye=$+Ae*j,ke=-Ae*ie),{textX:fe,textY:me,targetX:ce,targetY:ye,anchorX:xe,anchorY:ke,scale:Q,rotate:ne}}function R(Y,X,q,$,V){var K=X[0].trace,se=K.texttemplate,ue;return se?ue=O(Y,X,q,$,V):K.textinfo?ue=F(X,q,$,V):ue=f.getValue(K.text,q),f.coerceString(v,ue)}function D(Y,X){var q=f.getValue(Y.textposition,X);return f.coerceEnumerated(y,q)}function O(Y,X,q,$,V){var K=X[0].trace,se=b.castOption(K,q,"texttemplate");if(!se)return"";var ue=K.type==="waterfall",oe=K.type==="funnel",U,G,re,ee;K.orientation==="h"?(U="y",G=V,re="x",ee=$):(U="x",G=$,re="y",ee=V);function j(ce){return n(G,G.c2l(ce),!0).text}function Q(ce){return n(ee,ee.c2l(ce),!0).text}var ne=X[q],ae={};ae.label=ne.p,ae.labelLabel=ae[U+"Label"]=j(ne.p);var ie=b.castOption(K,ne.i,"text");(ie===0||ie)&&(ae.text=ie),ae.value=ne.s,ae.valueLabel=ae[re+"Label"]=Q(ne.s);var fe={};g(fe,K,ne.i),ue&&(ae.delta=+ne.rawS||ne.s,ae.deltaLabel=Q(ae.delta),ae.final=ne.v,ae.finalLabel=Q(ae.final),ae.initial=ae.final-ae.delta,ae.initialLabel=Q(ae.initial)),oe&&(ae.value=ne.s,ae.valueLabel=Q(ae.value),ae.percentInitial=ne.begR,ae.percentInitialLabel=b.formatPercent(ne.begR),ae.percentPrevious=ne.difR,ae.percentPreviousLabel=b.formatPercent(ne.difR),ae.percentTotal=ne.sumR,ae.percenTotalLabel=b.formatPercent(ne.sumR));var me=b.castOption(K,ne.i,"customdata");return me&&(ae.customdata=me),b.texttemplateString(se,ae,Y._d3locale,fe,ae,K._meta||{})}function F(Y,X,q,$){var V=Y[0].trace,K=V.orientation==="h",se=V.type==="waterfall",ue=V.type==="funnel";function oe(ye){var xe=K?$:q;return n(xe,ye,!0).text}function U(ye){var xe=K?q:$;return n(xe,+ye,!0).text}var G=V.textinfo,re=Y[X],ee=G.split("+"),j=[],Q,ne=function(ye){return ee.indexOf(ye)!==-1};if(ne("label")&&j.push(oe(Y[X].p)),ne("text")&&(Q=b.castOption(V,re.i,"text"),(Q===0||Q)&&j.push(Q)),se){var ae=+re.rawS||re.s,ie=re.v,fe=ie-ae;ne("initial")&&j.push(U(fe)),ne("delta")&&j.push(U(ae)),ne("final")&&j.push(U(ie))}if(ue){ne("value")&&j.push(U(re.s));var me=0;ne("percent initial")&&me++,ne("percent previous")&&me++,ne("percent total")&&me++;var ce=me>1;ne("percent initial")&&(Q=b.formatPercent(re.begR),ce&&(Q+=" of initial"),j.push(Q)),ne("percent previous")&&(Q=b.formatPercent(re.difR),ce&&(Q+=" of previous"),j.push(Q)),ne("percent total")&&(Q=b.formatPercent(re.sumR),ce&&(Q+=" of total"),j.push(Q))}return j.join("<br>")}B.exports={plot:L,toMoveInsideBar:z}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(t,B,H){B.exports=function(b,w){var e=b.cd,o=b.xaxis,a=b.yaxis,n=e[0].trace,r=n.type==="funnel",u=n.orientation==="h",s=[],i;if(w===!1)for(i=0;i<e.length;i++)e[i].selected=0;else for(i=0;i<e.length;i++){var f=e[i],h="ct"in f?f.ct:d(f,o,a,u,r);w.contains(h,!1,i,b)?(s.push({pointNumber:i,x:o.c2d(f.x),y:a.c2d(f.y)}),f.selected=1):f.selected=0}return s};function d(l,b,w,e,o){var a=b.c2p(e?l.s0:l.p0,!0),n=b.c2p(e?l.s1:l.p1,!0),r=w.c2p(e?l.p0:l.s0,!0),u=w.c2p(e?l.p1:l.s1,!0);return o?[(a+n)/2,(r+u)/2]:e?[n,(r+u)/2]:[(a+n)/2,u]}},{}],661:[function(t,B,H){B.exports=b;var d=t("../../lib").distinctVals,l=t("../../constants/numerical").BADNUM;function b(w,e){this.traces=w,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,a=[],n=0;n<w.length;n++){for(var r=w[n],u=0;u<r.length;u++){var s=r[u];s.p!==l&&a.push(s.p)}r[0]&&r[0].width1&&(o=Math.min(r[0].width1,o))}this.positions=a;var i=d(a);this.distinctPositions=i.vals,i.vals.length===1&&o!==1/0?this.minDiff=o:this.minDiff=Math.min(i.minDiff,o);var f=(e.posAxis||{}).type;(f==="category"||f==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(e,o){var a=this.getLabel(e,o),n=this.bins[a]||0;return this.bins[a]=n+o,n},b.prototype.get=function(e,o){var a=this.getLabel(e,o);return this.bins[a]||0},b.prototype.getLabel=function(e,o){var a=o<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?e:Math.round(e/this.binWidth);return a+n}},{"../../constants/numerical":479,"../../lib":503}],662:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing"),w=t("../../lib"),e=t("../../registry"),o=t("./uniform_text").resizeText,a=t("./attributes"),n=a.textfont,r=a.insidetextfont,u=a.outsidetextfont,s=t("./helpers");function i(x){var c=d.select(x).selectAll("g.barlayer").selectAll("g.trace");o(x,c,"bar");var L=c.size(),S=x._fullLayout;c.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),c.selectAll("g.points").each(function(k){var P=d.select(this),z=k[0].trace;f(P,z,x)}),e.getComponentMethod("errorbars","style")(c)}function f(x,c,L){b.pointStyle(x.selectAll("path"),c,L),h(x,c,L)}function h(x,c,L){x.selectAll("text").each(function(S){var k=d.select(this),P=w.ensureUniformFontSize(L,g(k,S,c,L));b.font(k,P)})}function p(x,c,L){var S=c[0].trace;S.selectedpoints?v(L,S,x):(f(L,S,x),e.getComponentMethod("errorbars","style")(L))}function v(x,c,L){b.selectedPointStyle(x.selectAll("path"),c),y(x.selectAll("text"),c,L)}function y(x,c,L){x.each(function(S){var k=d.select(this),P;if(S.selected){P=w.ensureUniformFontSize(L,g(k,S,c,L));var z=c.selected.textfont&&c.selected.textfont.color;z&&(P.color=z),b.font(k,P)}else b.selectedTextStyle(k,c)})}function g(x,c,L,S){var k=S._fullLayout.font,P=L.textfont;if(x.classed("bartext-inside")){var z=T(c,L);P=m(L,c.i,k,z)}else x.classed("bartext-outside")&&(P=M(L,c.i,k));return P}function A(x,c,L){return _(n,x.textfont,c,L)}function m(x,c,L,S){var k=A(x,c,L),P=x._input.textfont===void 0||x._input.textfont.color===void 0||Array.isArray(x.textfont.color)&&x.textfont.color[c]===void 0;return P&&(k={color:l.contrast(S),family:k.family,size:k.size}),_(r,x.insidetextfont,c,k)}function M(x,c,L){var S=A(x,c,L);return _(u,x.outsidetextfont,c,S)}function _(x,c,L,S){c=c||{};var k=s.getValue(c.family,L),P=s.getValue(c.size,L),z=s.getValue(c.color,L);return{family:s.coerceString(x.family,k,S.family),size:s.coerceNumber(x.size,P,S.size),color:s.coerceColor(x.color,z,S.color)}}function T(x,c){return c.type==="waterfall"?c[x.dir].marker.color:x.mcc||x.mc||c.marker.color}B.exports={style:i,styleTextPoints:h,styleOnSelect:p,getInsideTextFont:m,getOutsideTextFont:M,getBarColor:T,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../lib").coercePattern;B.exports=function(o,a,n,r,u){var s=n("marker.color",r),i=l(o,"marker");i&&b(o,a,u,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",d.defaultLine),l(o,"marker.line")&&b(o,a,u,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),w(n,"marker.pattern",s,i),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib");function b(a,n,r){var u=a._fullLayout,s=u["_"+r+"Text_minsize"];if(s){var i=u.uniformtext.mode==="hide",f;switch(r){case"funnelarea":case"pie":case"sunburst":f="g.slice";break;case"treemap":case"icicle":f="g.slice, g.pathbar";break;default:f="g.points > g.point"}n.selectAll(f).each(function(h){var p=h.transform;if(p){p.scale=i&&p.hide?0:s/p.fontSize;var v=d.select(this).select("text");v.attr("transform",l.getTextTransform(p))}})}}function w(a,n,r){if(r.uniformtext.mode){var u=o(a),s=r.uniformtext.minsize,i=n.scale*n.fontSize;n.hide=i<s,r[u]=r[u]||1/0,n.hide||(r[u]=Math.min(r[u],Math.max(i,s)))}}function e(a,n){var r=o(a);n[r]=void 0}function o(a){return"_"+a+"Text_minsize"}B.exports={recordMinTextSize:w,clearMinTextSize:e,resizeText:b}},{"../../lib":503,"@plotly/d3":58}],665:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../lib/extend").extendFlat,b=t("../scatterpolar/attributes"),w=t("../bar/attributes");B.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:l({},w.base,{}),offset:l({},w.offset,{}),width:l({},w.width,{}),text:l({},w.text,{}),hovertext:l({},w.hovertext,{}),marker:w.marker,hoverinfo:b.hoverinfo,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(t,B,H){var d=t("../../components/colorscale/helpers").hasColorscale,l=t("../../components/colorscale/calc"),b=t("../bar/arrays_to_calcdata"),w=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),o=t("../../registry").traceIs,a=t("../../lib").extendFlat;function n(u,s){for(var i=u._fullLayout,f=s.subplot,h=i[f].radialaxis,p=i[f].angularaxis,v=h.makeCalcdata(s,"r"),y=p.makeCalcdata(s,"theta"),g=s._length,A=new Array(g),m=v,M=y,_=0;_<g;_++)A[_]={p:M[_],s:m[_]};function T(x){var c=s[x];c!==void 0&&(s["_"+x]=Array.isArray(c)?p.makeCalcdata(s,x):p.d2c(c,s.thetaunit))}return p.type==="linear"&&(T("width"),T("offset")),d(s,"marker")&&l(u,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),d(s,"marker.line")&&l(u,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(A,s),e(A,s),A}function r(u,s,i){for(var f=u.calcdata,h=[],p=0;p<f.length;p++){var v=f[p],y=v[0].trace;y.visible===!0&&o(y,"bar")&&y.subplot===i&&h.push(v)}var g=a({},s.radialaxis,{_id:"x"}),A=s.angularaxis;w(u,A,g,h,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}B.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(t,B,H){var d=t("../../lib"),l=t("../scatterpolar/defaults").handleRThetaDefaults,b=t("../bar/style_defaults"),w=t("./attributes");B.exports=function(o,a,n,r){function u(i,f){return d.coerce(o,a,w,i,f)}var s=l(o,a,r,u);if(!s){a.visible=!1;return}u("thetaunit"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate"),b(o,a,u,n,r),d.coerceSelectionMarkerOpacity(a,u)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../bar/hover").getTraceColor,w=l.fillText,e=t("../scatterpolar/hover").makeHoverPointText,o=t("../../plots/polar/helpers").isPtInsidePolygon;B.exports=function(n,r,u){var s=n.cd,i=s[0].trace,f=n.subplot,h=f.radialAxis,p=f.angularAxis,v=f.vangles,y=v?o:l.isPtInsideSector,g=n.maxHoverDistance,A=p._period||2*Math.PI,m=Math.abs(h.g2p(Math.sqrt(r*r+u*u))),M=Math.atan2(u,r);h.range[0]>h.range[1]&&(M+=Math.PI);var _=function(L){return y(m,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],v)?g+Math.min(1,Math.abs(L.thetag1-L.thetag0)/A)-1+(L.rp1-m)/(L.rp1-L.rp0)-1:1/0};if(d.getClosest(s,_,n),n.index!==!1){var T=n.index,x=s[T];n.x0=n.x1=x.ct[0],n.y0=n.y1=x.ct[1];var c=l.extendFlat({},x,{r:x.s,theta:x.p});return w(x,i,n),e(c,i,f,n),n.hovertemplate=i.hovertemplate,n.color=b(i,x),n.xLabelVal=n.yLabelVal=void 0,x.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(t,B,H){B.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(t,B,H){B.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o={},a;function n(s,i){return d.coerce(b[a]||{},w[a],l,s,i)}for(var r=0;r<e.length;r++){var u=e[r];u.type==="barpolar"&&u.visible===!0&&(a=u.subplot,o[a]||(n("barmode"),n("bargap"),o[a]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../components/drawing"),e=t("../../plots/polar/helpers");B.exports=function(n,r,u){var s=r.xaxis,i=r.yaxis,f=r.radialAxis,h=r.angularAxis,p=o(r),v=r.layers.frontplot.select("g.barlayer");b.makeTraceGroups(v,u,"trace bars").each(function(){var y=d.select(this),g=b.ensureSingle(y,"g","points"),A=g.selectAll("g.point").data(b.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(m){var M=d.select(this),_=m.rp0=f.c2p(m.s0),T=m.rp1=f.c2p(m.s1),x=m.thetag0=h.c2g(m.p0),c=m.thetag1=h.c2g(m.p1),L;if(!l(_)||!l(T)||!l(x)||!l(c)||_===T||x===c)L="M0,0Z";else{var S=f.c2g(m.s1),k=(x+c)/2;m.ct=[s.c2p(S*Math.cos(k)),i.c2p(S*Math.sin(k))],L=p(_,T,x,c)}b.ensureSingle(M,"path").attr("d",L)}),w.setClipUrl(y,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function o(a){var n=a.cxx,r=a.cyy;return a.vangles?function(u,s,i,f){var h,p;b.angleDelta(i,f)>0?(h=i,p=f):(h=f,p=i);var v=e.findEnclosingVertexAngles(h,a.vangles)[0],y=e.findEnclosingVertexAngles(p,a.vangles)[1],g=[v,(h+p)/2,y];return e.pathPolygonAnnulus(u,s,h,p,g,n,r)}:function(u,s,i,f){return b.pathAnnulus(u,s,i,f,n,r)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../bar/attributes"),b=t("../../components/color/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../lib/extend").extendFlat,a=d.marker,n=a.line;B.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},n.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:o({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:{marker:d.selected.marker,editType:"style"},unselected:{marker:d.unselected.marker,editType:"style"},text:o({},d.text,{}),hovertext:o({},d.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/align_period"),w=t("../../lib"),e=t("../../constants/numerical").BADNUM,o=w._;B.exports=function(M,_){var T=M._fullLayout,x=l.getFromId(M,_.xaxis||"x"),c=l.getFromId(M,_.yaxis||"y"),L=[],S=_.type==="violin"?"_numViolins":"_numBoxes",k,P,z,I,R,D,O;_.orientation==="h"?(z=x,I="x",R=c,D="y",O=!!_.yperiodalignment):(z=c,I="y",R=x,D="x",O=!!_.xperiodalignment);var F=a(_,D,R,T[S]),Y=F[0],X=F[1],q=w.distinctVals(Y,R),$=q.vals,V=q.minDiff/2,K,se,ue,oe,U,G,re=(_.boxpoints||_.points)==="all"?w.identity:function(kt){return kt.v<K.lf||kt.v>K.uf};if(_._hasPreCompStats){var ee=_[I],j=function(kt){return z.d2c((_[kt]||[])[k])},Q=1/0,ne=-1/0;for(k=0;k<_._length;k++){var ae=Y[k];if(!!d(ae)){if(K={},K.pos=K[D]=ae,O&&X&&(K.orig_p=X[k]),K.q1=j("q1"),K.med=j("median"),K.q3=j("q3"),se=[],ee&&w.isArrayOrTypedArray(ee[k]))for(P=0;P<ee[k].length;P++)G=z.d2c(ee[k][P]),G!==e&&(U={v:G,i:[k,P]},s(U,_,[k,P]),se.push(U));if(K.pts=se.sort(f),ue=K[I]=se.map(h),oe=ue.length,K.med!==e&&K.q1!==e&&K.q3!==e&&K.med>=K.q1&&K.q3>=K.med){var ie=j("lowerfence");K.lf=ie!==e&&ie<=K.q1?ie:p(K,ue,oe);var fe=j("upperfence");K.uf=fe!==e&&fe>=K.q3?fe:v(K,ue,oe);var me=j("mean");K.mean=me!==e?me:oe?w.mean(ue,oe):(K.q1+K.q3)/2;var ce=j("sd");K.sd=me!==e&&ce>=0?ce:oe?w.stdev(ue,oe,K.mean):K.q3-K.q1,K.lo=y(K),K.uo=g(K);var ye=j("notchspan");ye=ye!==e&&ye>0?ye:A(K,oe),K.ln=K.med-ye,K.un=K.med+ye;var xe=K.lf,ke=K.uf;_.boxpoints&&ue.length&&(xe=Math.min(xe,ue[0]),ke=Math.max(ke,ue[oe-1])),_.notched&&(xe=Math.min(xe,K.ln),ke=Math.max(ke,K.un)),K.min=xe,K.max=ke}else{w.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+K.q1,"median = "+K.med,"q3 = "+K.q3].join(`
`));var Ae;K.med!==e?Ae=K.med:K.q1!==e?K.q3!==e?Ae=(K.q1+K.q3)/2:Ae=K.q1:K.q3!==e?Ae=K.q3:Ae=0,K.med=Ae,K.q1=K.q3=Ae,K.lf=K.uf=Ae,K.mean=K.sd=Ae,K.ln=K.un=Ae,K.min=K.max=Ae}Q=Math.min(Q,K.min),ne=Math.max(ne,K.max),K.pts2=se.filter(re),L.push(K)}}_._extremes[z._id]=l.findExtremes(z,[Q,ne],{padded:!0})}else{var Oe=z.makeCalcdata(_,I),He=n($,V),Ge=$.length,_e=r(Ge);for(k=0;k<_._length;k++)if(G=Oe[k],!!d(G)){var Ie=w.findBin(Y[k],He);Ie>=0&&Ie<Ge&&(U={v:G,i:k},s(U,_,k),_e[Ie].push(U))}var Ye=1/0,qe=-1/0,Ue=_.quartilemethod,Re=Ue==="exclusive",Ve=Ue==="inclusive";for(k=0;k<Ge;k++)if(_e[k].length>0){if(K={},K.pos=K[D]=$[k],se=K.pts=_e[k].sort(f),ue=K[I]=se.map(h),oe=ue.length,K.min=ue[0],K.max=ue[oe-1],K.mean=w.mean(ue,oe),K.sd=w.stdev(ue,oe,K.mean),K.med=w.interp(ue,.5),oe%2&&(Re||Ve)){var dt,Dt;Re?(dt=ue.slice(0,oe/2),Dt=ue.slice(oe/2+1)):Ve&&(dt=ue.slice(0,oe/2+1),Dt=ue.slice(oe/2)),K.q1=w.interp(dt,.5),K.q3=w.interp(Dt,.5)}else K.q1=w.interp(ue,.25),K.q3=w.interp(ue,.75);K.lf=p(K,ue,oe),K.uf=v(K,ue,oe),K.lo=y(K),K.uo=g(K);var Gt=A(K,oe);K.ln=K.med-Gt,K.un=K.med+Gt,Ye=Math.min(Ye,K.ln),qe=Math.max(qe,K.un),K.pts2=se.filter(re),L.push(K)}_._extremes[z._id]=l.findExtremes(z,_.notched?Oe.concat([Ye,qe]):Oe,{padded:!0})}return i(L,_),L.length>0?(L[0].t={num:T[S],dPos:V,posLetter:D,valLetter:I,labels:{med:o(M,"median:"),min:o(M,"min:"),q1:o(M,"q1:"),q3:o(M,"q3:"),max:o(M,"max:"),mean:_.boxmean==="sd"?o(M,"mean \xB1 \u03C3:"):o(M,"mean:"),lf:o(M,"lower fence:"),uf:o(M,"upper fence:")}},T[S]++,L):[{t:{empty:!0}}]};function a(m,M,_,T){var x=M in m,c=M+"0"in m,L="d"+M in m;if(x||c&&L){var S=_.makeCalcdata(m,M),k=b(m,_,M,S).vals;return[k,S]}var P;c?P=m[M+"0"]:"name"in m&&(_.type==="category"||d(m.name)&&["linear","log"].indexOf(_.type)!==-1||w.isDateTime(m.name)&&_.type==="date")?P=m.name:P=T;for(var z=_.type==="multicategory"?_.r2c_just_indices(P):_.d2c(P,0,m[M+"calendar"]),I=m._length,R=new Array(I),D=0;D<I;D++)R[D]=z;return[R]}function n(m,M){for(var _=m.length,T=new Array(_+1),x=0;x<_;x++)T[x]=m[x]-M;return T[_]=m[_-1]+M,T}function r(m){for(var M=new Array(m),_=0;_<m;_++)M[_]=[];return M}var u={text:"tx",hovertext:"htx"};function s(m,M,_){for(var T in u)w.isArrayOrTypedArray(M[T])&&(Array.isArray(_)?w.isArrayOrTypedArray(M[T][_[0]])&&(m[u[T]]=M[T][_[0]][_[1]]):m[u[T]]=M[T][_])}function i(m,M){if(w.isArrayOrTypedArray(M.selectedpoints))for(var _=0;_<m.length;_++){for(var T=m[_].pts||[],x={},c=0;c<T.length;c++)x[T[c].i]=c;w.tagSelected(T,M,x)}}function f(m,M){return m.v-M.v}function h(m){return m.v}function p(m,M,_){return _===0?m.q1:Math.min(m.q1,M[Math.min(w.findBin(2.5*m.q1-1.5*m.q3,M,!0)+1,_-1)])}function v(m,M,_){return _===0?m.q3:Math.max(m.q3,M[Math.max(w.findBin(2.5*m.q3-1.5*m.q1,M),0)])}function y(m){return 4*m.q1-3*m.q3}function g(m){return 4*m.q3-3*m.q1}function A(m,M){return M===0?0:1.57*(m.q3-m.q1)/Math.sqrt(M)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../plots/cartesian/constraints").getAxisGroup,w=["v","h"];function e(a,n){for(var r=a.calcdata,u=n.xaxis,s=n.yaxis,i=0;i<w.length;i++){for(var f=w[i],h=f==="h"?s:u,p=[],v=0;v<r.length;v++){var y=r[v],g=y[0].t,A=y[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!g.empty&&(A.orientation||"v")===f&&A.xaxis===u._id&&A.yaxis===s._id&&p.push(v)}o("box",a,p,h)}}function o(a,n,r,u){var s=n.calcdata,i=n._fullLayout,f=u._id,h=f.charAt(0),p,v,y,g=[],A=0;for(p=0;p<r.length;p++)for(y=s[r[p]],v=0;v<y.length;v++)g.push(u.c2l(y[v].pos,!0)),A+=(y[v].pts2||[]).length;if(!!g.length){var m=l.distinctVals(g);(u.type==="category"||u.type==="multicategory")&&(m.minDiff=1);var M=m.minDiff/2;d.minDtick(u,m.minDiff,m.vals[0],!0);var _=a==="violin"?"_numViolins":"_numBoxes",T=i[_],x=i[a+"mode"]==="group"&&T>1,c=1-i[a+"gap"],L=1-i[a+"groupgap"];for(p=0;p<r.length;p++){y=s[r[p]];var S=y[0].trace,k=y[0].t,P=S.width,z=S.side,I,R,D,O;if(P)I=R=O=P/2,D=0;else if(I=M,x){var F=b(i,u._id)+S.orientation,Y=i._alignmentOpts[F]||{},X=Y[S.alignmentgroup]||{},q=Object.keys(X.offsetGroups||{}).length,$=q||T,V=q?S._offsetIndex:k.num;R=I*c*L/$,D=2*I*(-.5+(V+.5)/$)*c,O=I*c/$}else R=I*c*L,D=0,O=I;k.dPos=I,k.bPos=D,k.bdPos=R,k.wHover=O;var K,se,ue=D+R,oe,U,G,re,ee,j,Q=Boolean(P),ne=(S.boxpoints||S.points)&&A>0;if(z==="positive"?(K=I*(P?1:.5),oe=ue,se=oe=D):z==="negative"?(K=oe=D,se=I*(P?1:.5),U=ue):(K=se=I,oe=U=ue),ne){var ae=S.pointpos,ie=S.jitter,fe=S.marker.size/2,me=0;ae+ie>=0&&(me=ue*(ae+ie),me>K?(Q=!0,ee=fe,G=me):me>oe&&(ee=fe,G=K)),me<=K&&(G=K);var ce=0;ae-ie<=0&&(ce=-ue*(ae-ie),ce>se?(Q=!0,j=fe,re=ce):ce>U&&(j=fe,re=se)),ce<=se&&(re=se)}else G=K,re=se;var ye=new Array(y.length);for(v=0;v<y.length;v++)ye[v]=y[v].pos;S._extremes[f]=d.findExtremes(u,ye,{padded:Q,vpadminus:re,vpadplus:G,vpadLinearized:!0,ppadminus:{x:j,y:ee}[h],ppadplus:{x:ee,y:j}[h]})}}}B.exports={crossTraceCalc:e,setPositionOffset:o}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("../../components/color"),w=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,o=t("../../plots/cartesian/axis_autotype"),a=t("./attributes");function n(i,f,h,p){function v(x,c){return d.coerce(i,f,a,x,c)}if(r(i,f,v,p),f.visible!==!1){w(i,f,p,v),v("xhoverformat"),v("yhoverformat");var y=f._hasPreCompStats;y&&(v("lowerfence"),v("upperfence")),v("line.color",(i.marker||{}).color||h),v("line.width"),v("fillcolor",b.addOpacity(f.line.color,.5));var g=!1;if(y){var A=v("mean"),m=v("sd");A&&A.length&&(g=!0,m&&m.length&&(g="sd"))}v("boxmean",g),v("whiskerwidth"),v("width"),v("quartilemethod");var M=!1;if(y){var _=v("notchspan");_&&_.length&&(M=!0)}else d.validate(i.notchwidth,a.notchwidth)&&(M=!0);var T=v("notched",M);T&&v("notchwidth"),u(i,f,v,{prefix:"box"})}}function r(i,f,h,p){function v(q){var $=0;return q&&q.length&&($+=1,d.isArrayOrTypedArray(q[0])&&q[0].length&&($+=1)),$}function y(q){return d.validate(i[q],a[q])}var g=h("y"),A=h("x"),m;if(f.type==="box"){var M=h("q1"),_=h("median"),T=h("q3");f._hasPreCompStats=M&&M.length&&_&&_.length&&T&&T.length,m=Math.min(d.minRowLength(M),d.minRowLength(_),d.minRowLength(T))}var x=v(g),c=v(A),L=x&&d.minRowLength(g),S=c&&d.minRowLength(A),k=p.calendar,P={autotypenumbers:p.autotypenumbers},z,I;if(f._hasPreCompStats)switch(String(c)+String(x)){case"00":var R=y("x0")||y("dx"),D=y("y0")||y("dy");D&&!R?z="h":z="v",I=m;break;case"10":z="v",I=Math.min(m,S);break;case"20":z="h",I=Math.min(m,A.length);break;case"01":z="h",I=Math.min(m,L);break;case"02":z="v",I=Math.min(m,g.length);break;case"12":z="v",I=Math.min(m,S,g.length);break;case"21":z="h",I=Math.min(m,A.length,L);break;case"11":I=0;break;case"22":var O=!1,F;for(F=0;F<A.length;F++)if(o(A[F],k,P)==="category"){O=!0;break}if(O)z="v",I=Math.min(m,S,g.length);else{for(F=0;F<g.length;F++)if(o(g[F],k,P)==="category"){O=!0;break}O?(z="h",I=Math.min(m,A.length,L)):(z="v",I=Math.min(m,S,g.length))}break}else x>0?(z="v",c>0?I=Math.min(S,L):I=Math.min(L)):c>0?(z="h",I=Math.min(S)):I=0;if(!I){f.visible=!1;return}f._length=I;var Y=h("orientation",z);f._hasPreCompStats?Y==="v"&&c===0?(h("x0",0),h("dx",1)):Y==="h"&&x===0&&(h("y0",0),h("dy",1)):Y==="v"&&c===0?h("x0"):Y==="h"&&x===0&&h("y0");var X=l.getComponentMethod("calendars","handleTraceDefaults");X(i,f,["x","y"],p)}function u(i,f,h,p){var v=p.prefix,y=d.coerce2(i,f,a,"marker.outliercolor"),g=h("marker.line.outliercolor"),A="outliers";f._hasPreCompStats?A="all":(y||g)&&(A="suspectedoutliers");var m=h(v+"points",A);m?(h("jitter",m==="all"?.3:0),h("pointpos",m==="all"?-1.5:0),h("marker.symbol"),h("marker.opacity"),h("marker.size"),h("marker.color",f.line.color),h("marker.line.color"),h("marker.line.width"),m==="suspectedoutliers"&&(h("marker.line.outliercolor",f.marker.color),h("marker.line.outlierwidth")),h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size"),h("text"),h("hovertext")):delete f.marker;var M=h("hoveron");(M==="all"||M.indexOf("points")!==-1)&&h("hovertemplate"),d.coerceSelectionMarkerOpacity(f,h)}function s(i,f){var h,p;function v(A){return d.coerce(p._input,p,a,A)}for(var y=0;y<i.length;y++){p=i[y];var g=p.type;(g==="box"||g==="violin")&&(h=p._input,f[g+"mode"]==="group"&&e(h,p,f,v))}}B.exports={supplyDefaults:n,crossTraceDefaults:s,handleSampleDefaults:r,handlePointsDefaults:u}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(t,B,H){B.exports=function(l,b){return b.hoverOnBox&&(l.hoverOnBox=b.hoverOnBox),"xVal"in b&&(l.x=b.xVal),"yVal"in b&&(l.y=b.yVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],678:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../components/fx"),w=t("../../components/color"),e=l.fillText;function o(r,u,s,i){var f=r.cd,h=f[0].trace,p=h.hoveron,v=[],y;return p.indexOf("boxes")!==-1&&(v=v.concat(a(r,u,s,i))),p.indexOf("points")!==-1&&(y=n(r,u,s)),i==="closest"?y?[y]:v:(y&&v.push(y),v)}function a(r,u,s,i){var f=r.cd,h=r.xa,p=r.ya,v=f[0].trace,y=f[0].t,g=v.type==="violin",A=[],m,M,_,T,x,c,L,S,k,P,z,I=y.bdPos,R,D,O=y.wHover,F=function(ne){return _.c2l(ne.pos)+y.bPos-_.c2l(c)};g&&v.side!=="both"?(v.side==="positive"&&(k=function(ne){var ae=F(ne);return b.inbox(ae,ae+O,P)},R=I,D=0),v.side==="negative"&&(k=function(ne){var ae=F(ne);return b.inbox(ae-O,ae,P)},R=0,D=I)):(k=function(ne){var ae=F(ne);return b.inbox(ae-O,ae+O,P)},R=D=I);var Y;g?Y=function(ne){return b.inbox(ne.span[0]-x,ne.span[1]-x,P)}:Y=function(ne){return b.inbox(ne.min-x,ne.max-x,P)},v.orientation==="h"?(x=u,c=s,L=Y,S=k,m="y",_=p,M="x",T=h):(x=s,c=u,L=k,S=Y,m="x",_=h,M="y",T=p);var X=Math.min(1,I/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));P=r.maxHoverDistance-X,z=r.maxSpikeDistance-X;function q(ne){return(L(ne)+S(ne))/2}var $=b.getDistanceFunction(i,L,S,q);if(b.getClosest(f,$,r),r.index===!1)return[];var V=f[r.index],K=v.line.color,se=(v.marker||{}).color;w.opacity(K)&&v.line.width?r.color=K:w.opacity(se)&&v.boxpoints?r.color=se:r.color=v.fillcolor,r[m+"0"]=_.c2p(V.pos+y.bPos-D,!0),r[m+"1"]=_.c2p(V.pos+y.bPos+R,!0),r[m+"LabelVal"]=V.orig_p!==void 0?V.orig_p:V.pos;var ue=m+"Spike";r.spikeDistance=q(V)*z/P,r[ue]=_.c2p(V.pos,!0);var oe={},U=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&U.push("mean"),(v.boxpoints||v.points)&&U.push("lf","uf");for(var G=0;G<U.length;G++){var re=U[G];if(!(!(re in V)||V[re]in oe)){oe[V[re]]=!0;var ee=V[re],j=T.c2p(ee,!0),Q=l.extendFlat({},r);Q.attr=re,Q[M+"0"]=Q[M+"1"]=j,Q[M+"LabelVal"]=ee,Q[M+"Label"]=(y.labels?y.labels[re]+" ":"")+d.hoverLabelText(T,ee,v[M+"hoverformat"]),Q.hoverOnBox=!0,re==="mean"&&"sd"in V&&v.boxmean==="sd"&&(Q[M+"err"]=V.sd),r.name="",r.spikeDistance=void 0,r[ue]=void 0,Q.hovertemplate=!1,A.push(Q)}}return A}function n(r,u,s){for(var i=r.cd,f=r.xa,h=r.ya,p=i[0].trace,v=f.c2p(u),y=h.c2p(s),g,A=function(F){var Y=Math.max(3,F.mrc||0);return Math.max(Math.abs(f.c2p(F.x)-v)-Y,1-3/Y)},m=function(F){var Y=Math.max(3,F.mrc||0);return Math.max(Math.abs(h.c2p(F.y)-y)-Y,1-3/Y)},M=b.quadrature(A,m),_=!1,T,x,c=0;c<i.length;c++){T=i[c];for(var L=0;L<(T.pts||[]).length;L++){x=T.pts[L];var S=M(x);S<=r.distance&&(r.distance=S,_=[c,L])}}if(!_)return!1;T=i[_[0]],x=T.pts[_[1]];var k=f.c2p(x.x,!0),P=h.c2p(x.y,!0),z=x.mrc||1;g=l.extendFlat({},r,{index:x.i,color:(p.marker||{}).color,name:p.name,x0:k-z,x1:k+z,y0:P-z,y1:P+z,spikeDistance:r.distance,hovertemplate:p.hovertemplate});var I=T.orig_p,R=I!==void 0?I:T.pos,D;p.orientation==="h"?(D=h,g.xLabelVal=x.x,g.yLabelVal=R):(D=f,g.xLabelVal=R,g.yLabelVal=x.y);var O=D._id.charAt(0);return g[O+"Spike"]=D.c2p(T.pos,!0),e(x,p,g),g}B.exports={hoverPoints:o,hoverOnBoxes:a,hoverOnPoints:n}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(t,B,H){B.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("./layout_attributes");function w(o,a,n,r,u){for(var s=u+"Layout",i=!1,f=0;f<n.length;f++){var h=n[f];if(d.traceIs(h,s)){i=!0;break}}!i||(r(u+"mode"),r(u+"gap"),r(u+"groupgap"))}function e(o,a,n){function r(u,s){return l.coerce(o,a,b,u,s)}w(o,a,n,r,"box")}B.exports={supplyLayoutDefaults:e,_supply:w}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=5,e=.01;function o(u,s,i,f){var h=s.xaxis,p=s.yaxis;l.makeTraceGroups(f,i,"trace boxes").each(function(v){var y=d.select(this),g=v[0],A=g.t,m=g.trace;if(A.wdPos=A.bdPos*m.whiskerwidth,m.visible!==!0||A.empty){y.remove();return}var M,_;m.orientation==="h"?(M=p,_=h):(M=h,_=p),a(y,{pos:M,val:_},m,A),n(y,{x:h,y:p},m,A),r(y,{pos:M,val:_},m,A)})}function a(u,s,i,f){var h=i.orientation==="h",p=s.val,v=s.pos,y=!!v.rangebreaks,g=f.bPos,A=f.wdPos||0,m=f.bPosPxOffset||0,M=i.whiskerwidth||0,_=i.notched||!1,T=_?1-2*i.notchwidth:1,x,c;Array.isArray(f.bdPos)?(x=f.bdPos[0],c=f.bdPos[1]):(x=f.bdPos,c=f.bdPos);var L=u.selectAll("path.box").data(i.type!=="violin"||i.box.visible?l.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=v.c2l(S.pos+g,!0),P=v.l2p(k-x)+m,z=v.l2p(k+c)+m,I=y?(P+z)/2:v.l2p(k)+m,R=i.whiskerwidth,D=y?P*R+(1-R)*I:v.l2p(k-A)+m,O=y?z*R+(1-R)*I:v.l2p(k+A)+m,F=v.l2p(k-x*T)+m,Y=v.l2p(k+c*T)+m,X=p.c2p(S.q1,!0),q=p.c2p(S.q3,!0),$=l.constrain(p.c2p(S.med,!0),Math.min(X,q)+1,Math.max(X,q)-1),V=S.lf===void 0||i.boxpoints===!1,K=p.c2p(V?S.min:S.lf,!0),se=p.c2p(V?S.max:S.uf,!0),ue=p.c2p(S.ln,!0),oe=p.c2p(S.un,!0);h?d.select(this).attr("d","M"+$+","+F+"V"+Y+"M"+X+","+P+"V"+z+(_?"H"+ue+"L"+$+","+Y+"L"+oe+","+z:"")+"H"+q+"V"+P+(_?"H"+oe+"L"+$+","+F+"L"+ue+","+P:"")+"ZM"+X+","+I+"H"+K+"M"+q+","+I+"H"+se+(M===0?"":"M"+K+","+D+"V"+O+"M"+se+","+D+"V"+O)):d.select(this).attr("d","M"+F+","+$+"H"+Y+"M"+P+","+X+"H"+z+(_?"V"+ue+"L"+Y+","+$+"L"+z+","+oe:"")+"V"+q+"H"+P+(_?"V"+oe+"L"+F+","+$+"L"+P+","+ue:"")+"ZM"+I+","+X+"V"+K+"M"+I+","+q+"V"+se+(M===0?"":"M"+D+","+K+"H"+O+"M"+D+","+se+"H"+O))})}function n(u,s,i,f){var h=s.x,p=s.y,v=f.bdPos,y=f.bPos,g=i.boxpoints||i.points;l.seedPseudoRandom();var A=function(_){return _.forEach(function(T){T.t=f,T.trace=i}),_},m=u.selectAll("g.points").data(g?A:[]);m.enter().append("g").attr("class","points"),m.exit().remove();var M=m.selectAll("path").data(function(_){var T,x=_.pts2,c=Math.max((_.max-_.min)/10,_.q3-_.q1),L=c*1e-9,S=c*e,k=[],P=0,z;if(i.jitter){if(c===0)for(P=1,k=new Array(x.length),T=0;T<x.length;T++)k[T]=1;else for(T=0;T<x.length;T++){var I=Math.max(0,T-w),R=x[I].v,D=Math.min(x.length-1,T+w),O=x[D].v;g!=="all"&&(x[T].v<_.lf?O=Math.min(O,_.lf):R=Math.max(R,_.uf));var F=Math.sqrt(S*(D-I)/(O-R+L))||0;F=l.constrain(Math.abs(F),0,1),k.push(F),P=Math.max(F,P)}z=i.jitter*2/(P||1)}for(T=0;T<x.length;T++){var Y=x[T],X=Y.v,q=i.jitter?z*k[T]*(l.pseudoRandom()-.5):0,$=_.pos+y+v*(i.pointpos+q);i.orientation==="h"?(Y.y=$,Y.x=X):(Y.x=$,Y.y=X),g==="suspectedoutliers"&&X<_.uo&&X>_.lo&&(Y.so=!0)}return x});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(b.translatePoints,h,p)}function r(u,s,i,f){var h=s.val,p=s.pos,v=!!p.rangebreaks,y=f.bPos,g=f.bPosPxOffset||0,A=i.boxmean||(i.meanline||{}).visible,m,M;Array.isArray(f.bdPos)?(m=f.bdPos[0],M=f.bdPos[1]):(m=f.bdPos,M=f.bdPos);var _=u.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?l.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(T){var x=p.c2l(T.pos+y,!0),c=p.l2p(x-m)+g,L=p.l2p(x+M)+g,S=v?(c+L)/2:p.l2p(x)+g,k=h.c2p(T.mean,!0),P=h.c2p(T.mean-T.sd,!0),z=h.c2p(T.mean+T.sd,!0);i.orientation==="h"?d.select(this).attr("d","M"+k+","+c+"V"+L+(A==="sd"?"m0,0L"+P+","+S+"L"+k+","+c+"L"+z+","+S+"Z":"")):d.select(this).attr("d","M"+c+","+k+"H"+L+(A==="sd"?"m0,0L"+S+","+P+"L"+c+","+k+"L"+S+","+z+"Z":""))})}B.exports={plot:o,plotBoxAndWhiskers:a,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],n,r;if(b===!1)for(n=0;n<w.length;n++)for(r=0;r<(w[n].pts||[]).length;r++)w[n].pts[r].selected=0;else for(n=0;n<w.length;n++)for(r=0;r<(w[n].pts||[]).length;r++){var u=w[n].pts[r],s=e.c2p(u.x),i=o.c2p(u.y);b.contains([s,i],null,u.i,l)?(a.push({pointNumber:u.i,x:e.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0}return a}},{}],684:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing");function w(o,a,n){var r=n||d.select(o).selectAll("g.trace.boxes");r.style("opacity",function(u){return u[0].trace.opacity}),r.each(function(u){var s=d.select(this),i=u[0].trace,f=i.line.width;function h(y,g,A,m){y.style("stroke-width",g+"px").call(l.stroke,A).call(l.fill,m)}var p=s.selectAll("path.box");if(i.type==="candlestick")p.each(function(y){if(!y.empty){var g=d.select(this),A=i[y.dir];h(g,A.line.width,A.line.color,A.fillcolor),g.style("opacity",i.selectedpoints&&!y.selected?.3:1)}});else{h(p,f,i.line.color,i.fillcolor),s.selectAll("path.mean").style({"stroke-width":f,"stroke-dasharray":2*f+"px,"+f+"px"}).call(l.stroke,i.line.color);var v=s.selectAll("path.point");b.pointStyle(v,i,o)}})}function e(o,a,n){var r=a[0].trace,u=n.selectAll("path.point");r.selectedpoints?b.selectedPointStyle(u,r):b.pointStyle(u,r,o)}B.exports={style:w,styleOnSelect:e}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(t,B,H){var d=t("../../lib").extendFlat,l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../ohlc/attributes"),w=t("../box/attributes");function e(o){return{line:{color:d({},w.line.color,{dflt:o}),width:w.line.width,editType:"style"},fillcolor:w.fillcolor,editType:"style"}}B.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:d({},w.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:d({},w.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/align_period"),w=t("../ohlc/calc").calcCommon;B.exports=function(o,a){var n=o._fullLayout,r=l.getFromId(o,a.xaxis),u=l.getFromId(o,a.yaxis),s=r.makeCalcdata(a,"x"),i=b(a,r,"x",s).vals,f=w(o,a,s,i,u,e);return f.length?(d.extendFlat(f[0].t,{num:n._numBoxes,dPos:d.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,f):[{t:{empty:!0}}]};function e(o,a,n,r){return{min:n,q1:Math.min(o,r),med:r,q3:Math.max(o,r),max:a}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../ohlc/ohlc_defaults"),w=t("../scatter/period_defaults"),e=t("./attributes");B.exports=function(n,r,u,s){function i(h,p){return d.coerce(n,r,e,h,p)}var f=b(n,r,i,s);if(!f){r.visible=!1;return}w(n,r,s,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),o(n,r,i,"increasing"),o(n,r,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),s._requestRangeslider[r.xaxis]=!0};function o(a,n,r,u){var s=r(u+".line.color");r(u+".line.width",n.line.width),r(u+".fillcolor",l.addOpacity(s,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(t,B,H){B.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(t,B,H){var d=t("./axis_defaults"),l=t("../../plot_api/plot_template");B.exports=function(e,o,a,n,r){var u=n("a");u||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),b(e,o,a,r)};function b(w,e,o,a){var n=["aaxis","baxis"];n.forEach(function(r){var u=r.charAt(0),s=w[r]||{},i=l.newContainer(e,r),f={tickfont:"x",id:u+"axis",letter:u,font:e.font,name:r,data:w[u],calendar:e.calendar,dfltColor:a,bgColor:o.paper_bgcolor,autotypenumbersDflt:o.autotypenumbers,fullLayout:o};d(s,i,f),i._categories=i._categories||[],!w[r]&&s.type!=="-"&&(w[r]={type:s.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(b){return l(b,0)};function l(b,w){if(!d(b)||w>=10)return null;for(var e=1/0,o=-1/0,a=b.length,n=0;n<a;n++){var r=b[n];if(d(r)){var u=l(r,w+1);u&&(e=Math.min(u[0],e),o=Math.max(u[1],o))}else e=Math.min(r,e),o=Math.max(r,o)}return[e,o]}},{"../../lib":503}],691:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("./axis_attributes"),b=t("../../components/color/attributes"),w=d({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=b.defaultLine,B.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:l,baxis:l,font:w,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(l,b,w,e){var o,a,n,r,u,s,i,f,h,p,v,y,g,A=d(w)?"a":"b",m=A==="a"?l.aaxis:l.baxis,M=m.smoothing,_=A==="a"?l.a2i:l.b2j,T=A==="a"?w:e,x=A==="a"?e:w,c=A==="a"?b.a.length:b.b.length,L=A==="a"?b.b.length:b.a.length,S=Math.floor(A==="a"?l.b2j(x):l.a2i(x)),k=A==="a"?function(V){return l.evalxy([],V,S)}:function(V){return l.evalxy([],S,V)};M&&(n=Math.max(0,Math.min(L-2,S)),r=S-n,a=A==="a"?function(V,K){return l.dxydi([],V,n,K,r)}:function(V,K){return l.dxydj([],n,V,r,K)});var P=_(T[0]),z=_(T[1]),I=P<z?1:-1,R=(z-P)*1e-8,D=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,F=I>0?Math.min:Math.max,Y=I>0?Math.max:Math.min,X=D(P+R),q=O(z-R);i=k(P);var $=[[i]];for(o=X;o*I<q*I;o+=I)u=[],v=Y(P,o),y=F(z,o+I),g=y-v,s=Math.max(0,Math.min(c-2,Math.floor(.5*(v+y)))),f=k(y),M&&(h=a(s,v-s),p=a(s,y-s),u.push([i[0]+h[0]/3*g,i[1]+h[1]/3*g]),u.push([f[0]-p[0]/3*g,f[1]-p[1]/3*g])),u.push(f),$.push(u),i=f;return $}},{"../../lib":503}],693:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../components/color/attributes"),b=t("../../plots/cartesian/layout_attributes"),w=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll;B.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:d({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:w("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:l.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(t,B,H){var d=t("./attributes"),l=t("../../components/color").addOpacity,b=t("../../registry"),w=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),n=t("../../plots/cartesian/category_order_defaults"),r=t("../../plots/cartesian/set_convert"),u=t("../../plots/cartesian/axis_autotype");B.exports=function(f,h,p){var v=p.letter,y=p.font||{},g=d[v+"axis"];function A(Y,X){return w.coerce(f,h,g,Y,X)}function m(Y,X){return w.coerce2(f,h,g,Y,X)}p.name&&(h._name=p.name,h._id=p.name),A("autotypenumbers",p.autotypenumbersDflt);var M=A("type");if(M==="-"&&(p.data&&s(h,p.data),h.type==="-"?h.type="linear":M=f.type=h.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",v+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),h.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),h._hovertitle=v,M==="date"){var _=b.getComponentMethod("calendars","handleDefaults");_(f,h,"calendar",p.calendar)}r(h,p.fullLayout),h.c2p=w.identity;var T=A("color",p.dfltColor),x=T===f.color?T:y.color,c=A("title.text");c&&(w.coerceFont(A,"title.font",{family:y.family,size:w.bigFont(y.size),color:x}),A("title.offset")),A("tickangle");var L=A("autorange",!h.isValidRange(f.range));L&&A("rangemode"),A("range"),h.cleanRange(),A("fixedrange"),e(f,h,A,M),a(f,h,A,M,p),o(f,h,A,M,p),n(f,h,A,{data:p.data,dataAttr:v});var S=m("gridcolor",l(T,.3)),k=m("gridwidth"),P=A("showgrid");P||(delete h.gridcolor,delete h.gridwidth);var z=m("startlinecolor",T),I=m("startlinewidth",k),R=A("startline",h.showgrid||!!z||!!I);R||(delete h.startlinecolor,delete h.startlinewidth);var D=m("endlinecolor",T),O=m("endlinewidth",k),F=A("endline",h.showgrid||!!D||!!O);return F||(delete h.endlinecolor,delete h.endlinewidth),P?(A("minorgridcount"),A("minorgridwidth",k),A("minorgridcolor",l(S,.06)),h.minorgridcount||(delete h.minorgridwidth,delete h.minorgridcolor)):(delete h.gridcolor,delete h.gridWidth),h.showticklabels==="none"&&(delete h.tickfont,delete h.tickangle,delete h.showexponent,delete h.exponentformat,delete h.minexponent,delete h.tickformat,delete h.showticksuffix,delete h.showtickprefix),h.showticksuffix||delete h.ticksuffix,h.showtickprefix||delete h.tickprefix,A("tickmode"),h};function s(i,f){if(i.type==="-"){var h=i._id,p=h.charAt(0),v=p+"calendar",y=i[v];i.type=u(f,y,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib").isArray1D,b=t("./cheater_basis"),w=t("./array_minmax"),e=t("./calc_gridlines"),o=t("./calc_labels"),a=t("./calc_clippath"),n=t("../heatmap/clean_2d_array"),r=t("./smooth_fill_2d_array"),u=t("../heatmap/convert_column_xyz"),s=t("./set_convert");B.exports=function(f,h){var p=d.getFromId(f,h.xaxis),v=d.getFromId(f,h.yaxis),y=h.aaxis,g=h.baxis,A=h.x,m=h.y,M=[];A&&l(A)&&M.push("x"),m&&l(m)&&M.push("y"),M.length&&u(h,y,g,"a","b",M);var _=h._a=h._a||h.a,T=h._b=h._b||h.b;A=h._x||h.x,m=h._y||h.y;var x={};if(h._cheater){var c=y.cheatertype==="index"?_.length:_,L=g.cheatertype==="index"?T.length:T;A=b(c,L,h.cheaterslope)}h._x=A=n(A),h._y=m=n(m),r(A,_,T),r(m,_,T),s(h),h.setScale();var S=w(A),k=w(m),P=.5*(S[1]-S[0]),z=.5*(S[1]+S[0]),I=.5*(k[1]-k[0]),R=.5*(k[1]+k[0]),D=1.3;return S=[z-P*D,z+P*D],k=[R-I*D,R+I*D],h._extremes[p._id]=d.findExtremes(p,S,{padded:!0}),h._extremes[v._id]=d.findExtremes(v,k,{padded:!0}),e(h,"a","b"),e(h,"b","a"),o(h,y),o(h,g),x.clipsegments=a(h._xctrl,h._yctrl,y,g),x.x=A,x.y=m,x.a=_,x.b=T,[x]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(t,B,H){B.exports=function(l,b,w,e){var o,a,n,r=[],u=!!w.smoothing,s=!!e.smoothing,i=l[0].length-1,f=l.length-1;for(o=0,a=[],n=[];o<=i;o++)a[o]=l[0][o],n[o]=b[0][o];for(r.push({x:a,y:n,bicubic:u}),o=0,a=[],n=[];o<=f;o++)a[o]=l[o][i],n[o]=b[o][i];for(r.push({x:a,y:n,bicubic:s}),o=i,a=[],n=[];o>=0;o--)a[i-o]=l[f][o],n[i-o]=b[f][o];for(r.push({x:a,y:n,bicubic:u}),o=f,a=[],n=[];o>=0;o--)a[f-o]=l[o][0],n[f-o]=b[o][0];return r.push({x:a,y:n,bicubic:s}),r}},{}],697:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib/extend").extendFlat;B.exports=function(w,e,o){var a,n,r,u,s,i,f,h,p,v,y,g,A,m,M=w["_"+e],_=w[e+"axis"],T=_._gridlines=[],x=_._minorgridlines=[],c=_._boundarylines=[],L=w["_"+o],S=w[o+"axis"];_.tickmode==="array"&&(_.tickvals=M.slice());var k=w._xctrl,P=w._yctrl,z=k[0].length,I=k.length,R=w._a.length,D=w._b.length;d.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var O=_.smoothing?3:1;function F(X){var q,$,V,K,se,ue,oe,U,G,re,ee,j,Q=[],ne=[],ae={};if(e==="b")for($=w.b2j(X),V=Math.floor(Math.max(0,Math.min(D-2,$))),K=$-V,ae.length=D,ae.crossLength=R,ae.xy=function(ie){return w.evalxy([],ie,$)},ae.dxy=function(ie,fe){return w.dxydi([],ie,V,fe,K)},q=0;q<R;q++)ue=Math.min(R-2,q),oe=q-ue,U=w.evalxy([],q,$),S.smoothing&&q>0&&(G=w.dxydi([],q-1,V,0,K),Q.push(se[0]+G[0]/3),ne.push(se[1]+G[1]/3),re=w.dxydi([],q-1,V,1,K),Q.push(U[0]-re[0]/3),ne.push(U[1]-re[1]/3)),Q.push(U[0]),ne.push(U[1]),se=U;else for(q=w.a2i(X),ue=Math.floor(Math.max(0,Math.min(R-2,q))),oe=q-ue,ae.length=R,ae.crossLength=D,ae.xy=function(ie){return w.evalxy([],q,ie)},ae.dxy=function(ie,fe){return w.dxydj([],ue,ie,oe,fe)},$=0;$<D;$++)V=Math.min(D-2,$),K=$-V,U=w.evalxy([],q,$),S.smoothing&&$>0&&(ee=w.dxydj([],ue,$-1,oe,0),Q.push(se[0]+ee[0]/3),ne.push(se[1]+ee[1]/3),j=w.dxydj([],ue,$-1,oe,1),Q.push(U[0]-j[0]/3),ne.push(U[1]-j[1]/3)),Q.push(U[0]),ne.push(U[1]),se=U;return ae.axisLetter=e,ae.axis=_,ae.crossAxis=S,ae.value=X,ae.constvar=o,ae.index=h,ae.x=Q,ae.y=ne,ae.smoothing=S.smoothing,ae}function Y(X){var q,$,V,K,se,ue=[],oe=[],U={};if(U.length=M.length,U.crossLength=L.length,e==="b")for(V=Math.max(0,Math.min(D-2,X)),se=Math.min(1,Math.max(0,X-V)),U.xy=function(G){return w.evalxy([],G,X)},U.dxy=function(G,re){return w.dxydi([],G,V,re,se)},q=0;q<z;q++)ue[q]=k[X*O][q],oe[q]=P[X*O][q];else for($=Math.max(0,Math.min(R-2,X)),K=Math.min(1,Math.max(0,X-$)),U.xy=function(G){return w.evalxy([],X,G)},U.dxy=function(G,re){return w.dxydj([],$,G,K,re)},q=0;q<I;q++)ue[q]=k[q][X*O],oe[q]=P[q][X*O];return U.axisLetter=e,U.axis=_,U.crossAxis=S,U.value=M[X],U.constvar=o,U.index=X,U.x=ue,U.y=oe,U.smoothing=S.smoothing,U}if(_.tickmode==="array"){for(u=5e-15,s=[Math.floor((M.length-1-_.arraytick0)/_.arraydtick*(1+u)),Math.ceil(-_.arraytick0/_.arraydtick/(1+u))].sort(function(X,q){return X-q}),i=s[0]-1,f=s[1]+1,h=i;h<f;h++)n=_.arraytick0+_.arraydtick*h,!(n<0||n>M.length-1)&&T.push(l(Y(n),{color:_.gridcolor,width:_.gridwidth}));for(h=i;h<f;h++)if(r=_.arraytick0+_.arraydtick*h,y=Math.min(r+_.arraydtick,M.length-1),!(r<0||r>M.length-1)&&!(y<0||y>M.length-1))for(g=M[r],A=M[y],a=0;a<_.minorgridcount;a++)m=y-r,!(m<=0)&&(v=g+(A-g)*(a+1)/(_.minorgridcount+1)*(_.arraydtick/m),!(v<M[0]||v>M[M.length-1])&&x.push(l(F(v),{color:_.minorgridcolor,width:_.minorgridwidth})));_.startline&&c.push(l(Y(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&c.push(l(Y(M.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(u=5e-15,s=[Math.floor((M[M.length-1]-_.tick0)/_.dtick*(1+u)),Math.ceil((M[0]-_.tick0)/_.dtick/(1+u))].sort(function(X,q){return X-q}),i=s[0],f=s[1],h=i;h<=f;h++)p=_.tick0+_.dtick*h,T.push(l(F(p),{color:_.gridcolor,width:_.gridwidth}));for(h=i-1;h<f+1;h++)for(p=_.tick0+_.dtick*h,a=0;a<_.minorgridcount;a++)v=p+_.dtick*(a+1)/(_.minorgridcount+1),!(v<M[0]||v>M[M.length-1])&&x.push(l(F(v),{color:_.minorgridcolor,width:_.minorgridwidth}));_.startline&&c.push(l(F(M[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&c.push(l(F(M[M.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib/extend").extendFlat;B.exports=function(w,e){var o,a,n,r,u,s=e._labels=[],i=e._gridlines;for(o=0;o<i.length;o++)u=i[o],["start","both"].indexOf(e.showticklabels)!==-1&&(a=d.tickText(e,u.value),l(a,{prefix:n,suffix:r,endAnchor:!0,xy:u.xy(0),dxy:u.dxy(0,0),axis:u.axis,length:u.crossAxis.length,font:u.axis.tickfont,isFirst:o===0,isLast:o===i.length-1}),s.push(a)),["end","both"].indexOf(e.showticklabels)!==-1&&(a=d.tickText(e,u.value),l(a,{endAnchor:!1,xy:u.xy(u.crossLength-1),dxy:u.dxy(u.crossLength-2,1),axis:u.axis,length:u.crossAxis.length,font:u.axis.tickfont,isFirst:o===0,isLast:o===i.length-1}),s.push(a))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(t,B,H){var d=.5;B.exports=function(b,w,e,o){var a=b[0]-w[0],n=b[1]-w[1],r=e[0]-w[0],u=e[1]-w[1],s=Math.pow(a*a+n*n,d/2),i=Math.pow(r*r+u*u,d/2),f=(i*i*a-s*s*r)*o,h=(i*i*n-s*s*u)*o,p=i*(s+i)*3,v=s*(s+i)*3;return[[w[0]+(p&&f/p),w[1]+(p&&h/p)],[w[0]-(v&&f/v),w[1]-(v&&h/v)]]}},{}],700:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(l,b,w){var e,o,a,n,r,u,s=[],i=d(l)?l.length:l,f=d(b)?b.length:b,h=d(l)?l:null,p=d(b)?b:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(i-1)),p&&(n=(p.length-1)/(p[p.length-1]-p[0])/(f-1));var v,y=1/0,g=-1/0;for(o=0;o<f;o++)for(s[o]=[],u=p?(p[o]-p[0])*n:o/(f-1),e=0;e<i;e++)r=h?(h[e]-h[0])*a:e/(i-1),v=r-u*w,y=Math.min(v,y),g=Math.max(v,g),s[o][e]=v;var A=1/(g-y),m=-y*A;for(o=0;o<f;o++)for(e=0;e<i;e++)s[o][e]=A*s[o][e]+m;return s}},{"../../lib":503}],701:[function(t,B,H){var d=t("./catmull_rom"),l=t("../../lib").ensureArray;function b(w,e,o){var a=-.5*o[0]+1.5*e[0],n=-.5*o[1]+1.5*e[1];return[(2*a+w[0])/3,(2*n+w[1])/3]}B.exports=function(e,o,a,n,r,u){var s,i,f,h,p,v,y,g,A,m,M=a[0].length,_=a.length,T=r?3*M-2:M,x=u?3*_-2:_;for(e=l(e,x),o=l(o,x),f=0;f<x;f++)e[f]=l(e[f],T),o[f]=l(o[f],T);for(i=0,h=0;i<_;i++,h+=u?3:1)for(p=e[h],v=o[h],y=a[i],g=n[i],s=0,f=0;s<M;s++,f+=r?3:1)p[f]=y[s],v[f]=g[s];if(r)for(i=0,h=0;i<_;i++,h+=u?3:1){for(s=1,f=3;s<M-1;s++,f+=3)A=d([a[i][s-1],n[i][s-1]],[a[i][s],n[i][s]],[a[i][s+1],n[i][s+1]],r),e[h][f-1]=A[0][0],o[h][f-1]=A[0][1],e[h][f+1]=A[1][0],o[h][f+1]=A[1][1];m=b([e[h][0],o[h][0]],[e[h][2],o[h][2]],[e[h][3],o[h][3]]),e[h][1]=m[0],o[h][1]=m[1],m=b([e[h][T-1],o[h][T-1]],[e[h][T-3],o[h][T-3]],[e[h][T-4],o[h][T-4]]),e[h][T-2]=m[0],o[h][T-2]=m[1]}if(u)for(f=0;f<T;f++){for(h=3;h<x-3;h+=3)A=d([e[h-3][f],o[h-3][f]],[e[h][f],o[h][f]],[e[h+3][f],o[h+3][f]],u),e[h-1][f]=A[0][0],o[h-1][f]=A[0][1],e[h+1][f]=A[1][0],o[h+1][f]=A[1][1];m=b([e[0][f],o[0][f]],[e[2][f],o[2][f]],[e[3][f],o[3][f]]),e[1][f]=m[0],o[1][f]=m[1],m=b([e[x-1][f],o[x-1][f]],[e[x-3][f],o[x-3][f]],[e[x-4][f],o[x-4][f]]),e[x-2][f]=m[0],o[x-2][f]=m[1]}if(r&&u)for(h=1;h<x;h+=(h+1)%3==0?2:1){for(f=3;f<T-3;f+=3)A=d([e[h][f-3],o[h][f-3]],[e[h][f],o[h][f]],[e[h][f+3],o[h][f+3]],r),e[h][f-1]=.5*(e[h][f-1]+A[0][0]),o[h][f-1]=.5*(o[h][f-1]+A[0][1]),e[h][f+1]=.5*(e[h][f+1]+A[1][0]),o[h][f+1]=.5*(o[h][f+1]+A[1][1]);m=b([e[h][0],o[h][0]],[e[h][2],o[h][2]],[e[h][3],o[h][3]]),e[h][1]=.5*(e[h][1]+m[0]),o[h][1]=.5*(o[h][1]+m[1]),m=b([e[h][T-1],o[h][T-1]],[e[h][T-3],o[h][T-3]],[e[h][T-4],o[h][T-4]]),e[h][T-2]=.5*(e[h][T-2]+m[0]),o[h][T-2]=.5*(o[h][T-2]+m[1])}return[e,o]}},{"../../lib":503,"./catmull_rom":699}],702:[function(t,B,H){B.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(t,B,H){B.exports=function(d,l,b){return l&&b?function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f,h;e*=3,o*=3;var p=a*a,v=1-a,y=v*v,g=v*a*2,A=-3*y,m=3*(y-g),M=3*(g-p),_=3*p,T=n*n,x=T*n,c=1-n,L=c*c,S=L*c;for(h=0;h<d.length;h++)f=d[h],r=A*f[o][e]+m*f[o][e+1]+M*f[o][e+2]+_*f[o][e+3],u=A*f[o+1][e]+m*f[o+1][e+1]+M*f[o+1][e+2]+_*f[o+1][e+3],s=A*f[o+2][e]+m*f[o+2][e+1]+M*f[o+2][e+2]+_*f[o+2][e+3],i=A*f[o+3][e]+m*f[o+3][e+1]+M*f[o+3][e+2]+_*f[o+3][e+3],w[h]=S*r+3*(L*n*u+c*T*s)+x*i;return w}:l?function(w,e,o,a,n){w||(w=[]);var r,u,s,i;e*=3;var f=a*a,h=1-a,p=h*h,v=h*a*2,y=-3*p,g=3*(p-v),A=3*(v-f),m=3*f,M=1-n;for(s=0;s<d.length;s++)i=d[s],r=y*i[o][e]+g*i[o][e+1]+A*i[o][e+2]+m*i[o][e+3],u=y*i[o+1][e]+g*i[o+1][e+1]+A*i[o+1][e+2]+m*i[o+1][e+3],w[s]=M*r+n*u;return w}:b?function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f,h;o*=3;var p=n*n,v=p*n,y=1-n,g=y*y,A=g*y;for(f=0;f<d.length;f++)h=d[f],r=h[o][e+1]-h[o][e],u=h[o+1][e+1]-h[o+1][e],s=h[o+2][e+1]-h[o+2][e],i=h[o+3][e+1]-h[o+3][e],w[f]=A*r+3*(g*n*u+y*p*s)+v*i;return w}:function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f=1-n;for(s=0;s<d.length;s++)i=d[s],r=i[o][e+1]-i[o][e],u=i[o+1][e+1]-i[o+1][e],w[s]=f*r+n*u;return w}}},{}],704:[function(t,B,H){B.exports=function(d,l,b){return l&&b?function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f,h;e*=3,o*=3;var p=a*a,v=p*a,y=1-a,g=y*y,A=g*y,m=n*n,M=1-n,_=M*M,T=M*n*2,x=-3*_,c=3*(_-T),L=3*(T-m),S=3*m;for(h=0;h<d.length;h++)f=d[h],r=x*f[o][e]+c*f[o+1][e]+L*f[o+2][e]+S*f[o+3][e],u=x*f[o][e+1]+c*f[o+1][e+1]+L*f[o+2][e+1]+S*f[o+3][e+1],s=x*f[o][e+2]+c*f[o+1][e+2]+L*f[o+2][e+2]+S*f[o+3][e+2],i=x*f[o][e+3]+c*f[o+1][e+3]+L*f[o+2][e+3]+S*f[o+3][e+3],w[h]=A*r+3*(g*a*u+y*p*s)+v*i;return w}:l?function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f,h;e*=3;var p=n*n,v=p*n,y=1-n,g=y*y,A=g*y;for(f=0;f<d.length;f++)h=d[f],r=h[o+1][e]-h[o][e],u=h[o+1][e+1]-h[o][e+1],s=h[o+1][e+2]-h[o][e+2],i=h[o+1][e+3]-h[o][e+3],w[f]=A*r+3*(g*n*u+y*p*s)+v*i;return w}:b?function(w,e,o,a,n){w||(w=[]);var r,u,s,i;o*=3;var f=1-a,h=n*n,p=1-n,v=p*p,y=p*n*2,g=-3*v,A=3*(v-y),m=3*(y-h),M=3*h;for(s=0;s<d.length;s++)i=d[s],r=g*i[o][e]+A*i[o+1][e]+m*i[o+2][e]+M*i[o+3][e],u=g*i[o][e+1]+A*i[o+1][e+1]+m*i[o+2][e+1]+M*i[o+3][e+1],w[s]=f*r+a*u;return w}:function(w,e,o,a,n){w||(w=[]);var r,u,s,i,f=1-a;for(s=0;s<d.length;s++)i=d[s],r=i[o+1][e]-i[o][e],u=i[o+1][e+1]-i[o][e+1],w[s]=f*r+a*u;return w}}},{}],705:[function(t,B,H){B.exports=function(d,l,b,w,e){var o=l-2,a=b-2;return w&&e?function(n,r,u){n||(n=[]);var s,i,f,h,p,v,y=Math.max(0,Math.min(Math.floor(r),o)),g=Math.max(0,Math.min(Math.floor(u),a)),A=Math.max(0,Math.min(1,r-y)),m=Math.max(0,Math.min(1,u-g));y*=3,g*=3;var M=A*A,_=M*A,T=1-A,x=T*T,c=x*T,L=m*m,S=L*m,k=1-m,P=k*k,z=P*k;for(v=0;v<d.length;v++)p=d[v],s=c*p[g][y]+3*(x*A*p[g][y+1]+T*M*p[g][y+2])+_*p[g][y+3],i=c*p[g+1][y]+3*(x*A*p[g+1][y+1]+T*M*p[g+1][y+2])+_*p[g+1][y+3],f=c*p[g+2][y]+3*(x*A*p[g+2][y+1]+T*M*p[g+2][y+2])+_*p[g+2][y+3],h=c*p[g+3][y]+3*(x*A*p[g+3][y+1]+T*M*p[g+3][y+2])+_*p[g+3][y+3],n[v]=z*s+3*(P*m*i+k*L*f)+S*h;return n}:w?function(n,r,u){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),o)),i=Math.max(0,Math.min(Math.floor(u),a)),f=Math.max(0,Math.min(1,r-s)),h=Math.max(0,Math.min(1,u-i)),p,v,y,g,A,m;s*=3;var M=f*f,_=M*f,T=1-f,x=T*T,c=x*T,L=1-h;for(A=0;A<d.length;A++)m=d[A],p=L*m[i][s]+h*m[i+1][s],v=L*m[i][s+1]+h*m[i+1][s+1],y=L*m[i][s+2]+h*m[i+1][s+1],g=L*m[i][s+3]+h*m[i+1][s+1],n[A]=c*p+3*(x*f*v+T*M*y)+_*g;return n}:e?function(n,r,u){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),o)),i=Math.max(0,Math.min(Math.floor(u),a)),f=Math.max(0,Math.min(1,r-s)),h=Math.max(0,Math.min(1,u-i)),p,v,y,g,A,m;i*=3;var M=h*h,_=M*h,T=1-h,x=T*T,c=x*T,L=1-f;for(A=0;A<d.length;A++)m=d[A],p=L*m[i][s]+f*m[i][s+1],v=L*m[i+1][s]+f*m[i+1][s+1],y=L*m[i+2][s]+f*m[i+2][s+1],g=L*m[i+3][s]+f*m[i+3][s+1],n[A]=c*p+3*(x*h*v+T*M*y)+_*g;return n}:function(n,r,u){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),o)),i=Math.max(0,Math.min(Math.floor(u),a)),f=Math.max(0,Math.min(1,r-s)),h=Math.max(0,Math.min(1,u-i)),p,v,y,g,A=1-h,m=1-f;for(y=0;y<d.length;y++)g=d[y],p=m*g[i][s]+f*g[i][s+1],v=m*g[i+1][s]+f*g[i+1][s+1],n[y]=A*p+h*v;return n}}},{}],706:[function(t,B,H){var d=t("../../lib"),l=t("./xy_defaults"),b=t("./ab_defaults"),w=t("./attributes"),e=t("../../components/color/attributes");B.exports=function(a,n,r,u){function s(h,p){return d.coerce(a,n,w,h,p)}n._clipPathId="clip"+n.uid+"carpet";var i=s("color",e.defaultLine);if(d.coerceFont(s,"font"),s("carpet"),b(a,n,u,s,i),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var f=l(a,n,s);f||(n.visible=!1),n._cheater&&s("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(t,B,H){B.exports=function(d,l){for(var b=d._fullData.length,w,e=0;e<b;e++){var o=d._fullData[e];if(o.index!==l.index&&o.type==="carpet"&&(w||(w=o),o.carpet===l.carpet))return o}return w}},{}],709:[function(t,B,H){B.exports=function(l,b,w){if(l.length===0)return"";var e,o=[],a=w?3:1;for(e=0;e<l.length;e+=a)o.push(l[e]+","+b[e]),w&&e<l.length-a&&(o.push("C"),o.push([l[e+1]+","+b[e+1],l[e+2]+","+b[e+2]+" "].join(" ")));return o.join(w?"":"L")}},{}],710:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(b,w,e){var o;for(d(b)?b.length>w.length&&(b=b.slice(0,w.length)):b=[],o=0;o<w.length;o++)b[o]=e(w[o]);return b}},{"../../lib":503}],711:[function(t,B,H){B.exports=function(l,b,w,e,o,a){var n=o[0]*l.dpdx(b),r=o[1]*l.dpdy(w),u=1,s=1;if(a){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),f=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=(o[0]*a[0]+o[1]*a[1])/i/f;s=Math.max(0,h)}var p=Math.atan2(r,n)*180/Math.PI;return p<-90?(p+=180,u=-u):p>90&&(p-=180,u=-u),{angle:p,flip:u,p:l.c2p(e,b,w),offsetMultplier:s}}},{}],712:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("./map_1d_array"),w=t("./makepath"),e=t("./orient_text"),o=t("../../lib/svg_text_utils"),a=t("../../lib"),n=a.strRotate,r=a.strTranslate,u=t("../../constants/alignment");B.exports=function(A,m,M,_){var T=m.xaxis,x=m.yaxis,c=A._fullLayout,L=c._clips;a.makeTraceGroups(_,M,"trace").each(function(S){var k=d.select(this),P=S[0],z=P.trace,I=z.aaxis,R=z.baxis,D=a.ensureSingle(k,"g","minorlayer"),O=a.ensureSingle(k,"g","majorlayer"),F=a.ensureSingle(k,"g","boundarylayer"),Y=a.ensureSingle(k,"g","labellayer");k.style("opacity",z.opacity),i(T,x,O,I,"a",I._gridlines),i(T,x,O,R,"b",R._gridlines),i(T,x,D,I,"a",I._minorgridlines),i(T,x,D,R,"b",R._minorgridlines),i(T,x,F,I,"a-boundary",I._boundarylines),i(T,x,F,R,"b-boundary",R._boundarylines);var X=f(A,T,x,z,P,Y,I._labels,"a-label"),q=f(A,T,x,z,P,Y,R._labels,"b-label");h(A,Y,z,P,T,x,X,q),s(z,P,L,T,x)})};function s(g,A,m,M,_){var T,x,c,L,S=m.select("#"+g._clipPathId);S.size()||(S=m.append("clipPath").classed("carpetclip",!0));var k=a.ensureSingle(S,"path","carpetboundary"),P=A.clipsegments,z=[];for(L=0;L<P.length;L++)T=P[L],x=b([],T.x,M.c2p),c=b([],T.y,_.c2p),z.push(w(x,c,T.bicubic));var I="M"+z.join("L")+"Z";S.attr("id",g._clipPathId),k.attr("d",I)}function i(g,A,m,M,_,T){var x="const-"+_+"-lines",c=m.selectAll("."+x).data(T);c.enter().append("path").classed(x,!0).style("vector-effect","non-scaling-stroke"),c.each(function(L){var S=L,k=S.x,P=S.y,z=b([],k,g.c2p),I=b([],P,A.c2p),R="M"+w(z,I,S.smoothing),D=d.select(this);D.attr("d",R).style("stroke-width",S.width).style("stroke",S.color).style("fill","none")}),c.exit().remove()}function f(g,A,m,M,_,T,x,c){var L=T.selectAll("text."+c).data(x);L.enter().append("text").classed(c,!0);var S=0,k={};return L.each(function(P,z){var I;if(P.axis.tickangle==="auto")I=e(M,A,m,P.xy,P.dxy);else{var R=(P.axis.tickangle+180)*Math.PI/180;I=e(M,A,m,P.xy,[Math.cos(R),Math.sin(R)])}z||(k={angle:I.angle,flip:I.flip});var D=(P.endAnchor?-1:1)*I.flip,O=d.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(l.font,P.font).text(P.text).call(o.convertToTspans,g),F=l.bBox(this);O.attr("transform",r(I.p[0],I.p[1])+n(I.angle)+r(P.axis.labelpadding*D,F.height*.3)),S=Math.max(S,F.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function h(g,A,m,M,_,T,x,c){var L,S,k,P,z=a.aggNums(Math.min,null,m.a),I=a.aggNums(Math.max,null,m.a),R=a.aggNums(Math.min,null,m.b),D=a.aggNums(Math.max,null,m.b);L=.5*(z+I),S=R,k=m.ab2xy(L,S,!0),P=m.dxyda_rough(L,S),x.angle===void 0&&a.extendFlat(x,e(m,_,T,k,m.dxydb_rough(L,S))),y(g,A,m,M,k,P,m.aaxis,_,T,x,"a-title"),L=z,S=.5*(R+D),k=m.ab2xy(L,S,!0),P=m.dxydb_rough(L,S),c.angle===void 0&&a.extendFlat(c,e(m,_,T,k,m.dxyda_rough(L,S))),y(g,A,m,M,k,P,m.baxis,_,T,c,"b-title")}var p=u.LINE_SPACING,v=(1-u.MID_SHIFT)/p+1;function y(g,A,m,M,_,T,x,c,L,S,k){var P=[];x.title.text&&P.push(x.title.text);var z=A.selectAll("text."+k).data(P),I=S.maxExtent;z.enter().append("text").classed(k,!0),z.each(function(){var R=e(m,c,L,_,T);["start","both"].indexOf(x.showticklabels)===-1&&(I=0);var D=x.title.font.size;I+=D+x.title.offset;var O=S.angle+(S.flip<0?180:0),F=(O-R.angle+450)%360,Y=F>90&&F<270,X=d.select(this);X.text(x.title.text).call(o.convertToTspans,g),Y&&(I=(-o.lineCount(X)+v)*p*D-I),X.attr("transform",r(R.p[0],R.p[1])+n(R.angle)+r(0,I)).attr("text-anchor","middle").call(l.font,x.title.font)}),z.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(t,B,H){var d=t("./constants"),l=t("../../lib/search").findBin,b=t("./compute_control_points"),w=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),o=t("./create_j_derivative_evaluator");B.exports=function(n){var r=n._a,u=n._b,s=r.length,i=u.length,f=n.aaxis,h=n.baxis,p=r[0],v=r[s-1],y=u[0],g=u[i-1],A=r[r.length-1]-r[0],m=u[u.length-1]-u[0],M=A*d.RELATIVE_CULL_TOLERANCE,_=m*d.RELATIVE_CULL_TOLERANCE;p-=M,v+=M,y-=_,g+=_,n.isVisible=function(T,x){return T>p&&T<v&&x>y&&x<g},n.isOccluded=function(T,x){return T<p||T>v||x<y||x>g},n.setScale=function(){var T=n._x,x=n._y,c=b(n._xctrl,n._yctrl,T,x,f.smoothing,h.smoothing);n._xctrl=c[0],n._yctrl=c[1],n.evalxy=w([n._xctrl,n._yctrl],s,i,f.smoothing,h.smoothing),n.dxydi=e([n._xctrl,n._yctrl],f.smoothing,h.smoothing),n.dxydj=o([n._xctrl,n._yctrl],f.smoothing,h.smoothing)},n.i2a=function(T){var x=Math.max(0,Math.floor(T[0]),s-2),c=T[0]-x;return(1-c)*r[x]+c*r[x+1]},n.j2b=function(T){var x=Math.max(0,Math.floor(T[1]),s-2),c=T[1]-x;return(1-c)*u[x]+c*u[x+1]},n.ij2ab=function(T){return[n.i2a(T[0]),n.j2b(T[1])]},n.a2i=function(T){var x=Math.max(0,Math.min(l(T,r),s-2)),c=r[x],L=r[x+1];return Math.max(0,Math.min(s-1,x+(T-c)/(L-c)))},n.b2j=function(T){var x=Math.max(0,Math.min(l(T,u),i-2)),c=u[x],L=u[x+1];return Math.max(0,Math.min(i-1,x+(T-c)/(L-c)))},n.ab2ij=function(T){return[n.a2i(T[0]),n.b2j(T[1])]},n.i2c=function(T,x){return n.evalxy([],T,x)},n.ab2xy=function(T,x,c){if(!c&&(T<r[0]||T>r[s-1]|x<u[0]||x>u[i-1]))return[!1,!1];var L=n.a2i(T),S=n.b2j(x),k=n.evalxy([],L,S);if(c){var P=0,z=0,I=[],R,D,O,F;T<r[0]?(R=0,D=0,P=(T-r[0])/(r[1]-r[0])):T>r[s-1]?(R=s-2,D=1,P=(T-r[s-1])/(r[s-1]-r[s-2])):(R=Math.max(0,Math.min(s-2,Math.floor(L))),D=L-R),x<u[0]?(O=0,F=0,z=(x-u[0])/(u[1]-u[0])):x>u[i-1]?(O=i-2,F=1,z=(x-u[i-1])/(u[i-1]-u[i-2])):(O=Math.max(0,Math.min(i-2,Math.floor(S))),F=S-O),P&&(n.dxydi(I,R,O,D,F),k[0]+=I[0]*P,k[1]+=I[1]*P),z&&(n.dxydj(I,R,O,D,F),k[0]+=I[0]*z,k[1]+=I[1]*z)}return k},n.c2p=function(T,x,c){return[x.c2p(T[0]),c.c2p(T[1])]},n.p2x=function(T,x,c){return[x.p2c(T[0]),c.p2c(T[1])]},n.dadi=function(T){var x=Math.max(0,Math.min(r.length-2,T));return r[x+1]-r[x]},n.dbdj=function(T){var x=Math.max(0,Math.min(u.length-2,T));return u[x+1]-u[x]},n.dxyda=function(T,x,c,L){var S=n.dxydi(null,T,x,c,L),k=n.dadi(T,c);return[S[0]/k,S[1]/k]},n.dxydb=function(T,x,c,L){var S=n.dxydj(null,T,x,c,L),k=n.dbdj(x,L);return[S[0]/k,S[1]/k]},n.dxyda_rough=function(T,x,c){var L=A*(c||.1),S=n.ab2xy(T+L,x,!0),k=n.ab2xy(T-L,x,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},n.dxydb_rough=function(T,x,c){var L=m*(c||.1),S=n.ab2xy(T,x+L,!0),k=n.ab2xy(T,x-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},n.dpdx=function(T){return T._m},n.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w,e){var o,a,n,r=[],u=[],s=b[0].length,i=b.length;function f($,V){var K=0,se,ue=0;return $>0&&(se=b[V][$-1])!==void 0&&(ue++,K+=se),$<s-1&&(se=b[V][$+1])!==void 0&&(ue++,K+=se),V>0&&(se=b[V-1][$])!==void 0&&(ue++,K+=se),V<i-1&&(se=b[V+1][$])!==void 0&&(ue++,K+=se),K/Math.max(1,ue)}var h=0;for(o=0;o<s;o++)for(a=0;a<i;a++)b[a][o]===void 0&&(r.push(o),u.push(a),b[a][o]=f(o,a)),h=Math.max(h,Math.abs(b[a][o]));if(!r.length)return b;var p,v,y,g,A,m,M,_,T,x,c,L=1e-5,S=0,k=100,P=0,z=r.length;do{for(S=0,n=0;n<z;n++){o=r[n],a=u[n];var I=0,R=0,D,O,F,Y,X,q;o===0?(X=Math.min(s-1,2),F=w[X],Y=w[1],D=b[a][X],O=b[a][1],R+=O+(O-D)*(w[0]-Y)/(Y-F),I++):o===s-1&&(X=Math.max(0,s-3),F=w[X],Y=w[s-2],D=b[a][X],O=b[a][s-2],R+=O+(O-D)*(w[s-1]-Y)/(Y-F),I++),(o===0||o===s-1)&&a>0&&a<i-1&&(p=e[a+1]-e[a],v=e[a]-e[a-1],R+=(v*b[a+1][o]+p*b[a-1][o])/(v+p),I++),a===0?(q=Math.min(i-1,2),F=e[q],Y=e[1],D=b[q][o],O=b[1][o],R+=O+(O-D)*(e[0]-Y)/(Y-F),I++):a===i-1&&(q=Math.max(0,i-3),F=e[q],Y=e[i-2],D=b[q][o],O=b[i-2][o],R+=O+(O-D)*(e[i-1]-Y)/(Y-F),I++),(a===0||a===i-1)&&o>0&&o<s-1&&(p=w[o+1]-w[o],v=w[o]-w[o-1],R+=(v*b[a][o+1]+p*b[a][o-1])/(v+p),I++),I?R/=I:(y=w[o+1]-w[o],g=w[o]-w[o-1],A=e[a+1]-e[a],m=e[a]-e[a-1],M=y*g*(y+g),_=A*m*(A+m),R=(M*(m*b[a+1][o]+A*b[a-1][o])+_*(g*b[a][o+1]+y*b[a][o-1]))/(_*(g+y)+M*(m+A))),T=R-b[a][o],x=T/h,S+=x*x,c=I?0:.85,b[a][o]+=T*(1+c)}S=Math.sqrt(S)}while(P++<k&&S>L);return d.log("Smoother converged to",S,"after",P,"iterations"),b}},{"../../lib":503}],715:[function(t,B,H){var d=t("../../lib").isArray1D;B.exports=function(b,w,e){var o=e("x"),a=o&&o.length,n=e("y"),r=n&&n.length;if(!a&&!r)return!1;if(w._cheater=!o,(!a||d(o))&&(!r||d(n))){var u=a?o.length:1/0;r&&(u=Math.min(u,n.length)),w.a&&w.a.length&&(u=Math.min(u,w.a.length)),w.b&&w.b.length&&(u=Math.min(u,w.b.length)),w._length=u}else w._length=null;return!0}},{"../../lib":503}],716:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../scattergeo/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,o=t("../../lib/extend").extendFlat,a=l.marker.line;B.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:l.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},l.geojson,{}),featureidkey:l.featureidkey,text:o({},l.text,{}),hovertext:o({},l.hovertext,{}),marker:{line:{color:o({},a.color,{dflt:e}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:l.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:l.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},w.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:d(),showlegend:o({},w.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../../components/colorscale/calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function o(a){return a&&typeof a=="string"}B.exports=function(n,r){var u=r._length,s=new Array(u),i;r.geojson?i=function(y){return o(y)||d(y)}:i=o;for(var f=0;f<u;f++){var h=s[f]={},p=r.locations[f],v=r.z[f];i(p)&&d(v)?(h.loc=p,h.z=v):(h.loc=null,h.z=l),h.index=f}return w(s,r),b(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(s,r),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,n){function r(v,y){return d.coerce(e,o,b,v,y)}var u=r("locations"),s=r("z");if(!(u&&u.length&&d.isArrayOrTypedArray(s)&&s.length)){o.visible=!1;return}o._length=Math.min(u.length,s.length);var i=r("geojson"),f;(typeof i=="string"&&i!==""||d.isPlainObject(i))&&(f="geojson-id");var h=r("locationmode",f);h==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var p=r("marker.line.width");p&&r("marker.line.color"),r("marker.opacity"),l(e,o,n,r,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(o,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(t,B,H){B.exports=function(l,b,w,e,o){l.location=b.location,l.z=b.z;var a=e[o];return a.fIn&&a.fIn.properties&&(l.properties=a.fIn.properties),l.ct=a.ct,l}},{}],720:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("./attributes"),b=t("../../lib").fillText;B.exports=function(o,a,n){var r=o.cd,u=r[0].trace,s=o.subplot,i,f,h,p,v=[a,n],y=[a+360,n];for(f=0;f<r.length;f++)if(i=r[f],p=!1,i._polygons){for(h=0;h<i._polygons.length;h++)i._polygons[h].contains(v)&&(p=!p),i._polygons[h].contains(y)&&(p=!p);if(p)break}if(!(!p||!i))return o.x0=o.x1=o.xa.c2p(i.ct),o.y0=o.y1=o.ya.c2p(i.ct),o.index=i.index,o.location=i.loc,o.z=i.z,o.zLabel=d.tickText(s.mockAxis,s.mockAxis.c2l(i.z),"hover").text,o.hovertemplate=i.hovertemplate,w(o,u,i),[o]};function w(e,o,a){if(!o.hovertemplate){var n=a.hi||o.hoverinfo,r=String(a.loc),u=n==="all"?l.hoverinfo.flags:n.split("+"),s=u.indexOf("name")!==-1,i=u.indexOf("location")!==-1,f=u.indexOf("z")!==-1,h=u.indexOf("text")!==-1,p=!s&&i,v=[];p?e.nameOverride=r:(s&&(e.nameOverride=o.name),i&&v.push(r)),f&&v.push(e.zLabel),h&&b(a,o,v),e.extraText=v.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../lib/geo_location_utils"),w=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,o=t("./style").style;function a(r,u,s){var i=u.layers.backplot.select(".choroplethlayer");l.makeTraceGroups(i,s,"trace choropleth").each(function(f){var h=d.select(this),p=h.selectAll("path.choroplethlocation").data(l.identity);p.enter().append("path").classed("choroplethlocation",!0),p.exit().remove(),o(r,f)})}function n(r,u){for(var s=r[0].trace,i=u[s.geo],f=i._subplot,h=s.locationmode,p=s._length,v=h==="geojson-id"?b.extractTraceFeature(r):w(s,f.topojson),y=[],g=[],A=0;A<p;A++){var m=r[A],M=h==="geojson-id"?m.fOut:b.locationToFeature(h,m.loc,v);if(M){m.geojson=M,m.ct=M.properties.ct,m._polygons=b.feature2polygons(M);var _=b.computeBbox(M);y.push(_[0],_[2]),g.push(_[1],_[3])}else m.geojson=null}if(i.fitbounds==="geojson"&&h==="geojson-id"){var T=b.computeBbox(b.getTraceGeojson(s));y=[T[0],T[2]],g=[T[1],T[3]]}var x={padded:!0};s._extremes.lon=e(i.lonaxis._ax,y,x),s._extremes.lat=e(i.lataxis._ax,g,x)}B.exports={calcGeoJSON:n,plot:a}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],n,r,u,s,i;if(b===!1)for(n=0;n<w.length;n++)w[n].selected=0;else for(n=0;n<w.length;n++)r=w[n],u=r.ct,!!u&&(s=e.c2p(u),i=o.c2p(u),b.contains([s,i],null,n,l)?(a.push({pointNumber:n,lon:u[0],lat:u[1]}),r.selected=1):r.selected=0);return a}},{}],724:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing"),w=t("../../components/colorscale");function e(n,r){r&&o(n,r)}function o(n,r){var u=r[0].trace,s=r[0].node3,i=s.selectAll(".choroplethlocation"),f=u.marker||{},h=f.line||{},p=w.makeColorScaleFuncFromTrace(u);i.each(function(v){d.select(this).attr("fill",p(v.z)).call(l.stroke,v.mlc||h.color).call(b.dashLine,"",v.mlw||h.width||0).style("opacity",f.opacity)}),b.selectedPointStyle(i,u,n)}function a(n,r){var u=r[0].node3,s=r[0].trace;s.selectedpoints?b.selectedPointStyle(u.selectAll(".choroplethlocation"),s,n):o(n,r)}B.exports={style:e,styleOnSelect:a}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(t,B,H){var d=t("../choropleth/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},d.featureidkey,{}),below:{valType:"string",editType:"plot"},text:d.text,hovertext:d.hovertext,marker:{line:{color:e({},d.marker.line.color,{editType:"plot"}),width:e({},d.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},d.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},d.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},d.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:d.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},w.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../components/colorscale"),w=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,o=t("../../lib/geo_location_utils");function a(r){var u=r[0].trace,s=u.visible===!0&&u._length!==0,i={layout:{visibility:"none"},paint:{}},f={layout:{visibility:"none"},paint:{}},h=u._opts={fill:i,line:f,geojson:e()};if(!s)return h;var p=o.extractTraceFeature(r);if(!p)return h;var v=b.makeColorScaleFuncFromTrace(u),y=u.marker,g=y.line||{},A;l.isArrayOrTypedArray(y.opacity)&&(A=function(S){var k=S.mo;return d(k)?+l.constrain(k,0,1):0});var m;l.isArrayOrTypedArray(g.color)&&(m=function(S){return S.mlc});var M;l.isArrayOrTypedArray(g.width)&&(M=function(S){return S.mlw});for(var _=0;_<r.length;_++){var T=r[_],x=T.fOut;if(x){var c=x.properties;c.fc=v(T.z),A&&(c.mo=A(T)),m&&(c.mlc=m(T)),M&&(c.mlw=M(T)),T.ct=c.ct,T._polygons=o.feature2polygons(x)}}var L=A?{type:"identity",property:"mo"}:y.opacity;return l.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),l.extendFlat(f.paint,{"line-color":m?{type:"identity",property:"mlc"}:g.color,"line-width":M?{type:"identity",property:"mlw"}:g.width,"line-opacity":L}),i.layout.visibility="visible",f.layout.visibility="visible",h.geojson={type:"FeatureCollection",features:p},n(r),h}function n(r){var u=r[0].trace,s=u._opts,i;if(u.selectedpoints){for(var f=w.makeSelectedPointStyleFns(u),h=0;h<r.length;h++){var p=r[h];p.fOut&&(p.fOut.properties.mo2=f.selectedOpacityFn(p))}i={type:"identity",property:"mo2"}}else i=l.isArrayOrTypedArray(u.marker.opacity)?{type:"identity",property:"mo"}:u.marker.opacity;return l.extendFlat(s.fill.paint,{"fill-opacity":i}),l.extendFlat(s.line.paint,{"line-opacity":i}),s}B.exports={convert:a,convertOnSelect:n}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,n){function r(h,p){return d.coerce(e,o,b,h,p)}var u=r("locations"),s=r("z"),i=r("geojson");if(!d.isArrayOrTypedArray(u)||!u.length||!d.isArrayOrTypedArray(s)||!s.length||!(typeof i=="string"&&i!==""||d.isPlainObject(i))){o.visible=!1;return}r("featureidkey"),o._length=Math.min(u.length,s.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var f=r("marker.line.width");f&&r("marker.line.color"),r("marker.opacity"),l(e,o,n,r,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(o,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(d,l){if(l){var b=l[0].trace;b._glTrace.updateOnSelect(l)}},getBelow:function(d,l){for(var b=l.getMapLayers(),w=b.length-2;w>=0;w--){var e=b[w].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var o=w+1;o<b.length;o++)if(e=b[o].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(t,B,H){var d=t("./convert").convert,l=t("./convert").convertOnSelect,b=t("../../plots/mapbox/constants").traceLayerPrefix;function w(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",b+a+"-fill"],["line",b+a+"-line"]],this.below=null}var e=w.prototype;e.update=function(o){this._update(d(o))},e.updateOnSelect=function(o){this._update(l(o))},e._update=function(o){var a=this.subplot,n=this.layerList,r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(o,r),this.below=r);for(var u=0;u<n.length;u++){var s=n[u],i=s[0],f=s[1],h=o[i];a.setOptions(f,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&a.setOptions(f,"setPaintProperty",h.paint)}},e._addLayers=function(o,a){for(var n=this.subplot,r=this.layerList,u=this.sourceId,s=0;s<r.length;s++){var i=r[s],f=i[0],h=o[f];n.addLayer({type:f,id:i[1],source:u,layout:h.layout,paint:h.paint},a)}},e._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,n=a.length-1;n>=0;n--)o.removeLayer(a[n][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},B.exports=function(a,n){var r=n[0].trace,u=new w(a,r.uid),s=u.sourceId,i=d(n),f=u.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(s,{type:"geojson",data:i.geojson}),u._addLayers(i,f),n[0].trace._glTrace=u,u}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){a[r]=w[r]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,B.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){for(var e=w.u,o=w.v,a=w.w,n=Math.min(w.x.length,w.y.length,w.z.length,e.length,o.length,a.length),r=-1/0,u=1/0,s=0;s<n;s++){var i=e[s],f=o[s],h=a[s],p=Math.sqrt(i*i+f*f+h*h);r=Math.max(r,p),u=Math.min(u,p)}w._len=n,w._normMax=r,d(b,w,{vals:[u,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(t,B,H){var d=t("../../../stackgl_modules").gl_cone3d,l=t("../../../stackgl_modules").gl_cone3d.createConeMesh,b=t("../../lib").simpleMap,w=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,o=t("../../plots/gl3d/zip3");function a(h,p){this.scene=h,this.uid=p,this.mesh=null,this.data=null}var n=a.prototype;n.handlePick=function(h){if(h.object===this.mesh){var p=h.index=h.data.index,v=this.data.x[p],y=this.data.y[p],g=this.data.z[p],A=this.data.u[p],m=this.data.v[p],M=this.data.w[p];h.traceCoordinate=[v,y,g,A,m,M,Math.sqrt(A*A+m*m+M*M)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[p]!==void 0?h.textLabel=_[p]:_&&(h.textLabel=_),!0}};var r={xaxis:0,yaxis:1,zaxis:2},u={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(h,p){var v=h.fullSceneLayout,y=h.dataScale,g={};function A(T,x){var c=v[x],L=y[r[x]];return b(T,function(S){return c.d2l(S)*L})}g.vectors=o(A(p.u,"xaxis"),A(p.v,"yaxis"),A(p.w,"zaxis"),p._len),g.positions=o(A(p.x,"xaxis"),A(p.y,"yaxis"),A(p.z,"zaxis"),p._len);var m=e(p);g.colormap=w(p),g.vertexIntensityBounds=[m.min/p._normMax,m.max/p._normMax],g.coneOffset=u[p.anchor],p.sizemode==="scaled"?g.coneSize=p.sizeref||.5:g.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var M=d(g),_=p.lightposition;return M.lightPosition=[_.x,_.y,_.z],M.ambient=p.lighting.ambient,M.diffuse=p.lighting.diffuse,M.specular=p.lighting.specular,M.roughness=p.lighting.roughness,M.fresnel=p.lighting.fresnel,M.opacity=p.opacity,p._pad=s[p.anchor]*M.vectorScale*M.coneScale*p._normMax,M}n.update=function(h){this.data=h;var p=i(this.scene,h);this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(h,p){var v=h.glplot.gl,y=i(h,p),g=l(v,y),A=new a(h,p.uid);return A.mesh=g,A.data=p,g._trace=A,h.glplot.add(g),A}B.exports=f},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,n){function r(v,y){return d.coerce(e,o,b,v,y)}var u=r("u"),s=r("v"),i=r("w"),f=r("x"),h=r("y"),p=r("z");if(!u||!u.length||!s||!s.length||!i||!i.length||!f||!f.length||!h||!h.length||!p||!p.length){o.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),l(e,o,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),o._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(t,B,H){B.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(d,l){return d.norm=l.traceCoordinate[6],d},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(t,B,H){var d=t("../heatmap/attributes"),l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes"),w=b.axisHoverFormat,e=b.descriptionOnlyNumbers,o=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,n=t("../../plots/font_attributes"),r=t("../../lib/extend").extendFlat,u=t("../../constants/filter_ops"),s=u.COMPARISON_OPS2,i=u.INTERVAL_OPS,f=l.line;B.exports=r({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,text:d.text,hovertext:d.hovertext,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:d.hovertemplate,texttemplate:r({},d.texttemplate,{}),textfont:r({},d.textfont,{}),hoverongaps:d.hoverongaps,connectgaps:r({},d.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:r({},f.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(t,B,H){var d=t("../../components/colorscale"),l=t("../heatmap/calc"),b=t("./set_contours"),w=t("./end_plus");B.exports=function(o,a){var n=l(o,a),r=n[0].z;b(a,r);var u=a.contours,s=d.extractOpts(a),i;if(u.coloring==="heatmap"&&s.auto&&a.autocontour===!1){var f=u.start,h=w(u),p=u.size||1,v=Math.floor((h-f)/p)+1;isFinite(p)||(p=1,v=1);var y=f-p/2,g=y+v*p;i=[y,g]}else i=r;return d.calc(o,a,{vals:i,cLetter:"z"}),n}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(t,B,H){B.exports=function(d,l){var b=d[0],w=b.z,e;switch(l.type){case"levels":var o=Math.min(w[0][0],w[0][1]);for(e=0;e<d.length;e++){var a=d[e];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var n=b.x.length,r=b.y.length,u=-1/0,s=1/0;for(e=0;e<r;e++)s=Math.min(s,w[e][0]),s=Math.min(s,w[e][n-1]),u=Math.max(u,w[e][0]),u=Math.max(u,w[e][n-1]);for(e=1;e<n-1;e++)s=Math.min(s,w[0][e]),s=Math.min(s,w[r-1][e]),u=Math.max(u,w[0][e]),u=Math.max(u,w[r-1][e]);var i=l.value,f,h;switch(l._operation){case">":i>u&&(b.prefixBoundary=!0);break;case"<":(i<s||b.starts.length&&i===s)&&(b.prefixBoundary=!0);break;case"[]":f=Math.min(i[0],i[1]),h=Math.max(i[0],i[1]),(h<s||f>u||b.starts.length&&h===s)&&(b.prefixBoundary=!0);break;case"][":f=Math.min(i[0],i[1]),h=Math.max(i[0],i[1]),f<s&&h>u&&(b.prefixBoundary=!0);break}break}}},{}],738:[function(t,B,H){var d=t("../../components/colorscale"),l=t("./make_color_map"),b=t("./end_plus");function w(e,o,a){var n=o.contours,r=o.line,u=n.size||1,s=n.coloring,i=l(o,{isColorbar:!0});if(s==="heatmap"){var f=d.extractOpts(o);a._fillgradient=f.reversescale?d.flipScale(f.colorscale):f.colorscale,a._zrange=[f.min,f.max]}else s==="fill"&&(a._fillcolor=i);a._line={color:s==="lines"?i:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},a._levels={start:n.start,end:b(n),size:u}}B.exports={min:"zmin",max:"zmax",calc:w}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(t,B,H){B.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./label_defaults"),b=t("../../components/color"),w=b.addOpacity,e=b.opacity,o=t("../../constants/filter_ops"),a=o.CONSTRAINT_REDUCTION,n=o.COMPARISON_OPS2;B.exports=function(s,i,f,h,p,v){var y=i.contours,g,A,m,M=f("contours.operation");if(y._operation=a[M],r(f,y),M==="="?g=y.showlines=!0:(g=f("contours.showlines"),m=f("fillcolor",w((s.line||{}).color||p,.5))),g){var _=m&&e(m)?w(i.fillcolor,1):p;A=f("line.color",_),f("line.width",2),f("line.dash")}f("line.smoothing"),l(f,h,A,v)};function r(u,s){var i;n.indexOf(s.operation)===-1?(u("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(i=parseFloat(s.value[0]),s.value=[i,i+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:d(s.value)&&(i=parseFloat(s.value),s.value=[i,i+1])):(u("contours.value",0),d(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(t,B,H){var d=t("../../constants/filter_ops"),l=t("fast-isnumeric");B.exports={"[]":w("[]"),"][":w("]["),">":e(">"),"<":e("<"),"=":e("=")};function b(o,a){var n=Array.isArray(a),r;function u(s){return l(s)?+s:null}return d.COMPARISON_OPS2.indexOf(o)!==-1?r=u(n?a[0]:a):d.INTERVAL_OPS.indexOf(o)!==-1?r=n?[u(a[0]),u(a[1])]:[u(a),u(a)]:d.SET_OPS.indexOf(o)!==-1&&(r=n?a.map(u):[u(a)]),r}function w(o){return function(a){a=b(o,a);var n=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return{start:n,end:r,size:r-n}}}function e(o){return function(a){return a=b(o,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(t,B,H){B.exports=function(l,b,w,e){var o=e("contours.start"),a=e("contours.end"),n=o===!1||a===!1,r=w("contours.size"),u;n?u=b.autocontour=!0:u=w("autocontour",!1),(u||!r)&&w("ncontours")}},{}],743:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e,o,a,n=function(s){return s.reverse()},r=function(s){return s};switch(w){case"=":case"<":return b;case">":for(b.length!==1&&d.warn("Contour data invalid for the specified inequality operation."),o=b[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=n(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=n(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=n(o.starts[e]);return b;case"][":var u=n;n=r,r=u;case"[]":for(b.length!==2&&d.warn("Contour data invalid for the specified inequality range operation."),o=l(b[0]),a=l(b[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=n(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=n(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=n(o.starts[e]);for(;a.edgepaths.length;)o.edgepaths.push(r(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(r(a.paths.shift()));for(;a.starts.length;)o.starts.push(r(a.starts.shift()));return[o]}};function l(b){return d.extendFlat({},b,{edgepaths:d.extendDeep([],b.edgepaths),paths:d.extendDeep([],b.paths),starts:d.extendDeep([],b.starts)})}},{"../../lib":503}],744:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("../scatter/period_defaults"),w=t("./constraint_defaults"),e=t("./contours_defaults"),o=t("./style_defaults"),a=t("../heatmap/label_defaults"),n=t("./attributes");B.exports=function(u,s,i,f){function h(g,A){return d.coerce(u,s,n,g,A)}function p(g){return d.coerce2(u,s,n,g)}var v=l(u,s,h,f);if(!v){s.visible=!1;return}b(u,s,f,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hoverongaps"),h("hovertemplate");var y=h("contours.type")==="constraint";h("connectgaps",d.isArray1D(s.z)),y?w(u,s,h,f,i):(e(u,s,h,p),o(u,s,h,f)),s.contours&&s.contours.coloring==="heatmap"&&a(h,f)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(t,B,H){var d=t("../../lib"),l=t("./constraint_mapping"),b=t("./end_plus");B.exports=function(e,o,a){for(var n=e.type==="constraint"?l[e._operation](e.value):e,r=n.size,u=[],s=b(n),i=a.trace._carpetTrace,f=i?{xaxis:i.aaxis,yaxis:i.baxis,x:a.a,y:a.b}:{xaxis:o.xaxis,yaxis:o.yaxis,x:a.x,y:a.y},h=n.start;h<s;h+=r)if(u.push(d.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},f)),u.length>1e3){d.warn("Too many contours, clipping at 1000",e);break}return u}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(t,B,H){B.exports=function(l){return l.end+l.size/1e6}},{}],747:[function(t,B,H){var d=t("../../lib"),l=t("./constants");B.exports=function(r,u,s){var i,f,h,p,v;for(u=u||.01,s=s||.01,h=0;h<r.length;h++){for(p=r[h],v=0;v<p.starts.length;v++)f=p.starts[v],e(p,f,"edge",u,s);for(i=0;Object.keys(p.crossings).length&&i<1e4;)i++,f=Object.keys(p.crossings)[0].split(",").map(Number),e(p,f,void 0,u,s);i===1e4&&d.log("Infinite loop in contour?")}};function b(n,r,u,s){return Math.abs(n[0]-r[0])<u&&Math.abs(n[1]-r[1])<s}function w(n,r){var u=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(u*u+s*s)}function e(n,r,u,s,i){var f=r.join(","),h=n.crossings[f],p=o(h,u,r),v=[a(n,r,[-p[0],-p[1]])],y=n.z.length,g=n.z[0].length,A=r.slice(),m=p.slice(),M;for(M=0;M<1e4;M++){if(h>20?(h=l.CHOOSESADDLE[h][(p[0]||p[1])<0?0:1],n.crossings[f]=l.SADDLEREMAINDER[h]):delete n.crossings[f],p=l.NEWDELTA[h],!p){d.log("Found bad marching index:",h,r,n.level);break}v.push(a(n,r,p)),r[0]+=p[0],r[1]+=p[1],f=r.join(","),b(v[v.length-1],v[v.length-2],s,i)&&v.pop();var _=p[0]&&(r[0]<0||r[0]>g-2)||p[1]&&(r[1]<0||r[1]>y-2),T=r[0]===A[0]&&r[1]===A[1]&&p[0]===m[0]&&p[1]===m[1];if(T||u&&_)break;h=n.crossings[f]}M===1e4&&d.log("Infinite loop in contour?");var x=b(v[0],v[v.length-1],s,i),c=0,L=.2*n.smoothing,S=[],k=0,P,z,I,R,D,O,F,Y,X,q,$;for(M=1;M<v.length;M++)F=w(v[M],v[M-1]),c+=F,S.push(F);var V=c/S.length*L;function K(oe){return v[oe%v.length]}for(M=v.length-2;M>=k;M--)if(P=S[M],P<V){for(I=0,z=M-1;z>=k&&P+S[z]<V;z--)P+=S[z];if(x&&M===v.length-2)for(I=0;I<z&&P+S[I]<V;I++)P+=S[I];D=M-z+I+1,O=Math.floor((M+z+I+2)/2),!x&&M===v.length-2?R=v[v.length-1]:!x&&z===-1?R=v[0]:D%2?R=K(O):R=[(K(O)[0]+K(O+1)[0])/2,(K(O)[1]+K(O+1)[1])/2],v.splice(z+1,M-z+1,R),M=z+1,I&&(k=I),x&&(M===v.length-2?v[I]=v[v.length-1]:M===0&&(v[v.length-1]=v[0]))}for(v.splice(0,k),M=0;M<v.length;M++)v[M].length=2;if(!(v.length<2))if(x)v.pop(),n.paths.push(v);else{u||d.log("Unclosed interior contour?",n.level,A.join(","),v.join("L"));var se=!1;for(Y=0;Y<n.edgepaths.length;Y++)if(q=n.edgepaths[Y],!se&&b(q[0],v[v.length-1],s,i)){v.pop(),se=!0;var ue=!1;for(X=0;X<n.edgepaths.length;X++)if($=n.edgepaths[X],b($[$.length-1],v[0],s,i)){ue=!0,v.shift(),n.edgepaths.splice(Y,1),X===Y?n.paths.push(v.concat($)):(X>Y&&X--,n.edgepaths[X]=$.concat(v,q));break}ue||(n.edgepaths[Y]=v.concat(q))}for(Y=0;Y<n.edgepaths.length&&!se;Y++)q=n.edgepaths[Y],b(q[q.length-1],v[0],s,i)&&(v.shift(),n.edgepaths[Y]=q.concat(v),se=!0);se||n.edgepaths.push(v)}}function o(n,r,u){var s=0,i=0;return n>20&&r?n===208||n===1114?s=u[0]===0?1:-1:i=u[1]===0?1:-1:l.BOTTOMSTART.indexOf(n)!==-1?i=1:l.LEFTSTART.indexOf(n)!==-1?s=1:l.TOPSTART.indexOf(n)!==-1?i=-1:s=-1,[s,i]}function a(n,r,u){var s=r[0]+Math.max(u[0],0),i=r[1]+Math.max(u[1],0),f=n.z[i][s],h=n.xaxis,p=n.yaxis;if(u[1]){var v=(n.level-f)/(n.z[i][s+1]-f),y=(v!==1?(1-v)*h.c2l(n.x[s]):0)+(v!==0?v*h.c2l(n.x[s+1]):0);return[h.c2p(h.l2c(y),!0),p.c2p(n.y[i],!0),s+v,i]}else{var g=(n.level-f)/(n.z[i+1][s]-f),A=(g!==1?(1-g)*p.c2l(n.y[i]):0)+(g!==0?g*p.c2l(n.y[i+1]):0);return[h.c2p(n.x[s],!0),p.c2p(p.l2c(A),!0),s,i+g]}}},{"../../lib":503,"./constants":739}],748:[function(t,B,H){var d=t("../../components/color"),l=t("../heatmap/hover");B.exports=function(w,e,o,a,n){n||(n={}),n.isContour=!0;var r=l(w,e,o,a,n);return r&&r.forEach(function(u){var s=u.trace;s.contours.type==="constraint"&&(s.fillcolor&&d.opacity(s.fillcolor)?u.color=d.addOpacity(s.fillcolor,1):s.contours.showlines&&d.opacity(s.line.color)&&(u.color=d.addOpacity(s.line.color,1)))}),r}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w,e,o){o||(o={});var a=b("contours.showlabels");if(a){var n=w.font;d.coerceFont(b,"contours.labelfont",{family:n.family,size:n.size,color:e}),b("contours.labelformat")}o.hasHover!==!1&&b("zhoverformat")}},{"../../lib":503}],751:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/colorscale"),b=t("./end_plus");B.exports=function(e){var o=e.contours,a=o.start,n=b(o),r=o.size||1,u=Math.floor((n-a)/r)+1,s=o.coloring==="lines"?0:1,i=l.extractOpts(e);isFinite(r)||(r=1,u=1);var f=i.reversescale?l.flipScale(i.colorscale):i.colorscale,h=f.length,p=new Array(h),v=new Array(h),y,g;if(o.coloring==="heatmap"){var A=i.min,m=i.max;for(g=0;g<h;g++)y=f[g],p[g]=y[0]*(m-A)+A,v[g]=y[1];var M=d.extent([A,m,o.start,o.start+r*(u-1)]),_=M[A<m?0:1],T=M[A<m?1:0];_!==A&&(p.splice(0,0,_),v.splice(0,0,v[0])),T!==m&&(p.push(T),v.push(v[v.length-1]))}else for(g=0;g<h;g++)y=f[g],p[g]=(y[0]*(u+s-1)-s/2)*r+a,v[g]=y[1];return l.makeColorScaleFunc({domain:p,range:v},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(t,B,H){var d=t("./constants");B.exports=function(w){var e=w[0].z,o=e.length,a=e[0].length,n=o===2||a===2,r,u,s,i,f,h,p,v,y;for(u=0;u<o-1;u++)for(i=[],u===0&&(i=i.concat(d.BOTTOMSTART)),u===o-2&&(i=i.concat(d.TOPSTART)),r=0;r<a-1;r++)for(s=i.slice(),r===0&&(s=s.concat(d.LEFTSTART)),r===a-2&&(s=s.concat(d.RIGHTSTART)),f=r+","+u,h=[[e[u][r],e[u][r+1]],[e[u+1][r],e[u+1][r+1]]],y=0;y<w.length;y++)v=w[y],p=l(v.level,h),!!p&&(v.crossings[f]=p,s.indexOf(p)!==-1&&(v.starts.push([r,u]),n&&s.indexOf(p,s.indexOf(p)+1)!==-1&&v.starts.push([r,u])))};function l(b,w){var e=(w[0][0]>b?0:1)+(w[0][1]>b?0:2)+(w[1][1]>b?0:4)+(w[1][0]>b?0:8);if(e===5||e===10){var o=(w[0][0]+w[0][1]+w[1][0]+w[1][1])/4;return b>o?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":739}],753:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/set_convert"),n=t("../heatmap/plot"),r=t("./make_crossings"),u=t("./find_all_paths"),s=t("./empty_pathinfo"),i=t("./convert_to_constraints"),f=t("./close_boundaries"),h=t("./constants"),p=h.LABELOPTIMIZER;H.plot=function(x,c,L,S){var k=c.xaxis,P=c.yaxis;l.makeTraceGroups(S,L,"contour").each(function(z){var I=d.select(this),R=z[0],D=R.trace,O=R.x,F=R.y,Y=D.contours,X=s(Y,c,R),q=l.ensureSingle(I,"g","heatmapcoloring"),$=[];Y.coloring==="heatmap"&&($=[z]),n(x,c,$,q),r(X),u(X);var V=k.c2p(O[0],!0),K=k.c2p(O[O.length-1],!0),se=P.c2p(F[0],!0),ue=P.c2p(F[F.length-1],!0),oe=[[V,ue],[K,ue],[K,se],[V,se]],U=X;Y.type==="constraint"&&(U=i(X,Y._operation)),v(I,oe,Y),y(I,U,oe,Y),A(I,X,x,R,Y),M(I,c,x,R,oe)})};function v(T,x,c){var L=l.ensureSingle(T,"g","contourbg"),S=L.selectAll("path").data(c.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+x.join("L")+"Z").style("stroke","none")}function y(T,x,c,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+c.join("L")+"Z";S&&f(x,L);var P=l.ensureSingle(T,"g","contourfill"),z=P.selectAll("path").data(S?x:[]);z.enter().append("path"),z.exit().remove(),z.each(function(I){var R=(I.prefixBoundary?k:"")+g(I,c);R?d.select(this).attr("d",R).style("stroke","none"):d.select(this).remove()})}function g(T,x){var c="",L=0,S=T.edgepaths.map(function(V,K){return K}),k=!0,P,z,I,R,D,O;function F(V){return Math.abs(V[1]-x[0][1])<.01}function Y(V){return Math.abs(V[1]-x[2][1])<.01}function X(V){return Math.abs(V[0]-x[0][0])<.01}function q(V){return Math.abs(V[0]-x[2][0])<.01}for(;S.length;){for(O=b.smoothopen(T.edgepaths[L],T.smoothing),c+=k?O:O.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=T.edgepaths[L][T.edgepaths[L].length-1],R=-1,I=0;I<4;I++){if(!P){l.log("Missing end?",L,T);break}for(F(P)&&!q(P)?z=x[1]:X(P)?z=x[0]:Y(P)?z=x[3]:q(P)&&(z=x[2]),D=0;D<T.edgepaths.length;D++){var $=T.edgepaths[D][0];Math.abs(P[0]-z[0])<.01?Math.abs(P[0]-$[0])<.01&&($[1]-P[1])*(z[1]-$[1])>=0&&(z=$,R=D):Math.abs(P[1]-z[1])<.01?Math.abs(P[1]-$[1])<.01&&($[0]-P[0])*(z[0]-$[0])>=0&&(z=$,R=D):l.log("endpt to newendpt is not vert. or horz.",P,z,$)}if(P=z,R>=0)break;c+="L"+z}if(R===T.edgepaths.length){l.log("unclosed perimeter path");break}L=R,k=S.indexOf(L)===-1,k&&(L=S[0],c+="Z")}for(L=0;L<T.paths.length;L++)c+=b.smoothclosed(T.paths[L],T.smoothing);return c}function A(T,x,c,L,S){var k=l.ensureSingle(T,"g","contourlines"),P=S.showlines!==!1,z=S.showlabels,I=P&&z,R=H.createLines(k,P||z,x),D=H.createLineClip(k,I,c,L.trace.uid),O=T.selectAll("g.contourlabels").data(z?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),z){var F=[],Y=[];l.clearLocationCache();var X=H.labelFormatter(c,L),q=b.tester.append("text").attr("data-notex",1).call(b.font,S.labelfont),$=x[0].xaxis,V=x[0].yaxis,K=$._length,se=V._length,ue=$.range,oe=V.range,U=l.aggNums(Math.min,null,L.x),G=l.aggNums(Math.max,null,L.x),re=l.aggNums(Math.min,null,L.y),ee=l.aggNums(Math.max,null,L.y),j=Math.max($.c2p(U,!0),0),Q=Math.min($.c2p(G,!0),K),ne=Math.max(V.c2p(ee,!0),0),ae=Math.min(V.c2p(re,!0),se),ie={};ue[0]<ue[1]?(ie.left=j,ie.right=Q):(ie.left=Q,ie.right=j),oe[0]<oe[1]?(ie.top=ne,ie.bottom=ae):(ie.top=ae,ie.bottom=ne),ie.middle=(ie.top+ie.bottom)/2,ie.center=(ie.left+ie.right)/2,F.push([[ie.left,ie.top],[ie.right,ie.top],[ie.right,ie.bottom],[ie.left,ie.bottom]]);var fe=Math.sqrt(K*K+se*se),me=h.LABELDISTANCE*fe/Math.max(1,x.length/h.LABELINCREASE);R.each(function(ce){var ye=H.calcTextOpts(ce.level,X,q,c);d.select(this).selectAll("path").each(function(){var xe=this,ke=l.getVisibleSegment(xe,ie,ye.height/2);if(!!ke&&!(ke.len<(ye.width+ye.height)*h.LABELMIN))for(var Ae=Math.min(Math.ceil(ke.len/me),h.LABELMAX),Oe=0;Oe<Ae;Oe++){var He=H.findBestTextLocation(xe,ke,ye,Y,ie);if(!He)break;H.addLabelData(He,ye,Y,F)}})}),q.remove(),H.drawLabels(O,Y,c,D,I?F:null)}z&&!P&&R.remove()}H.createLines=function(T,x,c){var L=c[0].smoothing,S=T.selectAll("g.contourlevel").data(x?c:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),x){var k=S.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(z){return b.smoothopen(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(z){return b.smoothclosed(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},H.createLineClip=function(T,x,c,L){var S=c._fullLayout._clips,k=x?"clipline"+L:null,P=S.selectAll("#"+k).data(x?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),b.setClipUrl(T,k,c),P},H.labelFormatter=function(T,x){var c=T._fullLayout,L=x.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,a(k,c);else{var P=w.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var z=S.value;Array.isArray(z)?k.range=[z[0],z[z.length-1]]:k.range=[z,z]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),a(k,c),o.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return o.tickText(k,I).text}},H.calcTextOpts=function(T,x,c,L){var S=x(T);c.text(S).call(e.convertToTspans,L);var k=c.node(),P=b.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:T,dy:(P.top+P.bottom)/2}},H.findBestTextLocation=function(T,x,c,L,S){var k=c.width,P,z,I,R,D;x.isClosed?(z=x.len/p.INITIALSEARCHPOINTS,P=x.min+z/2,I=x.max):(z=(x.len-k)/(p.INITIALSEARCHPOINTS+1),P=x.min+z+k/2,I=x.max-(z+k)/2);for(var O=1/0,F=0;F<p.ITERATIONS;F++){for(var Y=P;Y<I;Y+=z){var X=l.getTextLocation(T,x.total,Y,k),q=m(X,c,L,S);q<O&&(O=q,D=X,R=Y)}if(O>p.MAXCOST*2)break;F&&(z/=2),P=R-z/2,I=P+z*1.5}if(O<=p.MAXCOST)return D};function m(T,x,c,L){var S=x.width/2,k=x.height/2,P=T.x,z=T.y,I=T.theta,R=Math.cos(I)*S,D=Math.sin(I)*S,O=(P>L.center?L.right-P:P-L.left)/(R+Math.abs(Math.sin(I)*k)),F=(z>L.middle?L.bottom-z:z-L.top)/(Math.abs(D)+Math.cos(I)*k);if(O<1||F<1)return 1/0;var Y=p.EDGECOST*(1/(O-1)+1/(F-1));Y+=p.ANGLECOST*I*I;for(var X=P-R,q=z-D,$=P+R,V=z+D,K=0;K<c.length;K++){var se=c[K],ue=Math.cos(se.theta)*se.width/2,oe=Math.sin(se.theta)*se.width/2,U=l.segmentDistance(X,q,$,V,se.x-ue,se.y-oe,se.x+ue,se.y+oe)*2/(x.height+se.height),G=se.level===x.level,re=G?p.SAMELEVELDISTANCE:1;if(U<=re)return 1/0;var ee=p.NEIGHBORCOST*(G?p.SAMELEVELFACTOR:1);Y+=ee/(U-re)}return Y}H.addLabelData=function(T,x,c,L){var S=x.fontSize,k=x.width+S/3,P=Math.max(0,x.height-S/3),z=T.x,I=T.y,R=T.theta,D=Math.sin(R),O=Math.cos(R),F=function(X,q){return[z+X*O-q*D,I+X*D+q*O]},Y=[F(-k/2,-P/2),F(-k/2,P/2),F(k/2,P/2),F(k/2,-P/2)];c.push({text:x.text,x:z,y:I,dy:x.dy,theta:R,level:x.level,width:k,height:P}),L.push(Y)},H.drawLabels=function(T,x,c,L,S){var k=T.selectAll("text").data(x,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var D=R.x+Math.sin(R.theta)*R.dy,O=R.y-Math.cos(R.theta)*R.dy;d.select(this).text(R.text).attr({x:D,y:O,transform:"rotate("+180*R.theta/Math.PI+" "+D+" "+O+")"}).call(e.convertToTspans,c)}),S){for(var P="",z=0;z<S.length;z++)P+="M"+S[z].join("L")+"Z";var I=l.ensureSingle(L,"path","");I.attr("d",P)}};function M(T,x,c,L,S){var k=L.trace,P=c._fullLayout._clips,z="clip"+k.uid,I=P.selectAll("#"+z).data(k.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",z),I.exit().remove(),k.connectgaps===!1){var R={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:x.xaxis,yaxis:x.yaxis,x:L.x,y:L.y,z:_(L),smoothing:0};r([R]),u([R]),f([R],{type:"levels"});var D=l.ensureSingle(I,"path","");D.attr("d",(R.prefixBoundary?"M"+S.join("L")+"Z":"")+g(R,S))}else z=null;b.setClipUrl(T,z,c)}function _(T){var x=T.trace._emptypoints,c=[],L=T.z.length,S=T.z[0].length,k,P=[],z;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)c.push(P.slice());for(k=0;k<x.length;k++)z=x[k],c[z[0]][z[1]]=0;return T.zmask=c,c}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib");B.exports=function(e,o){var a=e.contours;if(e.autocontour){var n=e.zmin,r=e.zmax;(e.zauto||n===void 0)&&(n=l.aggNums(Math.min,null,o)),(e.zauto||r===void 0)&&(r=l.aggNums(Math.max,null,o));var u=b(n,r,e.ncontours);a.size=u.dtick,a.start=d.tickFirst(u),u.range.reverse(),a.end=d.tickFirst(u),a.start===n&&(a.start+=a.size),a.end===r&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),e._input.contours||(e._input.contours={}),l.extendFlat(e._input.contours,{start:a.start,end:a.end,size:a.size}),e._input.autocontour=!0}else if(a.type!=="constraint"){var s=a.start,i=a.end,f=e._input.contours;if(s>i&&(a.start=f.start=i,i=a.end=f.end=s,s=a.start),!(a.size>0)){var h;s===i?h=1:h=b(s,i,e.ncontours).dtick,f.size=a.size=h}}};function b(w,e,o){var a={type:"linear",range:[w,e]};return d.autoTicks(a,(e-w)/(o||15)),a}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../heatmap/style"),w=t("./make_color_map");B.exports=function(o){var a=d.select(o).selectAll("g.contour");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var r=d.select(this),u=n[0].trace,s=u.contours,i=u.line,f=s.size||1,h=s.start,p=s.type==="constraint",v=!p&&s.coloring==="lines",y=!p&&s.coloring==="fill",g=v||y?w(u):null;r.selectAll("g.contourlevel").each(function(M){d.select(this).selectAll("path").call(l.lineGroupStyle,i.width,v?g(M.level):i.color,i.dash)});var A=s.labelfont;if(r.selectAll("g.contourlabels text").each(function(M){l.font(d.select(this),{family:A.family,size:A.size,color:A.color||(v?g(M.level):i.color)})}),p)r.selectAll("g.contourfill path").style("fill",u.fillcolor);else if(y){var m;r.selectAll("g.contourfill path").style("fill",function(M){return m===void 0&&(m=M.level),g(M.level+.5*f)}),m===void 0&&(m=h),r.selectAll("g.contourbg path").style("fill",g(m-.5*f))}}),b(o)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(t,B,H){var d=t("../../components/colorscale/defaults"),l=t("./label_defaults");B.exports=function(w,e,o,a,n){var r=o("contours.coloring"),u,s="";r==="fill"&&(u=o("contours.showlines")),u!==!1&&(r!=="lines"&&(s=o("line.color","#000")),o("line.width",.5),o("line.dash")),r!=="none"&&(w.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,d(w,e,a,o,{prefix:"",cLetter:"z"})),o("line.smoothing"),l(o,a,s,n)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(t,B,H){var d=t("../heatmap/attributes"),l=t("../contour/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../lib/extend").extendFlat,e=l.contours;B.exports=w({carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,hovertext:d.hovertext,transpose:d.transpose,atype:d.xtype,btype:d.ytype,fillcolor:l.fillcolor,autocontour:l.autocontour,ncontours:l.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:l.line.color,width:l.line.width,dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(t,B,H){var d=t("../../components/colorscale/calc"),l=t("../../lib"),b=t("../heatmap/convert_column_xyz"),w=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),o=t("../heatmap/find_empties"),a=t("../heatmap/make_bound_array"),n=t("./defaults"),r=t("../carpet/lookup_carpetid"),u=t("../contour/set_contours");B.exports=function(f,h){var p=h._carpetTrace=r(f,h);if(!(!p||!p.visible||p.visible==="legendonly")){if(!h.a||!h.b){var v=f.data[p.index],y=f.data[h.index];y.a||(y.a=v.a),y.b||(y.b=v.b),n(y,h,h._defaultColor,f._fullLayout)}var g=s(f,h);return u(h,h._z),g}};function s(i,f){var h=f._carpetTrace,p=h.aaxis,v=h.baxis,y,g,A,m,M,_,T;p._minDtick=0,v._minDtick=0,l.isArray1D(f.z)&&b(f,p,v,"a","b",["z"]),y=f._a=f._a||f.a,m=f._b=f._b||f.b,y=y?p.makeCalcdata(f,"_a"):[],m=m?v.makeCalcdata(f,"_b"):[],g=f.a0||0,A=f.da||1,M=f.b0||0,_=f.db||1,T=f._z=w(f._z||f.z,f.transpose),f._emptypoints=o(T),e(T,f._emptypoints);var x=l.maxRowLength(T),c=f.xtype==="scaled"?"":y,L=a(f,c,g,A,x,p),S=f.ytype==="scaled"?"":m,k=a(f,S,M,_,T.length,v),P={a:L,b:k,z:T};return f.contours.type==="levels"&&f.contours.coloring!=="none"&&d(i,f,{vals:T,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("./attributes"),w=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),o=t("../contour/style_defaults");B.exports=function(n,r,u,s){function i(v,y){return d.coerce(n,r,b,v,y)}function f(v){return d.coerce2(n,r,b,v)}if(i("carpet"),n.a&&n.b){var h=l(n,r,i,s,"a","b");if(!h){r.visible=!1;return}i("text");var p=i("contours.type")==="constraint";p?w(n,r,i,s,u,{hasHover:!1}):(e(n,r,i,f),o(n,r,i,s,{hasHover:!1}))}else r._defaultColor=u,r._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(t,B,H){var d=t("@plotly/d3"),l=t("../carpet/map_1d_array"),b=t("../carpet/makepath"),w=t("../../components/drawing"),e=t("../../lib"),o=t("../contour/make_crossings"),a=t("../contour/find_all_paths"),n=t("../contour/plot"),r=t("../contour/constants"),u=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),i=t("../contour/close_boundaries"),f=t("../carpet/lookup_carpetid"),h=t("../carpet/axis_aligned_line");B.exports=function(c,L,S,k){var P=L.xaxis,z=L.yaxis;e.makeTraceGroups(k,S,"contour").each(function(I){var R=d.select(this),D=I[0],O=D.trace,F=O._carpetTrace=f(c,O),Y=c.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var X=D.a,q=D.b,$=O.contours,V=s($,L,D),K=$.type==="constraint",se=$._operation,ue=K?se==="="?"lines":"fill":$.coloring;function oe(me){var ce=F.ab2xy(me[0],me[1],!0);return[P.c2p(ce[0]),z.c2p(ce[1])]}var U=[[X[0],q[q.length-1]],[X[X.length-1],q[q.length-1]],[X[X.length-1],q[0]],[X[0],q[0]]];o(V);var G=(X[X.length-1]-X[0])*1e-8,re=(q[q.length-1]-q[0])*1e-8;a(V,G,re);var ee=V;$.type==="constraint"&&(ee=u(V,se)),p(V,oe);var j,Q,ne,ae,ie=[];for(ae=Y.clipsegments.length-1;ae>=0;ae--)j=Y.clipsegments[ae],Q=l([],j.x,P.c2p),ne=l([],j.y,z.c2p),Q.reverse(),ne.reverse(),ie.push(b(Q,ne,j.bicubic));var fe="M"+ie.join("L")+"Z";M(R,Y.clipsegments,P,z,K,ue),_(O,R,P,z,ee,U,oe,F,Y,ue,fe),v(R,V,c,D,$,L,F),w.setClipUrl(R,F._clipPathId,c)})};function p(x,c){var L,S,k,P,z,I,R,D,O;for(L=0;L<x.length;L++){for(P=x[L],z=P.pedgepaths=[],I=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(O=P.edgepaths[S],R=[],k=0;k<O.length;k++)R[k]=c(O[k]);z.push(R)}for(S=0;S<P.paths.length;S++){for(O=P.paths[S],D=[],k=0;k<O.length;k++)D[k]=c(O[k]);I.push(D)}}}function v(x,c,L,S,k,P,z){var I=e.ensureSingle(x,"g","contourlines"),R=k.showlines!==!1,D=k.showlabels,O=R&&D,F=n.createLines(I,R||D,c),Y=n.createLineClip(I,O,L,S.trace.uid),X=x.selectAll("g.contourlabels").data(D?[0]:[]);if(X.exit().remove(),X.enter().append("g").classed("contourlabels",!0),D){var q=P.xaxis,$=P.yaxis,V=q._length,K=$._length,se=[[[0,0],[V,0],[V,K],[0,K]]],ue=[];e.clearLocationCache();var oe=n.labelFormatter(L,S),U=w.tester.append("text").attr("data-notex",1).call(w.font,k.labelfont),G={left:0,right:V,center:V/2,top:0,bottom:K,middle:K/2},re=Math.sqrt(V*V+K*K),ee=r.LABELDISTANCE*re/Math.max(1,c.length/r.LABELINCREASE);F.each(function(j){var Q=n.calcTextOpts(j.level,oe,U,L);d.select(this).selectAll("path").each(function(ne){var ae=this,ie=e.getVisibleSegment(ae,G,Q.height/2);if(!!ie&&(y(ae,ne,j,ie,z,Q.height),!(ie.len<(Q.width+Q.height)*r.LABELMIN)))for(var fe=Math.min(Math.ceil(ie.len/ee),r.LABELMAX),me=0;me<fe;me++){var ce=n.findBestTextLocation(ae,ie,Q,ue,G);if(!ce)break;n.addLabelData(ce,Q,ue,se)}})}),U.remove(),n.drawLabels(X,ue,L,Y,O?se:null)}D&&!R&&F.remove()}function y(x,c,L,S,k,P){for(var z,I=0;I<L.pedgepaths.length;I++)c===L.pedgepaths[I]&&(z=L.edgepaths[I]);if(!z)return;var R=k.a[0],D=k.a[k.a.length-1],O=k.b[0],F=k.b[k.b.length-1];function Y(K,se){var ue=0,oe,U=.1;return(Math.abs(K[0]-R)<U||Math.abs(K[0]-D)<U)&&(oe=A(k.dxydb_rough(K[0],K[1],U)),ue=Math.max(ue,P*m(se,oe)/2)),(Math.abs(K[1]-O)<U||Math.abs(K[1]-F)<U)&&(oe=A(k.dxyda_rough(K[0],K[1],U)),ue=Math.max(ue,P*m(se,oe)/2)),ue}var X=g(x,0,1),q=g(x,S.total,S.total-1),$=Y(z[0],X),V=S.total-Y(z[z.length-1],q);S.min<$&&(S.min=$),S.max>V&&(S.max=V),S.len=S.max-S.min}function g(x,c,L){var S=x.getPointAtLength(c),k=x.getPointAtLength(L),P=k.x-S.x,z=k.y-S.y,I=Math.sqrt(P*P+z*z);return[P/I,z/I]}function A(x){var c=Math.sqrt(x[0]*x[0]+x[1]*x[1]);return[x[0]/c,x[1]/c]}function m(x,c){var L=Math.abs(x[0]*c[0]+x[1]*c[1]),S=Math.sqrt(1-L*L);return S/L}function M(x,c,L,S,k,P){var z,I,R,D,O=e.ensureSingle(x,"g","contourbg"),F=O.selectAll("path").data(P==="fill"&&!k?[0]:[]);F.enter().append("path"),F.exit().remove();var Y=[];for(D=0;D<c.length;D++)z=c[D],I=l([],z.x,L.c2p),R=l([],z.y,S.c2p),Y.push(b(I,R,z.bicubic));F.attr("d","M"+Y.join("L")+"Z").style("stroke","none")}function _(x,c,L,S,k,P,z,I,R,D,O){var F=D==="fill";F&&i(k,x.contours);var Y=e.ensureSingle(c,"g","contourfill"),X=Y.selectAll("path").data(F?k:[]);X.enter().append("path"),X.exit().remove(),X.each(function(q){var $=(q.prefixBoundary?O:"")+T(x,q,P,z,I,R,L,S);$?d.select(this).attr("d",$).style("stroke","none"):d.select(this).remove()})}function T(x,c,L,S,k,P,z,I){var R,D="",O=c.edgepaths.map(function(ne,ae){return ae}),F=!0,Y,X,q,$,V,K,se=Math.abs(L[0][0]-L[2][0])*1e-4,ue=Math.abs(L[0][1]-L[2][1])*1e-4;function oe(ne){return Math.abs(ne[1]-L[0][1])<ue}function U(ne){return Math.abs(ne[1]-L[2][1])<ue}function G(ne){return Math.abs(ne[0]-L[0][0])<se}function re(ne){return Math.abs(ne[0]-L[2][0])<se}function ee(ne,ae){var ie,fe,me,ce,ye="";for(oe(ne)&&!re(ne)||U(ne)&&!G(ne)?(ce=k.aaxis,me=h(k,P,[ne[0],ae[0]],.5*(ne[1]+ae[1]))):(ce=k.baxis,me=h(k,P,.5*(ne[0]+ae[0]),[ne[1],ae[1]])),ie=1;ie<me.length;ie++)for(ye+=ce.smoothing?"C":"L",fe=0;fe<me[ie].length;fe++){var xe=me[ie][fe];ye+=[z.c2p(xe[0]),I.c2p(xe[1])]+" "}return ye}for(R=0,Y=null;O.length;){var j=c.edgepaths[R][0];for(Y&&(D+=ee(Y,j)),K=w.smoothopen(c.edgepaths[R].map(S),c.smoothing),D+=F?K:K.replace(/^M/,"L"),O.splice(O.indexOf(R),1),Y=c.edgepaths[R][c.edgepaths[R].length-1],$=-1,q=0;q<4;q++){if(!Y){e.log("Missing end?",R,c);break}for(oe(Y)&&!re(Y)?X=L[1]:G(Y)?X=L[0]:U(Y)?X=L[3]:re(Y)&&(X=L[2]),V=0;V<c.edgepaths.length;V++){var Q=c.edgepaths[V][0];Math.abs(Y[0]-X[0])<se?Math.abs(Y[0]-Q[0])<se&&(Q[1]-Y[1])*(X[1]-Q[1])>=0&&(X=Q,$=V):Math.abs(Y[1]-X[1])<ue?Math.abs(Y[1]-Q[1])<ue&&(Q[0]-Y[0])*(X[0]-Q[0])>=0&&(X=Q,$=V):e.log("endpt to newendpt is not vert. or horz.",Y,X,Q)}if($>=0)break;D+=ee(Y,X),Y=X}if($===c.edgepaths.length){e.log("unclosed perimeter path");break}R=$,F=O.indexOf(R)===-1,F&&(R=O[0],D+=ee(Y,X)+"Z",Y=null)}for(R=0;R<c.paths.length;R++)D+=w.smoothclosed(c.paths[R].map(S),c.smoothing);return D}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../plots/attributes"),w=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({lon:w.lon,lat:w.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:l(),showlegend:e({},b.showlegend,{dflt:!1})},d("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib").isArrayOrTypedArray,b=t("../../constants/numerical").BADNUM,w=t("../../components/colorscale/calc"),e=t("../../lib")._;B.exports=function(a,n){for(var r=n._length,u=new Array(r),s=n.z,i=l(s)&&s.length,f=0;f<r;f++){var h=u[f]={},p=n.lon[f],v=n.lat[f];if(h.lonlat=d(p)&&d(v)?[+p,+v]:[b,b],i){var y=s[f];h.z=d(y)?y:b}}return w(a,n,{vals:i?s:[0,1],containerStr:"",cLetter:"z"}),r&&(u[0].t={labels:{lat:e(a,"lat:")+" ",lon:e(a,"lon:")+" "}}),u}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../components/color"),w=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,o=t("../../lib/geojson_utils").makeBlank;B.exports=function(n){var r=n[0].trace,u=r.visible===!0&&r._length!==0,s={layout:{visibility:"none"},paint:{}},i=r._opts={heatmap:s,geojson:o()};if(!u)return i;var f=[],h,p=r.z,v=r.radius,y=l.isArrayOrTypedArray(p)&&p.length,g=l.isArrayOrTypedArray(v);for(h=0;h<n.length;h++){var A=n[h],m=A.lonlat;if(m[0]!==e){var M={};if(y){var _=A.z;M.z=_!==e?_:0}g&&(M.r=d(v[h])&&v[h]>0?+v[h]:0),f.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:M})}}var T=w.extractOpts(r),x=T.reversescale?w.flipScale(T.colorscale):T.colorscale,c=x[0][1],L=b.opacity(c)<1?c:b.addOpacity(c,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(h=1;h<x.length;h++)S.push(x[h][0],x[h][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return l.extendFlat(i.heatmap.paint,{"heatmap-weight":y?k:1/(T.max-T.min),"heatmap-color":S,"heatmap-radius":g?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),i.geojson={type:"FeatureCollection",features:f},i.heatmap.layout.visibility="visible",i}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,n){function r(f,h){return d.coerce(e,o,b,f,h)}var u=r("lon")||[],s=r("lat")||[],i=Math.min(u.length,s.length);if(!i){o.visible=!1;return}o._length=i,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),l(e,o,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(t,B,H){B.exports=function(l,b){return l.lon=b.lon,l.lat=b.lat,l.z=b.z,l}},{}],767:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../scattermapbox/hover").hoverPoints,b=t("../scattermapbox/hover").getExtraText;B.exports=function(e,o,a){var n=l(e,o,a);if(!!n){var r=n[0],u=r.cd,s=u[0].trace,i=u[r.index];if(delete r.color,"z"in i){var f=r.subplot.mockAxis;r.z=i.z,r.zLabel=d.tickText(f,f.c2l(i.z),"hover").text}return r.extraText=b(s,i,u[0].t.labels),[r]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(d,l){for(var b=l.getMapLayers(),w=0;w<b.length;w++){var e=b[w],o=e.id;if(e.type==="symbol"&&typeof o=="string"&&o.indexOf("plotly-")===-1)return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(t,B,H){var d=t("./convert"),l=t("../../plots/mapbox/constants").traceLayerPrefix;function b(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",l+o+"-heatmap"]],this.below=null}var w=b.prototype;w.update=function(e){var o=this.subplot,a=this.layerList,n=d(e),r=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var u=0;u<a.length;u++){var s=a[u],i=s[0],f=s[1],h=n[i];o.setOptions(f,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&o.setOptions(f,"setPaintProperty",h.paint)}},w._addLayers=function(e,o){for(var a=this.subplot,n=this.layerList,r=this.sourceId,u=0;u<n.length;u++){var s=n[u],i=s[0],f=e[i];a.addLayer({type:i,id:s[1],source:r,layout:f.layout,paint:f.paint},o)}},w._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)e.removeLayer(o[a][1])},w.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},B.exports=function(o,a){var n=a[0].trace,r=new b(o,n.uid),u=r.sourceId,s=d(a),i=r.below=o.belowLookup["trace-"+n.uid];return o.map.addSource(u,{type:"geojson",data:s.geojson}),r._addLayers(s,i),r}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.hovertext,b,"htx");var o=w.marker;if(o){d.mergeArray(o.opacity,b,"mo"),d.mergeArray(o.color,b,"mc");var a=o.line;a&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"))}}},{"../../lib":503}],771:[function(t,B,H){var d=t("../bar/attributes"),l=t("../scatter/attributes").line,b=t("../../plots/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");B.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:d.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:n({},b.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:d.text,textposition:d.textposition,insidetextanchor:n({},d.insidetextanchor,{dflt:"middle"}),textangle:n({},d.textangle,{dflt:0}),textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:n({},d.orientation,{}),offset:n({},d.offset,{arrayOk:!1}),width:n({},d.width,{arrayOk:!1}),marker:u(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},l.color,{dflt:r.defaultLine}),width:n({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup};function u(){var s=n({},d.marker);return delete s.pattern,s}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("./arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;B.exports=function(n,r){var u=d.getFromId(n,r.xaxis||"x"),s=d.getFromId(n,r.yaxis||"y"),i,f,h,p,v,y,g,A;r.orientation==="h"?(i=u.makeCalcdata(r,"x"),h=s.makeCalcdata(r,"y"),p=l(r,s,"y",h),v=!!r.yperiodalignment,y="y"):(i=s.makeCalcdata(r,"y"),h=u.makeCalcdata(r,"x"),p=l(r,u,"x",h),v=!!r.xperiodalignment,y="x"),f=p.vals;var m=Math.min(f.length,i.length),M=new Array(m);for(r._base=[],g=0;g<m;g++){i[g]<0&&(i[g]=e);var _=!1;i[g]!==e&&g+1<m&&i[g+1]!==e&&(_=!0),A=M[g]={p:f[g],s:i[g],cNext:_},r._base[g]=-.5*A.s,v&&(M[g].orig_p=h[g],M[g][y+"End"]=p.ends[g],M[g][y+"Start"]=p.starts[g]),r.ids&&(A.id=String(r.ids[g])),g===0&&(M[0].vTotal=0),M[0].vTotal+=o(A.s),A.begR=o(A.s)/o(M[0].s)}var T;for(g=0;g<m;g++)A=M[g],A.s!==e&&(A.sumR=A.s/M[0].vTotal,A.difR=T!==void 0?A.s/T:1,T=A.s);return b(M,r),w(M,r),M};function o(a){return a===e?0:a}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(t,B,H){B.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(t,B,H){var d=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(b,w){var e=b._fullLayout,o=b._fullData,a=b.calcdata,n=w.xaxis,r=w.yaxis,u=[],s=[],i=[],f,h;for(h=0;h<o.length;h++){var p=o[h],v=p.orientation==="h";p.visible===!0&&p.xaxis===n._id&&p.yaxis===r._id&&p.type==="funnel"&&(f=a[h],v?i.push(f):s.push(f),u.push(f))}var y={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(d(b,n,r,s,y),d(b,r,n,i,y),h=0;h<u.length;h++){f=u[h];for(var g=0;g<f.length;g++)g+1<f.length&&(f[g].nextP0=f[g+1].p0,f[g].nextS0=f[g+1].s0,f[g].nextP1=f[g+1].p1,f[g].nextS1=f[g+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(t,B,H){var d=t("../../lib"),l=t("../bar/defaults").handleGroupingDefaults,b=t("../bar/defaults").handleText,w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./attributes"),a=t("../../components/color");function n(s,i,f,h){function p(_,T){return d.coerce(s,i,o,_,T)}var v=w(s,i,h,p);if(!v){i.visible=!1;return}e(s,i,h,p),p("xhoverformat"),p("yhoverformat"),p("orientation",i.y&&!i.x?"v":"h"),p("offset"),p("width");var y=p("text");p("hovertext"),p("hovertemplate");var g=p("textposition");b(s,i,h,p,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&!i.texttemplate&&p("textinfo",Array.isArray(y)?"text+value":"value");var A=p("marker.color",f);p("marker.line.color",a.defaultLine),p("marker.line.width");var m=p("connector.visible");if(m){p("connector.fillcolor",r(A));var M=p("connector.line.width");M&&(p("connector.line.color"),p("connector.line.dash"))}}function r(s){var i=d.isArrayOrTypedArray(s)?"#000":s;return a.addOpacity(i,.5*a.opacity(i))}function u(s,i){var f,h;function p(y){return d.coerce(h._input,h,o,y)}if(i.funnelmode==="group")for(var v=0;v<s.length;v++)h=s[v],f=h._input,l(f,h,i,p)}B.exports={supplyDefaults:n,crossTraceDefaults:u}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(t,B,H){B.exports=function(l,b){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"percentInitial"in b&&(l.percentInitial=b.percentInitial),"percentPrevious"in b&&(l.percentPrevious=b.percentPrevious),"percentTotal"in b&&(l.percentTotal=b.percentTotal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],777:[function(t,B,H){var d=t("../../components/color").opacity,l=t("../bar/hover").hoverOnBars,b=t("../../lib").formatPercent;B.exports=function(o,a,n,r,u){var s=l(o,a,n,r,u);if(!!s){var i=s.cd,f=i[0].trace,h=f.orientation==="h",p=s.index,v=i[p],y=h?"x":"y";s[y+"LabelVal"]=v.s,s.percentInitial=v.begR,s.percentInitialLabel=b(v.begR,1),s.percentPrevious=v.difR,s.percentPreviousLabel=b(v.difR,1),s.percentTotal=v.sumR,s.percentTotalLabel=b(v.sumR,1);var g=v.hi||f.hoverinfo,A=[];if(g&&g!=="none"&&g!=="skip"){var m=g==="all",M=g.split("+"),_=function(T){return m||M.indexOf(T)!==-1};_("percent initial")&&A.push(s.percentInitialLabel+" of initial"),_("percent previous")&&A.push(s.percentPreviousLabel+" of previous"),_("percent total")&&A.push(s.percentTotalLabel+" of total")}return s.extraText=A.join("<br>"),s.color=w(f,v),[s]}};function w(e,o){var a=e.marker,n=o.mc||a.color,r=o.mlc||a.line.color,u=o.mlw||a.line.width;if(d(n))return n;if(d(r)&&u)return r}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(t,B,H){B.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o=!1;function a(u,s){return d.coerce(b,w,l,u,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="funnel"){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),o=t("../bar/uniform_text").clearMinTextSize;B.exports=function(s,i,f,h){var p=s._fullLayout;o("funnel",p),a(s,i,f,h),n(s,i,f,h),e.plot(s,i,f,h,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})};function a(u,s,i,f){var h=s.xaxis,p=s.yaxis;l.makeTraceGroups(f,i,"trace bars").each(function(v){var y=d.select(this),g=v[0].trace,A=l.ensureSingle(y,"g","regions");if(!g.connector||!g.connector.visible){A.remove();return}var m=g.orientation==="h",M=A.selectAll("g.region").data(l.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var _=M.size();M.each(function(T,x){if(!(x!==_-1&&!T.cNext)){var c=r(T,h,p,m),L=c[0],S=c[1],k="";L[0]!==w&&S[0]!==w&&L[1]!==w&&S[1]!==w&&L[2]!==w&&S[2]!==w&&L[3]!==w&&S[3]!==w&&(m?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,s.layerClipId,u)}})})}function n(u,s,i,f){var h=s.xaxis,p=s.yaxis;l.makeTraceGroups(f,i,"trace bars").each(function(v){var y=d.select(this),g=v[0].trace,A=l.ensureSingle(y,"g","lines");if(!g.connector||!g.connector.visible||!g.connector.line.width){A.remove();return}var m=g.orientation==="h",M=A.selectAll("g.line").data(l.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(T,x){if(!(x!==_-1&&!T.cNext)){var c=r(T,h,p,m),L=c[0],S=c[1],k="";L[3]!==void 0&&S[3]!==void 0&&(m?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,s.layerClipId,u)}})})}function r(u,s,i,f){var h=[],p=[],v=f?s:i,y=f?i:s;return h[0]=v.c2p(u.s0,!0),p[0]=y.c2p(u.p0,!0),h[1]=v.c2p(u.s1,!0),p[1]=y.c2p(u.p1,!0),h[2]=v.c2p(u.nextS0,!0),p[2]=y.c2p(u.nextP0,!0),h[3]=v.c2p(u.nextS1,!0),p[3]=y.c2p(u.nextP1,!0),f?[h,p]:[p,h]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),o=t("../bar/uniform_text").resizeText,a=e.styleTextPoints;function n(r,u,s){var i=s||d.select(r).selectAll("g.funnellayer").selectAll("g.trace");o(r,i,"funnel"),i.style("opacity",function(f){return f[0].trace.opacity}),i.each(function(f){var h=d.select(this),p=f[0].trace;h.selectAll(".point > path").each(function(v){if(!v.isBlank){var y=p.marker;d.select(this).call(b.fill,v.mc||y.color).call(b.stroke,v.mlc||y.line.color).call(l.dashLine,y.line.dash,v.mlw||y.line.width).style("opacity",p.selectedpoints&&!v.selected?w:1)}}),a(h,p,r),h.selectAll(".regions").each(function(){d.select(this).selectAll("path").style("stroke-width",0).call(b.fill,p.connector.fillcolor)}),h.selectAll(".lines").each(function(){var v=p.connector.line;l.lineGroupStyle(d.select(this).selectAll("path"),v.width,v.color,v.dash)})})}B.exports={style:n}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(t,B,H){var d=t("../pie/attributes"),l=t("../../plots/attributes"),b=t("../../plots/domain").attributes,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../lib/extend").extendFlat;B.exports={labels:d.labels,label0:d.label0,dlabel:d.dlabel,values:d.values,marker:{colors:d.marker.colors,line:{color:o({},d.marker.line.color,{dflt:null}),width:o({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:d.text,hovertext:d.hovertext,scalegroup:o({},d.scalegroup,{}),textinfo:o({},d.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},l.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:w({},{keys:["label","color","value","text","percent"]}),textposition:o({},d.textposition,{values:["inside","none"],dflt:"inside"}),textfont:d.textfont,insidetextfont:d.insidetextfont,title:{text:d.title.text,font:d.title.font,position:o({},d.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(t,B,H){var d=t("../../plots/plots");H.name="funnelarea",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],785:[function(t,B,H){var d=t("../pie/calc");function l(w,e){return d.calc(w,e)}function b(w){d.crossTraceCalc(w,{type:"funnelarea"})}B.exports={calc:l,crossTraceCalc:b}},{"../pie/calc":902}],786:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;B.exports=function(a,n,r,u){function s(_,T){return d.coerce(a,n,l,_,T)}var i=s("labels"),f=s("values"),h=e(i,f),p=h.len;if(n._hasLabels=h.hasLabels,n._hasValues=h.hasValues,!n._hasLabels&&n._hasValues&&(s("label0"),s("dlabel")),!p){n.visible=!1;return}n._length=p;var v=s("marker.line.width");v&&s("marker.line.color",u.paper_bgcolor),s("marker.colors"),s("scalegroup");var y=s("text"),g=s("texttemplate"),A;if(g||(A=s("textinfo",Array.isArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),g||A&&A!=="none"){var m=s("textposition");w(a,n,u,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(n,u,s);var M=s("title.text");M&&(s("title.position"),d.coerceFont(s,"title.font",u.font)),s("aspectratio"),s("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(t,B,H){B.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,B,H){var d=t("../pie/layout_attributes").hiddenlabels;B.exports={hiddenlabels:d,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return d.coerce(w,e,l,a,n)}o("hiddenlabels"),o("funnelareacolorway",e.colorway),o("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../lib"),w=b.strScale,e=b.strTranslate,o=t("../../lib/svg_text_utils"),a=t("../bar/plot"),n=a.toMoveInsideBar,r=t("../bar/uniform_text"),u=r.recordMinTextSize,s=r.clearMinTextSize,i=t("../pie/helpers"),f=t("../pie/plot"),h=f.attachFxHandlers,p=f.determineInsideTextFont,v=f.layoutAreas,y=f.prerenderTitles,g=f.positionTitleOutside,A=f.formatSliceLabel;B.exports=function(x,c){var L=x._fullLayout;s("funnelarea",L),y(c,x),v(c,L._size),b.makeTraceGroups(L._funnelarealayer,c,"trace").each(function(S){var k=d.select(this),P=S[0],z=P.trace;_(S),k.each(function(){var I=d.select(this).selectAll("g.slice").data(S);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(D,O){if(D.hidden){d.select(this).selectAll("path,g").remove();return}D.pointNumber=D.i,D.curveNumber=z.index;var F=P.cx,Y=P.cy,X=d.select(this),q=X.selectAll("path.surface").data([D]);q.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),X.call(h,x,S);var $="M"+(F+D.TR[0])+","+(Y+D.TR[1])+m(D.TR,D.BR)+m(D.BR,D.BL)+m(D.BL,D.TL)+"Z";q.attr("d",$),A(x,D,P);var V=i.castOption(z.textposition,D.pts),K=X.selectAll("g.slicetext").data(D.text&&V!=="none"?[0]:[]);K.enter().append("g").classed("slicetext",!0),K.exit().remove(),K.each(function(){var se=b.ensureSingle(d.select(this),"text","",function(Q){Q.attr("data-notex",1)}),ue=b.ensureUniformFontSize(x,p(z,D,L.font));se.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(l.font,ue).call(o.convertToTspans,x);var oe=l.bBox(se.node()),U,G,re,ee=Math.min(D.BL[1],D.BR[1])+Y,j=Math.max(D.TL[1],D.TR[1])+Y;G=Math.max(D.TL[0],D.BL[0])+F,re=Math.min(D.TR[0],D.BR[0])+F,U=n(G,re,ee,j,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),U.fontSize=ue.size,u(z.type,U,L),S[O].transform=U,se.attr("transform",b.getTextTransform(U))})});var R=d.select(this).selectAll("g.titletext").data(z.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var D=b.ensureSingle(d.select(this),"text","",function(Y){Y.attr("data-notex",1)}),O=z.title.text;z._meta&&(O=b.templateString(O,z._meta)),D.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(l.font,z.title.font).call(o.convertToTspans,x);var F=g(P,L._size);D.attr("transform",e(F.x,F.y)+w(Math.min(1,F.scale))+e(F.tx,F.ty))})})})};function m(T,x){var c=x[0]-T[0],L=x[1]-T[1];return"l"+c+","+L}function M(T,x){return[.5*(T[0]+x[0]),.5*(T[1]+x[1])]}function _(T){if(!T.length)return;var x=T[0],c=x.trace,L=c.aspectratio,S=c.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=x.vTotal,z=P*k/(1-k),I=P,R=z/P;function D(){var ae=Math.sqrt(R);return{x:ae,y:-ae}}function O(){var ae=D();return[ae.x,ae.y]}var F,Y=[];Y.push(O());var X,q;for(X=T.length-1;X>-1;X--)if(q=T[X],!q.hidden){var $=q.v/I;R+=$,Y.push(O())}var V=1/0,K=-1/0;for(X=0;X<Y.length;X++)F=Y[X],V=Math.min(V,F[1]),K=Math.max(K,F[1]);for(X=0;X<Y.length;X++)Y[X][1]-=(K+V)/2;var se=Y[Y.length-1][0],ue=x.r,oe=(K-V)/2,U=ue/se,G=ue/oe*L;for(x.r=G*oe,X=0;X<Y.length;X++)Y[X][0]*=U,Y[X][1]*=G;F=Y[0];var re=[-F[0],F[1]],ee=[F[0],F[1]],j=0;for(X=T.length-1;X>-1;X--)if(q=T[X],!q.hidden){j+=1;var Q=Y[j][0],ne=Y[j][1];q.TL=[-Q,ne],q.TR=[Q,ne],q.BL=re,q.BR=ee,q.pxmid=M(q.TR,q.BR),re=q.TL,ee=q.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(t,B,H){var d=t("@plotly/d3"),l=t("../pie/style_one"),b=t("../bar/uniform_text").resizeText;B.exports=function(e){var o=e._fullLayout._funnelarealayer.selectAll(".trace");b(e,o,"funnelarea"),o.each(function(a){var n=a[0],r=n.trace,u=d.select(this);u.style({opacity:r.opacity}),u.selectAll("path.surface").each(function(s){d.select(this).call(l,s,r)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/attributes"),b=t("../../plots/font_attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;B.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},d.x,{impliedEdits:{xtype:"array"}}),x0:n({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},d.y,{impliedEdits:{ytype:"array"}}),y0:n({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},d.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},d.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},d.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},d.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},d.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},d.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},d.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:b({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},l.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),o=t("../../components/colorscale/calc"),a=t("./convert_column_xyz"),n=t("./clean_2d_array"),r=t("./interp2d"),u=t("./find_empties"),s=t("./make_bound_array"),i=t("../../constants/numerical").BADNUM;B.exports=function(v,y){var g=b.getFromId(v,y.xaxis||"x"),A=b.getFromId(v,y.yaxis||"y"),m=d.traceIs(y,"contour"),M=d.traceIs(y,"histogram"),_=d.traceIs(y,"gl2d"),T=m?"best":y.zsmooth,x,c,L,S,k,P,z,I,R,D,O;if(g._minDtick=0,A._minDtick=0,M)O=e(v,y),S=O.orig_x,x=O.x,c=O.x0,L=O.dx,I=O.orig_y,k=O.y,P=O.y0,z=O.dy,R=O.z;else{var F=y.z;l.isArray1D(F)?(a(y,g,A,"x","y",["z"]),x=y._x,k=y._y,F=y._z):(S=y.x?g.makeCalcdata(y,"x"):[],I=y.y?A.makeCalcdata(y,"y"):[],x=w(y,g,"x",S).vals,k=w(y,A,"y",I).vals,y._x=x,y._y=k),c=y.x0,L=y.dx,P=y.y0,z=y.dy,R=n(F,y,g,A)}(g.rangebreaks||A.rangebreaks)&&(R=h(x,k,R),M||(x=f(x),k=f(k),y._x=x,y._y=k)),!M&&(m||y.connectgaps)&&(y._emptypoints=u(R),r(R,y._emptypoints));function Y(ee){T=y._input.zsmooth=y.zsmooth=!1,l.warn('cannot use zsmooth: "fast": '+ee)}if(T==="fast"){if(g.type==="log"||A.type==="log")Y("log axis found");else if(!M){if(x.length){var X=(x[x.length-1]-x[0])/(x.length-1),q=Math.abs(X/100);for(D=0;D<x.length-1;D++)if(Math.abs(x[D+1]-x[D]-X)>q){Y("x scale is not linear");break}}if(k.length&&T==="fast"){var $=(k[k.length-1]-k[0])/(k.length-1),V=Math.abs($/100);for(D=0;D<k.length-1;D++)if(Math.abs(k[D+1]-k[D]-$)>V){Y("y scale is not linear");break}}}}var K=l.maxRowLength(R),se=y.xtype==="scaled"?"":x,ue=s(y,se,c,L,K,g),oe=y.ytype==="scaled"?"":k,U=s(y,oe,P,z,R.length,A);_||(y._extremes[g._id]=b.findExtremes(g,ue),y._extremes[A._id]=b.findExtremes(A,U));var G={x:ue,y:U,z:R,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&S&&(G.orig_x=S),y.yperiodalignment&&I&&(G.orig_y=I),se&&se.length===ue.length-1&&(G.xCenter=se),oe&&oe.length===U.length-1&&(G.yCenter=oe),M&&(G.xRanges=O.xRanges,G.yRanges=O.yRanges,G.pts=O.pts),m||o(v,y,{vals:R,cLetter:"z"}),m&&y.contours&&y.contours.coloring==="heatmap"){var re={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};G.xfill=s(re,se,c,L,K,g),G.yfill=s(re,oe,P,z,R.length,A)}return[G]};function f(p){for(var v=[],y=p.length,g=0;g<y;g++){var A=p[g];A!==i&&v.push(A)}return v}function h(p,v,y){for(var g=[],A=-1,m=0;m<y.length;m++)if(v[m]!==i){A++,g[A]=[];for(var M=0;M<y[m].length;M++)p[M]!==i&&g[A].push(y[m][M])}return g}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM;B.exports=function(e,o,a,n){var r,u,s,i,f,h;function p(M){if(!!d(M))return+M}if(o&&o.transpose){for(r=0,f=0;f<e.length;f++)r=Math.max(r,e[f].length);if(r===0)return!1;s=function(M){return M.length},i=function(M,_,T){return(M[T]||[])[_]}}else r=e.length,s=function(M,_){return M[_].length},i=function(M,_,T){return(M[_]||[])[T]};var v=function(M,_,T){return _===b||T===b?b:i(M,_,T)};function y(M){if(o&&o.type!=="carpet"&&o.type!=="contourcarpet"&&M&&M.type==="category"&&o["_"+M._id.charAt(0)].length){var _=M._id.charAt(0),T={},x=o["_"+_+"CategoryMap"]||o[_];for(f=0;f<x.length;f++)T[x[f]]=f;return function(c){var L=T[M._categories[c]];return L+1?L:b}}else return l.identity}var g=y(a),A=y(n);n&&n.type==="category"&&(r=n._categories.length);var m=new Array(r);for(f=0;f<r;f++)for(a&&a.type==="category"?u=a._categories.length:u=s(e,f),m[f]=new Array(u),h=0;h<u;h++)m[f][h]=p(v(e,A(f),g(h)));return m}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(t,B,H){B.exports={min:"zmin",max:"zmax"}},{}],796:[function(t,B,H){var d=t("../../lib"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/cartesian/align_period");B.exports=function(e,o,a,n,r,u){var s=e._length,i=o.makeCalcdata(e,n),f=a.makeCalcdata(e,r);i=b(e,o,n,i).vals,f=b(e,a,r,f).vals;var h=e.text,p=h!==void 0&&d.isArray1D(h),v=e.hovertext,y=v!==void 0&&d.isArray1D(v),g,A,m=d.distinctVals(i),M=m.vals,_=d.distinctVals(f),T=_.vals,x=[],c,L,S=T.length,k=M.length;for(g=0;g<u.length;g++)x[g]=d.init2dArray(S,k);p&&(c=d.init2dArray(S,k)),y&&(L=d.init2dArray(S,k));var P=d.init2dArray(S,k);for(g=0;g<s;g++)if(i[g]!==l&&f[g]!==l){var z=d.findBin(i[g]+m.minDiff/2,M),I=d.findBin(f[g]+_.minDiff/2,T);for(A=0;A<u.length;A++){var R=u[A],D=e[R],O=x[A];O[I][z]=D[g],P[I][z]=g}p&&(c[I][z]=h[g]),y&&(L[I][z]=v[g])}for(e["_"+n]=M,e["_"+r]=T,A=0;A<u.length;A++)e["_"+u[A]]=x[A];p&&(e._text=c),y&&(e._hovertext=L),o&&o.type==="category"&&(e["_"+n+"CategoryMap"]=M.map(function(F){return o._categories[F]})),a&&a.type==="category"&&(e["_"+r+"CategoryMap"]=T.map(function(F){return a._categories[F]})),e._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(t,B,H){var d=t("../../lib"),l=t("./xyz_defaults"),b=t("./label_defaults"),w=t("../scatter/period_defaults"),e=t("./style_defaults"),o=t("../../components/colorscale/defaults"),a=t("./attributes");B.exports=function(r,u,s,i){function f(p,v){return d.coerce(r,u,a,p,v)}var h=l(r,u,f,i);if(!h){u.visible=!1;return}w(r,u,i,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hovertemplate"),b(f,i),e(r,u,f,i),f("hoverongaps"),f("connectgaps",d.isArray1D(u.z)&&u.zsmooth!==!1),o(r,u,i,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(t,B,H){var d=t("../../lib").maxRowLength;B.exports=function(b){var w=[],e={},o=[],a=b[0],n=[],r=[0,0,0],u=d(b),s,i,f,h,p,v,y,g;for(i=0;i<b.length;i++)for(s=n,n=a,a=b[i+1]||[],f=0;f<u;f++)n[f]===void 0&&(v=(n[f-1]!==void 0?1:0)+(n[f+1]!==void 0?1:0)+(s[f]!==void 0?1:0)+(a[f]!==void 0?1:0),v?(i===0&&v++,f===0&&v++,i===b.length-1&&v++,f===n.length-1&&v++,v<4&&(e[[i,f]]=[i,f,v]),w.push([i,f,v])):o.push([i,f]));for(;o.length;){for(y={},g=!1,p=o.length-1;p>=0;p--)h=o[p],i=h[0],f=h[1],v=((e[[i-1,f]]||r)[2]+(e[[i+1,f]]||r)[2]+(e[[i,f-1]]||r)[2]+(e[[i,f+1]]||r)[2])/20,v&&(y[h]=[i,f,v],o.splice(p,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(h in y)e[h]=y[h],w.push(y[h])}return w.sort(function(A,m){return m[2]-A[2]})}},{"../../lib":503}],799:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../components/colorscale").extractOpts;B.exports=function(o,a,n,r,u){u||(u={});var s=u.isContour,i=o.cd[0],f=i.trace,h=o.xa,p=o.ya,v=i.x,y=i.y,g=i.z,A=i.xCenter,m=i.yCenter,M=i.zmask,_=f.zhoverformat,T=v,x=y,c,L,S,k;if(o.index!==!1){try{S=Math.round(o.index[1]),k=Math.round(o.index[0])}catch{l.error("Error hovering on heatmap, pointNumber must be [row,col], found:",o.index);return}if(S<0||S>=g[0].length||k<0||k>g.length)return}else{if(d.inbox(a-v[0],a-v[v.length-1],0)>0||d.inbox(n-y[0],n-y[y.length-1],0)>0)return;if(s){var P;for(T=[2*v[0]-v[1]],P=1;P<v.length;P++)T.push((v[P]+v[P-1])/2);for(T.push([2*v[v.length-1]-v[v.length-2]]),x=[2*y[0]-y[1]],P=1;P<y.length;P++)x.push((y[P]+y[P-1])/2);x.push([2*y[y.length-1]-y[y.length-2]])}S=Math.max(0,Math.min(T.length-2,l.findBin(a,T))),k=Math.max(0,Math.min(x.length-2,l.findBin(n,x)))}var z=h.c2p(v[S]),I=h.c2p(v[S+1]),R=p.c2p(y[k]),D=p.c2p(y[k+1]),O,F;s?(O=i.orig_x||v,F=i.orig_y||y,I=z,c=O[S],D=R,L=F[k]):(O=i.orig_x||A||v,F=i.orig_y||m||y,c=A?O[S]:(O[S]+O[S+1])/2,L=m?F[k]:(F[k]+F[k+1])/2,h&&h.type==="category"&&(c=v[S]),p&&p.type==="category"&&(L=y[k]),f.zsmooth&&(z=I=h.c2p(c),R=D=p.c2p(L)));var Y=g[k][S];if(M&&!M[k][S]&&(Y=void 0),!(Y===void 0&&!f.hoverongaps)){var X;Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[k])?X=i.hovertext[k][S]:Array.isArray(i.text)&&Array.isArray(i.text[k])&&(X=i.text[k][S]);var q=w(f),$={type:"linear",range:[q.min,q.max],hoverformat:_,_separators:h._separators,_numFormat:h._numFormat},V=b.tickText($,Y,"hover").text;return[l.extendFlat(o,{index:f._after2before?f._after2before[k][S]:[k,S],distance:o.maxHoverDistance,spikeDistance:o.maxSpikeDistance,x0:z,x1:I,y0:R,y1:D,xLabelVal:c,yLabelVal:L,zLabelVal:Y,zLabel:V,text:X})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(t,B,H){var d=t("../../lib"),l=.01,b=[[-1,0],[1,0],[0,-1],[0,1]];function w(o){return .5-.25*Math.min(1,o*.5)}B.exports=function(a,n){var r=1,u;for(e(a,n),u=0;u<n.length&&!(n[u][2]<4);u++);for(n=n.slice(u),u=0;u<100&&r>l;u++)r=e(a,n,w(r));return r>l&&d.log("interp2d didn't converge quickly",r),a};function e(o,a,n){var r=0,u,s,i,f,h,p,v,y,g,A,m,M,_;for(f=0;f<a.length;f++){for(u=a[f],s=u[0],i=u[1],m=o[s][i],A=0,g=0,h=0;h<4;h++)p=b[h],v=o[s+p[0]],!!v&&(y=v[i+p[1]],y!==void 0&&(A===0?M=_=y:(M=Math.min(M,y),_=Math.max(_,y)),g++,A+=y));if(g===0)throw"iterateInterp2d order is wrong: no defined neighbors";o[s][i]=A/g,m===void 0?g<4&&(r=1):(o[s][i]=(1+n)*o[s][i]-n*m,_>M&&(r=Math.max(r,Math.abs(o[s][i]-m)/(_-M))))}return r}},{"../../lib":503}],802:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){b("texttemplate");var e=d.extendFlat({},w.font,{color:"auto",size:"auto"});d.coerceFont(b,"textfont",e)}},{"../../lib":503}],803:[function(t,B,H){var d=t("../../registry"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a,n,r){var u=[],s=d.traceIs(w,"contour"),i=d.traceIs(w,"histogram"),f=d.traceIs(w,"gl2d"),h,p,v,y=l(e)&&e.length>1;if(y&&!i&&r.type!=="category"){var g=e.length;if(g<=n){if(s||f)u=e.slice(0,n);else if(n===1)u=[e[0]-.5,e[0]+.5];else{for(u=[1.5*e[0]-.5*e[1]],v=1;v<g;v++)u.push((e[v-1]+e[v])*.5);u.push(1.5*e[g-1]-.5*e[g-2])}if(g<n){var A=u[u.length-1],m=A-u[u.length-2];for(v=g;v<n;v++)A+=m,u.push(A)}}else return s?e.slice(0,n):e.slice(0,n+1)}else{var M=w[r._id.charAt(0)+"calendar"];if(i)h=r.r2c(o,0,M);else if(l(e)&&e.length===1)h=e[0];else if(o===void 0)h=0;else{var _=r.type==="log"?r.d2c:r.r2c;h=_(o,0,M)}for(p=a||1,v=s||f?0:-.5;v<n;v++)u.push(h+p*v)}return u}},{"../../lib":503,"../../registry":638}],804:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),o=t("../../lib"),a=t("../../lib/svg_text_utils"),n=t("../scatter/format_labels"),r=t("../../components/color"),u=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,i=t("../../constants/xmlns_namespaces"),f=t("../../constants/alignment"),h=f.LINE_SPACING,p="heatmap-label";function v(M){return M.selectAll("g."+p)}function y(M){v(M).remove()}B.exports=function(M,_,T,x){var c=_.xaxis,L=_.yaxis;o.makeTraceGroups(x,T,"hm").each(function(S){var k=d.select(this),P=S[0],z=P.trace,I=z.xgap||0,R=z.ygap||0,D=P.z,O=P.x,F=P.y,Y=P.xCenter,X=P.yCenter,q=b.traceIs(z,"contour"),$=q?"best":z.zsmooth,V=D.length,K=o.maxRowLength(D),se=!1,ue=!1,oe,U,G,re,ee,j,Q,ne;for(j=0;oe===void 0&&j<O.length-1;)oe=c.c2p(O[j]),j++;for(j=O.length-1;U===void 0&&j>0;)U=c.c2p(O[j]),j--;for(U<oe&&(G=U,U=oe,oe=G,se=!0),j=0;re===void 0&&j<F.length-1;)re=L.c2p(F[j]),j++;for(j=F.length-1;ee===void 0&&j>0;)ee=L.c2p(F[j]),j--;if(ee<re&&(G=re,re=ee,ee=G,ue=!0),q&&(Y=O,X=F,O=P.xfill,F=P.yfill),$!=="fast"){var ae=$==="best"?0:.5;oe=Math.max(-ae*c._length,oe),U=Math.min((1+ae)*c._length,U),re=Math.max(-ae*L._length,re),ee=Math.min((1+ae)*L._length,ee)}var ie=Math.round(U-oe),fe=Math.round(ee-re),me=ie<=0||fe<=0;if(me){var ce=k.selectAll("image").data([]);ce.exit().remove(),y(k);return}var ye,xe;$==="fast"?(ye=K,xe=V):(ye=ie,xe=fe);var ke=document.createElement("canvas");ke.width=ye,ke.height=xe;var Ae=ke.getContext("2d"),Oe=s(z,{noNumericCheck:!0,returnArray:!0}),He,Ge;$==="fast"?(He=se?function(Pr){return K-1-Pr}:o.identity,Ge=ue?function(Pr){return V-1-Pr}:o.identity):(He=function(Pr){return o.constrain(Math.round(c.c2p(O[Pr])-oe),0,ie)},Ge=function(Pr){return o.constrain(Math.round(L.c2p(F[Pr])-re),0,fe)});var _e=Ge(0),Ie=[_e,_e],Ye=se?0:1,qe=ue?0:1,Ue=0,Re=0,Ve=0,dt=0,Dt,Gt,kt,zt,Bt;function Lt(Pr,br){if(Pr!==void 0){var jr=Oe(Pr);return jr[0]=Math.round(jr[0]),jr[1]=Math.round(jr[1]),jr[2]=Math.round(jr[2]),Ue+=br,Re+=jr[0]*br,Ve+=jr[1]*br,dt+=jr[2]*br,jr}return[0,0,0,0]}function Mt(Pr,br,jr,zn){var kn=Pr[jr.bin0];if(kn===void 0)return Lt(void 0,1);var ta=Pr[jr.bin1],ia=br[jr.bin0],Aa=br[jr.bin1],ya=ta-kn||0,pr=ia-kn||0,vn;return ta===void 0?Aa===void 0?vn=0:ia===void 0?vn=2*(Aa-kn):vn=(2*Aa-ia-kn)*2/3:Aa===void 0?ia===void 0?vn=0:vn=(2*kn-ta-ia)*2/3:ia===void 0?vn=(2*Aa-ta-kn)*2/3:vn=Aa+kn-ta-ia,Lt(kn+jr.frac*ya+zn.frac*(pr+jr.frac*vn))}if($){var it=0,ht;try{ht=new Uint8Array(ie*fe*4)}catch{ht=new Array(ie*fe*4)}if($==="best"){var Qe=Y||O,Ce=X||F,je=new Array(Qe.length),rt=new Array(Ce.length),ut=new Array(ie),Pt=Y?A:g,St=X?A:g,Nt,Xt,Ot;for(j=0;j<Qe.length;j++)je[j]=Math.round(c.c2p(Qe[j])-oe);for(j=0;j<Ce.length;j++)rt[j]=Math.round(L.c2p(Ce[j])-re);for(j=0;j<ie;j++)ut[j]=Pt(j,je);for(Q=0;Q<fe;Q++)for(Nt=St(Q,rt),Xt=D[Nt.bin0],Ot=D[Nt.bin1],j=0;j<ie;j++,it+=4)Bt=Mt(Xt,Ot,ut[j],Nt),m(ht,it,Bt)}else for(Q=0;Q<V;Q++)for(zt=D[Q],Ie=Ge(Q),j=0;j<ie;j++)Bt=Lt(zt[j],1),it=(Ie*ie+He(j))*4,m(ht,it,Bt);var Kt=Ae.createImageData(ie,fe);try{Kt.data.set(ht)}catch{var Je=Kt.data,gt=Je.length;for(Q=0;Q<gt;Q++)Je[Q]=ht[Q]}Ae.putImageData(Kt,0,0)}else{var Et=Math.floor(I/2),rr=Math.floor(R/2);for(Q=0;Q<V;Q++)if(zt=D[Q],Ie.reverse(),Ie[qe]=Ge(Q+1),!(Ie[0]===Ie[1]||Ie[0]===void 0||Ie[1]===void 0))for(Gt=He(0),Dt=[Gt,Gt],j=0;j<K;j++)Dt.reverse(),Dt[Ye]=He(j+1),!(Dt[0]===Dt[1]||Dt[0]===void 0||Dt[1]===void 0)&&(kt=zt[j],Bt=Lt(kt,(Dt[1]-Dt[0])*(Ie[1]-Ie[0])),Ae.fillStyle="rgba("+Bt.join(",")+")",Ae.fillRect(Dt[0]+Et,Ie[0]+rr,Dt[1]-Dt[0]-I,Ie[1]-Ie[0]-R))}Re=Math.round(Re/Ue),Ve=Math.round(Ve/Ue),dt=Math.round(dt/Ue);var vr=l("rgb("+Re+","+Ve+","+dt+")");M._hmpixcount=(M._hmpixcount||0)+Ue,M._hmlumcount=(M._hmlumcount||0)+Ue*vr.getLuminance();var or=k.selectAll("image").data(S);or.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),or.attr({height:fe,width:ie,x:oe,y:re,"xlink:href":ke.toDataURL("image/png")}),y(k);var dr=z.texttemplate;if(dr){var Lr=u(z),kr={type:"linear",range:[Lr.min,Lr.max],_separators:c._separators,_numFormat:c._numFormat},tr=z.type==="histogram2dcontour",Or=z.type==="contour",et=Or?1:0,we=Or?V-1:V,Se=Or?1:0,De=Or?K-1:K,Xe=[];for(j=et;j<we;j++){var $e;if(Or)$e=P.y[j];else if(tr){if(j===0||j===V-1)continue;$e=P.y[j]}else if(P.yCenter)$e=P.yCenter[j];else{if(j+1===V&&P.y[j+1]===void 0)continue;$e=(P.y[j]+P.y[j+1])/2}var ot=Math.round(L.c2p($e));if(!(0>ot||ot>L._length))for(Q=Se;Q<De;Q++){var st;if(Or)st=P.x[Q];else if(tr){if(Q===0||Q===K-1)continue;st=P.x[Q]}else if(P.xCenter)st=P.xCenter[Q];else{if(Q+1===K&&P.x[Q+1]===void 0)continue;st=(P.x[Q]+P.x[Q+1])/2}var pt=Math.round(c.c2p(st));if(!(0>pt||pt>c._length)){var wt=n({x:st,y:$e},z,M._fullLayout);wt.x=st,wt.y=$e;var Yt=P.z[j][Q];Yt===void 0?(wt.z="",wt.zLabel=""):(wt.z=Yt,wt.zLabel=e.tickText(kr,Yt,"hover").text);var mr=P.text&&P.text[j]&&P.text[j][Q];(mr===void 0||mr===!1)&&(mr=""),wt.text=mr;var xr=o.texttemplateString(dr,wt,M._fullLayout._d3locale,wt,z._meta||{});if(!!xr){var Tr=xr.split("<br>"),yr=Tr.length,Dr=0;for(ne=0;ne<yr;ne++)Dr=Math.max(Dr,Tr[ne].length);Xe.push({l:yr,c:Dr,t:xr,x:pt,y:ot,z:Yt})}}}}var tn=z.textfont,wr=tn.family,gr=tn.size,yn=M._fullLayout.font.size;if(!gr||gr==="auto"){var Gr=1/0,Ar=1/0,nn=0,fn=0;for(ne=0;ne<Xe.length;ne++){var Xr=Xe[ne];if(nn=Math.max(nn,Xr.l),fn=Math.max(fn,Xr.c),ne<Xe.length-1){var at=Xe[ne+1],Ft=Math.abs(at.x-Xr.x),er=Math.abs(at.y-Xr.y);Ft&&(Gr=Math.min(Gr,Ft)),er&&(Ar=Math.min(Ar,er))}}!isFinite(Gr)||!isFinite(Ar)?gr=yn:(Gr-=I,Ar-=R,Gr/=fn,Ar/=nn,Gr/=h/2,Ar/=h,gr=Math.min(Math.floor(Gr),Math.floor(Ar),yn))}if(gr<=0||!isFinite(gr))return;var hr=function(Pr){return Pr.x},Yr=function(Pr){return Pr.y-gr*(Pr.l*h/2-1)},zr=v(k).data(Xe);zr.enter().append("g").classed(p,1).append("text").attr("text-anchor","middle").each(function(Pr){var br=d.select(this),jr=tn.color;(!jr||jr==="auto")&&(jr=r.contrast("rgba("+Oe(Pr.z).join()+")")),br.attr("data-notex",1).call(a.positionText,hr(Pr),Yr(Pr)).call(w.font,wr,gr,jr).text(Pr.t).call(a.convertToTspans,M)})}})};function g(M,_){var T=_.length-2,x=o.constrain(o.findBin(M,_),0,T),c=_[x],L=_[x+1],S=o.constrain(x+(M-c)/(L-c)-.5,0,T),k=Math.round(S),P=Math.abs(S-k);return!S||S===T||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function A(M,_){var T=_.length-1,x=o.constrain(o.findBin(M,_),0,T),c=_[x],L=_[x+1],S=(M-c)/(L-c)||0;return S<=0?{bin0:x,bin1:x,frac:0}:S<.5?{bin0:x,bin1:x+1,frac:S}:{bin0:x+1,bin1:x,frac:1-S}}function m(M,_,T){M[_]=T[0],M[_+1]=T[1],M[_+2]=T[2],M[_+3]=Math.round(T[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b){d.select(b).selectAll(".hm image").style("opacity",function(w){return w.trace.opacity})}},{"@plotly/d3":58}],806:[function(t,B,H){B.exports=function(l,b,w){var e=w("zsmooth");e===!1&&(w("xgap"),w("ygap")),w("zhoverformat")}},{}],807:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../registry");B.exports=function(a,n,r,u,s,i){var f=r("z");s=s||"x",i=i||"y";var h,p;if(f===void 0||!f.length)return 0;if(l.isArray1D(a.z)){h=r(s),p=r(i);var v=l.minRowLength(h),y=l.minRowLength(p);if(v===0||y===0)return 0;n._length=Math.min(v,y,f.length)}else{if(h=w(s,r),p=w(i,r),!e(f))return 0;r("transpose"),n._length=null}if(a.type==="heatmapgl")return!0;var g=b.getComponentMethod("calendars","handleTraceDefaults");return g(a,n,[s,i],u),!0};function w(o,a){var n=a(o),r=n?a(o+"type","array"):"scaled";return r==="scaled"&&(a(o+"0"),a("d"+o)),n}function e(o){for(var a=!0,n=!1,r=!1,u,s=0;s<o.length;s++){if(u=o[s],!l.isArrayOrTypedArray(u)){a=!1;break}u.length>0&&(n=!0);for(var i=0;i<u.length;i++)if(d(u[i])){r=!0;break}}return a&&n&&r}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(t,B,H){for(var d=t("../heatmap/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<e.length;a++){var n=e[a];o[n]=d[n]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(o,l("",{cLetter:"z",autoColorDflt:!1})),B.exports=w(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(t,B,H){var d=t("../../../stackgl_modules").gl_heatmap2d,l=t("../../plots/cartesian/axes"),b=t("../../lib/str2rgbarray");function w(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=d(n.glplot,this.options),this.heatmap._trace=this}var e=w.prototype;e.handlePick=function(n){var r=this.options,u=r.shape,s=n.pointId,i=s%u[0],f=Math.floor(s/u[0]),h=s;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[i],r.y[f],r.z[h]],textLabel:this.textLabels[s],name:this.name,pointIndex:[f,i],hoverinfo:this.hoverinfo}},e.update=function(n,r){var u=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var s=u.z;this.options.z=[].concat.apply([],s);var i=s[0].length,f=s.length;this.options.shape=[i,f],this.options.x=u.x,this.options.y=u.y,this.options.zsmooth=n.zsmooth;var h=o(n);this.options.colorLevels=h.colorLevels,this.options.colorValues=h.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var p=this.scene.xaxis,v=this.scene.yaxis,y,g;n.zsmooth===!1&&(y={ppad:u.x[1]-u.x[0]},g={ppad:u.y[1]-u.y[0]}),n._extremes[p._id]=l.findExtremes(p,u.x,y),n._extremes[v._id]=l.findExtremes(v,u.y,g)},e.dispose=function(){this.heatmap.dispose()};function o(n){for(var r=n.colorscale,u=n.zmin,s=n.zmax,i=r.length,f=new Array(i),h=new Array(4*i),p=0;p<i;p++){var v=r[p],y=b(v[1]);f[p]=u+v[0]*(s-u);for(var g=0;g<4;g++)h[4*p+g]=y[g]}return{colorLevels:f,colorValues:h}}function a(n,r,u){var s=new w(n,r.uid);return s.update(r,u),s}B.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("../../components/colorscale/defaults"),w=t("./attributes");B.exports=function(o,a,n,r){function u(i,f){return d.coerce(o,a,w,i,f)}var s=l(o,a,u,r);if(!s){a.visible=!1;return}u("text"),u("zsmooth"),b(o,a,r,u,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(t,B,H){var d=t("../bar/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),o=t("./bin_attributes"),a=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:l("x"),yhoverformat:l("y"),text:n({},d.text,{}),hovertext:n({},d.hovertext,{}),orientation:d.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:a.eventDataKeys}),texttemplate:w({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},d.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:d.insidetextanchor,textangle:d.textangle,cliponaxis:d.cliponaxis,constraintext:d.constraintext,marker:d.marker,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,_deprecated:{bardir:d._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(t,B,H){B.exports=function(l,b){for(var w=l.length,e=0,o=0;o<w;o++)b[o]?(l[o]/=b[o],e+=l[o]):l[o]=null;return e}},{}],814:[function(t,B,H){B.exports=function(l,b){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(t,B,H){var d=t("fast-isnumeric");B.exports={count:function(l,b,w){return w[l]++,1},sum:function(l,b,w,e){var o=e[b];return d(o)?(o=Number(o),w[l]+=o,o):0},avg:function(l,b,w,e,o){var a=e[b];return d(a)&&(a=Number(a),w[l]+=a,o[l]++),0},min:function(l,b,w,e){var o=e[b];if(d(o))if(o=Number(o),d(w[l])){if(w[l]>o){var a=o-w[l];return w[l]=o,a}}else return w[l]=o,o;return 0},max:function(l,b,w,e){var o=e[b];if(d(o))if(o=Number(o),d(w[l])){if(w[l]<o){var a=o-w[l];return w[l]=o,a}}else return w[l]=o,o;return 0}}},{"fast-isnumeric":190}],816:[function(t,B,H){var d=t("../../constants/numerical"),l=d.ONEAVGYEAR,b=d.ONEAVGMONTH,w=d.ONEDAY,e=d.ONEHOUR,o=d.ONEMIN,a=d.ONESEC,n=t("../../plots/cartesian/axes").tickIncrement;B.exports=function(h,p,v,y,g){var A=-1.1*p,m=-.1*p,M=h-m,_=v[0],T=v[1],x=Math.min(r(_+m,_+M,y,g),r(T+m,T+M,y,g)),c=Math.min(r(_+A,_+m,y,g),r(T+A,T+m,y,g)),L,S;if(x>c&&c<Math.abs(T-_)/4e3?(L=x,S=!1):(L=Math.min(x,c),S=!0),y.type==="date"&&L>w){var k=L===l?1:6,P=L===l?"M12":"M1";return function(z,I){var R=y.c2d(z,l,g),D=R.indexOf("-",k);D>0&&(R=R.substr(0,D));var O=y.d2c(R,0,g);if(O<z){var F=n(O,P,!1,g);(O+F)/2<z+h&&(O=F)}return I&&S?n(O,P,!0,g):O}}return function(z,I){var R=L*Math.round(z/L);return R+L/10<z&&R+L*.9<z+h&&(R+=L),I&&S&&(R-=L),R}};function r(f,h,p,v){if(f*h<=0)return 1/0;for(var y=Math.abs(h-f),g=p.type==="date",A=u(y,g),m=0;m<10;m++){var M=u(A*80,g);if(A===M)break;if(s(M,f,h,g,p,v))A=M;else break}return A}function u(f,h){return h&&f>a?f>w?f>l*1.1?l:f>b*1.1?b:w:f>e?e:f>o?o:a:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function s(f,h,p,v,y,g){if(v&&f>w){var A=i(h,y,g),m=i(p,y,g),M=f===l?0:1;return A[M]!==m[M]}return Math.floor(p/f)-Math.floor(h/f)>.1}function i(f,h,p){var v=h.c2d(f,l,p).split("-");return v[0]===""&&(v.unshift(),v[0]="-"+v[0]),v}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../registry"),w=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),o=t("./bin_functions"),a=t("./norm_functions"),n=t("./average"),r=t("./bin_label_vals");function u(p,v){var y=[],g=[],A=w.getFromId(p,v.orientation==="h"?v.yaxis:v.xaxis),m=v.orientation==="h"?"y":"x",M={x:"y",y:"x"}[m],_=v[m+"calendar"],T=v.cumulative,x,c=s(p,v,A,m),L=c[0],S=c[1],k=typeof L.size=="string",P=[],z=k?P:L,I=[],R=[],D=[],O=0,F=v.histnorm,Y=v.histfunc,X=F.indexOf("density")!==-1,q,$,V;T.enabled&&X&&(F=F.replace(/ ?density$/,""),X=!1);var K=Y==="max"||Y==="min",se=K?null:0,ue=o.count,oe=a[F],U=!1,G=function(He){return A.r2c(He,0,_)},re;for(l.isArrayOrTypedArray(v[M])&&Y!=="count"&&(re=v[M],U=Y==="avg",ue=o[Y]),x=G(L.start),$=G(L.end)+(x-w.tickIncrement(x,L.size,!1,_))/1e6;x<$&&y.length<1e6&&(q=w.tickIncrement(x,L.size,!1,_),y.push((x+q)/2),g.push(se),D.push([]),P.push(x),X&&I.push(1/(q-x)),U&&R.push(0),!(q<=x));)x=q;P.push(x),!k&&A.type==="date"&&(z={start:G(z.start),end:G(z.end),size:z.size}),p._fullLayout._roundFnOpts||(p._fullLayout._roundFnOpts={});var ee=v["_"+m+"bingroup"],j={leftGap:1/0,rightGap:1/0};ee&&(p._fullLayout._roundFnOpts[ee]||(p._fullLayout._roundFnOpts[ee]=j),j=p._fullLayout._roundFnOpts[ee]);var Q=g.length,ne=!0,ae=j.leftGap,ie=j.rightGap,fe={};for(x=0;x<S.length;x++){var me=S[x];V=l.findBin(me,z),V>=0&&V<Q&&(O+=ue(V,x,g,re,R),ne&&D[V].length&&me!==S[D[V][0]]&&(ne=!1),D[V].push(x),fe[x]=V,ae=Math.min(ae,me-P[V]),ie=Math.min(ie,P[V+1]-me))}j.leftGap=ae,j.rightGap=ie;var ce;ne||(ce=function(He,Ge){return function(){var _e=p._fullLayout._roundFnOpts[ee];return r(_e.leftGap,_e.rightGap,P,A,_)(He,Ge)}}),U&&(O=n(g,R)),oe&&oe(g,O,I),T.enabled&&h(g,T.direction,T.currentbin);var ye=Math.min(y.length,g.length),xe=[],ke=0,Ae=ye-1;for(x=0;x<ye;x++)if(g[x]){ke=x;break}for(x=ye-1;x>=ke;x--)if(g[x]){Ae=x;break}for(x=ke;x<=Ae;x++)if(d(y[x])&&d(g[x])){var Oe={p:y[x],s:g[x],b:0};T.enabled||(Oe.pts=D[x],ne?Oe.ph0=Oe.ph1=D[x].length?S[D[x][0]]:y[x]:(v._computePh=!0,Oe.ph0=ce(P[x]),Oe.ph1=ce(P[x+1],!0))),xe.push(Oe)}return xe.length===1&&(xe[0].width1=w.tickIncrement(xe[0].p,L.size,!1,_)-xe[0].p),e(xe,v),l.isArrayOrTypedArray(v.selectedpoints)&&l.tagSelected(xe,v,fe),xe}function s(p,v,y,g,A){var m=g+"bins",M=p._fullLayout,_=v["_"+g+"bingroup"],T=M._histogramBinOpts[_],x=M.barmode==="overlay",c,L,S,k,P,z,I,R=function(ce){return y.r2c(ce,0,k)},D=function(ce){return y.c2r(ce,0,k)},O=y.type==="date"?function(ce){return ce||ce===0?l.cleanDate(ce,null,k):null}:function(ce){return d(ce)?Number(ce):null};function F(ce,ye,xe){ye[ce+"Found"]?(ye[ce]=O(ye[ce]),ye[ce]===null&&(ye[ce]=xe[ce])):(z[ce]=ye[ce]=xe[ce],l.nestedProperty(L[0],m+"."+ce).set(xe[ce]))}if(v["_"+g+"autoBinFinished"])delete v["_"+g+"autoBinFinished"];else{L=T.traces;var Y=[],X=!0,q=!1,$=!1;for(c=0;c<L.length;c++)if(S=L[c],S.visible){var V=T.dirs[c];P=S["_"+V+"pos0"]=y.makeCalcdata(S,V),Y=l.concat(Y,P),delete S["_"+g+"autoBinFinished"],v.visible===!0&&(X?X=!1:(delete S._autoBin,S["_"+g+"autoBinFinished"]=1),b.traceIs(S,"2dMap")&&(q=!0),S.type==="histogram2dcontour"&&($=!0))}k=L[0][g+"calendar"];var K=w.autoBin(Y,y,T.nbins,q,k,T.sizeFound&&T.size),se=L[0]._autoBin={};if(z=se[T.dirs[0]]={},$&&(T.size||(K.start=D(w.tickIncrement(R(K.start),K.size,!0,k))),T.end===void 0&&(K.end=D(w.tickIncrement(R(K.end),K.size,!1,k)))),x&&!b.traceIs(v,"2dMap")&&K._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(A)return[K,P,!0];K=i(p,v,y,g,m)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?K.start=D(w.tickIncrement(R(K.start),K.size,!0,k)):K.end=D(w.tickIncrement(R(K.end),K.size,!1,k))),T.size=K.size,T.sizeFound||(z.size=K.size,l.nestedProperty(L[0],m+".size").set(K.size)),F("start",T,K),F("end",T,K)}P=v["_"+g+"pos0"],delete v["_"+g+"pos0"];var ue=v._input[m]||{},oe=l.extendFlat({},T),U=T.start,G=y.r2l(ue.start),re=G!==void 0;if((T.startFound||re)&&G!==y.r2l(U)){var ee=re?G:l.aggNums(Math.min,null,P),j={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:T.size,tick0:U,calendar:k,range:[ee,w.tickIncrement(ee,T.size,!1,k)].map(y.l2r)},Q=w.tickFirst(j);Q>y.r2l(ee)&&(Q=w.tickIncrement(Q,T.size,!0,k)),oe.start=y.l2r(Q),re||l.nestedProperty(v,m+".start").set(oe.start)}var ne=T.end,ae=y.r2l(ue.end),ie=ae!==void 0;if((T.endFound||ie)&&ae!==y.r2l(ne)){var fe=ie?ae:l.aggNums(Math.max,null,P);oe.end=y.l2r(fe),ie||l.nestedProperty(v,m+".start").set(oe.end)}var me="autobin"+g;return v._input[me]===!1&&(v._input[m]=l.extendFlat({},v[m]||{}),delete v._input[me],delete v[me]),[oe,P]}function i(p,v,y,g,A){var m=p._fullLayout,M=f(p,v),_=!1,T=1/0,x=[v],c,L,S;for(c=0;c<M.length;c++)if(L=M[c],L===v)_=!0;else if(!_)S=m._histogramBinOpts[L["_"+g+"bingroup"]],T=Math.min(T,S.size||L[A].size);else{var k=s(p,L,y,g,!0),P=k[0],z=k[2];L["_"+g+"autoBinFinished"]=1,L["_"+g+"pos0"]=k[1],z?x.push(L):T=Math.min(T,P.size)}var I=new Array(x.length);for(c=0;c<x.length;c++)for(var R=x[c]["_"+g+"pos0"],D=0;D<R.length;D++)if(R[D]!==void 0){I[c]=R[D];break}for(isFinite(T)||(T=l.distinctVals(I).minDiff),c=0;c<x.length;c++){L=x[c];var O=L[g+"calendar"],F={start:y.c2r(I[c]-T/2,0,O),end:y.c2r(I[c]+T/2,0,O),size:T};L._input[A]=L[A]=F,S=m._histogramBinOpts[L["_"+g+"bingroup"]],S&&l.extendFlat(S,F)}return v[A]}function f(p,v){for(var y=v.xaxis,g=v.yaxis,A=v.orientation,m=[],M=p._fullData,_=0;_<M.length;_++){var T=M[_];T.type==="histogram"&&T.visible===!0&&T.orientation===A&&T.xaxis===y&&T.yaxis===g&&m.push(T)}return m}function h(p,v,y){var g,A,m;function M(T){m=p[T],p[T]/=2}function _(T){A=p[T],p[T]=m+A/2,m+=A}if(y==="half")if(v==="increasing")for(M(0),g=1;g<p.length;g++)_(g);else for(M(p.length-1),g=p.length-2;g>=0;g--)_(g);else if(v==="increasing"){for(g=1;g<p.length;g++)p[g]+=p[g-1];y==="exclude"&&(p.unshift(0),p.pop())}else{for(g=p.length-2;g>=0;g--)p[g]+=p[g+1];y==="exclude"&&(p.push(0),p.shift())}}B.exports={calc:u,calcAllAutoBins:s}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(t,B,H){B.exports={eventDataKeys:["binNumber"]}},{}],819:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axis_ids"),b=t("../../registry").traceIs,w=t("../bar/defaults").handleGroupingDefaults,e=d.nestedProperty,o=t("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];B.exports=function(u,s){var i=s._histogramBinOpts={},f=[],h={},p=[],v,y,g,A,m,M,_;function T($,V){return d.coerce(v._input,v,v._module.attributes,$,V)}function x($){return $.orientation==="v"?"x":"y"}function c($,V){var K=l.getFromTrace({_fullLayout:s},$,V);return K.type}function L($,V,K){var se=$.uid+"__"+K;V||(V=se);var ue=c($,K),oe=$[K+"calendar"]||"",U=i[V],G=!0;U&&(ue===U.axType&&oe===U.calendar?(G=!1,U.traces.push($),U.dirs.push(K)):(V=se,ue!==U.axType&&d.warn(["Attempted to group the bins of trace",$.index,"set on a","type:"+ue,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),oe!==U.calendar&&d.warn(["Attempted to group the bins of trace",$.index,"set with a",oe,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),G&&(i[V]={traces:[$],dirs:[K],axType:ue,calendar:$[K+"calendar"]||""}),$["_"+K+"bingroup"]=V}for(m=0;m<u.length;m++)v=u[m],b(v,"histogram")&&(f.push(v),delete v._xautoBinFinished,delete v._yautoBinFinished,b(v,"2dMap")||w(v._input,v,s,T));var S=s._alignmentOpts||{};for(m=0;m<f.length;m++){if(v=f[m],g="",!b(v,"2dMap")){if(A=x(v),s.barmode==="group"&&v.alignmentgroup){var k=v[A+"axis"],P=o(s,k)+v.orientation;(S[P]||{})[v.alignmentgroup]&&(g=P)}!g&&s.barmode!=="overlay"&&(g=o(s,v.xaxis)+o(s,v.yaxis)+x(v))}g?(h[g]||(h[g]=[]),h[g].push(v)):p.push(v)}for(g in h){if(y=h[g],y.length===1){p.push(y[0]);continue}var z=!1;for(y.length&&(v=y[0],z=T("bingroup")),g=z||g,m=0;m<y.length;m++){v=y[m];var I=v._input.bingroup;I&&I!==g&&d.warn(["Trace",v.index,"must match","within bingroup",g+".","Ignoring its bingroup:",I,"setting."].join(" ")),v.bingroup=g,L(v,g,x(v))}}for(m=0;m<p.length;m++){v=p[m];var R=T("bingroup");if(b(v,"2dMap"))for(_=0;_<2;_++){A=n[_];var D=T(A+"bingroup",R?R+"__"+A:null);L(v,D,A)}else L(v,R,x(v))}for(g in i){var O=i[g];for(y=O.traces,M=0;M<a.length;M++){var F=a[M],Y=F.name,X,q;if(!(Y==="nbins"&&O.sizeFound)){for(m=0;m<y.length;m++){if(v=y[m],A=O.dirs[m],X=F.aStr[A],e(v._input,X).get()!==void 0){O[Y]=T(X),O[Y+"Found"]=!0;break}q=(v._autoBin||{})[A]||{},q[Y]&&e(v,X).set(q[Y])}if(Y==="start"||Y==="end")for(;m<y.length;m++)v=y[m],v["_"+A+"bingroup"]&&(q=(v._autoBin||{})[A]||{},T(X,q[Y]));Y==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(v=y[0],O[Y]=T(X))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/color"),w=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),o=t("./attributes");B.exports=function(n,r,u,s){function i(c,L){return l.coerce(n,r,o,c,L)}var f=i("x"),h=i("y"),p=i("cumulative.enabled");p&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var v=i("textposition");w(n,r,s,i,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var y=i("orientation",h&&!f?"h":"v"),g=y==="v"?"x":"y",A=y==="v"?"y":"x",m=f&&h?Math.min(l.minRowLength(f)&&l.minRowLength(h)):l.minRowLength(r[g]||[]);if(!m){r.visible=!1;return}r._length=m;var M=d.getComponentMethod("calendars","handleTraceDefaults");M(n,r,["x","y"],s);var _=r[A];_&&i("histfunc"),i("histnorm"),i("autobin"+g),e(n,r,i,u,s),l.coerceSelectionMarkerOpacity(r,i);var T=(r.marker.line||{}).color,x=d.getComponentMethod("errorbars","supplyDefaults");x(n,r,T||b.defaultLine,{axis:"y"}),x(n,r,T||b.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(t,B,H){B.exports=function(l,b,w,e,o){if(l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"zLabelVal"in b&&(l.z=b.zLabelVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),!(w.cumulative||{}).enabled){var a=Array.isArray(o)?e[0].pts[o[0]][o[1]]:e[o].pts;l.pointNumbers=a,l.binNumber=l.pointNumber,delete l.pointNumber,delete l.pointIndex;var n;if(w._indexToPoints){n=[];for(var r=0;r<a.length;r++)n=n.concat(w._indexToPoints[a[r]])}else n=a;l.pointIndices=n}return l}},{}],822:[function(t,B,H){var d=t("../bar/hover").hoverPoints,l=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(w,e,o,a,n){var r=d(w,e,o,a,n);if(!!r){w=r[0];var u=w.cd[w.index],s=w.cd[0].trace;if(!s.cumulative.enabled){var i=s.orientation==="h"?"y":"x";w[i+"Label"]=l(w[i+"a"],[u.ph0,u.ph1],s[i+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(t,B,H){B.exports={percent:function(d,l){for(var b=d.length,w=100/l,e=0;e<b;e++)d[e]*=w},probability:function(d,l){for(var b=d.length,w=0;w<b;w++)d[w]/=l},density:function(d,l,b,w){var e=d.length;w=w||1;for(var o=0;o<e;o++)d[o]*=b[o]*w},"probability density":function(d,l,b,w){var e=d.length;w&&(l/=w);for(var o=0;o<e;o++)d[o]*=b[o]/l}}},{}],825:[function(t,B,H){var d=t("../histogram/attributes"),l=t("../histogram/bin_attributes"),b=t("../heatmap/attributes"),w=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,n=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;B.exports=r({x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:l("x"),nbinsy:d.nbinsy,ybins:l("y"),autobinx:d.autobinx,autobiny:d.autobiny,bingroup:r({},d.bingroup,{}),xbingroup:r({},d.bingroup,{}),ybingroup:r({},d.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:b.textfont,showlegend:r({},w.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../histogram/bin_functions"),w=t("../histogram/norm_functions"),e=t("../histogram/average"),o=t("../histogram/bin_label_vals"),a=t("../histogram/calc").calcAllAutoBins;B.exports=function(i,f){var h=l.getFromId(i,f.xaxis),p=l.getFromId(i,f.yaxis),v=f.xcalendar,y=f.ycalendar,g=function(it){return h.r2c(it,0,v)},A=function(it){return p.r2c(it,0,y)},m=function(it){return h.c2r(it,0,v)},M=function(it){return p.c2r(it,0,y)},_,T,x,c,L=a(i,f,h,"x"),S=L[0],k=L[1],P=a(i,f,p,"y"),z=P[0],I=P[1],R=f._length;k.length>R&&k.splice(R,k.length-R),I.length>R&&I.splice(R,I.length-R);var D=[],O=[],F=[],Y=typeof S.size=="string",X=typeof z.size=="string",q=[],$=[],V=Y?q:S,K=X?$:z,se=0,ue=[],oe=[],U=f.histnorm,G=f.histfunc,re=U.indexOf("density")!==-1,ee=G==="max"||G==="min",j=ee?null:0,Q=b.count,ne=w[U],ae=!1,ie=[],fe=[],me="z"in f?f.z:"marker"in f&&Array.isArray(f.marker.color)?f.marker.color:"";me&&G!=="count"&&(ae=G==="avg",Q=b[G]);var ce=S.size,ye=g(S.start),xe=g(S.end)+(ye-l.tickIncrement(ye,ce,!1,v))/1e6;for(_=ye;_<xe;_=l.tickIncrement(_,ce,!1,v))O.push(j),q.push(_),ae&&F.push(0);q.push(_);var ke=O.length,Ae=(_-ye)/ke,Oe=m(ye+Ae/2),He=z.size,Ge=A(z.start),_e=A(z.end)+(Ge-l.tickIncrement(Ge,He,!1,y))/1e6;for(_=Ge;_<_e;_=l.tickIncrement(_,He,!1,y)){D.push(O.slice()),$.push(_);var Ie=new Array(ke);for(T=0;T<ke;T++)Ie[T]=[];oe.push(Ie),ae&&ue.push(F.slice())}$.push(_);var Ye=D.length,qe=(_-Ge)/Ye,Ue=M(Ge+qe/2);re&&(ie=n(O.length,V,Ae,Y),fe=n(D.length,K,qe,X)),!Y&&h.type==="date"&&(V=r(g,V)),!X&&p.type==="date"&&(K=r(A,K));var Re=!0,Ve=!0,dt=new Array(ke),Dt=new Array(Ye),Gt=1/0,kt=1/0,zt=1/0,Bt=1/0;for(_=0;_<R;_++){var Lt=k[_],Mt=I[_];x=d.findBin(Lt,V),c=d.findBin(Mt,K),x>=0&&x<ke&&c>=0&&c<Ye&&(se+=Q(x,_,D[c],me,ue[c]),oe[c][x].push(_),Re&&(dt[x]===void 0?dt[x]=Lt:dt[x]!==Lt&&(Re=!1)),Ve&&(Dt[c]===void 0?Dt[c]=Mt:Dt[c]!==Mt&&(Ve=!1)),Gt=Math.min(Gt,Lt-q[x]),kt=Math.min(kt,q[x+1]-Lt),zt=Math.min(zt,Mt-$[c]),Bt=Math.min(Bt,$[c+1]-Mt))}if(ae)for(c=0;c<Ye;c++)se+=e(D[c],ue[c]);if(ne)for(c=0;c<Ye;c++)ne(D[c],se,ie,fe[c]);return{x:k,xRanges:u(q,Re&&dt,Gt,kt,h,v),x0:Oe,dx:Ae,y:I,yRanges:u($,Ve&&Dt,zt,Bt,p,y),y0:Ue,dy:qe,z:D,pts:oe}};function n(s,i,f,h){var p=new Array(s),v;if(h)for(v=0;v<s;v++)p[v]=1/(i[v+1]-i[v]);else{var y=1/f;for(v=0;v<s;v++)p[v]=y}return p}function r(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function u(s,i,f,h,p,v){var y,g=s.length-1,A=new Array(g),m=o(f,h,s,p,v);for(y=0;y<g;y++){var M=(i||[])[y];A[y]=M===void 0?[m(s[y]),m(s[y+1],!0)]:[M,M]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(t,B,H){var d=t("../../lib"),l=t("./sample_defaults"),b=t("../heatmap/style_defaults"),w=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),o=t("./attributes");B.exports=function(n,r,u,s){function i(f,h){return d.coerce(n,r,o,f,h)}l(n,r,i,s),r.visible!==!1&&(b(n,r,i,s),w(n,r,s,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),e(i,s),i("xhoverformat"),i("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(t,B,H){var d=t("../heatmap/hover"),l=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(w,e,o,a,n){var r=d(w,e,o,a,n);if(!!r){w=r[0];var u=w.index,s=u[0],i=u[1],f=w.cd[0],h=f.trace,p=f.xRanges[i],v=f.yRanges[s];return w.xLabel=l(w.xa,[p[0],p[1]],h.xhoverformat),w.yLabel=l(w.ya,[v[0],v[1]],h.yhoverformat),r}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports=function(w,e,o,a){var n=o("x"),r=o("y"),u=l.minRowLength(n),s=l.minRowLength(r);if(!u||!s){e.visible=!1;return}e._length=Math.min(u,s);var i=d.getComponentMethod("calendars","handleTraceDefaults");i(w,e,["x","y"],a);var f=o("z")||o("marker.color");f&&o("histfunc"),o("histnorm"),o("autobinx"),o("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(t,B,H){var d=t("../histogram2d/attributes"),l=t("../contour/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;B.exports=e({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:d.xbins,nbinsy:d.nbinsy,ybins:d.ybins,autobinx:d.autobinx,autobiny:d.autobiny,bingroup:d.bingroup,xbingroup:d.xbingroup,ybingroup:d.ybingroup,autocontour:l.autocontour,ncontours:l.ncontours,contours:l.contours,line:{color:l.line.color,width:e({},l.line.width,{dflt:.5}),dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:d.hovertemplate,texttemplate:l.texttemplate,textfont:l.textfont},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(t,B,H){var d=t("../../lib"),l=t("../histogram2d/sample_defaults"),b=t("../contour/contours_defaults"),w=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),o=t("./attributes");B.exports=function(n,r,u,s){function i(h,p){return d.coerce(n,r,o,h,p)}function f(h){return d.coerce2(n,r,o,h)}l(n,r,i,s),r.visible!==!1&&(b(n,r,i,f),w(n,r,i,s),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(i,s))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../components/colorscale/attributes"),w=t("../../plots/domain").attributes,e=t("../pie/attributes"),o=t("../sunburst/attributes"),a=t("../treemap/attributes"),n=t("../treemap/constants"),r=t("../../lib/extend").extendFlat;B.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:o.marker.colors,line:o.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:l({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:d({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:e.sort,root:o.root,domain:w({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(t,B,H){var d=t("../../plots/plots");H.name="icicle",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],836:[function(t,B,H){var d=t("../sunburst/calc");H.calc=function(l,b){return d.calc(l,b)},H.crossTraceCalc=function(l){return d._runCrossTraceCalc("icicle",l)}},{"../sunburst/calc":1047}],837:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,o=t("../bar/constants").TEXTPAD,a=t("../../components/colorscale"),n=a.hasColorscale,r=a.handleDefaults;B.exports=function(s,i,f,h){function p(x,c){return d.coerce(s,i,l,x,c)}var v=p("labels"),y=p("parents");if(!v||!v.length||!y||!y.length){i.visible=!1;return}var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var A=p("text");p("texttemplate"),i.texttemplate||p("textinfo",Array.isArray(A)?"text+label":"label"),p("hovertext"),p("hovertemplate");var m=p("pathbar.visible"),M="auto";e(s,i,h,p,M,{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var _=p("marker.line.width");_&&p("marker.line.color",h.paper_bgcolor),p("marker.colors");var T=i._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;T&&r(s,i,h,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",T?1:.7),i._hovered={marker:{line:{width:2,color:b.contrast(h.paper_bgcolor)}}},m&&(p("pathbar.thickness",i.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),w(i,h,p),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("../treemap/constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),u=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(f,h,p,v,y){var g=y.width,A=y.height,m=y.viewX,M=y.viewY,_=y.pathSlice,T=y.toMoveInsideSlice,x=y.strTransform,c=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,z={},I=f._fullLayout,R=h[0],D=R.trace,O=D.textposition.indexOf("left")!==-1,F=D.textposition.indexOf("right")!==-1,Y=D.textposition.indexOf("bottom")!==-1,X=e(p,[g,A],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}),q=X.descendants(),$=1/0,V=-1/0;q.forEach(function(U){var G=U.depth;G>=D._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):($=Math.min($,G),V=Math.max(V,G))}),v=v.data(q,n.getPtId),D._maxVisibleLayers=isFinite(V)?V-$+1:0,v.enter().append("g").classed("slice",!0),L(v,s,z,[g,A],_),v.order();var K=null;if(c&&P){var se=n.getPtId(P);v.each(function(U){K===null&&n.getPtId(U)===se&&(K={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var ue=function(){return K||{x0:0,x1:g,y0:0,y1:A}},oe=v;return c&&(oe=oe.transition().each("end",function(){var U=d.select(this);n.setSliceCursor(U,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),oe.each(function(U){U._x0=m(U.x0),U._x1=m(U.x1),U._y0=M(U.y0),U._y1=M(U.y1),U._hoverX=m(U.x1-D.tiling.pad),U._hoverY=M(Y?U.y1-D.tiling.pad/2:U.y0+D.tiling.pad/2);var G=d.select(this),re=l.ensureSingle(G,"path","surface",function(ne){ne.style("pointer-events","all")});c?re.transition().attrTween("d",function(ne){var ae=S(ne,s,ue(),[g,A],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(ie){return _(ae(ie))}}):re.attr("d",_),G.call(r,p,f,h,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,f,{isTransitioning:f._transitioning}),re.call(o,U,D,{hovered:!1}),U.x0===U.x1||U.y0===U.y1?U._text="":U._text=u(U,p,D,h,I)||"";var ee=l.ensureSingle(G,"g","slicetext"),j=l.ensureSingle(ee,"text","",function(ne){ne.attr("data-notex",1)}),Q=l.ensureUniformFontSize(f,n.determineTextFont(D,U,I.font));j.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O?"start":"middle").call(b.font,Q).call(w.convertToTspans,f),U.textBB=b.bBox(j.node()),U.transform=T(U,{fontSize:Q.size}),U.transform.fontSize=Q.size,c?j.transition().attrTween("transform",function(ne){var ae=k(ne,s,ue(),[g,A]);return function(ie){return x(ae(ie))}}):j.attr("transform",x(U))}),K}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(t,B,H){B.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(t,B,H){B.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return d.coerce(w,e,l,a,n)}o("iciclecolorway",e.colorway),o("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(t,B,H){var d=t("d3-hierarchy"),l=t("../treemap/flip_tree");B.exports=function(w,e,o){var a=o.flipX,n=o.flipY,r=o.orientation==="h",u=o.maxDepth,s=e[0],i=e[1];u&&(s=(w.height+1)*e[0]/Math.min(w.height+1,u),i=(w.height+1)*e[1]/Math.min(w.height+1,u));var f=d.partition().padding(o.pad.inner).size(r?[e[1],s]:[e[0],i])(w);return(r||a||n)&&l(f,e,{swapXY:r,flipX:a,flipY:n}),f}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(t,B,H){var d=t("../treemap/draw"),l=t("./draw_descendants");B.exports=function(w,e,o,a){return d(w,e,o,a,{type:"icicle",drawDescendants:l})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../bar/uniform_text").resizeText;function e(a){var n=a._fullLayout._iciclelayer.selectAll(".trace");w(a,n,"icicle"),n.each(function(r){var u=d.select(this),s=r[0],i=s.trace;u.style("opacity",i.opacity),u.selectAll("path.surface").each(function(f){d.select(this).call(o,f,i)})})}function o(a,n,r){var u=n.data.data,s=!n.children,i=u.i,f=b.castOption(r,i,"marker.line.color")||l.defaultLine,h=b.castOption(r,i,"marker.line.width")||0;a.style("stroke-width",h).call(l.fill,u.color).call(l.stroke,f).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(t,B,H){for(var d=t("../../plots/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],n=0;n<e.length;n++){var r=w[e[n]];o.push("For the `"+e[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),a.push("For the `"+e[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}B.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},d.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:l({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(t,B,H){var d=t("../../lib"),l=t("./constants"),b=t("fast-isnumeric"),w=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,o=t("./helpers").getImageSize;B.exports=function(s,i){var f,h;if(i._hasZ)f=i.z.length,h=e(i.z);else if(i._hasSource){var p=o(i.source);f=p.height,h=p.width}var v=w.getFromId(s,i.xaxis||"x"),y=w.getFromId(s,i.yaxis||"y"),g=v.d2c(i.x0)-i.dx/2,A=y.d2c(i.y0)-i.dy/2,m,M=[g,g+h*i.dx],_=[A,A+f*i.dy];if(v&&v.type==="log")for(m=0;m<h;m++)M.push(g+m*i.dx);if(y&&y.type==="log")for(m=0;m<f;m++)_.push(A+m*i.dy);i._extremes[v._id]=w.findExtremes(v,M),i._extremes[y._id]=w.findExtremes(y,_),i._scaler=r(i);var T={x0:g,y0:A,z:i.z,w:h,h:f};return[T]};function a(u,s,i,f){return function(h){return d.constrain((h-u)*s,i,f)}}function n(u,s){return function(i){return d.constrain(i,u,s)}}function r(u){var s=l.colormodel[u.colormodel],i=s.colormodel||u.colormodel,f=i.length;u._sArray=[];for(var h=0;h<f;h++)s.min[h]!==u.zmin[h]||s.max[h]!==u.zmax[h]?u._sArray.push(a(u.zmin[h],(s.max[h]-s.min[h])/(u.zmax[h]-u.zmin[h]),s.min[h],s.max[h])):u._sArray.push(n(s.min[h],s.max[h]));return function(p){for(var v=p.slice(0,f),y=0;y<f;y++){var g=v[y];if(!b(g))return!1;v[y]=u._sArray[y](g)}return v}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(t,B,H){B.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(d){return d.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(d){var l=d.slice(0,3);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(d){var l=d.slice(0,4);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./constants"),w=t("../../snapshot/helpers").IMAGE_URL_PREFIX;B.exports=function(o,a){function n(s,i){return d.coerce(o,a,l,s,i)}n("source"),a.source&&!a.source.match(w)&&delete a.source,a._hasSource=!!a.source;var r=n("z");if(a._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var u;a._hasZ?(n("colormodel","rgb"),u=b.colormodel[a.colormodel],n("zmin",u.zminDflt||u.min),n("zmax",u.zmaxDflt||u.max)):a._hasSource&&(a.colormodel="rgba256",u=b.colormodel[a.colormodel],a.zmin=u.zminDflt,a.zmax=u.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),a._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(t,B,H){B.exports=function(l,b){return"xVal"in b&&(l.x=b.xVal),"yVal"in b&&(l.y=b.yVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l.color=b.color,l.colormodel=b.trace.colormodel,l.z||(l.z=b.color),l}},{}],850:[function(t,B,H){var d=t("probe-image-size/sync"),l=t("../../snapshot/helpers").IMAGE_URL_PREFIX,b=t("buffer/").Buffer;H.getImageSize=function(w){var e=w.replace(l,""),o=new b(e,"base64");return d(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("./constants");B.exports=function(e,o,a){var n=e.cd[0],r=n.trace,u=e.xa,s=e.ya;if(!(d.inbox(o-n.x0,o-(n.x0+n.w*r.dx),0)>0||d.inbox(a-n.y0,a-(n.y0+n.h*r.dy),0)>0)){var i=Math.floor((o-n.x0)/r.dx),f=Math.floor(Math.abs(a-n.y0)/r.dy),h;if(r._hasZ?h=n.z[f][i]:r._hasSource&&(h=r._canvas.el.getContext("2d").getImageData(i,f,1,1).data),!!h){var p=n.hi||r.hoverinfo,v;if(p){var y=p.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(v=!0)}var g=b.colormodel[r.colormodel],A=g.colormodel||r.colormodel,m=A.length,M=r._scaler(h),_=g.suffix,T=[];(r.hovertemplate||v)&&(T.push("["+[M[0]+_[0],M[1]+_[1],M[2]+_[2]].join(", ")),m===4&&T.push(", "+M[3]+_[3]),T.push("]"),T=T.join(""),e.extraText=A.toUpperCase()+": "+T);var x;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[f])?x=r.hovertext[f][i]:Array.isArray(r.text)&&Array.isArray(r.text[f])&&(x=r.text[f][i]);var c=s.c2p(n.y0+(f+.5)*r.dy),L=n.x0+(i+.5)*r.dx,S=n.y0+(f+.5)*r.dy,k="["+h.slice(0,r.colormodel.length).join(", ")+"]";return[l.extendFlat(e,{index:[f,i],x0:u.c2p(n.x0+i*r.dx),x1:u.c2p(n.x0+(i+1)*r.dx),y0:c,y1:c,color:M,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:x,hovertemplateLabels:{zLabel:k,colorLabel:T,"color[0]Label":M[0]+_[0],"color[1]Label":M[1]+_[1],"color[2]Label":M[2]+_[2],"color[3]Label":M[3]+_[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.strTranslate,w=t("../../constants/xmlns_namespaces"),e=t("./constants"),o=l.isIOS()||l.isSafari()||l.isIE();B.exports=function(n,r,u,s){var i=r.xaxis,f=r.yaxis,h=!(o||n._context._exportedPlot);l.makeTraceGroups(s,u,"im").each(function(p){var v=d.select(this),y=p[0],g=y.trace,A=(g.zsmooth==="fast"||g.zsmooth===!1&&h)&&!g._hasZ&&g._hasSource&&i.type==="linear"&&f.type==="linear";g._realImage=A;var m=y.z,M=y.x0,_=y.y0,T=y.w,x=y.h,c=g.dx,L=g.dy,S,k,P,z,I,R;for(R=0;S===void 0&&R<T;)S=i.c2p(M+R*c),R++;for(R=T;k===void 0&&R>0;)k=i.c2p(M+R*c),R--;for(R=0;z===void 0&&R<x;)z=f.c2p(_+R*L),R++;for(R=x;I===void 0&&R>0;)I=f.c2p(_+R*L),R--;if(k<S&&(P=k,k=S,S=P),I<z&&(P=z,z=I,I=P),!A){var D=.5;S=Math.max(-D*i._length,S),k=Math.min((1+D)*i._length,k),z=Math.max(-D*f._length,z),I=Math.min((1+D)*f._length,I)}var O=Math.round(k-S),F=Math.round(I-z),Y=O<=0||F<=0;if(Y){var X=v.selectAll("image").data([]);X.exit().remove();return}function q(ee){var j=document.createElement("canvas");j.width=O,j.height=F;var Q=j.getContext("2d"),ne=function(He){return l.constrain(Math.round(i.c2p(M+He*c)-S),0,O)},ae=function(He){return l.constrain(Math.round(f.c2p(_+He*L)-z),0,F)},ie=e.colormodel[g.colormodel],fe=ie.colormodel||g.colormodel,me=ie.fmt,ce;for(R=0;R<y.w;R++){var ye=ne(R),xe=ne(R+1);if(!(xe===ye||isNaN(xe)||isNaN(ye)))for(var ke=0;ke<y.h;ke++){var Ae=ae(ke),Oe=ae(ke+1);Oe===Ae||isNaN(Oe)||isNaN(Ae)||!ee(R,ke)||(ce=g._scaler(ee(R,ke)),ce?Q.fillStyle=fe+"("+me(ce).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(ye,Ae,xe-ye,Oe-Ae))}}return j}var $=v.selectAll("image").data([p]);$.enter().append("svg:image").attr({xmlns:w.svg,preserveAspectRatio:"none"}),$.exit().remove();var V=g.zsmooth===!1?e.pixelatedStyle:"";if(A){var K=l.simpleMap(i.range,i.r2l),se=l.simpleMap(f.range,f.r2l),ue=K[1]<K[0],oe=se[1]>se[0];if(ue||oe){var U=S+O/2,G=z+F/2;V+="transform:"+b(U+"px",G+"px")+"scale("+(ue?-1:1)+","+(oe?-1:1)+")"+b(-U+"px",-G+"px")+";"}}$.attr("style",V);var re=new Promise(function(ee){if(g._hasZ)ee();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===T&&g._canvas.el.height===x&&g._canvas.source===g.source)ee();else{var j=document.createElement("canvas");j.width=T,j.height=x;var Q=j.getContext("2d");g._image=g._image||new Image;var ne=g._image;ne.onload=function(){Q.drawImage(ne,0,0),g._canvas={el:j,source:g.source},ee()},ne.setAttribute("src",g.source)}}).then(function(){var ee,j;if(g._hasZ)j=q(function(ae,ie){return m[ie][ae]}),ee=j.toDataURL("image/png");else if(g._hasSource)if(A)ee=g.source;else{var Q=g._canvas.el.getContext("2d"),ne=Q.getImageData(0,0,T,x).data;j=q(function(ae,ie){var fe=4*(ie*T+ae);return[ne[fe],ne[fe+1],ne[fe+2],ne[fe+3]]}),ee=j.toDataURL("image/png")}$.attr({"xlink:href":ee,height:F,width:O,x:S,y:z})});n._promises.push(re)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b){d.select(b).selectAll(".im image").style("opacity",function(w){return w[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("../../lib/extend").extendDeep,b=t("../../plot_api/edit_types").overrideAll,w=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),o=t("../../plots/domain").attributes,a=t("../../plots/cartesian/layout_attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../constants/delta.js"),u=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=w({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},h=n("step",l({},i,{range:f}));B.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:d({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:u("value")},font:d({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:u("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:d({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:l({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:f,visible:d({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:d({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:w({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:h,threshold:{line:{color:d({},i.line.color,{}),width:d({},i.line.width,{dflt:1}),editType:"plot"},thickness:d({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(t,B,H){var d=t("../../plots/plots");H.name="indicator",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],857:[function(t,B,H){function d(l,b){var w=[],e=b.value;typeof b._lastValue!="number"&&(b._lastValue=b.value);var o=b._lastValue,a=o;return b._hasDelta&&typeof b.delta.reference=="number"&&(a=b.delta.reference),w[0]={y:e,lastY:o,delta:e-a,relativeDelta:(e-a)/a},w}B.exports={calc:d}},{}],858:[function(t,B,H){B.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),o=t("./constants.js"),a=t("../../plots/cartesian/tick_value_defaults"),n=t("../../plots/cartesian/tick_mark_defaults"),r=t("../../plots/cartesian/tick_label_defaults"),u=t("../../plots/cartesian/prefix_suffix_defaults");function s(f,h,p,v){function y(R,D){return d.coerce(f,h,l,R,D)}b(h,v,y),y("mode"),h._hasNumber=h.mode.indexOf("number")!==-1,h._hasDelta=h.mode.indexOf("delta")!==-1,h._hasGauge=h.mode.indexOf("gauge")!==-1;var g=y("value");h._range=[0,typeof g=="number"?1.5*g:1];var A=new Array(2),m;h._hasNumber&&(y("number.valueformat"),y("number.font.color",v.font.color),y("number.font.family",v.font.family),y("number.font.size"),h.number.font.size===void 0&&(h.number.font.size=o.defaultNumberFontSize,A[0]=!0),y("number.prefix"),y("number.suffix"),m=h.number.font.size);var M;h._hasDelta&&(y("delta.font.color",v.font.color),y("delta.font.family",v.font.family),y("delta.font.size"),h.delta.font.size===void 0&&(h.delta.font.size=(h._hasNumber?.5:1)*(m||o.defaultNumberFontSize),A[1]=!0),y("delta.reference",h.value),y("delta.relative"),y("delta.valueformat",h.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),M=h.delta.font.size),h._scaleNumbers=(!h._hasNumber||A[0])&&(!h._hasDelta||A[1])||!1,y("title.font.color",v.font.color),y("title.font.family",v.font.family),y("title.font.size",.25*(m||M||o.defaultNumberFontSize)),y("title.text");var _,T,x,c;function L(R,D){return d.coerce(_,T,l.gauge,R,D)}function S(R,D){return d.coerce(x,c,l.gauge.axis,R,D)}if(h._hasGauge){_=f.gauge,_||(_={}),T=w.newContainer(h,"gauge"),L("shape");var k=h._isBullet=h.gauge.shape==="bullet";k||y("title.align","center");var P=h._isAngular=h.gauge.shape==="angular";P||y("align","center"),L("bgcolor",v.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var z=o.valueThickness*(h.gauge.shape==="bullet"?.5:1);L("bar.thickness",z),e(_,T,{name:"steps",handleItemDefaults:i}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),x={},_&&(x=_.axis||{}),c=w.newContainer(T,"axis"),S("visible"),h._range=S("range",h._range);var I={outerTicks:!0};a(x,c,S,"linear"),u(x,c,S,"linear",I),r(x,c,S,"linear",I),n(x,c,S,I)}else y("title.align","center"),y("align","center"),h._isAngular=h._isBullet=!1;h._length=null}function i(f,h){function p(v,y){return d.coerce(f,h,l.gauge.steps,v,y)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}B.exports={supplyDefaults:s}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(t,B,H){B.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolate,b=t("d3-interpolate").interpolateNumber,w=t("../../lib"),e=w.strScale,o=w.strTranslate,a=w.rad2deg,n=t("../../constants/alignment").MID_SHIFT,r=t("../../components/drawing"),u=t("./constants"),s=t("../../lib/svg_text_utils"),i=t("../../plots/cartesian/axes"),f=t("../../plots/cartesian/axis_defaults"),h=t("../../plots/cartesian/position_defaults"),p=t("../../plots/cartesian/layout_attributes"),v=t("../../components/color"),y={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},A=/[yzafpnmkMGTPEZY]/;function m(I){return I&&I.duration>0}B.exports=function(R,D,O,F){var Y=R._fullLayout,X;m(O)&&F&&(X=F()),w.makeTraceGroups(Y._indicatorlayer,D,"trace").each(function(q){var $=q[0],V=$.trace,K=d.select(this),se=V._hasGauge,ue=V._isAngular,oe=V._isBullet,U=V.domain,G={w:Y._size.w*(U.x[1]-U.x[0]),h:Y._size.h*(U.y[1]-U.y[0]),l:Y._size.l+Y._size.w*U.x[0],r:Y._size.r+Y._size.w*(1-U.x[1]),t:Y._size.t+Y._size.h*(1-U.y[1]),b:Y._size.b+Y._size.h*U.y[0]},re=G.l+G.w/2,ee=G.t+G.h/2,j=Math.min(G.w/2,G.h),Q=u.innerRadius*j,ne,ae,ie,fe=V.align||"center";if(ae=ee,!se)ne=G.l+g[fe]*G.w,ie=function(_e){return S(_e,G.w,G.h)};else if(ue&&(ne=re,ae=ee+j/2,ie=function(_e){return k(_e,.9*Q)}),oe){var me=u.bulletPadding,ce=1-u.bulletNumberDomainSize+me;ne=G.l+(ce+(1-ce)*g[fe])*G.w,ie=function(_e){return S(_e,(u.bulletNumberDomainSize-me)*G.w,G.h)}}T(R,K,q,{numbersX:ne,numbersY:ae,numbersScaler:ie,transitionOpts:O,onComplete:X});var ye,xe;se&&(ye={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},xe={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var ke=K.selectAll("g.angular").data(ue?q:[]);ke.exit().remove();var Ae=K.selectAll("g.angularaxis").data(ue?q:[]);Ae.exit().remove(),ue&&_(R,K,q,{radius:j,innerRadius:Q,gauge:ke,layer:Ae,size:G,gaugeBg:ye,gaugeOutline:xe,transitionOpts:O,onComplete:X});var Oe=K.selectAll("g.bullet").data(oe?q:[]);Oe.exit().remove();var He=K.selectAll("g.bulletaxis").data(oe?q:[]);He.exit().remove(),oe&&M(R,K,q,{gauge:Oe,layer:He,size:G,gaugeBg:ye,gaugeOutline:xe,transitionOpts:O,onComplete:X});var Ge=K.selectAll("text.title").data(q);Ge.exit().remove(),Ge.enter().append("text").classed("title",!0),Ge.attr("text-anchor",function(){return oe?y.right:y[V.title.align]}).text(V.title.text).call(r.font,V.title.font).call(s.convertToTspans,R),Ge.attr("transform",function(){var _e=G.l+G.w*g[V.title.align],Ie,Ye=u.titlePadding,qe=r.bBox(Ge.node());if(se){if(ue)if(V.gauge.axis.visible){var Ue=r.bBox(Ae.node());Ie=Ue.top-Ye-qe.bottom}else Ie=G.t+G.h/2-j/2-qe.bottom-Ye;oe&&(Ie=ae-(qe.top+qe.bottom)/2,_e=G.l-u.bulletPadding*G.w)}else Ie=V._numbersTop-Ye-qe.bottom;return o(_e,Ie)})})};function M(I,R,D,O){var F=D[0].trace,Y=O.gauge,X=O.layer,q=O.gaugeBg,$=O.gaugeOutline,V=O.size,K=F.domain,se=O.transitionOpts,ue=O.onComplete,oe,U,G,re,ee;Y.enter().append("g").classed("bullet",!0),Y.attr("transform",o(V.l,V.t)),X.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),X.selectAll("g.xbulletaxistick,path,text").remove();var j=V.h,Q=F.gauge.bar.thickness*j,ne=K.x[0],ae=K.x[0]+(K.x[1]-K.x[0])*(F._hasNumber||F._hasDelta?1-u.bulletNumberDomainSize:1);oe=L(I,F.gauge.axis),oe._id="xbulletaxis",oe.domain=[ne,ae],oe.setScale(),U=i.calcTicks(oe),G=i.makeTransTickFn(oe),re=i.getTickSigns(oe)[2],ee=V.t+V.h,oe.visible&&(i.drawTicks(I,oe,{vals:oe.ticks==="inside"?i.clipEnds(oe,U):U,layer:X,path:i.makeTickPath(oe,ee,re),transFn:G}),i.drawLabels(I,oe,{vals:U,layer:X,transFn:G,labelFns:i.makeLabelFns(oe,ee)}));function ie(Ae){Ae.attr("width",function(Oe){return Math.max(0,oe.c2p(Oe.range[1])-oe.c2p(Oe.range[0]))}).attr("x",function(Oe){return oe.c2p(Oe.range[0])}).attr("y",function(Oe){return .5*(1-Oe.thickness)*j}).attr("height",function(Oe){return Oe.thickness*j})}var fe=[q].concat(F.gauge.steps),me=Y.selectAll("g.bg-bullet").data(fe);me.enter().append("g").classed("bg-bullet",!0).append("rect"),me.select("rect").call(ie).call(x),me.exit().remove();var ce=Y.selectAll("g.value-bullet").data([F.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",Q).attr("y",(j-Q)/2).call(x),m(se)?ce.select("rect").transition().duration(se.duration).ease(se.easing).each("end",function(){ue&&ue()}).each("interrupt",function(){ue&&ue()}).attr("width",Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],D[0].y)))):ce.select("rect").attr("width",typeof D[0].y=="number"?Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],D[0].y))):0),ce.exit().remove();var ye=D.filter(function(){return F.gauge.threshold.value||F.gauge.threshold.value===0}),xe=Y.selectAll("g.threshold-bullet").data(ye);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",oe.c2p(F.gauge.threshold.value)).attr("x2",oe.c2p(F.gauge.threshold.value)).attr("y1",(1-F.gauge.threshold.thickness)/2*j).attr("y2",(1-(1-F.gauge.threshold.thickness)/2)*j).call(v.stroke,F.gauge.threshold.line.color).style("stroke-width",F.gauge.threshold.line.width),xe.exit().remove();var ke=Y.selectAll("g.gauge-outline").data([$]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(ie).call(x),ke.exit().remove()}function _(I,R,D,O){var F=D[0].trace,Y=O.size,X=O.radius,q=O.innerRadius,$=O.gaugeBg,V=O.gaugeOutline,K=[Y.l+Y.w/2,Y.t+Y.h/2+X/2],se=O.gauge,ue=O.layer,oe=O.transitionOpts,U=O.onComplete,G=Math.PI/2;function re(Re){var Ve=F.gauge.axis.range[0],dt=F.gauge.axis.range[1],Dt=(Re-Ve)/(dt-Ve)*Math.PI-G;return Dt<-G?-G:Dt>G?G:Dt}function ee(Re){return d.svg.arc().innerRadius((q+X)/2-Re/2*(X-q)).outerRadius((q+X)/2+Re/2*(X-q)).startAngle(-G)}function j(Re){Re.attr("d",function(Ve){return ee(Ve.thickness).startAngle(re(Ve.range[0])).endAngle(re(Ve.range[1]))()})}var Q,ne,ae,ie;se.enter().append("g").classed("angular",!0),se.attr("transform",o(K[0],K[1])),ue.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ue.selectAll("g.xangularaxistick,path,text").remove(),Q=L(I,F.gauge.axis),Q.type="linear",Q.range=F.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var fe=function(Re){return(Q.range[0]-Re.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},me={},ce=i.makeLabelFns(Q,0),ye=ce.labelStandoff;me.xFn=function(Re){var Ve=fe(Re);return Math.cos(Ve)*ye},me.yFn=function(Re){var Ve=fe(Re),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(ye+Re.fontSize*dt)+Math.abs(Math.cos(Ve))*(Re.fontSize*n)},me.anchorFn=function(Re){var Ve=fe(Re),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},me.heightFn=function(Re,Ve,dt){var Dt=fe(Re);return-.5*(1+Math.sin(Dt))*dt};var xe=function(Re){return o(K[0]+X*Math.cos(Re),K[1]-X*Math.sin(Re))};ae=function(Re){return xe(fe(Re))};var ke=function(Re){var Ve=fe(Re);return xe(Ve)+"rotate("+-a(Ve)+")"};if(ne=i.calcTicks(Q),ie=i.getTickSigns(Q)[2],Q.visible){ie=Q.ticks==="inside"?-1:1;var Ae=(Q.linewidth||1)/2;i.drawTicks(I,Q,{vals:ne,layer:ue,path:"M"+ie*Ae+",0h"+ie*Q.ticklen,transFn:ke}),i.drawLabels(I,Q,{vals:ne,layer:ue,transFn:ae,labelFns:me})}var Oe=[$].concat(F.gauge.steps),He=se.selectAll("g.bg-arc").data(Oe);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(j).call(x),He.exit().remove();var Ge=ee(F.gauge.bar.thickness),_e=se.selectAll("g.value-arc").data([F.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var Ie=_e.select("path");m(oe)?(Ie.transition().duration(oe.duration).ease(oe.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",c(Ge,re(D[0].lastY),re(D[0].y))),F._lastValue=D[0].y):Ie.attr("d",typeof D[0].y=="number"?Ge.endAngle(re(D[0].y)):"M0,0Z"),Ie.call(x),_e.exit().remove(),Oe=[];var Ye=F.gauge.threshold.value;(Ye||Ye===0)&&Oe.push({range:[Ye,Ye],color:F.gauge.threshold.color,line:{color:F.gauge.threshold.line.color,width:F.gauge.threshold.line.width},thickness:F.gauge.threshold.thickness});var qe=se.selectAll("g.threshold-arc").data(Oe);qe.enter().append("g").classed("threshold-arc",!0).append("path"),qe.select("path").call(j).call(x),qe.exit().remove();var Ue=se.selectAll("g.gauge-outline").data([V]);Ue.enter().append("g").classed("gauge-outline",!0).append("path"),Ue.select("path").call(j).call(x),Ue.exit().remove()}function T(I,R,D,O){var F=D[0].trace,Y=O.numbersX,X=O.numbersY,q=F.align||"center",$=y[q],V=O.transitionOpts,K=O.onComplete,se=w.ensureSingle(R,"g","numbers"),ue,oe,U,G=[];F._hasNumber&&G.push("number"),F._hasDelta&&(G.push("delta"),F.delta.position==="left"&&G.reverse());var re=se.selectAll("text").data(G);re.enter().append("text"),re.attr("text-anchor",function(){return $}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),re.exit().remove();function ee(xe,ke,Ae,Oe){if(xe.match("s")&&Ae>=0!=Oe>=0&&!ke(Ae).slice(-1).match(A)&&!ke(Oe).slice(-1).match(A)){var He=xe.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Ge=L(I,{tickformat:He});return function(_e){return Math.abs(_e)<1?i.tickText(Ge,_e).text:ke(_e)}}else return ke}function j(){var xe=L(I,{tickformat:F.number.valueformat},F._range);xe.setScale(),i.prepTicks(xe);var ke=function(_e){return i.tickText(xe,_e).text},Ae=F.number.suffix,Oe=F.number.prefix,He=se.select("text.number");function Ge(){var _e=typeof D[0].y=="number"?Oe+ke(D[0].y)+Ae:"-";He.text(_e).call(r.font,F.number.font).call(s.convertToTspans,I)}return m(V)?He.transition().duration(V.duration).ease(V.easing).each("end",function(){Ge(),K&&K()}).each("interrupt",function(){Ge(),K&&K()}).attrTween("text",function(){var _e=d.select(this),Ie=b(D[0].lastY,D[0].y);F._lastValue=D[0].y;var Ye=ee(F.number.valueformat,ke,D[0].lastY,D[0].y);return function(qe){_e.text(Oe+Ye(Ie(qe))+Ae)}}):Ge(),ue=P(Oe+ke(D[0].y)+Ae,F.number.font,$,I),He}function Q(){var xe=L(I,{tickformat:F.delta.valueformat},F._range);xe.setScale(),i.prepTicks(xe);var ke=function(Ie){return i.tickText(xe,Ie).text},Ae=function(Ie){var Ye=F.delta.relative?Ie.relativeDelta:Ie.delta;return Ye},Oe=function(Ie,Ye){return Ie===0||typeof Ie!="number"||isNaN(Ie)?"-":(Ie>0?F.delta.increasing.symbol:F.delta.decreasing.symbol)+Ye(Ie)},He=function(Ie){return Ie.delta>=0?F.delta.increasing.color:F.delta.decreasing.color};F._deltaLastValue===void 0&&(F._deltaLastValue=Ae(D[0]));var Ge=se.select("text.delta");Ge.call(r.font,F.delta.font).call(v.fill,He({delta:F._deltaLastValue}));function _e(){Ge.text(Oe(Ae(D[0]),ke)).call(v.fill,He(D[0])).call(s.convertToTspans,I)}return m(V)?Ge.transition().duration(V.duration).ease(V.easing).tween("text",function(){var Ie=d.select(this),Ye=Ae(D[0]),qe=F._deltaLastValue,Ue=ee(F.delta.valueformat,ke,qe,Ye),Re=b(qe,Ye);return F._deltaLastValue=Ye,function(Ve){Ie.text(Oe(Re(Ve),Ue)),Ie.call(v.fill,He({delta:Re(Ve)}))}}).each("end",function(){_e(),K&&K()}).each("interrupt",function(){_e(),K&&K()}):_e(),oe=P(Oe(Ae(D[0]),ke),F.delta.font,$,I),Ge}var ne=F.mode+F.align,ae;if(F._hasDelta&&(ae=Q(),ne+=F.delta.position+F.delta.font.size+F.delta.font.family+F.delta.valueformat,ne+=F.delta.increasing.symbol+F.delta.decreasing.symbol,U=oe),F._hasNumber&&(j(),ne+=F.number.font.size+F.number.font.family+F.number.valueformat+F.number.suffix+F.number.prefix,U=ue),F._hasDelta&&F._hasNumber){var ie=[(ue.left+ue.right)/2,(ue.top+ue.bottom)/2],fe=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],me,ce,ye=.75*F.delta.font.size;F.delta.position==="left"&&(me=z(F,"deltaPos",0,-1*(ue.width*g[F.align]+oe.width*(1-g[F.align])+ye),ne,Math.min),ce=ie[1]-fe[1],U={width:ue.width+oe.width+ye,height:Math.max(ue.height,oe.height),left:oe.left+me,right:ue.right,top:Math.min(ue.top,oe.top+ce),bottom:Math.max(ue.bottom,oe.bottom+ce)}),F.delta.position==="right"&&(me=z(F,"deltaPos",0,ue.width*(1-g[F.align])+oe.width*g[F.align]+ye,ne,Math.max),ce=ie[1]-fe[1],U={width:ue.width+oe.width+ye,height:Math.max(ue.height,oe.height),left:ue.left,right:oe.right+me,top:Math.min(ue.top,oe.top+ce),bottom:Math.max(ue.bottom,oe.bottom+ce)}),F.delta.position==="bottom"&&(me=null,ce=oe.height,U={width:Math.max(ue.width,oe.width),height:ue.height+oe.height,left:Math.min(ue.left,oe.left),right:Math.max(ue.right,oe.right),top:ue.bottom-ue.height,bottom:ue.bottom+oe.height}),F.delta.position==="top"&&(me=null,ce=ue.top,U={width:Math.max(ue.width,oe.width),height:ue.height+oe.height,left:Math.min(ue.left,oe.left),right:Math.max(ue.right,oe.right),top:ue.bottom-ue.height-oe.height,bottom:ue.bottom}),ae.attr({dx:me,dy:ce})}(F._hasNumber||F._hasDelta)&&se.attr("transform",function(){var xe=O.numbersScaler(U);ne+=xe[2];var ke=z(F,"numbersScale",1,xe[0],ne,Math.min),Ae;F._scaleNumbers||(ke=1),F._isAngular?Ae=X-ke*U.bottom:Ae=X-ke*(U.top+U.bottom)/2,F._numbersTop=ke*U.top+Ae;var Oe=U[q];q==="center"&&(Oe=(U.left+U.right)/2);var He=Y-ke*Oe;return He=z(F,"numbersTranslate",0,He,ne,Math.max),o(He,Ae)+e(ke)})}function x(I){I.each(function(R){v.stroke(d.select(this),R.line.color)}).each(function(R){v.fill(d.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function c(I,R,D){return function(){var O=l(R,D);return function(F){return I.endAngle(O(F))()}}}function L(I,R,D){var O=I._fullLayout,F=w.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},R),Y={type:"linear",_id:"x"+R._id},X={letter:"x",font:O.font,noHover:!0,noTickson:!0};function q($,V){return w.coerce(F,Y,p,$,V)}return f(F,Y,q,X,O),h(F,Y,q,X),Y}function S(I,R,D){var O=Math.min(R/I.width,D/I.height);return[O,I,R+"x"+D]}function k(I,R){var D=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=R/D;return[O,I,R]}function P(I,R,D,O){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),Y=d.select(F);return Y.text(I).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",I).call(s.convertToTspans,O).call(r.font,R),r.bBox(Y.node())}function z(I,R,D,O,F,Y){var X="_cache"+R;I[X]&&I[X].key===F||(I[X]={key:F,value:D});var q=w.aggNums(Y,null,[I[X].value,O],2);return I[X].value=q,q}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;function n(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var u=B.exports=a(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),valuehoverformat:l("value",1),showlegend:o({},e.showlegend,{dflt:!1})},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");u.flatshading.dflt=!0,u.lighting.facenormalsepsilon.dflt=0,u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(t,B,H){var d=t("../../components/colorscale/calc"),l=t("../streamtube/calc").processGrid,b=t("../streamtube/calc").filter;B.exports=function(e,o){o._len=Math.min(o.x.length,o.y.length,o.z.length,o.value.length),o._x=b(o.x,o._len),o._y=b(o.y,o._len),o._z=b(o.z,o._len),o._value=b(o.value,o._len);var a=l(o);o._gridFill=a.fill,o._Xs=a.Xs,o._Ys=a.Ys,o._Zs=a.Zs,o._len=a.len;for(var n=1/0,r=-1/0,u=0;u<o._len;u++){var s=o._value[u];n=Math.min(n,s),r=Math.max(r,s)}o._minValues=n,o._maxValues=r,o._vMin=o.isomin===void 0||o.isomin===null?n:o.isomin,o._vMax=o.isomax===void 0||o.isomin===null?r:o.isomax,d(e,o,{vals:[o._vMin,o._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../lib/gl_format_color").parseColorScale,b=t("../../lib/str2rgbarray"),w=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),o=function(i,f){for(var h=f.length-1;h>0;h--){var p=Math.min(f[h],f[h-1]),v=Math.max(f[h],f[h-1]);if(v>p&&p<i&&i<=v)return{id:h,distRatio:(v-i)/(v-p)}}return{id:0,distRatio:0}};function a(i,f,h){this.scene=i,this.uid=h,this.mesh=f,this.name="",this.data=null,this.showContour=!1}var n=a.prototype;n.handlePick=function(i){if(i.object===this.mesh){var f=i.data.index,h=this.data._meshX[f],p=this.data._meshY[f],v=this.data._meshZ[f],y=this.data._Ys.length,g=this.data._Zs.length,A=o(h,this.data._Xs).id,m=o(p,this.data._Ys).id,M=o(v,this.data._Zs).id,_=i.index=M+g*m+g*y*A;i.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[_]!==void 0?i.textLabel=T[_]:T&&(i.textLabel=T),!0}},n.update=function(i){var f=this.scene,h=f.fullSceneLayout;this.data=u(i);function p(m,M,_,T){return M.map(function(x){return m.d2l(x,0,T)*_})}var v=e(p(h.xaxis,i._meshX,f.dataScale[0],i.xcalendar),p(h.yaxis,i._meshY,f.dataScale[1],i.ycalendar),p(h.zaxis,i._meshZ,f.dataScale[2],i.zcalendar)),y=e(i._meshI,i._meshJ,i._meshK),g={positions:v,cells:y,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:b(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},A=w(i);g.vertexIntensity=i._meshIntensity,g.vertexIntensityBounds=[A.min,A.max],g.colormap=l(i),this.mesh.update(g)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function u(i){i._meshI=[],i._meshJ=[],i._meshK=[];var f=i.surface.show,h=i.spaceframe.show,p=i.surface.fill,v=i.spaceframe.fill,y=!1,g=!1,A=0,m,M,_=i._Xs,T=i._Ys,x=i._Zs,c=_.length,L=T.length,S=x.length,k=r.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Lt,Mt,it){switch(k){case 5:return it+S*Mt+S*L*Lt;case 4:return it+S*Lt+S*c*Mt;case 3:return Mt+L*it+L*S*Lt;case 2:return Mt+L*Lt+L*c*it;case 1:return Lt+c*it+c*S*Mt;default:return Lt+c*Mt+c*L*it}},z=i._minValues,I=i._maxValues,R=i._vMin,D=i._vMax,O,F,Y,X;function q(Lt,Mt,it){for(var ht=X.length,Qe=M;Qe<ht;Qe++)if(Lt===O[Qe]&&Mt===F[Qe]&&it===Y[Qe])return Qe;return-1}function $(){M=m}function V(){O=[],F=[],Y=[],X=[],m=0,$()}function K(Lt,Mt,it,ht){return O.push(Lt),F.push(Mt),Y.push(it),X.push(ht),m++,m-1}function se(Lt,Mt,it){return i._meshI.push(Lt),i._meshJ.push(Mt),i._meshK.push(it),A++,A-1}function ue(Lt,Mt,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=(Lt[Qe]+Mt[Qe]+it[Qe])/3;return ht}function oe(Lt,Mt,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=Lt[Qe]*(1-it)+it*Mt[Qe];return ht}var U;function G(Lt){U=Lt}function re(Lt,Mt){var it=Lt[0],ht=Lt[1],Qe=Lt[2],Ce=ue(it,ht,Qe),je=Math.sqrt(1-U),rt=oe(Ce,it,je),ut=oe(Ce,ht,je),Pt=oe(Ce,Qe,je),St=Mt[0],Nt=Mt[1],Xt=Mt[2];return{xyzv:[[it,ht,ut],[ut,rt,it],[ht,Qe,Pt],[Pt,ut,ht],[Qe,it,rt],[rt,Pt,Qe]],abc:[[St,Nt,-1],[-1,-1,St],[Nt,Xt,-1],[-1,-1,Nt],[Xt,St,-1],[-1,-1,Xt]]}}function ee(Lt,Mt){return Lt==="all"||Lt===null?!0:Lt.indexOf(Mt)>-1}function j(Lt,Mt){return Lt===null?Mt:Lt}function Q(Lt,Mt,it){$();var ht=[Mt],Qe=[it];if(U>=1)ht=[Mt],Qe=[it];else if(U>0){var Ce=re(Mt,it);ht=Ce.xyzv,Qe=Ce.abc}for(var je=0;je<ht.length;je++){Mt=ht[je],it=Qe[je];for(var rt=[],ut=0;ut<3;ut++){var Pt=Mt[ut][0],St=Mt[ut][1],Nt=Mt[ut][2],Xt=Mt[ut][3],Ot=it[ut]>-1?it[ut]:q(Pt,St,Nt);Ot>-1?rt[ut]=Ot:rt[ut]=K(Pt,St,Nt,j(Lt,Xt))}se(rt[0],rt[1],rt[2])}}function ne(Lt,Mt,it){var ht=function(Qe,Ce,je){Q(Lt,[Mt[Qe],Mt[Ce],Mt[je]],[it[Qe],it[Ce],it[je]])};ht(0,1,2),ht(2,3,0)}function ae(Lt,Mt,it){var ht=function(Qe,Ce,je){Q(Lt,[Mt[Qe],Mt[Ce],Mt[je]],[it[Qe],it[Ce],it[je]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}function ie(Lt,Mt,it,ht){var Qe=Lt[3];Qe<it&&(Qe=it),Qe>ht&&(Qe=ht);for(var Ce=(Lt[3]-Qe)/(Lt[3]-Mt[3]+1e-9),je=[],rt=0;rt<4;rt++)je[rt]=(1-Ce)*Lt[rt]+Ce*Mt[rt];return je}function fe(Lt,Mt,it){return Lt>=Mt&&Lt<=it}function me(Lt){var Mt=.001*(D-R);return Lt>=R-Mt&&Lt<=D+Mt}function ce(Lt){for(var Mt=[],it=0;it<4;it++){var ht=Lt[it];Mt.push([i._x[ht],i._y[ht],i._z[ht],i._value[ht]])}return Mt}var ye=3;function xe(Lt,Mt,it,ht,Qe,Ce){Ce||(Ce=1),it=[-1,-1,-1];var je=!1,rt=[fe(Mt[0][3],ht,Qe),fe(Mt[1][3],ht,Qe),fe(Mt[2][3],ht,Qe)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var ut=function(St,Nt,Xt){return me(Nt[0][3])&&me(Nt[1][3])&&me(Nt[2][3])?(Q(St,Nt,Xt),!0):Ce<ye?xe(St,Nt,Xt,R,D,++Ce):!1};if(rt[0]&&rt[1]&&rt[2])return ut(Lt,Mt,it)||je;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(St){if(rt[St[0]]&&rt[St[1]]&&!rt[St[2]]){var Nt=Mt[St[0]],Xt=Mt[St[1]],Ot=Mt[St[2]],Kt=ie(Ot,Nt,ht,Qe),Je=ie(Ot,Xt,ht,Qe);je=ut(Lt,[Je,Kt,Nt],[-1,-1,it[St[0]]])||je,je=ut(Lt,[Nt,Xt,Je],[it[St[0]],it[St[1]],-1])||je,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(St){if(rt[St[0]]&&!rt[St[1]]&&!rt[St[2]]){var Nt=Mt[St[0]],Xt=Mt[St[1]],Ot=Mt[St[2]],Kt=ie(Xt,Nt,ht,Qe),Je=ie(Ot,Nt,ht,Qe);je=ut(Lt,[Je,Kt,Nt],[-1,-1,it[St[0]]])||je,Pt=!0}}),je}function ke(Lt,Mt,it,ht){var Qe=!1,Ce=ce(Mt),je=[fe(Ce[0][3],it,ht),fe(Ce[1][3],it,ht),fe(Ce[2][3],it,ht),fe(Ce[3][3],it,ht)];if(!je[0]&&!je[1]&&!je[2]&&!je[3])return Qe;if(je[0]&&je[1]&&je[2]&&je[3])return g&&(Qe=ae(Lt,Ce,Mt)||Qe),Qe;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(je[ut[0]]&&je[ut[1]]&&je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],Xt=Ce[ut[3]];if(g)Qe=Q(Lt,[Pt,St,Nt],[Mt[ut[0]],Mt[ut[1]],Mt[ut[2]]])||Qe;else{var Ot=ie(Xt,Pt,it,ht),Kt=ie(Xt,St,it,ht),Je=ie(Xt,Nt,it,ht);Qe=Q(null,[Ot,Kt,Je],[-1,-1,-1])||Qe}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(je[ut[0]]&&je[ut[1]]&&!je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],Xt=Ce[ut[3]],Ot=ie(Nt,Pt,it,ht),Kt=ie(Nt,St,it,ht),Je=ie(Xt,St,it,ht),gt=ie(Xt,Pt,it,ht);g?(Qe=Q(Lt,[Pt,gt,Ot],[Mt[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[St,Kt,Je],[Mt[ut[1]],-1,-1])||Qe):Qe=ne(null,[Ot,Kt,Je,gt],[-1,-1,-1,-1])||Qe,rt=!0}}),rt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(je[ut[0]]&&!je[ut[1]]&&!je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],Xt=Ce[ut[3]],Ot=ie(St,Pt,it,ht),Kt=ie(Nt,Pt,it,ht),Je=ie(Xt,Pt,it,ht);g?(Qe=Q(Lt,[Pt,Ot,Kt],[Mt[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[Pt,Kt,Je],[Mt[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[Pt,Je,Ot],[Mt[ut[0]],-1,-1])||Qe):Qe=Q(null,[Ot,Kt,Je],[-1,-1,-1])||Qe,rt=!0}}),Qe}function Ae(Lt,Mt,it,ht,Qe,Ce,je,rt,ut,Pt,St){var Nt=!1;return y&&(ee(Lt,"A")&&(Nt=ke(null,[Mt,it,ht,Ce],Pt,St)||Nt),ee(Lt,"B")&&(Nt=ke(null,[it,ht,Qe,ut],Pt,St)||Nt),ee(Lt,"C")&&(Nt=ke(null,[it,Ce,je,ut],Pt,St)||Nt),ee(Lt,"D")&&(Nt=ke(null,[ht,Ce,rt,ut],Pt,St)||Nt),ee(Lt,"E")&&(Nt=ke(null,[it,ht,Ce,ut],Pt,St)||Nt)),g&&(Nt=ke(Lt,[it,ht,Ce,ut],Pt,St)||Nt),Nt}function Oe(Lt,Mt,it,ht,Qe,Ce,je,rt){return[rt[0]===!0?!0:xe(Lt,ce([Mt,it,ht]),[Mt,it,ht],Ce,je),rt[1]===!0?!0:xe(Lt,ce([ht,Qe,Mt]),[ht,Qe,Mt],Ce,je)]}function He(Lt,Mt,it,ht,Qe,Ce,je,rt,ut){return rt?Oe(Lt,Mt,it,Qe,ht,Ce,je,ut):Oe(Lt,it,Qe,ht,Mt,Ce,je,ut)}function Ge(Lt,Mt,it,ht,Qe,Ce,je){var rt=!1,ut,Pt,St,Nt,Xt=function(){rt=xe(Lt,[ut,Pt,St],[-1,-1,-1],Qe,Ce)||rt,rt=xe(Lt,[St,Nt,ut],[-1,-1,-1],Qe,Ce)||rt},Ot=je[0],Kt=je[1],Je=je[2];return Ot&&(ut=oe(ce([P(Mt,it-0,ht-0)])[0],ce([P(Mt-1,it-0,ht-0)])[0],Ot),Pt=oe(ce([P(Mt,it-0,ht-1)])[0],ce([P(Mt-1,it-0,ht-1)])[0],Ot),St=oe(ce([P(Mt,it-1,ht-1)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Ot),Nt=oe(ce([P(Mt,it-1,ht-0)])[0],ce([P(Mt-1,it-1,ht-0)])[0],Ot),Xt()),Kt&&(ut=oe(ce([P(Mt-0,it,ht-0)])[0],ce([P(Mt-0,it-1,ht-0)])[0],Kt),Pt=oe(ce([P(Mt-0,it,ht-1)])[0],ce([P(Mt-0,it-1,ht-1)])[0],Kt),St=oe(ce([P(Mt-1,it,ht-1)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Kt),Nt=oe(ce([P(Mt-1,it,ht-0)])[0],ce([P(Mt-1,it-1,ht-0)])[0],Kt),Xt()),Je&&(ut=oe(ce([P(Mt-0,it-0,ht)])[0],ce([P(Mt-0,it-0,ht-1)])[0],Je),Pt=oe(ce([P(Mt-0,it-1,ht)])[0],ce([P(Mt-0,it-1,ht-1)])[0],Je),St=oe(ce([P(Mt-1,it-1,ht)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Je),Nt=oe(ce([P(Mt-1,it-0,ht)])[0],ce([P(Mt-1,it-0,ht-1)])[0],Je),Xt()),rt}function _e(Lt,Mt,it,ht,Qe,Ce,je,rt,ut,Pt,St,Nt){var Xt=Lt;return Nt?(y&&Lt==="even"&&(Xt=null),Ae(Xt,Mt,it,ht,Qe,Ce,je,rt,ut,Pt,St)):(y&&Lt==="odd"&&(Xt=null),Ae(Xt,ut,rt,je,Ce,Qe,ht,it,Mt,Pt,St))}function Ie(Lt,Mt,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<S;Pt++)for(var St=1;St<L;St++)Ce.push(He(Lt,P(ut,St-1,Pt-1),P(ut,St-1,Pt),P(ut,St,Pt-1),P(ut,St,Pt),it,ht,(ut+St+Pt)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function Ye(Lt,Mt,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<c;Pt++)for(var St=1;St<S;St++)Ce.push(He(Lt,P(Pt-1,ut,St-1),P(Pt,ut,St-1),P(Pt-1,ut,St),P(Pt,ut,St),it,ht,(Pt+ut+St)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function qe(Lt,Mt,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<L;Pt++)for(var St=1;St<c;St++)Ce.push(He(Lt,P(St-1,Pt-1,ut),P(St-1,Pt,ut),P(St,Pt-1,ut),P(St,Pt,ut),it,ht,(St+Pt+ut)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function Ue(Lt,Mt,it){for(var ht=1;ht<S;ht++)for(var Qe=1;Qe<L;Qe++)for(var Ce=1;Ce<c;Ce++)_e(Lt,P(Ce-1,Qe-1,ht-1),P(Ce-1,Qe-1,ht),P(Ce-1,Qe,ht-1),P(Ce-1,Qe,ht),P(Ce,Qe-1,ht-1),P(Ce,Qe-1,ht),P(Ce,Qe,ht-1),P(Ce,Qe,ht),Mt,it,(Ce+Qe+ht)%2)}function Re(Lt,Mt,it){g=!0,Ue(Lt,Mt,it),g=!1}function Ve(Lt,Mt,it){y=!0,Ue(Lt,Mt,it),y=!1}function dt(Lt,Mt,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<S;St++)for(var Nt=1;Nt<L;Nt++)je.push(Ge(Lt,Pt,Nt,St,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function Dt(Lt,Mt,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<c;St++)for(var Nt=1;Nt<S;Nt++)je.push(Ge(Lt,St,Pt,Nt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function Gt(Lt,Mt,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<L;St++)for(var Nt=1;Nt<c;Nt++)je.push(Ge(Lt,Nt,St,Pt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function kt(Lt,Mt){for(var it=[],ht=Lt;ht<Mt;ht++)it.push(ht);return it}function zt(){for(var Lt=0;Lt<c;Lt++)for(var Mt=0;Mt<L;Mt++)for(var it=0;it<S;it++){var ht=P(Lt,Mt,it);K(i._x[ht],i._y[ht],i._z[ht],i._value[ht])}}function Bt(){V(),zt();var Lt=null;if(h&&v&&(G(v),Re(Lt,R,D)),f&&p){G(p);for(var Mt=i.surface.pattern,it=i.surface.count,ht=0;ht<it;ht++){var Qe=it===1?.5:ht/(it-1),Ce=(1-Qe)*R+Qe*D,je=Math.abs(Ce-z),rt=Math.abs(Ce-I),ut=je>rt?[z,Ce]:[Ce,I];Ve(Mt,ut[0],ut[1])}}var Pt=[[Math.min(R,I),Math.max(R,I)],[Math.min(z,D),Math.max(z,D)]];["x","y","z"].forEach(function(St){for(var Nt=[],Xt=0;Xt<Pt.length;Xt++){var Ot=0,Kt=Pt[Xt][0],Je=Pt[Xt][1],gt=i.slices[St];if(gt.show&&gt.fill){G(gt.fill);var Et=[],rr=[],vr=[];if(gt.locations.length)for(var or=0;or<gt.locations.length;or++){var dr=o(gt.locations[or],St==="x"?_:St==="y"?T:x);dr.distRatio===0?Et.push(dr.id):dr.id>0&&(rr.push(dr.id),St==="x"?vr.push([dr.distRatio,0,0]):St==="y"?vr.push([0,dr.distRatio,0]):vr.push([0,0,dr.distRatio]))}else St==="x"?Et=kt(1,c-1):St==="y"?Et=kt(1,L-1):Et=kt(1,S-1);rr.length>0&&(St==="x"?Nt[Ot]=dt(Lt,rr,Kt,Je,vr,Nt[Ot]):St==="y"?Nt[Ot]=Dt(Lt,rr,Kt,Je,vr,Nt[Ot]):Nt[Ot]=Gt(Lt,rr,Kt,Je,vr,Nt[Ot]),Ot++),Et.length>0&&(St==="x"?Nt[Ot]=Ie(Lt,Et,Kt,Je,Nt[Ot]):St==="y"?Nt[Ot]=Ye(Lt,Et,Kt,Je,Nt[Ot]):Nt[Ot]=qe(Lt,Et,Kt,Je,Nt[Ot]),Ot++)}var Lr=i.caps[St];Lr.show&&Lr.fill&&(G(Lr.fill),St==="x"?Nt[Ot]=Ie(Lt,[0,c-1],Kt,Je,Nt[Ot]):St==="y"?Nt[Ot]=Ye(Lt,[0,L-1],Kt,Je,Nt[Ot]):Nt[Ot]=qe(Lt,[0,S-1],Kt,Je,Nt[Ot]),Ot++)}}),A===0&&V(),i._meshX=O,i._meshY=F,i._meshZ=Y,i._meshIntensity=X,i._Xs=_,i._Ys=T,i._Zs=x}return Bt(),i}function s(i,f){var h=i.glplot.gl,p=d({gl:h}),v=new a(i,p,f.uid);return p._trace=v,v.update(f),i.glplot.add(p),v}B.exports={findNearestOnAxis:o,generateIsoMeshes:u,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./attributes"),w=t("../../components/colorscale/defaults");function e(a,n,r,u){function s(i,f){return d.coerce(a,n,b,i,f)}o(a,n,r,u,s)}function o(a,n,r,u,s){var i=s("isomin"),f=s("isomax");f!=null&&i!==void 0&&i!==null&&i>f&&(n.isomin=null,n.isomax=null);var h=s("x"),p=s("y"),v=s("z"),y=s("value");if(!h||!h.length||!p||!p.length||!v||!v.length||!y||!y.length){n.visible=!1;return}var g=l.getComponentMethod("calendars","handleTraceDefaults");g(a,n,["x","y","z"],u),s("valuehoverformat"),["x","y","z"].forEach(function(_){s(_+"hoverformat");var T="caps."+_,x=s(T+".show");x&&s(T+".fill");var c="slices."+_,L=s(c+".show");L&&(s(c+".fill"),s(c+".locations"))});var A=s("spaceframe.show");A&&s("spaceframe.fill");var m=s("surface.show");m&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var M=s("contour.show");M&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){s(_)}),w(a,n,u,s,{prefix:"",cLetter:"c"}),n._length=null}B.exports={supplyDefaults:e,supplyIsoDefaults:o}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../surface/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat;B.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},d("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},w.contours.x.show,{}),color:w.contours.x.color,width:w.contours.x.width,editType:"calc"},lightposition:{x:o({},w.lightposition.x,{dflt:1e5}),y:o({},w.lightposition.y,{dflt:1e5}),z:o({},w.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},w.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){w.intensity&&d(b,w,{vals:w.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../../stackgl_modules").delaunay_triangulate,b=t("../../../stackgl_modules").alpha_shape,w=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,o=t("../../lib/str2rgbarray"),a=t("../../components/colorscale").extractOpts,n=t("../../plots/gl3d/zip3");function r(y,g,A){this.scene=y,this.uid=A,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var u=r.prototype;u.handlePick=function(y){if(y.object===this.mesh){var g=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[g],this.data.y[g],this.data.z[g]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[g]!==void 0?y.textLabel=A[g]:A&&(y.textLabel=A),!0}};function s(y){for(var g=[],A=y.length,m=0;m<A;m++)g[m]=o(y[m]);return g}function i(y,g,A,m){for(var M=[],_=g.length,T=0;T<_;T++)M[T]=y.d2l(g[T],0,m)*A;return M}function f(y){for(var g=[],A=y.length,m=0;m<A;m++)g[m]=Math.round(y[m]);return g}function h(y,g){for(var A=["x","y","z"].indexOf(y),m=[],M=g.length,_=0;_<M;_++)m[_]=[g[_][(A+1)%3],g[_][(A+2)%3]];return l(m)}function p(y,g){for(var A=y.length,m=0;m<A;m++)if(y[m]<=-.5||y[m]>=g-.5)return!1;return!0}u.update=function(y){var g=this.scene,A=g.fullSceneLayout;this.data=y;var m=y.x.length,M=n(i(A.xaxis,y.x,g.dataScale[0],y.xcalendar),i(A.yaxis,y.y,g.dataScale[1],y.ycalendar),i(A.zaxis,y.z,g.dataScale[2],y.zcalendar)),_;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!p(y.i,m)||!p(y.j,m)||!p(y.k,m))return;_=n(f(y.i),f(y.j),f(y.k))}else y.alphahull===0?_=w(M):y.alphahull>0?_=b(y.alphahull,M):_=h(y.delaunayaxis,M);var T={positions:M,cells:_,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:o(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var x=a(y);this.color="#fff";var c=y.intensitymode;T[c+"Intensity"]=y.intensity,T[c+"IntensityBounds"]=[x.min,x.max],T.colormap=e(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],T.vertexColors=s(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],T.cellColors=s(y.facecolor)):(this.color=y.color,T.meshColor=o(y.color));this.mesh.update(T)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(y,g){var A=y.glplot.gl,m=d({gl:A}),M=new r(y,m,g.uid);return m._trace=M,M.update(g),y.glplot.add(m),M}B.exports=v},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/colorscale/defaults"),w=t("./attributes");B.exports=function(o,a,n,r){function u(p,v){return l.coerce(o,a,w,p,v)}function s(p){var v=p.map(function(y){var g=u(y);return g&&l.isArrayOrTypedArray(g)?g:null});return v.every(function(y){return y&&y.length===v[0].length})&&v}var i=s(["x","y","z"]);if(!i){a.visible=!1;return}if(s(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var f=d.getComponentMethod("calendars","handleTraceDefaults");f(o,a,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(p){u(p)});var h=u("contour.show");h&&(u("contour.color"),u("contour.width")),"intensity"in o?(u("intensity"),u("intensitymode"),b(o,a,r,u,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in o?u("facecolor"):"vertexcolor"in o?u("vertexcolor"):u("color",n)),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(t,B,H){var d=t("../../lib").extendFlat,l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),o=t("../../constants/delta.js"),a=o.INCREASING.COLOR,n=o.DECREASING.COLOR,r=l.line;function u(s){return{line:{color:d({},r.color,{dflt:s}),width:r.width,dash:w,editType:"style"},editType:"style"}}B.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:d({},r.width,{}),dash:d({},w,{}),editType:"style"},increasing:u(a),decreasing:u(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:d({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(t,B,H){var d=t("../../lib"),l=d._,b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function o(u,s){var i=b.getFromId(u,s.xaxis),f=b.getFromId(u,s.yaxis),h=r(u,i,s),p=s._minDiff;s._minDiff=null;var v=s._origX;s._origX=null;var y=s._xcalc;s._xcalc=null;var g=n(u,s,v,y,f,a);return s._extremes[i._id]=b.findExtremes(i,y,{vpad:p/2}),g.length?(d.extendFlat(g[0].t,{wHover:p/2,tickLen:h}),g):[{t:{empty:!0}}]}function a(u,s,i,f){return{o:u,h:s,l:i,c:f}}function n(u,s,i,f,h,p){for(var v=h.makeCalcdata(s,"open"),y=h.makeCalcdata(s,"high"),g=h.makeCalcdata(s,"low"),A=h.makeCalcdata(s,"close"),m=Array.isArray(s.text),M=Array.isArray(s.hovertext),_=!0,T=null,x=!!s.xperiodalignment,c=[],L=0;L<f.length;L++){var S=f[L],k=v[L],P=y[L],z=g[L],I=A[L];if(S!==e&&k!==e&&P!==e&&z!==e&&I!==e){I===k?T!==null&&I!==T&&(_=I>T):_=I>k,T=I;var R=p(k,P,z,I);R.pos=S,R.yc=(k+I)/2,R.i=L,R.dir=_?"increasing":"decreasing",R.x=R.pos,R.y=[z,P],x&&(R.orig_p=i[L]),m&&(R.tx=s.text[L]),M&&(R.htx=s.hovertext[L]),c.push(R)}else c.push({pos:S,empty:!0})}return s._extremes[h._id]=b.findExtremes(h,d.concat(g,y),{padded:!0}),c.length&&(c[0].t={labels:{open:l(u,"open:")+" ",high:l(u,"high:")+" ",low:l(u,"low:")+" ",close:l(u,"close:")+" "}}),c}function r(u,s,i){var f=i._minDiff;if(!f){var h=u._fullData,p=[];f=1/0;var v;for(v=0;v<h.length;v++){var y=h[v];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===s._id){p.push(y);var g=s.makeCalcdata(y,"x");y._origX=g;var A=w(i,s,"x",g).vals;y._xcalc=A;var m=d.distinctVals(A).minDiff;m&&isFinite(m)&&(f=Math.min(f,m))}}for(f===1/0&&(f=1),v=0;v<p.length;v++)p[v]._minDiff=f}return f*i.tickwidth}B.exports={calc:o,calcCommon:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(t,B,H){var d=t("../../lib"),l=t("./ohlc_defaults"),b=t("../scatter/period_defaults"),w=t("./attributes");B.exports=function(a,n,r,u){function s(f,h){return d.coerce(a,n,w,f,h)}var i=l(a,n,s,u);if(!i){n.visible=!1;return}b(a,n,u,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(a,n,s,"increasing"),e(a,n,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),u._requestRangeslider[n.xaxis]=!0};function e(o,a,n,r){n(r+".line.color"),n(r+".line.width",a.line.width),n(r+".line.dash",a.line.dash)}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../components/fx"),w=t("../../components/color"),e=t("../../lib").fillText,o=t("../../constants/delta.js"),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function n(i,f,h,p){var v=i.cd,y=v[0].trace;return y.hoverlabel.split?u(i,f,h,p):s(i,f,h,p)}function r(i,f,h,p){var v=i.cd,y=i.xa,g=v[0].trace,A=v[0].t,m=g.type,M=m==="ohlc"?"l":"min",_=m==="ohlc"?"h":"max",T,x,c=A.bPos||0,L=function(q){return q.pos+c-f},S=A.bdPos||A.tickLen,k=A.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));T=i.maxHoverDistance-P,x=i.maxSpikeDistance-P;function z(q){var $=L(q);return b.inbox($-k,$+k,T)}function I(q){var $=q[M],V=q[_];return $===V||b.inbox($-h,V-h,T)}function R(q){return(z(q)+I(q))/2}var D=b.getDistanceFunction(p,z,I,R);if(b.getClosest(v,D,i),i.index===!1)return null;var O=v[i.index];if(O.empty)return null;var F=O.dir,Y=g[F],X=Y.line.color;return w.opacity(X)&&Y.line.width?i.color=X:i.color=Y.fillcolor,i.x0=y.c2p(O.pos+c-S,!0),i.x1=y.c2p(O.pos+c+S,!0),i.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,i.spikeDistance=R(O)*x/T,i.xSpike=y.c2p(O.pos,!0),i}function u(i,f,h,p){var v=i.cd,y=i.ya,g=v[0].trace,A=v[0].t,m=[],M=r(i,f,h,p);if(!M)return[];var _=M.index,T=v[_],x=T.hi||g.hoverinfo,c=x.split("+"),L=x==="all",S=L||c.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},z=0;z<k.length;z++){var I=k[z],R=g[I][M.index],D=y.c2p(R,!0),O;R in P?(O=P[R],O.yLabel+="<br>"+A.labels[I]+d.hoverLabelText(y,R,g.yhoverformat)):(O=l.extendFlat({},M),O.y0=O.y1=D,O.yLabelVal=R,O.yLabel=A.labels[I]+d.hoverLabelText(y,R,g.yhoverformat),O.name="",m.push(O),P[R]=O)}return m}function s(i,f,h,p){var v=i.cd,y=i.ya,g=v[0].trace,A=v[0].t,m=r(i,f,h,p);if(!m)return[];var M=m.index,_=v[M],T=m.index=_.i,x=_.dir;function c(R){return A.labels[R]+d.hoverLabelText(y,g[R][T],g.yhoverformat)}var L=_.hi||g.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,z=k||S.indexOf("text")!==-1,I=P?[c("open"),c("high"),c("low"),c("close")+"  "+a[x]]:[];return z&&e(_,g,I),m.extraText=I.join("<br>"),m.y0=m.y1=y.c2p(_.yc,!0),[m]}B.exports={hoverPoints:n,hoverSplit:u,hoverOnPoints:s}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(t,B,H){B.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports=function(w,e,o,a){var n=o("x"),r=o("open"),u=o("high"),s=o("low"),i=o("close");o("hoverlabel.split");var f=d.getComponentMethod("calendars","handleTraceDefaults");if(f(w,e,["x"],a),!!(r&&u&&s&&i)){var h=Math.min(r.length,u.length,s.length,i.length);return n&&(h=Math.min(h,l.minRowLength(n))),e._length=h,h}}},{"../../lib":503,"../../registry":638}],878:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib");B.exports=function(w,e,o,a){var n=e.yaxis,r=e.xaxis,u=!!r.rangebreaks;l.makeTraceGroups(a,o,"trace ohlc").each(function(s){var i=d.select(this),f=s[0],h=f.t,p=f.trace;if(p.visible!==!0||h.empty){i.remove();return}var v=h.tickLen,y=i.selectAll("path").data(l.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(g){if(g.empty)return"M0,0Z";var A=r.c2p(g.pos-v,!0),m=r.c2p(g.pos+v,!0),M=u?(A+m)/2:r.c2p(g.pos,!0),_=n.c2p(g.o,!0),T=n.c2p(g.h,!0),x=n.c2p(g.l,!0),c=n.c2p(g.c,!0);return"M"+A+","+_+"H"+M+"M"+M+","+T+"V"+x+"M"+m+","+c+"H"+M})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],n,r=w[0].t.bPos||0;if(b===!1)for(n=0;n<w.length;n++)w[n].selected=0;else for(n=0;n<w.length;n++){var u=w[n];b.contains([e.c2p(u.pos+r),o.c2p(u.yc)],null,u.i,l)?(a.push({pointNumber:u.i,x:e.c2d(u.pos),y:o.c2d(u.yc)}),u.selected=1):u.selected=0}return a}},{}],880:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color");B.exports=function(e,o,a){var n=a||d.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var u=r[0].trace;d.select(this).selectAll("path").each(function(s){if(!s.empty){var i=u[s.dir].line;d.select(this).style("fill","none").call(b.stroke,i.color).call(l.dashLine,i.dash,i.width).style("opacity",u.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("../../plots/attributes"),b=t("../../plots/font_attributes"),w=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/domain").attributes,a=d({editType:"calc"},w("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});B.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:d({},l.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(t,B,H){var d=t("../../plots/get_data").getModuleCalcData,l=t("./plot"),b="parcats";H.name=b,H.plot=function(w,e,o,a){var n=d(w.calcdata,b);if(n.length){var r=n[0];l(w,r,o,a)}},H.clean=function(w,e,o,a){var n=a._has&&a._has("parcats"),r=e._has&&e._has("parcats");n&&!r&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(t,B,H){var d=t("../../lib/gup").wrap,l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/calc"),w=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),o=t("../../lib"),a=t("fast-isnumeric");B.exports=function(A,m){var M=o.filterVisible(m.dimensions);if(M.length===0)return[];var _=M.map(function(ue){var oe;if(ue.categoryorder==="trace")oe=null;else if(ue.categoryorder==="array")oe=ue.categoryarray;else{oe=w(ue.values);for(var U=!0,G=0;G<oe.length;G++)if(!a(oe[G])){U=!1;break}oe.sort(U?o.sorterAsc:void 0),ue.categoryorder==="category descending"&&(oe=oe.reverse())}return h(ue.values,oe)}),T,x,c;o.isArrayOrTypedArray(m.counts)?T=m.counts:T=[m.counts],p(M),M.forEach(function(ue,oe){v(ue,_[oe])});var L=m.line,S;L?(l(m,"line")&&b(A,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(L)):S=o.identity;function k(ue){var oe,U;return o.isArrayOrTypedArray(L.color)?(oe=L.color[ue%L.color.length],U=oe):oe=L.color,{color:S(oe),rawColor:U}}var P=M[0].values.length,z={},I=_.map(function(ue){return ue.inds});c=0;var R,D;for(R=0;R<P;R++){var O=[];for(D=0;D<I.length;D++)O.push(I[D][R]);x=T[R%T.length],c+=x;var F=k(R),Y=O+"-"+F.rawColor;z[Y]===void 0&&(z[Y]=i(O,F.color,F.rawColor)),f(z[Y],R,x)}var X=M.map(function(ue,oe){return r(oe,ue._index,ue._displayindex,ue.label,c)});for(R=0;R<P;R++)for(x=T[R%T.length],D=0;D<X.length;D++){var q=X[D].containerInd,$=_[D].inds[R],V=X[D].categories;if(V[$]===void 0){var K=m.dimensions[q]._categoryarray[$],se=m.dimensions[q]._ticktext[$];V[$]=u(D,$,K,se)}s(V[$],R,x)}return d(n(X,z,c))};function n(g,A,m){var M=g.map(function(_){return _.categories.length}).reduce(function(_,T){return Math.max(_,T)});return{dimensions:g,paths:A,trace:void 0,maxCats:M,count:m}}function r(g,A,m,M,_){return{dimensionInd:g,containerInd:A,displayInd:m,dimensionLabel:M,count:_,categories:[],dragX:null}}function u(g,A,m,M){return{dimensionInd:g,categoryInd:A,categoryValue:m,displayInd:A,categoryLabel:M,valueInds:[],count:0,dragY:null}}function s(g,A,m){g.valueInds.push(A),g.count+=m}function i(g,A,m){return{categoryInds:g,color:A,rawColor:m,valueInds:[],count:0}}function f(g,A,m){g.valueInds.push(A),g.count+=m}function h(g,A){A==null?A=[]:A=A.map(function(S){return S});var m={},M={},_=[];A.forEach(function(S,k){m[S]=0,M[S]=k});for(var T=0;T<g.length;T++){var x=g[T],c;m[x]===void 0?(m[x]=1,c=A.push(x)-1,M[x]=c):(m[x]++,c=M[x]),_.push(c)}var L=A.map(function(S){return m[S]});return{uniqueValues:A,uniqueCounts:L,inds:_}}function p(g){var A=g.map(function(M){return M.displayindex}),m;if(y(A))for(m=0;m<g.length;m++)g[m]._displayindex=g[m].displayindex;else for(m=0;m<g.length;m++)g[m]._displayindex=m}function v(g,A){g._categoryarray=A.uniqueValues,g.ticktext===null||g.ticktext===void 0?g._ticktext=[]:g._ticktext=g.ticktext.slice();for(var m=g._ticktext.length;m<A.uniqueValues.length;m++)g._ticktext.push(A.uniqueValues[m])}function y(g){for(var A=new Array(g.length),m=0;m<g.length;m++){if(g[m]<0||g[m]>=g.length||A[g[m]]!==void 0)return!1;A[g[m]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("../parcoords/merge_length");function n(u,s,i,f,h){h("line.shape"),h("line.hovertemplate");var p=h("line.color",f.colorway[0]);if(l(u,"line")&&d.isArrayOrTypedArray(p)){if(p.length)return h("line.colorscale"),b(u,s,f,h,{prefix:"line.",cLetter:"c"}),p.length;s.line.color=i}return 1/0}function r(u,s){function i(A,m){return d.coerce(u,s,o.dimensions,A,m)}var f=i("values"),h=i("visible");if(f&&f.length||(h=s.visible=!1),h){i("label"),i("displayindex",s._index);var p=u.categoryarray,v=Array.isArray(p)&&p.length>0,y;v&&(y="array");var g=i("categoryorder",y);g==="array"?(i("categoryarray"),i("ticktext")):(delete u.categoryarray,delete u.ticktext),!v&&g==="array"&&(s.categoryorder="trace")}}B.exports=function(s,i,f,h){function p(m,M){return d.coerce(s,i,o,m,M)}var v=e(s,i,{name:"dimensions",handleItemDefaults:r}),y=n(s,i,f,h,p);w(i,h,p),(!Array.isArray(v)||!v.length)&&(i.visible=!1),a(i,v,"values",y),p("hoveron"),p("hovertemplate"),p("arrangement"),p("bundlecolors"),p("sortpaths"),p("counts");var g={family:h.font.family,size:Math.round(h.font.size),color:h.font.color};d.coerceFont(p,"labelfont",g);var A={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};d.coerceFont(p,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolateNumber,b=t("../../plot_api/plot_api"),w=t("../../components/fx"),e=t("../../lib"),o=e.strTranslate,a=t("../../components/drawing"),n=t("tinycolor2"),r=t("../../lib/svg_text_utils");function u(G,re,ee,j){var Q=G.map(K.bind(0,re,ee)),ne=j.selectAll("g.parcatslayer").data([null]);ne.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ae=ne.selectAll("g.trace.parcats").data(Q,s),ie=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(_e){return o(_e.x,_e.y)}),ie.append("g").attr("class","paths");var fe=ae.select("g.paths"),me=fe.selectAll("path.path").data(function(_e){return _e.paths},s);me.attr("fill",function(_e){return _e.model.color});var ce=me.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(_e){return _e.model.color}).attr("fill-opacity",0);A(ce),me.attr("d",function(_e){return _e.svgD}),ce.empty()||me.sort(f),me.exit().remove(),me.on("mouseover",h).on("mouseout",p).on("click",g),ie.append("g").attr("class","dimensions");var ye=ae.select("g.dimensions"),xe=ye.selectAll("g.dimension").data(function(_e){return _e.dimensions},s);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(_e){return o(_e.x,0)}),xe.exit().remove();var ke=xe.selectAll("g.category").data(function(_e){return _e.categories},s),Ae=ke.enter().append("g").attr("class","category");ke.attr("transform",function(_e){return o(0,_e.y)}),Ae.append("rect").attr("class","catrect").attr("pointer-events","none"),ke.select("rect.catrect").attr("fill","none").attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),_(Ae);var Oe=ke.selectAll("rect.bandrect").data(function(_e){return _e.bands},s);Oe.each(function(){e.raiseToTop(this)}),Oe.attr("fill",function(_e){return _e.color});var He=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(_e){return _e.color}).attr("fill-opacity",0);Oe.attr("fill",function(_e){return _e.color}).attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}).attr("y",function(_e){return _e.y}).attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":_e.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),x(He),Oe.exit().remove(),Ae.append("text").attr("class","catlabel").attr("pointer-events","none");var Ge=re._fullLayout.paper_bgcolor;ke.select("text.catlabel").attr("text-anchor",function(_e){return i(_e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ge)).style("fill","rgb(0, 0, 0)").attr("x",function(_e){return i(_e)?_e.width+5:-5}).attr("y",function(_e){return _e.height/2}).text(function(_e){return _e.model.categoryLabel}).each(function(_e){a.font(d.select(this),_e.parcatsViewModel.categorylabelfont),r.convertToTspans(d.select(this),re)}),Ae.append("text").attr("class","dimlabel"),ke.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(_e){return _e.width/2}).attr("y",-5).text(function(_e,Ie){return Ie===0?_e.parcatsViewModel.model.dimensions[_e.model.dimensionInd].dimensionLabel:null}).each(function(_e){a.font(d.select(this),_e.parcatsViewModel.labelfont)}),ke.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",O),ke.exit().remove(),xe.call(d.behavior.drag().origin(function(_e){return{x:_e.x,y:0}}).on("dragstart",F).on("drag",Y).on("dragend",X)),ae.each(function(_e){_e.traceSelection=d.select(this),_e.pathSelection=d.select(this).selectAll("g.paths").selectAll("path.path"),_e.dimensionSelection=d.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}B.exports=function(G,re,ee,j){u(ee,G,j,re)};function s(G){return G.key}function i(G){var re=G.parcatsViewModel.dimensions.length,ee=G.parcatsViewModel.dimensions[re-1].model.dimensionInd;return G.model.dimensionInd===ee}function f(G,re){return G.model.rawColor>re.model.rawColor?1:G.model.rawColor<re.model.rawColor?-1:0}function h(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),m(d.select(this));var re=v(G),ee=y(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:re,event:d.event,constraints:ee}),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var j=d.mouse(this)[0],Q=G.parcatsViewModel.graphDiv,ne=G.parcatsViewModel.trace,ae=Q._fullLayout,ie=ae._paperdiv.node().getBoundingClientRect(),fe=G.parcatsViewModel.graphDiv.getBoundingClientRect(),me,ce,ye;for(ye=0;ye<G.leftXs.length-1;ye++)if(G.leftXs[ye]+G.dimWidths[ye]-2<=j&&j<=G.leftXs[ye+1]+2){var xe=G.parcatsViewModel.dimensions[ye],ke=G.parcatsViewModel.dimensions[ye+1];me=(xe.x+xe.width+ke.x)/2,ce=(G.topYs[ye]+G.topYs[ye+1]+G.height)/2;break}var Ae=G.parcatsViewModel.x+me,Oe=G.parcatsViewModel.y+ce,He=n.mostReadable(G.model.color,["black","white"]),Ge=G.model.count,_e=Ge/G.parcatsViewModel.model.count,Ie={countLabel:Ge,probabilityLabel:_e.toFixed(3)},Ye=[];G.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ye.push(["Count:",Ie.countLabel].join(" ")),G.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ye.push(["P:",Ie.probabilityLabel].join(" "));var qe=Ye.join("<br>"),Ue=d.mouse(Q)[0];w.loneHover({trace:ne,x:Ae-ie.left+fe.left,y:Oe-ie.top+fe.top,text:qe,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:He,idealAlign:Ue<Ae?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:Ie,eventData:[{data:ne._input,fullData:ne,count:Ge,probability:_e}]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:Q})}}}function p(G){if(!G.parcatsViewModel.dragDimension&&(A(d.select(this)),w.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(f),G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var re=v(G),ee=y(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:re,event:d.event,constraints:ee})}}function v(G){for(var re=[],ee=q(G.parcatsViewModel),j=0;j<G.model.valueInds.length;j++){var Q=G.model.valueInds[j];re.push({curveNumber:ee,pointNumber:Q})}return re}function y(G){for(var re={},ee=G.parcatsViewModel.model.dimensions,j=0;j<ee.length;j++){var Q=ee[j],ne=Q.categories[G.model.categoryInds[j]];re[Q.containerInd]=ne.categoryValue}return G.model.rawColor!==void 0&&(re.color=G.model.rawColor),re}function g(G){if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var re=v(G),ee=y(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:re,event:d.event,constraints:ee})}}function A(G){G.attr("fill",function(re){return re.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(G){G.attr("fill-opacity",.8).attr("stroke",function(re){return n.mostReadable(re.model.color,["black","white"])}).attr("stroke-width",.3)}function M(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function T(G){G.attr("stroke","black").attr("stroke-width",1.5)}function x(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function c(G){var re=G.parcatsViewModel.pathSelection,ee=G.categoryViewModel.model.dimensionInd,j=G.categoryViewModel.model.categoryInd;return re.filter(function(Q){return Q.model.categoryInds[ee]===j&&Q.model.color===G.color})}function L(G){var re=d.select(G.parentNode).selectAll("rect.bandrect");re.each(function(ee){var j=c(ee);m(j),j.each(function(){e.raiseToTop(this)})}),M(d.select(G.parentNode))}function S(G){var re=d.select(G).datum(),ee=c(re);m(ee),ee.each(function(){e.raiseToTop(this)}),d.select(G.parentNode).selectAll("rect.bandrect").filter(function(j){return j.color===re.color}).each(function(){e.raiseToTop(this),T(d.select(this))})}function k(G,re,ee){var j=d.select(G).datum(),Q=j.categoryViewModel.model,ne=j.parcatsViewModel.graphDiv,ae=d.select(G.parentNode).selectAll("rect.bandrect"),ie=[];ae.each(function(me){var ce=c(me);ce.each(function(ye){Array.prototype.push.apply(ie,v(ye))})});var fe={};fe[Q.dimensionInd]=Q.categoryValue,ne.emit(re,{points:ie,event:ee,constraints:fe})}function P(G,re,ee){var j=d.select(G).datum(),Q=j.categoryViewModel.model,ne=j.parcatsViewModel.graphDiv,ae=c(j),ie=[];ae.each(function(me){Array.prototype.push.apply(ie,v(me))});var fe={};fe[Q.dimensionInd]=Q.categoryValue,j.rawColor!==void 0&&(fe.color=j.rawColor),ne.emit(re,{points:ie,event:ee,constraints:fe})}function z(G,re,ee){G._fullLayout._calcInverseTransform(G);var j=G._fullLayout._invScaleX,Q=G._fullLayout._invScaleY,ne=d.select(ee.parentNode).select("rect.catrect"),ae=ne.node().getBoundingClientRect(),ie=ne.datum(),fe=ie.parcatsViewModel,me=fe.model.dimensions[ie.model.dimensionInd],ce=fe.trace,ye=ae.top+ae.height/2,xe,ke;fe.dimensions.length>1&&me.displayInd===fe.dimensions.length-1?(xe=ae.left,ke="left"):(xe=ae.left+ae.width,ke="right");var Ae=ie.model.count,Oe=ie.model.categoryLabel,He=Ae/ie.parcatsViewModel.model.count,Ge={countLabel:Ae,categoryLabel:Oe,probabilityLabel:He.toFixed(3)},_e=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Ge.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Ge.categoryLabel+"):",Ge.probabilityLabel].join(" "));var Ie=_e.join("<br>");return{trace:ce,x:j*(xe-re.left),y:Q*(ye-re.top),text:Ie,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ge,eventData:[{data:ce._input,fullData:ce,count:Ae,category:Oe,probability:He}]}}function I(G,re,ee){var j=[];return d.select(ee.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;j.push(z(G,re,Q))}),j}function R(G,re,ee){G._fullLayout._calcInverseTransform(G);var j=G._fullLayout._invScaleX,Q=G._fullLayout._invScaleY,ne=ee.getBoundingClientRect(),ae=d.select(ee).datum(),ie=ae.categoryViewModel,fe=ie.parcatsViewModel,me=fe.model.dimensions[ie.model.dimensionInd],ce=fe.trace,ye=ne.y+ne.height/2,xe,ke;fe.dimensions.length>1&&me.displayInd===fe.dimensions.length-1?(xe=ne.left,ke="left"):(xe=ne.left+ne.width,ke="right");var Ae=ie.model.categoryLabel,Oe=ae.parcatsViewModel.model.count,He=0;ae.categoryViewModel.bands.forEach(function(Dt){Dt.color===ae.color&&(He+=Dt.count)});var Ge=ie.model.count,_e=0;fe.pathSelection.each(function(Dt){Dt.model.color===ae.color&&(_e+=Dt.model.count)});var Ie=He/Oe,Ye=He/_e,qe=He/Ge,Ue={countLabel:Oe,categoryLabel:Ae,probabilityLabel:Ie.toFixed(3)},Re=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Re.push(["Count:",Ue.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Re.push("P(color \u2229 "+Ae+"): "+Ue.probabilityLabel),Re.push("P("+Ae+" | color): "+Ye.toFixed(3)),Re.push("P(color | "+Ae+"): "+qe.toFixed(3)));var Ve=Re.join("<br>"),dt=n.mostReadable(ae.color,["black","white"]);return{trace:ce,x:j*(xe-re.left),y:Q*(ye-re.top),text:Ve,color:ae.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:ce._input,fullData:ce,category:Ae,count:Oe,probability:Ie,categorycount:Ge,colorcount:_e,bandcolorcount:He}]}}function D(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var re=d.mouse(this)[1];if(re<-1)return;var ee=G.parcatsViewModel.graphDiv,j=ee._fullLayout,Q=j._paperdiv.node().getBoundingClientRect(),ne=G.parcatsViewModel.hoveron,ae=this;if(ne==="color"?(S(ae),P(ae,"plotly_hover",d.event)):(L(ae),k(ae,"plotly_hover",d.event)),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ie;ne==="category"?ie=z(ee,Q,ae):ne==="color"?ie=R(ee,Q,ae):ne==="dimension"&&(ie=I(ee,Q,ae)),ie&&w.loneHover(ie,{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:ee})}}}function O(G){var re=G.parcatsViewModel;if(!re.dragDimension&&(A(re.pathSelection),_(re.dimensionSelection.selectAll("g.category")),x(re.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),w.loneUnhover(re.graphDiv._fullLayout._hoverlayer.node()),re.pathSelection.sort(f),re.hoverinfoItems.indexOf("skip")===-1)){var ee=G.parcatsViewModel.hoveron,j=this;ee==="color"?P(j,"plotly_unhover",d.event):k(j,"plotly_unhover",d.event)}}function F(G){G.parcatsViewModel.arrangement!=="fixed"&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(re){return re.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,d.select(this).selectAll("g.category").select("rect.catrect").each(function(re){var ee=d.mouse(this)[0],j=d.mouse(this)[1];-2<=ee&&ee<=re.width+2&&-2<=j&&j<=re.height+2&&(G.dragCategoryDisplayInd=re.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(Q){return Q.displayInd}),re.model.dragY=re.y,e.raiseToTop(this.parentNode),d.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<j&&j<=Q.y+Q.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,w.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function Y(G){if(G.parcatsViewModel.arrangement!=="fixed"&&(G.dragHasMoved=!0,G.dragDimensionDisplayInd!==null)){var re=G.dragDimensionDisplayInd,ee=re-1,j=re+1,Q=G.parcatsViewModel.dimensions[re];if(G.dragCategoryDisplayInd!==null){var ne=Q.categories[G.dragCategoryDisplayInd];ne.model.dragY+=d.event.dy;var ae=ne.model.dragY,ie=ne.model.displayInd,fe=Q.categories,me=fe[ie-1],ce=fe[ie+1];me!==void 0&&ae<me.y+me.height/2&&(ne.model.displayInd=me.model.displayInd,me.model.displayInd=ie),ce!==void 0&&ae+ne.height>ce.y+ce.height/2&&(ne.model.displayInd=ce.model.displayInd,ce.model.displayInd=ie),G.dragCategoryDisplayInd=ne.model.displayInd}if(G.dragCategoryDisplayInd===null||G.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=d.event.x;var ye=G.parcatsViewModel.dimensions[ee],xe=G.parcatsViewModel.dimensions[j];ye!==void 0&&Q.model.dragX<ye.x+ye.width&&(Q.model.displayInd=ye.model.displayInd,ye.model.displayInd=re),xe!==void 0&&Q.model.dragX+Q.width>xe.x&&(Q.model.displayInd=xe.model.displayInd,xe.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=Q.model.displayInd}oe(G.parcatsViewModel),ue(G.parcatsViewModel),V(G.parcatsViewModel),$(G.parcatsViewModel)}}function X(G){if(G.parcatsViewModel.arrangement!=="fixed"&&G.dragDimensionDisplayInd!==null){d.select(this).selectAll("text").attr("font-weight","normal");var re={},ee=q(G.parcatsViewModel),j=G.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),Q=G.initialDragDimensionDisplayInds.some(function(xe,ke){return xe!==j[ke]});Q&&j.forEach(function(xe,ke){var Ae=G.parcatsViewModel.model.dimensions[ke].containerInd;re["dimensions["+Ae+"].displayindex"]=xe});var ne=!1;if(G.dragCategoryDisplayInd!==null){var ae=G.model.categories.map(function(xe){return xe.displayInd});if(ne=G.initialDragCategoryDisplayInds.some(function(xe,ke){return xe!==ae[ke]}),ne){var ie=G.model.categories.slice().sort(function(xe,ke){return xe.displayInd-ke.displayInd}),fe=ie.map(function(xe){return xe.categoryValue}),me=ie.map(function(xe){return xe.categoryLabel});re["dimensions["+G.model.containerInd+"].categoryarray"]=[fe],re["dimensions["+G.model.containerInd+"].ticktext"]=[me],re["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!G.dragHasMoved&&G.potentialClickBand&&(G.parcatsViewModel.hoveron==="color"?P(G.potentialClickBand,"plotly_click",d.event.sourceEvent):k(G.potentialClickBand,"plotly_click",d.event.sourceEvent)),G.model.dragX=null,G.dragCategoryDisplayInd!==null){var ce=G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd];ce.model.dragY=null,G.dragCategoryDisplayInd=null}G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,oe(G.parcatsViewModel),ue(G.parcatsViewModel);var ye=d.transition().duration(300).ease("cubic-in-out");ye.each(function(){V(G.parcatsViewModel,!0),$(G.parcatsViewModel,!0)}).each("end",function(){(Q||ne)&&b.restyle(G.parcatsViewModel.graphDiv,re,[ee])})}}function q(G){for(var re,ee=G.graphDiv._fullData,j=0;j<ee.length;j++)if(G.key===ee[j].uid){re=j;break}return re}function $(G,re){re===void 0&&(re=!1);function ee(j){return re?j.transition():j}G.pathSelection.data(function(j){return j.paths},s),ee(G.pathSelection).attr("d",function(j){return j.svgD})}function V(G,re){re===void 0&&(re=!1);function ee(fe){return re?fe.transition():fe}G.dimensionSelection.data(function(fe){return fe.dimensions},s);var j=G.dimensionSelection.selectAll("g.category").data(function(fe){return fe.categories},s);ee(G.dimensionSelection).attr("transform",function(fe){return o(fe.x,0)}),ee(j).attr("transform",function(fe){return o(0,fe.y)});var Q=j.select(".dimlabel");Q.text(function(fe,me){return me===0?fe.parcatsViewModel.model.dimensions[fe.model.dimensionInd].dimensionLabel:null});var ne=j.select(".catlabel");ne.attr("text-anchor",function(fe){return i(fe)?"start":"end"}).attr("x",function(fe){return i(fe)?fe.width+5:-5}).each(function(fe){var me,ce;i(fe)?(me=fe.width+5,ce="start"):(me=-5,ce="end"),d.select(this).selectAll("tspan").attr("x",me).attr("text-anchor",ce)});var ae=j.selectAll("rect.bandrect").data(function(fe){return fe.bands},s),ie=ae.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(fe){return fe.color}).attr("fill-opacity",0);ae.attr("fill",function(fe){return fe.color}).attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}).attr("y",function(fe){return fe.y}),x(ie),ae.each(function(){e.raiseToTop(this)}),ae.exit().remove()}function K(G,re,ee){var j=ee[0],Q=re.margin||{l:80,r:80,t:100,b:80},ne=j.trace,ae=ne.domain,ie=re.width,fe=re.height,me=Math.floor(ie*(ae.x[1]-ae.x[0])),ce=Math.floor(fe*(ae.y[1]-ae.y[0])),ye=ae.x[0]*ie+Q.l,xe=re.height-ae.y[1]*re.height+Q.t,ke=ne.line.shape,Ae;ne.hoverinfo==="all"?Ae=["count","probability"]:Ae=(ne.hoverinfo||"").split("+");var Oe={trace:ne,key:ne.uid,model:j,x:ye,y:xe,width:me,height:ce,hoveron:ne.hoveron,hoverinfoItems:Ae,arrangement:ne.arrangement,bundlecolors:ne.bundlecolors,sortpaths:ne.sortpaths,labelfont:ne.labelfont,categorylabelfont:ne.tickfont,pathShape:ke,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(oe(Oe),ue(Oe)),Oe}function se(G,re,ee,j,Q){var ne=[],ae=[],ie,fe;for(fe=0;fe<ee.length-1;fe++)ie=l(ee[fe]+G[fe],G[fe+1]),ne.push(ie(Q)),ae.push(ie(1-Q));var me="M "+G[0]+","+re[0];for(me+="l"+ee[0]+",0 ",fe=1;fe<ee.length;fe++)me+="C"+ne[fe-1]+","+re[fe-1]+" "+ae[fe-1]+","+re[fe]+" "+G[fe]+","+re[fe],me+="l"+ee[fe]+",0 ";for(me+="l0,"+j+" ",me+="l -"+ee[ee.length-1]+",0 ",fe=ee.length-2;fe>=0;fe--)me+="C"+ae[fe]+","+(re[fe+1]+j)+" "+ne[fe]+","+(re[fe]+j)+" "+(G[fe]+ee[fe])+","+(re[fe]+j),me+="l-"+ee[fe]+",0 ";return me+="Z",me}function ue(G){var re=G.dimensions,ee=G.model,j=re.map(function(zt){return zt.categories.map(function(Bt){return Bt.y})}),Q=G.model.dimensions.map(function(zt){return zt.categories.map(function(Bt){return Bt.displayInd})}),ne=G.model.dimensions.map(function(zt){return zt.displayInd}),ae=G.dimensions.map(function(zt){return zt.model.dimensionInd}),ie=re.map(function(zt){return zt.x}),fe=re.map(function(zt){return zt.width}),me=[];for(var ce in ee.paths)ee.paths.hasOwnProperty(ce)&&me.push(ee.paths[ce]);function ye(zt){var Bt=zt.categoryInds.map(function(Mt,it){return Q[it][Mt]}),Lt=ae.map(function(Mt){return Bt[Mt]});return Lt}me.sort(function(zt,Bt){var Lt=ye(zt),Mt=ye(Bt);return G.sortpaths==="backward"&&(Lt.reverse(),Mt.reverse()),Lt.push(zt.valueInds[0]),Mt.push(Bt.valueInds[0]),G.bundlecolors&&(Lt.unshift(zt.rawColor),Mt.unshift(Bt.rawColor)),Lt<Mt?-1:Lt>Mt?1:0});for(var xe=new Array(me.length),ke=re[0].model.count,Ae=re[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Bt){return zt+Bt}),Oe=0;Oe<me.length;Oe++){var He=me[Oe],Ge;ke>0?Ge=Ae*(He.count/ke):Ge=0;for(var _e=new Array(j.length),Ie=0;Ie<He.categoryInds.length;Ie++){var Ye=He.categoryInds[Ie],qe=Q[Ie][Ye],Ue=ne[Ie];_e[Ue]=j[Ue][qe],j[Ue][qe]+=Ge;var Re=G.dimensions[Ue].categories[qe],Ve=Re.bands.length,dt=Re.bands[Ve-1];if(dt===void 0||He.rawColor!==dt.rawColor){var Dt=dt===void 0?0:dt.y+dt.height;Re.bands.push({key:Dt,color:He.color,rawColor:He.rawColor,height:Ge,width:Re.width,count:He.count,y:Dt,categoryViewModel:Re,parcatsViewModel:G})}else{var Gt=Re.bands[Ve-1];Gt.height+=Ge,Gt.count+=He.count}}var kt;G.pathShape==="hspline"?kt=se(ie,_e,fe,Ge,.5):kt=se(ie,_e,fe,Ge,0),xe[Oe]={key:He.valueInds[0],model:He,height:Ge,leftXs:ie,topYs:_e,dimWidths:fe,svgD:kt,parcatsViewModel:G}}G.paths=xe}function oe(G){var re=G.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});re.sort(function(ae,ie){return ae.displayInd-ie.displayInd});var ee=[];for(var j in re){var Q=re[j].dimensionInd,ne=G.model.dimensions[Q];ee.push(U(G,ne))}G.dimensions=ee}function U(G,re){var ee=40,j=16,Q=G.model.dimensions.length,ne=re.displayInd,ae,ie,fe;Q>1?ae=(G.width-2*ee-j)/(Q-1):ae=0,ie=ee,fe=ie+ae*ne;var me=[],ce=G.model.maxCats,ye=re.categories.length,xe=8,ke=re.count,Ae=G.height-xe*(ce-1),Oe,He,Ge,_e,Ie,Ye=(ce-ye)*xe/2,qe=re.categories.map(function(Ue){return{displayInd:Ue.displayInd,categoryInd:Ue.categoryInd}});for(qe.sort(function(Ue,Re){return Ue.displayInd-Re.displayInd}),Ie=0;Ie<ye;Ie++)_e=qe[Ie].categoryInd,He=re.categories[_e],ke>0?Oe=He.count/ke*Ae:Oe=0,Ge={key:He.valueInds[0],model:He,width:j,height:Oe,y:He.dragY!==null?He.dragY:Ye,bands:[],parcatsViewModel:G},Ye=Ye+Oe+xe,me.push(Ge);return{key:re.dimensionInd,x:re.dragX!==null?re.dragX:fe,y:0,width:j,model:re,categories:me,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(t,B,H){var d=t("./parcats");B.exports=function(b,w,e,o){var a=b._fullLayout,n=a._paper,r=a._size;d(b,n,w,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,o)}},{"./parcats":886}],888:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/layout_attributes"),b=t("../../plots/font_attributes"),w=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,o=t("../../plot_api/plot_template").templatedArray;B.exports={domain:w({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},l.tickvals,{editType:"plot"}),ticktext:e({},l.ticktext,{editType:"plot"}),tickformat:e({},l.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},d("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(t,B,H){var d=t("./constants"),l=t("@plotly/d3"),b=t("../../lib/gup").keyFun,w=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,o=t("../../lib").strTranslate,a=d.bar.snapRatio;function n(X,q){return X*(1-a)+q*a}var r=d.bar.snapClose;function u(X,q){return X*(1-r)+q*r}function s(X,q,$,V){if(i($,V))return $;var K=X?-1:1,se=0,ue=q.length-1;if(K<0){var oe=se;se=ue,ue=oe}for(var U=q[se],G=U,re=se;K*re<K*ue;re+=K){var ee=re+K,j=q[ee];if(K*$<K*u(U,j))return n(U,G);if(K*$<K*j||ee===ue)return n(j,U);G=U,U=j}}function i(X,q){for(var $=0;$<q.length;$++)if(X>=q[$][0]&&X<=q[$][1])return!0;return!1}function f(X){X.attr("x",-d.bar.captureWidth/2).attr("width",d.bar.captureWidth)}function h(X){X.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(X){if(!X.brush.filterSpecified)return"0,"+X.height;for(var q=v(X.brush.filter.getConsolidated(),X.height),$=[0],V,K,se,ue=q.length?q[0][0]:null,oe=0;oe<q.length;oe++)V=q[oe],K=V[1]-V[0],$.push(ue),$.push(K),se=oe+1,se<q.length&&(ue=q[se][0]-V[1]);return $.push(X.height),$}function v(X,q){return X.map(function($){return $.map(function(V){return Math.max(0,V*q)}).sort(e)})}function y(X,q){var $=d.bar.handleHeight;if(!(q>X[1]+$||q<X[0]-$))return q>=.9*X[1]+.1*X[0]?"n":q<=.9*X[0]+.1*X[1]?"s":"ns"}function g(){l.select(document.body).style("cursor",null)}function A(X){X.attr("stroke-dasharray",p)}function m(X,q){var $=l.select(X).selectAll(".highlight, .highlight-shadow"),V=q?$.transition().duration(d.bar.snapDuration).each("end",q):$;A(V)}function M(X,q){var $=X.brush,V=$.filterSpecified,K=NaN,se={},ue;if(V){var oe=X.height,U=$.filter.getConsolidated(),G=v(U,oe),re=NaN,ee=NaN,j=NaN;for(ue=0;ue<=G.length;ue++){var Q=G[ue];if(Q&&Q[0]<=q&&q<=Q[1]){re=ue;break}else if(ee=ue?ue-1:NaN,Q&&Q[0]>q){j=ue;break}}if(K=re,isNaN(K)&&(isNaN(ee)||isNaN(j)?K=isNaN(ee)?j:ee:K=q-G[ee][1]<G[j][0]-q?ee:j),!isNaN(K)){var ne=G[K],ae=y(ne,q);ae&&(se.interval=U[K],se.intervalPix=ne,se.region=ae)}}if(X.ordinal&&!se.region){var ie=X.unitTickvals,fe=X.unitToPaddedPx.invert(q);for(ue=0;ue<ie.length;ue++){var me=[ie[Math.max(ue-1,0)]*.25+ie[ue]*.75,ie[Math.min(ue+1,ie.length-1)]*.25+ie[ue]*.75];if(fe>=me[0]&&fe<=me[1]){se.clickableOrdinalRange=me;break}}}return se}function _(X,q){l.event.sourceEvent.stopPropagation();var $=q.height-l.mouse(X)[1]-2*d.verticalPadding,V=q.unitToPaddedPx.invert($),K=q.brush,se=M(q,$),ue=se.interval,oe=K.svgBrush;if(oe.wasDragged=!1,oe.grabbingBar=se.region==="ns",oe.grabbingBar){var U=ue.map(q.unitToPaddedPx);oe.grabPoint=$-U[0]-d.verticalPadding,oe.barLength=U[1]-U[0]}oe.clickableOrdinalRange=se.clickableOrdinalRange,oe.stayingIntervals=q.multiselect&&K.filterSpecified?K.filter.getConsolidated():[],ue&&(oe.stayingIntervals=oe.stayingIntervals.filter(function(G){return G[0]!==ue[0]&&G[1]!==ue[1]})),oe.startExtent=se.region?ue[se.region==="s"?1:0]:V,q.parent.inBrushDrag=!0,oe.brushStartCallback()}function T(X,q){l.event.sourceEvent.stopPropagation();var $=q.height-l.mouse(X)[1]-2*d.verticalPadding,V=q.brush.svgBrush;V.wasDragged=!0,V._dragging=!0,V.grabbingBar?V.newExtent=[$-V.grabPoint,$+V.barLength-V.grabPoint].map(q.unitToPaddedPx.invert):V.newExtent=[V.startExtent,q.unitToPaddedPx.invert($)].sort(e),q.brush.filterSpecified=!0,V.extent=V.stayingIntervals.concat([V.newExtent]),V.brushCallback(q),m(X.parentNode)}function x(X,q){var $=q.brush,V=$.filter,K=$.svgBrush;K._dragging||(c(X,q),T(X,q),q.brush.svgBrush.wasDragged=!1),K._dragging=!1;var se=l.event;se.sourceEvent.stopPropagation();var ue=K.grabbingBar;if(K.grabbingBar=!1,K.grabLocation=void 0,q.parent.inBrushDrag=!1,g(),!K.wasDragged){K.wasDragged=void 0,K.clickableOrdinalRange?$.filterSpecified&&q.multiselect?K.extent.push(K.clickableOrdinalRange):(K.extent=[K.clickableOrdinalRange],$.filterSpecified=!0):ue?(K.extent=K.stayingIntervals,K.extent.length===0&&I($)):I($),K.brushCallback(q),m(X.parentNode),K.brushEndCallback($.filterSpecified?V.getConsolidated():[]);return}var oe=function(){V.set(V.getConsolidated())};if(q.ordinal){var U=q.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),K.newExtent=[s(0,U,K.newExtent[0],K.stayingIntervals),s(1,U,K.newExtent[1],K.stayingIntervals)];var G=K.newExtent[1]>K.newExtent[0];K.extent=K.stayingIntervals.concat(G?[K.newExtent]:[]),K.extent.length||I($),K.brushCallback(q),G?m(X.parentNode,oe):(oe(),m(X.parentNode))}else oe();K.brushEndCallback($.filterSpecified?V.getConsolidated():[])}function c(X,q){var $=q.height-l.mouse(X)[1]-2*d.verticalPadding,V=M(q,$),K="crosshair";V.clickableOrdinalRange?K="pointer":V.region&&(K=V.region+"-resize"),l.select(document.body).style("cursor",K)}function L(X){X.on("mousemove",function(q){l.event.preventDefault(),q.parent.inBrushDrag||c(this,q)}).on("mouseleave",function(q){q.parent.inBrushDrag||g()}).call(l.behavior.drag().on("dragstart",function(q){_(this,q)}).on("drag",function(q){T(this,q)}).on("dragend",function(q){x(this,q)}))}function S(X,q){return X[0]-q[0]}function k(X,q){var $=X.selectAll(".background").data(w);$.enter().append("rect").classed("background",!0).call(f).call(h).style("pointer-events","auto").attr("transform",o(0,d.verticalPadding)),$.call(L).attr("height",function(se){return se.height-d.verticalPadding});var V=X.selectAll(".highlight-shadow").data(w);V.enter().append("line").classed("highlight-shadow",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width+d.bar.strokeWidth).attr("stroke",q).attr("opacity",d.bar.strokeOpacity).attr("stroke-linecap","butt"),V.attr("y1",function(se){return se.height}).call(A);var K=X.selectAll(".highlight").data(w);K.enter().append("line").classed("highlight",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width-d.bar.strokeWidth).attr("stroke",d.bar.fillColor).attr("opacity",d.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(se){return se.height}).call(A)}function P(X,q){var $=X.selectAll("."+d.cn.axisBrush).data(w,b);$.enter().append("g").classed(d.cn.axisBrush,!0),k($,q)}function z(X){return X.svgBrush.extent.map(function(q){return q.slice()})}function I(X){X.filterSpecified=!1,X.svgBrush.extent=[[-1/0,1/0]]}function R(X){return function($){var V=$.brush,K=z(V),se=K.slice();V.filter.set(se),X()}}function D(X){for(var q=X.slice(),$=[],V,K=q.shift();K;){for(V=K.slice();(K=q.shift())&&K[0]<=V[1];)V[1]=Math.max(V[1],K[1]);$.push(V)}return $.length===1&&$[0][0]>$[0][1]&&($=[]),$}function O(){var X=[],q,$;return{set:function(V){X=V.map(function(K){return K.slice().sort(e)}).sort(S),X.length===1&&X[0][0]===-1/0&&X[0][1]===1/0&&(X=[[0,-1]]),q=D(X),$=X.reduce(function(K,se){return[Math.min(K[0],se[0]),Math.max(K[1],se[1])]},[1/0,-1/0])},get:function(){return X.slice()},getConsolidated:function(){return q},getBounds:function(){return $}}}function F(X,q,$,V,K,se){var ue=O();return ue.set($),{filter:ue,filterSpecified:q,svgBrush:{extent:[],brushStartCallback:V,brushCallback:R(K),brushEndCallback:se}}}function Y(X,q){if(Array.isArray(X[0])?(X=X.map(function(V){return V.sort(e)}),q.multiselect?X=D(X.sort(S)):X=[X[0]]):X=[X.sort(e)],q.tickvals){var $=q.tickvals.slice().sort(e);if(X=X.map(function(V){var K=[s(0,$,V[0],[]),s(1,$,V[1],[])];if(K[1]>K[0])return K}).filter(function(V){return V}),!X.length)return}return X.length>1?X:X[0]}B.exports={makeBrush:F,ensureAxisBrush:P,cleanRanges:Y}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/get_data").getModuleCalcData,b=t("./plot"),w=t("../../constants/xmlns_namespaces");H.name="parcoords",H.plot=function(e){var o=l(e.calcdata,"parcoords")[0];o.length&&b(e,o)},H.clean=function(e,o,a,n){var r=n._has&&n._has("parcoords"),u=o._has&&o._has("parcoords");r&&!u&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},H.toSVG=function(e){var o=e._fullLayout._glimages,a=d.select(e).selectAll(".svg-container"),n=a.filter(function(u,s){return s===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var u=this,s=u.toDataURL("image/png"),i=o.append("svg:image");i.attr({xmlns:w.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:u.style.width,height:u.style.height})}n.each(r),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray,l=t("../../components/colorscale"),b=t("../../lib/gup").wrap;B.exports=function(o,a){var n,r;return l.hasColorscale(a,"line")&&d(a.line.color)?(n=a.line.color,r=l.extractOpts(a.line).colorscale,l.calc(o,a,{vals:n,containerStr:"line",cLetter:"c"})):(n=w(a._length),r=[[0,a.line.color],[1,a.line.color]]),b({lineColor:n,cscale:r})};function w(e){for(var o=new Array(e),a=0;a<e;a++)o[a]=.5;return o}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(t,B,H){B.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),o=t("../../plots/cartesian/axes"),a=t("./attributes"),n=t("./axisbrush"),r=t("./constants").maxDimensionCount,u=t("./merge_length");function s(f,h,p,v,y){var g=y("line.color",p);if(l(f,"line")&&d.isArrayOrTypedArray(g)){if(g.length)return y("line.colorscale"),b(f,h,v,y,{prefix:"line.",cLetter:"c"}),g.length;h.line.color=p}return 1/0}function i(f,h,p,v){function y(_,T){return d.coerce(f,h,a.dimensions,_,T)}var g=y("values"),A=y("visible");if(g&&g.length||(A=h.visible=!1),A){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var m=y("range");h._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},o.setConvert(h._ax,v.layout),y("multiselect");var M=y("constraintrange");M&&(h.constraintrange=n.cleanRanges(M,h))}}B.exports=function(h,p,v,y){function g(T,x){return d.coerce(h,p,a,T,x)}var A=h.dimensions;Array.isArray(A)&&A.length>r&&(d.log("parcoords traces support up to "+r+" dimensions at the moment"),A.splice(r));var m=e(h,p,{name:"dimensions",layout:y,handleItemDefaults:i}),M=s(h,p,v,y,g);w(p,y,g),(!Array.isArray(m)||!m.length)&&(p.visible=!1),u(p,m,"values",M);var _={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};d.coerceFont(g,"labelfont",_),d.coerceFont(g,"tickfont",_),d.coerceFont(g,"rangefont",_),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(t,B,H){var d=t("../../lib").isTypedArray;H.convertTypedArray=function(l){return d(l)?Array.prototype.slice.call(l):l},H.isOrdinal=function(l){return!!l.tickvals},H.isVisible=function(l){return l.visible||!("visible"in l)}},{"../../lib":503}],895:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(t,B,H){var d=t("glslify"),l=d([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),b=d([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),w=t("./constants").maxDimensionCount,e=t("../../lib"),o=1e-6,a=2048,n=new Uint8Array(4),r=new Uint8Array(4),u={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(c){c.read({x:0,y:0,width:1,height:1,data:n})}function i(c,L,S,k,P){var z=c._gl;z.enable(z.SCISSOR_TEST),z.scissor(L,S,k,P),c.clear({color:[0,0,0,0],depth:1})}function f(c,L,S,k,P,z){var I=z.key;function R(D){var O=Math.min(k,P-D*k);D===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],i(c,z.scissorX,z.scissorY,z.scissorWidth,z.viewBoxSize[1])),!S.clearOnly&&(z.count=2*O,z.offset=2*D*k,L(z),D*k+O<P&&(S.currentRafs[I]=window.requestAnimationFrame(function(){R(D+1)})),S.drawCompleted=!1)}S.drawCompleted||(s(c),S.drawCompleted=!0),R(0)}function h(c){return Math.max(o,Math.min(1-o,c))}function p(c,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=c(k/255).concat(L);return S}function v(c,L){return(c>>>8*L)%256/255}function y(c,L,S){for(var k=new Array(c*(w+4)),P=0,z=0;z<c;z++){for(var I=0;I<w;I++)k[P++]=I<L.length?L[I].paddedUnitValues[z]:.5;k[P++]=v(z,2),k[P++]=v(z,1),k[P++]=v(z,0),k[P++]=h(S[z])}return k}function g(c,L,S){for(var k=new Array(L*8),P=0,z=0;z<L;z++)for(var I=0;I<2;I++)for(var R=0;R<4;R++){var D=c*4+R,O=S[z*64+D];D===63&&I===0&&(O*=-1),k[P++]=O}return k}function A(c){var L="0"+c;return L.substr(L.length-2)}function m(c){return c<w?"p"+A(c+1)+"_"+A(c+4):"colors"}function M(c,L,S){for(var k=0;k<=w;k+=4)c[m(k)](g(k/4,L,S))}function _(c){for(var L={},S=0;S<=w;S+=4)L[m(S)]=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function T(c,L,S,k,P,z,I,R,D,O,F,Y,X,q){for(var $=[[],[]],V=0;V<64;V++)$[0][V]=V===P?1:0,$[1][V]=V===z?1:0;I*=q,R*=q,D*=q,O*=q;var K=c.lines.canvasOverdrag*q,se=c.domain,ue=c.canvasWidth*q,oe=c.canvasHeight*q,U=c.pad.l*q,G=c.pad.b*q,re=c.layoutHeight*q,ee=c.layoutWidth*q,j=c.deselectedLines.color,Q=e.extendFlat({key:F,resolution:[ue,oe],viewBoxPos:[I+K,R],viewBoxSize:[D,O],i0:P,i1:z,dim0A:$[0].slice(0,16),dim0B:$[0].slice(16,32),dim0C:$[0].slice(32,48),dim0D:$[0].slice(48,64),dim1A:$[1].slice(0,16),dim1B:$[1].slice(16,32),dim1C:$[1].slice(32,48),dim1D:$[1].slice(48,64),drwLayer:Y,contextColor:[j[0]/255,j[1]/255,j[2]/255,j[3]<1?j[3]:Math.max(1/255,Math.pow(1/c.lines.color.length,1/3))],scissorX:(k===L?0:I+K)+(U-K)+ee*se.x[0],scissorWidth:(k===S?ue-I+K:D+.5)+(k===L?I+K:0),scissorY:R+G+re*se.y[0],scissorHeight:O,viewportX:U-K+ee*se.x[0],viewportY:G+re*se.y[0],viewportWidth:ue,viewportHeight:oe},X);return Q}function x(c){var L=a-1,S=Math.max(0,Math.floor(c[0]*L),0),k=Math.min(L,Math.ceil(c[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}B.exports=function(c,L){var S=L.context,k=L.pick,P=L.regl,z=P._gl,I=z.getParameter(z.ALIASED_LINE_WIDTH_RANGE),R=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,F,Y,X,q=_(P),$,V=P.texture(u),K=[];ue(L);var se=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:l,frag:b,primitive:"lines",lineWidth:R,attributes:q,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:V,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function ue(j){O=j.model,F=j.viewModel,Y=F.dimensions.slice(),X=Y[0]?Y[0].values.length:0;var Q=O.lines,ne=k?Q.color.map(function(ie,fe){return fe/Q.color.length}):Q.color,ae=y(X,Y,ne);M(q,X,ae),!S&&!k&&(V=P.texture(e.extendFlat({data:p(O.unitToColor,255)},u)))}function oe(j){var Q,ne,ae,ie=[[],[]];for(ae=0;ae<64;ae++){var fe=!j&&ae<Y.length?Y[ae].brush.filter.getBounds():[-1/0,1/0];ie[0][ae]=fe[0],ie[1][ae]=fe[1]}var me=a*8,ce=new Array(me);for(Q=0;Q<me;Q++)ce[Q]=255;if(!j)for(Q=0;Q<Y.length;Q++){var ye=Q%8,xe=(Q-ye)/8,ke=Math.pow(2,ye),Ae=Y[Q],Oe=Ae.brush.filter.get();if(!(Oe.length<2)){var He=x(Oe[0])[1];for(ne=1;ne<Oe.length;ne++){var Ge=x(Oe[ne]);for(ae=He+1;ae<Ge[0];ae++)ce[ae*8+xe]&=~ke;He=Math.max(He,Ge[1])}}}var _e={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return $?$(_e):$=P.texture(_e),{maskTexture:$,maskHeight:a,loA:ie[0].slice(0,16),loB:ie[0].slice(16,32),loC:ie[0].slice(32,48),loD:ie[0].slice(48,64),hiA:ie[1].slice(0,16),hiB:ie[1].slice(16,32),hiC:ie[1].slice(32,48),hiD:ie[1].slice(48,64)}}function U(j,Q,ne){var ae=j.length,ie,fe,me,ce=1/0,ye=-1/0;for(ie=0;ie<ae;ie++)j[ie].dim0.canvasX<ce&&(ce=j[ie].dim0.canvasX,fe=ie),j[ie].dim1.canvasX>ye&&(ye=j[ie].dim1.canvasX,me=ie);ae===0&&i(P,0,0,O.canvasWidth,O.canvasHeight);var xe=oe(S);for(ie=0;ie<ae;ie++){var ke=j[ie],Ae=ke.dim0.crossfilterDimensionIndex,Oe=ke.dim1.crossfilterDimensionIndex,He=ke.canvasX,Ge=ke.canvasY,_e=He+ke.panelSizeX,Ie=ke.plotGlPixelRatio;if(Q||!K[Ae]||K[Ae][0]!==He||K[Ae][1]!==_e){K[Ae]=[He,_e];var Ye=T(O,fe,me,ie,Ae,Oe,He,Ge,ke.panelSizeX,ke.panelSizeY,ke.dim0.crossfilterDimensionIndex,S?0:k?2:1,xe,Ie);D.clearOnly=ne;var qe=Q?O.lines.blockLineCount:X;f(P,se,D,qe,X,Ye)}}}function G(j,Q){return P.read({x:j,y:Q,width:1,height:1,data:r}),r}function re(j,Q,ne,ae){var ie=new Uint8Array(4*ne*ae);return P.read({x:j,y:Q,width:ne,height:ae,data:ie}),ie}function ee(){c.style["pointer-events"]="none",V.destroy(),$&&$.destroy();for(var j in q)q[j].destroy()}return{render:U,readPixel:G,readPixels:re,destroy:ee,update:ue}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(t,B,H){B.exports=function(d,l,b,w){w||(w=1/0);var e,o;for(e=0;e<l.length;e++)o=l[e],o.visible&&(w=Math.min(w,o[b].length));for(w===1/0&&(w=0),d._length=w,e=0;e<l.length;e++)o=l[e],o.visible&&(o._length=w);return w}},{}],898:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("color-rgba"),e=t("../../plots/cartesian/axes"),o=l.strRotate,a=l.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/drawing"),u=t("../../components/colorscale"),s=t("../../lib/gup"),i=s.keyFun,f=s.repeat,h=s.unwrap,p=t("./helpers"),v=t("./constants"),y=t("./axisbrush"),g=t("./lines");function A($,V,K){return l.aggNums($,null,V,K)}function m($,V){return _(A(Math.min,$,V),A(Math.max,$,V))}function M($){var V=$.range;return V?_(V[0],V[1]):m($.values,$._length)}function _($,V){return(isNaN($)||!isFinite($))&&($=0),(isNaN(V)||!isFinite(V))&&(V=0),$===V&&($===0?($-=1,V+=1):($*=.9,V*=1.1)),[$,V]}function T($,V){return V?function(K,se){var ue=V[se];return ue==null?$(K):ue}:$}function x($,V,K,se,ue){var oe=M(K);return se?d.scale.ordinal().domain(se.map(T(b(K.tickformat),ue))).range(se.map(function(U){var G=(U-oe[0])/(oe[1]-oe[0]);return $-V+G*(2*V-$)})):d.scale.linear().domain(oe).range([$-V,V])}function c($,V){return d.scale.linear().range([V,$-V])}function L($,V){return d.scale.linear().domain(M($)).range([V,1-V])}function S($){if(!!$.tickvals){var V=M($);return d.scale.ordinal().domain($.tickvals).range($.tickvals.map(function(K){return(K-V[0])/(V[1]-V[0])}))}}function k($){var V=$.map(function(oe){return oe[0]}),K=$.map(function(oe){var U=w(oe[1]);return d.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),se=function(oe){return function(U){return U[oe]}},ue="rgb".split("").map(function(oe){return d.scale.linear().clamp(!0).domain(V).range(K.map(se(oe)))});return function(oe){return ue.map(function(U){return U(oe)})}}function P($){return $.dimensions.some(function(V){return V.brush.filterSpecified})}function z($,V,K){var se=h(V),ue=se.trace,oe=p.convertTypedArray(se.lineColor),U=ue.line,G={color:w(v.deselectedLineColor)},re=u.extractOpts(U),ee=re.reversescale?u.flipScale(se.cscale):se.cscale,j=ue.domain,Q=ue.dimensions,ne=$.width,ae=ue.labelangle,ie=ue.labelside,fe=ue.labelfont,me=ue.tickfont,ce=ue.rangefont,ye=l.extendDeepNoArrays({},U,{color:oe.map(d.scale.linear().domain(M({values:oe,range:[re.min,re.max],_length:ue._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),xe=Math.floor(ne*(j.x[1]-j.x[0])),ke=Math.floor($.height*(j.y[1]-j.y[0])),Ae=$.margin||{l:80,r:80,t:100,b:80},Oe=xe,He=ke;return{key:K,colCount:Q.filter(p.isVisible).length,dimensions:Q,tickDistance:v.tickDistance,unitToColor:k(ee),lines:ye,deselectedLines:G,labelAngle:ae,labelSide:ie,labelFont:fe,tickFont:me,rangeFont:ce,layoutWidth:ne,layoutHeight:$.height,domain:j,translateX:j.x[0]*ne,translateY:$.height-j.y[1]*$.height,pad:Ae,canvasWidth:Oe*v.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:He*v.canvasPixelRatio,width:Oe,height:He,canvasPixelRatio:v.canvasPixelRatio}}function I($,V,K){var se=K.width,ue=K.height,oe=K.dimensions,U=K.canvasPixelRatio,G=function(ne){return se*ne/Math.max(1,K.colCount-1)},re=v.verticalPadding/ue,ee=c(ue,v.verticalPadding),j={key:K.key,xScale:G,model:K,inBrushDrag:!1},Q={};return j.dimensions=oe.filter(p.isVisible).map(function(ne,ae){var ie=L(ne,re),fe=Q[ne.label];Q[ne.label]=(fe||0)+1;var me=ne.label+(fe?"__"+fe:""),ce=ne.constraintrange,ye=ce&&ce.length;ye&&!Array.isArray(ce[0])&&(ce=[ce]);var xe=ye?ce.map(function(Ue){return Ue.map(ie)}):[[-1/0,1/0]],ke=function(){var Ue=j;Ue.focusLayer&&Ue.focusLayer.render(Ue.panels,!0);var Re=P(Ue);!$.contextShown()&&Re?(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0),$.contextShown(!0)):$.contextShown()&&!Re&&(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0,!0),$.contextShown(!1))},Ae=ne.values;Ae.length>ne._length&&(Ae=Ae.slice(0,ne._length));var Oe=ne.tickvals,He;function Ge(Ue,Re){return{val:Ue,text:He[Re]}}function _e(Ue,Re){return Ue.val-Re.val}if(Array.isArray(Oe)&&Oe.length){He=ne.ticktext,!Array.isArray(He)||!He.length?He=Oe.map(b(ne.tickformat)):He.length>Oe.length?He=He.slice(0,Oe.length):Oe.length>He.length&&(Oe=Oe.slice(0,He.length));for(var Ie=1;Ie<Oe.length;Ie++)if(Oe[Ie]<Oe[Ie-1]){for(var Ye=Oe.map(Ge).sort(_e),qe=0;qe<Oe.length;qe++)Oe[qe]=Ye[qe].val,He[qe]=Ye[qe].text;break}}else Oe=void 0;return Ae=p.convertTypedArray(Ae),{key:me,label:ne.label,tickFormat:ne.tickformat,tickvals:Oe,ticktext:He,ordinal:p.isOrdinal(ne),multiselect:ne.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:ne._index,height:ue,values:Ae,paddedUnitValues:Ae.map(ie),unitTickvals:Oe&&Oe.map(ie),xScale:G,x:G(ae),canvasX:G(ae)*U,unitToPaddedPx:ee,domainScale:x(ue,v.verticalPadding,ne,Oe,He),ordinalScale:S(ne),parent:j,model:K,brush:y.makeBrush($,ye,xe,function(){$.linePickActive(!1)},ke,function(Ue){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),$.linePickActive(!0),V&&V.filterChanged){var Re=ie.invert,Ve=Ue.map(function(dt){return dt.map(Re).sort(l.sorterAsc)}).sort(function(dt,Dt){return dt[0]-Dt[0]});V.filterChanged(j.key,ne._index,Ve)}})}}),j}function R($){$.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(){var $=!0,V=!1;return{linePickActive:function(K){return arguments.length?$=!!K:$},contextShown:function(K){return arguments.length?V=!!K:V}}}function O($,V){var K=V==="top"?1:-1,se=$*Math.PI/180,ue=Math.sin(se),oe=Math.cos(se);return{dir:K,dx:ue,dy:oe,degrees:$}}function F($,V,K){for(var se=V.panels||(V.panels=[]),ue=$.data(),oe=0;oe<ue.length-1;oe++){var U=se[oe]||(se[oe]={}),G=ue[oe],re=ue[oe+1];U.dim0=G,U.dim1=re,U.canvasX=G.canvasX,U.panelSizeX=re.canvasX-G.canvasX,U.panelSizeY=V.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=K}}function Y($){for(var V=0;V<$.length;V++)for(var K=0;K<$[V].length;K++)for(var se=$[V][K].trace,ue=se.dimensions,oe=0;oe<ue.length;oe++){var U=ue[oe].values,G=ue[oe]._ax;G&&(G.range?G.range=_(G.range[0],G.range[1]):G.range=m(U,se._length),G.dtick||(G.dtick=.01*(Math.abs(G.range[1]-G.range[0])||1)),G.tickformat=ue[oe].tickformat,e.calcTicks(G),G.cleanRange())}}function X($,V){return e.tickText($._ax,V,!1).text}function q($,V){if($.ordinal)return"";var K=$.domainScale.domain(),se=K[V?K.length-1:0];return X($.model.dimensions[$.visibleIndex],se)}B.exports=function(V,K,se,ue){var oe=V._fullLayout,U=oe._toppaper,G=oe._glcontainer,re=V._context.plotGlPixelRatio,ee=V._fullLayout.paper_bgcolor;Y(K);var j=D(),Q=K.filter(function(Ye){return h(Ye).trace.visible}).map(z.bind(0,se)).map(I.bind(0,j,ue));G.each(function(Ye,qe){return l.extendFlat(Ye,Q[qe])});var ne=G.selectAll(".gl-canvas").each(function(Ye){Ye.viewModel=Q[0],Ye.viewModel.plotGlPixelRatio=re,Ye.viewModel.paperColor=ee,Ye.model=Ye.viewModel?Ye.viewModel.model:null}),ae=null,ie=ne.filter(function(Ye){return Ye.pick});ie.style("pointer-events","auto").on("mousemove",function(Ye){if(j.linePickActive()&&Ye.lineLayer&&ue&&ue.hover){var qe=d.event,Ue=this.width,Re=this.height,Ve=d.mouse(this),dt=Ve[0],Dt=Ve[1];if(dt<0||Dt<0||dt>=Ue||Dt>=Re)return;var Gt=Ye.lineLayer.readPixel(dt,Re-1-Dt),kt=Gt[3]!==0,zt=kt?Gt[2]+256*(Gt[1]+256*Gt[0]):null,Bt={x:dt,y:Dt,clientX:qe.clientX,clientY:qe.clientY,dataIndex:Ye.model.key,curveNumber:zt};zt!==ae&&(kt?ue.hover(Bt):ue.unhover&&ue.unhover(Bt),ae=zt)}}),ne.style("opacity",function(Ye){return Ye.pick?0:1}),U.style("background","rgba(255, 255, 255, 0)");var fe=U.selectAll("."+v.cn.parcoords).data(Q,i);fe.exit().remove(),fe.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),fe.attr("transform",function(Ye){return a(Ye.model.translateX,Ye.model.translateY)});var me=fe.selectAll("."+v.cn.parcoordsControlView).data(f,i);me.enter().append("g").classed(v.cn.parcoordsControlView,!0),me.attr("transform",function(Ye){return a(Ye.model.pad.l,Ye.model.pad.t)});var ce=me.selectAll("."+v.cn.yAxis).data(function(Ye){return Ye.dimensions},i);ce.enter().append("g").classed(v.cn.yAxis,!0),me.each(function(Ye){F(ce,Ye,re)}),ne.each(function(Ye){if(Ye.viewModel){!Ye.lineLayer||ue?Ye.lineLayer=g(this,Ye):Ye.lineLayer.update(Ye),(Ye.key||Ye.key===0)&&(Ye.viewModel[Ye.key]=Ye.lineLayer);var qe=!Ye.context||ue;Ye.lineLayer.render(Ye.viewModel.panels,qe)}}),ce.attr("transform",function(Ye){return a(Ye.xScale(Ye.xIndex),0)}),ce.call(d.behavior.drag().origin(function(Ye){return Ye}).on("drag",function(Ye){var qe=Ye.parent;j.linePickActive(!1),Ye.x=Math.max(-v.overdrag,Math.min(Ye.model.width+v.overdrag,d.event.x)),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,ce.sort(function(Ue,Re){return Ue.x-Re.x}).each(function(Ue,Re){Ue.xIndex=Re,Ue.x=Ye===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),F(ce,qe,re),ce.filter(function(Ue){return Math.abs(Ye.xIndex-Ue.xIndex)!==0}).attr("transform",function(Ue){return a(Ue.xScale(Ue.xIndex),0)}),d.select(this).attr("transform",a(Ye.x,0)),ce.each(function(Ue,Re,Ve){Ve===Ye.parent.key&&(qe.dimensions[Re]=Ue)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer.render&&qe.focusLayer.render(qe.panels)}).on("dragend",function(Ye){var qe=Ye.parent;Ye.x=Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,F(ce,qe,re),d.select(this).attr("transform",function(Ue){return a(Ue.x,0)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer&&qe.focusLayer.render(qe.panels),qe.pickLayer&&qe.pickLayer.render(qe.panels,!0),j.linePickActive(!0),ue&&ue.axesMoved&&ue.axesMoved(qe.key,qe.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),ce.exit().remove();var ye=ce.selectAll("."+v.cn.axisOverlays).data(f,i);ye.enter().append("g").classed(v.cn.axisOverlays,!0),ye.selectAll("."+v.cn.axis).remove();var xe=ye.selectAll("."+v.cn.axis).data(f,i);xe.enter().append("g").classed(v.cn.axis,!0),xe.each(function(Ye){var qe=Ye.model.height/Ye.model.tickDistance,Ue=Ye.domainScale,Re=Ue.domain();d.select(this).call(d.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qe,Ye.tickFormat).tickValues(Ye.ordinal?Re:null).tickFormat(function(Ve){return p.isOrdinal(Ye)?Ve:X(Ye.model.dimensions[Ye.visibleIndex],Ve)}).scale(Ue)),r.font(xe.selectAll("text"),Ye.model.tickFont)}),xe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xe.selectAll("text").style("text-shadow",n.makeTextShadow(ee)).style("cursor","default");var ke=ye.selectAll("."+v.cn.axisHeading).data(f,i);ke.enter().append("g").classed(v.cn.axisHeading,!0);var Ae=ke.selectAll("."+v.cn.axisTitle).data(f,i);Ae.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ae.text(function(Ye){return Ye.label}).each(function(Ye){var qe=d.select(this);r.font(qe,Ye.model.labelFont),n.convertToTspans(qe,V)}).attr("transform",function(Ye){var qe=O(Ye.model.labelAngle,Ye.model.labelSide),Ue=v.axisTitleOffset;return(qe.dir>0?"":a(0,2*Ue+Ye.model.height))+o(qe.degrees)+a(-Ue*qe.dx,-Ue*qe.dy)}).attr("text-anchor",function(Ye){var qe=O(Ye.model.labelAngle,Ye.model.labelSide),Ue=Math.abs(qe.dx),Re=Math.abs(qe.dy);return 2*Ue>Re?qe.dir*qe.dx<0?"start":"end":"middle"});var Oe=ye.selectAll("."+v.cn.axisExtent).data(f,i);Oe.enter().append("g").classed(v.cn.axisExtent,!0);var He=Oe.selectAll("."+v.cn.axisExtentTop).data(f,i);He.enter().append("g").classed(v.cn.axisExtentTop,!0),He.attr("transform",a(0,-v.axisExtentOffset));var Ge=He.selectAll("."+v.cn.axisExtentTopText).data(f,i);Ge.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(R),Ge.text(function(Ye){return q(Ye,!0)}).each(function(Ye){r.font(d.select(this),Ye.model.rangeFont)});var _e=Oe.selectAll("."+v.cn.axisExtentBottom).data(f,i);_e.enter().append("g").classed(v.cn.axisExtentBottom,!0),_e.attr("transform",function(Ye){return a(0,Ye.model.height+v.axisExtentOffset)});var Ie=_e.selectAll("."+v.cn.axisExtentBottomText).data(f,i);Ie.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(R),Ie.text(function(Ye){return q(Ye,!1)}).each(function(Ye){r.font(d.select(this),Ye.model.rangeFont)}),y.ensureAxisBrush(ye,ee)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(t,B,H){var d=t("./parcoords"),l=t("../../lib/prepare_regl"),b=t("./helpers").isVisible;function w(o,a,n){var r=a.indexOf(n),u=o.indexOf(r);return u===-1&&(u+=a.length),u}function e(o,a){return function(r,u){return w(o,a,r)-w(o,a,u)}}B.exports=function(a,n){var r=a._fullLayout,u=l(a);if(!!u){var s={},i={},f={},h={},p=r._size;n.forEach(function(m,M){var _=m[0].trace;f[M]=_.index;var T=h[M]=_._fullInput.index;s[M]=a.data[T].dimensions,i[M]=a.data[T].dimensions.slice()});var v=function(m,M,_){var T=i[m][M],x=_.map(function(z){return z.slice()}),c="dimensions["+M+"].constraintrange",L=r._tracePreGUI[a._fullData[f[m]]._fullInput.uid];if(L[c]===void 0){var S=T.constraintrange;L[c]=S||null}var k=a._fullData[f[m]].dimensions[M];x.length?(x.length===1&&(x=x[0]),T.constraintrange=x,k.constraintrange=x.slice(),x=[x]):(delete T.constraintrange,delete k.constraintrange,x=null);var P={};P[c]=x,a.emit("plotly_restyle",[P,[h[m]]])},y=function(m){a.emit("plotly_hover",m)},g=function(m){a.emit("plotly_unhover",m)},A=function(m,M){var _=e(M,i[m].filter(b));s[m].sort(_),i[m].filter(function(T){return!b(T)}).sort(function(T){return i[m].indexOf(T)}).forEach(function(T){s[m].splice(s[m].indexOf(T),1),s[m].splice(i[m].indexOf(T),0,T)}),a.emit("plotly_restyle",[{dimensions:[s[m]]},[h[m]]])};d(a,n,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{filterChanged:v,hover:y,unhover:g,axesMoved:A})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../../plots/domain").attributes,b=t("../../plots/font_attributes"),w=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat,n=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});B.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},d.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},n,{}),outsidetextfont:a({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:l({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(t,B,H){var d=t("../../plots/plots");H.name="pie",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],902:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../../components/color"),w={};function e(r,u){var s=[],i=r._fullLayout,f=i.hiddenlabels||[],h=u.labels,p=u.marker.colors||[],v=u.values,y=u._length,g=u._hasValues&&y,A,m;if(u.dlabel)for(h=new Array(y),A=0;A<y;A++)h[A]=String(u.label0+A*u.dlabel);var M={},_=o(i["_"+u.type+"colormap"]),T=0,x=!1;for(A=0;A<y;A++){var c,L,S;if(g){if(c=v[A],!d(c))continue;c=+c}else c=1;L=h[A],(L===void 0||L==="")&&(L=A),L=String(L);var k=M[L];k===void 0?(M[L]=s.length,S=f.indexOf(L)!==-1,S||(T+=c),s.push({v:c,label:L,color:_(p[A],L),i:A,pts:[A],hidden:S})):(x=!0,m=s[k],m.v+=c,m.pts.push(A),m.hidden||(T+=c),m.color===!1&&p[A]&&(m.color=_(p[A],L)))}s=s.filter(function(z){return z.v>=0});var P=u.type==="funnelarea"?x:u.sort;return P&&s.sort(function(z,I){return I.v-z.v}),s[0]&&(s[0].vTotal=T),s}function o(r){return function(s,i){return!s||(s=l(s),!s.isValid())?!1:(s=b.addOpacity(s,s.getAlpha()),r[i]||(r[i]=s),s)}}function a(r,u){var s=(u||{}).type;s||(s="pie");var i=r._fullLayout,f=r.calcdata,h=i[s+"colorway"],p=i["_"+s+"colormap"];i["extend"+s+"colors"]&&(h=n(h,w));for(var v=0,y=0;y<f.length;y++){var g=f[y],A=g[0].trace.type;if(A===s)for(var m=0;m<g.length;m++){var M=g[m];M.color===!1&&(p[M.label]?M.color=p[M.label]:(p[M.label]=M.color=h[v%h.length],v++))}}}function n(r,u){var s,i=JSON.stringify(r),f=u[i];if(!f){for(f=r.slice(),s=0;s<r.length;s++)f.push(l(r[s]).lighten(20).toHexString());for(s=0;s<r.length;s++)f.push(l(r[s]).darken(20).toHexString());u[i]=f}return f}B.exports={calc:e,crossTraceCalc:a,makePullColorFn:o,generateExtendedColors:n}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("./attributes"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function o(n,r){var u=Array.isArray(n),s=l.isArrayOrTypedArray(r),i=Math.min(u?n.length:1/0,s?r.length:1/0);if(isFinite(i)||(i=0),i&&s){for(var f,h=0;h<i;h++){var p=r[h];if(d(p)&&p>0){f=!0;break}}f||(i=0)}return{hasLabels:u,hasValues:s,len:i}}function a(n,r,u,s){function i(S,k){return l.coerce(n,r,b,S,k)}var f=i("labels"),h=i("values"),p=o(f,h),v=p.len;if(r._hasLabels=p.hasLabels,r._hasValues=p.hasValues,!r._hasLabels&&r._hasValues&&(i("label0"),i("dlabel")),!v){r.visible=!1;return}r._length=v;var y=i("marker.line.width");y&&i("marker.line.color"),i("marker.colors"),i("scalegroup");var g=i("text"),A=i("texttemplate"),m;if(A||(m=i("textinfo",Array.isArray(g)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),A||m&&m!=="none"){var M=i("textposition");e(n,r,s,i,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(M)||M==="auto",T=_||M==="outside";T&&i("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&i("insidetextorientation")}w(r,s,i);var x=i("hole"),c=i("title.text");if(c){var L=i("title.position",x?"middle center":"top center");!x&&L==="middle center"&&(r.title.position="top center"),l.coerceFont(i,"title.font",s.font)}i("sort"),i("direction"),i("rotation"),i("pull")}B.exports={handleLabelsAndValues:o,supplyDefaults:a}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(t,B,H){var d=t("../../components/fx/helpers").appendArrayMultiPointValues;B.exports=function(b,w){var e={curveNumber:w.index,pointNumbers:b.pts,data:w._input,fullData:w,label:b.label,color:b.color,value:b.v,percent:b.percent,text:b.text,bbox:b.bbox,v:b.v};return b.pts.length===1&&(e.pointNumber=e.i=b.pts[0]),d(e,w,b.pts),w.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":402}],905:[function(t,B,H){var d=t("../../lib");function l(b){return b.indexOf("e")!==-1?b.replace(/[.]?0+e/,"e"):b.indexOf(".")!==-1?b.replace(/[.]?0+$/,""):b}H.formatPiePercent=function(w,e){var o=l((w*100).toPrecision(3));return d.numSeparate(o,e)+"%"},H.formatPieValue=function(w,e){var o=l(w.toPrecision(10));return d.numSeparate(o,e)},H.getFirstFilled=function(w,e){if(!!Array.isArray(w))for(var o=0;o<e.length;o++){var a=w[e[o]];if(a||a===0||a==="")return a}},H.castOption=function(w,e){if(Array.isArray(w))return H.getFirstFilled(w,e);if(w)return w},H.getRotationAngle=function(b){return(b==="auto"?0:b)*Math.PI/180}},{"../../lib":503}],906:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(t,B,H){B.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return d.coerce(w,e,l,a,n)}o("hiddenlabels"),o("piecolorway",e.colorway),o("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../../components/fx"),w=t("../../components/color"),e=t("../../components/drawing"),o=t("../../lib"),a=o.strScale,n=o.strTranslate,r=t("../../lib/svg_text_utils"),u=t("../bar/uniform_text"),s=u.recordMinTextSize,i=u.clearMinTextSize,f=t("../bar/constants").TEXTPAD,h=t("./helpers"),p=t("./event_data"),v=t("../../lib").isValidTextValue;function y(oe,U){var G=oe._fullLayout,re=G._size;i("pie",G),_(U,oe),q(U,re);var ee=o.makeTraceGroups(G._pielayer,U,"trace").each(function(j){var Q=d.select(this),ne=j[0],ae=ne.trace;V(j),Q.attr("stroke-linejoin","round"),Q.each(function(){var ie=d.select(this).selectAll("g.slice").data(j);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var fe=[[[],[]],[[],[]]],me=!1;ie.each(function(Ge,_e){if(Ge.hidden){d.select(this).selectAll("path,g").remove();return}Ge.pointNumber=Ge.i,Ge.curveNumber=ae.index,fe[Ge.pxmid[1]<0?0:1][Ge.pxmid[0]<0?0:1].push(Ge);var Ie=ne.cx,Ye=ne.cy,qe=d.select(this),Ue=qe.selectAll("path.surface").data([Ge]);if(Ue.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),qe.call(A,oe,j),ae.pull){var Re=+h.castOption(ae.pull,Ge.pts)||0;Re>0&&(Ie+=Re*Ge.pxmid[0],Ye+=Re*Ge.pxmid[1])}Ge.cxFinal=Ie,Ge.cyFinal=Ye;function Ve(Lt,Mt,it,ht){var Qe=ht*(Mt[0]-Lt[0]),Ce=ht*(Mt[1]-Lt[1]);return"a"+ht*ne.r+","+ht*ne.r+" 0 "+Ge.largeArc+(it?" 1 ":" 0 ")+Qe+","+Ce}var dt=ae.hole;if(Ge.v===ne.vTotal){var Dt="M"+(Ie+Ge.px0[0])+","+(Ye+Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!0,1)+Ve(Ge.pxmid,Ge.px0,!0,1)+"Z";dt?Ue.attr("d","M"+(Ie+dt*Ge.px0[0])+","+(Ye+dt*Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!1,dt)+Ve(Ge.pxmid,Ge.px0,!1,dt)+"Z"+Dt):Ue.attr("d",Dt)}else{var Gt=Ve(Ge.px0,Ge.px1,!0,1);if(dt){var kt=1-dt;Ue.attr("d","M"+(Ie+dt*Ge.px1[0])+","+(Ye+dt*Ge.px1[1])+Ve(Ge.px1,Ge.px0,!1,dt)+"l"+kt*Ge.px0[0]+","+kt*Ge.px0[1]+Gt+"Z")}else Ue.attr("d","M"+Ie+","+Ye+"l"+Ge.px0[0]+","+Ge.px0[1]+Gt+"Z")}se(oe,Ge,ne);var zt=h.castOption(ae.textposition,Ge.pts),Bt=qe.selectAll("g.slicetext").data(Ge.text&&zt!=="none"?[0]:[]);Bt.enter().append("g").classed("slicetext",!0),Bt.exit().remove(),Bt.each(function(){var Lt=o.ensureSingle(d.select(this),"text","",function(ut){ut.attr("data-notex",1)}),Mt=o.ensureUniformFontSize(oe,zt==="outside"?m(ae,Ge,G.font):M(ae,Ge,G.font));Lt.text(Ge.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Mt).call(r.convertToTspans,oe);var it=e.bBox(Lt.node()),ht;if(zt==="outside")ht=I(it,Ge);else if(ht=T(it,Ge,ne),zt==="auto"&&ht.scale<1){var Qe=o.ensureUniformFontSize(oe,ae.outsidetextfont);Lt.call(e.font,Qe),it=e.bBox(Lt.node()),ht=I(it,Ge)}var Ce=ht.textPosAngle,je=Ce===void 0?Ge.pxmid:K(ne.r,Ce);if(ht.targetX=Ie+je[0]*ht.rCenter+(ht.x||0),ht.targetY=Ye+je[1]*ht.rCenter+(ht.y||0),ue(ht,it),ht.outside){var rt=ht.targetY;Ge.yLabelMin=rt-it.height/2,Ge.yLabelMid=rt,Ge.yLabelMax=rt+it.height/2,Ge.labelExtraX=0,Ge.labelExtraY=0,me=!0}ht.fontSize=Mt.size,s(ae.type,ht,G),j[_e].transform=ht,Lt.attr("transform",o.getTextTransform(ht))})});var ce=d.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Ge=o.ensureSingle(d.select(this),"text","",function(Ye){Ye.attr("data-notex",1)}),_e=ae.title.text;ae._meta&&(_e=o.templateString(_e,ae._meta)),Ge.text(_e).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(r.convertToTspans,oe);var Ie;ae.title.position==="middle center"?Ie=R(ne):Ie=D(ne,re),Ge.attr("transform",n(Ie.x,Ie.y)+a(Math.min(1,Ie.scale))+n(Ie.tx,Ie.ty))}),me&&X(fe,ae),g(ie,ae),me&&ae.automargin){var ye=e.bBox(Q.node()),xe=ae.domain,ke=re.w*(xe.x[1]-xe.x[0]),Ae=re.h*(xe.y[1]-xe.y[0]),Oe=(.5*ke-ne.r)/re.w,He=(.5*Ae-ne.r)/re.h;l.autoMargin(oe,"pie."+ae.uid+".automargin",{xl:xe.x[0]-Oe,xr:xe.x[1]+Oe,yb:xe.y[0]-He,yt:xe.y[1]+He,l:Math.max(ne.cx-ne.r-ye.left,0),r:Math.max(ye.right-(ne.cx+ne.r),0),b:Math.max(ye.bottom-(ne.cy+ne.r),0),t:Math.max(ne.cy-ne.r-ye.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var j=d.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)}function g(oe,U){oe.each(function(G){var re=d.select(this);if(!G.labelExtraX&&!G.labelExtraY){re.select("path.textline").remove();return}var ee=re.select("g.slicetext text");G.transform.targetX+=G.labelExtraX,G.transform.targetY+=G.labelExtraY,ee.attr("transform",o.getTextTransform(G.transform));var j=G.cxFinal+G.pxmid[0],Q=G.cyFinal+G.pxmid[1],ne="M"+j+","+Q,ae=(G.yLabelMax-G.yLabelMin)*(G.pxmid[0]<0?-1:1)/4;if(G.labelExtraX){var ie=G.labelExtraX*G.pxmid[1]/G.pxmid[0],fe=G.yLabelMid+G.labelExtraY-(G.cyFinal+G.pxmid[1]);Math.abs(ie)>Math.abs(fe)?ne+="l"+fe*G.pxmid[0]/G.pxmid[1]+","+fe+"H"+(j+G.labelExtraX+ae):ne+="l"+G.labelExtraX+","+ie+"v"+(fe-ie)+"h"+ae}else ne+="V"+(G.yLabelMid+G.labelExtraY)+"h"+ae;o.ensureSingle(re,"path","textline").call(w.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:ne,fill:"none"})})}function A(oe,U,G){var re=G[0],ee=re.cx,j=re.cy,Q=re.trace,ne=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),oe.on("mouseover",function(ae){var ie=U._fullLayout,fe=U._fullData[Q.index];if(!(U._dragging||ie.hovermode===!1)){var me=fe.hoverinfo;if(Array.isArray(me)&&(me=b.castHoverinfo({hoverinfo:[h.castOption(me,ae.pts)],_module:Q._module},ie,0)),me==="all"&&(me="label+text+value+percent+name"),fe.hovertemplate||me!=="none"&&me!=="skip"&&me){var ce=ae.rInscribed||0,ye=ee+ae.pxmid[0]*(1-ce),xe=j+ae.pxmid[1]*(1-ce),ke=ie.separators,Ae=[];if(me&&me.indexOf("label")!==-1&&Ae.push(ae.label),ae.text=h.castOption(fe.hovertext||fe.text,ae.pts),me&&me.indexOf("text")!==-1){var Oe=ae.text;o.isValidTextValue(Oe)&&Ae.push(Oe)}ae.value=ae.v,ae.valueLabel=h.formatPieValue(ae.v,ke),me&&me.indexOf("value")!==-1&&Ae.push(ae.valueLabel),ae.percent=ae.v/re.vTotal,ae.percentLabel=h.formatPiePercent(ae.percent,ke),me&&me.indexOf("percent")!==-1&&Ae.push(ae.percentLabel);var He=fe.hoverlabel,Ge=He.font,_e=[];b.loneHover({trace:Q,x0:ye-ce*re.r,x1:ye+ce*re.r,y:xe,_x0:ne?ee+ae.TL[0]:ye-ce*re.r,_x1:ne?ee+ae.TR[0]:ye+ce*re.r,_y0:ne?j+ae.TL[1]:xe-ce*re.r,_y1:ne?j+ae.BL[1]:xe+ce*re.r,text:Ae.join("<br>"),name:fe.hovertemplate||me.indexOf("name")!==-1?fe.name:void 0,idealAlign:ae.pxmid[0]<0?"left":"right",color:h.castOption(He.bgcolor,ae.pts)||ae.color,borderColor:h.castOption(He.bordercolor,ae.pts),fontFamily:h.castOption(Ge.family,ae.pts),fontSize:h.castOption(Ge.size,ae.pts),fontColor:h.castOption(Ge.color,ae.pts),nameLength:h.castOption(He.namelength,ae.pts),textAlign:h.castOption(He.align,ae.pts),hovertemplate:h.castOption(fe.hovertemplate,ae.pts),hovertemplateLabels:ae,eventData:[p(ae,fe)]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:U,inOut_bbox:_e}),ae.bbox=_e[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,U.emit("plotly_hover",{points:[p(ae,fe)],event:d.event})}}),oe.on("mouseout",function(ae){var ie=U._fullLayout,fe=U._fullData[Q.index],me=d.select(this).datum();Q._hasHoverEvent&&(ae.originalEvent=d.event,U.emit("plotly_unhover",{points:[p(me,fe)],event:d.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(b.loneUnhover(ie._hoverlayer.node()),Q._hasHoverLabel=!1)}),oe.on("click",function(ae){var ie=U._fullLayout,fe=U._fullData[Q.index];U._dragging||ie.hovermode===!1||(U._hoverdata=[p(ae,fe)],b.click(U,d.event))})}function m(oe,U,G){var re=h.castOption(oe.outsidetextfont.color,U.pts)||h.castOption(oe.textfont.color,U.pts)||G.color,ee=h.castOption(oe.outsidetextfont.family,U.pts)||h.castOption(oe.textfont.family,U.pts)||G.family,j=h.castOption(oe.outsidetextfont.size,U.pts)||h.castOption(oe.textfont.size,U.pts)||G.size;return{color:re,family:ee,size:j}}function M(oe,U,G){var re=h.castOption(oe.insidetextfont.color,U.pts);!re&&oe._input.textfont&&(re=h.castOption(oe._input.textfont.color,U.pts));var ee=h.castOption(oe.insidetextfont.family,U.pts)||h.castOption(oe.textfont.family,U.pts)||G.family,j=h.castOption(oe.insidetextfont.size,U.pts)||h.castOption(oe.textfont.size,U.pts)||G.size;return{color:re||w.contrast(U.color),family:ee,size:j}}function _(oe,U){for(var G,re,ee=0;ee<oe.length;ee++)if(G=oe[ee][0],re=G.trace,re.title.text){var j=re.title.text;re._meta&&(j=o.templateString(j,re._meta));var Q=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,re.title.font).call(r.convertToTspans,U),ne=e.bBox(Q.node(),!0);G.titleBox={width:ne.width,height:ne.height},Q.remove()}}function T(oe,U,G){var re=G.r||U.rpx1,ee=U.rInscribed,j=U.startangle===U.stopangle;if(j)return{rCenter:1-ee,scale:0,rotate:0,textPosAngle:0};var Q=U.ring,ne=Q===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,ae=U.halfangle,ie=U.midangle,fe=G.trace.insidetextorientation,me=fe==="horizontal",ce=fe==="tangential",ye=fe==="radial",xe=fe==="auto",ke=[],Ae;if(!xe){var Oe=function(Ue,Re){if(x(U,Ue)){var Ve=Math.abs(Ue-U.startangle),dt=Math.abs(Ue-U.stopangle),Dt=Ve<dt?Ve:dt;Re==="tan"?Ae=L(oe,re,Q,Dt,0):Ae=c(oe,re,Q,Dt,Math.PI/2),Ae.textPosAngle=Ue,ke.push(Ae)}},He;if(me||ce){for(He=4;He>=-4;He-=2)Oe(Math.PI*He,"tan");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1),"tan")}if(me||ye){for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1.5),"rad");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+.5),"rad")}}if(ne||xe||me){var Ge=Math.sqrt(oe.width*oe.width+oe.height*oe.height);if(Ae={scale:ee*re*2/Ge,rCenter:1-ee,rotate:0},Ae.textPosAngle=(U.startangle+U.stopangle)/2,Ae.scale>=1)return Ae;ke.push(Ae)}(xe||ye)&&(Ae=c(oe,re,Q,ae,ie),Ae.textPosAngle=(U.startangle+U.stopangle)/2,ke.push(Ae)),(xe||ce)&&(Ae=L(oe,re,Q,ae,ie),Ae.textPosAngle=(U.startangle+U.stopangle)/2,ke.push(Ae));for(var _e=0,Ie=0,Ye=0;Ye<ke.length;Ye++){var qe=ke[Ye].scale;if(Ie<qe&&(Ie=qe,_e=Ye),!xe&&Ie>=1)break}return ke[_e]}function x(oe,U){var G=oe.startangle,re=oe.stopangle;return G>U&&U>re||G<U&&U<re}function c(oe,U,G,re,ee){U=Math.max(0,U-2*f);var j=oe.width/oe.height,Q=P(j,re,U,G);return{scale:Q*2/oe.height,rCenter:S(j,Q/U),rotate:k(ee)}}function L(oe,U,G,re,ee){U=Math.max(0,U-2*f);var j=oe.height/oe.width,Q=P(j,re,U,G);return{scale:Q*2/oe.width,rCenter:S(j,Q/U),rotate:k(ee+Math.PI/2)}}function S(oe,U){return Math.cos(U)-oe*U}function k(oe){return(180/Math.PI*oe+720)%180-90}function P(oe,U,G,re){var ee=oe+1/(2*Math.tan(U));return G*Math.min(1/(Math.sqrt(ee*ee+.5)+ee),re/(Math.sqrt(oe*oe+re/2)+oe))}function z(oe,U){return oe.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin(oe.halfangle)),oe.ring/2)}function I(oe,U){var G=U.pxmid[0],re=U.pxmid[1],ee=oe.width/2,j=oe.height/2;return G<0&&(ee*=-1),re<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:ee+Math.abs(j)*(ee>0?1:-1)/2,y:j/(1+G*G/(re*re)),outside:!0}}function R(oe){var U=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/U,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}function D(oe,U){var G=1,re=1,ee,j=oe.trace,Q={x:oe.cx,y:oe.cy},ne={tx:0,ty:0};ne.ty+=j.title.font.size,ee=Y(j),j.title.position.indexOf("top")!==-1?(Q.y-=(1+ee)*oe.r,ne.ty-=oe.titleBox.height):j.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+ee)*oe.r);var ae=O(oe.r,oe.trace.aspectratio),ie=U.w*(j.domain.x[1]-j.domain.x[0])/2;return j.title.position.indexOf("left")!==-1?(ie=ie+ae,Q.x-=(1+ee)*ae,ne.tx+=oe.titleBox.width/2):j.title.position.indexOf("center")!==-1?ie*=2:j.title.position.indexOf("right")!==-1&&(ie=ie+ae,Q.x+=(1+ee)*ae,ne.tx-=oe.titleBox.width/2),G=ie/oe.titleBox.width,re=F(oe,U)/oe.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(G,re),tx:ne.tx,ty:ne.ty}}function O(oe,U){return oe/(U===void 0?1:U)}function F(oe,U){var G=oe.trace,re=U.h*(G.domain.y[1]-G.domain.y[0]);return Math.min(oe.titleBox.height,re/2)}function Y(oe){var U=oe.pull;if(!U)return 0;var G;if(Array.isArray(U))for(U=0,G=0;G<oe.pull.length;G++)oe.pull[G]>U&&(U=oe.pull[G]);return U}function X(oe,U){var G,re,ee,j,Q,ne,ae,ie,fe,me,ce,ye,xe;function ke(Ge,_e){return Ge.pxmid[1]-_e.pxmid[1]}function Ae(Ge,_e){return _e.pxmid[1]-Ge.pxmid[1]}function Oe(Ge,_e){_e||(_e={});var Ie=_e.labelExtraY+(re?_e.yLabelMax:_e.yLabelMin),Ye=re?Ge.yLabelMin:Ge.yLabelMax,qe=re?Ge.yLabelMax:Ge.yLabelMin,Ue=Ge.cyFinal+Q(Ge.px0[1],Ge.px1[1]),Re=Ie-Ye,Ve,dt,Dt,Gt,kt,zt;if(Re*ae>0&&(Ge.labelExtraY=Re),!!Array.isArray(U.pull))for(dt=0;dt<me.length;dt++)Dt=me[dt],!(Dt===Ge||(h.castOption(U.pull,Ge.pts)||0)>=(h.castOption(U.pull,Dt.pts)||0))&&((Ge.pxmid[1]-Dt.pxmid[1])*ae>0?(Gt=Dt.cyFinal+Q(Dt.px0[1],Dt.px1[1]),Re=Gt-Ye-Ge.labelExtraY,Re*ae>0&&(Ge.labelExtraY+=Re)):(qe+Ge.labelExtraY-Ue)*ae>0&&(Ve=3*ne*Math.abs(dt-me.indexOf(Ge)),kt=Dt.cxFinal+j(Dt.px0[0],Dt.px1[0]),zt=kt+Ve-(Ge.cxFinal+Ge.pxmid[0])-Ge.labelExtraX,zt*ne>0&&(Ge.labelExtraX+=zt)))}for(re=0;re<2;re++)for(ee=re?ke:Ae,Q=re?Math.max:Math.min,ae=re?1:-1,G=0;G<2;G++){for(j=G?Math.max:Math.min,ne=G?1:-1,ie=oe[re][G],ie.sort(ee),fe=oe[1-re][G],me=fe.concat(ie),ye=[],ce=0;ce<ie.length;ce++)ie[ce].yLabelMid!==void 0&&ye.push(ie[ce]);for(xe=!1,ce=0;re&&ce<fe.length;ce++)if(fe[ce].yLabelMid!==void 0){xe=fe[ce];break}for(ce=0;ce<ye.length;ce++){var He=ce&&ye[ce-1];xe&&!ce&&(He=xe),Oe(ye[ce],He)}}}function q(oe,U){for(var G=[],re=0;re<oe.length;re++){var ee=oe[re][0],j=ee.trace,Q=j.domain,ne=U.w*(Q.x[1]-Q.x[0]),ae=U.h*(Q.y[1]-Q.y[0]);j.title.text&&j.title.position!=="middle center"&&(ae-=F(ee,U));var ie=ne/2,fe=ae/2;j.type==="funnelarea"&&!j.scalegroup&&(fe/=j.aspectratio),ee.r=Math.min(ie,fe)/(1+Y(j)),ee.cx=U.l+U.w*(j.domain.x[1]+j.domain.x[0])/2,ee.cy=U.t+U.h*(1-j.domain.y[0])-ae/2,j.title.text&&j.title.position.indexOf("bottom")!==-1&&(ee.cy-=F(ee,U)),j.scalegroup&&G.indexOf(j.scalegroup)===-1&&G.push(j.scalegroup)}$(oe,G)}function $(oe,U){for(var G,re,ee,j=0;j<U.length;j++){var Q=1/0,ne=U[j];for(re=0;re<oe.length;re++)if(G=oe[re][0],ee=G.trace,ee.scalegroup===ne){var ae;if(ee.type==="pie")ae=G.r*G.r;else if(ee.type==="funnelarea"){var ie,fe;ee.aspectratio>1?(ie=G.r,fe=ie/ee.aspectratio):(fe=G.r,ie=fe*ee.aspectratio),ie*=(1+ee.baseratio)/2,ae=ie*fe}Q=Math.min(Q,ae/G.vTotal)}for(re=0;re<oe.length;re++)if(G=oe[re][0],ee=G.trace,ee.scalegroup===ne){var me=Q*G.vTotal;ee.type==="funnelarea"&&(me/=(1+ee.baseratio)/2,me/=ee.aspectratio),G.r=Math.sqrt(me)}}}function V(oe){var U=oe[0],G=U.r,re=U.trace,ee=h.getRotationAngle(re.rotation),j=2*Math.PI/U.vTotal,Q="px0",ne="px1",ae,ie,fe;if(re.direction==="counterclockwise"){for(ae=0;ae<oe.length&&oe[ae].hidden;ae++);if(ae===oe.length)return;ee+=j*oe[ae].v,j*=-1,Q="px1",ne="px0"}for(fe=K(G,ee),ae=0;ae<oe.length;ae++)ie=oe[ae],!ie.hidden&&(ie[Q]=fe,ie.startangle=ee,ee+=j*ie.v/2,ie.pxmid=K(G,ee),ie.midangle=ee,ee+=j*ie.v/2,fe=K(G,ee),ie.stopangle=ee,ie[ne]=fe,ie.largeArc=ie.v>U.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/U.vTotal,.5),ie.ring=1-re.hole,ie.rInscribed=z(ie,U))}function K(oe,U){return[oe*Math.sin(U),-oe*Math.cos(U)]}function se(oe,U,G){var re=oe._fullLayout,ee=G.trace,j=ee.texttemplate,Q=ee.textinfo;if(!j&&Q&&Q!=="none"){var ne=Q.split("+"),ae=function(_e){return ne.indexOf(_e)!==-1},ie=ae("label"),fe=ae("text"),me=ae("value"),ce=ae("percent"),ye=re.separators,xe;if(xe=ie?[U.label]:[],fe){var ke=h.getFirstFilled(ee.text,U.pts);v(ke)&&xe.push(ke)}me&&xe.push(h.formatPieValue(U.v,ye)),ce&&xe.push(h.formatPiePercent(U.v/G.vTotal,ye)),U.text=xe.join("<br>")}function Ae(_e){return{label:_e.label,value:_e.v,valueLabel:h.formatPieValue(_e.v,re.separators),percent:_e.v/G.vTotal,percentLabel:h.formatPiePercent(_e.v/G.vTotal,re.separators),color:_e.color,text:_e.text,customdata:o.castOption(ee,_e.i,"customdata")}}if(j){var Oe=o.castOption(ee,U.i,"texttemplate");if(!Oe)U.text="";else{var He=Ae(U),Ge=h.getFirstFilled(ee.text,U.pts);(v(Ge)||Ge==="")&&(He.text=Ge),U.text=o.texttemplateString(Oe,He,oe._fullLayout._d3locale,He,ee._meta||{})}}}function ue(oe,U){var G=oe.rotate*Math.PI/180,re=Math.cos(G),ee=Math.sin(G),j=(U.left+U.right)/2,Q=(U.top+U.bottom)/2;oe.textX=j*re-Q*ee,oe.textY=j*ee+Q*re,oe.noCenter=!0}B.exports={plot:y,formatSliceLabel:se,transformInsideText:T,determineInsideTextFont:M,positionTitleOutside:D,prerenderTitles:_,layoutAreas:q,attachFxHandlers:A,computeTransform:ue}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(t,B,H){var d=t("@plotly/d3"),l=t("./style_one"),b=t("../bar/uniform_text").resizeText;B.exports=function(e){var o=e._fullLayout._pielayer.selectAll(".trace");b(e,o,"pie"),o.each(function(a){var n=a[0],r=n.trace,u=d.select(this);u.style({opacity:r.opacity}),u.selectAll("path.surface").each(function(s){d.select(this).call(l,s,r)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(t,B,H){var d=t("../../components/color"),l=t("./helpers").castOption;B.exports=function(w,e,o){var a=o.marker.line,n=l(a.color,e.pts)||d.defaultLine,r=l(a.width,e.pts)||0;w.style("stroke-width",r).call(d.fill,e.color).call(d.stroke,n)}},{"../../components/color":366,"./helpers":905}],912:[function(t,B,H){var d=t("../scatter/attributes");B.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(t,B,H){var d=t("../../../stackgl_modules").gl_pointcloud2d,l=t("../../lib/str2rgbarray"),b=t("../../plots/cartesian/autorange").findExtremes,w=t("../scatter/get_trace_color");function e(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=d(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},o.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=w(n,{})},o.updateFast=function(n){var r=this.xData=this.pickXData=n.x,u=this.yData=this.pickYData=n.y,s=this.pickXYData=n.xy,i=n.xbounds&&n.ybounds,f=n.indices,h,p,v,y=this.bounds,g,A,m;if(s){if(v=s,h=s.length>>>1,i)y[0]=n.xbounds[0],y[2]=n.xbounds[1],y[1]=n.ybounds[0],y[3]=n.ybounds[1];else for(m=0;m<h;m++)g=v[m*2],A=v[m*2+1],g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);if(f)p=f;else for(p=new Int32Array(h),m=0;m<h;m++)p[m]=m}else for(h=r.length,v=new Float32Array(2*h),p=new Int32Array(h),m=0;m<h;m++)g=r[m],A=u[m],p[m]=m,v[m*2]=g,v[m*2+1]=A,g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);this.idToIndex=p,this.pointcloudOptions.idToIndex=p,this.pointcloudOptions.positions=v;var M=l(n.marker.color),_=l(n.marker.border.color),T=n.opacity*n.marker.opacity;M[3]*=T,this.pointcloudOptions.color=M;var x=n.marker.blend;if(x===null){var c=100;x=r.length<c||u.length<c}this.pointcloudOptions.blend=x,_[3]*=T,this.pointcloudOptions.borderColor=_;var L=n.marker.sizemin,S=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,z=S/2||.5;n._extremes[k._id]=b(k,[y[0],y[2]],{ppad:z}),n._extremes[P._id]=b(P,[y[1],y[3]],{ppad:z})},o.dispose=function(){this.pointcloud.dispose()};function a(n,r){var u=new e(n,r.uid);return u.update(r),u}B.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(t,B,H){var d=t("../../lib"),l=t("./attributes");B.exports=function(w,e,o){function a(n,r){return d.coerce(w,e,l,n,r)}a("x"),a("y"),a("xbounds"),a("ybounds"),w.xy&&w.xy instanceof Float32Array&&(e.xy=w.xy),w.indices&&w.indices instanceof Int32Array&&(e.indices=w.indices),a("text"),a("marker.color",o),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",o),a("marker.border.arearatio"),e._length=null}},{"../../lib":503,"./attributes":912}],915:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../plots/attributes"),b=t("../../components/color/attributes"),w=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../components/colorscale/attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,i=B.exports=s({hoverinfo:u({},l.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:w.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:u(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("../../plots/get_data").getModuleCalcData,b=t("./plot"),w=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),o=t("../../components/dragelement"),a=t("../../plots/cartesian/select").prepSelect,n=t("../../lib"),r=t("../../registry"),u="sankey";H.name=u,H.baseLayoutAttrOverrides=d({hoverlabel:w.hoverlabel},"plot","nested"),H.plot=function(i){var f=l(i.calcdata,u)[0];b(i,f),H.updateFx(i)},H.clean=function(i,f,h,p){var v=p._has&&p._has(u),y=f._has&&f._has(u);v&&!y&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},H.updateFx=function(i){for(var f=0;f<i._fullData.length;f++)s(i,f)};function s(i,f){var h=i._fullData[f],p=i._fullLayout,v=p.dragmode,y=p.dragmode==="pan"?"move":"crosshair",g=h._bgRect;if(!(v==="pan"||v==="zoom")){e(g,y);var A={_id:"x",c2p:n.identity,_offset:h._sankey.translateX,_length:h._sankey.width},m={_id:"y",c2p:n.identity,_offset:h._sankey.translateY,_length:h._sankey.height},M={gd:i,element:g.node(),plotinfo:{id:f,xaxis:A,yaxis:m,fillRangeItems:n.noop},subplot:f,xaxes:[A],yaxes:[m],doneFnCompleted:function(_){var T=i._fullData[f],x,c=T.node.groups.slice(),L=[];function S(I){for(var R=T._sankey.graph.nodes,D=0;D<R.length;D++)if(R[D].pointNumber===I)return R[D]}for(var k=0;k<_.length;k++){var P=S(_[k].pointNumber);if(!!P)if(P.group){for(var z=0;z<P.childrenNodes.length;z++)L.push(P.childrenNodes[z].pointNumber);c[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}x=c.filter(Boolean).concat([L]),r.call("_guiRestyle",i,{"node.groups":[x]},f)}};M.prepFn=function(_,T,x){a(_,T,x,M,v)},o.init(M)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(t,B,H){var d=t("strongly-connected-components"),l=t("../../lib"),b=t("../../lib/gup").wrap,w=l.isArrayOrTypedArray,e=l.isIndex,o=t("../../components/colorscale");function a(r){var u=r.node,s=r.link,i=[],f=w(s.color),h=w(s.customdata),p={},v={},y=s.colorscales.length,g;for(g=0;g<y;g++){var A=s.colorscales[g],m=o.extractScale(A,{cLetter:"c"}),M=o.makeColorScaleFunc(m);v[A.label]=M}var _=0;for(g=0;g<s.value.length;g++)s.source[g]>_&&(_=s.source[g]),s.target[g]>_&&(_=s.target[g]);var T=_+1;r.node._count=T;var x,c=r.node.groups,L={};for(g=0;g<c.length;g++){var S=c[g];for(x=0;x<S.length;x++){var k=S[x],P=T+g;L.hasOwnProperty(k)?l.warn("Node "+k+" is already part of a group."):L[k]=P}}var z={source:[],target:[]};for(g=0;g<s.value.length;g++){var I=s.value[g],R=s.source[g],D=s.target[g];if(!!(I>0&&e(R,T)&&e(D,T))&&!(L.hasOwnProperty(R)&&L.hasOwnProperty(D)&&L[R]===L[D])){L.hasOwnProperty(D)&&(D=L[D]),L.hasOwnProperty(R)&&(R=L[R]),R=+R,D=+D,p[R]=p[D]=!0;var O="";s.label&&s.label[g]&&(O=s.label[g]);var F=null;O&&v.hasOwnProperty(O)&&(F=v[O]),i.push({pointNumber:g,label:O,color:f?s.color[g]:s.color,customdata:h?s.customdata[g]:s.customdata,concentrationscale:F,source:R,target:D,value:+I}),z.source.push(R),z.target.push(D)}}var Y=T+c.length,X=w(u.color),q=w(u.customdata),$=[];for(g=0;g<Y;g++)if(!!p[g]){var V=u.label[g];$.push({group:g>T-1,childrenNodes:[],pointNumber:g,label:V,color:X?u.color[g]:u.color,customdata:q?u.customdata[g]:u.customdata})}var K=!1;return n(Y,z.source,z.target)&&(K=!0),{circular:K,links:i,nodes:$,groups:c,groupLookup:L}}function n(r,u,s){for(var i=l.init2dArray(r,0),f=0;f<Math.min(u.length,s.length);f++)if(l.isIndex(u[f],r)&&l.isIndex(s[f],r)){if(u[f]===s[f])return!0;i[u[f]].push(s[f])}var h=d(i);return h.components.some(function(p){return p.length>1})}B.exports=function(u,s){var i=a(s);return b({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(t,B,H){B.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("tinycolor2"),e=t("../../plots/domain").defaults,o=t("../../components/fx/hoverlabel_defaults"),a=t("../../plot_api/plot_template"),n=t("../../plots/array_container_defaults");B.exports=function(s,i,f,h){function p(S,k){return d.coerce(s,i,l,S,k)}var v=d.extendDeep(h.hoverlabel,s.hoverlabel),y=s.node,g=a.newContainer(i,"node");function A(S,k){return d.coerce(y,g,l.node,S,k)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",s.hoverinfo),o(y,g,A,v),A("hovertemplate");var m=h.colorway,M=function(S){return m[S%m.length]};A("color",g.label.map(function(S,k){return b.addOpacity(M(k),.8)})),A("customdata");var _=s.link||{},T=a.newContainer(i,"link");function x(S,k){return d.coerce(_,T,l.link,S,k)}x("label"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),o(_,T,x,v),x("hovertemplate");var c=w(h.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",d.repeat(c,T.value.length)),x("customdata"),n(_,T,{name:"colorscales",handleItemDefaults:r}),e(i,h,p),p("orientation"),p("valueformat"),p("valuesuffix");var L;g.x.length&&g.y.length&&(L="freeform"),p("arrangement",L),d.coerceFont(p,"textfont",d.extendFlat({},h.font)),i._length=null};function r(u,s){function i(f,h){return d.coerce(u,s,l.link.colorscales,f,h)}i("label"),i("cmin"),i("cmax"),i("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("./render"),e=t("../../components/fx"),o=t("../../components/color"),a=t("./constants").cn,n=l._;function r(m){return m!==""}function u(m,M){return m.filter(function(_){return _.key===M.traceId})}function s(m,M){d.select(m).select("path").style("fill-opacity",M),d.select(m).select("rect").style("fill-opacity",M)}function i(m){d.select(m).select("text.name").style("fill","black")}function f(m){return function(M){return m.node.sourceLinks.indexOf(M.link)!==-1||m.node.targetLinks.indexOf(M.link)!==-1}}function h(m){return function(M){return M.node.sourceLinks.indexOf(m.link)!==-1||M.node.targetLinks.indexOf(m.link)!==-1}}function p(m,M,_){M&&_&&u(_,M).selectAll("."+a.sankeyLink).filter(f(M)).call(y.bind(0,M,_,!1))}function v(m,M,_){M&&_&&u(_,M).selectAll("."+a.sankeyLink).filter(f(M)).call(g.bind(0,M,_,!1))}function y(m,M,_,T){var x=T.datum().link.label;T.style("fill-opacity",function(c){if(!c.link.concentrationscale)return .4}),x&&u(M,m).selectAll("."+a.sankeyLink).filter(function(c){return c.link.label===x}).style("fill-opacity",function(c){if(!c.link.concentrationscale)return .4}),_&&u(M,m).selectAll("."+a.sankeyNode).filter(h(m)).call(p)}function g(m,M,_,T){var x=T.datum().link.label;T.style("fill-opacity",function(c){return c.tinyColorAlpha}),x&&u(M,m).selectAll("."+a.sankeyLink).filter(function(c){return c.link.label===x}).style("fill-opacity",function(c){return c.tinyColorAlpha}),_&&u(M,m).selectAll(a.sankeyNode).filter(h(m)).call(v)}function A(m,M){var _=m.hoverlabel||{},T=l.nestedProperty(_,M).get();return Array.isArray(T)?!1:T}B.exports=function(M,_){for(var T=M._fullLayout,x=T._paper,c=T._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===a.sankey&&!M._fullData[L]._viewInitial){var S=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(K,se){var ue=se.link;ue.originalEvent=d.event,M._hoverdata=[ue],e.click(M,{target:!0})},P=function(K,se,ue){M._fullLayout.hovermode!==!1&&(d.select(K).call(y.bind(0,se,ue,!0)),se.link.trace.link.hoverinfo!=="skip"&&(se.link.fullData=se.link.trace,M.emit("plotly_hover",{event:d.event,points:[se.link]})))},z=n(M,"source:")+" ",I=n(M,"target:")+" ",R=n(M,"concentration:")+" ",D=n(M,"incoming flow count:")+" ",O=n(M,"outgoing flow count:")+" ",F=function(K,se){if(M._fullLayout.hovermode===!1)return;var ue=se.link.trace.link;if(ue.hoverinfo==="none"||ue.hoverinfo==="skip")return;var oe=[];function U(ae){var ie,fe;ae.circular?(ie=(ae.circularPathData.leftInnerExtent+ae.circularPathData.rightInnerExtent)/2,fe=ae.circularPathData.verticalFullExtent):(ie=(ae.source.x1+ae.target.x0)/2,fe=(ae.y0+ae.y1)/2);var me=[ie,fe];return ae.trace.orientation==="v"&&me.reverse(),me[0]+=se.parent.translateX,me[1]+=se.parent.translateY,me}for(var G=0,re=0;re<se.flow.links.length;re++){var ee=se.flow.links[re];if(!(M._fullLayout.hovermode==="closest"&&se.link.pointNumber!==ee.pointNumber)){se.link.pointNumber===ee.pointNumber&&(G=re),ee.fullData=ee.trace,ue=se.link.trace.link;var j=U(ee),Q={valueLabel:b(se.valueFormat)(ee.value)+se.valueSuffix};oe.push({x:j[0],y:j[1],name:Q.valueLabel,text:[ee.label||"",z+ee.source.label,I+ee.target.label,ee.concentrationscale?R+b("%0.2f")(ee.flow.labelConcentration):""].filter(r).join("<br>"),color:A(ue,"bgcolor")||o.addOpacity(ee.color,1),borderColor:A(ue,"bordercolor"),fontFamily:A(ue,"font.family"),fontSize:A(ue,"font.size"),fontColor:A(ue,"font.color"),nameLength:A(ue,"namelength"),textAlign:A(ue,"align"),idealAlign:d.event.x<j[0]?"right":"left",hovertemplate:ue.hovertemplate,hovertemplateLabels:Q,eventData:[ee]})}}var ne=e.loneHover(oe,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M,anchorIndex:G});ne.each(function(){var ae=this;se.link.concentrationscale||s(ae,.65),i(ae)})},Y=function(K,se,ue){M._fullLayout.hovermode!==!1&&(d.select(K).call(g.bind(0,se,ue,!0)),se.link.trace.link.hoverinfo!=="skip"&&(se.link.fullData=se.link.trace,M.emit("plotly_unhover",{event:d.event,points:[se.link]})),e.loneUnhover(T._hoverlayer.node()))},X=function(K,se,ue){var oe=se.node;oe.originalEvent=d.event,M._hoverdata=[oe],d.select(K).call(v,se,ue),e.click(M,{target:!0})},q=function(K,se,ue){M._fullLayout.hovermode!==!1&&(d.select(K).call(p,se,ue),se.node.trace.node.hoverinfo!=="skip"&&(se.node.fullData=se.node.trace,M.emit("plotly_hover",{event:d.event,points:[se.node]})))},$=function(K,se){if(M._fullLayout.hovermode!==!1){var ue=se.node.trace.node;if(!(ue.hoverinfo==="none"||ue.hoverinfo==="skip")){var oe=d.select(K).select("."+a.nodeRect),U=M._fullLayout._paperdiv.node().getBoundingClientRect(),G=oe.node().getBoundingClientRect(),re=G.left-2-U.left,ee=G.right+2-U.left,j=G.top+G.height/4-U.top,Q={valueLabel:b(se.valueFormat)(se.node.value)+se.valueSuffix};se.node.fullData=se.node.trace,M._fullLayout._calcInverseTransform(M);var ne=M._fullLayout._invScaleX,ae=M._fullLayout._invScaleY,ie=e.loneHover({x0:ne*re,x1:ne*ee,y:ae*j,name:b(se.valueFormat)(se.node.value)+se.valueSuffix,text:[se.node.label,D+se.node.targetLinks.length,O+se.node.sourceLinks.length].filter(r).join("<br>"),color:A(ue,"bgcolor")||se.tinyColorHue,borderColor:A(ue,"bordercolor"),fontFamily:A(ue,"font.family"),fontSize:A(ue,"font.size"),fontColor:A(ue,"font.color"),nameLength:A(ue,"namelength"),textAlign:A(ue,"align"),idealAlign:"left",hovertemplate:ue.hovertemplate,hovertemplateLabels:Q,eventData:[se.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M});s(ie,.85),i(ie)}}},V=function(K,se,ue){M._fullLayout.hovermode!==!1&&(d.select(K).call(v,se,ue),se.node.trace.node.hoverinfo!=="skip"&&(se.node.fullData=se.node.trace,M.emit("plotly_unhover",{event:d.event,points:[se.node]})),e.loneUnhover(T._hoverlayer.node()))};w(M,x,_,{width:c.w,height:c.h,margin:{t:c.t,r:c.r,b:c.b,l:c.l}},{linkEvents:{hover:P,follow:F,unhover:Y,select:k},nodeEvents:{hover:q,follow:$,unhover:V,select:X}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(t,B,H){var d=t("d3-force"),l=t("d3-interpolate").interpolateNumber,b=t("@plotly/d3"),w=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),o=t("./constants"),a=t("tinycolor2"),n=t("../../components/color"),r=t("../../components/drawing"),u=t("../../lib"),s=u.strTranslate,i=u.strRotate,f=t("../../lib/gup"),h=f.keyFun,p=f.repeat,v=f.unwrap,y=t("../../lib/svg_text_utils"),g=t("../../registry"),A=t("../../constants/alignment"),m=A.CAP_SHIFT,M=A.LINE_SPACING,_=3;function T(U,G,re){var ee=v(G),j=ee.trace,Q=j.domain,ne=j.orientation==="h",ae=j.node.pad,ie=j.node.thickness,fe=U.width*(Q.x[1]-Q.x[0]),me=U.height*(Q.y[1]-Q.y[0]),ce=ee._nodes,ye=ee._links,xe=ee.circular,ke;xe?ke=e.sankeyCircular().circularLinkGap(0):ke=w.sankey(),ke.iterations(o.sankeyIterations).size(ne?[fe,me]:[me,fe]).nodeWidth(ie).nodePadding(ae).nodeId(function(kt){return kt.pointNumber}).nodes(ce).links(ye);var Ae=ke();ke.nodePadding()<ae&&u.warn("node.pad was reduced to ",ke.nodePadding()," to fit within the figure.");var Oe,He,Ge;for(var _e in ee._groupLookup){var Ie=parseInt(ee._groupLookup[_e]),Ye;for(Oe=0;Oe<Ae.nodes.length;Oe++)if(Ae.nodes[Oe].pointNumber===Ie){Ye=Ae.nodes[Oe];break}if(!!Ye){var qe={pointNumber:parseInt(_e),x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(qe),Ye.childrenNodes.unshift(qe)}}function Ue(){for(Oe=0;Oe<Ae.nodes.length;Oe++){var kt=Ae.nodes[Oe],zt={},Bt,Lt;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Bt=Lt.source.pointNumber+":"+Lt.target.pointNumber,zt.hasOwnProperty(Bt)||(zt[Bt]=[]),zt[Bt].push(Lt);var Mt=Object.keys(zt);for(He=0;He<Mt.length;He++){Bt=Mt[He];var it=zt[Bt],ht=0,Qe={};for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Qe[Lt.label]||(Qe[Lt.label]=0),Qe[Lt.label]+=Lt.value,ht+=Lt.value;for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Lt.flow={value:ht,labelConcentration:Qe[Lt.label]/ht,concentration:Lt.value/ht,links:it},Lt.concentrationscale&&(Lt.color=a(Lt.concentrationscale(Lt.flow.labelConcentration)))}var Ce=0;for(He=0;He<kt.sourceLinks.length;He++)Ce+=kt.sourceLinks[He].value;for(He=0;He<kt.sourceLinks.length;He++)Lt=kt.sourceLinks[He],Lt.concentrationOut=Lt.value/Ce;var je=0;for(He=0;He<kt.targetLinks.length;He++)je+=kt.targetLinks[He].value;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Lt.concenrationIn=Lt.value/je}}Ue();function Re(kt){kt.forEach(function(zt){var Bt,Lt,Mt=0,it=zt.length,ht;for(zt.sort(function(Qe,Ce){return Qe.y0-Ce.y0}),ht=0;ht<it;++ht)Bt=zt[ht],Bt.y0>=Mt||(Lt=Mt-Bt.y0,Lt>1e-6&&(Bt.y0+=Lt,Bt.y1+=Lt)),Mt=Bt.y1+ae})}function Ve(kt){var zt=kt.map(function(Ce,je){return{x0:Ce.x0,index:je}}).sort(function(Ce,je){return Ce.x0-je.x0}),Bt=[],Lt=-1,Mt,it=-1/0,ht;for(Oe=0;Oe<zt.length;Oe++){var Qe=kt[zt[Oe].index];Qe.x0>it+ie&&(Lt+=1,Mt=Qe.x0),it=Qe.x0,Bt[Lt]||(Bt[Lt]=[]),Bt[Lt].push(Qe),ht=Mt-Qe.x0,Qe.x0+=ht,Qe.x1+=ht}return Bt}if(j.node.x.length&&j.node.y.length){for(Oe=0;Oe<Math.min(j.node.x.length,j.node.y.length,Ae.nodes.length);Oe++)if(j.node.x[Oe]&&j.node.y[Oe]){var dt=[j.node.x[Oe]*fe,j.node.y[Oe]*me];Ae.nodes[Oe].x0=dt[0]-ie/2,Ae.nodes[Oe].x1=dt[0]+ie/2;var Dt=Ae.nodes[Oe].y1-Ae.nodes[Oe].y0;Ae.nodes[Oe].y0=dt[1]-Dt/2,Ae.nodes[Oe].y1=dt[1]+Dt/2}if(j.arrangement==="snap"){ce=Ae.nodes;var Gt=Ve(ce);Re(Gt)}ke.update(Ae)}return{circular:xe,key:re,trace:j,guid:u.randstr(),horizontal:ne,width:fe,height:me,nodePad:j.node.pad,nodeLineColor:j.node.line.color,nodeLineWidth:j.node.line.width,linkLineColor:j.link.line.color,linkLineWidth:j.link.line.width,valueFormat:j.valueformat,valueSuffix:j.valuesuffix,textFont:j.textfont,translateX:Q.x[0]*U.width+U.margin.l,translateY:U.height-Q.y[1]*U.height+U.margin.t,dragParallel:ne?me:fe,dragPerpendicular:ne?fe:me,arrangement:j.arrangement,sankey:ke,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function x(U,G,re){var ee=a(G.color),j=G.source.label+"|"+G.target.label,Q=j+"__"+re;return G.trace=U.trace,G.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:G.pointNumber,link:G,tinyColorHue:n.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:G.flow}}function c(U){var G="",re=U.width/2,ee=U.circularPathData;return U.circularLinkType==="top"?G="M "+ee.targetX+" "+(ee.targetY+re)+" L"+ee.rightInnerExtent+" "+(ee.targetY+re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 1 "+(ee.rightFullExtent-re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 1 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY-re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 0 "+(ee.leftFullExtent-re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 0 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.targetY-re)+"L"+ee.targetX+" "+(ee.targetY-re)+"Z":G="M "+ee.targetX+" "+(ee.targetY-re)+" L"+ee.rightInnerExtent+" "+(ee.targetY-re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 0 "+(ee.rightFullExtent-re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 0 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY+re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 1 "+(ee.leftFullExtent-re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 1 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.targetY+re)+"L"+ee.targetX+" "+(ee.targetY+re)+"Z",G}function L(){var U=.5;function G(re){if(re.link.circular)return c(re.link);var ee=re.link.source.x1,j=re.link.target.x0,Q=l(ee,j),ne=Q(U),ae=Q(1-U),ie=re.link.y0-re.link.width/2,fe=re.link.y0+re.link.width/2,me=re.link.y1-re.link.width/2,ce=re.link.y1+re.link.width/2;return"M"+ee+","+ie+"C"+ne+","+ie+" "+ae+","+me+" "+j+","+me+"L"+j+","+ce+"C"+ae+","+ce+" "+ne+","+fe+" "+ee+","+fe+"Z"}return G}function S(U,G){var re=a(G.color),ee=o.nodePadAcross,j=U.nodePad/2;G.dx=G.x1-G.x0,G.dy=G.y1-G.y0;var Q=G.dx,ne=Math.max(.5,G.dy),ae="node_"+G.pointNumber;return G.group&&(ae=u.randstr()),G.trace=U.trace,G.curveNumber=U.trace.index,{index:G.pointNumber,key:ae,partOfGroup:G.partOfGroup||!1,group:G.group,traceId:U.key,trace:U.trace,node:G,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:ne,zoneX:-ee,zoneY:-j,zoneWidth:Q+2*ee,zoneHeight:ne+2*j,labelY:U.horizontal?G.dy/2+1:G.dx/2+1,left:G.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:n.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,ae].join("_"),interactionState:U.interactionState,figure:U}}function k(U){U.attr("transform",function(G){return s(G.node.x0.toFixed(3),G.node.y0.toFixed(3))})}function P(U){U.call(k)}function z(U,G){U.call(P),G.attr("d",L())}function I(U){U.attr("width",function(G){return G.node.x1-G.node.x0}).attr("height",function(G){return G.visibleHeight})}function R(U){return U.link.width>1||U.linkLineWidth>0}function D(U){var G=s(U.translateX,U.translateY);return G+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(U,G,re){U.on(".basic",null).on("mouseover.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.hover(this,ee,G),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.unhover(this,ee,G),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,G),ee.interactionState.hovered=!1),!ee.interactionState.dragInProgress&&!ee.partOfGroup&&re.select(this,ee,G)})}function F(U,G,re,ee){var j=b.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(u.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(ae){ee._fullLayout._dragCover=ae}),u.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,K(Q.node),Q.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ne=Q.traceId+"|"+Q.key;Q.forceLayouts[ne]?Q.forceLayouts[ne].alpha(1):Y(U,ne,Q),X(U,G,Q,ne,ee)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ne=b.event.x,ae=b.event.y;Q.arrangement==="snap"?(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2,Q.node.y0=ae-Q.visibleHeight/2,Q.node.y1=ae+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2),ae=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,ae)),Q.node.y0=ae-Q.visibleHeight/2,Q.node.y1=ae+Q.visibleHeight/2),K(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),z(U.filter(se(Q)),G))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ne=0;ne<Q.node.childrenNodes.length;ne++)Q.node.childrenNodes[ne].x=Q.node.x,Q.node.childrenNodes[ne].y=Q.node.y;Q.arrangement!=="snap"&&$(Q,ee)}});U.on(".drag",null).call(j)}function Y(U,G,re,ee){ue(re.graph.nodes);var j=re.graph.nodes.filter(function(Q){return Q.originalX===re.node.originalX}).filter(function(Q){return!Q.partOfGroup});re.forceLayouts[G]=d.forceSimulation(j).alphaDecay(0).force("collide",d.forceCollide().radius(function(Q){return Q.dy/2+re.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",q(U,G,j,re)).stop()}function X(U,G,re,ee,j){window.requestAnimationFrame(function Q(){var ne;for(ne=0;ne<o.forceTicksPerFrame;ne++)re.forceLayouts[ee].tick();var ae=re.graph.nodes;if(oe(ae),re.sankey.update(re.graph),z(U.filter(se(re)),G),re.forceLayouts[ee].alpha()>0)window.requestAnimationFrame(Q);else{var ie=re.node.originalX;re.node.x0=ie-re.visibleWidth/2,re.node.x1=ie+re.visibleWidth/2,$(re,j)}})}function q(U,G,re,ee){return function(){for(var Q=0,ne=0;ne<re.length;ne++){var ae=re[ne];ae===ee.interactionState.dragInProgress?(ae.x=ae.lastDraggedX,ae.y=ae.lastDraggedY):(ae.vx=(ae.originalX-ae.x)/o.forceTicksPerFrame,ae.y=Math.min(ee.size-ae.dy/2,Math.max(ae.dy/2,ae.y))),Q=Math.max(Q,Math.abs(ae.vx),Math.abs(ae.vy))}!ee.interactionState.dragInProgress&&Q<.1&&ee.forceLayouts[G].alpha()>0&&ee.forceLayouts[G].alpha(0)}}function $(U,G){for(var re=[],ee=[],j=0;j<U.graph.nodes.length;j++){var Q=(U.graph.nodes[j].x0+U.graph.nodes[j].x1)/2,ne=(U.graph.nodes[j].y0+U.graph.nodes[j].y1)/2;re.push(Q/U.figure.width),ee.push(ne/U.figure.height)}g.call("_guiRestyle",G,{"node.x":[re],"node.y":[ee]},U.trace.index).then(function(){G._fullLayout._dragCover&&G._fullLayout._dragCover.remove()})}function V(U){var G=[],re;for(re=0;re<U.length;re++)U[re].originalX=(U[re].x0+U[re].x1)/2,U[re].originalY=(U[re].y0+U[re].y1)/2,G.indexOf(U[re].originalX)===-1&&G.push(U[re].originalX);for(G.sort(function(ee,j){return ee-j}),re=0;re<U.length;re++)U[re].originalLayerIndex=G.indexOf(U[re].originalX),U[re].originalLayer=U[re].originalLayerIndex/(G.length-1)}function K(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function se(U){return function(G){return G.node.originalX===U.node.originalX}}function ue(U){for(var G=0;G<U.length;G++)U[G].y=(U[G].y0+U[G].y1)/2,U[G].x=(U[G].x0+U[G].x1)/2}function oe(U){for(var G=0;G<U.length;G++)U[G].y0=U[G].y-U[G].dy/2,U[G].y1=U[G].y0+U[G].dy,U[G].x0=U[G].x-U[G].dx/2,U[G].x1=U[G].x0+U[G].dx}B.exports=function(U,G,re,ee,j){var Q=!1;u.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){Q=!0});var ne=U._fullLayout._dragCover,ae=re.filter(function(Ae){return v(Ae).trace.visible}).map(T.bind(null,ee)),ie=G.selectAll("."+o.cn.sankey).data(ae,h);ie.exit().remove(),ie.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),ie.each(function(Ae,Oe){U._fullData[Oe]._sankey=Ae;var He="bgsankey-"+Ae.trace.uid+"-"+Oe;u.ensureSingle(U._fullLayout._draggers,"rect",He),U._fullData[Oe]._bgRect=b.select("."+He),U._fullData[Oe]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ie.transition().ease(o.ease).duration(o.duration).attr("transform",D);var fe=ie.selectAll("."+o.cn.sankeyLinks).data(p,h);fe.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var me=fe.selectAll("."+o.cn.sankeyLink).data(function(Ae){var Oe=Ae.graph.links;return Oe.filter(function(He){return He.value}).map(x.bind(null,Ae))},h);me.enter().append("path").classed(o.cn.sankeyLink,!0).call(O,ie,j.linkEvents),me.style("stroke",function(Ae){return R(Ae)?n.tinyRGB(a(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return R(Ae)?n.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return R(Ae)?Ae.linkLineWidth:1}).attr("d",L()),me.style("opacity",function(){return U._context.staticPlot||Q||ne?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),me.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var ce=ie.selectAll("."+o.cn.sankeyNodeSet).data(p,h);ce.enter().append("g").classed(o.cn.sankeyNodeSet,!0),ce.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=ce.selectAll("."+o.cn.sankeyNode).data(function(Ae){var Oe=Ae.graph.nodes;return V(Oe),Oe.map(S.bind(null,Ae))},h);ye.enter().append("g").classed(o.cn.sankeyNode,!0).call(k).style("opacity",function(Ae){return(U._context.staticPlot||Q)&&!Ae.partOfGroup?1:0}),ye.call(O,ie,j.nodeEvents).call(F,me,j,U),ye.transition().ease(o.ease).duration(o.duration).call(k).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),ye.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var xe=ye.selectAll("."+o.cn.nodeRect).data(p);xe.enter().append("rect").classed(o.cn.nodeRect,!0).call(I),xe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return n.tinyRGB(a(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return n.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),xe.transition().ease(o.ease).duration(o.duration).call(I);var ke=ye.selectAll("."+o.cn.nodeLabel).data(p);ke.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),ke.attr("data-notex",1).text(function(Ae){return Ae.node.label}).each(function(Ae){var Oe=b.select(this);r.font(Oe,Ae.textFont),y.convertToTspans(Oe,U)}).style("text-shadow",y.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}).attr("transform",function(Ae){var Oe=b.select(this),He=y.lineCount(Oe),Ge=Ae.textFont.size*((He-1)*M-m),_e=Ae.nodeLineWidth/2+_,Ie=((Ae.horizontal?Ae.visibleHeight:Ae.visibleWidth)-Ge)/2;Ae.horizontal&&(Ae.left?_e=-_e:_e+=Ae.visibleWidth);var Ye=Ae.horizontal?"":"scale(-1,1)"+i(90);return s(Ae.horizontal?_e:Ie,Ae.horizontal?Ie:_e)+Ye}),ke.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(t,B,H){B.exports=function(l,b){for(var w=l.cd,e=[],o=w[0].trace,a=o._sankey.graph.nodes,n=0;n<a.length;n++){var r=a[n];if(!r.partOfGroup){var u=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];o.orientation==="v"&&u.reverse(),b&&b.contains(u,!1,n,l)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],925:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.texttemplate,b,"txt"),d.mergeArray(w.hovertext,b,"htx"),d.mergeArray(w.customdata,b,"data"),d.mergeArray(w.textposition,b,"tp"),w.textfont&&(d.mergeArrayCastPositive(w.textfont.size,b,"ts"),d.mergeArray(w.textfont.color,b,"tc"),d.mergeArray(w.textfont.family,b,"tf"));var o=w.marker;if(o){d.mergeArrayCastPositive(o.size,b,"ms"),d.mergeArrayCastPositive(o.opacity,b,"mo"),d.mergeArray(o.symbol,b,"mx"),d.mergeArray(o.color,b,"mc");var a=o.line;o.line&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"));var n=o.gradient;n&&n.type!=="none"&&(d.mergeArray(n.type,b,"mgt"),d.mergeArray(n.color,b,"mgc"))}}},{"../../lib":503}],926:[function(t,B,H){var d=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../components/drawing"),n=t("./constants"),r=t("../../lib/extend").extendFlat;function u(f){return{valType:"any",dflt:0,editType:"calc"}}function s(f){return{valType:"any",editType:"calc"}}function i(f){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:u(),yperiod:u(),xperiod0:s(),yperiod0:s(),xperiodalignment:i(),yperiodalignment:i(),xhoverformat:d("x"),yhoverformat:d("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:l({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:r({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},w("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},w("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,o=t("./subtypes"),a=t("./colorscale_calc"),n=t("./arrays_to_calcdata"),r=t("./calc_selection");function u(v,y){var g=v._fullLayout,A=b.getFromId(v,y.xaxis||"x"),m=b.getFromId(v,y.yaxis||"y"),M=A.makeCalcdata(y,"x"),_=m.makeCalcdata(y,"y"),T=w(y,A,"x",M),x=w(y,m,"y",_),c=T.vals,L=x.vals,S=y._length,k=new Array(S),P=y.ids,z=p(y,g,A,m),I=!1,R,D,O,F,Y,X;f(g,y);var q="x",$="y",V;if(z)l.pushUnique(z.traceIndices,y._expandedIndex),R=z.orientation==="v",R?($="s",V="x"):(q="s",V="y"),Y=z.stackgaps==="interpolate";else{var K=i(y,S);s(v,y,A,m,c,L,K)}var se=!!y.xperiodalignment,ue=!!y.yperiodalignment;for(D=0;D<S;D++){var oe=k[D]={},U=d(c[D]),G=d(L[D]);U&&G?(oe[q]=c[D],oe[$]=L[D],se&&(oe.orig_x=M[D],oe.xEnd=T.ends[D],oe.xStart=T.starts[D]),ue&&(oe.orig_y=_[D],oe.yEnd=x.ends[D],oe.yStart=x.starts[D])):z&&(R?U:G)?(oe[V]=R?c[D]:L[D],oe.gap=!0,Y?(oe.s=e,I=!0):oe.s=0):oe[q]=oe[$]=e,P&&(oe.id=String(P[D]))}if(n(k,y),a(v,y),r(k,y),z){for(D=0;D<k.length;)k[D][V]===e?k.splice(D,1):D++;if(l.sort(k,function(Q,ne){return Q[V]-ne[V]||Q.i-ne.i}),I){for(D=0;D<k.length-1&&k[D].gap;)D++;for(X=k[D].s,X||(X=k[D].s=0),O=0;O<D;O++)k[O].s=X;for(F=k.length-1;F>D&&k[F].gap;)F--;for(X=k[F].s,O=k.length-1;O>F;O--)k[O].s=X;for(;D<F;)if(D++,k[D].gap){for(O=D+1;k[O].gap;)O++;for(var re=k[D-1][V],ee=k[D-1].s,j=(k[O].s-ee)/(k[O][V]-re);D<O;)k[D].s=ee+(k[D][V]-re)*j,D++}}}return k}function s(v,y,g,A,m,M,_){var T=y._length,x=v._fullLayout,c=g._id,L=A._id,S=x._firstScatter[h(y)]===y.uid,k=(p(y,x,g,A)||{}).orientation,P=y.fill;g._minDtick=0,A._minDtick=0;var z={padded:!0},I={padded:!0};_&&(z.ppad=I.ppad=_);var R=T<2||m[0]!==m[T-1]||M[0]!==M[T-1];R&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?z.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!o.hasMarkers(y)&&!o.hasText(y))&&(z.padded=!1,z.ppad=0),R&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),c&&(y._extremes[c]=b.findExtremes(g,m,z)),L&&(y._extremes[L]=b.findExtremes(A,M,I))}function i(v,y){if(!!o.hasMarkers(v)){var g=v.marker,A=1.6*(v.marker.sizeref||1),m;if(v.marker.sizemode==="area"?m=function(c){return Math.max(Math.sqrt((c||0)/A),3)}:m=function(c){return Math.max((c||0)/A,3)},l.isArrayOrTypedArray(g.size)){var M={type:"linear"};b.setConvert(M);for(var _=M.makeCalcdata(v.marker,"size"),T=new Array(y),x=0;x<y;x++)T[x]=m(_[x]);return T}else return m(g.size)}}function f(v,y){var g=h(y),A=v._firstScatter;A[g]||(A[g]=y.uid)}function h(v){var y=v.stackgroup;return v.xaxis+v.yaxis+v.type+(y?"-"+y:"")}function p(v,y,g,A){var m=v.stackgroup;if(!!m){var M=y._scatterStackOpts[g._id+A._id][m],_=M.orientation==="v"?A:g;if(_.type==="linear"||_.type==="log")return M}}B.exports={calc:u,calcMarkerSize:i,calcAxisExpansion:s,setFirstScatter:f,getStackOpts:p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){d.isArrayOrTypedArray(w.selectedpoints)&&d.tagSelected(b,w)}},{"../../lib":503}],929:[function(t,B,H){var d=t("../../components/colorscale/helpers").hasColorscale,l=t("../../components/colorscale/calc"),b=t("./subtypes");B.exports=function(e,o){b.hasLines(o)&&d(o,"line")&&l(e,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(o)&&(d(o,"marker")&&l(e,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),d(o,"marker.line")&&l(e,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(t,B,H){B.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(t,B,H){var d=t("./calc");B.exports=function(e,o){var a=o.xaxis,n=o.yaxis,r=a._id+n._id,u=e._fullLayout._scatterStackOpts[r];if(!!u){var s=e.calcdata,i,f,h,p,v,y,g,A,m,M,_,T,x,c,L;for(var S in u){M=u[S];var k=M.traceIndices;if(!!k.length){for(_=M.stackgaps==="interpolate",T=M.groupnorm,M.orientation==="v"?(x="x",c="y"):(x="y",c="x"),L=new Array(k.length),i=0;i<L.length;i++)L[i]=!1;y=s[k[0]];var P=new Array(y.length);for(i=0;i<y.length;i++)P[i]=y[i][x];for(i=1;i<k.length;i++){for(v=s[k[i]],f=h=0;f<v.length;f++){for(g=v[f][x];g>P[h]&&h<P.length;h++)l(v,f,P[h],i,L,_,x),f++;if(g!==P[h]){for(p=0;p<i;p++)l(s[k[p]],h,g,p,L,_,x);P.splice(h,0,g)}h++}for(;h<P.length;h++)l(v,f,P[h],i,L,_,x),f++}var z=P.length;for(f=0;f<y.length;f++){for(A=y[f][c]=y[f].s,i=1;i<k.length;i++)v=s[k[i]],v[0].trace._rawLength=v[0].trace._length,v[0].trace._length=z,A+=v[f].s,v[f][c]=A;if(T)for(m=(T==="fraction"?A:A/100)||1,i=0;i<k.length;i++){var I=s[k[i]][f];I[c]/=m,I.sNorm=I.s/m}}for(i=0;i<k.length;i++){v=s[k[i]];var R=v[0].trace,D=d.calcMarkerSize(R,R._rawLength),O=Array.isArray(D);if(D&&L[i]||O){var F=D;for(D=new Array(z),f=0;f<z;f++)D[f]=v[f].gap?0:O?F[v[f].i]:F}var Y=new Array(z),X=new Array(z);for(f=0;f<z;f++)Y[f]=v[f].x,X[f]=v[f].y;d.calcAxisExpansion(e,R,a,n,Y,X,D),v[0].t.orientation=M.orientation}}}}};function l(w,e,o,a,n,r,u){n[a]=!0;var s={i:null,gap:!0,s:0};if(s[u]=o,w.splice(e,0,s),e&&o===w[e-1][u]){var i=w[e-1];s.s=i.s,s.i=i.i,s.gap=i.gap}else r&&(s.s=b(w,e,o,u));e||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}function b(w,e,o,a){var n=w[e-1],r=w[e+1];return r?n?n.s+(r.s-n.s)*(o-n[a])/(r[a]-n[a]):r.s:n.s}},{"./calc":927}],932:[function(t,B,H){B.exports=function(l){for(var b=0;b<l.length;b++){var w=l[b];if(w.type==="scatter"){var e=w.fill;if(!(e==="none"||e==="toself")&&(w.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var o=b-1;o>=0;o--){var a=l[o];if(a.type==="scatter"&&a.xaxis===w.xaxis&&a.yaxis===w.yaxis){a.opacity=void 0;break}}}}}},{}],933:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./attributes"),w=t("./constants"),e=t("./subtypes"),o=t("./xy_defaults"),a=t("./period_defaults"),n=t("./stack_defaults"),r=t("./marker_defaults"),u=t("./line_defaults"),s=t("./line_shape_defaults"),i=t("./text_defaults"),f=t("./fillcolor_defaults");B.exports=function(p,v,y,g){function A(S,k){return d.coerce(p,v,b,S,k)}var m=o(p,v,g,A);if(m||(v.visible=!1),!!v.visible){a(p,v,g,A),A("xhoverformat"),A("yhoverformat");var M=n(p,v,g,A),_=!M&&m<w.PTS_LINESONLY?"lines+markers":"lines";A("text"),A("hovertext"),A("mode",_),e.hasLines(v)&&(u(p,v,y,g,A),s(p,v,A),A("connectgaps"),A("line.simplify")),e.hasMarkers(v)&&r(p,v,y,g,A,{gradient:!0}),e.hasText(v)&&(A("texttemplate"),i(p,v,g,A));var T=[];(e.hasMarkers(v)||e.hasText(v))&&(A("cliponaxis"),A("marker.maxdisplayed"),T.push("points")),A("fill",M?M.fillDflt:"none"),v.fill!=="none"&&(f(p,v,y,A),e.hasLines(v)||s(p,v,A));var x=(v.line||{}).color,c=(v.marker||{}).color;(v.fill==="tonext"||v.fill==="toself")&&T.push("fills"),A("hoveron",T.join("+")||"points"),v.hoveron!=="fills"&&A("hovertemplate");var L=l.getComponentMethod("errorbars","supplyDefaults");L(p,v,x||c||y,{axis:"y"}),L(p,v,x||c||y,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(v,A)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(t,B,H){var d=t("../../components/color"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a){var n=!1;if(e.marker){var r=e.marker.color,u=(e.marker.line||{}).color;r&&!l(r)?n=r:u&&!l(u)&&(n=u)}a("fillcolor",d.addOpacity((e.line||{}).color||n||o,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a={_fullLayout:e},n=d.getFromTrace(a,w,"x"),r=d.getFromTrace(a,w,"y");return o.xLabel=d.tickText(n,n.c2l(b.x),!0).text,o.yLabel=d.tickText(r,r.c2l(b.y),!0).text,o}},{"../../plots/cartesian/axes":554}],936:[function(t,B,H){var d=t("../../components/color"),l=t("./subtypes");B.exports=function(w,e){var o,a;if(w.mode==="lines")return o=w.line.color,o&&d.opacity(o)?o:w.fillcolor;if(w.mode==="none")return w.fill?w.fillcolor:"";var n=e.mcc||(w.marker||{}).color,r=e.mlcc||((w.marker||{}).line||{}).color;return a=n&&d.opacity(n)?n:r&&d.opacity(r)&&(e.mlw||((w.marker||{}).line||{}).width)?r:"",a?d.opacity(a)<.3?d.addOpacity(a,.3):a:(o=(w.line||{}).color,o&&d.opacity(o)&&l.hasLines(w)&&w.line.width?o:w.fillcolor)}},{"../../components/color":366,"./subtypes":951}],937:[function(t,B,H){var d=t("../../lib"),l=t("../../components/fx"),b=t("../../registry"),w=t("./get_trace_color"),e=t("../../components/color"),o=d.fillText;B.exports=function(n,r,u,s){var i=n.cd,f=i[0].trace,h=n.xa,p=n.ya,v=h.c2p(r),y=p.c2p(u),g=[v,y],A=f.hoveron||"",m=f.mode.indexOf("markers")!==-1?3:.5,M=!!f.xperiodalignment,_=!!f.yperiodalignment;if(A.indexOf("points")!==-1){var T=function(ie){if(M){var fe=h.c2p(ie.xStart),me=h.c2p(ie.xEnd);return v>=Math.min(fe,me)&&v<=Math.max(fe,me)?0:1/0}var ce=Math.max(3,ie.mrc||0),ye=1-1/ce,xe=Math.abs(h.c2p(ie.x)-v);return xe<ce?ye*xe/ce:xe-ce+ye},x=function(ie){if(_){var fe=p.c2p(ie.yStart),me=p.c2p(ie.yEnd);return y>=Math.min(fe,me)&&y<=Math.max(fe,me)?0:1/0}var ce=Math.max(3,ie.mrc||0),ye=1-1/ce,xe=Math.abs(p.c2p(ie.y)-y);return xe<ce?ye*xe/ce:xe-ce+ye},c=function(ie){var fe=Math.max(m,ie.mrc||0),me=h.c2p(ie.x)-v,ce=p.c2p(ie.y)-y;return Math.max(Math.sqrt(me*me+ce*ce)-fe,1-m/fe)},L=l.getDistanceFunction(s,T,x,c);if(l.getClosest(i,L,n),n.index!==!1){var S=i[n.index],k=h.c2p(S.x,!0),P=p.c2p(S.y,!0),z=S.mrc||1;n.index=S.i;var I=i[0].t.orientation,R=I&&(S.sNorm||S.s),D=I==="h"?R:S.orig_x!==void 0?S.orig_x:S.x,O=I==="v"?R:S.orig_y!==void 0?S.orig_y:S.y;return d.extendFlat(n,{color:w(f,S),x0:k-z,x1:k+z,xLabelVal:D,y0:P-z,y1:P+z,yLabelVal:O,spikeDistance:c(S),hovertemplate:f.hovertemplate}),o(S,f,n),b.getComponentMethod("errorbars","hoverInfo")(S,f,n),[n]}}if(A.indexOf("fills")!==-1&&f._polygons){var F=f._polygons,Y=[],X=!1,q=1/0,$=-1/0,V=1/0,K=-1/0,se,ue,oe,U,G,re,ee,j,Q;for(se=0;se<F.length;se++)oe=F[se],oe.contains(g)&&(X=!X,Y.push(oe),V=Math.min(V,oe.ymin),K=Math.max(K,oe.ymax));if(X){V=Math.max(V,0),K=Math.min(K,p._length);var ne=(V+K)/2;for(se=0;se<Y.length;se++)for(U=Y[se].pts,ue=1;ue<U.length;ue++)j=U[ue-1][1],Q=U[ue][1],j>ne!=Q>=ne&&(re=U[ue-1][0],ee=U[ue][0],Q-j&&(G=re+(ee-re)*(ne-j)/(Q-j),q=Math.min(q,G),$=Math.max($,G)));q=Math.max(q,0),$=Math.min($,h._length);var ae=e.defaultLine;return e.opacity(f.fillcolor)?ae=f.fillcolor:e.opacity((f.line||{}).color)&&(ae=f.line.color),d.extendFlat(n,{distance:n.maxHoverDistance,x0:q,x1:$,y0:ne,y1:ne,color:ae,hovertemplate:!1}),delete n.index,f.text&&!Array.isArray(f.text)?n.text=String(f.text):n.text=f.name,[n]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(t,B,H){var d=t("./subtypes");B.exports={hasLines:d.hasLines,hasMarkers:d.hasMarkers,hasText:d.hasText,isBubble:d.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray,l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults");B.exports=function(e,o,a,n,r,u){var s=(e.marker||{}).color;if(r("line.color",a),l(e,"line"))b(e,o,n,r,{prefix:"line.",cLetter:"c"});else{var i=(d(s)?!1:s)||a;r("line.color",i)}r("line.width"),(u||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(t,B,H){var d=t("../../constants/numerical"),l=d.BADNUM,b=d.LOG_CLIP,w=b+.5,e=b-.5,o=t("../../lib"),a=o.segmentsIntersect,n=o.constrain,r=t("./constants");B.exports=function(s,i){var f=i.xaxis,h=i.yaxis,p=f.type==="log",v=h.type==="log",y=f._length,g=h._length,A=i.connectGaps,m=i.baseTolerance,M=i.shape,_=M==="linear",T=i.fill&&i.fill!=="none",x=[],c=r.minTolerance,L=s.length,S=new Array(L),k=0,P,z,I,R,D,O,F,Y,X,q,$,V,K,se,ue,oe;function U(kt){var zt=s[kt];if(!zt)return!1;var Bt=i.linearized?f.l2p(zt.x):f.c2p(zt.x),Lt=i.linearized?h.l2p(zt.y):h.c2p(zt.y);if(Bt===l){if(p&&(Bt=f.c2p(zt.x,!0)),Bt===l)return!1;v&&Lt===l&&(Bt*=Math.abs(f._m*g*(f._m>0?w:e)/(h._m*y*(h._m>0?w:e)))),Bt*=1e3}if(Lt===l){if(v&&(Lt=h.c2p(zt.y,!0)),Lt===l)return!1;Lt*=1e3}return[Bt,Lt]}function G(kt,zt,Bt,Lt){var Mt=Bt-kt,it=Lt-zt,ht=.5-kt,Qe=.5-zt,Ce=Mt*Mt+it*it,je=Mt*ht+it*Qe;if(je>0&&je<Ce){var rt=ht*it-Qe*Mt;if(rt*rt<Ce)return!0}}var re,ee;function j(kt,zt){var Bt=kt[0]/y,Lt=kt[1]/g,Mt=Math.max(0,-Bt,Bt-1,-Lt,Lt-1);return Mt&&re!==void 0&&G(Bt,Lt,re,ee)&&(Mt=0),Mt&&zt&&G(Bt,Lt,zt[0]/y,zt[1]/g)&&(Mt=0),(1+r.toleranceGrowth*Mt)*m}function Q(kt,zt){var Bt=kt[0]-zt[0],Lt=kt[1]-zt[1];return Math.sqrt(Bt*Bt+Lt*Lt)}var ne=r.maxScreensAway,ae=-y*ne,ie=y*(1+ne),fe=-g*ne,me=g*(1+ne),ce=[[ae,fe,ie,fe],[ie,fe,ie,me],[ie,me,ae,me],[ae,me,ae,fe]],ye,xe,ke,Ae,Oe,He;function Ge(kt,zt){for(var Bt=[],Lt=0,Mt=0;Mt<4;Mt++){var it=ce[Mt],ht=a(kt[0],kt[1],zt[0],zt[1],it[0],it[1],it[2],it[3]);ht&&(!Lt||Math.abs(ht.x-Bt[0][0])>1||Math.abs(ht.y-Bt[0][1])>1)&&(ht=[ht.x,ht.y],Lt&&Q(ht,kt)<Q(Bt[0],kt)?Bt.unshift(ht):Bt.push(ht),Lt++)}return Bt}function _e(kt){if(kt[0]<ae||kt[0]>ie||kt[1]<fe||kt[1]>me)return[n(kt[0],ae,ie),n(kt[1],fe,me)]}function Ie(kt,zt){if(kt[0]===zt[0]&&(kt[0]===ae||kt[0]===ie)||kt[1]===zt[1]&&(kt[1]===fe||kt[1]===me))return!0}function Ye(kt,zt){var Bt=[],Lt=_e(kt),Mt=_e(zt);return Lt&&Mt&&Ie(Lt,Mt)||(Lt&&Bt.push(Lt),Mt&&Bt.push(Mt)),Bt}function qe(kt,zt,Bt){return function(Lt,Mt){var it=_e(Lt),ht=_e(Mt),Qe=[];if(it&&ht&&Ie(it,ht))return Qe;it&&Qe.push(it),ht&&Qe.push(ht);var Ce=2*o.constrain((Lt[kt]+Mt[kt])/2,zt,Bt)-((it||Lt)[kt]+(ht||Mt)[kt]);if(Ce){var je;it&&ht?je=Ce>0==it[kt]>ht[kt]?it:ht:je=it||ht,je[kt]+=Ce}return Qe}}var Ue;M==="linear"||M==="spline"?Ue=Ge:M==="hv"||M==="vh"?Ue=Ye:M==="hvh"?Ue=qe(0,ae,ie):M==="vhv"&&(Ue=qe(1,fe,me));function Re(kt,zt){var Bt=zt[0]-kt[0],Lt=(zt[1]-kt[1])/Bt,Mt=(kt[1]*zt[0]-zt[1]*kt[0])/Bt;return Mt>0?[Lt>0?ae:ie,me]:[Lt>0?ie:ae,fe]}function Ve(kt){var zt=kt[0],Bt=kt[1],Lt=zt===S[k-1][0],Mt=Bt===S[k-1][1];if(!(Lt&&Mt))if(k>1){var it=zt===S[k-2][0],ht=Bt===S[k-2][1];Lt&&(zt===ae||zt===ie)&&it?ht?k--:S[k-1]=kt:Mt&&(Bt===fe||Bt===me)&&ht?it?k--:S[k-1]=kt:S[k++]=kt}else S[k++]=kt}function dt(kt){S[k-1][0]!==kt[0]&&S[k-1][1]!==kt[1]&&Ve([ke,Ae]),Ve(kt),Oe=null,ke=Ae=0}function Dt(kt){if(re=kt[0]/y,ee=kt[1]/g,ye=kt[0]<ae?ae:kt[0]>ie?ie:0,xe=kt[1]<fe?fe:kt[1]>me?me:0,ye||xe){if(!k)S[k++]=[ye||kt[0],xe||kt[1]];else if(Oe){var zt=Ue(Oe,kt);zt.length>1&&(dt(zt[0]),S[k++]=zt[1])}else He=Ue(S[k-1],kt)[0],S[k++]=He;var Bt=S[k-1];ye&&xe&&(Bt[0]!==ye||Bt[1]!==xe)?(Oe&&(ke!==ye&&Ae!==xe?Ve(ke&&Ae?Re(Oe,kt):[ke||ye,Ae||xe]):ke&&Ae&&Ve([ke,Ae])),Ve([ye,xe])):ke-ye&&Ae-xe&&Ve([ye||ke,xe||Ae]),Oe=kt,ke=ye,Ae=xe}else Oe&&dt(Ue(Oe,kt)[0]),S[k++]=kt}for(P=0;P<L;P++)if(z=U(P),!!z){for(k=0,Oe=null,Dt(z),P++;P<L;P++){if(R=U(P),!R){if(A)continue;break}if(!_||!i.simplify){Dt(R);continue}var Gt=U(P+1);if(q=Q(R,z),!(!(T&&(k===0||k===L-1))&&q<j(R,Gt)*c)){for(Y=[(R[0]-z[0])/q,(R[1]-z[1])/q],D=z,$=q,V=se=ue=0,F=!1,I=R,P++;P<s.length;P++){if(O=Gt,Gt=U(P+1),!O){if(A)continue;break}if(X=[O[0]-z[0],O[1]-z[1]],oe=X[0]*Y[1]-X[1]*Y[0],se=Math.min(se,oe),ue=Math.max(ue,oe),ue-se>j(O,Gt))break;I=O,K=X[0]*Y[0]+X[1]*Y[1],K>$?($=K,R=O,F=!1):K<V&&(V=K,D=O,F=!0)}if(F?(Dt(R),I!==D&&Dt(D)):(D!==z&&Dt(D),I!==R&&Dt(R)),Dt(I),P>=s.length||!O)break;Dt(O),z=O}}Oe&&Ve([ke||Oe[0],Ae||Oe[1]]),x.push(S.slice(0,k))}return x}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(t,B,H){B.exports=function(l,b,w){var e=w("line.shape");e==="spline"&&w("line.smoothing")}},{}],942:[function(t,B,H){var d={tonextx:1,tonexty:1,tonext:1};B.exports=function(b,w,e){var o,a,n,r,u,s={},i=!1,f=-1,h=0,p=-1;for(a=0;a<e.length;a++)o=e[a][0].trace,n=o.stackgroup||"",n?n in s?u=s[n]:(u=s[n]=h,h++):o.fill in d&&p>=0?u=p:(u=p=h,h++),u<f&&(i=!0),o._groupIndex=f=u;var v=e.slice();i&&v.sort(function(g,A){var m=g[0].trace,M=A[0].trace;return m._groupIndex-M._groupIndex||m.index-M.index});var y={};for(a=0;a<v.length;a++)o=v[a][0].trace,n=o.stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in d&&(r=y[n],o._prevtrace=r||null,r&&(r._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),y[n]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return v}},{}],943:[function(t,B,H){var d=t("fast-isnumeric");B.exports=function(b,w){w||(w=2);var e=b.marker,o=e.sizeref||1,a=e.sizemin||0,n=e.sizemode==="area"?function(r){return Math.sqrt(r/o)}:function(r){return r/o};return function(r){var u=n(r/w);return d(u)&&u>0?Math.max(u,a):0}}},{"fast-isnumeric":190}],944:[function(t,B,H){B.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("./subtypes");B.exports=function(o,a,n,r,u,s){var i=w.isBubble(o),f=(o.line||{}).color,h;if(s=s||{},f&&(n=f),u("marker.symbol"),u("marker.opacity",i?.7:1),u("marker.size"),u("marker.color",n),l(o,"marker")&&b(o,a,r,u,{prefix:"marker.",cLetter:"c"}),s.noSelect||(u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size")),s.noLine||(f&&!Array.isArray(f)&&a.marker.color!==f?h=f:i?h=d.background:h=d.defaultLine,u("marker.line.color",h),l(o,"marker.line")&&b(o,a,r,u,{prefix:"marker.line.",cLetter:"c"}),u("marker.line.width",i?1:0)),i&&(u("marker.sizeref"),u("marker.sizemin"),u("marker.sizemode")),s.gradient){var p=u("marker.gradient.type");p!=="none"&&u("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(t,B,H){var d=t("../../lib").dateTick0,l=t("../../constants/numerical"),b=l.ONEWEEK;function w(e,o){return e%b==0?d(o,1):d(o,0)}B.exports=function(o,a,n,r,u){if(u||(u={x:!0,y:!0}),u.x){var s=r("xperiod");s&&(r("xperiod0",w(s,a.xcalendar)),r("xperiodalignment"))}if(u.y){var i=r("yperiod");i&&(r("yperiod0",w(i,a.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=b.ensureSingle,e=b.identity,o=t("../../components/drawing"),a=t("./subtypes"),n=t("./line_points"),r=t("./link_traces"),u=t("../../lib/polygon").tester;B.exports=function(p,v,y,g,A,m){var M,_,T=!A,x=!!A&&A.duration>0,c=r(p,v,y);if(M=g.selectAll("g.trace").data(c,function(S){return S[0].trace.uid}),M.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),M.order(),s(p,M,v),x){m&&(_=m());var L=d.transition().duration(A.duration).ease(A.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});L.each(function(){g.selectAll("g.trace").each(function(S,k){i(p,k,v,S,c,this,A)})})}else M.each(function(S,k){i(p,k,v,S,c,this,A)});T&&M.exit().remove(),g.selectAll("path:not([d])").remove()};function s(h,p,v){p.each(function(y){var g=w(d.select(this),"g","fills");o.setClipUrl(g,v.layerClipId,h);var A=y[0].trace,m=[];A._ownfill&&m.push("_ownFill"),A._nexttrace&&m.push("_nextFill");var M=g.selectAll("g").data(m,e);M.enter().append("g"),M.exit().each(function(_){A[_]=null}).remove(),M.order().each(function(_){A[_]=w(d.select(this),"path","js-fill")})})}function i(h,p,v,y,g,A,m){var M;f(h,p,v,y,g);var _=!!m&&m.duration>0;function T(Ge){return _?Ge.transition():Ge}var x=v.xaxis,c=v.yaxis,L=y[0].trace,S=L.line,k=d.select(A),P=w(k,"g","errorbars"),z=w(k,"g","lines"),I=w(k,"g","points"),R=w(k,"g","text");if(l.getComponentMethod("errorbars","plot")(h,P,v,m),L.visible!==!0)return;T(k).style("opacity",L.opacity);var D,O,F=L.fill.charAt(L.fill.length-1);F!=="x"&&F!=="y"&&(F=""),y[0][v.isRangePlot?"nodeRangePlot3":"node3"]=k;var Y="",X=[],q=L._prevtrace;q&&(Y=q._prevRevpath||"",O=q._nextFill,X=q._polygons);var $,V,K="",se="",ue,oe,U,G,re,ee,j,Q=[],ne=b.noop;if(D=L._ownFill,a.hasLines(L)||L.fill!=="none"){for(O&&O.datum(y),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(ue=o.steps(S.shape),oe=o.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?ue=oe=function(Ge){var _e=Ge[Ge.length-1];return Ge.length>1&&Ge[0][0]===_e[0]&&Ge[0][1]===_e[1]?o.smoothclosed(Ge.slice(1),S.smoothing):o.smoothopen(Ge,S.smoothing)}:ue=oe=function(Ge){return"M"+Ge.join("L")},U=function(Ge){return oe(Ge.reverse())},Q=n(y,{xaxis:x,yaxis:c,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),j=L._polygons=new Array(Q.length),M=0;M<Q.length;M++)L._polygons[M]=u(Q[M]);Q.length&&(G=Q[0][0],re=Q[Q.length-1],ee=re[re.length-1]),ne=function(Ge){return function(_e){if($=ue(_e),V=U(_e),K?F?(K+="L"+$.substr(1),se=V+("L"+se.substr(1))):(K+="Z"+$,se=V+"Z"+se):(K=$,se=V),a.hasLines(L)&&_e.length>1){var Ie=d.select(this);if(Ie.datum(y),Ge)T(Ie.style("opacity",0).attr("d",$).call(o.lineGroupStyle)).style("opacity",1);else{var Ye=T(Ie);Ye.attr("d",$),o.singleLineStyle(y,Ye)}}}}}var ae=z.selectAll(".js-line").data(Q);T(ae.exit()).style("opacity",0).remove(),ae.each(ne(!1)),ae.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(ne(!0)),o.setClipUrl(ae,v.layerClipId,h);function ie(Ge){T(Ge).attr("d","M0,0Z")}Q.length?(D?(D.datum(y),G&&ee&&(F?(F==="y"?G[1]=ee[1]=c.c2p(0,!0):F==="x"&&(G[0]=ee[0]=x.c2p(0,!0)),T(D).attr("d","M"+ee+"L"+G+"L"+K.substr(1)).call(o.singleFillStyle)):T(D).attr("d",K+"Z").call(o.singleFillStyle))):O&&(L.fill.substr(0,6)==="tonext"&&K&&Y?(L.fill==="tonext"?T(O).attr("d",K+"Z"+Y+"Z").call(o.singleFillStyle):T(O).attr("d",K+"L"+Y.substr(1)+"Z").call(o.singleFillStyle),L._polygons=L._polygons.concat(X)):(ie(O),L._polygons=null)),L._prevRevpath=se,L._prevPolygons=j):(D?ie(D):O&&ie(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function fe(Ge){return Ge.filter(function(_e){return!_e.gap&&_e.vis})}function me(Ge){return Ge.filter(function(_e){return _e.vis})}function ce(Ge){return Ge.filter(function(_e){return!_e.gap})}function ye(Ge){return Ge.id}function xe(Ge){if(Ge.ids)return ye}function ke(){return!1}function Ae(Ge,_e,Ie){var Ye,qe,Ue,Re=Ie[0].trace,Ve=a.hasMarkers(Re),dt=a.hasText(Re),Dt=xe(Re),Gt=ke,kt=ke;if(Ve||dt){var zt=e,Bt=Re.stackgroup,Lt=Bt&&h._fullLayout._scatterStackOpts[x._id+c._id][Bt].stackgaps==="infer zero";Re.marker.maxdisplayed||Re._needsCull?zt=Lt?me:fe:Bt&&!Lt&&(zt=ce),Ve&&(Gt=zt),dt&&(kt=zt)}qe=Ge.selectAll("path.point"),Ye=qe.data(Gt,Dt);var Mt=Ye.enter().append("path").classed("point",!0);_&&Mt.call(o.pointStyle,Re,h).call(o.translatePoints,x,c).style("opacity",0).transition().style("opacity",1),Ye.order();var it;Ve&&(it=o.makePointStyleFns(Re)),Ye.each(function(ht){var Qe=d.select(this),Ce=T(Qe);Ue=o.translatePoint(ht,Ce,x,c),Ue?(o.singlePointStyle(ht,Ce,Re,it,h),v.layerClipId&&o.hideOutsideRangePoint(ht,Ce,x,c,Re.xcalendar,Re.ycalendar),Re.customdata&&Qe.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Ce.remove()}),_?Ye.exit().transition().style("opacity",0).remove():Ye.exit().remove(),qe=_e.selectAll("g"),Ye=qe.data(kt,Dt),Ye.enter().append("g").classed("textpoint",!0).append("text"),Ye.order(),Ye.each(function(ht){var Qe=d.select(this),Ce=T(Qe.select("text"));Ue=o.translatePoint(ht,Ce,x,c),Ue?v.layerClipId&&o.hideOutsideRangePoint(ht,Qe,x,c,Re.xcalendar,Re.ycalendar):Qe.remove()}),Ye.selectAll("text").call(o.textPointStyle,Re,h).each(function(ht){var Qe=x.c2p(ht.x),Ce=c.c2p(ht.y);d.select(this).selectAll("tspan.line").each(function(){T(d.select(this)).attr({x:Qe,y:Ce})})}),Ye.exit().remove()}I.datum(y),R.datum(y),Ae(I,R,y);var Oe=L.cliponaxis===!1,He=Oe?null:v.layerClipId;o.setClipUrl(I,He,h),o.setClipUrl(R,He,h)}function f(h,p,v,y,g){var A=v.xaxis,m=v.yaxis,M=d.extent(b.simpleMap(A.range,A.r2c)),_=d.extent(b.simpleMap(m.range,m.r2c)),T=y[0].trace;if(!!a.hasMarkers(T)){var x=T.marker.maxdisplayed;if(x!==0){var c=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=_[0]&&P.y<=_[1]}),L=Math.ceil(c.length/x),S=0;g.forEach(function(P,z){var I=P[0].trace;a.hasMarkers(I)&&I.marker.maxdisplayed>0&&z<p&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);y.forEach(function(P){delete P.vis}),c.forEach(function(P,z){Math.round((z+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(t,B,H){var d=t("./subtypes");B.exports=function(b,w){var e=b.cd,o=b.xaxis,a=b.yaxis,n=[],r=e[0].trace,u,s,i,f,h=!d.hasMarkers(r)&&!d.hasText(r);if(h)return[];if(w===!1)for(u=0;u<e.length;u++)e[u].selected=0;else for(u=0;u<e.length;u++)s=e[u],i=o.c2p(s.x),f=a.c2p(s.y),s.i!==null&&w.contains([i,f],!1,u,b)?(n.push({pointNumber:s.i,x:o.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0;return n}},{"./subtypes":951}],949:[function(t,B,H){var d=["orientation","groupnorm","stackgaps"];B.exports=function(b,w,e,o){var a=e._scatterStackOpts,n=o("stackgroup");if(n){var r=w.xaxis+w.yaxis,u=a[r];u||(u=a[r]={});var s=u[n],i=!1;s?s.traces.push(w):(s=u[n]={traceIndices:[],traces:[w]},i=!0);for(var f={orientation:w.x&&!w.y?"h":"v"},h=0;h<d.length;h++){var p=d[h],v=p+"Found";if(!s[v]){var y=b[p]!==void 0,g=p==="orientation";if((y||i)&&(s[p]=o(p,f[p]),g&&(s.fillDflt=s[p]==="h"?"tonextx":"tonexty"),y&&(s[v]=!0,!i&&(delete s.traces[0][p],g))))for(var A=0;A<s.traces.length-1;A++){var m=s.traces[A];m._input.fill!==m.fill&&(m.fill=s.fillDflt)}}}return s}}},{}],950:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../registry");function w(n){var r=d.select(n).selectAll("g.trace.scatter");r.style("opacity",function(u){return u[0].trace.opacity}),r.selectAll("g.points").each(function(u){var s=d.select(this),i=u.trace||u[0].trace;e(s,i,n)}),r.selectAll("g.text").each(function(u){var s=d.select(this),i=u.trace||u[0].trace;o(s,i,n)}),r.selectAll("g.trace path.js-line").call(l.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(l.fillGroupStyle),b.getComponentMethod("errorbars","style")(r)}function e(n,r,u){l.pointStyle(n.selectAll("path.point"),r,u)}function o(n,r,u){l.textPointStyle(n.selectAll("text"),r,u)}function a(n,r,u){var s=r[0].trace;s.selectedpoints?(l.selectedPointStyle(u.selectAll("path.point"),s),l.selectedTextStyle(u.selectAll("text"),s)):(e(u,s,n),o(u,s,n))}B.exports={style:w,stylePoints:e,styleText:o,styleOnSelect:a}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(t,B,H){var d=t("../../lib");B.exports={hasLines:function(l){return l.visible&&l.mode&&l.mode.indexOf("lines")!==-1},hasMarkers:function(l){return l.visible&&(l.mode&&l.mode.indexOf("markers")!==-1||l.type==="splom")},hasText:function(l){return l.visible&&l.mode&&l.mode.indexOf("text")!==-1},isBubble:function(l){return d.isPlainObject(l.marker)&&d.isArrayOrTypedArray(l.marker.size)}}},{"../../lib":503}],952:[function(t,B,H){var d=t("../../lib");B.exports=function(l,b,w,e,o){o=o||{},e("textposition"),d.coerceFont(e,"textfont",w.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(t,B,H){var d=t("../../lib"),l=t("../../registry");B.exports=function(w,e,o,a){var n=a("x"),r=a("y"),u,s=l.getComponentMethod("calendars","handleTraceDefaults");if(s(w,e,["x","y"],o),n){var i=d.minRowLength(n);r?u=Math.min(i,d.minRowLength(r)):(u=i,a("y0"),a("dy"))}else{if(!r)return 0;u=d.minRowLength(r),a("x0"),a("dx")}return e._length=u,u}},{"../../lib":503,"../../registry":638}],954:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../plots/attributes"),a=t("../../constants/gl3d_dashes"),n=t("../../constants/gl3d_markers"),r=t("../../lib/extend").extendFlat,u=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),i=d.line,f=d.marker,h=f.line,p=r({width:i.width,dash:{valType:"enumerated",values:s(a),dflt:"solid"}},l("line"));function v(g){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=B.exports=u({x:d.x,y:d.y,z:{valType:"data_array"},text:r({},d.text,{}),texttemplate:e({},{}),hovertext:r({},d.hovertext,{}),hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:r({},d.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:v(),y:v(),z:v()},connectgaps:d.connectgaps,line:p,marker:r({symbol:{valType:"enumerated",values:s(n),dflt:"circle",arrayOk:!0},size:r({},f.size,{dflt:8}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:r({},f.opacity,{arrayOk:!1}),colorbar:f.colorbar,line:r({width:r({},h.width,{arrayOk:!1})},l("marker.line"))},l("marker")),textposition:r({},d.textposition,{dflt:"top center"}),textfont:{color:d.textfont.color,size:d.textfont.size,family:r({},d.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:r({},o.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(t,B,H){var d=t("../scatter/arrays_to_calcdata"),l=t("../scatter/colorscale_calc");B.exports=function(w,e){var o=[{x:!1,y:!1,trace:e,t:{}}];return d(o,e),l(w,e),o}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(t,B,H){var d=t("../../registry");function l(e,o,a,n){if(!o||!o.visible)return null;for(var r=d.getComponentMethod("errorbars","makeComputeError")(o),u=new Array(e.length),s=0;s<e.length;s++){var i=r(+e[s],s);if(n.type==="log"){var f=n.c2l(e[s]),h=e[s]-i[0],p=e[s]+i[1];if(u[s]=[(n.c2l(h,!0)-f)*a,(n.c2l(p,!0)-f)*a],h>0){var v=n.c2l(h);n._lowerLogErrorBound||(n._lowerLogErrorBound=v),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,v)}}else u[s]=[-i[0]*a,i[1]*a]}return u}function b(e){for(var o=0;o<e.length;o++)if(e[o])return e[o].length;return 0}function w(e,o,a){var n=[l(e.x,e.error_x,o[0],a.xaxis),l(e.y,e.error_y,o[1],a.yaxis),l(e.z,e.error_z,o[2],a.zaxis)],r=b(n);if(r===0)return null;for(var u=new Array(r),s=0;s<r;s++){for(var i=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(n[f])for(var h=0;h<2;h++)i[h][f]=n[f][s][h];u[s]=i}return u}B.exports=w},{"../../registry":638}],957:[function(t,B,H){var d=t("../../../stackgl_modules").gl_line3d,l=t("../../../stackgl_modules").gl_scatter3d,b=t("../../../stackgl_modules").gl_error3d,w=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,o=t("../../lib"),a=t("../../lib/str2rgbarray"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/make_bubble_size_func"),u=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),i=t("../../plots/cartesian/axes"),f=t("../../components/fx/helpers").appendArrayPointValue,h=t("./calc_errors");function p(P,z){this.scene=P,this.uid=z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=p.prototype;v.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var z=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[z]||this.textLabels[z]===0)&&(P.textLabel=this.textLabels[z]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[z],this.data.y[z],this.data.z[z]],!0}};function y(P,z,I){var R=(I+1)%3,D=(I+2)%3,O=[],F=[],Y;for(Y=0;Y<P.length;++Y){var X=P[Y];isNaN(X[R])||!isFinite(X[R])||isNaN(X[D])||!isFinite(X[D])||(O.push([X[R],X[D]]),F.push(Y))}var q=e(O);for(Y=0;Y<q.length;++Y)for(var $=q[Y],V=0;V<$.length;++V)$[V]=F[$[V]];return{positions:P,cells:q,meshColor:z}}function g(P){for(var z=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],R=[1,1,1],D=0;D<3;D++){var O=P[D];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(z[D]=O.width/2,I[D]=a(O.color),R[D]=O.thickness)}return{capSize:z,color:I,lineWidth:R}}function A(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function m(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var z=0,I=0,R=[z,I];if(Array.isArray(P))for(var D=0;D<P.length;D++)R[D]=[z,I],P[D]&&(R[D][0]=A(P[D]),R[D][1]=m(P[D]));else R[0]=A(P),R[1]=m(P);return R}function _(P,z){return z(P*4)}function T(P){return s[P]}function x(P,z,I,R,D){var O=null;if(o.isArrayOrTypedArray(P)){O=[];for(var F=0;F<z;F++)P[F]===void 0?O[F]=R:O[F]=I(P[F],D)}else O=I(P,o.identity);return O}function c(P,z){var I=[],R=P.fullSceneLayout,D=P.dataScale,O=R.xaxis,F=R.yaxis,Y=R.zaxis,X=z.marker,q=z.line,$=z.x||[],V=z.y||[],K=z.z||[],se=$.length,ue=z.xcalendar,oe=z.ycalendar,U=z.zcalendar,G,re,ee,j,Q,ne;for(Q=0;Q<se;Q++)G=O.d2l($[Q],0,ue)*D[0],re=F.d2l(V[Q],0,oe)*D[1],ee=Y.d2l(K[Q],0,U)*D[2],I[Q]=[G,re,ee];if(Array.isArray(z.text))ne=z.text;else if(z.text!==void 0)for(ne=new Array(se),Q=0;Q<se;Q++)ne[Q]=z.text;function ae(qe,Ue){var Re=R[qe];return i.tickText(Re,Re.d2l(Ue),!0).text}var ie=z.texttemplate;if(ie){var fe=P.fullLayout,me=fe._d3locale,ce=Array.isArray(ie),ye=ce?Math.min(ie.length,se):se,xe=ce?function(qe){return ie[qe]}:function(){return ie};for(ne=new Array(ye),Q=0;Q<ye;Q++){var ke={x:$[Q],y:V[Q],z:K[Q]},Ae={xLabel:ae("xaxis",$[Q]),yLabel:ae("yaxis",V[Q]),zLabel:ae("zaxis",K[Q])},Oe={};f(Oe,z,Q);var He=z._meta||{};ne[Q]=o.texttemplateString(xe(Q),Ae,me,Oe,ke,He)}}if(j={position:I,mode:z.mode,text:ne},"line"in z&&(j.lineColor=n(q,1,se),j.lineWidth=q.width,j.lineDashes=q.dash),"marker"in z){var Ge=r(z);j.scatterColor=n(X,1,se),j.scatterSize=x(X.size,se,_,20,Ge),j.scatterMarker=x(X.symbol,se,T,"\u25CF"),j.scatterLineWidth=X.line.width,j.scatterLineColor=n(X.line,1,se),j.scatterAngle=0}"textposition"in z&&(j.textOffset=M(z.textposition),j.textColor=n(z.textfont,1,se),j.textSize=x(z.textfont.size,se,o.identity,12),j.textFont=z.textfont.family,j.textAngle=0);var _e=["x","y","z"];for(j.project=[!1,!1,!1],j.projectScale=[1,1,1],j.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Ie=z.projection[_e[Q]];(j.project[Q]=Ie.show)&&(j.projectOpacity[Q]=Ie.opacity,j.projectScale[Q]=Ie.scale)}j.errorBounds=h(z,D,R);var Ye=g([z.error_x,z.error_y,z.error_z]);return j.errorColor=Ye.color,j.errorLineWidth=Ye.lineWidth,j.errorCapSize=Ye.capSize,j.delaunayAxis=z.surfaceaxis,j.delaunayColor=a(z.surfacecolor),j}function L(P){if(o.isArrayOrTypedArray(P)){var z=P[0];return o.isArrayOrTypedArray(z)&&(P=z),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(P){return o.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}v.update=function(P){var z=this.scene.glplot.gl,I,R,D,O,F=u.solid;this.data=P;var Y=c(this.scene,P);"mode"in Y&&(this.mode=Y.mode),"lineDashes"in Y&&Y.lineDashes in u&&(F=u[Y.lineDashes]),this.color=S(Y.scatterColor)||S(Y.lineColor),this.dataPoints=Y.position,I={gl:this.scene.glplot.gl,position:Y.position,color:Y.lineColor,lineWidth:Y.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=d(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var X=P.opacity;if(P.marker&&P.marker.opacity&&(X*=P.marker.opacity),R={gl:this.scene.glplot.gl,position:Y.position,color:Y.scatterColor,size:Y.scatterSize,glyph:Y.scatterMarker,opacity:X,orthographic:!0,lineWidth:Y.scatterLineWidth,lineColor:Y.scatterLineColor,project:Y.project,projectScale:Y.projectScale,projectOpacity:Y.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=l(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:Y.position,glyph:Y.text,color:Y.textColor,size:Y.textSize,angle:Y.textAngle,alignment:Y.textOffset,font:Y.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=l(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:Y.position,color:Y.errorColor,error:Y.errorBounds,lineWidth:Y.errorLineWidth,capSize:Y.errorCapSize,opacity:P.opacity},this.errorBars?Y.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):Y.errorBounds&&(this.errorBars=b(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),Y.delaunayAxis>=0){var q=y(Y.position,Y.delaunayColor,Y.delaunayAxis);q.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(q):(q.gl=z,this.delaunayMesh=w(q),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,z){var I=new p(P,z.uid);return I.update(z),I}B.exports=k},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/text_defaults"),a=t("./attributes");B.exports=function(u,s,i,f){function h(_,T){return l.coerce(u,s,a,_,T)}var p=n(u,s,h,f);if(!p){s.visible=!1;return}h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),h("mode"),b.hasLines(s)&&(h("connectgaps"),e(u,s,i,f,h)),b.hasMarkers(s)&&w(u,s,i,f,h,{noSelect:!0}),b.hasText(s)&&(h("texttemplate"),o(u,s,f,h,{noSelect:!0}));var v=(s.line||{}).color,y=(s.marker||{}).color;h("surfaceaxis")>=0&&h("surfacecolor",v||y);for(var g=["x","y","z"],A=0;A<3;++A){var m="projection."+g[A];h(m+".show")&&(h(m+".opacity"),h(m+".scale"))}var M=d.getComponentMethod("errorbars","supplyDefaults");M(u,s,v||y||i,{axis:"z"}),M(u,s,v||y||i,{axis:"y",inherit:"z"}),M(u,s,v||y||i,{axis:"x",inherit:"z"})};function n(r,u,s,i){var f=0,h=s("x"),p=s("y"),v=s("z"),y=d.getComponentMethod("calendars","handleTraceDefaults");return y(r,u,["x","y","z"],i),h&&p&&v&&(f=Math.min(h.length,p.length,v.length),u._length=u._xlength=u._ylength=u._zlength=f),f}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(t,B,H){B.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/attributes"),b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),o=t("../../lib/extend").extendFlat,a=d.marker,n=d.line,r=a.line;B.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},d.mode,{dflt:"markers"}),text:o({},d.text,{}),texttemplate:w({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},d.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,shape:o({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:d.connectgaps,fill:o({},d.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:d.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:r.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:o({},l.hoverinfo,{flags:["a","b","text","name"]}),hoveron:d.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../scatter/colorscale_calc"),b=t("../scatter/arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,o=t("../carpet/lookup_carpetid");B.exports=function(n,r){var u=r._carpetTrace=o(n,r);if(!(!u||!u.visible||u.visible==="legendonly")){var s;r.xaxis=u.xaxis,r.yaxis=u.yaxis;var i=r._length,f=new Array(i),h,p,v=!1;for(s=0;s<i;s++)if(h=r.a[s],p=r.b[s],d(h)&&d(p)){var y=u.ab2xy(+h,+p,!0),g=u.isVisible(+h,+p);g||(v=!0),f[s]={x:y[0],y:y[1],a:h,b:p,vis:g}}else f[s]={x:!1,y:!1};return r._needsCull=v,f[0].carpet=u,f[0].trace=r,e(r,i),l(n,r),b(f,r),w(f,r),f}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/constants"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,i,f,h){function p(_,T){return d.coerce(s,i,r,_,T)}p("carpet"),i.xaxis="x",i.yaxis="y";var v=p("a"),y=p("b"),g=Math.min(v.length,y.length);if(!g){i.visible=!1;return}i._length=g,p("text"),p("texttemplate"),p("hovertext");var A=g<l.PTS_LINESONLY?"lines+markers":"lines";p("mode",A),b.hasLines(i)&&(e(s,i,f,h,p),o(s,i,p),p("connectgaps")),b.hasMarkers(i)&&w(s,i,f,h,p,{gradient:!0}),b.hasText(i)&&a(s,i,h,p);var m=[];(b.hasMarkers(i)||b.hasText(i))&&(p("marker.maxdisplayed"),m.push("points")),p("fill"),i.fill!=="none"&&(n(s,i,f,p),b.hasLines(i)||o(s,i,p)),(i.fill==="tonext"||i.fill==="toself")&&m.push("fills");var M=p("hoveron",m.join("+")||"points");M!=="fills"&&p("hovertemplate"),d.coerceSelectionMarkerOpacity(i,p)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(t,B,H){B.exports=function(l,b,w,e,o){var a=e[o];return l.a=a.a,l.b=a.b,l.y=a.y,l}},{}],964:[function(t,B,H){B.exports=function(l,b){var w={},e=b._carpet,o=e.ab2ij([l.a,l.b]),a=Math.floor(o[0]),n=o[0]-a,r=Math.floor(o[1]),u=o[1]-r,s=e.evalxy([],a,r,n,u);return w.yLabel=s[1].toFixed(3),w}},{}],965:[function(t,B,H){var d=t("../scatter/hover"),l=t("../../lib").fillText;B.exports=function(w,e,o,a){var n=d(w,e,o,a);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var u=1-r.y0/w.ya._length,s=w.xa._length,i=s*u/2,f=s-i;return r.x0=Math.max(Math.min(r.x0,f),i),r.x1=Math.max(Math.min(r.x1,f),i),n}var h=r.cd[r.index];r.a=h.a,r.b=h.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var p=r.trace,v=p._carpet,y=p._module.formatLabels(h,p);r.yLabel=y.yLabel,delete r.text;var g=[];function A(_,T){var x;_.labelprefix&&_.labelprefix.length>0?x=_.labelprefix.replace(/ = $/,""):x=_._hovertitle,g.push(x+": "+T.toFixed(3)+_.labelsuffix)}if(!p.hovertemplate){var m=h.hi||p.hoverinfo,M=m.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&A(v.aaxis,h.a),M.indexOf("b")!==-1&&A(v.baxis,h.b),g.push("y: "+r.yLabel),M.indexOf("text")!==-1&&l(h,p,g),r.extraText=g.join("<br>")}return n}},{"../../lib":503,"../scatter/hover":937}],966:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../plots/cartesian/axes"),b=t("../../components/drawing");B.exports=function(e,o,a,n){var r,u,s,i=a[0][0].carpet,f={xaxis:l.getFromId(e,i.xaxis||"x"),yaxis:l.getFromId(e,i.yaxis||"y"),plot:o.plot};for(d(e,f,a,n),r=0;r<a.length;r++)u=a[r][0].trace,s=n.selectAll("g.trace"+u.uid+" .js-line"),b.setClipUrl(s,a[r][0].carpet._clipPathId,e)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scatter/attributes"),w=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,r=b.marker,u=b.line,s=r.line;B.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:u.color,width:u.width,dash:o},connectgaps:b.connectgaps,marker:a({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:a({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:a({},w.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/colorscale_calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),o=t("../../lib")._;function a(n){return n&&typeof n=="string"}B.exports=function(r,u){var s=Array.isArray(u.locations),i=s?u.locations.length:u._length,f=new Array(i),h;u.geojson?h=function(m){return a(m)||d(m)}:h=a;for(var p=0;p<i;p++){var v=f[p]={};if(s){var y=u.locations[p];v.loc=h(y)?y:null}else{var g=u.lon[p],A=u.lat[p];d(g)&&d(A)?v.lonlat=[+g,+A]:v.lonlat=[l,l]}}return w(f,u),b(r,u),e(f,u),i&&(f[0].t={labels:{lat:o(r,"lat:")+" ",lon:o(r,"lon:")+" "}}),f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),o=t("../scatter/fillcolor_defaults"),a=t("./attributes");B.exports=function(r,u,s,i){function f(M,_){return d.coerce(r,u,a,M,_)}var h=f("locations"),p;if(h&&h.length){var v=f("geojson"),y;(typeof v=="string"&&v!==""||d.isPlainObject(v))&&(y="geojson-id");var g=f("locationmode",y);g==="geojson-id"&&f("featureidkey"),p=h.length}else{var A=f("lon")||[],m=f("lat")||[];p=Math.min(A.length,m.length)}if(!p){u.visible=!1;return}u._length=p,f("text"),f("hovertext"),f("hovertemplate"),f("mode"),l.hasLines(u)&&(w(r,u,s,i,f),f("connectgaps")),l.hasMarkers(u)&&b(r,u,s,i,f,{gradient:!0}),l.hasText(u)&&(f("texttemplate"),e(r,u,i,f)),f("fill"),u.fill!=="none"&&o(r,u,s,f),d.coerceSelectionMarkerOpacity(u,f)}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(t,B,H){B.exports=function(l,b,w,e,o){l.lon=b.lon,l.lat=b.lat,l.location=b.loc?b.loc:null;var a=e[o];return a.fIn&&a.fIn.properties&&(l.properties=a.fIn.properties),l}},{}],972:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.geo]._subplot,n=a.mockAxis,r=b.lonlat;return o.lonLabel=d.tickText(n,n.c2l(r[0]),!0).text,o.latLabel=d.tickText(n,n.c2l(r[1]),!0).text,o}},{"../../plots/cartesian/axes":554}],973:[function(t,B,H){var d=t("../../components/fx"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/get_trace_color"),w=t("../../lib").fillText,e=t("./attributes");B.exports=function(n,r,u){var s=n.cd,i=s[0].trace,f=n.xa,h=n.ya,p=n.subplot,v=p.projection.isLonLatOverEdges,y=p.project;function g(c){var L=c.lonlat;if(L[0]===l||v(L))return 1/0;var S=y(L),k=y([r,u]),P=Math.abs(S[0]-k[0]),z=Math.abs(S[1]-k[1]),I=Math.max(3,c.mrc||0);return Math.max(Math.sqrt(P*P+z*z)-I,1-3/I)}if(d.getClosest(s,g,n),n.index!==!1){var A=s[n.index],m=A.lonlat,M=[f.c2p(m),h.c2p(m)],_=A.mrc||1;n.x0=M[0]-_,n.x1=M[0]+_,n.y0=M[1]-_,n.y1=M[1]+_,n.loc=A.loc,n.lon=m[0],n.lat=m[1];var T={};T[i.geo]={_subplot:p};var x=i._module.formatLabels(A,i,T);return n.lonLabel=x.lonLabel,n.latLabel=x.latLabel,n.color=b(i,A),n.extraText=o(i,A,n,s[0].t.labels),n.hovertemplate=i.hovertemplate,[n]}};function o(a,n,r,u){if(a.hovertemplate)return;var s=n.hi||a.hoverinfo,i=s==="all"?e.hoverinfo.flags:s.split("+"),f=i.indexOf("location")!==-1&&Array.isArray(a.locations),h=i.indexOf("lon")!==-1,p=i.indexOf("lat")!==-1,v=i.indexOf("text")!==-1,y=[];function g(A){return A+"\xB0"}return f?y.push(n.loc):h&&p?y.push("("+g(r.latLabel)+", "+g(r.lonLabel)+")"):h?y.push(u.lon+g(r.lonLabel)):p&&y.push(u.lat+g(r.latLabel)),v&&w(n,a,y),y.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../lib/topojson_utils").getTopojsonFeatures,w=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),o=t("../../plots/cartesian/autorange").findExtremes,a=t("../../constants/numerical").BADNUM,n=t("../scatter/calc").calcMarkerSize,r=t("../scatter/subtypes"),u=t("./style");function s(f,h,p){var v=h.layers.frontplot.select(".scatterlayer"),y=l.makeTraceGroups(v,p,"trace scattergeo");function g(A,m){A.lonlat[0]===a&&d.select(m).remove()}y.selectAll("*").remove(),y.each(function(A){var m=d.select(this),M=A[0].trace;if(r.hasLines(M)||M.fill!=="none"){var _=w.calcTraceToLineCoords(A),T=M.fill!=="none"?w.makePolygon(_):w.makeLine(_);m.selectAll("path.js-line").data([{geojson:T,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(M)&&m.selectAll("path.point").data(l.identity).enter().append("path").classed("point",!0).each(function(x){g(x,this)}),r.hasText(M)&&m.selectAll("g").data(l.identity).enter().append("g").append("text").each(function(x){g(x,this)}),u(f,A)})}function i(f,h){var p=f[0].trace,v=h[p.geo],y=v._subplot,g=p._length,A,m;if(Array.isArray(p.locations)){var M=p.locationmode,_=M==="geojson-id"?e.extractTraceFeature(f):b(p,y.topojson);for(A=0;A<g;A++){m=f[A];var T=M==="geojson-id"?m.fOut:e.locationToFeature(M,m.loc,_);m.lonlat=T?T.properties.ct:[a,a]}}var x={padded:!0},c,L;if(v.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(p));c=[S[0],S[2]],L=[S[1],S[3]]}else{for(c=new Array(g),L=new Array(g),A=0;A<g;A++)m=f[A],c[A]=m.lonlat[0],L[A]=m.lonlat[1];x.ppad=n(p,g)}p._extremes.lon=o(v.lonaxis._ax,c,x),p._extremes.lat=o(v.lataxis._ax,L,x)}B.exports={calcGeoJSON:i,plot:s}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(t,B,H){var d=t("../scatter/subtypes"),l=t("../../constants/numerical").BADNUM;B.exports=function(w,e){var o=w.cd,a=w.xaxis,n=w.yaxis,r=[],u=o[0].trace,s,i,f,h,p,v=!d.hasMarkers(u)&&!d.hasText(u);if(v)return[];if(e===!1)for(p=0;p<o.length;p++)o[p].selected=0;else for(p=0;p<o.length;p++)s=o[p],i=s.lonlat,i[0]!==l&&(f=a.c2p(i),h=n.c2p(i),e.contains([f,h],null,p,w)?(r.push({pointNumber:p,lon:i[0],lat:i[1]}),s.selected=1):s.selected=0);return r}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../scatter/style"),e=w.stylePoints,o=w.styleText;B.exports=function(r,u){u&&a(r,u)};function a(n,r){var u=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),e(s,u,n),o(s,u,n),s.selectAll("path.js-line").style("fill","none").each(function(i){var f=d.select(this),h=i.trace,p=h.line||{};f.call(b.stroke,p.color).call(l.dashLine,p.dash||"",p.width||0),h.fill!=="none"&&f.call(b.fill,h.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,n=t("./constants").DASHES,r=l.line,u=l.marker,s=u.line,i=B.exports=a({x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:l.text,hovertext:l.hovertext,textposition:l.textposition,textfont:l.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:o({},w("marker"),{symbol:u.symbol,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:u.opacity,colorbar:u.colorbar,line:o({},w("marker.line"),{width:s.width})}),connectgaps:l.connectgaps,fill:o({},l.fill,{dflt:"none"}),fillcolor:l.fillcolor,selected:{marker:l.selected.marker,textfont:l.selected.textfont},unselected:{marker:l.unselected.marker,textfont:l.unselected.textfont},opacity:d.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=l.hovertemplate,i.texttemplate=l.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(t,B,H){var d=t("@plotly/point-cluster"),l=t("../../lib"),b=t("../../plots/cartesian/axis_ids"),w=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),o=t("../scatter/calc"),a=o.calcMarkerSize,n=o.calcAxisExpansion,r=o.setFirstScatter,u=t("../scatter/colorscale_calc"),s=t("./convert"),i=t("./scene_update"),f=t("../../constants/numerical").BADNUM,h=t("./constants").TOO_MANY_POINTS;B.exports=function(g,A){var m=g._fullLayout,M=b.getFromId(g,A.xaxis),_=b.getFromId(g,A.yaxis),T=m._plots[A.xaxis+A.yaxis],x=A._length,c=x>=h,L=x*2,S={},k,P=M.makeCalcdata(A,"x"),z=_.makeCalcdata(A,"y"),I=e(A,M,"x",P),R=e(A,_,"y",z),D=I.vals,O=R.vals;A._x=D,A._y=O,A.xperiodalignment&&(A._origX=P,A._xStarts=I.starts,A._xEnds=I.ends),A.yperiodalignment&&(A._origY=z,A._yStarts=R.starts,A._yEnds=R.ends);var F=new Array(L),Y=new Array(x);for(k=0;k<x;k++)F[k*2]=D[k]===f?NaN:D[k],F[k*2+1]=O[k]===f?NaN:O[k],Y[k]=k;if(M.type==="log")for(k=0;k<L;k+=2)F[k]=M.c2l(F[k]);if(_.type==="log")for(k=1;k<L;k+=2)F[k]=_.c2l(F[k]);c&&M.type!=="log"&&_.type!=="log"?S.tree=d(F):S.ids=Y,u(g,A);var X=v(g,T,A,F,D,O),q=i(g,T);r(m,A);var $;return c?X.marker&&($=X.marker.sizeAvg||Math.max(X.marker.size,3)):$=a(A,x),n(g,A,M,_,D,O,$),X.errorX&&p(A,M,X.errorX),X.errorY&&p(A,_,X.errorY),X.fill&&!q.fill2d&&(q.fill2d=!0),X.marker&&!q.scatter2d&&(q.scatter2d=!0),X.line&&!q.line2d&&(q.line2d=!0),(X.errorX||X.errorY)&&!q.error2d&&(q.error2d=!0),X.text&&!q.glText&&(q.glText=!0),X.marker&&(X.marker.snap=x),q.lineOptions.push(X.line),q.errorXOptions.push(X.errorX),q.errorYOptions.push(X.errorY),q.fillOptions.push(X.fill),q.markerOptions.push(X.marker),q.markerSelectedOptions.push(X.markerSel),q.markerUnselectedOptions.push(X.markerUnsel),q.textOptions.push(X.text),q.textSelectedOptions.push(X.textSel),q.textUnselectedOptions.push(X.textUnsel),q.selectBatch.push([]),q.unselectBatch.push([]),S._scene=q,S.index=q.count,S.x=D,S.y=O,S.positions=F,q.count++,[{x:!1,y:!1,t:S,trace:A}]};function p(y,g,A){var m=y._extremes[g._id],M=w(g,A._bnds,{padded:!0});m.min=m.min.concat(M.min),m.max=m.max.concat(M.max)}function v(y,g,A,m,M,_){var T=s.style(y,A);if(T.marker&&(T.marker.positions=m),T.line&&m.length>1&&l.extendFlat(T.line,s.linePositions(y,A,m)),T.errorX||T.errorY){var x=s.errorBarPositions(y,A,m,M,_);T.errorX&&l.extendFlat(T.errorX,x.x),T.errorY&&l.extendFlat(T.errorY,x.y)}return T.text&&(l.extendFlat(T.text,{positions:m},s.textPosition(y,A,T.text,T.marker)),l.extendFlat(T.textSel,{positions:m},s.textPosition(y,A,T.text,T.markerSel)),l.extendFlat(T.textUnsel,{positions:m},s.textPosition(y,A,T.text,T.markerUnsel))),T}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(t,B,H){var d=20;B.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:d,SYMBOL_STROKE:d/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(t,B,H){var d=t("fast-isnumeric"),l=t("svg-path-sdf"),b=t("color-normalize"),w=t("../../registry"),e=t("../../lib"),o=t("../../components/drawing"),a=t("../../plots/cartesian/axis_ids"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/subtypes"),u=t("../scatter/make_bubble_size_func"),s=t("./helpers"),i=t("./constants"),f=t("../../constants/interactions").DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=t("../../components/fx/helpers").appendArrayPointValue;function v(I,R){var D,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},F=I._context.plotGlPixelRatio;if(R.visible!==!0)return O;if(r.hasText(R)&&(O.text=y(I,R),O.textSel=m(I,R,R.selected),O.textUnsel=m(I,R,R.unselected)),r.hasMarkers(R)&&(O.marker=g(R),O.markerSel=A(R,R.selected),O.markerUnsel=A(R,R.unselected),!R.unselected&&e.isArrayOrTypedArray(R.marker.opacity))){var Y=R.marker.opacity;for(O.markerUnsel.opacity=new Array(Y.length),D=0;D<Y.length;D++)O.markerUnsel.opacity[D]=f*Y[D]}if(r.hasLines(R)){O.line={overlay:!0,thickness:R.line.width*F,color:R.line.color,opacity:R.opacity};var X=(i.DASHES[R.line.dash]||[1]).slice();for(D=0;D<X.length;++D)X[D]*=R.line.width*F;O.line.dashes=X}return R.error_x&&R.error_x.visible&&(O.errorX=M(R,R.error_x,F)),R.error_y&&R.error_y.visible&&(O.errorY=M(R,R.error_y,F)),!!R.fill&&R.fill!=="none"&&(O.fill={closed:!0,fill:R.fillcolor,thickness:0}),O}function y(I,R){var D=I._fullLayout,O=R._length,F=R.textfont,Y=R.textposition,X=Array.isArray(Y)?Y:[Y],q=F.color,$=F.size,V=F.family,K={},se,ue=I._context.plotGlPixelRatio,oe=R.texttemplate;if(oe){K.text=[];var U=D._d3locale,G=Array.isArray(oe),re=G?Math.min(oe.length,O):O,ee=G?function(me){return oe[me]}:function(){return oe};for(se=0;se<re;se++){var j={i:se},Q=R._module.formatLabels(j,R,D),ne={};p(ne,R,se);var ae=R._meta||{};K.text.push(e.texttemplateString(ee(se),Q,U,ne,j,ae))}}else Array.isArray(R.text)&&R.text.length<O?K.text=R.text.slice():K.text=R.text;if(Array.isArray(K.text))for(se=K.text.length;se<O;se++)K.text[se]="";for(K.opacity=R.opacity,K.font={},K.align=[],K.baseline=[],se=0;se<X.length;se++){var ie=X[se].split(/\s+/);switch(ie[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(ie[1])}switch(ie[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(ie[0])}}if(Array.isArray(q))for(K.color=new Array(O),se=0;se<O;se++)K.color[se]=q[se];else K.color=q;if(e.isArrayOrTypedArray($)||Array.isArray(V))for(K.font=new Array(O),se=0;se<O;se++){var fe=K.font[se]={};fe.size=(e.isTypedArray($)?$[se]:Array.isArray($)?d($[se])?$[se]:0:$)*ue,fe.family=Array.isArray(V)?V[se]:V}else K.font={size:$*ue,family:V};return K}function g(I){var R=I._length,D=I.marker,O={},F,Y=e.isArrayOrTypedArray(D.symbol),X=e.isArrayOrTypedArray(D.color),q=e.isArrayOrTypedArray(D.line.color),$=e.isArrayOrTypedArray(D.opacity),V=e.isArrayOrTypedArray(D.size),K=e.isArrayOrTypedArray(D.line.width),se;if(Y||(se=s.isOpenSymbol(D.symbol)),Y||X||q||$){O.colors=new Array(R),O.borderColors=new Array(R);var ue=n(D,D.opacity,R),oe=n(D.line,D.opacity,R);if(!Array.isArray(oe[0])){var U=oe;for(oe=Array(R),F=0;F<R;F++)oe[F]=U}if(!Array.isArray(ue[0])){var G=ue;for(ue=Array(R),F=0;F<R;F++)ue[F]=G}for(O.colors=ue,O.borderColors=oe,F=0;F<R;F++){if(Y){var re=D.symbol[F];se=s.isOpenSymbol(re)}se&&(oe[F]=ue[F].slice(),ue[F]=ue[F].slice(),ue[F][3]=0)}O.opacity=I.opacity}else se?(O.color=b(D.color,"uint8"),O.color[3]=0,O.borderColor=b(D.color,"uint8")):(O.color=b(D.color,"uint8"),O.borderColor=b(D.line.color,"uint8")),O.opacity=I.opacity*D.opacity;if(Y)for(O.markers=new Array(R),F=0;F<R;F++)O.markers[F]=S(D.symbol[F]);else O.marker=S(D.symbol);var ee=1,j=u(I,ee),Q;if(V||K){var ne=O.sizes=new Array(R),ae=O.borderSizes=new Array(R),ie=0,fe;if(V){for(F=0;F<R;F++)ne[F]=j(D.size[F]),ie+=ne[F];fe=ie/R}else for(Q=j(D.size),F=0;F<R;F++)ne[F]=Q;if(K)for(F=0;F<R;F++)ae[F]=D.line.width[F];else for(Q=D.line.width,F=0;F<R;F++)ae[F]=Q;O.sizeAvg=fe}else O.size=j(D&&D.size||10),O.borderSizes=j(D.line.width);return O}function A(I,R){var D=I.marker,O={};return R&&(R.marker&&R.marker.symbol?O=g(e.extendFlat({},D,R.marker)):R.marker&&(R.marker.size&&(O.size=R.marker.size),R.marker.color&&(O.colors=R.marker.color),R.marker.opacity!==void 0&&(O.opacity=R.marker.opacity))),O}function m(I,R,D){var O={};if(!D)return O;if(D.textfont){var F={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:e.extendFlat({},R.textfont)};D.textfont&&e.extendFlat(F.textfont,D.textfont),O=y(I,F)}return O}function M(I,R,D){var O={capSize:R.width*2*D,lineWidth:R.thickness*D,color:R.color};return R.copy_ystyle&&(O=I.error_y),O}var _=i.SYMBOL_SDF_SIZE,T=i.SYMBOL_SIZE,x=i.SYMBOL_STROKE,c={},L=o.symbolFuncs[0](T*.05);function S(I){if(I==="circle")return null;var R,D,O=o.symbolNumber(I),F=o.symbolFuncs[O%100],Y=!!o.symbolNoDot[O%100],X=!!o.symbolNoFill[O%100],q=s.isDotSymbol(I);return c[I]?c[I]:(q&&!Y?R=F(T*1.1)+L:R=F(T),D=l(R,{w:_,h:_,viewBox:[-T,-T,T,T],stroke:X?x:-x}),c[I]=D,D||null)}function k(I,R,D){var O=D.length,F=O/2,Y,X;if(r.hasLines(R)&&F)if(R.line.shape==="hv"){for(Y=[],X=0;X<F-1;X++)isNaN(D[X*2])||isNaN(D[X*2+1])?Y.push(NaN,NaN,NaN,NaN):(Y.push(D[X*2],D[X*2+1]),!isNaN(D[X*2+2])&&!isNaN(D[X*2+3])?Y.push(D[X*2+2],D[X*2+1]):Y.push(NaN,NaN));Y.push(D[O-2],D[O-1])}else if(R.line.shape==="hvh"){for(Y=[],X=0;X<F-1;X++)if(isNaN(D[X*2])||isNaN(D[X*2+1])||isNaN(D[X*2+2])||isNaN(D[X*2+3]))!isNaN(D[X*2])&&!isNaN(D[X*2+1])?Y.push(D[X*2],D[X*2+1]):Y.push(NaN,NaN),Y.push(NaN,NaN);else{var q=(D[X*2]+D[X*2+2])/2;Y.push(D[X*2],D[X*2+1],q,D[X*2+1],q,D[X*2+3])}Y.push(D[O-2],D[O-1])}else if(R.line.shape==="vhv"){for(Y=[],X=0;X<F-1;X++)if(isNaN(D[X*2])||isNaN(D[X*2+1])||isNaN(D[X*2+2])||isNaN(D[X*2+3]))!isNaN(D[X*2])&&!isNaN(D[X*2+1])?Y.push(D[X*2],D[X*2+1]):Y.push(NaN,NaN),Y.push(NaN,NaN);else{var $=(D[X*2+1]+D[X*2+3])/2;Y.push(D[X*2],D[X*2+1],D[X*2],$,D[X*2+2],$)}Y.push(D[O-2],D[O-1])}else if(R.line.shape==="vh"){for(Y=[],X=0;X<F-1;X++)isNaN(D[X*2])||isNaN(D[X*2+1])?Y.push(NaN,NaN,NaN,NaN):(Y.push(D[X*2],D[X*2+1]),!isNaN(D[X*2+2])&&!isNaN(D[X*2+3])?Y.push(D[X*2],D[X*2+3]):Y.push(NaN,NaN));Y.push(D[O-2],D[O-1])}else Y=D;var V=!1;for(X=0;X<Y.length;X++)if(isNaN(Y[X])){V=!0;break}var K=V||Y.length>i.TOO_MANY_POINTS||r.hasMarkers(R)?"rect":"round";if(V&&R.connectgaps){var se=Y[0],ue=Y[1];for(X=0;X<Y.length;X+=2)isNaN(Y[X])||isNaN(Y[X+1])?(Y[X]=se,Y[X+1]=ue):(se=Y[X],ue=Y[X+1])}return{join:K,positions:Y}}function P(I,R,D,O,F){var Y=w.getComponentMethod("errorbars","makeComputeError"),X=a.getFromId(I,R.xaxis),q=a.getFromId(I,R.yaxis),$=D.length/2,V={};function K(se,ue){var oe=ue._id.charAt(0),U=R["error_"+oe];if(U&&U.visible&&(ue.type==="linear"||ue.type==="log")){for(var G=Y(U),re={x:0,y:1}[oe],ee={x:[0,1,2,3],y:[2,3,0,1]}[oe],j=new Float64Array(4*$),Q=1/0,ne=-1/0,ae=0,ie=0;ae<$;ae++,ie+=4){var fe=se[ae];if(d(fe)){var me=D[ae*2+re],ce=G(fe,ae),ye=ce[0],xe=ce[1];if(d(ye)&&d(xe)){var ke=fe-ye,Ae=fe+xe;j[ie+ee[0]]=me-ue.c2l(ke),j[ie+ee[1]]=ue.c2l(Ae)-me,j[ie+ee[2]]=0,j[ie+ee[3]]=0,Q=Math.min(Q,fe-ye),ne=Math.max(ne,fe+xe)}}}V[oe]={positions:D,errors:j,_bnds:[Q,ne]}}}return K(O,X),K(F,q),V}function z(I,R,D,O){var F=R._length,Y={},X;if(r.hasMarkers(R)){var q=D.font,$=D.align,V=D.baseline;for(Y.offset=new Array(F),X=0;X<F;X++){var K=O.sizes?O.sizes[X]:O.size,se=Array.isArray(q)?q[X].size:q.size,ue=Array.isArray($)?$.length>1?$[X]:$[0]:$,oe=Array.isArray(V)?V.length>1?V[X]:V[0]:V,U=h[ue],G=h[oe],re=K?K/.8+1:0,ee=-G*re-G*.5;Y.offset[X]=[U*re/se,ee/se]}}return Y}B.exports={style:v,markerStyle:g,markerSelection:A,linePositions:k,errorBarPositions:P,textPosition:z}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./helpers"),w=t("./attributes"),e=t("../scatter/constants"),o=t("../scatter/subtypes"),a=t("../scatter/xy_defaults"),n=t("../scatter/period_defaults"),r=t("../scatter/marker_defaults"),u=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),i=t("../scatter/text_defaults");B.exports=function(h,p,v,y){function g(L,S){return d.coerce(h,p,w,L,S)}var A=h.marker?b.isOpenSymbol(h.marker.symbol):!1,m=o.isBubble(h),M=a(h,p,y,g);if(!M){p.visible=!1;return}n(h,p,y,g),g("xhoverformat"),g("yhoverformat");var _=M<e.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",_),o.hasLines(p)&&(g("connectgaps"),u(h,p,v,y,g),g("line.shape")),o.hasMarkers(p)&&(r(h,p,v,y,g),g("marker.line.width",A||m?1:0)),o.hasText(p)&&(g("texttemplate"),i(h,p,y,g));var T=(p.line||{}).color,x=(p.marker||{}).color;g("fill"),p.fill!=="none"&&s(h,p,v,g);var c=l.getComponentMethod("errorbars","supplyDefaults");c(h,p,T||x||v,{axis:"y"}),c(h,p,T||x||v,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(p,g)}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../constants/interactions").DESELECTDIM;function w(e){var o=e[0],a=o.trace,n=o.t,r=n._scene,u=n.index,s=r.selectBatch[u],i=r.unselectBatch[u],f=r.textOptions[u],h=r.textSelectedOptions[u]||{},p=r.textUnselectedOptions[u]||{},v=d.extendFlat({},f),y,g;if(s.length||i.length){var A=h.color,m=p.color,M=f.color,_=Array.isArray(M);for(v.color=new Array(a._length),y=0;y<s.length;y++)g=s[y],v.color[g]=A||(_?M[g]:M);for(y=0;y<i.length;y++){g=i[y];var T=_?M[g]:M;v.color[g]=m||(A?T:l.addOpacity(T,b))}}r.glText[u].update(v)}B.exports={styleTextSelection:w}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(t,B,H){var d=t("../scatter/format_labels");B.exports=function(b,w,e){var o=b.i;return"x"in b||(b.x=w._x[o]),"y"in b||(b.y=w._y[o]),d(b,w,e)}},{"../scatter/format_labels":935}],985:[function(t,B,H){var d=t("./constants");H.isOpenSymbol=function(l){return typeof l=="string"?d.OPEN_RE.test(l):l%200>100},H.isDotSymbol=function(l){return typeof l=="string"?d.DOT_RE.test(l):l>200}},{"./constants":980}],986:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../scatter/get_trace_color");function w(o,a,n,r){var u=o.cd,s=u[0].t,i=u[0].trace,f=o.xa,h=o.ya,p=s.x,v=s.y,y=f.c2p(a),g=h.c2p(n),A=o.distance,m;if(s.tree){var M=f.p2c(y-A),_=f.p2c(y+A),T=h.p2c(g-A),x=h.p2c(g+A);r==="x"?m=s.tree.range(Math.min(M,_),Math.min(h._rl[0],h._rl[1]),Math.max(M,_),Math.max(h._rl[0],h._rl[1])):m=s.tree.range(Math.min(M,_),Math.min(T,x),Math.max(M,_),Math.max(T,x))}else m=s.ids;var c,L,S,k,P,z,I,R,D,O=A;if(r==="x"){var F=!!i.xperiodalignment,Y=!!i.yperiodalignment;for(P=0;P<m.length;P++){if(c=m[P],S=p[c],z=Math.abs(f.c2p(S)-y),F){var X=f.c2p(i._xStarts[c]),q=f.c2p(i._xEnds[c]);z=y>=Math.min(X,q)&&y<=Math.max(X,q)?0:1/0}if(z<O){if(O=z,k=v[c],I=h.c2p(k)-g,Y){var $=h.c2p(i._yStarts[c]),V=h.c2p(i._yEnds[c]);I=g>=Math.min($,V)&&g<=Math.max($,V)?0:1/0}D=Math.sqrt(z*z+I*I),L=m[P]}}}else for(P=m.length-1;P>-1;P--)c=m[P],S=p[c],k=v[c],z=f.c2p(S)-y,I=h.c2p(k)-g,R=Math.sqrt(z*z+I*I),R<O&&(O=D=R,L=c);return o.index=L,o.distance=O,o.dxy=D,L===void 0?[o]:[e(o,p,v,i)]}function e(o,a,n,r){var u=o.xa,s=o.ya,i=o.distance,f=o.dxy,h=o.index,p={pointNumber:h,x:a[h],y:n[h]};p.tx=Array.isArray(r.text)?r.text[h]:r.text,p.htx=Array.isArray(r.hovertext)?r.hovertext[h]:r.hovertext,p.data=Array.isArray(r.customdata)?r.customdata[h]:r.customdata,p.tp=Array.isArray(r.textposition)?r.textposition[h]:r.textposition;var v=r.textfont;v&&(p.ts=l.isArrayOrTypedArray(v.size)?v.size[h]:v.size,p.tc=Array.isArray(v.color)?v.color[h]:v.color,p.tf=Array.isArray(v.family)?v.family[h]:v.family);var y=r.marker;y&&(p.ms=l.isArrayOrTypedArray(y.size)?y.size[h]:y.size,p.mo=l.isArrayOrTypedArray(y.opacity)?y.opacity[h]:y.opacity,p.mx=l.isArrayOrTypedArray(y.symbol)?y.symbol[h]:y.symbol,p.mc=l.isArrayOrTypedArray(y.color)?y.color[h]:y.color);var g=y&&y.line;g&&(p.mlc=Array.isArray(g.color)?g.color[h]:g.color,p.mlw=l.isArrayOrTypedArray(g.width)?g.width[h]:g.width);var A=y&&y.gradient;A&&A.type!=="none"&&(p.mgt=Array.isArray(A.type)?A.type[h]:A.type,p.mgc=Array.isArray(A.color)?A.color[h]:A.color);var m=u.c2p(p.x,!0),M=s.c2p(p.y,!0),_=p.mrc||1,T=r.hoverlabel;T&&(p.hbg=Array.isArray(T.bgcolor)?T.bgcolor[h]:T.bgcolor,p.hbc=Array.isArray(T.bordercolor)?T.bordercolor[h]:T.bordercolor,p.hts=l.isArrayOrTypedArray(T.font.size)?T.font.size[h]:T.font.size,p.htc=Array.isArray(T.font.color)?T.font.color[h]:T.font.color,p.htf=Array.isArray(T.font.family)?T.font.family[h]:T.font.family,p.hnl=l.isArrayOrTypedArray(T.namelength)?T.namelength[h]:T.namelength);var x=r.hoverinfo;x&&(p.hi=Array.isArray(x)?x[h]:x);var c=r.hovertemplate;c&&(p.ht=Array.isArray(c)?c[h]:c);var L={};L[o.index]=p;var S=r._origX,k=r._origY,P=l.extendFlat({},o,{color:b(r,p),x0:m-_,x1:m+_,xLabelVal:S?S[h]:p.x,y0:M-_,y1:M+_,yLabelVal:k?k[h]:p.y,cd:L,distance:i,spikeDistance:f,hovertemplate:p.ht});return p.htx?P.text=p.htx:p.tx?P.text=p.tx:r.text&&(P.text=r.text),l.fillText(p,r,P),d.getComponentMethod("errorbars","hoverInfo")(p,r,P),P}B.exports={hoverPoints:w,calcHover:e}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(t,B,H){var d=t("./hover");B.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:d.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(t,B,H){var d=t("regl-scatter2d"),l=t("regl-line2d"),b=t("regl-error2d"),w=t("gl-text"),e=t("../../lib"),o=t("../../components/dragelement/helpers").selectMode,a=t("../../lib/prepare_regl"),n=t("../scatter/subtypes"),r=t("../scatter/link_traces"),u=t("./edit_style").styleTextSelection;function s(i,f,h,p){var v=i._size,y=i.width*p,g=i.height*p,A=v.l*p,m=v.b*p,M=v.r*p,_=v.t*p,T=v.w*p,x=v.h*p;return[A+f.domain[0]*T,m+h.domain[0]*x,y-M-(1-f.domain[1])*T,g-_-(1-h.domain[1])*x]}B.exports=function(f,h,p){if(!!p.length){var v=f._fullLayout,y=h._scene,g=h.xaxis,A=h.yaxis,m,M;if(!!y){var _=a(f,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!_){y.init();return}var T=y.count,x=v._glcanvas.data()[0].regl;if(r(f,h,p),y.dirty){if(y.error2d===!0&&(y.error2d=b(x)),y.line2d===!0&&(y.line2d=l(x)),y.scatter2d===!0&&(y.scatter2d=d(x)),y.fill2d===!0&&(y.fill2d=l(x)),y.glText===!0)for(y.glText=new Array(T),m=0;m<T;m++)y.glText[m]=new w(x);if(y.glText){if(T>y.glText.length){var c=T-y.glText.length;for(m=0;m<c;m++)y.glText.push(new w(x))}else if(T<y.glText.length){var L=y.glText.length-T,S=y.glText.splice(T,L);S.forEach(function(re){re.destroy()})}for(m=0;m<T;m++)y.glText[m].update(y.textOptions[m])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(re){if(re&&re.positions){for(var ee=re.positions,j=0;j<ee.length&&(isNaN(ee[j])||isNaN(ee[j+1]));)j+=2;for(var Q=ee.length-2;Q>j&&(isNaN(ee[Q])||isNaN(ee[Q+1]));)Q-=2;re.positions=ee.slice(j,Q+2)}return re}),y.line2d.update(y.lineOptions)),y.error2d){var k=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(k)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=e.repeat(null,T),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(re,ee){var j=p[ee];if(!(!re||!j||!j[0]||!j[0].trace)){var Q=j[0],ne=Q.trace,ae=Q.t,ie=y.lineOptions[ee],fe,me,ce=[];ne._ownfill&&ce.push(ee),ne._nexttrace&&ce.push(ee+1),ce.length&&(y.fillOrder[ee]=ce);var ye=[],xe=ie&&ie.positions||ae.positions,ke,Ae;if(ne.fill==="tozeroy"){for(ke=0;ke<xe.length&&isNaN(xe[ke+1]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae+1]);)Ae-=2;xe[ke+1]!==0&&(ye=[xe[ke],0]),ye=ye.concat(xe.slice(ke,Ae+2)),xe[Ae+1]!==0&&(ye=ye.concat([xe[Ae],0]))}else if(ne.fill==="tozerox"){for(ke=0;ke<xe.length&&isNaN(xe[ke]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae]);)Ae-=2;xe[ke]!==0&&(ye=[0,xe[ke+1]]),ye=ye.concat(xe.slice(ke,Ae+2)),xe[Ae]!==0&&(ye=ye.concat([0,xe[Ae+1]]))}else if(ne.fill==="toself"||ne.fill==="tonext"){for(ye=[],fe=0,re.splitNull=!0,me=0;me<xe.length;me+=2)(isNaN(xe[me])||isNaN(xe[me+1]))&&(ye=ye.concat(xe.slice(fe,me)),ye.push(xe[fe],xe[fe+1]),ye.push(null,null),fe=me+2);ye=ye.concat(xe.slice(fe)),fe&&ye.push(xe[fe],xe[fe+1])}else{var Oe=ne._nexttrace;if(Oe){var He=y.lineOptions[ee+1];if(He){var Ge=He.positions;if(ne.fill==="tonexty"){for(ye=xe.slice(),ee=Math.floor(Ge.length/2);ee--;){var _e=Ge[ee*2],Ie=Ge[ee*2+1];isNaN(_e)||isNaN(Ie)||ye.push(_e,Ie)}re.fill=Oe.fillcolor}}}}if(ne._prevtrace&&ne._prevtrace.fill==="tonext"){var Ye=y.lineOptions[ee-1].positions,qe=ye.length/2;fe=qe;var Ue=[fe];for(me=0;me<Ye.length;me+=2)(isNaN(Ye[me])||isNaN(Ye[me+1]))&&(Ue.push(me/2+qe+1),fe=me+2);ye=ye.concat(Ye),re.hole=Ue}return re.fillmode=ne.fill,re.opacity=ne.opacity,re.positions=ye,re}}),y.fill2d.update(y.fillOptions))}var P=v.dragmode,z=o(P),I=v.clickmode.indexOf("select")>-1;for(m=0;m<T;m++){var R=p[m][0],D=R.trace,O=R.t,F=O.index,Y=D._length,X=O.x,q=O.y;if(D.selectedpoints||z||I){if(z||(z=!0),D.selectedpoints){var $=y.selectBatch[F]=e.selIndices2selPoints(D),V={};for(M=0;M<$.length;M++)V[$[M]]=1;var K=[];for(M=0;M<Y;M++)V[M]||K.push(M);y.unselectBatch[F]=K}var se=O.xpx=new Array(Y),ue=O.ypx=new Array(Y);for(M=0;M<Y;M++)se[M]=g.c2p(X[M]),ue[M]=A.c2p(q[M])}else O.xpx=O.ypx=null}if(z){if(y.select2d||(y.select2d=d(v._glcanvas.data()[1].regl)),y.scatter2d){var oe=new Array(T);for(m=0;m<T;m++)oe[m]=y.selectBatch[m].length||y.unselectBatch[m].length?y.markerUnselectedOptions[m]:{};y.scatter2d.update(oe)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&p.forEach(function(re){var ee=((re||[])[0]||{}).trace||{};n.hasText(ee)&&u(re)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var U={viewport:s(v,g,A,f._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(A._rl||A.range)[0],(g._rl||g.range)[1],(A._rl||A.range)[1]]},G=e.repeat(U,y.count);y.fill2d&&y.fill2d.update(G),y.line2d&&y.line2d.update(G),y.error2d&&y.error2d.update(G.concat(G)),y.scatter2d&&y.scatter2d.update(G),y.select2d&&y.select2d.update(G),y.glText&&y.glText.forEach(function(re){re.update(U)})}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=w._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return w._scene||(e=w._scene={},e.init=function(){d.extendFlat(e,a,o)},e.init(),e.update=function(r){var u=d.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(u),e.scatter2d&&e.scatter2d.update(u),e.line2d&&e.line2d.update(u),e.error2d&&e.error2d.update(u.concat(u)),e.select2d&&e.select2d.update(u),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(r)},e.draw=function(){for(var r=e.count,u=e.fill2d,s=e.error2d,i=e.line2d,f=e.scatter2d,h=e.glText,p=e.select2d,v=e.selectBatch,y=e.unselectBatch,g=0;g<r;g++){if(u&&e.fillOrder[g]&&u.draw(e.fillOrder[g]),i&&e.lineOptions[g]&&i.draw(g),s&&(e.errorXOptions[g]&&s.draw(g),e.errorYOptions[g]&&s.draw(g+r)),f&&e.markerOptions[g])if(y[g].length){var A=d.repeat([],e.count);A[g]=y[g],f.draw(A)}else v[g].length||f.draw(g);h[g]&&e.textOptions[g]&&h[g].render()}p&&p.draw(v),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,w._scene=null}),e.dirty||d.extendFlat(e,o),e}},{"../../lib":503}],990:[function(t,B,H){var d=t("../scatter/subtypes"),l=t("./edit_style").styleTextSelection;B.exports=function(w,e){var o=w.cd,a=w.xaxis,n=w.yaxis,r=[],u=o[0].trace,s=o[0].t,i=u._length,f=s.x,h=s.y,p=s._scene,v=s.index;if(!p)return r;var y=d.hasText(u),g=d.hasMarkers(u),A=!g&&!y;if(u.visible!==!0||A)return r;var m=[],M=[];if(e!==!1&&!e.degenerate)for(var _=0;_<i;_++)e.contains([s.xpx[_],s.ypx[_]],!1,_,w)?(m.push(_),r.push({pointNumber:_,x:a.c2d(f[_]),y:n.c2d(h[_])})):M.push(_);if(g){var T=p.scatter2d;if(!m.length&&!M.length){var x=new Array(p.count);x[v]=p.markerOptions[v],T.update.apply(T,x)}else if(!p.selectBatch[v].length&&!p.unselectBatch[v].length){var c=new Array(p.count);c[v]=p.markerUnselectedOptions[v],T.update.apply(T,c)}}return p.selectBatch[v]=m,p.unselectBatch[v]=M,y&&l(o),r}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scattergeo/attributes"),w=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),o=t("../../plots/attributes"),a=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,u=b.line,s=b.marker;B.exports=r({lon:b.lon,lat:b.lat,mode:n({},w.mode,{dflt:"markers"}),text:n({},w.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},w.hovertext,{}),line:{color:u.color,width:u.width},connectgaps:w.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},a("marker")),fill:b.fill,fillcolor:w.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:w.selected.marker},unselected:{marker:w.unselected.marker},hoverinfo:n({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM,w=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),o=t("../../components/drawing"),a=t("../scatter/make_bubble_size_func"),n=t("../scatter/subtypes"),r=t("../../plots/mapbox/convert_text_opts"),u=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,i=t("../../lib/svg_text_utils").BR_TAG_ALL;B.exports=function(m,M){var _=M[0].trace,T=_.visible===!0&&_._length!==0,x=_.fill!=="none",c=n.hasLines(_),L=n.hasMarkers(_),S=n.hasText(_),k=L&&_.marker.symbol==="circle",P=L&&_.marker.symbol!=="circle",z=f(),I=f(),R=f(),D=f(),O={fill:z,line:I,circle:R,symbol:D};if(!T)return O;var F;if((x||c)&&(F=w.calcTraceToLineCoords(M)),x&&(z.geojson=w.makePolygon(F),z.layout.visibility="visible",l.extendFlat(z.paint,{"fill-color":_.fillcolor})),c&&(I.geojson=w.makeLine(F),I.layout.visibility="visible",l.extendFlat(I.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),k){var Y=h(M);R.geojson=Y.geojson,R.layout.visibility="visible",l.extendFlat(R.paint,{"circle-color":Y.mcc,"circle-radius":Y.mrc,"circle-opacity":Y.mo})}if((P||S)&&(D.geojson=p(M,m),l.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(l.extendFlat(D.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&_.marker.angle!=="auto"&&l.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=_.marker.allowoverlap,l.extendFlat(D.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),S)){var X=(_.marker||{}).size,q=r(_.textposition,X);l.extendFlat(D.layout,{"text-size":_.textfont.size,"text-anchor":q.anchor,"text-offset":q.offset}),l.extendFlat(D.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return O};function f(){return{geojson:w.makeBlank(),layout:{visibility:"none"},paint:{}}}function h(A){var m=A[0].trace,M=m.marker,_=m.selectedpoints,T=l.isArrayOrTypedArray(M.color),x=l.isArrayOrTypedArray(M.size),c=l.isArrayOrTypedArray(M.opacity),L;function S(q){return m.opacity*q}function k(q){return q/2}var P;T&&(e.hasColorscale(m,"marker")?P=e.makeColorScaleFuncFromTrace(M):P=l.identity);var z;x&&(z=a(m));var I;c&&(I=function(q){var $=d(q)?+l.constrain(q,0,1):0;return S($)});var R=[];for(L=0;L<A.length;L++){var D=A[L],O=D.lonlat;if(!g(O)){var F={};P&&(F.mcc=D.mcc=P(D.mc)),z&&(F.mrc=D.mrc=z(D.ms)),I&&(F.mo=I(D.mo)),_&&(F.selected=D.selected||0),R.push({type:"Feature",geometry:{type:"Point",coordinates:O},properties:F})}}var Y;if(_)for(Y=o.makeSelectedPointStyleFns(m),L=0;L<R.length;L++){var X=R[L].properties;Y.selectedOpacityFn&&(X.mo=S(Y.selectedOpacityFn(X))),Y.selectedColorFn&&(X.mcc=Y.selectedColorFn(X)),Y.selectedSizeFn&&(X.mrc=Y.selectedSizeFn(X))}return{geojson:{type:"FeatureCollection",features:R},mcc:T||Y&&Y.selectedColorFn?{type:"identity",property:"mcc"}:M.color,mrc:x||Y&&Y.selectedSizeFn?{type:"identity",property:"mrc"}:k(M.size),mo:c||Y&&Y.selectedOpacityFn?{type:"identity",property:"mo"}:S(M.opacity)}}function p(A,m){for(var M=m._fullLayout,_=A[0].trace,T=_.marker||{},x=T.symbol,c=T.angle,L=x!=="circle"?v(x):y,S=c!=="auto"?v(c,!0):y,k=n.hasText(_)?v(_.text):y,P=[],z=0;z<A.length;z++){var I=A[z];if(!g(I.lonlat)){var R=_.texttemplate,D;if(R){var O=Array.isArray(R)?R[z]||"":R,F=_._module.formatLabels(I,_,M),Y={};u(Y,_,I.i);var X=_._meta||{};D=l.texttemplateString(O,F,M._d3locale,Y,I,X)}else D=k(z);D&&(D=D.replace(s,"").replace(i,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:I.lonlat},properties:{symbol:L(z),angle:S(z),text:D}})}}return{type:"FeatureCollection",features:P}}function v(A,m){return l.isArrayOrTypedArray(A)?m?function(M){return d(A[M])?+A[M]:0}:function(M){return A[M]}:A?function(){return A}:y}function y(){return""}function g(A){return A[0]===b}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),o=t("../scatter/fillcolor_defaults"),a=t("./attributes");B.exports=function(u,s,i,f){function h(y,g){return d.coerce(u,s,a,y,g)}var p=n(u,s,h);if(!p){s.visible=!1;return}if(h("text"),h("texttemplate"),h("hovertext"),h("hovertemplate"),h("mode"),h("below"),l.hasLines(s)&&(w(u,s,i,f,h,{noDash:!0}),h("connectgaps")),l.hasMarkers(s)){b(u,s,i,f,h,{noLine:!0}),h("marker.allowoverlap"),h("marker.angle");var v=s.marker;v.symbol!=="circle"&&(d.isArrayOrTypedArray(v.size)&&(v.size=v.size[0]),d.isArrayOrTypedArray(v.color)&&(v.color=v.color[0]))}l.hasText(s)&&e(u,s,f,h,{noSelect:!0}),h("fill"),s.fill!=="none"&&o(u,s,i,h),d.coerceSelectionMarkerOpacity(s,h)};function n(r,u,s){var i=s("lon")||[],f=s("lat")||[],h=Math.min(i.length,f.length);return u._length=h,h}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(t,B,H){B.exports=function(l,b){return l.lon=b.lon,l.lat=b.lat,l}},{}],995:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot,n=a.mockAxis,r=b.lonlat;return o.lonLabel=d.tickText(n,n.c2l(r[0]),!0).text,o.latLabel=d.tickText(n,n.c2l(r[1]),!0).text,o}},{"../../plots/cartesian/axes":554}],996:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../scatter/get_trace_color"),w=l.fillText,e=t("../../constants/numerical").BADNUM;function o(n,r,u){var s=n.cd,i=s[0].trace,f=n.xa,h=n.ya,p=n.subplot,v=r>=0?Math.floor((r+180)/360):Math.ceil((r-180)/360),y=v*360,g=r-y;function A(k){var P=k.lonlat;if(P[0]===e)return 1/0;var z=l.modHalf(P[0],360),I=P[1],R=p.project([z,I]),D=R.x-f.c2p([g,I]),O=R.y-h.c2p([z,u]),F=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(D*D+O*O)-F,1-3/F)}if(d.getClosest(s,A,n),n.index!==!1){var m=s[n.index],M=m.lonlat,_=[l.modHalf(M[0],360)+y,M[1]],T=f.c2p(_),x=h.c2p(_),c=m.mrc||1;n.x0=T-c,n.x1=T+c,n.y0=x-c,n.y1=x+c;var L={};L[i.subplot]={_subplot:p};var S=i._module.formatLabels(m,i,L);return n.lonLabel=S.lonLabel,n.latLabel=S.latLabel,n.color=b(i,m),n.extraText=a(i,m,s[0].t.labels),n.hovertemplate=i.hovertemplate,[n]}}function a(n,r,u){if(n.hovertemplate)return;var s=r.hi||n.hoverinfo,i=s.split("+"),f=i.indexOf("all")!==-1,h=i.indexOf("lon")!==-1,p=i.indexOf("lat")!==-1,v=r.lonlat,y=[];function g(A){return A+"\xB0"}return f||h&&p?y.push("("+g(v[1])+", "+g(v[0])+")"):h?y.push(u.lon+g(v[0])):p&&y.push(u.lat+g(v[1])),(f||i.indexOf("text")!==-1)&&w(r,n,y),y.join("<br>")}B.exports={hoverPoints:o,getExtraText:a}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(d,l){if(l){var b=l[0].trace;b._glTrace.update(l)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(t,B,H){var d=t("./convert"),l=t("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function w(o,a){this.type="scattermapbox",this.subplot=o,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:l+a+"-fill",line:l+a+"-line",circle:l+a+"-circle",symbol:l+a+"-symbol"},this.below=null}var e=w.prototype;e.addSource=function(o,a){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:a.geojson})},e.setSourceData=function(o,a){this.subplot.map.getSource(this.sourceIds[o]).setData(a.geojson)},e.addLayer=function(o,a,n){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:a.layout,paint:a.paint},n)},e.update=function(a){var n=this.subplot,r=n.map,u=d(n.gd,a),s=n.belowLookup["trace-"+this.uid],i,f,h;if(s!==this.below){for(i=b.length-1;i>=0;i--)f=b[i],r.removeLayer(this.layerIds[f]);for(i=0;i<b.length;i++)f=b[i],h=u[f],this.addLayer(f,h,s);this.below=s}for(i=0;i<b.length;i++)f=b[i],h=u[f],n.setOptions(this.layerIds[f],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(this.setSourceData(f,h),n.setOptions(this.layerIds[f],"setPaintProperty",h.paint));a[0].trace._glTrace=this},e.dispose=function(){for(var a=this.subplot.map,n=b.length-1;n>=0;n--){var r=b[n];a.removeLayer(this.layerIds[r]),a.removeSource(this.sourceIds[r])}},B.exports=function(a,n){for(var r=n[0].trace,u=new w(a,r.uid),s=d(a.gd,n),i=u.below=a.belowLookup["trace-"+r.uid],f=0;f<b.length;f++){var h=b[f],p=s[h];u.addSource(h,p),u.addLayer(h,p,i)}return n[0].trace._glTrace=u,u}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../../constants/numerical").BADNUM;B.exports=function(e,o){var a=e.cd,n=e.xaxis,r=e.yaxis,u=[],s=a[0].trace,i;if(!l.hasMarkers(s))return[];if(o===!1)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var f=a[i],h=f.lonlat;if(h[0]!==b){var p=[d.modHalf(h[0],360),h[1]],v=[n.c2p(p),r.c2p(p)];o.contains(v,null,i,e)?(u.push({pointNumber:i,lon:h[0],lat:h[1]}),f.selected=1):f.selected=0}}return u}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("../scatter/attributes"),e=t("../../plots/attributes"),o=w.line;B.exports={mode:w.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:b({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:b({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:b({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:w.hoveron,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/cartesian/axes"),w=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),o=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;B.exports=function(r,u){for(var s=r._fullLayout,i=u.subplot,f=s[i].radialaxis,h=s[i].angularaxis,p=f.makeCalcdata(u,"r"),v=h.makeCalcdata(u,"theta"),y=u._length,g=new Array(y),A=0;A<y;A++){var m=p[A],M=v[A],_=g[A]={};d(m)&&d(M)?(_.r=m,_.theta=M):_.r=l}var T=a(u,y);return u._extremes.x=b.findExtremes(f,p,{ppad:T}),w(r,u),e(g,u),o(g,u),g}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");function u(i,f,h,p){function v(A,m){return d.coerce(i,f,r,A,m)}var y=s(i,f,p,v);if(!y){f.visible=!1;return}v("thetaunit"),v("mode",y<n?"lines+markers":"lines"),v("text"),v("hovertext"),f.hoveron!=="fills"&&v("hovertemplate"),l.hasLines(f)&&(w(i,f,h,p,v),e(i,f,v),v("connectgaps")),l.hasMarkers(f)&&b(i,f,h,p,v,{gradient:!0}),l.hasText(f)&&(v("texttemplate"),o(i,f,p,v));var g=[];(l.hasMarkers(f)||l.hasText(f))&&(v("cliponaxis"),v("marker.maxdisplayed"),g.push("points")),v("fill"),f.fill!=="none"&&(a(i,f,h,v),l.hasLines(f)||e(i,f,v)),(f.fill==="tonext"||f.fill==="toself")&&g.push("fills"),v("hoveron",g.join("+")||"points"),d.coerceSelectionMarkerOpacity(f,v)}function s(i,f,h,p){var v=p("r"),y=p("theta"),g;if(v)y?g=Math.min(v.length,y.length):(g=v.length,p("theta0"),p("dtheta"));else{if(!y)return 0;g=f.theta.length,p("r0"),p("dr")}return f._length=g,g}B.exports={handleRThetaDefaults:s,supplyDefaults:u}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes");B.exports=function(w,e,o){var a={},n=o[e.subplot]._subplot,r,u;n?(r=n.radialAxis,u=n.angularAxis):(n=o[e.subplot],r=n.radialaxis,u=n.angularaxis);var s=r.c2l(w.r);a.rLabel=l.tickText(r,s,!0).text;var i=u.thetaunit==="degrees"?d.rad2deg(w.theta):w.theta;return a.thetaLabel=l.tickText(u,i,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(t,B,H){var d=t("../scatter/hover");function l(w,e,o,a){var n=d(w,e,o,a);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var u=w.subplot,s=r.cd[r.index],i=r.trace;if(!!u.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,b(s,i,u,r),r.hovertemplate=i.hovertemplate,n}}function b(w,e,o,a){var n=o.radialAxis,r=o.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var u={};u[e.subplot]={_subplot:o};var s=e._module.formatLabels(w,e,u);a.rLabel=s.rLabel,a.thetaLabel=s.thetaLabel;var i=w.hi||e.hoverinfo,f=[];function h(v,y){f.push(v._hovertitle+": "+y)}if(!e.hovertemplate){var p=i.split("+");p.indexOf("all")!==-1&&(p=["r","theta","text"]),p.indexOf("r")!==-1&&h(n,a.rLabel),p.indexOf("theta")!==-1&&h(r,a.thetaLabel),p.indexOf("text")!==-1&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:b}},{"../scatter/hover":937}],1005:[function(t,B,H){B.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../constants/numerical").BADNUM;B.exports=function(w,e,o){for(var a=e.layers.frontplot.select("g.scatterlayer"),n={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},r=e.radialAxis,u=e.angularAxis,s=0;s<o.length;s++)for(var i=o[s],f=0;f<i.length;f++){var h=i[f],p=h.r;if(p===l)h.x=h.y=l;else{var v=r.c2g(p),y=u.c2g(h.theta);h.x=v*Math.cos(y),h.y=v*Math.sin(y)}}d(w,n,o,a)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(t,B,H){var d=t("../scatterpolar/attributes"),l=t("../scattergl/attributes"),b=t("../../plots/template_attributes").texttemplateAttrs;B.exports={mode:d.mode,r:d.r,theta:d.theta,r0:d.r0,dr:d.dr,theta0:d.theta0,dtheta:d.dtheta,thetaunit:d.thetaunit,text:d.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:d.hovertext,hovertemplate:d.hovertemplate,line:l.line,connectgaps:l.connectgaps,marker:l.marker,fill:l.fill,fillcolor:l.fillcolor,textposition:l.textposition,textfont:l.textfont,hoverinfo:d.hoverinfo,selected:d.selected,unselected:d.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(t,B,H){var d=t("../scatter/colorscale_calc"),l=t("../scatter/calc").calcMarkerSize,b=t("../scattergl/convert"),w=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(a,n){var r=a._fullLayout,u=n.subplot,s=r[u].radialaxis,i=r[u].angularaxis,f=n._r=s.makeCalcdata(n,"r"),h=n._theta=i.makeCalcdata(n,"theta"),p=n._length,v={};p<f.length&&(f=f.slice(0,p)),p<h.length&&(h=h.slice(0,p)),v.r=f,v.theta=h,d(a,n);var y=v.opts=b.style(a,n),g;return p<e?g=l(n,p):y.marker&&(g=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),n._extremes.x=w.findExtremes(s,f,{ppad:g}),[{x:!1,y:!1,t:v,trace:n}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatterpolar/defaults").handleRThetaDefaults,w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(s,i,f,h){function p(y,g){return d.coerce(s,i,r,y,g)}var v=b(s,i,h,p);if(!v){i.visible=!1;return}p("thetaunit"),p("mode",v<n?"lines+markers":"lines"),p("text"),p("hovertext"),i.hoveron!=="fills"&&p("hovertemplate"),l.hasLines(i)&&(e(s,i,f,h,p),p("connectgaps")),l.hasMarkers(i)&&w(s,i,f,h,p),l.hasText(i)&&(p("texttemplate"),o(s,i,h,p)),p("fill"),i.fill!=="none"&&a(s,i,f,p),d.coerceSelectionMarkerOpacity(i,p)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(t,B,H){var d=t("../scatterpolar/format_labels");B.exports=function(b,w,e){var o=b.i;return"r"in b||(b.r=w._r[o]),"theta"in b||(b.theta=w._theta[o]),d(b,w,e)}},{"../scatterpolar/format_labels":1003}],1011:[function(t,B,H){var d=t("../scattergl/hover"),l=t("../scatterpolar/hover").makeHoverPointText;function b(w,e,o,a){var n=w.cd,r=n[0].t,u=r.r,s=r.theta,i=d.hoverPoints(w,e,o,a);if(!(!i||i[0].index===!1)){var f=i[0];if(f.index===void 0)return i;var h=w.subplot,p=f.cd[f.index],v=f.trace;if(p.r=u[f.index],p.theta=s[f.index],!!h.isPtInside(p))return f.xLabelVal=void 0,f.yLabelVal=void 0,l(p,v,h,f),i}}B.exports={hoverPoints:b}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(t,B,H){B.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(t,B,H){var d=t("@plotly/point-cluster"),l=t("fast-isnumeric"),b=t("../scattergl/plot"),w=t("../scattergl/scene_update"),e=t("../scattergl/convert"),o=t("../../lib"),a=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(r,u,s){if(!!s.length){var i=u.radialAxis,f=u.angularAxis,h=w(r,u);return s.forEach(function(p){if(!(!p||!p[0]||!p[0].trace)){var v=p[0],y=v.trace,g=v.t,A=y._length,m=g.r,M=g.theta,_=g.opts,T,x=m.slice(),c=M.slice();for(T=0;T<m.length;T++)u.isPtInside({r:m[T],theta:M[T]})||(x[T]=NaN,c[T]=NaN);var L=new Array(A*2),S=Array(A),k=Array(A);for(T=0;T<A;T++){var P=x[T],z,I;if(l(P)){var R=i.c2g(P),D=f.c2g(c[T],y.thetaunit);z=R*Math.cos(D),I=R*Math.sin(D)}else z=I=NaN;S[T]=L[T*2]=z,k[T]=L[T*2+1]=I}g.tree=d(L),_.marker&&A>=a&&(_.marker.cluster=g.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=L),_.line&&L.length>1&&o.extendFlat(_.line,e.linePositions(r,y,L)),_.text&&(o.extendFlat(_.text,{positions:L},e.textPosition(r,y,_.text,_.marker)),o.extendFlat(_.textSel,{positions:L},e.textPosition(r,y,_.text,_.markerSel)),o.extendFlat(_.textUnsel,{positions:L},e.textPosition(r,y,_.text,_.markerUnsel))),_.fill&&!h.fill2d&&(h.fill2d=!0),_.marker&&!h.scatter2d&&(h.scatter2d=!0),_.line&&!h.line2d&&(h.line2d=!0),_.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(_.line),h.fillOptions.push(_.fill),h.markerOptions.push(_.marker),h.markerSelectedOptions.push(_.markerSel),h.markerUnselectedOptions.push(_.markerUnsel),h.textOptions.push(_.text),h.textSelectedOptions.push(_.textSel),h.textUnselectedOptions.push(_.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),g.x=S,g.y=k,g.rawx=S,g.rawy=k,g.r=m,g.theta=M,g.positions=L,g._scene=h,g.index=h.count,h.count++}}),b(r,u,s)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("../scatter/attributes"),e=t("../../plots/attributes"),o=w.line;B.exports={mode:w.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:l({editType:"plot"},{keys:["real","imag","text"]}),hovertext:w.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:b({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:b({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:b({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:w.hoveron,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/colorscale_calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),o=t("../scatter/calc").calcMarkerSize;B.exports=function(n,r){for(var u=n._fullLayout,s=r.subplot,i=u[s].realaxis,f=u[s].imaginaryaxis,h=i.makeCalcdata(r,"real"),p=f.makeCalcdata(r,"imag"),v=r._length,y=new Array(v),g=0;g<v;g++){var A=h[g],m=p[g],M=y[g]={};d(A)&&d(m)?(M.real=A,M.imag=m):M.real=l}return o(r,v),b(n,r),w(y,r),e(y,r),y}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(i,f,h,p){function v(A,m){return d.coerce(i,f,r,A,m)}var y=u(i,f,p,v);if(!y){f.visible=!1;return}v("mode",y<n?"lines+markers":"lines"),v("text"),v("hovertext"),f.hoveron!=="fills"&&v("hovertemplate"),l.hasLines(f)&&(w(i,f,h,p,v),e(i,f,v),v("connectgaps")),l.hasMarkers(f)&&b(i,f,h,p,v,{gradient:!0}),l.hasText(f)&&(v("texttemplate"),o(i,f,p,v));var g=[];(l.hasMarkers(f)||l.hasText(f))&&(v("cliponaxis"),v("marker.maxdisplayed"),g.push("points")),v("fill"),f.fill!=="none"&&(a(i,f,h,v),l.hasLines(f)||e(i,f,v)),(f.fill==="tonext"||f.fill==="toself")&&g.push("fills"),v("hoveron",g.join("+")||"points"),d.coerceSelectionMarkerOpacity(f,v)};function u(s,i,f,h){var p=h("real"),v=h("imag"),y;return p&&v&&(y=Math.min(p.length,v.length)),i._length=y,y}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot;return o.realLabel=d.tickText(a.radialAxis,b.real,!0).text,o.imagLabel=d.tickText(a.angularAxis,b.imag,!0).text,o}},{"../../plots/cartesian/axes":554}],1018:[function(t,B,H){var d=t("../scatter/hover");function l(w,e,o,a){var n=d(w,e,o,a);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var u=w.subplot,s=r.cd[r.index],i=r.trace;if(!!u.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,b(s,i,u,r),r.hovertemplate=i.hovertemplate,n}}function b(w,e,o,a){var n=o.radialAxis,r=o.angularAxis;n._hovertitle="real",r._hovertitle="imag";var u={};u[e.subplot]={_subplot:o};var s=e._module.formatLabels(w,e,u);a.realLabel=s.realLabel,a.imagLabel=s.imagLabel;var i=w.hi||e.hoverinfo,f=[];function h(v,y){f.push(v._hovertitle+": "+y)}if(!e.hovertemplate){var p=i.split("+");p.indexOf("all")!==-1&&(p=["real","imag","text"]),p.indexOf("real")!==-1&&h(n,a.realLabel),p.indexOf("imag")!==-1&&h(r,a.imagLabel),p.indexOf("text")!==-1&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:b}},{"../scatter/hover":937}],1019:[function(t,B,H){B.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/smith/helpers"),w=b.smith;B.exports=function(o,a,n){for(var r=a.layers.frontplot.select("g.scatterlayer"),u={xaxis:a.xaxis,yaxis:a.yaxis,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},s=0;s<n.length;s++)for(var i=n[s],f=0;f<i.length;f++){var h=i[f],p=h.real;if(p===l)h.x=h.y=l;else{var v=w([p,h.imag]);h.x=v[0],h.y=v[1]}}d(o,u,n,r)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scatter/attributes"),w=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,n=b.marker,r=b.line,u=n.line;B.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},b.hovertext,{}),line:{color:r.color,width:r.width,dash:o,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:a({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:u.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:a({},w.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:d()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../scatter/colorscale_calc"),b=t("../scatter/arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};B.exports=function(r,u){var s=r._fullLayout[u.subplot],i=s.sum,f=u.sum||i,h={a:u.a,b:u.b,c:u.c},p,v,y,g,A,m;for(p=0;p<o.length;p++)if(y=o[p],!h[y]){for(A=h[a[y][0]],m=h[a[y][1]],g=new Array(A.length),v=0;v<A.length;v++)g[v]=f-A[v]-m[v];h[y]=g}var M=u._length,_=new Array(M),T,x,c,L,S,k;for(p=0;p<M;p++)T=h.a[p],x=h.b[p],c=h.c[p],d(T)&&d(x)&&d(c)?(T=+T,x=+x,c=+c,L=i/(T+x+c),L!==1&&(T*=L,x*=L,c*=L),k=T,S=c-x,_[p]={x:S,y:k,a:T,b:x,c}):_[p]={x:!1,y:!1};return e(u,M),l(r,u),b(_,u),w(_,u),_}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/constants"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,i,f,h){function p(_,T){return d.coerce(s,i,r,_,T)}var v=p("a"),y=p("b"),g=p("c"),A;if(v?(A=v.length,y?(A=Math.min(A,y.length),g&&(A=Math.min(A,g.length))):g?A=Math.min(A,g.length):A=0):y&&g&&(A=Math.min(y.length,g.length)),!A){i.visible=!1;return}i._length=A,p("sum"),p("text"),p("hovertext"),i.hoveron!=="fills"&&p("hovertemplate");var m=A<l.PTS_LINESONLY?"lines+markers":"lines";p("mode",m),b.hasLines(i)&&(e(s,i,f,h,p),o(s,i,p),p("connectgaps")),b.hasMarkers(i)&&w(s,i,f,h,p,{gradient:!0}),b.hasText(i)&&(p("texttemplate"),a(s,i,h,p));var M=[];(b.hasMarkers(i)||b.hasText(i))&&(p("cliponaxis"),p("marker.maxdisplayed"),M.push("points")),p("fill"),i.fill!=="none"&&(n(s,i,f,p),b.hasLines(i)||o(s,i,p)),(i.fill==="tonext"||i.fill==="toself")&&M.push("fills"),p("hoveron",M.join("+")||"points"),d.coerceSelectionMarkerOpacity(i,p)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(t,B,H){B.exports=function(l,b,w,e,o){if(b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),e[o]){var a=e[o];l.a=a.a,l.b=a.b,l.c=a.c}else l.a=b.a,l.b=b.b,l.c=b.c;return l}},{}],1025:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot;return o.aLabel=d.tickText(a.aaxis,b.a,!0).text,o.bLabel=d.tickText(a.baxis,b.b,!0).text,o.cLabel=d.tickText(a.caxis,b.c,!0).text,o}},{"../../plots/cartesian/axes":554}],1026:[function(t,B,H){var d=t("../scatter/hover");B.exports=function(b,w,e,o){var a=d(b,w,e,o);if(!a||a[0].index===!1)return;var n=a[0];if(n.index===void 0){var r=1-n.y0/b.ya._length,u=b.xa._length,s=u*r/2,i=u-s;return n.x0=Math.max(Math.min(n.x0,i),s),n.x1=Math.max(Math.min(n.x1,i),s),a}var f=n.cd[n.index],h=n.trace,p=n.subplot;n.a=f.a,n.b=f.b,n.c=f.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var v={};v[h.subplot]={_subplot:p};var y=h._module.formatLabels(f,h,v);n.aLabel=y.aLabel,n.bLabel=y.bLabel,n.cLabel=y.cLabel;var g=f.hi||h.hoverinfo,A=[];function m(_,T){A.push(_._hovertitle+": "+T)}if(!h.hovertemplate){var M=g.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&m(p.aaxis,n.aLabel),M.indexOf("b")!==-1&&m(p.baxis,n.bLabel),M.indexOf("c")!==-1&&m(p.caxis,n.cLabel)}return n.extraText=A.join("<br>"),n.hovertemplate=h.hovertemplate,a}},{"../scatter/hover":937}],1027:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(t,B,H){var d=t("../scatter/plot");B.exports=function(b,w,e){var o=w.plotContainer;o.select(".scatterlayer").selectAll("*").remove();var a={xaxis:w.xaxis,yaxis:w.yaxis,plot:o,layerClipId:w._hasClipOnAxisFalse?w.clipIdRelative:null},n=w.layers.frontplot.select("g.scatterlayer");d(b,a,e,n)}},{"../scatter/plot":947}],1029:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),o=t("../../plots/cartesian/constants").idRegex,a=t("../../plot_api/plot_template").templatedArray,n=t("../../lib/extend").extendFlat,r=d.marker,u=r.line,s=n(l("marker.line",{editTypeOverride:"calc"}),{width:n({},u.width,{editType:"calc"}),editType:"calc"}),i=n(l("marker"),{symbol:r.symbol,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function f(h){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[h],editType:"plot"}}}B.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(t,B,H){var d=t("regl-line2d"),l=t("../../registry"),b=t("../../lib/prepare_regl"),w=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),o=t("../../plots/cartesian/axis_ids").getFromId,a=t("../../plots/cartesian/axes").shouldShowZeroLine,n="splom";function r(p){var v=p._fullLayout,y=l.getModule(n),g=w(p.calcdata,y)[0],A=b(p,["ANGLE_instanced_arrays","OES_element_index_uint"]);!A||(v._hasOnlyLargeSploms&&i(p),y.plot(p,{},g))}function u(p){var v=p.calcdata,y=p._fullLayout;y._hasOnlyLargeSploms&&i(p);for(var g=0;g<v.length;g++){var A=v[g][0],m=A.trace,M=y._splomScenes[m.uid];m.type==="splom"&&M&&M.matrix&&s(p,m,M)}}function s(p,v,y){for(var g=y.matrixOptions.data.length,A=v._visibleDims,m=y.viewOpts.ranges=new Array(g),M=0;M<A.length;M++){var _=A[M],T=m[M]=new Array(4),x=o(p,v._diag[_][0]);x&&(T[0]=x.r2l(x.range[0]),T[2]=x.r2l(x.range[1]));var c=o(p,v._diag[_][1]);c&&(T[1]=c.r2l(c.range[0]),T[3]=c.r2l(c.range[1]))}y.selectBatch.length||y.unselectBatch.length?y.matrix.update({ranges:m},{ranges:m}):y.matrix.update({ranges:m})}function i(p){var v=p._fullLayout,y=v._glcanvas.data()[0].regl,g=v._splomGrid;g||(g=v._splomGrid=d(y)),g.update(f(p))}function f(p){var v=p._context.plotGlPixelRatio,y=p._fullLayout,g=y._size,A=[0,0,y.width*v,y.height*v],m={},M;function _(X,q,$,V,K,se){$*=v,V*=v,K*=v,se*=v;var ue=q[X+"color"],oe=q[X+"width"],U=String(ue+oe);U in m?m[U].data.push(NaN,NaN,$,V,K,se):m[U]={data:[$,V,K,se],join:"rect",thickness:oe*v,color:ue,viewport:A,range:A,overlay:!1}}for(M in y._splomSubplots){var T=y._plots[M],x=T.xaxis,c=T.yaxis,L=x._gridVals,S=c._gridVals,k=x._offset,P=x._length,z=c._length,I=g.b+c.domain[0]*g.h,R=-c._m,D=-R*c.r2l(c.range[0],c.calendar),O,F;if(x.showgrid)for(M=0;M<L.length;M++)O=k+x.l2p(L[M].x),_("grid",x,O,I,O,I+z);if(c.showgrid)for(M=0;M<S.length;M++)F=I+D+R*S[M].x,_("grid",c,k,F,k+P,F);a(p,x,c)&&(O=k+x.l2p(0),_("zeroline",x,O,I,O,I+z)),a(p,c,x)&&(F=I+D+0,_("zeroline",c,k,F,k+P,F))}var Y=[];for(M in m)Y.push(m[M]);return Y}function h(p,v,y,g){var A={},m;if(g._splomScenes){for(m=0;m<p.length;m++){var M=p[m];M.type==="splom"&&(A[M.uid]=1)}for(m=0;m<y.length;m++){var _=y[m];if(!A[_.uid]){var T=g._splomScenes[_.uid];T&&T.destroy&&T.destroy(),g._splomScenes[_.uid]=null,delete g._splomScenes[_.uid]}}}Object.keys(g._splomScenes||{}).length===0&&delete g._splomScenes,g._splomGrid&&!v._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),e.clean(p,v,y,g)}B.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:r,drag:u,updateGrid:i,clean:h,updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axis_ids"),b=t("../scatter/calc").calcMarkerSize,w=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),o=t("../scattergl/convert").markerSelection,a=t("../scattergl/convert").markerStyle,n=t("./scene_update"),r=t("../../constants/numerical").BADNUM,u=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(i,f){var h=f.dimensions,p=f._length,v={},y=v.cdata=[],g=v.data=[],A=f._visibleDims=[],m,M,_,T,x;function c(z,I){for(var R=z.makeCalcdata({v:I.values,vcalendar:f.calendar},"v"),D=0;D<R.length;D++)R[D]=R[D]===r?NaN:R[D];y.push(R),g.push(z.type==="log"?d.simpleMap(R,z.c2l):R)}for(m=0;m<h.length;m++)if(_=h[m],_.visible){if(T=l.getFromId(i,f._diag[m][0]),x=l.getFromId(i,f._diag[m][1]),T&&x&&T.type!==x.type){d.log("Skipping splom dimension "+m+" with conflicting axis types");continue}T?(c(T,_),x&&x.type==="category"&&(x._categories=T._categories.slice())):c(x,_),A.push(m)}e(i,f),d.extendFlat(v,a(f));var L=y.length,S=L*p>u,k;for(S?k=v.sizeAvg||Math.max(v.size,3):k=b(f,p),M=0;M<A.length;M++)m=A[M],_=h[m],T=l.getFromId(i,f._diag[m][0])||{},x=l.getFromId(i,f._diag[m][1])||{},w(i,f,T,x,y[M],y[M],k);var P=n(i,f);return P.matrix||(P.matrix=!0),P.matrixOptions=v,P.selectedOptions=o(f,f.selected),P.unselectedOptions=o(f,f.unselected),[{x:!1,y:!1,t:{},trace:f}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),o=t("../parcoords/merge_length"),a=t("../scattergl/helpers").isOpenSymbol;B.exports=function(s,i,f,h){function p(T,x){return d.coerce(s,i,b,T,x)}var v=l(s,i,{name:"dimensions",handleItemDefaults:n}),y=p("diagonal.visible"),g=p("showupperhalf"),A=p("showlowerhalf"),m=o(i,v,"values");if(!m||!y&&!g&&!A){i.visible=!1;return}p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),e(s,i,f,h,p);var M=a(i.marker.symbol),_=w.isBubble(i);p("marker.line.width",M||_?1:0),r(s,i,h,p),d.coerceSelectionMarkerOpacity(i,p)};function n(u,s){function i(h,p){return d.coerce(u,s,b.dimensions,h,p)}i("label");var f=i("values");f&&f.length?i("visible"):s.visible=!1,i("axis.type"),i("axis.matches")}function r(u,s,i,f){var h=s.dimensions,p=h.length,v=s.showupperhalf,y=s.showlowerhalf,g=s.diagonal.visible,A,m,M=new Array(p),_=new Array(p);for(A=0;A<p;A++){var T=A?A+1:"";M[A]="x"+T,_[A]="y"+T}var x=f("xaxes",M),c=f("yaxes",_),L=s._diag=new Array(p);s._xaxes={},s._yaxes={};var S=[],k=[];function P(q,$,V,K){if(!!q){var se=q.charAt(0),ue=i._splomAxes[se];if(s["_"+se+"axes"][q]=1,K.push(q),!(q in ue)){var oe=ue[q]={};V&&(oe.label=V.label||"",V.visible&&V.axis&&(V.axis.type&&(oe.type=V.axis.type),V.axis.matches&&(oe.matches=$)))}}}var z=!g&&!y,I=!g&&!v;for(s._axesDim={},A=0;A<p;A++){var R=h[A],D=A===0,O=A===p-1,F=D&&z||O&&I?void 0:x[A],Y=D&&I||O&&z?void 0:c[A];P(F,Y,R,S),P(Y,F,R,k),L[A]=[F,Y],s._axesDim[F]=A,s._axesDim[Y]=A}for(A=0;A<S.length;A++)for(m=0;m<k.length;m++){var X=S[A]+k[m];(A>m&&v||A<m&&y||A===m&&(g||!y||!v))&&(i._splomSubplots[X]=1)}(!y||!g&&v&&y)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/colorscale_calc"),b=t("../scattergl/convert").markerStyle;B.exports=function(e,o){var a=o.trace,n=e._fullLayout._splomScenes[a.uid];if(n){l(e,a),d.extendFlat(n.matrixOptions,b(a));var r=d.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(t,B,H){H.getDimIndex=function(l,b){for(var w=b._id,e=w.charAt(0),o={x:0,y:1}[e],a=l._visibleDims,n=0;n<a.length;n++){var r=a[n];if(l._diag[r][o]===w)return n}return!1}},{}],1035:[function(t,B,H){var d=t("./helpers"),l=t("../scattergl/hover").calcHover;function b(w,e,o){var a=w.cd,n=a[0].trace,r=w.scene,u=r.matrixOptions.cdata,s=w.xa,i=w.ya,f=s.c2p(e),h=i.c2p(o),p=w.distance,v=d.getDimIndex(n,s),y=d.getDimIndex(n,i);if(v===!1||y===!1)return[w];for(var g=u[v],A=u[y],m,M,_=p,T=0;T<g.length;T++){var x=g[T],c=A[T],L=s.c2p(x)-f,S=i.c2p(c)-h,k=Math.sqrt(L*L+S*S);k<_&&(_=M=k,m=T)}return w.index=m,w.distance=_,w.dxy=M,m===void 0?[w]:[l(w,g,A,n)]}B.exports={hoverPoints:b}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(t,B,H){var d=t("../../registry"),l=t("../../components/grid");B.exports={moduleType:"trace",name:"splom",basePlotModule:t("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},d.register(l)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(t,B,H){var d=t("regl-splom"),l=t("../../lib"),b=t("../../plots/cartesian/axis_ids"),w=t("../../components/dragelement/helpers").selectMode;B.exports=function(a,n,r){if(!!r.length)for(var u=0;u<r.length;u++)e(a,r[u][0])};function e(o,a){var n=o._fullLayout,r=n._size,u=a.trace,s=a.t,i=n._splomScenes[u.uid],f=i.matrixOptions,h=f.cdata,p=n._glcanvas.data()[0].regl,v=n.dragmode,y,g,A,m,M;if(h.length!==0){f.lower=u.showupperhalf,f.upper=u.showlowerhalf,f.diagonal=u.diagonal.visible;var _=u._visibleDims,T=h.length,x=i.viewOpts={};for(x.ranges=new Array(T),x.domains=new Array(T),M=0;M<_.length;M++){A=_[M];var c=x.ranges[M]=new Array(4),L=x.domains[M]=new Array(4);y=b.getFromId(o,u._diag[A][0]),y&&(c[0]=y._rl[0],c[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),g=b.getFromId(o,u._diag[A][1]),g&&(c[1]=g._rl[0],c[3]=g._rl[1],L[1]=g.domain[0],L[3]=g.domain[1])}var S=o._context.plotGlPixelRatio,k=r.l*S,P=r.b*S,z=r.w*S,I=r.h*S;x.viewport=[k,P,z+k,I+P],i.matrix===!0&&(i.matrix=d(p));var R=n.clickmode.indexOf("select")>-1,D=w(v)||!!u.selectedpoints||R,O=!0;if(D){var F=u._length;if(u.selectedpoints){i.selectBatch=u.selectedpoints;var Y=u.selectedpoints,X={};for(A=0;A<Y.length;A++)X[Y[A]]=!0;var q=[];for(A=0;A<F;A++)X[A]||q.push(A);i.unselectBatch=q}var $=s.xpx=new Array(T),V=s.ypx=new Array(T);for(M=0;M<_.length;M++){if(A=_[M],y=b.getFromId(o,u._diag[A][0]),y)for($[M]=new Array(F),m=0;m<F;m++)$[M][m]=y.c2p(h[M][m]);if(g=b.getFromId(o,u._diag[A][1]),g)for(V[M]=new Array(F),m=0;m<F;m++)V[M][m]=g.c2p(h[M][m])}if(i.selectBatch.length||i.unselectBatch.length){var K=l.extendFlat({},f,i.unselectedOptions,x),se=l.extendFlat({},f,i.selectedOptions,x);i.matrix.update(K,se),O=!1}}else s.xpx=s.ypx=null;if(O){var ue=l.extendFlat({},f,x);i.matrix.update(ue,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=b._fullLayout,o=w.uid,a=e._splomScenes;a||(a=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},u=a[w.uid];return u||(u=a[o]=d.extendFlat({},n,r),u.draw=function(){u.matrix&&u.matrix.draw&&(u.selectBatch.length||u.unselectBatch.length?u.matrix.draw(u.unselectBatch,u.selectBatch):u.matrix.draw()),u.dirty=!1},u.destroy=function(){u.matrix&&u.matrix.destroy&&u.matrix.destroy(),u.matrixOptions=null,u.selectBatch=null,u.unselectBatch=null,u=null}),u.dirty||d.extendFlat(u,n),u}},{"../../lib":503}],1039:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("./helpers");B.exports=function(e,o){var a=e.cd,n=a[0].trace,r=a[0].t,u=e.scene,s=u.matrixOptions.cdata,i=e.xaxis,f=e.yaxis,h=[];if(!u)return h;var p=!l.hasMarkers(n)&&!l.hasText(n);if(n.visible!==!0||p)return h;var v=b.getDimIndex(n,i),y=b.getDimIndex(n,f);if(v===!1||y===!1)return h;var g=r.xpx[v],A=r.ypx[y],m=s[v],M=s[y],_=[],T=[];if(o!==!1&&!o.degenerate)for(var x=0;x<m.length;x++)o.contains([g[x],A[x]],null,x,e)?(_.push(x),h.push({pointNumber:x,x:m[x],y:M[x]})):T.push(x);var c=u.matrixOptions;return!_.length&&!T.length?u.matrix.update(c,null):!u.selectBatch.length&&!u.unselectBatch.length&&u.matrix.update(u.unselectedOptions,d.extendFlat({},c,u.selectedOptions,u.viewOpts)),u.selectBatch=_,u.unselectBatch=T,h}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){a[r]=w[r]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,B.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/calc");function b(a,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=o(n.u,n._len),n._v=o(n.v,n._len),n._w=o(n.w,n._len),n._x=o(n.x,n._len),n._y=o(n.y,n._len),n._z=o(n.z,n._len);var r=w(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var u=0,s,i,f;n.starts&&(s=o(n.starts.x||[]),i=o(n.starts.y||[]),f=o(n.starts.z||[]),u=Math.min(s.length,i.length,f.length)),n._startsX=s||[],n._startsY=i||[],n._startsZ=f||[];var h=0,p=1/0,v;for(v=0;v<n._len;v++){var y=n._u[v],g=n._v[v],A=n._w[v],m=Math.sqrt(y*y+g*g+A*A);h=Math.max(h,m),p=Math.min(p,m)}for(l(a,n,{vals:[p,h],containerStr:"",cLetter:"c"}),v=0;v<u;v++){var M=s[v];r.xMax=Math.max(r.xMax,M),r.xMin=Math.min(r.xMin,M);var _=i[v];r.yMax=Math.max(r.yMax,_),r.yMin=Math.min(r.yMin,_);var T=f[v];r.zMax=Math.max(r.zMax,T),r.zMin=Math.min(r.zMin,T)}n._slen=u,n._normMax=h,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function w(a){var n=a._x,r=a._y,u=a._z,s=a._len,i,f,h,p=-1/0,v=1/0,y=-1/0,g=1/0,A=-1/0,m=1/0,M="",_,T,x,c,L,S,k,P,z;for(s&&(c=n[0],S=r[0],P=u[0]),s>1&&(L=n[s-1],k=r[s-1],z=u[s-1]),i=0;i<s;i++)p=Math.max(p,n[i]),v=Math.min(v,n[i]),y=Math.max(y,r[i]),g=Math.min(g,r[i]),A=Math.max(A,u[i]),m=Math.min(m,u[i]),!_&&n[i]!==c&&(_=!0,M+="x"),!T&&r[i]!==S&&(T=!0,M+="y"),!x&&u[i]!==P&&(x=!0,M+="z");_||(M+="x"),T||(M+="y"),x||(M+="z");var I=e(a._x),R=e(a._y),D=e(a._z);M=M.replace("x",(c>L?"-":"+")+"x"),M=M.replace("y",(S>k?"-":"+")+"y"),M=M.replace("z",(P>z?"-":"+")+"z");var O=function(){s=0,I=[],R=[],D=[]};(!s||s<I.length*R.length*D.length)&&O();var F=function(ie){return ie==="x"?n:ie==="y"?r:u},Y=function(ie){return ie==="x"?I:ie==="y"?R:D},X=function(ie){return ie[s-1]<ie[0]?-1:1},q=F(M[1]),$=F(M[3]),V=F(M[5]),K=Y(M[1]).length,se=Y(M[3]).length,ue=Y(M[5]).length,oe=!1,U=function(ie,fe,me){return K*(se*ie+fe)+me},G=X(F(M[1])),re=X(F(M[3])),ee=X(F(M[5]));for(i=0;i<ue-1;i++){for(f=0;f<se-1;f++){for(h=0;h<K-1;h++){var j=U(i,f,h),Q=U(i,f,h+1),ne=U(i,f+1,h),ae=U(i+1,f,h);if((!(q[j]*G<q[Q]*G)||!($[j]*re<$[ne]*re)||!(V[j]*ee<V[ae]*ee))&&(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(d.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:v,yMin:g,zMin:m,xMax:p,yMax:y,zMax:A,Xs:I,Ys:R,Zs:D,len:s,fill:M}}function e(a){return d.distinctVals(a).vals}function o(a,n){if(n===void 0&&(n=a.length),d.isTypedArray(a))return a.subarray(0,n);for(var r=[],u=0;u<n;u++)r[u]=+a[u];return r}B.exports={calc:b,filter:o,processGrid:w}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(t,B,H){var d=t("../../../stackgl_modules").gl_streamtube3d,l=d.createTubeMesh,b=t("../../lib"),w=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,o=t("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function n(h,p){this.scene=h,this.uid=p,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(h){var p=this.scene.fullSceneLayout,v=this.scene.dataScale;function y(m,M){var _=p[M],T=v[a[M]];return _.l2c(m)/T}if(h.object===this.mesh){var g=h.data.position,A=h.data.velocity;return h.traceCoordinate=[y(g[0],"xaxis"),y(g[1],"yaxis"),y(g[2],"zaxis"),y(A[0],"xaxis"),y(A[1],"yaxis"),y(A[2],"zaxis"),h.data.intensity*this.data._normMax,h.data.divergence],h.textLabel=this.data.hovertext||this.data.text,!0}};function u(h){var p=h.length,v;return p>2?v=h.slice(1,p-1):p===2?v=[(h[0]+h[1])/2]:v=h,v}function s(h){var p=h.length;return p===1?[.5,.5]:[h[1]-h[0],h[p-1]-h[p-2]]}function i(h,p){var v=h.fullSceneLayout,y=h.dataScale,g=p._len,A={};function m(se,ue){var oe=v[ue],U=y[a[ue]];return b.simpleMap(se,function(G){return oe.d2l(G)*U})}if(A.vectors=o(m(p._u,"xaxis"),m(p._v,"yaxis"),m(p._w,"zaxis"),g),!g)return{positions:[],cells:[]};var M=m(p._Xs,"xaxis"),_=m(p._Ys,"yaxis"),T=m(p._Zs,"zaxis");A.meshgrid=[M,_,T],A.gridFill=p._gridFill;var x=p._slen;if(x)A.startingPositions=o(m(p._startsX,"xaxis"),m(p._startsY,"yaxis"),m(p._startsZ,"zaxis"));else{for(var c=_[0],L=u(M),S=u(T),k=new Array(L.length*S.length),P=0,z=0;z<L.length;z++)for(var I=0;I<S.length;I++)k[P++]=[L[z],c,S[I]];A.startingPositions=k}A.colormap=w(p),A.tubeSize=p.sizeref,A.maxLength=p.maxdisplayed;var R=m(p._xbnds,"xaxis"),D=m(p._ybnds,"yaxis"),O=m(p._zbnds,"zaxis"),F=s(M),Y=s(_),X=s(T),q=[[R[0]-F[0],D[0]-Y[0],O[0]-X[0]],[R[1]+F[1],D[1]+Y[1],O[1]+X[1]]],$=d(A,q),V=e(p);$.vertexIntensityBounds=[V.min/p._normMax,V.max/p._normMax];var K=p.lightposition;return $.lightPosition=[K.x,K.y,K.z],$.ambient=p.lighting.ambient,$.diffuse=p.lighting.diffuse,$.specular=p.lighting.specular,$.roughness=p.lighting.roughness,$.fresnel=p.lighting.fresnel,$.opacity=p.opacity,p._pad=$.tubeScale*p.sizeref*2,$}r.update=function(h){this.data=h;var p=i(this.scene,h);this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(h,p){var v=h.glplot.gl,y=i(h,p),g=l(v,y),A=new n(h,p.uid);return A.mesh=g,A.data=p,g._trace=A,h.glplot.add(g),A}B.exports=f},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,n){function r(v,y){return d.coerce(e,o,b,v,y)}var u=r("u"),s=r("v"),i=r("w"),f=r("x"),h=r("y"),p=r("z");if(!u||!u.length||!s||!s.length||!i||!i.length||!f||!f.length||!h||!h.length||!p||!p.length){o.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),l(e,o,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),o._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(t,B,H){B.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(d,l){return d.tubex=d.x,d.tubey=d.y,d.tubez=d.z,d.tubeu=l.traceCoordinate[3],d.tubev=l.traceCoordinate[4],d.tubew=l.traceCoordinate[5],d.norm=l.traceCoordinate[6],d.divergence=l.traceCoordinate[7],delete d.x,delete d.y,delete d.z,d},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../plots/template_attributes").texttemplateAttrs,w=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,o=t("../pie/attributes"),a=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},o.marker.line.color,{dflt:null}),width:n({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:n({},d.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:l({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:n({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(t,B,H){var d=t("../../plots/plots");H.name="sunburst",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],1047:[function(t,B,H){var d=t("d3-hierarchy"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,o=t("../pie/calc").generateExtendedColors,a=t("../../components/colorscale").calc,n=t("../../constants/numerical").ALMOST_EQUAL,r={},u={},s={};H.calc=function(f,h){var p=f._fullLayout,v=h.ids,y=b.isArrayOrTypedArray(v),g=h.labels,A=h.parents,m=h.values,M=b.isArrayOrTypedArray(m),_=[],T={},x={},c=function(G,re){T[G]?T[G].push(re):T[G]=[re],x[re]=1},L=function(G){return G||typeof G=="number"},S=function(G){return!M||l(m[G])&&m[G]>=0},k,P,z;y?(k=Math.min(v.length,A.length),P=function(G){return L(v[G])&&S(G)},z=function(G){return String(v[G])}):(k=Math.min(g.length,A.length),P=function(G){return L(g[G])&&S(G)},z=function(G){return String(g[G])}),M&&(k=Math.min(k,m.length));for(var I=0;I<k;I++)if(P(I)){var R=z(I),D=L(A[I])?String(A[I]):"",O={i:I,id:R,pid:D,label:L(g[I])?String(g[I]):""};M&&(O.v=+m[I]),_.push(O),c(D,R)}if(T[""]){if(T[""].length>1){for(var X=b.randstr(),q=0;q<_.length;q++)_[q].pid===""&&(_[q].pid=X);_.unshift({hasMultipleRoots:!0,id:X,pid:"",label:""})}}else{var F=[],Y;for(Y in T)x[Y]||F.push(Y);if(F.length===1)Y=F[0],_.unshift({hasImpliedRoot:!0,id:Y,pid:"",label:Y});else return b.warn(["Multiple implied roots, cannot build",h.type,"hierarchy of",h.name+".","These roots include:",F.join(", ")].join(" "))}var $;try{$=d.stratify().id(function(G){return G.id}).parentId(function(G){return G.pid})(_)}catch(G){return b.warn(["Failed to build",h.type,"hierarchy of",h.name+".","Error:",G.message].join(" "))}var V=d.hierarchy($),K=!1;if(M)switch(h.branchvalues){case"remainder":V.sum(function(G){return G.data.v});break;case"total":V.each(function(G){var re=G.data.data,ee=re.v;if(G.children){var j=G.children.reduce(function(Q,ne){return Q+ne.data.data.v},0);if((re.hasImpliedRoot||re.hasMultipleRoots)&&(ee=j),ee<j*n)return K=!0,b.warn(["Total value for node",G.data.data.id,"of",h.name,"is smaller than the sum of its children.",`
parent value =`,ee,`
children sum =`,j].join(" "))}G.value=ee});break}else i(V,h,{branches:h.count.indexOf("branches")!==-1,leaves:h.count.indexOf("leaves")!==-1});if(!K){h.sort&&V.sort(function(G,re){return re.value-G.value});var se,ue,oe=h.marker.colors||[],U=!!oe.length;return h._hasColorscale?(U||(oe=M?h.values:h._values),a(f,h,{vals:oe,containerStr:"marker",cLetter:"c"}),ue=w(h.marker)):se=e(p["_"+h.type+"colormap"]),V.each(function(G){var re=G.data.data;re.color=h._hasColorscale?ue(oe[re.i]):se(oe[re.i],re.id)}),_[0].hierarchy=V,_}},H._runCrossTraceCalc=function(f,h){var p=h._fullLayout,v=h.calcdata,y=p[f+"colorway"],g=p["_"+f+"colormap"];p["extend"+f+"colors"]&&(y=o(y,f==="icicle"?s:f==="treemap"?u:r));var A=0,m;function M(c){var L=c.data.data,S=L.id;L.color===!1&&(g[S]?L.color=g[S]:c.parent?c.parent.parent?L.color=c.parent.data.data.color:(g[S]=L.color=y[A%y.length],A++):L.color=m)}for(var _=0;_<v.length;_++){var T=v[_],x=T[0];x.trace.type===f&&x.hierarchy&&(m=x.trace.root.color,x.hierarchy.each(M))}},H.crossTraceCalc=function(f){return H._runCrossTraceCalc("sunburst",f)};function i(f,h,p){var v=0,y=f.children;if(y){for(var g=y.length,A=0;A<g;A++)v+=i(y[A],h,p);p.branches&&v++}else p.leaves&&v++;return f.value=f.data.data.value=v,h._values||(h._values=[]),h._values[f.data.data.i]=v,v}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(t,B,H){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../bar/defaults").handleText,e=t("../../components/colorscale"),o=e.hasColorscale,a=e.handleDefaults;B.exports=function(r,u,s,i){function f(M,_){return d.coerce(r,u,l,M,_)}var h=f("labels"),p=f("parents");if(!h||!h.length||!p||!p.length){u.visible=!1;return}var v=f("values");v&&v.length?f("branchvalues"):f("count"),f("level"),f("maxdepth");var y=f("marker.line.width");y&&f("marker.line.color",i.paper_bgcolor),f("marker.colors");var g=u._hasColorscale=o(r,"marker","colors")||(r.marker||{}).coloraxis;g&&a(r,u,i,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",g?1:.7);var A=f("text");f("texttemplate"),u.texttemplate||f("textinfo",Array.isArray(A)?"text+label":"label"),f("hovertext"),f("hovertemplate");var m="auto";w(r,u,i,f,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("insidetextorientation"),f("sort"),f("rotation"),f("root.color"),b(u,i,f),u._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../components/fx/helpers").appendArrayPointValue,w=t("../../components/fx"),e=t("../../lib"),o=t("../../lib/events"),a=t("./helpers"),n=t("../pie/helpers"),r=n.formatPieValue;B.exports=function(i,f,h,p,v){var y=p[0],g=y.trace,A=y.hierarchy,m=g.type==="sunburst",M=g.type==="treemap"||g.type==="icicle";"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1);var _=function(c){var L=h._fullLayout;if(!(h._dragging||L.hovermode===!1)){var S=h._fullData[g.index],k=c.data.data,P=k.i,z=a.isHierarchyRoot(c),I=a.getParent(A,c),R=a.getValue(c),D=function(Q){return e.castOption(S,P,Q)},O=D("hovertemplate"),F=w.castHoverinfo(S,L,P),Y=L.separators,X;if(O||F&&F!=="none"&&F!=="skip"){var q,$;m&&(q=y.cx+c.pxmid[0]*(1-c.rInscribed),$=y.cy+c.pxmid[1]*(1-c.rInscribed)),M&&(q=c._hoverX,$=c._hoverY);var V={},K=[],se=[],ue=function(Q){return K.indexOf(Q)!==-1};F&&(K=F==="all"?S._module.attributes.hoverinfo.flags:F.split("+")),V.label=k.label,ue("label")&&V.label&&se.push(V.label),k.hasOwnProperty("v")&&(V.value=k.v,V.valueLabel=r(V.value,Y),ue("value")&&se.push(V.valueLabel)),V.currentPath=c.currentPath=a.getPath(c.data),ue("current path")&&!z&&se.push(V.currentPath);var oe,U=[],G=function(){U.indexOf(oe)===-1&&(se.push(oe),U.push(oe))};V.percentParent=c.percentParent=R/a.getValue(I),V.parent=c.parentString=a.getPtLabel(I),ue("percent parent")&&(oe=a.formatPercent(V.percentParent,Y)+" of "+V.parent,G()),V.percentEntry=c.percentEntry=R/a.getValue(f),V.entry=c.entry=a.getPtLabel(f),ue("percent entry")&&!z&&!c.onPathbar&&(oe=a.formatPercent(V.percentEntry,Y)+" of "+V.entry,G()),V.percentRoot=c.percentRoot=R/a.getValue(A),V.root=c.root=a.getPtLabel(A),ue("percent root")&&!z&&(oe=a.formatPercent(V.percentRoot,Y)+" of "+V.root,G()),V.text=D("hovertext")||D("text"),ue("text")&&(oe=V.text,e.isValidTextValue(oe)&&se.push(oe)),X=[u(c,S,v.eventDataKeys)];var re={trace:S,y:$,_x0:c._x0,_x1:c._x1,_y0:c._y0,_y1:c._y1,text:se.join("<br>"),name:O||ue("name")?S.name:void 0,color:D("hoverlabel.bgcolor")||k.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:V,eventData:X};m&&(re.x0=q-c.rInscribed*c.rpx1,re.x1=q+c.rInscribed*c.rpx1,re.idealAlign=c.pxmid[0]<0?"left":"right"),M&&(re.x=q,re.idealAlign=q<0?"left":"right");var ee=[];w.loneHover(re,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:h,inOut_bbox:ee}),X[0].bbox=ee[0],g._hasHoverLabel=!0}if(M){var j=i.select("path.surface");v.styleOne(j,c,S,{hovered:!0})}g._hasHoverEvent=!0,h.emit("plotly_hover",{points:X||[u(c,S,v.eventDataKeys)],event:d.event})}},T=function(c){var L=h._fullLayout,S=h._fullData[g.index],k=d.select(this).datum();if(g._hasHoverEvent&&(c.originalEvent=d.event,h.emit("plotly_unhover",{points:[u(k,S,v.eventDataKeys)],event:d.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(w.loneUnhover(L._hoverlayer.node()),g._hasHoverLabel=!1),M){var P=i.select("path.surface");v.styleOne(P,k,S,{hovered:!1})}},x=function(c){var L=h._fullLayout,S=h._fullData[g.index],k=m&&(a.isHierarchyRoot(c)||a.isLeaf(c)),P=a.getPtId(c),z=a.isEntry(c)?a.findEntryWithChild(A,P):a.findEntryWithLevel(A,P),I=a.getPtId(z),R={points:[u(c,S,v.eventDataKeys)],event:d.event};k||(R.nextLevel=I);var D=o.triggerHandler(h,"plotly_"+g.type+"click",R);if(D!==!1&&L.hovermode&&(h._hoverdata=[u(c,S,v.eventDataKeys)],w.click(h,d.event)),!k&&D!==!1&&!h._dragging&&!h._transitioning){l.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var O={data:[{level:I}],traces:[g.index]},F={frame:{redraw:!1,duration:v.transitionTime},transition:{duration:v.transitionTime,easing:v.transitionEasing},mode:"immediate",fromcurrent:!0};w.loneUnhover(L._hoverlayer.node()),l.call("animate",h,O,F)}};i.on("mouseover",_),i.on("mouseout",T),i.on("click",x)};function u(s,i,f){for(var h=s.data.data,p={curveNumber:i.index,pointNumber:h.i,data:i._input,fullData:i},v=0;v<f.length;v++){var y=f[v];y in s&&(p[y]=s[y])}return"parentString"in s&&!a.isHierarchyRoot(s)&&(p.parent=s.parentString),b(p,i,h.i),p}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../lib/setcursor"),w=t("../pie/helpers");H.findEntryWithLevel=function(n,r){var u;return r&&n.eachAfter(function(s){if(H.getPtId(s)===r)return u=s.copy()}),u||n},H.findEntryWithChild=function(n,r){var u;return n.eachAfter(function(s){for(var i=s.children||[],f=0;f<i.length;f++){var h=i[f];if(H.getPtId(h)===r)return u=s.copy()}}),u||n},H.isEntry=function(n){return!n.parent},H.isLeaf=function(n){return!n.children},H.getPtId=function(n){return n.data.data.id},H.getPtLabel=function(n){return n.data.data.label},H.getValue=function(n){return n.value},H.isHierarchyRoot=function(n){return a(n)===""},H.setSliceCursor=function(n,r,u){var s=u.isTransitioning;if(!s){var i=n.datum();s=u.hideOnRoot&&H.isHierarchyRoot(i)||u.hideOnLeaves&&H.isLeaf(i)}b(n,s?null:"pointer")};function e(n,r,u){return{color:H.getOutsideTextFontKey("color",n,r,u),family:H.getOutsideTextFontKey("family",n,r,u),size:H.getOutsideTextFontKey("size",n,r,u)}}function o(n,r,u,s){var i=(s||{}).onPathbar,f=r.data.data,h=f.i,p=d.castOption(n,h,(i?"pathbar.textfont":"insidetextfont")+".color");return!p&&n._input.textfont&&(p=d.castOption(n._input,h,"textfont.color")),{color:p||l.contrast(f.color),family:H.getInsideTextFontKey("family",n,r,u,s),size:H.getInsideTextFontKey("size",n,r,u,s)}}H.getInsideTextFontKey=function(n,r,u,s,i){var f=(i||{}).onPathbar,h=f?"pathbar.textfont":"insidetextfont",p=u.data.data.i;return d.castOption(r,p,h+"."+n)||d.castOption(r,p,"textfont."+n)||s.size},H.getOutsideTextFontKey=function(n,r,u,s){var i=u.data.data.i;return d.castOption(r,i,"outsidetextfont."+n)||d.castOption(r,i,"textfont."+n)||s.size},H.isOutsideText=function(n,r){return!n._hasColorscale&&H.isHierarchyRoot(r)},H.determineTextFont=function(n,r,u,s){return H.isOutsideText(n,r)?e(n,r,u):o(n,r,u,s)},H.hasTransition=function(n){return!!(n&&n.duration>0)},H.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},H.isHeader=function(n,r){return!(H.isLeaf(n)||n.depth===r._maxDepth-1)};function a(n){return n.data.data.pid}H.getParent=function(n,r){return H.findEntryWithLevel(n,a(r))},H.listPath=function(n,r){var u=n.parent;if(!u)return[];var s=r?[u.data[r]]:[u];return H.listPath(u,r).concat(s)},H.getPath=function(n){return H.listPath(n,"label").join("/")+"/"},H.formatValue=w.formatPieValue,H.formatPercent=function(n,r){var u=d.formatPercent(n,0);return u==="0%"&&(u=w.formatPiePercent(n,r)),u}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(t,B,H){B.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(t,B,H){B.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return d.coerce(w,e,l,a,n)}o("sunburstcolorway",e.colorway),o("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-hierarchy"),b=t("d3-interpolate").interpolate,w=t("../../components/drawing"),e=t("../../lib"),o=t("../../lib/svg_text_utils"),a=t("../bar/uniform_text"),n=a.recordMinTextSize,r=a.clearMinTextSize,u=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,i=u.computeTransform,f=u.transformInsideText,h=t("./style").styleOne,p=t("../bar/style").resizeText,v=t("./fx"),y=t("./constants"),g=t("./helpers");H.plot=function(x,c,L,S){var k=x._fullLayout,P=k._sunburstlayer,z,I,R=!L,D=!k.uniformtext.mode&&g.hasTransition(L);if(r("sunburst",k),z=P.selectAll("g.trace.sunburst").data(c,function(F){return F[0].trace.uid}),z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),z.order(),D){S&&(I=S());var O=d.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(F){A(x,F,this,L)})})}else z.each(function(F){A(x,F,this,L)}),k.uniformtext.mode&&p(x,k._sunburstlayer.selectAll(".trace"),"sunburst");R&&z.exit().remove()};function A(x,c,L,S){var k=x._fullLayout,P=!k.uniformtext.mode&&g.hasTransition(S),z=d.select(L),I=z.selectAll("g.slice"),R=c[0],D=R.trace,O=R.hierarchy,F=g.findEntryWithLevel(O,D.level),Y=g.getMaxDepth(D),X=k._size,q=D.domain,$=X.w*(q.x[1]-q.x[0]),V=X.h*(q.y[1]-q.y[0]),K=.5*Math.min($,V),se=R.cx=X.l+X.w*(q.x[1]+q.x[0])/2,ue=R.cy=X.t+X.h*(1-q.y[0])-V/2;if(!F)return I.remove();var oe=null,U={};P&&I.each(function(_e){U[g.getPtId(_e)]={rpx0:_e.rpx0,rpx1:_e.rpx1,x0:_e.x0,x1:_e.x1,transform:_e.transform},!oe&&g.isEntry(_e)&&(oe=_e)});var G=m(F).descendants(),re=F.height+1,ee=0,j=Y;R.hasMultipleRoots&&g.isHierarchyRoot(F)&&(G=G.slice(1),re-=1,ee=1,j+=1),G=G.filter(function(_e){return _e.y1<=j});var Q=s(D.rotation);Q&&G.forEach(function(_e){_e.x0+=Q,_e.x1+=Q});var ne=Math.min(re,Y),ae=function(_e){return(_e-ee)/ne*K},ie=function(_e,Ie){return[_e*Math.cos(Ie),-_e*Math.sin(Ie)]},fe=function(_e){return e.pathAnnulus(_e.rpx0,_e.rpx1,_e.x0,_e.x1,se,ue)},me=function(_e){return se+_(_e)[0]*(_e.transform.rCenter||0)+(_e.transform.x||0)},ce=function(_e){return ue+_(_e)[1]*(_e.transform.rCenter||0)+(_e.transform.y||0)};I=I.data(G,g.getPtId),I.enter().append("g").classed("slice",!0),P?I.exit().transition().each(function(){var _e=d.select(this),Ie=_e.select("path.surface");Ie.transition().attrTween("d",function(qe){var Ue=Ae(qe);return function(Re){return fe(Ue(Re))}});var Ye=_e.select("g.slicetext");Ye.attr("opacity",0)}).remove():I.exit().remove(),I.order();var ye=null;if(P&&oe){var xe=g.getPtId(oe);I.each(function(_e){ye===null&&g.getPtId(_e)===xe&&(ye=_e.x1)})}var ke=I;P&&(ke=ke.transition().each("end",function(){var _e=d.select(this);g.setSliceCursor(_e,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ke.each(function(_e){var Ie=d.select(this),Ye=e.ensureSingle(Ie,"path","surface",function(Dt){Dt.style("pointer-events","all")});_e.rpx0=ae(_e.y0),_e.rpx1=ae(_e.y1),_e.xmid=(_e.x0+_e.x1)/2,_e.pxmid=ie(_e.rpx1,_e.xmid),_e.midangle=-(_e.xmid-Math.PI/2),_e.startangle=-(_e.x0-Math.PI/2),_e.stopangle=-(_e.x1-Math.PI/2),_e.halfangle=.5*Math.min(e.angleDelta(_e.x0,_e.x1)||Math.PI,Math.PI),_e.ring=1-_e.rpx0/_e.rpx1,_e.rInscribed=M(_e),P?Ye.transition().attrTween("d",function(Dt){var Gt=Oe(Dt);return function(kt){return fe(Gt(kt))}}):Ye.attr("d",fe),Ie.call(v,F,x,c,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Ye.call(h,_e,D);var qe=e.ensureSingle(Ie,"g","slicetext"),Ue=e.ensureSingle(qe,"text","",function(Dt){Dt.attr("data-notex",1)}),Re=e.ensureUniformFontSize(x,g.determineTextFont(D,_e,k.font));Ue.text(H.formatSliceLabel(_e,F,D,c,k)).classed("slicetext",!0).attr("text-anchor","middle").call(w.font,Re).call(o.convertToTspans,x);var Ve=w.bBox(Ue.node());_e.transform=f(Ve,_e,R),_e.transform.targetX=me(_e),_e.transform.targetY=ce(_e);var dt=function(Dt,Gt){var kt=Dt.transform;return i(kt,Gt),kt.fontSize=Re.size,n(D.type,kt,k),e.getTextTransform(kt)};P?Ue.transition().attrTween("transform",function(Dt){var Gt=He(Dt);return function(kt){return dt(Gt(kt),Ve)}}):Ue.attr("transform",dt(_e,Ve))});function Ae(_e){var Ie=g.getPtId(_e),Ye=U[Ie],qe=U[g.getPtId(F)],Ue;if(qe){var Re=(_e.x1>qe.x1?2*Math.PI:0)+Q;Ue=_e.rpx1<qe.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:Re,x1:Re,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var Ve,dt=g.getPtId(_e.parent);I.each(function(Bt){if(g.getPtId(Bt)===dt)return Ve=Bt});var Dt=Ve.children,Gt;Dt.forEach(function(Bt,Lt){if(g.getPtId(Bt)===Ie)return Gt=Lt});var kt=Dt.length,zt=b(Ve.x0,Ve.x1);Ue={rpx0:K,rpx1:K,x0:zt(Gt/kt),x1:zt((Gt+1)/kt)}}return b(Ye,Ue)}function Oe(_e){var Ie=U[g.getPtId(_e)],Ye,qe={x0:_e.x0,x1:_e.x1,rpx0:_e.rpx0,rpx1:_e.rpx1};if(Ie)Ye=Ie;else if(oe)if(_e.parent)if(ye){var Ue=(_e.x1>ye?2*Math.PI:0)+Q;Ye={x0:Ue,x1:Ue}}else Ye={rpx0:K,rpx1:K},e.extendFlat(Ye,Ge(_e));else Ye={rpx0:0,rpx1:0};else Ye={x0:Q,x1:Q};return b(Ye,qe)}function He(_e){var Ie=U[g.getPtId(_e)],Ye,qe=_e.transform;if(Ie)Ye=Ie;else if(Ye={rpx1:_e.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},oe)if(_e.parent)if(ye){var Ue=_e.x1>ye?2*Math.PI:0;Ye.x0=Ye.x1=Ue}else e.extendFlat(Ye,Ge(_e));else Ye.x0=Ye.x1=Q;else Ye.x0=Ye.x1=Q;var Re=b(Ye.transform.textPosAngle,_e.transform.textPosAngle),Ve=b(Ye.rpx1,_e.rpx1),dt=b(Ye.x0,_e.x0),Dt=b(Ye.x1,_e.x1),Gt=b(Ye.transform.scale,qe.scale),kt=b(Ye.transform.rotate,qe.rotate),zt=qe.rCenter===0?3:Ye.transform.rCenter===0?1/3:1,Bt=b(Ye.transform.rCenter,qe.rCenter),Lt=function(Mt){return Bt(Math.pow(Mt,zt))};return function(Mt){var it=Ve(Mt),ht=dt(Mt),Qe=Dt(Mt),Ce=Lt(Mt),je=ie(it,(ht+Qe)/2),rt=Re(Mt),ut={pxmid:je,rpx1:it,transform:{textPosAngle:rt,rCenter:Ce,x:qe.x,y:qe.y}};return n(D.type,qe,k),{transform:{targetX:me(ut),targetY:ce(ut),scale:Gt(Mt),rotate:kt(Mt),rCenter:Ce}}}}function Ge(_e){var Ie=_e.parent,Ye=U[g.getPtId(Ie)],qe={};if(Ye){var Ue=Ie.children,Re=Ue.indexOf(_e),Ve=Ue.length,dt=b(Ye.x0,Ye.x1);qe.x0=dt(Re/Ve),qe.x1=dt(Re/Ve)}else qe.x0=qe.x1=0;return qe}}function m(x){return l.partition().size([2*Math.PI,x.height+1])(x)}H.formatSliceLabel=function(x,c,L,S,k){var P=L.texttemplate,z=L.textinfo;if(!P&&(!z||z==="none"))return"";var I=k.separators,R=S[0],D=x.data.data,O=R.hierarchy,F=g.isHierarchyRoot(x),Y=g.getParent(O,x),X=g.getValue(x);if(!P){var q=z.split("+"),$=function(j){return q.indexOf(j)!==-1},V=[],K;if($("label")&&D.label&&V.push(D.label),D.hasOwnProperty("v")&&$("value")&&V.push(g.formatValue(D.v,I)),!F){$("current path")&&V.push(g.getPath(x.data));var se=0;$("percent parent")&&se++,$("percent entry")&&se++,$("percent root")&&se++;var ue=se>1;if(se){var oe,U=function(j){K=g.formatPercent(oe,I),ue&&(K+=" of "+j),V.push(K)};$("percent parent")&&!F&&(oe=X/g.getValue(Y),U("parent")),$("percent entry")&&(oe=X/g.getValue(c),U("entry")),$("percent root")&&(oe=X/g.getValue(O),U("root"))}}return $("text")&&(K=e.castOption(L,D.i,"text"),e.isValidTextValue(K)&&V.push(K)),V.join("<br>")}var G=e.castOption(L,D.i,"texttemplate");if(!G)return"";var re={};D.label&&(re.label=D.label),D.hasOwnProperty("v")&&(re.value=D.v,re.valueLabel=g.formatValue(D.v,I)),re.currentPath=g.getPath(x.data),F||(re.percentParent=X/g.getValue(Y),re.percentParentLabel=g.formatPercent(re.percentParent,I),re.parent=g.getPtLabel(Y)),re.percentEntry=X/g.getValue(c),re.percentEntryLabel=g.formatPercent(re.percentEntry,I),re.entry=g.getPtLabel(c),re.percentRoot=X/g.getValue(O),re.percentRootLabel=g.formatPercent(re.percentRoot,I),re.root=g.getPtLabel(O),D.hasOwnProperty("color")&&(re.color=D.color);var ee=e.castOption(L,D.i,"text");return(e.isValidTextValue(ee)||ee==="")&&(re.text=ee),re.customdata=e.castOption(L,D.i,"customdata"),e.texttemplateString(G,re,k._d3locale,re,L._meta||{})};function M(x){return x.rpx0===0&&e.isFullCircle([x.x0,x.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(x.halfangle)),x.ring/2))}function _(x){return T(x.rpx1,x.transform.textPosAngle)}function T(x,c){return[x*Math.sin(c),-x*Math.cos(c)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../bar/uniform_text").resizeText;function e(a){var n=a._fullLayout._sunburstlayer.selectAll(".trace");w(a,n,"sunburst"),n.each(function(r){var u=d.select(this),s=r[0],i=s.trace;u.style("opacity",i.opacity),u.selectAll("path.surface").each(function(f){d.select(this).call(o,f,i)})})}function o(a,n,r){var u=n.data.data,s=!n.children,i=u.i,f=b.castOption(r,i,"marker.line.color")||l.defaultLine,h=b.castOption(r,i,"marker.line.width")||0;a.style("stroke-width",h).call(l.fill,u.color).call(l.stroke,f).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;function n(s){return{valType:"boolean",dflt:!1}}function r(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:d.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:d.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var u=B.exports=a(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},l("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},l.zauto,{}),zmin:o({},l.zmin,{}),zmax:o({},l.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){w.surfacecolor?d(b,w,{vals:w.surfacecolor,containerStr:"",cLetter:"c"}):d(b,w,{vals:w.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(t,B,H){var d=t("../../../stackgl_modules").gl_surface3d,l=t("../../../stackgl_modules").ndarray,b=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,w=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),o=t("../../lib").isArrayOrTypedArray,a=t("../../lib/gl_format_color").parseColorScale,n=t("../../lib/str2rgbarray"),r=t("../../components/colorscale").extractOpts;function u(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=u.prototype;s.getXat=function(S,k,P,z){var I=o(this.data.x)?o(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?I:z.d2l(I,0,P)},s.getYat=function(S,k,P,z){var I=o(this.data.y)?o(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?I:z.d2l(I,0,P)},s.getZat=function(S,k,P,z){var I=this.data.z[k][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][S]),P===void 0?I:z.d2l(I,0,P)},s.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,z=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[z,I],S.traceCoordinate=[this.getXat(z,I),this.getYat(z,I),this.getZat(z,I)],S.dataCoordinate=[this.getXat(z,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(z,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(z,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++){var D=S.dataCoordinate[R];D!=null&&(S.dataCoordinate[R]*=this.scene.dataScale[R])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][z]!==void 0?S.textLabel=O[I][z]:O?S.textLabel=O:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function i(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function h(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function p(S){for(var k=[],P=0;P<f.length;P++){var z=f[P];k.push(h(S,z))}return k}function v(S){for(var k=p(S),P=S,z=0;z<f.length;z++)if(k[z]>0){P=f[z];break}return P}function y(S,k){if(!(S<1||k<1)){for(var P=p(S),z=p(k),I=1,R=0;R<f.length;R++)I*=Math.pow(f[R],Math.max(P[R],z[R]));return I}}function g(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=y(k,S[P]);return k}}s.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getXat(k-1,0),I=this.getXat(k,0);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var R=0;for(k=1;k<S;k++)R+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(R/P[k-1]);return P},s.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getYat(0,k-1),I=this.getYat(0,k);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var R=0;for(k=1;k<S;k++)R+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(R/P[k-1]);return P};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],m=A[9],M=A[13];s.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),z=1+g(P);z<m;)z*=2;for(;z>M;)z--,z/=v(z),z++,z<m&&(z=M);var I=Math.round(z/S);return I>1?I:1};function _(S,k,P){var z=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/z,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/z,S}function T(S,k,P){return x(S,k,_,P),S}function x(S,k,P,z){for(var I=[0,0],R=S.shape[0],D=S.shape[1],O=0;O<R;O++)for(var F=0;F<D;F++)P(I,[O,F],z),S.set(O,F,b(k,I[0],I[1]));return S}s.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,z=S[0].shape[0],I=S[0].shape[1],R=Math.floor(S[0].shape[0]*k+1)|0,D=Math.floor(S[0].shape[1]*P+1)|0,O=1+z+1,F=1+I+1,Y=l(new Float32Array(O*F),[O,F]),X=[1/k,0,0,0,1/P,0,0,0,1],q=0;q<S.length;++q){this.surface.padField(Y,S[q]);var $=l(new Float32Array(R*D),[R,D]);T($,Y,X),S[q]=$}};function c(S,k){for(var P=!1,z=0;z<S.length;z++)if(k===S[z]){P=!0;break}P===!1&&S.push(k)}s.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,z,I,R;for(z=0;z<3;++z)if(this.showContour[z]&&(P=!0,this.contourSize[z]>0&&this.contourStart[z]!==null&&this.contourEnd[z]!==null&&this.contourEnd[z]>this.contourStart[z]))for(k[z]=!0,I=this.contourStart[z];I<this.contourEnd[z];I+=this.contourSize[z])R=I*this.scene.dataScale[z],c(S[z],R);if(P){var D=[[],[],[]];for(z=0;z<3;++z)this.showContour[z]&&(D[z]=k[z]?S[z]:this.scene.contourLevels[z]);this.surface.update({levels:D})}},s.update=function(S){var k=this.scene,P=k.fullSceneLayout,z=this.surface,I=a(S),R=k.dataScale,D=S.z[0].length,O=S._ylength,F=k.contourLevels;this.data=S;var Y,X,q,$,V=[];for(Y=0;Y<3;Y++)for(V[Y]=[],X=0;X<D;X++)V[Y][X]=[];for(X=0;X<D;X++)for(q=0;q<O;q++)V[0][X][q]=this.getXat(X,q,S.xcalendar,P.xaxis),V[1][X][q]=this.getYat(X,q,S.ycalendar,P.yaxis),V[2][X][q]=this.getZat(X,q,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=e(V[2]),w(V[2],S._emptypoints),S._interpolatedZ=[],X=0;X<D;X++)for(S._interpolatedZ[X]=[],q=0;q<O;q++)S._interpolatedZ[X][q]=V[2][X][q];for(Y=0;Y<3;Y++)for(X=0;X<D;X++)for(q=0;q<O;q++)$=V[Y][X][q],$==null?V[Y][X][q]=NaN:$=V[Y][X][q]*=R[Y];for(Y=0;Y<3;Y++)for(X=0;X<D;X++)for(q=0;q<O;q++)$=V[Y][X][q],$!=null&&(this.minValues[Y]>$&&(this.minValues[Y]=$),this.maxValues[Y]<$&&(this.maxValues[Y]=$));for(Y=0;Y<3;Y++)this.objectOffset[Y]=.5*(this.minValues[Y]+this.maxValues[Y]);for(Y=0;Y<3;Y++)for(X=0;X<D;X++)for(q=0;q<O;q++)$=V[Y][X][q],$!=null&&(V[Y][X][q]-=this.objectOffset[Y]);var K=[l(new Float32Array(D*O),[D,O]),l(new Float32Array(D*O),[D,O]),l(new Float32Array(D*O),[D,O])];for(Y=0;Y<3;Y++)for(X=0;X<D;X++)for(q=0;q<O;q++)K[Y].set(X,q,V[Y][X][q]);V=[];var se={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},ue=r(S);if(se.intensityBounds=[ue.min,ue.max],S.surfacecolor){var oe=l(new Float32Array(D*O),[D,O]);for(X=0;X<D;X++)for(q=0;q<O;q++)oe.set(X,q,S.surfacecolor[q][X]);K.push(oe)}else se.intensityBounds[0]*=R[2],se.intensityBounds[1]*=R[2];(M<K[0].shape[0]||M<K[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(K[0].shape[0],0),this.dataScaleY=this.estimateScale(K[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(K)),S.surfacecolor&&(se.intensity=K.pop());var U=[!0,!0,!0],G=["x","y","z"];for(Y=0;Y<3;++Y){var re=S.contours[G[Y]];U[Y]=re.highlight,se.showContour[Y]=re.show||re.highlight,!!se.showContour[Y]&&(se.contourProject[Y]=[re.project.x,re.project.y,re.project.z],re.show?(this.showContour[Y]=!0,se.levels[Y]=F[Y],z.highlightColor[Y]=se.contourColor[Y]=n(re.color),re.usecolormap?z.highlightTint[Y]=se.contourTint[Y]=0:z.highlightTint[Y]=se.contourTint[Y]=1,se.contourWidth[Y]=re.width,this.contourStart[Y]=re.start,this.contourEnd[Y]=re.end,this.contourSize[Y]=re.size):(this.showContour[Y]=!1,this.contourStart[Y]=null,this.contourEnd[Y]=null,this.contourSize[Y]=0),re.highlight&&(se.dynamicColor[Y]=n(re.highlightcolor),se.dynamicWidth[Y]=re.highlightwidth))}i(I)&&(se.vertexColor=!0),se.objectOffset=this.objectOffset,se.coords=K,z.update(se),z.visible=S.visible,z.enableDynamic=U,z.enableHighlight=U,z.snapToData=!0,"lighting"in S&&(z.ambientLight=S.lighting.ambient,z.diffuseLight=S.lighting.diffuse,z.specularLight=S.lighting.specular,z.roughness=S.lighting.roughness,z.fresnel=S.lighting.fresnel),"lightposition"in S&&(z.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,z=d({gl:P}),I=new u(S,z,k.uid);return z._trace=I,I.update(k),S.glplot.add(z),I}B.exports=L},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/colorscale/defaults"),w=t("./attributes"),e=.1;function o(s,i){for(var f=[],h=32,p=0;p<h;p++){var v=p/(h-1),y=i+(1-i)*(1-Math.pow(Math.sin(s*v*Math.PI),2));f.push([v,Math.max(0,Math.min(1,y))])}return f}function a(s){var i=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var f=0;f<s.length;f++){var h=s[f];if(h.length!==2||+h[0]<i)return!1;i=+h[0]}return!0}function n(s,i,f,h){var p,v;function y(S,k){return l.coerce(s,i,w,S,k)}var g=y("x"),A=y("y"),m=y("z");if(!m||!m.length||(g?g.length<1:!1)||(A?A.length<1:!1)){i.visible=!1;return}i._xlength=Array.isArray(g)&&l.isArrayOrTypedArray(g[0])?m.length:m[0].length,i._ylength=m.length;var M=d.getComponentMethod("calendars","handleTraceDefaults");M(s,i,["x","y","z"],h),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){y(S)});var _=y("surfacecolor"),T=["x","y","z"];for(p=0;p<3;++p){var x="contours."+T[p],c=y(x+".show"),L=y(x+".highlight");if(c||L)for(v=0;v<3;++v)y(x+".project."+T[v]);c&&(y(x+".color"),y(x+".width"),y(x+".usecolormap")),L&&(y(x+".highlightcolor"),y(x+".highlightwidth")),y(x+".start"),y(x+".end"),y(x+".size")}_||(u(s,"zmin","cmin"),u(s,"zmax","cmax"),u(s,"zauto","cauto")),b(s,i,h,y,{prefix:"",cLetter:"c"}),r(s,i,h,y),i._length=null}function r(s,i,f,h){var p=h("opacityscale");p==="max"?i.opacityscale=[[0,e],[1,1]]:p==="min"?i.opacityscale=[[0,1],[1,e]]:p==="extremes"?i.opacityscale=o(1,e):a(p)||(i.opacityscale=void 0)}function u(s,i,f){i in s&&!(f in s)&&(s[f]=s[i])}B.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(t,B,H){var d=t("../../components/annotations/attributes"),l=t("../../lib/extend").extendFlat,b=t("../../plot_api/edit_types").overrideAll,w=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,o=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=B.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:l({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},w({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:l({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},w({arrayOk:!0}))}},"calc","from-root");a.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(t,B,H){var d=t("../../plots/get_data").getModuleCalcData,l=t("./plot"),b="table";H.name=b,H.plot=function(w){var e=d(w.calcdata,b)[0];e.length&&l(w,e)},H.clean=function(w,e,o,a){var n=a._has&&a._has(b),r=e._has&&e._has(b);n&&!r&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(t,B,H){var d=t("../../lib/gup").wrap;B.exports=function(){return d({})}},{"../../lib/gup":500}],1065:[function(t,B,H){B.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(t,B,H){var d=t("./constants"),l=t("../../lib/extend").extendFlat,b=t("fast-isnumeric");B.exports=function(f,h){var p=o(h.cells.values),v=function(X){return X.slice(h.header.values.length,X.length)},y=o(h.header.values);y.length&&!y[0].length&&(y[0]=[""],y=o(y));var g=y.concat(v(p).map(function(){return a((y[0]||[""]).length)})),A=h.domain,m=Math.floor(f._fullLayout._size.w*(A.x[1]-A.x[0])),M=Math.floor(f._fullLayout._size.h*(A.y[1]-A.y[0])),_=h.header.values.length?g[0].map(function(){return h.header.height}):[d.emptyHeaderHeight],T=p.length?p[0].map(function(){return h.cells.height}):[],x=_.reduce(e,0),c=M-x,L=c+d.uplift,S=u(T,L),k=u(_,x),P=r(k,[]),z=r(S,P),I={},R=h._fullInput.columnorder.concat(v(p.map(function(X,q){return q}))),D=g.map(function(X,q){var $=Array.isArray(h.columnwidth)?h.columnwidth[Math.min(q,h.columnwidth.length-1)]:h.columnwidth;return b($)?Number($):1}),O=D.reduce(e,0);D=D.map(function(X){return X/O*m});var F=Math.max(w(h.header.line.width),w(h.cells.line.width)),Y={key:h.uid+f._context.staticPlot,translateX:A.x[0]*f._fullLayout._size.w,translateY:f._fullLayout._size.h*(1-A.y[1]),size:f._fullLayout._size,width:m,maxLineWidth:F,height:M,columnOrder:R,groupHeight:M,rowBlocks:z,headerRowBlocks:P,scrollY:0,cells:l({},h.cells,{values:p}),headerCells:l({},h.header,{values:g}),gdColumns:g.map(function(X){return X[0]}),gdColumnsOriginalOrder:g.map(function(X){return X[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(X,q){var $=I[X];I[X]=($||0)+1;var V=X+"__"+I[X];return{key:V,label:X,specIndex:q,xIndex:R[q],xScale:n,x:void 0,calcdata:void 0,columnWidth:D[q]}})};return Y.columns.forEach(function(X){X.calcdata=Y,X.x=n(X)}),Y};function w(i){if(Array.isArray(i)){for(var f=0,h=0;h<i.length;h++)f=Math.max(f,w(i[h]));return f}return i}function e(i,f){return i+f}function o(i){var f=i.slice(),h=1/0,p=0,v;for(v=0;v<f.length;v++)Array.isArray(f[v])||(f[v]=[f[v]]),h=Math.min(h,f[v].length),p=Math.max(p,f[v].length);if(h!==p)for(v=0;v<f.length;v++){var y=p-f[v].length;y&&(f[v]=f[v].concat(a(y)))}return f}function a(i){for(var f=new Array(i),h=0;h<i;h++)f[h]="";return f}function n(i){return i.calcdata.columns.reduce(function(f,h){return h.xIndex<i.xIndex?f+h.columnWidth:f},0)}function r(i,f){var h=Object.keys(i);return h.map(function(p){return l({},i[p],{auxiliaryBlocks:f})})}function u(i,f){for(var h={},p,v=0,y=0,g=s(),A=0,m=0,M=0;M<i.length;M++)p=i[M],g.rows.push({rowIndex:M,rowHeight:p}),y+=p,(y>=f||M===i.length-1)&&(h[v]=g,g.key=m++,g.firstRowIndex=A,g.lastRowIndex=M,g=s(),v+=y,A=M+1,y=0);return h}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(t,B,H){var d=t("../../lib/extend").extendFlat;H.splitToPanels=function(b){var w=[0,0],e=d({},b,{key:"header",type:"header",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!0,values:b.calcdata.headerCells.values[b.specIndex],rowBlocks:b.calcdata.headerRowBlocks,calcdata:d({},b.calcdata,{cells:b.calcdata.headerCells})}),o=d({},b,{key:"cells1",type:"cells",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),a=d({},b,{key:"cells2",type:"cells",page:1,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks});return[o,a,e]},H.splitToCells=function(b){var w=l(b);return(b.values||[]).slice(w[0],w[1]).map(function(e,o){var a=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:o+a,key:w[0]+o,column:b,calcdata:b.calcdata,page:b.page,rowBlocks:b.rowBlocks,value:e}})};function l(b){var w=b.rowBlocks[b.page],e=w?w.rows[0].rowIndex:0,o=w?e+w.rows.length:0;return[e,o]}},{"../../lib/extend":493}],1068:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults;function w(e,o){for(var a=e.columnorder||[],n=e.header.values.length,r=a.slice(0,n),u=r.slice().sort(function(f,h){return f-h}),s=r.map(function(f){return u.indexOf(f)}),i=s.length;i<n;i++)s.push(i);o("columnorder",s)}B.exports=function(o,a,n,r){function u(s,i){return d.coerce(o,a,l,s,i)}b(a,r,u),u("columnwidth"),u("header.values"),u("header.format"),u("header.align"),u("header.prefix"),u("header.suffix"),u("header.height"),u("header.line.width"),u("header.line.color"),u("header.fill.color"),d.coerceFont(u,"header.font",d.extendFlat({},r.font)),w(a,u),u("cells.values"),u("cells.format"),u("cells.align"),u("cells.prefix"),u("cells.suffix"),u("cells.height"),u("cells.line.width"),u("cells.line.color"),u("cells.fill.color"),d.coerceFont(u,"cells.font",d.extendFlat({},r.font)),a._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(t,B,H){var d=t("./constants"),l=t("@plotly/d3"),b=t("../../lib"),w=b.numberFormat,e=t("../../lib/gup"),o=t("../../components/drawing"),a=t("../../lib/svg_text_utils"),n=t("../../lib").raiseToTop,r=t("../../lib").strTranslate,u=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),i=t("./data_split_helpers"),f=t("../../components/color");B.exports=function(ne,ae){var ie=!ne._context.staticPlot,fe=ne._fullLayout._paper.selectAll("."+d.cn.table).data(ae.map(function(Ue){var Re=e.unwrap(Ue),Ve=Re.trace;return s(ne,Ve)}),e.keyFun);fe.exit().remove(),fe.enter().append("g").classed(d.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),fe.attr("width",function(Ue){return Ue.width+Ue.size.l+Ue.size.r}).attr("height",function(Ue){return Ue.height+Ue.size.t+Ue.size.b}).attr("transform",function(Ue){return r(Ue.translateX,Ue.translateY)});var me=fe.selectAll("."+d.cn.tableControlView).data(e.repeat,e.keyFun),ce=me.enter().append("g").classed(d.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var ye="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(Ue){me.filter(function(Re){return Ue===Re}).call(g,ne)}).on(ye,function(Ue){if(!Ue.scrollbarState.wheeling){Ue.scrollbarState.wheeling=!0;var Re=Ue.scrollY+l.event.deltaY,Ve=$(ne,me,null,Re)(Ue);Ve||(l.event.stopPropagation(),l.event.preventDefault()),Ue.scrollbarState.wheeling=!1}}).call(g,ne,!0)}me.attr("transform",function(Ue){return r(Ue.size.l,Ue.size.t)});var xe=me.selectAll("."+d.cn.scrollBackground).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(d.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(Ue){return Ue.width}).attr("height",function(Ue){return Ue.height}),me.each(function(Ue){o.setClipUrl(l.select(this),p(ne,Ue),ne)});var ke=me.selectAll("."+d.cn.yColumn).data(function(Ue){return Ue.columns},e.keyFun);ke.enter().append("g").classed(d.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function(Ue){return r(Ue.x,0)}),ie&&ke.call(l.behavior.drag().origin(function(Ue){var Re=l.select(this);return D(Re,Ue,-d.uplift),n(this),Ue.calcdata.columnDragInProgress=!0,g(me.filter(function(Ve){return Ue.calcdata.key===Ve.key}),ne),Ue}).on("drag",function(Ue){var Re=l.select(this),Ve=function(Gt){return(Ue===Gt?l.event.x:Gt.x)+Gt.columnWidth/2};Ue.x=Math.max(-d.overdrag,Math.min(Ue.calcdata.width+d.overdrag-Ue.columnWidth,l.event.x));var dt=y(ke).filter(function(Gt){return Gt.calcdata.key===Ue.calcdata.key}),Dt=dt.sort(function(Gt,kt){return Ve(Gt)-Ve(kt)});Dt.forEach(function(Gt,kt){Gt.xIndex=kt,Gt.x=Ue===Gt?Gt.x:Gt.xScale(Gt)}),ke.filter(function(Gt){return Ue!==Gt}).transition().ease(d.transitionEase).duration(d.transitionDuration).attr("transform",function(Gt){return r(Gt.x,0)}),Re.call(u).attr("transform",r(Ue.x,-d.uplift))}).on("dragend",function(Ue){var Re=l.select(this),Ve=Ue.calcdata;Ue.x=Ue.xScale(Ue),Ue.calcdata.columnDragInProgress=!1,D(Re,Ue,0),I(ne,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),ke.each(function(Ue){o.setClipUrl(l.select(this),v(ne,Ue),ne)});var Ae=ke.selectAll("."+d.cn.columnBlock).data(i.splitToPanels,e.keyFun);Ae.enter().append("g").classed(d.cn.columnBlock,!0).attr("id",function(Ue){return Ue.key}),Ae.style("cursor",function(Ue){return Ue.dragHandle?"ew-resize":Ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Oe=Ae.filter(F),He=Ae.filter(O);ie&&He.call(l.behavior.drag().origin(function(Ue){return l.event.stopPropagation(),Ue}).on("drag",$(ne,me,-1)).on("dragend",function(){})),A(ne,me,Oe,Ae),A(ne,me,He,Ae);var Ge=me.selectAll("."+d.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ge.enter().append("clipPath").classed(d.cn.scrollAreaClip,!0).attr("id",function(Ue){return p(ne,Ue)});var _e=Ge.selectAll("."+d.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);_e.enter().append("rect").classed(d.cn.scrollAreaClipRect,!0).attr("x",-d.overdrag).attr("y",-d.uplift).attr("fill","none"),_e.attr("width",function(Ue){return Ue.width+2*d.overdrag}).attr("height",function(Ue){return Ue.height+d.uplift});var Ie=ke.selectAll("."+d.cn.columnBoundary).data(e.repeat,e.keyFun);Ie.enter().append("g").classed(d.cn.columnBoundary,!0);var Ye=ke.selectAll("."+d.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ye.enter().append("clipPath").classed(d.cn.columnBoundaryClippath,!0),Ye.attr("id",function(Ue){return v(ne,Ue)});var qe=Ye.selectAll("."+d.cn.columnBoundaryRect).data(e.repeat,e.keyFun);qe.enter().append("rect").classed(d.cn.columnBoundaryRect,!0).attr("fill","none"),qe.attr("width",function(Ue){return Ue.columnWidth+2*h(Ue)}).attr("height",function(Ue){return Ue.calcdata.height+2*h(Ue)+d.uplift}).attr("x",function(Ue){return-h(Ue)}).attr("y",function(Ue){return-h(Ue)}),q(null,He,me)};function h(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function p(Q,ne){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+ne.key}function v(Q,ne){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+ne.calcdata.key+"_"+ne.specIndex}function y(Q){return[].concat.apply([],Q.map(function(ne){return ne})).map(function(ne){return ne.__data__})}function g(Q,ne,ae){function ie(ke){var Ae=ke.rowBlocks;return U(Ae,Ae.length-1)+(Ae.length?G(Ae[Ae.length-1],1/0):1)}var fe=Q.selectAll("."+d.cn.scrollbarKit).data(e.repeat,e.keyFun);fe.enter().append("g").classed(d.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),fe.each(function(ke){var Ae=ke.scrollbarState;Ae.totalHeight=ie(ke),Ae.scrollableAreaHeight=ke.groupHeight-Y(ke),Ae.currentlyVisibleHeight=Math.min(Ae.totalHeight,Ae.scrollableAreaHeight),Ae.ratio=Ae.currentlyVisibleHeight/Ae.totalHeight,Ae.barLength=Math.max(Ae.ratio*Ae.currentlyVisibleHeight,d.goldenRatio*d.scrollbarWidth),Ae.barWiggleRoom=Ae.currentlyVisibleHeight-Ae.barLength,Ae.wiggleRoom=Math.max(0,Ae.totalHeight-Ae.scrollableAreaHeight),Ae.topY=Ae.barWiggleRoom===0?0:ke.scrollY/Ae.wiggleRoom*Ae.barWiggleRoom,Ae.bottomY=Ae.topY+Ae.barLength,Ae.dragMultiplier=Ae.wiggleRoom/Ae.barWiggleRoom}).attr("transform",function(ke){var Ae=ke.width+d.scrollbarWidth/2+d.scrollbarOffset;return r(Ae,Y(ke))});var me=fe.selectAll("."+d.cn.scrollbar).data(e.repeat,e.keyFun);me.enter().append("g").classed(d.cn.scrollbar,!0);var ce=me.selectAll("."+d.cn.scrollbarSlider).data(e.repeat,e.keyFun);ce.enter().append("g").classed(d.cn.scrollbarSlider,!0),ce.attr("transform",function(ke){return r(0,ke.scrollbarState.topY||0)});var ye=ce.selectAll("."+d.cn.scrollbarGlyph).data(e.repeat,e.keyFun);ye.enter().append("line").classed(d.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",d.scrollbarWidth).attr("stroke-linecap","round").attr("y1",d.scrollbarWidth/2),ye.attr("y2",function(ke){return ke.scrollbarState.barLength-d.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||ae?0:.4}),ye.transition().delay(0).duration(0),ye.transition().delay(d.scrollbarHideDelay).duration(d.scrollbarHideDuration).attr("stroke-opacity",0);var xe=me.selectAll("."+d.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);xe.enter().append("line").classed(d.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",d.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Ae=l.event.y,Oe=this.getBoundingClientRect(),He=ke.scrollbarState,Ge=Ae-Oe.top,_e=l.scale.linear().domain([0,He.scrollableAreaHeight]).range([0,He.totalHeight]).clamp(!0);He.topY<=Ge&&Ge<=He.bottomY||$(ne,Q,null,_e(Ge-He.barLength/2))(ke)}).call(l.behavior.drag().origin(function(ke){return l.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",$(ne,Q)).on("dragend",function(){})),xe.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),ne._context.staticPlot&&(ye.remove(),xe.remove())}function A(Q,ne,ae,ie){var fe=m(ae),me=M(fe);c(me);var ce=_(me);S(ce);var ye=x(me),xe=T(ye);L(xe),k(xe,ne,ie,Q),oe(me)}function m(Q){var ne=Q.selectAll("."+d.cn.columnCells).data(e.repeat,e.keyFun);return ne.enter().append("g").classed(d.cn.columnCells,!0),ne.exit().remove(),ne}function M(Q){var ne=Q.selectAll("."+d.cn.columnCell).data(i.splitToCells,function(ae){return ae.keyWithinBlock});return ne.enter().append("g").classed(d.cn.columnCell,!0),ne.exit().remove(),ne}function _(Q){var ne=Q.selectAll("."+d.cn.cellRect).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("rect").classed(d.cn.cellRect,!0),ne}function T(Q){var ne=Q.selectAll("."+d.cn.cellText).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("text").classed(d.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){l.event.stopPropagation()}),ne}function x(Q){var ne=Q.selectAll("."+d.cn.cellTextHolder).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("g").classed(d.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ne}function c(Q){Q.each(function(ne,ae){var ie=ne.calcdata.cells.font,fe=ne.column.specIndex,me={size:R(ie.size,fe,ae),color:R(ie.color,fe,ae),family:R(ie.family,fe,ae)};ne.rowNumber=ne.key,ne.align=R(ne.calcdata.cells.align,fe,ae),ne.cellBorderWidth=R(ne.calcdata.cells.line.width,fe,ae),ne.font=me})}function L(Q){Q.each(function(ne){o.font(l.select(this),ne.font)})}function S(Q){Q.attr("width",function(ne){return ne.column.columnWidth}).attr("stroke-width",function(ne){return ne.cellBorderWidth}).each(function(ne){var ae=l.select(this);f.stroke(ae,R(ne.calcdata.cells.line.color,ne.column.specIndex,ne.rowNumber)),f.fill(ae,R(ne.calcdata.cells.fill.color,ne.column.specIndex,ne.rowNumber))})}function k(Q,ne,ae,ie){Q.text(function(fe){var me=fe.column.specIndex,ce=fe.rowNumber,ye=fe.value,xe=typeof ye=="string",ke=xe&&ye.match(/<br>/i),Ae=!xe||ke;fe.mayHaveMarkup=xe&&ye.match(/[<&>]/);var Oe=P(ye);fe.latex=Oe;var He=Oe?"":R(fe.calcdata.cells.prefix,me,ce)||"",Ge=Oe?"":R(fe.calcdata.cells.suffix,me,ce)||"",_e=Oe?null:R(fe.calcdata.cells.format,me,ce)||null,Ie=He+(_e?w(_e)(fe.value):fe.value)+Ge,Ye;fe.wrappingNeeded=!fe.wrapped&&!Ae&&!Oe&&(Ye=z(Ie)),fe.cellHeightMayIncrease=ke||Oe||fe.mayHaveMarkup||(Ye===void 0?z(Ie):Ye),fe.needsConvertToTspans=fe.mayHaveMarkup||fe.wrappingNeeded||fe.latex;var qe;if(fe.wrappingNeeded){var Ue=d.wrapSplitCharacter===" "?Ie.replace(/<a href=/ig,"<a_href="):Ie,Re=Ue.split(d.wrapSplitCharacter),Ve=d.wrapSplitCharacter===" "?Re.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Re;fe.fragments=Ve.map(function(dt){return{text:dt,width:null}}),fe.fragments.push({fragment:d.wrapSpacer,width:null}),qe=Ve.join(d.lineBreaker)+d.lineBreaker+d.wrapSpacer}else delete fe.fragments,qe=Ie;return qe}).attr("dy",function(fe){return fe.needsConvertToTspans?0:"0.75em"}).each(function(fe){var me=this,ce=l.select(me),ye=fe.wrappingNeeded?K:se;fe.needsConvertToTspans?a.convertToTspans(ce,ie,ye(ae,me,ne,ie,fe)):l.select(me.parentNode).attr("transform",function(xe){return r(ue(xe),d.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P(Q){return typeof Q=="string"&&Q.match(d.latexCheck)}function z(Q){return Q.indexOf(d.wrapSplitCharacter)!==-1}function I(Q,ne,ae){var ie=ne.gdColumnsOriginalOrder;ne.gdColumns.sort(function(fe,me){return ae[ie.indexOf(fe)]-ae[ie.indexOf(me)]}),ne.columnorder=ae,Q.emit("plotly_restyle")}function R(Q,ne,ae){if(Array.isArray(Q)){var ie=Q[Math.min(ne,Q.length-1)];return Array.isArray(ie)?ie[Math.min(ae,ie.length-1)]:ie}else return Q}function D(Q,ne,ae){Q.transition().ease(d.releaseTransitionEase).duration(d.releaseTransitionDuration).attr("transform",r(ne.x,ae))}function O(Q){return Q.type==="cells"}function F(Q){return Q.type==="header"}function Y(Q){var ne=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return ne.reduce(function(ae,ie){return ae+G(ie,1/0)},0)}function X(Q,ne,ae){for(var ie=[],fe=0,me=0;me<Q.length;me++){for(var ce=Q[me],ye=ce.rows,xe=0,ke=0;ke<ye.length;ke++)xe+=ye[ke].rowHeight;ce.allRowsHeight=xe;var Ae=fe+xe,Oe=ne,He=Oe+ae;Oe<Ae&&He>fe&&ie.push(me),fe+=xe}return ie}function q(Q,ne,ae){var ie=y(ne)[0];if(ie!==void 0){var fe=ie.rowBlocks,me=ie.calcdata,ce=U(fe,fe.length),ye=ie.calcdata.groupHeight-Y(ie),xe=me.scrollY=Math.max(0,Math.min(ce-ye,me.scrollY)),ke=X(fe,xe,ye);ke.length===1&&(ke[0]===fe.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),ne.each(function(Ae,Oe){Ae.page=ke[Oe],Ae.scrollY=xe}),ne.attr("transform",function(Ae){var Oe=U(Ae.rowBlocks,Ae.page)-Ae.scrollY;return r(0,Oe)}),Q&&(V(Q,ae,ne,ke,ie.prevPages,ie,0),V(Q,ae,ne,ke,ie.prevPages,ie,1),g(ae,Q))}}function $(Q,ne,ae,ie){return function(me){var ce=me.calcdata?me.calcdata:me,ye=ne.filter(function(Oe){return ce.key===Oe.key}),xe=ae||ce.scrollbarState.dragMultiplier,ke=ce.scrollY;ce.scrollY=ie===void 0?ce.scrollY+xe*l.event.dy:ie;var Ae=ye.selectAll("."+d.cn.yColumn).selectAll("."+d.cn.columnBlock).filter(O);return q(Q,Ae,ye),ce.scrollY===ke}}function V(Q,ne,ae,ie,fe,me,ce){var ye=ie[ce]!==fe[ce];ye&&(clearTimeout(me.currentRepaint[ce]),me.currentRepaint[ce]=setTimeout(function(){var xe=ae.filter(function(ke,Ae){return Ae===ce&&ie[Ae]!==fe[Ae]});A(Q,ne,xe,ae),fe[ce]=ie[ce]}))}function K(Q,ne,ae,ie){return function(){var me=l.select(ne.parentNode);me.each(function(ce){var ye=ce.fragments;me.selectAll("tspan.line").each(function(Ie,Ye){ye[Ye].width=this.getComputedTextLength()});var xe=ye[ye.length-1].width,ke=ye.slice(0,-1),Ae=[],Oe,He,Ge=0,_e=ce.column.columnWidth-2*d.cellPad;for(ce.value="";ke.length;)Oe=ke.shift(),He=Oe.width+xe,Ge+He>_e&&(ce.value+=Ae.join(d.wrapSpacer)+d.lineBreaker,Ae=[],Ge=0),Ae.push(Oe.text),Ge+=He;Ge&&(ce.value+=Ae.join(d.wrapSpacer)),ce.wrapped=!0}),me.selectAll("tspan.line").remove(),k(me.select("."+d.cn.cellText),ae,Q,ie),l.select(ne.parentNode.parentNode).call(oe)}}function se(Q,ne,ae,ie,fe){return function(){if(!fe.settledY){var ce=l.select(ne.parentNode),ye=ee(fe),xe=fe.key-ye.firstRowIndex,ke=ye.rows[xe].rowHeight,Ae=fe.cellHeightMayIncrease?ne.parentNode.getBoundingClientRect().height+2*d.cellPad:ke,Oe=Math.max(Ae,ke),He=Oe-ye.rows[xe].rowHeight;He&&(ye.rows[xe].rowHeight=Oe,Q.selectAll("."+d.cn.columnCell).call(oe),q(null,Q.filter(O),0),g(ae,ie,!0)),ce.attr("transform",function(){var Ge=this,_e=Ge.parentNode,Ie=_e.getBoundingClientRect(),Ye=l.select(Ge.parentNode).select("."+d.cn.cellRect).node().getBoundingClientRect(),qe=Ge.transform.baseVal.consolidate(),Ue=Ye.top-Ie.top+(qe?qe.matrix.f:d.cellPad);return r(ue(fe,l.select(Ge.parentNode).select("."+d.cn.cellTextHolder).node().getBoundingClientRect().width),Ue)}),fe.settledY=!0}}}function ue(Q,ne){switch(Q.align){case"left":return d.cellPad;case"right":return Q.column.columnWidth-(ne||0)-d.cellPad;case"center":return(Q.column.columnWidth-(ne||0))/2;default:return d.cellPad}}function oe(Q){Q.attr("transform",function(ne){var ae=ne.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,ye){return ce+G(ye,1/0)},0),ie=ee(ne),fe=G(ie,ne.key),me=fe+ae;return r(0,me)}).selectAll("."+d.cn.cellRect).attr("height",function(ne){return j(ee(ne),ne.key).rowHeight})}function U(Q,ne){for(var ae=0,ie=ne-1;ie>=0;ie--)ae+=re(Q[ie]);return ae}function G(Q,ne){for(var ae=0,ie=0;ie<Q.rows.length&&Q.rows[ie].rowIndex<ne;ie++)ae+=Q.rows[ie].rowHeight;return ae}function re(Q){var ne=Q.allRowsHeight;if(ne!==void 0)return ne;for(var ae=0,ie=0;ie<Q.rows.length;ie++)ae+=Q.rows[ie].rowHeight;return Q.allRowsHeight=ae,ae}function ee(Q){return Q.rowBlocks[Q.page]}function j(Q,ne){return Q.rows[ne-Q.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../components/colorscale/attributes"),w=t("../../plots/domain").attributes,e=t("../pie/attributes"),o=t("../sunburst/attributes"),a=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:l({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:d({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:w({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(t,B,H){var d=t("../../plots/plots");H.name="treemap",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],1073:[function(t,B,H){var d=t("../sunburst/calc");H.calc=function(l,b){return d.calc(l,b)},H.crossTraceCalc=function(l){return d._runCrossTraceCalc("treemap",l)}},{"../sunburst/calc":1047}],1074:[function(t,B,H){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,o=t("../bar/constants").TEXTPAD,a=t("../../components/colorscale"),n=a.hasColorscale,r=a.handleDefaults;B.exports=function(s,i,f,h){function p(k,P){return d.coerce(s,i,l,k,P)}var v=p("labels"),y=p("parents");if(!v||!v.length||!y||!y.length){i.visible=!1;return}var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var A=p("tiling.packing");A==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var m=p("text");p("texttemplate"),i.texttemplate||p("textinfo",Array.isArray(m)?"text+label":"label"),p("hovertext"),p("hovertemplate");var M=p("pathbar.visible"),_="auto";e(s,i,h,p,_,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var T=i.textposition.indexOf("bottom")!==-1,x=p("marker.line.width");x&&p("marker.line.color",h.paper_bgcolor);var c=p("marker.colors"),L=i._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;L?r(s,i,h,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(c||[]).length);var S=i.textfont.size*2;p("marker.pad.t",T?S/4:S),p("marker.pad.l",S/4),p("marker.pad.r",S/4),p("marker.pad.b",T?S:S/4),i._hovered={marker:{line:{width:2,color:b.contrast(h.paper_bgcolor)}}},M&&(p("pathbar.thickness",i.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),w(i,h,p),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(t,B,H){var d=t("@plotly/d3"),l=t("../sunburst/helpers"),b=t("../bar/uniform_text"),w=b.clearMinTextSize,e=t("../bar/style").resizeText,o=t("./plot_one");B.exports=function(n,r,u,s,i){var f=i.type,h=i.drawDescendants,p=n._fullLayout,v=p["_"+f+"layer"],y,g,A=!u;if(w(f,p),y=v.selectAll("g.trace."+f).data(r,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(f,!0),y.order(),!p.uniformtext.mode&&l.hasTransition(u)){s&&(g=s());var m=d.transition().duration(u.duration).ease(u.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()});m.each(function(){v.selectAll("g.trace").each(function(M){o(n,M,this,u,h)})})}else y.each(function(M){o(n,M,this,u,h)}),p.uniformtext.mode&&e(n,v.selectAll(".trace"),f);A&&y.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),u=!0;B.exports=function(i,f,h,p,v){var y=v.barDifY,g=v.width,A=v.height,m=v.viewX,M=v.viewY,_=v.pathSlice,T=v.toMoveInsideSlice,x=v.strTransform,c=v.hasTransition,L=v.handleSlicesExit,S=v.makeUpdateSliceInterpolator,k=v.makeUpdateTextInterpolator,P={},z=i._fullLayout,I=f[0],R=I.trace,D=I.hierarchy,O=g/R._entryDepth,F=n.listPath(h.data,"id"),Y=e(D.copy(),[g,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();Y=Y.filter(function(q){var $=F.indexOf(q.data.id);return $===-1?!1:(q.x0=O*$,q.x1=O*($+1),q.y0=y,q.y1=y+A,q.onPathbar=!0,!0)}),Y.reverse(),p=p.data(Y,n.getPtId),p.enter().append("g").classed("pathbar",!0),L(p,u,P,[g,A],_),p.order();var X=p;c&&(X=X.transition().each("end",function(){var q=d.select(this);n.setSliceCursor(q,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(q){q._x0=m(q.x0),q._x1=m(q.x1),q._y0=M(q.y0),q._y1=M(q.y1),q._hoverX=m(q.x1-Math.min(g,A)/2),q._hoverY=M(q.y1-A/2);var $=d.select(this),V=l.ensureSingle($,"path","surface",function(oe){oe.style("pointer-events","all")});c?V.transition().attrTween("d",function(oe){var U=S(oe,u,P,[g,A]);return function(G){return _(U(G))}}):V.attr("d",_),$.call(r,h,i,f,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),V.call(o,q,R,{hovered:!1}),q._text=(n.getPtLabel(q)||"").split("<br>").join(" ")||"";var K=l.ensureSingle($,"g","slicetext"),se=l.ensureSingle(K,"text","",function(oe){oe.attr("data-notex",1)}),ue=l.ensureUniformFontSize(i,n.determineTextFont(R,q,z.font,{onPathbar:!0}));se.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,ue).call(w.convertToTspans,i),q.textBB=b.bBox(se.node()),q.transform=T(q,{fontSize:ue.size,onPathbar:!0}),q.transform.fontSize=ue.size,c?se.transition().attrTween("transform",function(oe){var U=k(oe,u,P,[g,A]);return function(G){return x(U(G))}}):se.attr("transform",x(q))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),u=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(f,h,p,v,y){var g=y.width,A=y.height,m=y.viewX,M=y.viewY,_=y.pathSlice,T=y.toMoveInsideSlice,x=y.strTransform,c=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,z={},I=f._fullLayout,R=h[0],D=R.trace,O=D.textposition.indexOf("left")!==-1,F=D.textposition.indexOf("right")!==-1,Y=D.textposition.indexOf("bottom")!==-1,X=!Y&&!D.marker.pad.t||Y&&!D.marker.pad.b,q=e(p,[g,A],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}),$=q.descendants(),V=1/0,K=-1/0;$.forEach(function(G){var re=G.depth;re>=D._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(V=Math.min(V,re),K=Math.max(K,re))}),v=v.data($,n.getPtId),D._maxVisibleLayers=isFinite(K)?K-V+1:0,v.enter().append("g").classed("slice",!0),L(v,s,z,[g,A],_),v.order();var se=null;if(c&&P){var ue=n.getPtId(P);v.each(function(G){se===null&&n.getPtId(G)===ue&&(se={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var oe=function(){return se||{x0:0,x1:g,y0:0,y1:A}},U=v;return c&&(U=U.transition().each("end",function(){var G=d.select(this);n.setSliceCursor(G,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(G){var re=n.isHeader(G,D);G._x0=m(G.x0),G._x1=m(G.x1),G._y0=M(G.y0),G._y1=M(G.y1),G._hoverX=m(G.x1-D.marker.pad.r),G._hoverY=M(Y?G.y1-D.marker.pad.b/2:G.y0+D.marker.pad.t/2);var ee=d.select(this),j=l.ensureSingle(ee,"path","surface",function(ie){ie.style("pointer-events","all")});c?j.transition().attrTween("d",function(ie){var fe=S(ie,s,oe(),[g,A]);return function(me){return _(fe(me))}}):j.attr("d",_),ee.call(r,p,f,h,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,f,{isTransitioning:f._transitioning}),j.call(o,G,D,{hovered:!1}),G.x0===G.x1||G.y0===G.y1?G._text="":re?G._text=X?"":n.getPtLabel(G)||"":G._text=u(G,p,D,h,I)||"";var Q=l.ensureSingle(ee,"g","slicetext"),ne=l.ensureSingle(Q,"text","",function(ie){ie.attr("data-notex",1)}),ae=l.ensureUniformFontSize(f,n.determineTextFont(D,G,I.font));ne.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O||re?"start":"middle").call(b.font,ae).call(w.convertToTspans,f),G.textBB=b.bBox(ne.node()),G.transform=T(G,{fontSize:ae.size,isHeader:re}),G.transform.fontSize=ae.size,c?ne.transition().attrTween("transform",function(ie){var fe=k(ie,s,oe(),[g,A]);return function(me){return x(fe(me))}}):ne.attr("transform",x(G))}),se}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(t,B,H){B.exports=function d(l,b,w){var e;w.swapXY&&(e=l.x0,l.x0=l.y0,l.y0=e,e=l.x1,l.x1=l.y1,l.y1=e),w.flipX&&(e=l.x0,l.x0=b[0]-l.x1,l.x1=b[0]-e),w.flipY&&(e=l.y0,l.y0=b[1]-l.y1,l.y1=b[1]-e);var o=l.children;if(o)for(var a=0;a<o.length;a++)d(o[a],b,w)}},{}],1080:[function(t,B,H){B.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(t,B,H){B.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,n){return d.coerce(w,e,l,a,n)}o("treemapcolorway",e.colorway),o("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(t,B,H){var d=t("d3-hierarchy"),l=t("./flip_tree");B.exports=function(e,o,a){var n=a.flipX,r=a.flipY,u=a.packing==="dice-slice",s=a.pad[r?"bottom":"top"],i=a.pad[n?"right":"left"],f=a.pad[n?"left":"right"],h=a.pad[r?"top":"bottom"],p;u&&(p=i,i=s,s=p,p=f,f=h,h=p);var v=d.treemap().tile(b(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(i).paddingRight(f).paddingTop(s).paddingBottom(h).size(u?[o[1],o[0]]:o)(e);return(u||n||r)&&l(v,o,{swapXY:u,flipX:n,flipY:r}),v};function b(w,e){switch(w){case"squarify":return d.treemapSquarify.ratio(e);case"binary":return d.treemapBinary;case"dice":return d.treemapDice;case"slice":return d.treemapSlice;default:return d.treemapSliceDice}}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(t,B,H){var d=t("./draw"),l=t("./draw_descendants");B.exports=function(w,e,o,a){return d(w,e,o,a,{type:"treemap",drawDescendants:l})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolate,b=t("../sunburst/helpers"),w=t("../../lib"),e=t("../bar/constants").TEXTPAD,o=t("../bar/plot"),a=o.toMoveInsideBar,n=t("../bar/uniform_text"),r=n.recordMinTextSize,u=t("./constants"),s=t("./draw_ancestors");function i(f){return b.isHierarchyRoot(f)?"":b.getPtId(f)}B.exports=function(h,p,v,y,g){var A=h._fullLayout,m=p[0],M=m.trace,_=M.type,T=_==="icicle",x=m.hierarchy,c=b.findEntryWithLevel(x,M.level),L=d.select(v),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!c){S.remove(),k.remove();return}var P=b.isHierarchyRoot(c),z=!A.uniformtext.mode&&b.hasTransition(y),I=b.getMaxDepth(M),R=function(Ve){return Ve.data.depth-c.data.depth<I},D=A._size,O=M.domain,F=D.w*(O.x[1]-O.x[0]),Y=D.h*(O.y[1]-O.y[0]),X=F,q=M.pathbar.thickness,$=M.marker.line.width+u.gapWithPathbar,V=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?Y+$:-(q+$):0,K={x0:X,x1:X,y0:V,y1:V+q},se=function(Ve,dt,Dt){var Gt=M.tiling.pad,kt=function(Mt){return Mt-Gt<=dt.x0},zt=function(Mt){return Mt+Gt>=dt.x1},Bt=function(Mt){return Mt-Gt<=dt.y0},Lt=function(Mt){return Mt+Gt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:kt(Ve.x0-Gt)?0:zt(Ve.x0-Gt)?Dt[0]:Ve.x0,x1:kt(Ve.x1+Gt)?0:zt(Ve.x1+Gt)?Dt[0]:Ve.x1,y0:Bt(Ve.y0-Gt)?0:Lt(Ve.y0-Gt)?Dt[1]:Ve.y0,y1:Bt(Ve.y1+Gt)?0:Lt(Ve.y1+Gt)?Dt[1]:Ve.y1}},ue=null,oe={},U={},G=null,re=function(Ve,dt){return dt?oe[i(Ve)]:U[i(Ve)]},ee=function(Ve,dt,Dt,Gt){if(dt)return oe[i(x)]||K;var kt=U[M.level]||Dt;return R(Ve)?se(Ve,kt,Gt):{}};m.hasMultipleRoots&&P&&I++,M._maxDepth=I,M._backgroundColor=A.paper_bgcolor,M._entryDepth=c.data.depth,M._atRootLevel=P;var j=-F/2+D.l+D.w*(O.x[1]+O.x[0])/2,Q=-Y/2+D.t+D.h*(1-(O.y[1]+O.y[0])/2),ne=function(Ve){return j+Ve},ae=function(Ve){return Q+Ve},ie=ae(0),fe=ne(0),me=function(Ve){return fe+Ve},ce=function(Ve){return ie+Ve};function ye(Ve,dt){return Ve+","+dt}var xe=me(0),ke=function(Ve){Ve.x=Math.max(xe,Ve.x)},Ae=M.pathbar.edgeshape,Oe=function(Ve){var dt=me(Math.max(Math.min(Ve.x0,Ve.x0),0)),Dt=me(Math.min(Math.max(Ve.x1,Ve.x1),X)),Gt=ce(Ve.y0),kt=ce(Ve.y1),zt=q/2,Bt={},Lt={};Bt.x=dt,Lt.x=Dt,Bt.y=Lt.y=(Gt+kt)/2;var Mt={x:dt,y:Gt},it={x:Dt,y:Gt},ht={x:Dt,y:kt},Qe={x:dt,y:kt};return Ae===">"?(Mt.x-=zt,it.x-=zt,ht.x-=zt,Qe.x-=zt):Ae==="/"?(ht.x-=zt,Qe.x-=zt,Bt.x-=zt/2,Lt.x-=zt/2):Ae==="\\"?(Mt.x-=zt,it.x-=zt,Bt.x-=zt/2,Lt.x-=zt/2):Ae==="<"&&(Bt.x-=zt,Lt.x-=zt),ke(Mt),ke(Qe),ke(Bt),ke(it),ke(ht),ke(Lt),"M"+ye(Mt.x,Mt.y)+"L"+ye(it.x,it.y)+"L"+ye(Lt.x,Lt.y)+"L"+ye(ht.x,ht.y)+"L"+ye(Qe.x,Qe.y)+"L"+ye(Bt.x,Bt.y)+"Z"},He=function(Ve){var dt=ne(Ve.x0),Dt=ne(Ve.x1),Gt=ae(Ve.y0),kt=ae(Ve.y1),zt=Dt-dt,Bt=kt-Gt;if(!zt||!Bt)return"";var Lt=0,Mt=zt>2*Lt&&Bt>2*Lt?Lt:0,it=function(ht,Qe){return Mt?"a"+ye(Mt,Mt)+" 0 0 1 "+ye(ht,Qe):""};return"M"+ye(dt,Gt+Mt)+it(Mt,-Mt)+"L"+ye(Dt-Mt,Gt)+it(Mt,Mt)+"L"+ye(Dt,kt-Mt)+it(-Mt,Mt)+"L"+ye(dt+Mt,kt)+it(-Mt,-Mt)+"Z"},Ge=function(Ve,dt){var Dt=Ve.x0,Gt=Ve.x1,kt=Ve.y0,zt=Ve.y1,Bt=Ve.textBB,Lt=function(Nt){return M.textposition.indexOf(Nt)!==-1},Mt=Lt("bottom"),it=Lt("top")||dt.isHeader&&!Mt,ht=it?"start":Mt?"end":"middle",Qe=Lt("right"),Ce=Lt("left")||dt.onPathbar,je=Ce?-1:Qe?1:0,rt=M[T?"tiling":"marker"].pad;if(dt.isHeader){if(Dt+=(T?rt:rt.l)-e,Gt-=(T?rt:rt.r)-e,Dt>=Gt){var ut=(Dt+Gt)/2;Dt=ut,Gt=ut}var Pt;Mt?(Pt=zt-(T?rt:rt.b),kt<Pt&&Pt<zt&&(kt=Pt)):(Pt=kt+(T?rt:rt.t),kt<Pt&&Pt<zt&&(zt=Pt))}var St=a(Dt,Gt,kt,zt,Bt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:je});return St.fontSize=dt.fontSize,St.targetX=ne(St.targetX),St.targetY=ae(St.targetY),isNaN(St.targetX)||isNaN(St.targetY)?{}:(Dt!==Gt&&kt!==zt&&r(M.type,St,A),{scale:St.scale,rotate:St.rotate,textX:St.textX,textY:St.textY,anchorX:St.anchorX,anchorY:St.anchorY,targetX:St.targetX,targetY:St.targetY})},_e=function(Ve,dt){for(var Dt,Gt=0,kt=Ve;!Dt&&Gt<I;)Gt++,kt=kt.parent,kt?Dt=re(kt,dt):Gt=I;return Dt||{}},Ie=function(Ve,dt,Dt,Gt){var kt=re(Ve,dt),zt;if(dt)zt=K;else{var Bt=re(c,dt);Bt?zt=se(Ve,Bt,Gt):zt={}}return l(kt,zt)},Ye=function(Ve,dt,Dt,Gt,kt){var zt=re(Ve,dt),Bt;if(zt)Bt=zt;else if(dt)Bt=K;else if(ue)if(Ve.parent){var Lt=G||Dt;Lt&&!dt?Bt=se(Ve,Lt,Gt):(Bt={},w.extendFlat(Bt,_e(Ve,dt)))}else Bt=w.extendFlat({},Ve),T&&(kt.orientation==="h"?kt.flipX?Bt.x0=Ve.x1:Bt.x1=0:kt.flipY?Bt.y0=Ve.y1:Bt.y1=0);else Bt={};return l(Bt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},qe=function(Ve,dt,Dt,Gt){var kt=re(Ve,dt),zt={},Bt=ee(Ve,dt,Dt,Gt);w.extendFlat(zt,{transform:Ge({x0:Bt.x0,x1:Bt.x1,y0:Bt.y0,y1:Bt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:b.isHeader(Ve,M)})}),kt?zt=kt:Ve.parent&&w.extendFlat(zt,_e(Ve,dt));var Lt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,Lt,A),l(zt,{transform:{scale:Lt.scale,rotate:Lt.rotate,textX:Lt.textX,textY:Lt.textY,anchorX:Lt.anchorX,anchorY:Lt.anchorY,targetX:Lt.targetX,targetY:Lt.targetY}})},Ue=function(Ve,dt,Dt,Gt,kt){var zt=Gt[0],Bt=Gt[1];z?Ve.exit().transition().each(function(){var Lt=d.select(this),Mt=Lt.select("path.surface");Mt.transition().attrTween("d",function(ht){var Qe=Ie(ht,dt,Dt,[zt,Bt]);return function(Ce){return kt(Qe(Ce))}});var it=Lt.select("g.slicetext");it.attr("opacity",0)}).remove():Ve.exit().remove()},Re=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,dt,A),w.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};z&&(S.each(function(Ve){oe[i(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(oe[i(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),k.each(function(Ve){U[i(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(U[i(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!ue&&b.isEntry(Ve)&&(ue=Ve)})),G=g(h,p,c,k,{width:F,height:Y,viewX:ne,viewY:ae,pathSlice:He,toMoveInsideSlice:Ge,prevEntry:ue,makeUpdateSliceInterpolator:Ye,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:z,strTransform:Re}),M.pathbar.visible?s(h,p,c,S,{barDifY:V,width:X,height:q,viewX:me,viewY:ce,pathSlice:Oe,toMoveInsideSlice:Ge,makeUpdateSliceInterpolator:Ye,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:z,strTransform:Re}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function o(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");e(n,r,"treemap"),r.each(function(u){var s=d.select(this),i=u[0],f=i.trace;s.style("opacity",f.opacity),s.selectAll("path.surface").each(function(h){d.select(this).call(a,h,f,{hovered:!1})})})}function a(n,r,u,s){var i=(s||{}).hovered,f=r.data.data,h=f.i,p,v,y=f.color,g=w.isHierarchyRoot(r),A=1;if(i)p=u._hovered.marker.line.color,v=u._hovered.marker.line.width;else if(g&&y===u.root.color)A=100,p="rgba(0,0,0,0)",v=0;else if(p=b.castOption(u,h,"marker.line.color")||l.defaultLine,v=b.castOption(u,h,"marker.line.width")||0,!u._hasColorscale&&!r.onPathbar){var m=u.marker.depthfade;if(m){var M=l.combine(l.addOpacity(u._backgroundColor,.75),y),_;if(m===!0){var T=w.getMaxDepth(u);isFinite(T)?w.isLeaf(r)?_=0:_=u._maxVisibleLayers-(r.data.depth-u._entryDepth):_=r.data.height+1}else _=r.data.depth-u._entryDepth,u._atRootLevel||_++;if(_>0)for(var x=0;x<_;x++){var c=.5*x/_;y=l.combine(l.addOpacity(M,c),y)}}}n.style("stroke-width",v).call(l.fill,y).call(l.stroke,p).style("opacity",A)}B.exports={style:o,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(t,B,H){var d=t("../box/attributes"),l=t("../../lib/extend").extendFlat,b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;B.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:l({},d.name,{}),orientation:l({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:l({},d.boxpoints,{}),jitter:l({},d.jitter,{}),pointpos:l({},d.pointpos,{}),width:l({},d.width,{}),marker:d.marker,text:d.text,hovertext:d.hovertext,hovertemplate:d.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../box/calc"),w=t("./helpers"),e=t("../../constants/numerical").BADNUM;B.exports=function(u,s){var i=b(u,s);if(i[0].t.empty)return i;for(var f=u._fullLayout,h=l.getFromId(u,s[s.orientation==="h"?"xaxis":"yaxis"]),p=1/0,v=-1/0,y=0,g=0,A=0;A<i.length;A++){var m=i[A],M=m.pts.map(w.extractVal),_=m.bandwidth=a(s,m,M),T=m.span=n(s,m,h,_);if(m.min===m.max&&_===0)T=m.span=[m.min,m.max],m.density=[{v:1,t:T[0]}],m.bandwidth=_,y=Math.max(y,1);else{var x=T[1]-T[0],c=Math.ceil(x/(_/3)),L=x/c;if(!isFinite(L)||!isFinite(c))return d.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var S=w.makeKDE(m,s,M);m.density=new Array(c);for(var k=0,P=T[0];P<T[1]+L/2;k++,P+=L){var z=S(P);m.density[k]={v:z,t:P},y=Math.max(y,z)}}g=Math.max(g,M.length),p=Math.min(p,T[0]),v=Math.max(v,T[1])}var I=l.findExtremes(h,[p,v],{padded:!0});if(s._extremes[h._id]=I,s.width)i[0].t.maxKDE=y;else{var R=f._violinScaleGroupStats,D=s.scalegroup,O=R[D];O?(O.maxKDE=Math.max(O.maxKDE,y),O.maxCount=Math.max(O.maxCount,g)):R[D]={maxKDE:y,maxCount:g}}return i[0].t.labels.kde=d._(u,"kde:"),i};function o(r,u,s){var i=Math.min(u,s/1.349);return 1.059*i*Math.pow(r,-.2)}function a(r,u,s){var i=u.max-u.min;if(!i)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,i/1e4);var f=s.length,h=d.stdev(s,f-1,u.mean);return Math.max(o(f,h,u.q3-u.q1),i/100)}function n(r,u,s,i){var f=r.spanmode,h=r.span||[],p=[u.min,u.max],v=[u.min-2*i,u.max+2*i],y;function g(m){var M=h[m],_=s.type==="multicategory"?s.r2c(M):s.d2c(M,0,r[u.valLetter+"calendar"]);return _===e?v[m]:_}f==="soft"?y=v:f==="hard"?y=p:y=[g(0),g(1)];var A={type:"linear",range:y};return l.setConvert(A),A.cleanRange(),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(t,B,H){var d=t("../box/cross_trace_calc").setPositionOffset,l=["v","h"];B.exports=function(w,e){for(var o=w.calcdata,a=e.xaxis,n=e.yaxis,r=0;r<l.length;r++){for(var u=l[r],s=u==="h"?n:a,i=[],f=0;f<o.length;f++){var h=o[f],p=h[0].t,v=h[0].trace;v.visible===!0&&v.type==="violin"&&!p.empty&&v.orientation===u&&v.xaxis===a._id&&v.yaxis===n._id&&i.push(f)}d("violin",w,i,s)}}},{"../box/cross_trace_calc":675}],1090:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../box/defaults"),w=t("./attributes");B.exports=function(o,a,n,r){function u(L,S){return d.coerce(o,a,w,L,S)}function s(L,S){return d.coerce2(o,a,w,L,S)}if(b.handleSampleDefaults(o,a,u,r),a.visible!==!1){u("bandwidth"),u("side");var i=u("width");i||(u("scalegroup",a.name),u("scalemode"));var f=u("span"),h;Array.isArray(f)&&(h="manual"),u("spanmode",h);var p=u("line.color",(o.marker||{}).color||n),v=u("line.width"),y=u("fillcolor",l.addOpacity(a.line.color,.5));b.handlePointsDefaults(o,a,u,{prefix:""});var g=s("box.width"),A=s("box.fillcolor",y),m=s("box.line.color",p),M=s("box.line.width",v),_=u("box.visible",Boolean(g||A||m||M));_||(a.box={visible:!1});var T=s("meanline.color",p),x=s("meanline.width",v),c=u("meanline.visible",Boolean(T||x));c||(a.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(t,B,H){var d=t("../../lib"),l={gaussian:function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)}};H.makeKDE=function(b,w,e){var o=e.length,a=l.gaussian,n=b.bandwidth,r=1/(o*n);return function(u){for(var s=0,i=0;i<o;i++)s+=a((u-e[i])/n);return r*s}},H.getPositionOnKdePath=function(b,w,e){var o,a;w.orientation==="h"?(o="y",a="x"):(o="x",a="y");var n=d.findPointOnPath(b.path,e,a,{pathLength:b.pathLength}),r=b.posCenterPx,u=n[o],s=w.side==="both"?2*r-u:r;return[u,s]},H.getKdeValue=function(b,w,e){var o=b.pts.map(H.extractVal),a=H.makeKDE(b,w,o);return a(e)/b.posDensityScale},H.extractVal=function(b){return b.v}},{"../../lib":503}],1092:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../box/hover"),w=t("./helpers");B.exports=function(o,a,n,r,u){u||(u={});var s=u.hoverLayer,i=o.cd,f=i[0].trace,h=f.hoveron,p=h.indexOf("violins")!==-1,v=h.indexOf("kde")!==-1,y=[],g,A;if(p||v){var m=b.hoverOnBoxes(o,a,n,r);if(v&&m.length>0){var M=o.xa,_=o.ya,T,x,c,L,S;f.orientation==="h"?(S=a,T="y",c=_,x="x",L=M):(S=n,T="x",c=M,x="y",L=_);var k=i[o.index];if(S>=k.span[0]&&S<=k.span[1]){var P=d.extendFlat({},o),z=L.c2p(S,!0),I=w.getKdeValue(k,f,S),R=w.getPositionOnKdePath(k,f,z),D=c._offset,O=c._length;P[T+"0"]=R[0],P[T+"1"]=R[1],P[x+"0"]=P[x+"1"]=z,P[x+"Label"]=x+": "+l.hoverLabelText(L,S,f[x+"hoverformat"])+", "+i[0].t.labels.kde+" "+I.toFixed(3),P.spikeDistance=m[0].spikeDistance;var F=T+"Spike";P[F]=m[0][F],m[0].spikeDistance=void 0,m[0][F]=void 0,P.hovertemplate=!1,y.push(P),A={stroke:o.color},A[T+"1"]=d.constrain(D+R[0],D,D+O),A[T+"2"]=d.constrain(D+R[1],D,D+O),A[x+"1"]=A[x+"2"]=L._offset+z}}p&&(y=y.concat(m))}h.indexOf("points")!==-1&&(g=b.hoverOnPoints(o,a,n));var Y=s.selectAll(".violinline-"+f.uid).data(A?[0]:[]);return Y.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),Y.exit().remove(),Y.attr(A),r==="closest"?g?[g]:y:(g&&y.push(g),y)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(t,B,H){var d=t("../box/layout_attributes"),l=t("../../lib").extendFlat;B.exports={violinmode:l({},d.boxmode,{}),violingap:l({},d.boxgap,{}),violingroupgap:l({},d.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes"),b=t("../box/layout_defaults");B.exports=function(e,o,a){function n(r,u){return d.coerce(e,o,l,r,u)}b._supply(e,o,a,n,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../box/plot"),e=t("../scatter/line_points"),o=t("./helpers");B.exports=function(n,r,u,s){var i=n._fullLayout,f=r.xaxis,h=r.yaxis;function p(v){var y=e(v,{xaxis:f,yaxis:h,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(y[0],1)}l.makeTraceGroups(s,u,"trace violins").each(function(v){var y=d.select(this),g=v[0],A=g.t,m=g.trace;if(m.visible!==!0||A.empty){y.remove();return}var M=A.bPos,_=A.bdPos,T=r[A.valLetter+"axis"],x=r[A.posLetter+"axis"],c=m.side==="both",L=c||m.side==="positive",S=c||m.side==="negative",k=y.selectAll("path.violin").data(l.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(Y){var X=d.select(this),q=Y.density,$=q.length,V=x.c2l(Y.pos+M,!0),K=x.l2p(V),se;if(m.width)se=A.maxKDE/_;else{var ue=i._violinScaleGroupStats[m.scalegroup];se=m.scalemode==="count"?ue.maxKDE/_*(ue.maxCount/Y.pts.length):ue.maxKDE/_}var oe,U,G,re,ee,j,Q;if(L){for(j=new Array($),re=0;re<$;re++)Q=j[re]={},Q[A.posLetter]=V+q[re].v/se,Q[A.valLetter]=T.c2l(q[re].t,!0);oe=p(j)}if(S){for(j=new Array($),ee=0,re=$-1;ee<$;ee++,re--)Q=j[ee]={},Q[A.posLetter]=V-q[re].v/se,Q[A.valLetter]=T.c2l(q[re].t,!0);U=p(j)}if(c)G=oe+"L"+U.substr(1)+"Z";else{var ne=[K,T.c2p(q[0].t)],ae=[K,T.c2p(q[$-1].t)];m.orientation==="h"&&(ne.reverse(),ae.reverse()),L?G="M"+ne+"L"+oe.substr(1)+"L"+ae:G="M"+ae+"L"+U.substr(1)+"L"+ne}X.attr("d",G),Y.posCenterPx=K,Y.posDensityScale=se*_,Y.path=X.node(),Y.pathLength=Y.path.getTotalLength()/(c?2:1)});var P=m.box,z=P.width,I=(P.line||{}).width,R,D;c?(R=_*z,D=0):L?(R=[0,_*z/2],D=I*{x:1,y:-1}[A.posLetter]):(R=[_*z/2,0],D=I*{x:-1,y:1}[A.posLetter]),w.plotBoxAndWhiskers(y,{pos:x,val:T},m,{bPos:M,bdPos:R,bPosPxOffset:D}),w.plotBoxMean(y,{pos:x,val:T},m,{bPos:M,bdPos:R,bPosPxOffset:D});var O;!m.box.visible&&m.meanline.visible&&(O=l.identity);var F=y.selectAll("path.meanline").data(O||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),F.exit().remove(),F.each(function(Y){var X=T.c2p(Y.mean,!0),q=o.getPositionOnKdePath(Y,m,X);d.select(this).attr("d",m.orientation==="h"?"M"+X+","+q[0]+"V"+q[1]:"M"+q[0]+","+X+"H"+q[1])}),w.plotPoints(y,{x:f,y:h},m,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../scatter/style").stylePoints;B.exports=function(e){var o=d.select(e).selectAll("g.trace.violins");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var n=a[0].trace,r=d.select(this),u=n.box||{},s=u.line||{},i=n.meanline||{},f=i.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(l.stroke,n.line.color).call(l.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",s.width+"px").call(l.stroke,s.color).call(l.fill,u.fillcolor);var h={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};r.selectAll("path.mean").style(h).call(l.stroke,i.color),r.selectAll("path.meanline").style(h).call(l.stroke,i.color),b(r,n,e)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../isosurface/attributes"),b=t("../surface/attributes"),w=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,a=B.exports=o(e({x:l.x,y:l.y,z:l.z,value:l.value,isomin:l.isomin,isomax:l.isomax,surface:l.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:l.slices,caps:l.caps,text:l.text,hovertext:l.hovertext,xhoverformat:l.xhoverformat,yhoverformat:l.yhoverformat,zhoverformat:l.zhoverformat,valuehoverformat:l.valuehoverformat,hovertemplate:l.hovertemplate},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:l.colorbar,opacity:l.opacity,opacityscale:b.opacityscale,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:e({},w.hoverinfo),showlegend:e({},w.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../lib/gl_format_color").parseColorScale,b=t("../../lib/str2rgbarray"),w=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),o=t("../isosurface/convert").findNearestOnAxis,a=t("../isosurface/convert").generateIsoMeshes;function n(s,i,f){this.scene=s,this.uid=f,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,f=this.data._meshX[i],h=this.data._meshY[i],p=this.data._meshZ[i],v=this.data._Ys.length,y=this.data._Zs.length,g=o(f,this.data._Xs).id,A=o(h,this.data._Ys).id,m=o(p,this.data._Zs).id,M=s.index=m+y*A+y*v*g;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[M]!==void 0?s.textLabel=_[M]:_&&(s.textLabel=_),!0}},r.update=function(s){var i=this.scene,f=i.fullSceneLayout;this.data=a(s);function h(A,m,M,_){return m.map(function(T){return A.d2l(T,0,_)*M})}var p=e(h(f.xaxis,s._meshX,i.dataScale[0],s.xcalendar),h(f.yaxis,s._meshY,i.dataScale[1],s.ycalendar),h(f.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),v=e(s._meshI,s._meshJ,s._meshK),y={positions:p,cells:v,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:b(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},g=w(s);y.vertexIntensity=s._meshIntensity,y.vertexIntensityBounds=[g.min,g.max],y.colormap=l(s),this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function u(s,i){var f=s.glplot.gl,h=d({gl:f}),p=new n(s,h,i.uid);return h._trace=p,p.update(i),s.glplot.add(h),p}B.exports=u},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../isosurface/defaults").supplyIsoDefaults,w=t("../surface/defaults").opacityscaleDefaults;B.exports=function(o,a,n,r){function u(s,i){return d.coerce(o,a,l,s,i)}b(o,a,n,r,u),w(o,a,r,u)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(t,B,H){var d=t("../bar/attributes"),l=t("../scatter/attributes").line,b=t("../../plots/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");function u(s){return{marker:{color:n({},d.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},d.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},d.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}B.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:d.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:n({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:d.text,textposition:d.textposition,insidetextanchor:d.insidetextanchor,textangle:d.textangle,textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:d.orientation,offset:d.offset,width:d.width,increasing:u(),decreasing:u(),totals:u(),connector:{line:{color:n({},l.color,{dflt:r.defaultLine}),width:n({},l.width,{editType:"plot"}),dash:l.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("../../lib").mergeArray,w=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function o(n){return n==="a"||n==="absolute"}function a(n){return n==="t"||n==="total"}B.exports=function(r,u){var s=d.getFromId(r,u.xaxis||"x"),i=d.getFromId(r,u.yaxis||"y"),f,h,p,v,y,g;u.orientation==="h"?(f=s.makeCalcdata(u,"x"),p=i.makeCalcdata(u,"y"),v=l(u,i,"y",p),y=!!u.yperiodalignment,g="y"):(f=i.makeCalcdata(u,"y"),p=s.makeCalcdata(u,"x"),v=l(u,s,"x",p),y=!!u.xperiodalignment,g="x"),h=v.vals;for(var A=Math.min(h.length,f.length),m=new Array(A),M=0,_,T=!1,x=0;x<A;x++){var c=f[x]||0,L=!1;(f[x]!==e||a(u.measure[x])||o(u.measure[x]))&&x+1<A&&(f[x+1]!==e||a(u.measure[x+1])||o(u.measure[x+1]))&&(L=!0);var S=m[x]={i:x,p:h[x],s:c,rawS:c,cNext:L};o(u.measure[x])?(M=S.s,S.isSum=!0,S.dir="totals",S.s=M):a(u.measure[x])?(S.isSum=!0,S.dir="totals",S.s=M):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",_=S.s,S.s=M+_,M+=_),S.dir==="totals"&&(T=!0),y&&(m[x].orig_p=p[x],m[x][g+"End"]=v.ends[x],m[x][g+"Start"]=v.starts[x]),u.ids&&(S.id=String(u.ids[x])),S.v=(u.base||0)+M}return m.length&&(m[0].hasTotals=T),b(u.text,m,"tx"),b(u.hovertext,m,"htx"),w(m,u),m}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(t,B,H){B.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(t,B,H){var d=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(b,w){var e=b._fullLayout,o=b._fullData,a=b.calcdata,n=w.xaxis,r=w.yaxis,u=[],s=[],i=[],f,h;for(h=0;h<o.length;h++){var p=o[h];p.visible===!0&&p.xaxis===n._id&&p.yaxis===r._id&&p.type==="waterfall"&&(f=a[h],p.orientation==="h"?i.push(f):s.push(f),u.push(f))}var v={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(d(b,n,r,s,v),d(b,r,n,i,v),h=0;h<u.length;h++){f=u[h];for(var y=0;y<f.length;y++){var g=f[y];g.isSum===!1&&(g.s0+=y===0?0:f[y-1].s),y+1<f.length&&(f[y].nextP0=f[y+1].p0,f[y].nextS0=f[y+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(t,B,H){var d=t("../../lib"),l=t("../bar/defaults").handleGroupingDefaults,b=t("../bar/defaults").handleText,w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./attributes"),a=t("../../components/color"),n=t("../../constants/delta.js"),r=n.INCREASING.COLOR,u=n.DECREASING.COLOR,s="#4499FF";function i(p,v,y){p(v+".marker.color",y),p(v+".marker.line.color",a.defaultLine),p(v+".marker.line.width")}function f(p,v,y,g){function A(x,c){return d.coerce(p,v,o,x,c)}var m=w(p,v,g,A);if(!m){v.visible=!1;return}e(p,v,g,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",v.x&&!v.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var M=A("textposition");b(p,v,g,A,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v.textposition!=="none"&&(A("texttemplate"),v.texttemplate||A("textinfo")),i(A,"increasing",r),i(A,"decreasing",u),i(A,"totals",s);var _=A("connector.visible");if(_){A("connector.mode");var T=A("connector.line.width");T&&(A("connector.line.color"),A("connector.line.dash"))}}function h(p,v){var y,g;function A(M){return d.coerce(g._input,g,o,M)}if(v.waterfallmode==="group")for(var m=0;m<p.length;m++)g=p[m],y=g._input,l(y,g,v,A)}B.exports={supplyDefaults:f,crossTraceDefaults:h}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(t,B,H){B.exports=function(l,b){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"initial"in b&&(l.initial=b.initial),"delta"in b&&(l.delta=b.delta),"final"in b&&(l.final=b.final),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],1108:[function(t,B,H){var d=t("../../plots/cartesian/axes").hoverLabelText,l=t("../../components/color").opacity,b=t("../bar/hover").hoverOnBars,w=t("../../constants/delta.js"),e={increasing:w.INCREASING.SYMBOL,decreasing:w.DECREASING.SYMBOL};B.exports=function(n,r,u,s,i){var f=b(n,r,u,s,i);if(!f)return;var h=f.cd,p=h[0].trace,v=p.orientation==="h",y=v?"x":"y",g=v?n.xa:n.ya;function A(P){return d(g,P,p[y+"hoverformat"])}var m=f.index,M=h[m],_=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){f.initial=M.b+M.s-_,f.delta=_,f.final=f.initial+f.delta;var T=A(Math.abs(f.delta));f.deltaLabel=_<0?"("+T+")":T,f.finalLabel=A(f.final),f.initialLabel=A(f.initial)}var x=M.hi||p.hoverinfo,c=[];if(x&&x!=="none"&&x!=="skip"){var L=x==="all",S=x.split("+"),k=function(P){return L||S.indexOf(P)!==-1};M.isSum||(k("final")&&(v?!k("x"):!k("y"))&&c.push(f.finalLabel),k("delta")&&(_<0?c.push(f.deltaLabel+" "+e.decreasing):c.push(f.deltaLabel+" "+e.increasing)),k("initial")&&c.push("Initial: "+f.initialLabel))}return c.length&&(f.extraText=c.join("<br>")),f.color=o(p,M),[f]};function o(a,n){var r=a[n.dir].marker,u=r.color,s=r.line.color,i=r.line.width;if(l(u))return u;if(l(s)&&i)return s}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(t,B,H){B.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o=!1;function a(u,s){return d.coerce(b,w,l,u,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="waterfall"){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),o=t("../bar/uniform_text").clearMinTextSize;B.exports=function(u,s,i,f){var h=u._fullLayout;o("waterfall",h),e.plot(u,s,i,f,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),a(u,s,i,f)};function a(r,u,s,i){var f=u.xaxis,h=u.yaxis;l.makeTraceGroups(i,s,"trace bars").each(function(p){var v=d.select(this),y=p[0].trace,g=l.ensureSingle(v,"g","lines");if(!y.connector||!y.connector.visible){g.remove();return}var A=y.orientation==="h",m=y.connector.mode,M=g.selectAll("g.line").data(l.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(T,x){if(!(x!==_-1&&!T.cNext)){var c=n(T,f,h,A),L=c[0],S=c[1],k="";L[0]!==w&&S[0]!==w&&L[1]!==w&&S[1]!==w&&(m==="spanning"&&!T.isSum&&x>0&&(A?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),m!=="between"&&(T.isSum||x<_-1)&&(A?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==w&&S[2]!==w&&(A?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,u.layerClipId,r)}})})}function n(r,u,s,i){var f=[],h=[],p=i?u:s,v=i?s:u;return f[0]=p.c2p(r.s0,!0),h[0]=v.c2p(r.p0,!0),f[1]=p.c2p(r.s1,!0),h[1]=v.c2p(r.p1,!0),f[2]=p.c2p(r.nextS0,!0),h[2]=v.c2p(r.nextP0,!0),i?[f,h]:[h,f]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),o=t("../bar/uniform_text").resizeText,a=e.styleTextPoints;function n(r,u,s){var i=s||d.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");o(r,i,"waterfall"),i.style("opacity",function(f){return f[0].trace.opacity}),i.each(function(f){var h=d.select(this),p=f[0].trace;h.selectAll(".point > path").each(function(v){if(!v.isBlank){var y=p[v.dir].marker;d.select(this).call(b.fill,y.color).call(b.stroke,y.line.color).call(l.dashLine,y.line.dash,y.line.width).style("opacity",p.selectedpoints&&!v.selected?w:1)}}),a(h,p,r),h.selectAll(".lines").each(function(){var v=p.connector.line;l.lineGroupStyle(d.select(this).selectAll("path"),v.width,v.color,v.dash)})})}B.exports={style:n}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(t,B,H){var d=t("../plots/cartesian/axes"),l=t("../lib"),b=t("../plot_api/plot_schema"),w=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;H.moduleType="transform",H.name="aggregate";var o=H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=o.aggregations;H.supplyDefaults=function(f,h){var p={},v;function y(P,z){return l.coerce(f,p,o,P,z)}var g=y("enabled");if(!g)return p;var A=b.findArrayAttributes(h),m={};for(v=0;v<A.length;v++)m[A[v]]=1;var M=y("groups");if(!Array.isArray(M)){if(!m[M])return p.enabled=!1,p;m[M]=0}var _=f.aggregations||[],T=p.aggregations=new Array(_.length),x;function c(P,z){return l.coerce(_[v],x,a,P,z)}for(v=0;v<_.length;v++){x={_index:v};var L=c("target"),S=c("func"),k=c("enabled");k&&L&&(m[L]||S==="count"&&m[L]===void 0)?(S==="stddev"&&c("funcmode"),m[L]=0,T[v]=x):T[v]={enabled:!1,_index:v}}for(v=0;v<A.length;v++)m[A[v]]&&T.push({target:A[v],func:a.func.dflt,enabled:!0,_index:-1});return p},H.calcTransform=function(f,h,p){if(!!p.enabled){var v=p.groups,y=l.getTargetArray(h,{target:v});if(!!y){var g,A,m,M,_={},T={},x=[],c=w(h.transforms,p),L=y.length;for(h._length&&(L=Math.min(L,h._length)),g=0;g<L;g++)A=y[g],m=_[A],m===void 0?(_[A]=x.length,M=[g],x.push(M),T[_[A]]=c(g)):(x[m].push(g),T[_[A]]=(T[_[A]]||[]).concat(c(g)));p._indexToPoints=T;var S=p.aggregations;for(g=0;g<S.length;g++)n(f,h,x,S[g]);typeof v=="string"&&n(f,h,x,{target:v,func:"first",enabled:!0}),h._length=x.length}}};function n(f,h,p,v){if(!!v.enabled){for(var y=v.target,g=l.nestedProperty(h,y),A=g.get(),m=d.getDataConversions(f,h,y,A),M=r(v,m),_=new Array(p.length),T=0;T<p.length;T++)_[T]=M(A,p[T]);g.set(_),v.func==="count"&&l.pushUnique(h._arrayAttrs,y)}}function r(f,h){var p=f.func,v=h.d2c,y=h.c2d;switch(p){case"count":return u;case"first":return s;case"last":return i;case"sum":return function(g,A){for(var m=0,M=0;M<A.length;M++){var _=v(g[A[M]]);_!==e&&(m+=_)}return y(m)};case"avg":return function(g,A){for(var m=0,M=0,_=0;_<A.length;_++){var T=v(g[A[_]]);T!==e&&(m+=T,M++)}return M?y(m/M):e};case"min":return function(g,A){for(var m=1/0,M=0;M<A.length;M++){var _=v(g[A[M]]);_!==e&&(m=Math.min(m,_))}return m===1/0?e:y(m)};case"max":return function(g,A){for(var m=-1/0,M=0;M<A.length;M++){var _=v(g[A[M]]);_!==e&&(m=Math.max(m,_))}return m===-1/0?e:y(m)};case"range":return function(g,A){for(var m=1/0,M=-1/0,_=0;_<A.length;_++){var T=v(g[A[_]]);T!==e&&(m=Math.min(m,T),M=Math.max(M,T))}return M===-1/0||m===1/0?e:y(M-m)};case"change":return function(g,A){var m=v(g[A[0]]),M=v(g[A[A.length-1]]);return m===e||M===e?e:y(M-m)};case"median":return function(g,A){for(var m=[],M=0;M<A.length;M++){var _=v(g[A[M]]);_!==e&&m.push(_)}if(!m.length)return e;m.sort(l.sorterAsc);var T=(m.length-1)/2;return y((m[Math.floor(T)]+m[Math.ceil(T)])/2)};case"mode":return function(g,A){for(var m={},M=0,_=e,T=0;T<A.length;T++){var x=v(g[A[T]]);if(x!==e){var c=m[x]=(m[x]||0)+1;c>M&&(M=c,_=x)}}return M?y(_):e};case"rms":return function(g,A){for(var m=0,M=0,_=0;_<A.length;_++){var T=v(g[A[_]]);T!==e&&(m+=T*T,M++)}return M?y(Math.sqrt(m/M)):e};case"stddev":return function(g,A){var m=0,M=0,_=1,T=e,x;for(x=0;x<A.length&&T===e;x++)T=v(g[A[x]]);if(T===e)return e;for(;x<A.length;x++){var c=v(g[A[x]]);if(c!==e){var L=c-T;m+=L,M+=L*L,_++}}var S=f.funcmode==="sample"?_-1:_;return S?Math.sqrt((M-m*m/_)/S):0}}}function u(f,h){return h.length}function s(f,h){return f[h[0]]}function i(f,h){return f[h[h.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(t,B,H){var d=t("../lib"),l=t("../registry"),b=t("../plots/cartesian/axes"),w=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),o=e.COMPARISON_OPS,a=e.INTERVAL_OPS,n=e.SET_OPS;H.moduleType="transform",H.name="filter",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(a).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},H.supplyDefaults=function(u){var s={};function i(v,y){return d.coerce(u,s,H.attributes,v,y)}var f=i("enabled");if(f){var h=i("target");if(d.isArrayOrTypedArray(h)&&h.length===0)return s.enabled=!1,s;i("preservegaps"),i("operation"),i("value");var p=l.getComponentMethod("calendars","handleDefaults");p(u,s,"valuecalendar",null),p(u,s,"targetcalendar",null)}return s},H.calcTransform=function(u,s,i){if(!i.enabled)return;var f=d.getTargetArray(s,i);if(!f)return;var h=i.target,p=f.length;s._length&&(p=Math.min(p,s._length));var v=i.targetcalendar,y=s._arrayAttrs,g=i.preservegaps;if(typeof h=="string"){var A=d.nestedProperty(s,h+"calendar").get();A&&(v=A)}var m=b.getDataToCoordFunc(u,s,h,f),M=r(i,m,v),_={},T={},x=0;function c(I,R){for(var D=0;D<y.length;D++){var O=d.nestedProperty(s,y[D]);I(O,R)}}var L,S;g?(L=function(I){_[I.astr]=d.extendDeep([],I.get()),I.set(new Array(p))},S=function(I,R){var D=_[I.astr][R];I.get()[R]=D}):(L=function(I){_[I.astr]=d.extendDeep([],I.get()),I.set([])},S=function(I,R){var D=_[I.astr][R];I.get().push(D)}),c(L);for(var k=w(s.transforms,i),P=0;P<p;P++){var z=M(f[P]);z?(c(S,P),T[x++]=k(P)):g&&x++}i._indexToPoints=T,s._length=x};function r(u,s,i){var f=u.operation,h=u.value,p=Array.isArray(h);function v(m){return m.indexOf(f)!==-1}var y=function(m){return s(m,0,u.valuecalendar)},g=function(m){return s(m,0,i)},A;switch(v(o)?A=y(p?h[0]:h):v(a)?A=p?[y(h[0]),y(h[1])]:[y(h),y(h)]:v(n)&&(A=p?h.map(y):[y(h)]),f){case"=":return function(m){return g(m)===A};case"!=":return function(m){return g(m)!==A};case"<":return function(m){return g(m)<A};case"<=":return function(m){return g(m)<=A};case">":return function(m){return g(m)>A};case">=":return function(m){return g(m)>=A};case"[]":return function(m){var M=g(m);return M>=A[0]&&M<=A[1]};case"()":return function(m){var M=g(m);return M>A[0]&&M<A[1]};case"[)":return function(m){var M=g(m);return M>=A[0]&&M<A[1]};case"(]":return function(m){var M=g(m);return M>A[0]&&M<=A[1]};case"][":return function(m){var M=g(m);return M<=A[0]||M>=A[1]};case")(":return function(m){var M=g(m);return M<A[0]||M>A[1]};case"](":return function(m){var M=g(m);return M<=A[0]||M>A[1]};case")[":return function(m){var M=g(m);return M<A[0]||M>=A[1]};case"{}":return function(m){return A.indexOf(g(m))!==-1};case"}{":return function(m){return A.indexOf(g(m))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_schema"),b=t("../plots/plots"),w=t("./helpers").pointsAccessorFunction;H.moduleType="transform",H.name="groupby",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},H.supplyDefaults=function(o,a,n){var r,u={};function s(y,g){return d.coerce(o,u,H.attributes,y,g)}var i=s("enabled");if(!i)return u;s("groups"),s("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var f=o.styles,h=u.styles=[];if(f)for(r=0;r<f.length;r++){var p=h[r]={};d.coerce(f[r],h[r],H.attributes.styles,"target");var v=d.coerce(f[r],h[r],H.attributes.styles,"value");d.isPlainObject(v)?p.value=d.extendDeep({},v):v&&delete p.value}return u},H.transform=function(o,a){var n,r,u,s=[];for(r=0;r<o.length;r++)for(n=e(o[r],a),u=0;u<n.length;u++)s.push(n[u]);return s};function e(o,a){var n,r,u,s,i,f,h,p,v,y,g=a.transform,A=a.transformIndex,m=o.transforms[A].groups,M=w(o.transforms,g);if(!d.isArrayOrTypedArray(m)||m.length===0)return[o];var _=d.filterUnique(m),T=new Array(_.length),x=m.length,c=l.findArrayAttributes(o),L=g.styles||[],S={};for(n=0;n<L.length;n++)S[L[n].target]=L[n].value;g.styles&&(y=d.keyedContainer(g,"styles","target","value.name"));var k={},P={};for(n=0;n<_.length;n++){f=_[n],k[f]=n,P[f]=0,h=T[n]=d.extendDeepNoArrays({},o),h._group=f,h.transforms[A]._indexToPoints={};var z=null;for(y&&(z=y.get(f)),z||z===""?h.name=z:h.name=d.templateString(g.nameformat,{trace:o.name,group:f}),p=h.transforms,h.transforms=[],r=0;r<p.length;r++)h.transforms[r]=d.extendDeepNoArrays({},p[r]);for(r=0;r<c.length;r++)d.nestedProperty(h,c[r]).set([])}for(u=0;u<c.length;u++){for(s=c[u],r=0,v=[];r<_.length;r++)v[r]=d.nestedProperty(T[r],s).get();for(i=d.nestedProperty(o,s).get(),r=0;r<x;r++)v[k[m[r]]].push(i[r])}for(r=0;r<x;r++){h=T[k[m[r]]];var I=h.transforms[A]._indexToPoints;I[P[m[r]]]=M(r),P[m[r]]++}for(n=0;n<_.length;n++)f=_[n],h=T[n],b.clearExpandedTraceDefaultColors(h),h=d.extendDeepNoArrays(h,S[f]||{});return T}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(t,B,H){H.pointsAccessorFunction=function(d,l){for(var b,w,e=0;e<d.length&&(b=d[e],b!==l);e++)!b._indexToPoints||b.enabled===!1||(w=b._indexToPoints);var o=w?function(a){return w[a]}:function(a){return[a]};return o}},{}],1118:[function(t,B,H){var d=t("../lib"),l=t("../plots/cartesian/axes"),b=t("./helpers").pointsAccessorFunction,w=t("../constants/numerical").BADNUM;H.moduleType="transform",H.name="sort",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},H.supplyDefaults=function(a){var n={};function r(s,i){return d.coerce(a,n,H.attributes,s,i)}var u=r("enabled");return u&&(r("target"),r("order")),n},H.calcTransform=function(a,n,r){if(!!r.enabled){var u=d.getTargetArray(n,r);if(!!u){var s=r.target,i=u.length;n._length&&(i=Math.min(i,n._length));var f=n._arrayAttrs,h=l.getDataToCoordFunc(a,n,s,u),p=e(r,u,h,i),v=b(n.transforms,r),y={},g,A;for(g=0;g<f.length;g++){var m=d.nestedProperty(n,f[g]),M=m.get(),_=new Array(i);for(A=0;A<i;A++)_[A]=M[p[A]];m.set(_)}for(A=0;A<i;A++)y[A]=v(p[A]);r._indexToPoints=y,n._length=i}}};function e(a,n,r,u){var s=new Array(u),i=new Array(u),f;for(f=0;f<u;f++)s[f]={v:n[f],i:f};for(s.sort(o(a,r)),f=0;f<u;f++)i[f]=s[f].i;return i}function o(a,n){switch(a.order){case"ascending":return function(r,u){var s=n(r.v),i=n(u.v);return s===w?1:i===w?-1:s-i};case"descending":return function(r,u){var s=n(r.v),i=n(u.v);return s===w?1:i===w?-1:i-s}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(t,B,H){H.version="2.8.1"},{}],1120:[function(t,B,H){(function(d){(function(){(function(l){if(typeof H=="object"&&typeof B!="undefined")B.exports=l();else{var b;typeof window!="undefined"?b=window:typeof d!="undefined"?b=d:typeof self!="undefined"?b=self:b=this,b.stackgl=l()}})(function(){return function(){function l(b,w,e){function o(r,u){if(!w[r]){if(!b[r]){var s=typeof t=="function"&&t;if(!u&&s)return s(r,!0);if(a)return a(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var f=w[r]={exports:{}};b[r][0].call(f.exports,function(h){var p=b[r][1][h];return o(p||h)},f,f.exports,l,b,w,e)}return w[r].exports}for(var a=typeof t=="function"&&t,n=0;n<e.length;n++)o(e[n]);return o}return l}()({1:[function(l,b,w){w.byteLength=i,w.toByteArray=h,w.fromByteArray=y;for(var e=[],o=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,u=n.length;r<u;++r)e[r]=n[r],o[n.charCodeAt(r)]=r;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;function s(g){var A=g.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=g.indexOf("=");m===-1&&(m=A);var M=m===A?0:4-m%4;return[m,M]}function i(g){var A=s(g),m=A[0],M=A[1];return(m+M)*3/4-M}function f(g,A,m){return(A+m)*3/4-m}function h(g){var A,m=s(g),M=m[0],_=m[1],T=new a(f(g,M,_)),x=0,c=_>0?M-4:M,L;for(L=0;L<c;L+=4)A=o[g.charCodeAt(L)]<<18|o[g.charCodeAt(L+1)]<<12|o[g.charCodeAt(L+2)]<<6|o[g.charCodeAt(L+3)],T[x++]=A>>16&255,T[x++]=A>>8&255,T[x++]=A&255;return _===2&&(A=o[g.charCodeAt(L)]<<2|o[g.charCodeAt(L+1)]>>4,T[x++]=A&255),_===1&&(A=o[g.charCodeAt(L)]<<10|o[g.charCodeAt(L+1)]<<4|o[g.charCodeAt(L+2)]>>2,T[x++]=A>>8&255,T[x++]=A&255),T}function p(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function v(g,A,m){for(var M,_=[],T=A;T<m;T+=3)M=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),_.push(p(M));return _.join("")}function y(g){for(var A,m=g.length,M=m%3,_=[],T=16383,x=0,c=m-M;x<c;x+=T)_.push(v(g,x,x+T>c?c:x+T));return M===1?(A=g[m-1],_.push(e[A>>2]+e[A<<4&63]+"==")):M===2&&(A=(g[m-2]<<8)+g[m-1],_.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),_.join("")}},{}],2:[function(l,b,w){},{}],3:[function(l,b,w){(function(e){(function(){var o=l("base64-js"),a=l("ieee754");w.Buffer=s,w.SlowBuffer=M,w.INSPECT_MAX_BYTES=50;var n=2147483647;w.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function u(ce){if(ce>n)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var ye=new Uint8Array(ce);return ye.__proto__=s.prototype,ye}function s(ce,ye,xe){if(typeof ce=="number"){if(typeof ye=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ce)}return i(ce,ye,xe)}typeof Symbol!="undefined"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function i(ce,ye,xe){if(typeof ce=="string")return v(ce,ye);if(ArrayBuffer.isView(ce))return y(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(fe(ce,ArrayBuffer)||ce&&fe(ce.buffer,ArrayBuffer))return g(ce,ye,xe);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ke=ce.valueOf&&ce.valueOf();if(ke!=null&&ke!==ce)return s.from(ke,ye,xe);var Ae=A(ce);if(Ae)return Ae;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return s.from(ce[Symbol.toPrimitive]("string"),ye,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}s.from=function(ce,ye,xe){return i(ce,ye,xe)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function f(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function h(ce,ye,xe){return f(ce),ce<=0?u(ce):ye!==void 0?typeof xe=="string"?u(ce).fill(ye,xe):u(ce).fill(ye):u(ce)}s.alloc=function(ce,ye,xe){return h(ce,ye,xe)};function p(ce){return f(ce),u(ce<0?0:m(ce)|0)}s.allocUnsafe=function(ce){return p(ce)},s.allocUnsafeSlow=function(ce){return p(ce)};function v(ce,ye){if((typeof ye!="string"||ye==="")&&(ye="utf8"),!s.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);var xe=_(ce,ye)|0,ke=u(xe),Ae=ke.write(ce,ye);return Ae!==xe&&(ke=ke.slice(0,Ae)),ke}function y(ce){for(var ye=ce.length<0?0:m(ce.length)|0,xe=u(ye),ke=0;ke<ye;ke+=1)xe[ke]=ce[ke]&255;return xe}function g(ce,ye,xe){if(ye<0||ce.byteLength<ye)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ye+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ke;return ye===void 0&&xe===void 0?ke=new Uint8Array(ce):xe===void 0?ke=new Uint8Array(ce,ye):ke=new Uint8Array(ce,ye,xe),ke.__proto__=s.prototype,ke}function A(ce){if(s.isBuffer(ce)){var ye=m(ce.length)|0,xe=u(ye);return xe.length===0||ce.copy(xe,0,0,ye),xe}if(ce.length!==void 0)return typeof ce.length!="number"||me(ce.length)?u(0):y(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return y(ce.data)}function m(ce){if(ce>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return ce|0}function M(ce){return+ce!=ce&&(ce=0),s.alloc(+ce)}s.isBuffer=function(ye){return ye!=null&&ye._isBuffer===!0&&ye!==s.prototype},s.compare=function(ye,xe){if(fe(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),fe(xe,Uint8Array)&&(xe=s.from(xe,xe.offset,xe.byteLength)),!s.isBuffer(ye)||!s.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ye===xe)return 0;for(var ke=ye.length,Ae=xe.length,Oe=0,He=Math.min(ke,Ae);Oe<He;++Oe)if(ye[Oe]!==xe[Oe]){ke=ye[Oe],Ae=xe[Oe];break}return ke<Ae?-1:Ae<ke?1:0},s.isEncoding=function(ye){switch(String(ye).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ye,xe){if(!Array.isArray(ye))throw new TypeError('"list" argument must be an Array of Buffers');if(ye.length===0)return s.alloc(0);var ke;if(xe===void 0)for(xe=0,ke=0;ke<ye.length;++ke)xe+=ye[ke].length;var Ae=s.allocUnsafe(xe),Oe=0;for(ke=0;ke<ye.length;++ke){var He=ye[ke];if(fe(He,Uint8Array)&&(He=s.from(He)),!s.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Ae,Oe),Oe+=He.length}return Ae};function _(ce,ye){if(s.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||fe(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var xe=ce.length,ke=arguments.length>2&&arguments[2]===!0;if(!ke&&xe===0)return 0;for(var Ae=!1;;)switch(ye){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return j(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return ae(ce).length;default:if(Ae)return ke?-1:j(ce).length;ye=(""+ye).toLowerCase(),Ae=!0}}s.byteLength=_;function T(ce,ye,xe){var ke=!1;if((ye===void 0||ye<0)&&(ye=0),ye>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,ye>>>=0,xe<=ye))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return $(this,ye,xe);case"utf8":case"utf-8":return O(this,ye,xe);case"ascii":return X(this,ye,xe);case"latin1":case"binary":return q(this,ye,xe);case"base64":return D(this,ye,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,ye,xe);default:if(ke)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ke=!0}}s.prototype._isBuffer=!0;function x(ce,ye,xe){var ke=ce[ye];ce[ye]=ce[xe],ce[xe]=ke}s.prototype.swap16=function(){var ye=this.length;if(ye%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<ye;xe+=2)x(this,xe,xe+1);return this},s.prototype.swap32=function(){var ye=this.length;if(ye%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<ye;xe+=4)x(this,xe,xe+3),x(this,xe+1,xe+2);return this},s.prototype.swap64=function(){var ye=this.length;if(ye%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<ye;xe+=8)x(this,xe,xe+7),x(this,xe+1,xe+6),x(this,xe+2,xe+5),x(this,xe+3,xe+4);return this},s.prototype.toString=function(){var ye=this.length;return ye===0?"":arguments.length===0?O(this,0,ye):T.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ye){if(!s.isBuffer(ye))throw new TypeError("Argument must be a Buffer");return this===ye?!0:s.compare(this,ye)===0},s.prototype.inspect=function(){var ye="",xe=w.INSPECT_MAX_BYTES;return ye=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(ye+=" ... "),"<Buffer "+ye+">"},s.prototype.compare=function(ye,xe,ke,Ae,Oe){if(fe(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),!s.isBuffer(ye))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ye);if(xe===void 0&&(xe=0),ke===void 0&&(ke=ye?ye.length:0),Ae===void 0&&(Ae=0),Oe===void 0&&(Oe=this.length),xe<0||ke>ye.length||Ae<0||Oe>this.length)throw new RangeError("out of range index");if(Ae>=Oe&&xe>=ke)return 0;if(Ae>=Oe)return-1;if(xe>=ke)return 1;if(xe>>>=0,ke>>>=0,Ae>>>=0,Oe>>>=0,this===ye)return 0;for(var He=Oe-Ae,Ge=ke-xe,_e=Math.min(He,Ge),Ie=this.slice(Ae,Oe),Ye=ye.slice(xe,ke),qe=0;qe<_e;++qe)if(Ie[qe]!==Ye[qe]){He=Ie[qe],Ge=Ye[qe];break}return He<Ge?-1:Ge<He?1:0};function c(ce,ye,xe,ke,Ae){if(ce.length===0)return-1;if(typeof xe=="string"?(ke=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,me(xe)&&(xe=Ae?0:ce.length-1),xe<0&&(xe=ce.length+xe),xe>=ce.length){if(Ae)return-1;xe=ce.length-1}else if(xe<0)if(Ae)xe=0;else return-1;if(typeof ye=="string"&&(ye=s.from(ye,ke)),s.isBuffer(ye))return ye.length===0?-1:L(ce,ye,xe,ke,Ae);if(typeof ye=="number")return ye=ye&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(ce,ye,xe):Uint8Array.prototype.lastIndexOf.call(ce,ye,xe):L(ce,[ye],xe,ke,Ae);throw new TypeError("val must be string, number or Buffer")}function L(ce,ye,xe,ke,Ae){var Oe=1,He=ce.length,Ge=ye.length;if(ke!==void 0&&(ke=String(ke).toLowerCase(),ke==="ucs2"||ke==="ucs-2"||ke==="utf16le"||ke==="utf-16le")){if(ce.length<2||ye.length<2)return-1;Oe=2,He/=2,Ge/=2,xe/=2}function _e(Re,Ve){return Oe===1?Re[Ve]:Re.readUInt16BE(Ve*Oe)}var Ie;if(Ae){var Ye=-1;for(Ie=xe;Ie<He;Ie++)if(_e(ce,Ie)===_e(ye,Ye===-1?0:Ie-Ye)){if(Ye===-1&&(Ye=Ie),Ie-Ye+1===Ge)return Ye*Oe}else Ye!==-1&&(Ie-=Ie-Ye),Ye=-1}else for(xe+Ge>He&&(xe=He-Ge),Ie=xe;Ie>=0;Ie--){for(var qe=!0,Ue=0;Ue<Ge;Ue++)if(_e(ce,Ie+Ue)!==_e(ye,Ue)){qe=!1;break}if(qe)return Ie}return-1}s.prototype.includes=function(ye,xe,ke){return this.indexOf(ye,xe,ke)!==-1},s.prototype.indexOf=function(ye,xe,ke){return c(this,ye,xe,ke,!0)},s.prototype.lastIndexOf=function(ye,xe,ke){return c(this,ye,xe,ke,!1)};function S(ce,ye,xe,ke){xe=Number(xe)||0;var Ae=ce.length-xe;ke?(ke=Number(ke),ke>Ae&&(ke=Ae)):ke=Ae;var Oe=ye.length;ke>Oe/2&&(ke=Oe/2);for(var He=0;He<ke;++He){var Ge=parseInt(ye.substr(He*2,2),16);if(me(Ge))return He;ce[xe+He]=Ge}return He}function k(ce,ye,xe,ke){return ie(j(ye,ce.length-xe),ce,xe,ke)}function P(ce,ye,xe,ke){return ie(Q(ye),ce,xe,ke)}function z(ce,ye,xe,ke){return P(ce,ye,xe,ke)}function I(ce,ye,xe,ke){return ie(ae(ye),ce,xe,ke)}function R(ce,ye,xe,ke){return ie(ne(ye,ce.length-xe),ce,xe,ke)}s.prototype.write=function(ye,xe,ke,Ae){if(xe===void 0)Ae="utf8",ke=this.length,xe=0;else if(ke===void 0&&typeof xe=="string")Ae=xe,ke=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(ke)?(ke=ke>>>0,Ae===void 0&&(Ae="utf8")):(Ae=ke,ke=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Oe=this.length-xe;if((ke===void 0||ke>Oe)&&(ke=Oe),ye.length>0&&(ke<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var He=!1;;)switch(Ae){case"hex":return S(this,ye,xe,ke);case"utf8":case"utf-8":return k(this,ye,xe,ke);case"ascii":return P(this,ye,xe,ke);case"latin1":case"binary":return z(this,ye,xe,ke);case"base64":return I(this,ye,xe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,ye,xe,ke);default:if(He)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),He=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(ce,ye,xe){return ye===0&&xe===ce.length?o.fromByteArray(ce):o.fromByteArray(ce.slice(ye,xe))}function O(ce,ye,xe){xe=Math.min(ce.length,xe);for(var ke=[],Ae=ye;Ae<xe;){var Oe=ce[Ae],He=null,Ge=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Ae+Ge<=xe){var _e,Ie,Ye,qe;switch(Ge){case 1:Oe<128&&(He=Oe);break;case 2:_e=ce[Ae+1],(_e&192)==128&&(qe=(Oe&31)<<6|_e&63,qe>127&&(He=qe));break;case 3:_e=ce[Ae+1],Ie=ce[Ae+2],(_e&192)==128&&(Ie&192)==128&&(qe=(Oe&15)<<12|(_e&63)<<6|Ie&63,qe>2047&&(qe<55296||qe>57343)&&(He=qe));break;case 4:_e=ce[Ae+1],Ie=ce[Ae+2],Ye=ce[Ae+3],(_e&192)==128&&(Ie&192)==128&&(Ye&192)==128&&(qe=(Oe&15)<<18|(_e&63)<<12|(Ie&63)<<6|Ye&63,qe>65535&&qe<1114112&&(He=qe))}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,ke.push(He>>>10&1023|55296),He=56320|He&1023),ke.push(He),Ae+=Ge}return Y(ke)}var F=4096;function Y(ce){var ye=ce.length;if(ye<=F)return String.fromCharCode.apply(String,ce);for(var xe="",ke=0;ke<ye;)xe+=String.fromCharCode.apply(String,ce.slice(ke,ke+=F));return xe}function X(ce,ye,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=ye;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]&127);return ke}function q(ce,ye,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=ye;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]);return ke}function $(ce,ye,xe){var ke=ce.length;(!ye||ye<0)&&(ye=0),(!xe||xe<0||xe>ke)&&(xe=ke);for(var Ae="",Oe=ye;Oe<xe;++Oe)Ae+=ee(ce[Oe]);return Ae}function V(ce,ye,xe){for(var ke=ce.slice(ye,xe),Ae="",Oe=0;Oe<ke.length;Oe+=2)Ae+=String.fromCharCode(ke[Oe]+ke[Oe+1]*256);return Ae}s.prototype.slice=function(ye,xe){var ke=this.length;ye=~~ye,xe=xe===void 0?ke:~~xe,ye<0?(ye+=ke,ye<0&&(ye=0)):ye>ke&&(ye=ke),xe<0?(xe+=ke,xe<0&&(xe=0)):xe>ke&&(xe=ke),xe<ye&&(xe=ye);var Ae=this.subarray(ye,xe);return Ae.__proto__=s.prototype,Ae};function K(ce,ye,xe){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+ye>xe)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(ye,xe,ke){ye=ye>>>0,xe=xe>>>0,ke||K(ye,xe,this.length);for(var Ae=this[ye],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[ye+He]*Oe;return Ae},s.prototype.readUIntBE=function(ye,xe,ke){ye=ye>>>0,xe=xe>>>0,ke||K(ye,xe,this.length);for(var Ae=this[ye+--xe],Oe=1;xe>0&&(Oe*=256);)Ae+=this[ye+--xe]*Oe;return Ae},s.prototype.readUInt8=function(ye,xe){return ye=ye>>>0,xe||K(ye,1,this.length),this[ye]},s.prototype.readUInt16LE=function(ye,xe){return ye=ye>>>0,xe||K(ye,2,this.length),this[ye]|this[ye+1]<<8},s.prototype.readUInt16BE=function(ye,xe){return ye=ye>>>0,xe||K(ye,2,this.length),this[ye]<<8|this[ye+1]},s.prototype.readUInt32LE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),(this[ye]|this[ye+1]<<8|this[ye+2]<<16)+this[ye+3]*16777216},s.prototype.readUInt32BE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),this[ye]*16777216+(this[ye+1]<<16|this[ye+2]<<8|this[ye+3])},s.prototype.readIntLE=function(ye,xe,ke){ye=ye>>>0,xe=xe>>>0,ke||K(ye,xe,this.length);for(var Ae=this[ye],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[ye+He]*Oe;return Oe*=128,Ae>=Oe&&(Ae-=Math.pow(2,8*xe)),Ae},s.prototype.readIntBE=function(ye,xe,ke){ye=ye>>>0,xe=xe>>>0,ke||K(ye,xe,this.length);for(var Ae=xe,Oe=1,He=this[ye+--Ae];Ae>0&&(Oe*=256);)He+=this[ye+--Ae]*Oe;return Oe*=128,He>=Oe&&(He-=Math.pow(2,8*xe)),He},s.prototype.readInt8=function(ye,xe){return ye=ye>>>0,xe||K(ye,1,this.length),this[ye]&128?(255-this[ye]+1)*-1:this[ye]},s.prototype.readInt16LE=function(ye,xe){ye=ye>>>0,xe||K(ye,2,this.length);var ke=this[ye]|this[ye+1]<<8;return ke&32768?ke|4294901760:ke},s.prototype.readInt16BE=function(ye,xe){ye=ye>>>0,xe||K(ye,2,this.length);var ke=this[ye+1]|this[ye]<<8;return ke&32768?ke|4294901760:ke},s.prototype.readInt32LE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),this[ye]|this[ye+1]<<8|this[ye+2]<<16|this[ye+3]<<24},s.prototype.readInt32BE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),this[ye]<<24|this[ye+1]<<16|this[ye+2]<<8|this[ye+3]},s.prototype.readFloatLE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),a.read(this,ye,!0,23,4)},s.prototype.readFloatBE=function(ye,xe){return ye=ye>>>0,xe||K(ye,4,this.length),a.read(this,ye,!1,23,4)},s.prototype.readDoubleLE=function(ye,xe){return ye=ye>>>0,xe||K(ye,8,this.length),a.read(this,ye,!0,52,8)},s.prototype.readDoubleBE=function(ye,xe){return ye=ye>>>0,xe||K(ye,8,this.length),a.read(this,ye,!1,52,8)};function se(ce,ye,xe,ke,Ae,Oe){if(!s.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(ye>Ae||ye<Oe)throw new RangeError('"value" argument is out of bounds');if(xe+ke>ce.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(ye,xe,ke,Ae){if(ye=+ye,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;se(this,ye,xe,ke,Oe,0)}var He=1,Ge=0;for(this[xe]=ye&255;++Ge<ke&&(He*=256);)this[xe+Ge]=ye/He&255;return xe+ke},s.prototype.writeUIntBE=function(ye,xe,ke,Ae){if(ye=+ye,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;se(this,ye,xe,ke,Oe,0)}var He=ke-1,Ge=1;for(this[xe+He]=ye&255;--He>=0&&(Ge*=256);)this[xe+He]=ye/Ge&255;return xe+ke},s.prototype.writeUInt8=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,1,255,0),this[xe]=ye&255,xe+1},s.prototype.writeUInt16LE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,2,65535,0),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeUInt16BE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,2,65535,0),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeUInt32LE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,4,4294967295,0),this[xe+3]=ye>>>24,this[xe+2]=ye>>>16,this[xe+1]=ye>>>8,this[xe]=ye&255,xe+4},s.prototype.writeUInt32BE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,4,4294967295,0),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4},s.prototype.writeIntLE=function(ye,xe,ke,Ae){if(ye=+ye,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);se(this,ye,xe,ke,Oe-1,-Oe)}var He=0,Ge=1,_e=0;for(this[xe]=ye&255;++He<ke&&(Ge*=256);)ye<0&&_e===0&&this[xe+He-1]!==0&&(_e=1),this[xe+He]=(ye/Ge>>0)-_e&255;return xe+ke},s.prototype.writeIntBE=function(ye,xe,ke,Ae){if(ye=+ye,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);se(this,ye,xe,ke,Oe-1,-Oe)}var He=ke-1,Ge=1,_e=0;for(this[xe+He]=ye&255;--He>=0&&(Ge*=256);)ye<0&&_e===0&&this[xe+He+1]!==0&&(_e=1),this[xe+He]=(ye/Ge>>0)-_e&255;return xe+ke},s.prototype.writeInt8=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,1,127,-128),ye<0&&(ye=255+ye+1),this[xe]=ye&255,xe+1},s.prototype.writeInt16LE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,2,32767,-32768),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeInt16BE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,2,32767,-32768),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeInt32LE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,4,2147483647,-2147483648),this[xe]=ye&255,this[xe+1]=ye>>>8,this[xe+2]=ye>>>16,this[xe+3]=ye>>>24,xe+4},s.prototype.writeInt32BE=function(ye,xe,ke){return ye=+ye,xe=xe>>>0,ke||se(this,ye,xe,4,2147483647,-2147483648),ye<0&&(ye=4294967295+ye+1),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4};function ue(ce,ye,xe,ke,Ae,Oe){if(xe+ke>ce.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function oe(ce,ye,xe,ke,Ae){return ye=+ye,xe=xe>>>0,Ae||ue(ce,ye,xe,4),a.write(ce,ye,xe,ke,23,4),xe+4}s.prototype.writeFloatLE=function(ye,xe,ke){return oe(this,ye,xe,!0,ke)},s.prototype.writeFloatBE=function(ye,xe,ke){return oe(this,ye,xe,!1,ke)};function U(ce,ye,xe,ke,Ae){return ye=+ye,xe=xe>>>0,Ae||ue(ce,ye,xe,8),a.write(ce,ye,xe,ke,52,8),xe+8}s.prototype.writeDoubleLE=function(ye,xe,ke){return U(this,ye,xe,!0,ke)},s.prototype.writeDoubleBE=function(ye,xe,ke){return U(this,ye,xe,!1,ke)},s.prototype.copy=function(ye,xe,ke,Ae){if(!s.isBuffer(ye))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),!Ae&&Ae!==0&&(Ae=this.length),xe>=ye.length&&(xe=ye.length),xe||(xe=0),Ae>0&&Ae<ke&&(Ae=ke),Ae===ke||ye.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),ye.length-xe<Ae-ke&&(Ae=ye.length-xe+ke);var Oe=Ae-ke;if(this===ye&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,ke,Ae);else if(this===ye&&ke<xe&&xe<Ae)for(var He=Oe-1;He>=0;--He)ye[He+xe]=this[He+ke];else Uint8Array.prototype.set.call(ye,this.subarray(ke,Ae),xe);return Oe},s.prototype.fill=function(ye,xe,ke,Ae){if(typeof ye=="string"){if(typeof xe=="string"?(Ae=xe,xe=0,ke=this.length):typeof ke=="string"&&(Ae=ke,ke=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!s.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(ye.length===1){var Oe=ye.charCodeAt(0);(Ae==="utf8"&&Oe<128||Ae==="latin1")&&(ye=Oe)}}else typeof ye=="number"&&(ye=ye&255);if(xe<0||this.length<xe||this.length<ke)throw new RangeError("Out of range index");if(ke<=xe)return this;xe=xe>>>0,ke=ke===void 0?this.length:ke>>>0,ye||(ye=0);var He;if(typeof ye=="number")for(He=xe;He<ke;++He)this[He]=ye;else{var Ge=s.isBuffer(ye)?ye:s.from(ye,Ae),_e=Ge.length;if(_e===0)throw new TypeError('The value "'+ye+'" is invalid for argument "value"');for(He=0;He<ke-xe;++He)this[He+xe]=Ge[He%_e]}return this};var G=/[^+/0-9A-Za-z-_]/g;function re(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(G,""),ce.length<2)return"";for(;ce.length%4!=0;)ce=ce+"=";return ce}function ee(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function j(ce,ye){ye=ye||1/0;for(var xe,ke=ce.length,Ae=null,Oe=[],He=0;He<ke;++He){if(xe=ce.charCodeAt(He),xe>55295&&xe<57344){if(!Ae){if(xe>56319){(ye-=3)>-1&&Oe.push(239,191,189);continue}else if(He+1===ke){(ye-=3)>-1&&Oe.push(239,191,189);continue}Ae=xe;continue}if(xe<56320){(ye-=3)>-1&&Oe.push(239,191,189),Ae=xe;continue}xe=(Ae-55296<<10|xe-56320)+65536}else Ae&&(ye-=3)>-1&&Oe.push(239,191,189);if(Ae=null,xe<128){if((ye-=1)<0)break;Oe.push(xe)}else if(xe<2048){if((ye-=2)<0)break;Oe.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((ye-=3)<0)break;Oe.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((ye-=4)<0)break;Oe.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return Oe}function Q(ce){for(var ye=[],xe=0;xe<ce.length;++xe)ye.push(ce.charCodeAt(xe)&255);return ye}function ne(ce,ye){for(var xe,ke,Ae,Oe=[],He=0;He<ce.length&&!((ye-=2)<0);++He)xe=ce.charCodeAt(He),ke=xe>>8,Ae=xe%256,Oe.push(Ae),Oe.push(ke);return Oe}function ae(ce){return o.toByteArray(re(ce))}function ie(ce,ye,xe,ke){for(var Ae=0;Ae<ke&&!(Ae+xe>=ye.length||Ae>=ce.length);++Ae)ye[Ae+xe]=ce[Ae];return Ae}function fe(ce,ye){return ce instanceof ye||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===ye.name}function me(ce){return ce!==ce}}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(l,b,w){w.read=function(e,o,a,n,r){var u,s,i=r*8-n-1,f=(1<<i)-1,h=f>>1,p=-7,v=a?r-1:0,y=a?-1:1,g=e[o+v];for(v+=y,u=g&(1<<-p)-1,g>>=-p,p+=i;p>0;u=u*256+e[o+v],v+=y,p-=8);for(s=u&(1<<-p)-1,u>>=-p,p+=n;p>0;s=s*256+e[o+v],v+=y,p-=8);if(u===0)u=1-h;else{if(u===f)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),u=u-h}return(g?-1:1)*s*Math.pow(2,u-n)},w.write=function(e,o,a,n,r,u){var s,i,f,h=u*8-r-1,p=(1<<h)-1,v=p>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:u-1,A=n?1:-1,m=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(i=isNaN(o)?1:0,s=p):(s=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+v>=1?o+=y/f:o+=y*Math.pow(2,1-v),o*f>=2&&(s++,f/=2),s+v>=p?(i=0,s=p):s+v>=1?(i=(o*f-1)*Math.pow(2,r),s=s+v):(i=o*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;e[a+g]=i&255,g+=A,i/=256,r-=8);for(s=s<<r|i,h+=r;h>0;e[a+g]=s&255,g+=A,s/=256,h-=8);e[a+g-A]|=m*128}},{}],5:[function(l,b,w){var e=b.exports={},o,a;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=n}catch{o=n}try{typeof clearTimeout=="function"?a=clearTimeout:a=r}catch{a=r}})();function u(m){if(o===setTimeout)return setTimeout(m,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(m,0);try{return o(m,0)}catch{try{return o.call(null,m,0)}catch{return o.call(this,m,0)}}}function s(m){if(a===clearTimeout)return clearTimeout(m);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(m);try{return a(m)}catch{try{return a.call(null,m)}catch{return a.call(this,m)}}}var i=[],f=!1,h,p=-1;function v(){!f||!h||(f=!1,h.length?i=h.concat(i):p=-1,i.length&&y())}function y(){if(!f){var m=u(v);f=!0;for(var M=i.length;M;){for(h=i,i=[];++p<M;)h&&h[p].run();p=-1,M=i.length}h=null,f=!1,s(m)}}e.nextTick=function(m){var M=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)M[_-1]=arguments[_];i.push(new g(m,M)),i.length===1&&!f&&u(y)};function g(m,M){this.fun=m,this.array=M}g.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function A(){}e.on=A,e.addListener=A,e.once=A,e.off=A,e.removeListener=A,e.removeAllListeners=A,e.emit=A,e.prependListener=A,e.prependOnceListener=A,e.listeners=function(m){return[]},e.binding=function(m){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(m){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(l,b,w){b.exports={alpha_shape:l("alpha-shape"),convex_hull:l("convex-hull"),delaunay_triangulate:l("delaunay-triangulate"),gl_cone3d:l("gl-cone3d"),gl_error3d:l("gl-error3d"),gl_heatmap2d:l("gl-heatmap2d"),gl_line3d:l("gl-line3d"),gl_mesh3d:l("gl-mesh3d"),gl_plot2d:l("gl-plot2d"),gl_plot3d:l("gl-plot3d"),gl_pointcloud2d:l("gl-pointcloud2d"),gl_scatter3d:l("gl-scatter3d"),gl_select_box:l("gl-select-box"),gl_spikes2d:l("gl-spikes2d"),gl_streamtube3d:l("gl-streamtube3d"),gl_surface3d:l("gl-surface3d"),ndarray:l("ndarray"),ndarray_linear_interpolate:l("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(l,b,w){b.exports=u;var e=l("turntable-camera-controller"),o=l("orbit-camera-controller"),a=l("matrix-camera-controller");function n(s,i){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(f){return s[f]}),this._mode=i,this._active=s[i],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(s){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].flush(s)},r.idle=function(s){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].idle(s)},r.lookAt=function(s,i,f,h){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].lookAt(s,i,f,h)},r.rotate=function(s,i,f,h){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].rotate(s,i,f,h)},r.pan=function(s,i,f,h){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].pan(s,i,f,h)},r.translate=function(s,i,f,h){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].translate(s,i,f,h)},r.setMatrix=function(s,i){for(var f=this._controllerList,h=0;h<f.length;++h)f[h].setMatrix(s,i)},r.setDistanceLimits=function(s,i){for(var f=this._controllerList,h=0;h<f.length;++h)f[h].setDistanceLimits(s,i)},r.setDistance=function(s,i){for(var f=this._controllerList,h=0;h<f.length;++h)f[h].setDistance(s,i)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var i=this._controllerNames.indexOf(s);if(!(i<0)){var f=this._active,h=this._controllerList[i],p=Math.max(f.lastT(),h.lastT());f.recalcMatrix(p),h.setMatrix(p,f.computedMatrix),this._active=h,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function u(s){s=s||{};var i=s.eye||[0,0,1],f=s.center||[0,0,0],h=s.up||[0,1,0],p=s.distanceLimits||[0,1/0],v=s.mode||"turntable",y=e(),g=o(),A=a();return y.setDistanceLimits(p[0],p[1]),y.lookAt(0,i,f,h),g.setDistanceLimits(p[0],p[1]),g.lookAt(0,i,f,h),A.setDistanceLimits(p[0],p[1]),A.lookAt(0,i,f,h),new n({turntable:y,orbit:g,matrix:A},v)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(l,b,w){var e=typeof WeakMap=="undefined"?l("weak-map"):WeakMap,o=l("gl-buffer"),a=l("gl-vao"),n=new e;function r(u){var s=n.get(u),i=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!i||!u.isBuffer(i)){var f=o(u,new Float32Array([-1,-1,-1,4,4,-1]));s=a(u,[{buffer:f,type:u.FLOAT,size:2}]),s._triangleBuffer=f,n.set(u,s)}s.bind(),u.drawArrays(u.TRIANGLES,0,3),s.unbind()}b.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(l,b,w){var e=l("pad-left");b.exports=o;function o(a,n,r){n=typeof n=="number"?n:1,r=r||": ";var u=a.split(/\r?\n/),s=String(u.length+n-1).length;return u.map(function(i,f){var h=f+n,p=String(h).length,v=e(h,s-p);return v+r+i}).join(`
`)}},{"pad-left":264}],10:[function(l,b,w){b.exports=a;var e=l("robust-orientation");function o(n,r){for(var u=new Array(r+1),s=0;s<n.length;++s)u[s]=n[s];for(var s=0;s<=n.length;++s){for(var i=n.length;i<=r;++i){for(var f=new Array(r),h=0;h<r;++h)f[h]=Math.pow(i+1-s,h);u[i]=f}var p=e.apply(void 0,u);if(p)return!0}return!1}function a(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var u=n[0].length,s=[n[0]],i=[0],f=1;f<r;++f){if(s.push(n[f]),!o(s,u)){s.pop();continue}if(i.push(f),i.length===u+1)return i}return i}},{"robust-orientation":284}],11:[function(l,b,w){b.exports=a;var e=l("delaunay-triangulate"),o=l("circumradius");function a(n,r){return e(r).filter(function(u){for(var s=new Array(u.length),i=0;i<u.length;++i)s[i]=r[u[i]];return o(s)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(l,b,w){b.exports=a;var e=l("alpha-complex"),o=l("simplicial-complex-boundary");function a(n,r){return o(e(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(l,b,w){b.exports=function(o){return atob(o)}},{}],14:[function(l,b,w){b.exports=a;var e=l("robust-linear-solve");function o(n){for(var r=0,u=0;u<n.length;++u)r+=n[u];return r}function a(n,r){for(var u=r.length,s=new Array(u+1),i=0;i<u;++i){for(var f=new Array(u+1),h=0;h<=u;++h)f[h]=n[h][i];s[i]=f}s[u]=new Array(u+1);for(var i=0;i<=u;++i)s[u][i]=1;for(var p=new Array(u+1),i=0;i<u;++i)p[i]=r[i];p[u]=1;var v=e(s,p),y=o(v[u+1]);y===0&&(y=1);for(var g=new Array(u+1),i=0;i<=u;++i)g[i]=o(v[i])/y;return g}},{"robust-linear-solve":283}],15:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,n){return e(a[0].mul(n[1]).add(n[0].mul(a[1])),a[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(l,b,w){b.exports=e;function e(o,a){return o[0].mul(a[1]).cmp(a[0].mul(o[1]))}},{}],17:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,n){return e(a[0].mul(n[1]),a[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(l,b,w){var e=l("./is-rat"),o=l("./lib/is-bn"),a=l("./lib/num-to-bn"),n=l("./lib/str-to-bn"),r=l("./lib/rationalize"),u=l("./div");b.exports=s;function s(i,f){if(e(i))return f?u(i,s(f)):[i[0].clone(),i[1].clone()];var h=0,p,v;if(o(i))p=i.clone();else if(typeof i=="string")p=n(i);else{if(i===0)return[a(0),a(1)];if(i===Math.floor(i))p=a(i);else{for(;i!==Math.floor(i);)i=i*Math.pow(2,256),h-=256;p=a(i)}}if(e(f))p.mul(f[1]),v=f[0].clone();else if(o(f))v=f.clone();else if(typeof f=="string")v=n(f);else if(!f)v=a(1);else if(f===Math.floor(f))v=a(f);else{for(;f!==Math.floor(f);)f=f*Math.pow(2,256),h+=256;v=a(f)}return h>0?p=p.ushln(h):h<0&&(v=v.ushln(-h)),r(p,v)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(l,b,w){var e=l("./lib/is-bn");b.exports=o;function o(a){return Array.isArray(a)&&a.length===2&&e(a[0])&&e(a[1])}},{"./lib/is-bn":23}],20:[function(l,b,w){var e=l("bn.js");b.exports=o;function o(a){return a.cmp(new e(0))}},{"bn.js":33}],21:[function(l,b,w){var e=l("./bn-sign");b.exports=o;function o(a){var n=a.length,r=a.words,u=0;if(n===1)u=r[0];else if(n===2)u=r[0]+r[1]*67108864;else for(var s=0;s<n;s++){var i=r[s];u+=i*Math.pow(67108864,s)}return e(a)*u}},{"./bn-sign":20}],22:[function(l,b,w){var e=l("double-bits"),o=l("bit-twiddle").countTrailingZeros;b.exports=a;function a(n){var r=o(e.lo(n));if(r<32)return r;var u=o(e.hi(n));return u>20?52:u+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(l,b,w){l("bn.js"),b.exports=e;function e(o){return o&&typeof o=="object"&&Boolean(o.words)}},{"bn.js":33}],24:[function(l,b,w){var e=l("bn.js"),o=l("double-bits");b.exports=a;function a(n){var r=o.exponent(n);return r<52?new e(n):new e(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(l,b,w){var e=l("./num-to-bn"),o=l("./bn-sign");b.exports=a;function a(n,r){var u=o(n),s=o(r);if(u===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(n=n.neg(),r=r.neg());var i=n.gcd(r);return i.cmpn(1)?[n.div(i),r.div(i)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(l,b,w){var e=l("bn.js");b.exports=o;function o(a){return new e(a)}},{"bn.js":33}],27:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,n){return e(a[0].mul(n[0]),a[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(l,b,w){var e=l("./lib/bn-sign");b.exports=o;function o(a){return e(a[0])*e(a[1])}},{"./lib/bn-sign":20}],29:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,n){return e(a[0].mul(n[1]).sub(a[1].mul(n[0])),a[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(l,b,w){var e=l("./lib/bn-to-num"),o=l("./lib/ctz");b.exports=a;function a(n){var r=n[0],u=n[1];if(r.cmpn(0)===0)return 0;var s=r.abs().divmod(u.abs()),i=s.div,f=e(i),h=s.mod,p=r.negative!==u.negative?-1:1;if(h.cmpn(0)===0)return p*f;if(f){var v=o(f)+4,y=e(h.ushln(v).divRound(u));return p*(f+y*Math.pow(2,-v))}else{var g=u.bitLength()-h.bitLength()+53,y=e(h.ushln(g).divRound(u));return g<1023?p*y*Math.pow(2,-g):(y*=Math.pow(2,-1023),p*y*Math.pow(2,1023-g))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(l,b,w){function e(s,i,f,h,p){for(var v=p+1;h<=p;){var y=h+p>>>1,g=s[y],A=f!==void 0?f(g,i):g-i;A>=0?(v=y,p=y-1):h=y+1}return v}function o(s,i,f,h,p){for(var v=p+1;h<=p;){var y=h+p>>>1,g=s[y],A=f!==void 0?f(g,i):g-i;A>0?(v=y,p=y-1):h=y+1}return v}function a(s,i,f,h,p){for(var v=h-1;h<=p;){var y=h+p>>>1,g=s[y],A=f!==void 0?f(g,i):g-i;A<0?(v=y,h=y+1):p=y-1}return v}function n(s,i,f,h,p){for(var v=h-1;h<=p;){var y=h+p>>>1,g=s[y],A=f!==void 0?f(g,i):g-i;A<=0?(v=y,h=y+1):p=y-1}return v}function r(s,i,f,h,p){for(;h<=p;){var v=h+p>>>1,y=s[v],g=f!==void 0?f(y,i):y-i;if(g===0)return v;g<=0?h=v+1:p=v-1}return-1}function u(s,i,f,h,p,v){return typeof f=="function"?v(s,i,f,h===void 0?0:h|0,p===void 0?s.length-1:p|0):v(s,i,void 0,f===void 0?0:f|0,h===void 0?s.length-1:h|0)}b.exports={ge:function(s,i,f,h,p){return u(s,i,f,h,p,e)},gt:function(s,i,f,h,p){return u(s,i,f,h,p,o)},lt:function(s,i,f,h,p){return u(s,i,f,h,p,a)},le:function(s,i,f,h,p){return u(s,i,f,h,p,n)},eq:function(s,i,f,h,p){return u(s,i,f,h,p,r)}}},{}],32:[function(l,b,w){var e=32;w.INT_BITS=e,w.INT_MAX=2147483647,w.INT_MIN=-1<<e-1,w.sign=function(n){return(n>0)-(n<0)},w.abs=function(n){var r=n>>e-1;return(n^r)-r},w.min=function(n,r){return r^(n^r)&-(n<r)},w.max=function(n,r){return n^(n^r)&-(n<r)},w.isPow2=function(n){return!(n&n-1)&&!!n},w.log2=function(n){var r,u;return r=(n>65535)<<4,n>>>=r,u=(n>255)<<3,n>>>=u,r|=u,u=(n>15)<<2,n>>>=u,r|=u,u=(n>3)<<1,n>>>=u,r|=u,r|n>>1},w.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},w.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function o(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}w.countTrailingZeros=o,w.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},w.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},w.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var a=new Array(256);(function(n){for(var r=0;r<256;++r){var u=r,s=r,i=7;for(u>>>=1;u;u>>>=1)s<<=1,s|=u&1,--i;n[r]=s<<i&255}})(a),w.reverse=function(n){return a[n&255]<<24|a[n>>>8&255]<<16|a[n>>>16&255]<<8|a[n>>>24&255]},w.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},w.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},w.interleave3=function(n,r,u){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,n|u<<2},w.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},w.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>o(n)+1}},{}],33:[function(l,b,w){(function(e,o){function a(I,R){if(!I)throw new Error(R||"Assertion failed")}function n(I,R){I.super_=R;var D=function(){};D.prototype=R.prototype,I.prototype=new D,I.prototype.constructor=I}function r(I,R,D){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((R==="le"||R==="be")&&(D=R,R=10),this._init(I||0,R||10,D||"be"))}typeof e=="object"?e.exports=r:o.BN=r,r.BN=r,r.wordSize=26;var u;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?u=window.Buffer:u=l("buffer").Buffer}catch{}r.isBN=function(R){return R instanceof r?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===r.wordSize&&Array.isArray(R.words)},r.max=function(R,D){return R.cmp(D)>0?R:D},r.min=function(R,D){return R.cmp(D)<0?R:D},r.prototype._init=function(R,D,O){if(typeof R=="number")return this._initNumber(R,D,O);if(typeof R=="object")return this._initArray(R,D,O);D==="hex"&&(D=16),a(D===(D|0)&&D>=2&&D<=36),R=R.toString().replace(/\s+/g,"");var F=0;R[0]==="-"&&(F++,this.negative=1),F<R.length&&(D===16?this._parseHex(R,F,O):(this._parseBase(R,D,F),O==="le"&&this._initArray(this.toArray(),D,O)))},r.prototype._initNumber=function(R,D,O){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(a(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),D,O)},r.prototype._initArray=function(R,D,O){if(a(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var Y,X,q=0;if(O==="be")for(F=R.length-1,Y=0;F>=0;F-=3)X=R[F]|R[F-1]<<8|R[F-2]<<16,this.words[Y]|=X<<q&67108863,this.words[Y+1]=X>>>26-q&67108863,q+=24,q>=26&&(q-=26,Y++);else if(O==="le")for(F=0,Y=0;F<R.length;F+=3)X=R[F]|R[F+1]<<8|R[F+2]<<16,this.words[Y]|=X<<q&67108863,this.words[Y+1]=X>>>26-q&67108863,q+=24,q>=26&&(q-=26,Y++);return this.strip()};function s(I,R){var D=I.charCodeAt(R);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function i(I,R,D){var O=s(I,D);return D-1>=R&&(O|=s(I,D-1)<<4),O}r.prototype._parseHex=function(R,D,O){this.length=Math.ceil((R.length-D)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var Y=0,X=0,q;if(O==="be")for(F=R.length-1;F>=D;F-=2)q=i(R,D,F)<<Y,this.words[X]|=q&67108863,Y>=18?(Y-=18,X+=1,this.words[X]|=q>>>26):Y+=8;else{var $=R.length-D;for(F=$%2==0?D+1:D;F<R.length;F+=2)q=i(R,D,F)<<Y,this.words[X]|=q&67108863,Y>=18?(Y-=18,X+=1,this.words[X]|=q>>>26):Y+=8}this.strip()};function f(I,R,D,O){for(var F=0,Y=Math.min(I.length,D),X=R;X<Y;X++){var q=I.charCodeAt(X)-48;F*=O,q>=49?F+=q-49+10:q>=17?F+=q-17+10:F+=q}return F}r.prototype._parseBase=function(R,D,O){this.words=[0],this.length=1;for(var F=0,Y=1;Y<=67108863;Y*=D)F++;F--,Y=Y/D|0;for(var X=R.length-O,q=X%F,$=Math.min(X,X-q)+O,V=0,K=O;K<$;K+=F)V=f(R,K,K+F,D),this.imuln(Y),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(q!==0){var se=1;for(V=f(R,K,R.length,D),K=0;K<q;K++)se*=D;this.imuln(se),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this.strip()},r.prototype.copy=function(R){R.words=new Array(this.length);for(var D=0;D<this.length;D++)R.words[D]=this.words[D];R.length=this.length,R.negative=this.negative,R.red=this.red},r.prototype.clone=function(){var R=new r(null);return this.copy(R),R},r.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(R,D){R=R||10,D=D|0||1;var O;if(R===16||R==="hex"){O="";for(var F=0,Y=0,X=0;X<this.length;X++){var q=this.words[X],$=((q<<F|Y)&16777215).toString(16);Y=q>>>24-F&16777215,Y!==0||X!==this.length-1?O=h[6-$.length]+$+O:O=$+O,F+=2,F>=26&&(F-=26,X--)}for(Y!==0&&(O=Y.toString(16)+O);O.length%D!=0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(R===(R|0)&&R>=2&&R<=36){var V=p[R],K=v[R];O="";var se=this.clone();for(se.negative=0;!se.isZero();){var ue=se.modn(K).toString(R);se=se.idivn(K),se.isZero()?O=ue+O:O=h[V-ue.length]+ue+O}for(this.isZero()&&(O="0"+O);O.length%D!=0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}a(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(R,D){return a(typeof u!="undefined"),this.toArrayLike(u,R,D)},r.prototype.toArray=function(R,D){return this.toArrayLike(Array,R,D)},r.prototype.toArrayLike=function(R,D,O){var F=this.byteLength(),Y=O||Math.max(1,F);a(F<=Y,"byte array longer than desired length"),a(Y>0,"Requested array length <= 0"),this.strip();var X=D==="le",q=new R(Y),$,V,K=this.clone();if(X){for(V=0;!K.isZero();V++)$=K.andln(255),K.iushrn(8),q[V]=$;for(;V<Y;V++)q[V]=0}else{for(V=0;V<Y-F;V++)q[V]=0;for(V=0;!K.isZero();V++)$=K.andln(255),K.iushrn(8),q[Y-V-1]=$}return q},Math.clz32?r.prototype._countBits=function(R){return 32-Math.clz32(R)}:r.prototype._countBits=function(R){var D=R,O=0;return D>=4096&&(O+=13,D>>>=13),D>=64&&(O+=7,D>>>=7),D>=8&&(O+=4,D>>>=4),D>=2&&(O+=2,D>>>=2),O+D},r.prototype._zeroBits=function(R){if(R===0)return 26;var D=R,O=0;return(D&8191)==0&&(O+=13,D>>>=13),(D&127)==0&&(O+=7,D>>>=7),(D&15)==0&&(O+=4,D>>>=4),(D&3)==0&&(O+=2,D>>>=2),(D&1)==0&&O++,O},r.prototype.bitLength=function(){var R=this.words[this.length-1],D=this._countBits(R);return(this.length-1)*26+D};function y(I){for(var R=new Array(I.bitLength()),D=0;D<R.length;D++){var O=D/26|0,F=D%26;R[D]=(I.words[O]&1<<F)>>>F}return R}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,D=0;D<this.length;D++){var O=this._zeroBits(this.words[D]);if(R+=O,O!==26)break}return R},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},r.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var D=0;D<R.length;D++)this.words[D]=this.words[D]|R.words[D];return this.strip()},r.prototype.ior=function(R){return a((this.negative|R.negative)==0),this.iuor(R)},r.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},r.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},r.prototype.iuand=function(R){var D;this.length>R.length?D=R:D=this;for(var O=0;O<D.length;O++)this.words[O]=this.words[O]&R.words[O];return this.length=D.length,this.strip()},r.prototype.iand=function(R){return a((this.negative|R.negative)==0),this.iuand(R)},r.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},r.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},r.prototype.iuxor=function(R){var D,O;this.length>R.length?(D=this,O=R):(D=R,O=this);for(var F=0;F<O.length;F++)this.words[F]=D.words[F]^O.words[F];if(this!==D)for(;F<D.length;F++)this.words[F]=D.words[F];return this.length=D.length,this.strip()},r.prototype.ixor=function(R){return a((this.negative|R.negative)==0),this.iuxor(R)},r.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},r.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},r.prototype.inotn=function(R){a(typeof R=="number"&&R>=0);var D=Math.ceil(R/26)|0,O=R%26;this._expand(D),O>0&&D--;for(var F=0;F<D;F++)this.words[F]=~this.words[F]&67108863;return O>0&&(this.words[F]=~this.words[F]&67108863>>26-O),this.strip()},r.prototype.notn=function(R){return this.clone().inotn(R)},r.prototype.setn=function(R,D){a(typeof R=="number"&&R>=0);var O=R/26|0,F=R%26;return this._expand(O+1),D?this.words[O]=this.words[O]|1<<F:this.words[O]=this.words[O]&~(1<<F),this.strip()},r.prototype.iadd=function(R){var D;if(this.negative!==0&&R.negative===0)return this.negative=0,D=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,D=this.isub(R),R.negative=1,D._normSign();var O,F;this.length>R.length?(O=this,F=R):(O=R,F=this);for(var Y=0,X=0;X<F.length;X++)D=(O.words[X]|0)+(F.words[X]|0)+Y,this.words[X]=D&67108863,Y=D>>>26;for(;Y!==0&&X<O.length;X++)D=(O.words[X]|0)+Y,this.words[X]=D&67108863,Y=D>>>26;if(this.length=O.length,Y!==0)this.words[this.length]=Y,this.length++;else if(O!==this)for(;X<O.length;X++)this.words[X]=O.words[X];return this},r.prototype.add=function(R){var D;return R.negative!==0&&this.negative===0?(R.negative=0,D=this.sub(R),R.negative^=1,D):R.negative===0&&this.negative!==0?(this.negative=0,D=R.sub(this),this.negative=1,D):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},r.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var D=this.iadd(R);return R.negative=1,D._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var O=this.cmp(R);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,Y;O>0?(F=this,Y=R):(F=R,Y=this);for(var X=0,q=0;q<Y.length;q++)D=(F.words[q]|0)-(Y.words[q]|0)+X,X=D>>26,this.words[q]=D&67108863;for(;X!==0&&q<F.length;q++)D=(F.words[q]|0)+X,X=D>>26,this.words[q]=D&67108863;if(X===0&&q<F.length&&F!==this)for(;q<F.length;q++)this.words[q]=F.words[q];return this.length=Math.max(this.length,q),F!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(R){return this.clone().isub(R)};function g(I,R,D){D.negative=R.negative^I.negative;var O=I.length+R.length|0;D.length=O,O=O-1|0;var F=I.words[0]|0,Y=R.words[0]|0,X=F*Y,q=X&67108863,$=X/67108864|0;D.words[0]=q;for(var V=1;V<O;V++){for(var K=$>>>26,se=$&67108863,ue=Math.min(V,R.length-1),oe=Math.max(0,V-I.length+1);oe<=ue;oe++){var U=V-oe|0;F=I.words[U]|0,Y=R.words[oe]|0,X=F*Y+se,K+=X/67108864|0,se=X&67108863}D.words[V]=se|0,$=K|0}return $!==0?D.words[V]=$|0:D.length--,D.strip()}var A=function(R,D,O){var F=R.words,Y=D.words,X=O.words,q=0,$,V,K,se=F[0]|0,ue=se&8191,oe=se>>>13,U=F[1]|0,G=U&8191,re=U>>>13,ee=F[2]|0,j=ee&8191,Q=ee>>>13,ne=F[3]|0,ae=ne&8191,ie=ne>>>13,fe=F[4]|0,me=fe&8191,ce=fe>>>13,ye=F[5]|0,xe=ye&8191,ke=ye>>>13,Ae=F[6]|0,Oe=Ae&8191,He=Ae>>>13,Ge=F[7]|0,_e=Ge&8191,Ie=Ge>>>13,Ye=F[8]|0,qe=Ye&8191,Ue=Ye>>>13,Re=F[9]|0,Ve=Re&8191,dt=Re>>>13,Dt=Y[0]|0,Gt=Dt&8191,kt=Dt>>>13,zt=Y[1]|0,Bt=zt&8191,Lt=zt>>>13,Mt=Y[2]|0,it=Mt&8191,ht=Mt>>>13,Qe=Y[3]|0,Ce=Qe&8191,je=Qe>>>13,rt=Y[4]|0,ut=rt&8191,Pt=rt>>>13,St=Y[5]|0,Nt=St&8191,Xt=St>>>13,Ot=Y[6]|0,Kt=Ot&8191,Je=Ot>>>13,gt=Y[7]|0,Et=gt&8191,rr=gt>>>13,vr=Y[8]|0,or=vr&8191,dr=vr>>>13,Lr=Y[9]|0,kr=Lr&8191,tr=Lr>>>13;O.negative=R.negative^D.negative,O.length=19,$=Math.imul(ue,Gt),V=Math.imul(ue,kt),V=V+Math.imul(oe,Gt)|0,K=Math.imul(oe,kt);var Or=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Or>>>26)|0,Or&=67108863,$=Math.imul(G,Gt),V=Math.imul(G,kt),V=V+Math.imul(re,Gt)|0,K=Math.imul(re,kt),$=$+Math.imul(ue,Bt)|0,V=V+Math.imul(ue,Lt)|0,V=V+Math.imul(oe,Bt)|0,K=K+Math.imul(oe,Lt)|0;var et=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(et>>>26)|0,et&=67108863,$=Math.imul(j,Gt),V=Math.imul(j,kt),V=V+Math.imul(Q,Gt)|0,K=Math.imul(Q,kt),$=$+Math.imul(G,Bt)|0,V=V+Math.imul(G,Lt)|0,V=V+Math.imul(re,Bt)|0,K=K+Math.imul(re,Lt)|0,$=$+Math.imul(ue,it)|0,V=V+Math.imul(ue,ht)|0,V=V+Math.imul(oe,it)|0,K=K+Math.imul(oe,ht)|0;var we=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(we>>>26)|0,we&=67108863,$=Math.imul(ae,Gt),V=Math.imul(ae,kt),V=V+Math.imul(ie,Gt)|0,K=Math.imul(ie,kt),$=$+Math.imul(j,Bt)|0,V=V+Math.imul(j,Lt)|0,V=V+Math.imul(Q,Bt)|0,K=K+Math.imul(Q,Lt)|0,$=$+Math.imul(G,it)|0,V=V+Math.imul(G,ht)|0,V=V+Math.imul(re,it)|0,K=K+Math.imul(re,ht)|0,$=$+Math.imul(ue,Ce)|0,V=V+Math.imul(ue,je)|0,V=V+Math.imul(oe,Ce)|0,K=K+Math.imul(oe,je)|0;var Se=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Se>>>26)|0,Se&=67108863,$=Math.imul(me,Gt),V=Math.imul(me,kt),V=V+Math.imul(ce,Gt)|0,K=Math.imul(ce,kt),$=$+Math.imul(ae,Bt)|0,V=V+Math.imul(ae,Lt)|0,V=V+Math.imul(ie,Bt)|0,K=K+Math.imul(ie,Lt)|0,$=$+Math.imul(j,it)|0,V=V+Math.imul(j,ht)|0,V=V+Math.imul(Q,it)|0,K=K+Math.imul(Q,ht)|0,$=$+Math.imul(G,Ce)|0,V=V+Math.imul(G,je)|0,V=V+Math.imul(re,Ce)|0,K=K+Math.imul(re,je)|0,$=$+Math.imul(ue,ut)|0,V=V+Math.imul(ue,Pt)|0,V=V+Math.imul(oe,ut)|0,K=K+Math.imul(oe,Pt)|0;var De=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(De>>>26)|0,De&=67108863,$=Math.imul(xe,Gt),V=Math.imul(xe,kt),V=V+Math.imul(ke,Gt)|0,K=Math.imul(ke,kt),$=$+Math.imul(me,Bt)|0,V=V+Math.imul(me,Lt)|0,V=V+Math.imul(ce,Bt)|0,K=K+Math.imul(ce,Lt)|0,$=$+Math.imul(ae,it)|0,V=V+Math.imul(ae,ht)|0,V=V+Math.imul(ie,it)|0,K=K+Math.imul(ie,ht)|0,$=$+Math.imul(j,Ce)|0,V=V+Math.imul(j,je)|0,V=V+Math.imul(Q,Ce)|0,K=K+Math.imul(Q,je)|0,$=$+Math.imul(G,ut)|0,V=V+Math.imul(G,Pt)|0,V=V+Math.imul(re,ut)|0,K=K+Math.imul(re,Pt)|0,$=$+Math.imul(ue,Nt)|0,V=V+Math.imul(ue,Xt)|0,V=V+Math.imul(oe,Nt)|0,K=K+Math.imul(oe,Xt)|0;var Xe=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,$=Math.imul(Oe,Gt),V=Math.imul(Oe,kt),V=V+Math.imul(He,Gt)|0,K=Math.imul(He,kt),$=$+Math.imul(xe,Bt)|0,V=V+Math.imul(xe,Lt)|0,V=V+Math.imul(ke,Bt)|0,K=K+Math.imul(ke,Lt)|0,$=$+Math.imul(me,it)|0,V=V+Math.imul(me,ht)|0,V=V+Math.imul(ce,it)|0,K=K+Math.imul(ce,ht)|0,$=$+Math.imul(ae,Ce)|0,V=V+Math.imul(ae,je)|0,V=V+Math.imul(ie,Ce)|0,K=K+Math.imul(ie,je)|0,$=$+Math.imul(j,ut)|0,V=V+Math.imul(j,Pt)|0,V=V+Math.imul(Q,ut)|0,K=K+Math.imul(Q,Pt)|0,$=$+Math.imul(G,Nt)|0,V=V+Math.imul(G,Xt)|0,V=V+Math.imul(re,Nt)|0,K=K+Math.imul(re,Xt)|0,$=$+Math.imul(ue,Kt)|0,V=V+Math.imul(ue,Je)|0,V=V+Math.imul(oe,Kt)|0,K=K+Math.imul(oe,Je)|0;var $e=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+($e>>>26)|0,$e&=67108863,$=Math.imul(_e,Gt),V=Math.imul(_e,kt),V=V+Math.imul(Ie,Gt)|0,K=Math.imul(Ie,kt),$=$+Math.imul(Oe,Bt)|0,V=V+Math.imul(Oe,Lt)|0,V=V+Math.imul(He,Bt)|0,K=K+Math.imul(He,Lt)|0,$=$+Math.imul(xe,it)|0,V=V+Math.imul(xe,ht)|0,V=V+Math.imul(ke,it)|0,K=K+Math.imul(ke,ht)|0,$=$+Math.imul(me,Ce)|0,V=V+Math.imul(me,je)|0,V=V+Math.imul(ce,Ce)|0,K=K+Math.imul(ce,je)|0,$=$+Math.imul(ae,ut)|0,V=V+Math.imul(ae,Pt)|0,V=V+Math.imul(ie,ut)|0,K=K+Math.imul(ie,Pt)|0,$=$+Math.imul(j,Nt)|0,V=V+Math.imul(j,Xt)|0,V=V+Math.imul(Q,Nt)|0,K=K+Math.imul(Q,Xt)|0,$=$+Math.imul(G,Kt)|0,V=V+Math.imul(G,Je)|0,V=V+Math.imul(re,Kt)|0,K=K+Math.imul(re,Je)|0,$=$+Math.imul(ue,Et)|0,V=V+Math.imul(ue,rr)|0,V=V+Math.imul(oe,Et)|0,K=K+Math.imul(oe,rr)|0;var ot=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(ot>>>26)|0,ot&=67108863,$=Math.imul(qe,Gt),V=Math.imul(qe,kt),V=V+Math.imul(Ue,Gt)|0,K=Math.imul(Ue,kt),$=$+Math.imul(_e,Bt)|0,V=V+Math.imul(_e,Lt)|0,V=V+Math.imul(Ie,Bt)|0,K=K+Math.imul(Ie,Lt)|0,$=$+Math.imul(Oe,it)|0,V=V+Math.imul(Oe,ht)|0,V=V+Math.imul(He,it)|0,K=K+Math.imul(He,ht)|0,$=$+Math.imul(xe,Ce)|0,V=V+Math.imul(xe,je)|0,V=V+Math.imul(ke,Ce)|0,K=K+Math.imul(ke,je)|0,$=$+Math.imul(me,ut)|0,V=V+Math.imul(me,Pt)|0,V=V+Math.imul(ce,ut)|0,K=K+Math.imul(ce,Pt)|0,$=$+Math.imul(ae,Nt)|0,V=V+Math.imul(ae,Xt)|0,V=V+Math.imul(ie,Nt)|0,K=K+Math.imul(ie,Xt)|0,$=$+Math.imul(j,Kt)|0,V=V+Math.imul(j,Je)|0,V=V+Math.imul(Q,Kt)|0,K=K+Math.imul(Q,Je)|0,$=$+Math.imul(G,Et)|0,V=V+Math.imul(G,rr)|0,V=V+Math.imul(re,Et)|0,K=K+Math.imul(re,rr)|0,$=$+Math.imul(ue,or)|0,V=V+Math.imul(ue,dr)|0,V=V+Math.imul(oe,or)|0,K=K+Math.imul(oe,dr)|0;var st=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(st>>>26)|0,st&=67108863,$=Math.imul(Ve,Gt),V=Math.imul(Ve,kt),V=V+Math.imul(dt,Gt)|0,K=Math.imul(dt,kt),$=$+Math.imul(qe,Bt)|0,V=V+Math.imul(qe,Lt)|0,V=V+Math.imul(Ue,Bt)|0,K=K+Math.imul(Ue,Lt)|0,$=$+Math.imul(_e,it)|0,V=V+Math.imul(_e,ht)|0,V=V+Math.imul(Ie,it)|0,K=K+Math.imul(Ie,ht)|0,$=$+Math.imul(Oe,Ce)|0,V=V+Math.imul(Oe,je)|0,V=V+Math.imul(He,Ce)|0,K=K+Math.imul(He,je)|0,$=$+Math.imul(xe,ut)|0,V=V+Math.imul(xe,Pt)|0,V=V+Math.imul(ke,ut)|0,K=K+Math.imul(ke,Pt)|0,$=$+Math.imul(me,Nt)|0,V=V+Math.imul(me,Xt)|0,V=V+Math.imul(ce,Nt)|0,K=K+Math.imul(ce,Xt)|0,$=$+Math.imul(ae,Kt)|0,V=V+Math.imul(ae,Je)|0,V=V+Math.imul(ie,Kt)|0,K=K+Math.imul(ie,Je)|0,$=$+Math.imul(j,Et)|0,V=V+Math.imul(j,rr)|0,V=V+Math.imul(Q,Et)|0,K=K+Math.imul(Q,rr)|0,$=$+Math.imul(G,or)|0,V=V+Math.imul(G,dr)|0,V=V+Math.imul(re,or)|0,K=K+Math.imul(re,dr)|0,$=$+Math.imul(ue,kr)|0,V=V+Math.imul(ue,tr)|0,V=V+Math.imul(oe,kr)|0,K=K+Math.imul(oe,tr)|0;var pt=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(pt>>>26)|0,pt&=67108863,$=Math.imul(Ve,Bt),V=Math.imul(Ve,Lt),V=V+Math.imul(dt,Bt)|0,K=Math.imul(dt,Lt),$=$+Math.imul(qe,it)|0,V=V+Math.imul(qe,ht)|0,V=V+Math.imul(Ue,it)|0,K=K+Math.imul(Ue,ht)|0,$=$+Math.imul(_e,Ce)|0,V=V+Math.imul(_e,je)|0,V=V+Math.imul(Ie,Ce)|0,K=K+Math.imul(Ie,je)|0,$=$+Math.imul(Oe,ut)|0,V=V+Math.imul(Oe,Pt)|0,V=V+Math.imul(He,ut)|0,K=K+Math.imul(He,Pt)|0,$=$+Math.imul(xe,Nt)|0,V=V+Math.imul(xe,Xt)|0,V=V+Math.imul(ke,Nt)|0,K=K+Math.imul(ke,Xt)|0,$=$+Math.imul(me,Kt)|0,V=V+Math.imul(me,Je)|0,V=V+Math.imul(ce,Kt)|0,K=K+Math.imul(ce,Je)|0,$=$+Math.imul(ae,Et)|0,V=V+Math.imul(ae,rr)|0,V=V+Math.imul(ie,Et)|0,K=K+Math.imul(ie,rr)|0,$=$+Math.imul(j,or)|0,V=V+Math.imul(j,dr)|0,V=V+Math.imul(Q,or)|0,K=K+Math.imul(Q,dr)|0,$=$+Math.imul(G,kr)|0,V=V+Math.imul(G,tr)|0,V=V+Math.imul(re,kr)|0,K=K+Math.imul(re,tr)|0;var wt=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(wt>>>26)|0,wt&=67108863,$=Math.imul(Ve,it),V=Math.imul(Ve,ht),V=V+Math.imul(dt,it)|0,K=Math.imul(dt,ht),$=$+Math.imul(qe,Ce)|0,V=V+Math.imul(qe,je)|0,V=V+Math.imul(Ue,Ce)|0,K=K+Math.imul(Ue,je)|0,$=$+Math.imul(_e,ut)|0,V=V+Math.imul(_e,Pt)|0,V=V+Math.imul(Ie,ut)|0,K=K+Math.imul(Ie,Pt)|0,$=$+Math.imul(Oe,Nt)|0,V=V+Math.imul(Oe,Xt)|0,V=V+Math.imul(He,Nt)|0,K=K+Math.imul(He,Xt)|0,$=$+Math.imul(xe,Kt)|0,V=V+Math.imul(xe,Je)|0,V=V+Math.imul(ke,Kt)|0,K=K+Math.imul(ke,Je)|0,$=$+Math.imul(me,Et)|0,V=V+Math.imul(me,rr)|0,V=V+Math.imul(ce,Et)|0,K=K+Math.imul(ce,rr)|0,$=$+Math.imul(ae,or)|0,V=V+Math.imul(ae,dr)|0,V=V+Math.imul(ie,or)|0,K=K+Math.imul(ie,dr)|0,$=$+Math.imul(j,kr)|0,V=V+Math.imul(j,tr)|0,V=V+Math.imul(Q,kr)|0,K=K+Math.imul(Q,tr)|0;var Yt=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,$=Math.imul(Ve,Ce),V=Math.imul(Ve,je),V=V+Math.imul(dt,Ce)|0,K=Math.imul(dt,je),$=$+Math.imul(qe,ut)|0,V=V+Math.imul(qe,Pt)|0,V=V+Math.imul(Ue,ut)|0,K=K+Math.imul(Ue,Pt)|0,$=$+Math.imul(_e,Nt)|0,V=V+Math.imul(_e,Xt)|0,V=V+Math.imul(Ie,Nt)|0,K=K+Math.imul(Ie,Xt)|0,$=$+Math.imul(Oe,Kt)|0,V=V+Math.imul(Oe,Je)|0,V=V+Math.imul(He,Kt)|0,K=K+Math.imul(He,Je)|0,$=$+Math.imul(xe,Et)|0,V=V+Math.imul(xe,rr)|0,V=V+Math.imul(ke,Et)|0,K=K+Math.imul(ke,rr)|0,$=$+Math.imul(me,or)|0,V=V+Math.imul(me,dr)|0,V=V+Math.imul(ce,or)|0,K=K+Math.imul(ce,dr)|0,$=$+Math.imul(ae,kr)|0,V=V+Math.imul(ae,tr)|0,V=V+Math.imul(ie,kr)|0,K=K+Math.imul(ie,tr)|0;var mr=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(mr>>>26)|0,mr&=67108863,$=Math.imul(Ve,ut),V=Math.imul(Ve,Pt),V=V+Math.imul(dt,ut)|0,K=Math.imul(dt,Pt),$=$+Math.imul(qe,Nt)|0,V=V+Math.imul(qe,Xt)|0,V=V+Math.imul(Ue,Nt)|0,K=K+Math.imul(Ue,Xt)|0,$=$+Math.imul(_e,Kt)|0,V=V+Math.imul(_e,Je)|0,V=V+Math.imul(Ie,Kt)|0,K=K+Math.imul(Ie,Je)|0,$=$+Math.imul(Oe,Et)|0,V=V+Math.imul(Oe,rr)|0,V=V+Math.imul(He,Et)|0,K=K+Math.imul(He,rr)|0,$=$+Math.imul(xe,or)|0,V=V+Math.imul(xe,dr)|0,V=V+Math.imul(ke,or)|0,K=K+Math.imul(ke,dr)|0,$=$+Math.imul(me,kr)|0,V=V+Math.imul(me,tr)|0,V=V+Math.imul(ce,kr)|0,K=K+Math.imul(ce,tr)|0;var xr=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(xr>>>26)|0,xr&=67108863,$=Math.imul(Ve,Nt),V=Math.imul(Ve,Xt),V=V+Math.imul(dt,Nt)|0,K=Math.imul(dt,Xt),$=$+Math.imul(qe,Kt)|0,V=V+Math.imul(qe,Je)|0,V=V+Math.imul(Ue,Kt)|0,K=K+Math.imul(Ue,Je)|0,$=$+Math.imul(_e,Et)|0,V=V+Math.imul(_e,rr)|0,V=V+Math.imul(Ie,Et)|0,K=K+Math.imul(Ie,rr)|0,$=$+Math.imul(Oe,or)|0,V=V+Math.imul(Oe,dr)|0,V=V+Math.imul(He,or)|0,K=K+Math.imul(He,dr)|0,$=$+Math.imul(xe,kr)|0,V=V+Math.imul(xe,tr)|0,V=V+Math.imul(ke,kr)|0,K=K+Math.imul(ke,tr)|0;var Tr=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,$=Math.imul(Ve,Kt),V=Math.imul(Ve,Je),V=V+Math.imul(dt,Kt)|0,K=Math.imul(dt,Je),$=$+Math.imul(qe,Et)|0,V=V+Math.imul(qe,rr)|0,V=V+Math.imul(Ue,Et)|0,K=K+Math.imul(Ue,rr)|0,$=$+Math.imul(_e,or)|0,V=V+Math.imul(_e,dr)|0,V=V+Math.imul(Ie,or)|0,K=K+Math.imul(Ie,dr)|0,$=$+Math.imul(Oe,kr)|0,V=V+Math.imul(Oe,tr)|0,V=V+Math.imul(He,kr)|0,K=K+Math.imul(He,tr)|0;var yr=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(yr>>>26)|0,yr&=67108863,$=Math.imul(Ve,Et),V=Math.imul(Ve,rr),V=V+Math.imul(dt,Et)|0,K=Math.imul(dt,rr),$=$+Math.imul(qe,or)|0,V=V+Math.imul(qe,dr)|0,V=V+Math.imul(Ue,or)|0,K=K+Math.imul(Ue,dr)|0,$=$+Math.imul(_e,kr)|0,V=V+Math.imul(_e,tr)|0,V=V+Math.imul(Ie,kr)|0,K=K+Math.imul(Ie,tr)|0;var Dr=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,$=Math.imul(Ve,or),V=Math.imul(Ve,dr),V=V+Math.imul(dt,or)|0,K=Math.imul(dt,dr),$=$+Math.imul(qe,kr)|0,V=V+Math.imul(qe,tr)|0,V=V+Math.imul(Ue,kr)|0,K=K+Math.imul(Ue,tr)|0;var tn=(q+$|0)+((V&8191)<<13)|0;q=(K+(V>>>13)|0)+(tn>>>26)|0,tn&=67108863,$=Math.imul(Ve,kr),V=Math.imul(Ve,tr),V=V+Math.imul(dt,kr)|0,K=Math.imul(dt,tr);var wr=(q+$|0)+((V&8191)<<13)|0;return q=(K+(V>>>13)|0)+(wr>>>26)|0,wr&=67108863,X[0]=Or,X[1]=et,X[2]=we,X[3]=Se,X[4]=De,X[5]=Xe,X[6]=$e,X[7]=ot,X[8]=st,X[9]=pt,X[10]=wt,X[11]=Yt,X[12]=mr,X[13]=xr,X[14]=Tr,X[15]=yr,X[16]=Dr,X[17]=tn,X[18]=wr,q!==0&&(X[19]=q,O.length++),O};Math.imul||(A=g);function m(I,R,D){D.negative=R.negative^I.negative,D.length=I.length+R.length;for(var O=0,F=0,Y=0;Y<D.length-1;Y++){var X=F;F=0;for(var q=O&67108863,$=Math.min(Y,R.length-1),V=Math.max(0,Y-I.length+1);V<=$;V++){var K=Y-V,se=I.words[K]|0,ue=R.words[V]|0,oe=se*ue,U=oe&67108863;X=X+(oe/67108864|0)|0,U=U+q|0,q=U&67108863,X=X+(U>>>26)|0,F+=X>>>26,X&=67108863}D.words[Y]=q,O=X,X=F}return O!==0?D.words[Y]=O:D.length--,D.strip()}function M(I,R,D){var O=new _;return O.mulp(I,R,D)}r.prototype.mulTo=function(R,D){var O,F=this.length+R.length;return this.length===10&&R.length===10?O=A(this,R,D):F<63?O=g(this,R,D):F<1024?O=m(this,R,D):O=M(this,R,D),O};function _(I,R){this.x=I,this.y=R}_.prototype.makeRBT=function(R){for(var D=new Array(R),O=r.prototype._countBits(R)-1,F=0;F<R;F++)D[F]=this.revBin(F,O,R);return D},_.prototype.revBin=function(R,D,O){if(R===0||R===O-1)return R;for(var F=0,Y=0;Y<D;Y++)F|=(R&1)<<D-Y-1,R>>=1;return F},_.prototype.permute=function(R,D,O,F,Y,X){for(var q=0;q<X;q++)F[q]=D[R[q]],Y[q]=O[R[q]]},_.prototype.transform=function(R,D,O,F,Y,X){this.permute(X,R,D,O,F,Y);for(var q=1;q<Y;q<<=1)for(var $=q<<1,V=Math.cos(2*Math.PI/$),K=Math.sin(2*Math.PI/$),se=0;se<Y;se+=$)for(var ue=V,oe=K,U=0;U<q;U++){var G=O[se+U],re=F[se+U],ee=O[se+U+q],j=F[se+U+q],Q=ue*ee-oe*j;j=ue*j+oe*ee,ee=Q,O[se+U]=G+ee,F[se+U]=re+j,O[se+U+q]=G-ee,F[se+U+q]=re-j,U!==$&&(Q=V*ue-K*oe,oe=V*oe+K*ue,ue=Q)}},_.prototype.guessLen13b=function(R,D){var O=Math.max(D,R)|1,F=O&1,Y=0;for(O=O/2|0;O;O=O>>>1)Y++;return 1<<Y+1+F},_.prototype.conjugate=function(R,D,O){if(!(O<=1))for(var F=0;F<O/2;F++){var Y=R[F];R[F]=R[O-F-1],R[O-F-1]=Y,Y=D[F],D[F]=-D[O-F-1],D[O-F-1]=-Y}},_.prototype.normalize13b=function(R,D){for(var O=0,F=0;F<D/2;F++){var Y=Math.round(R[2*F+1]/D)*8192+Math.round(R[2*F]/D)+O;R[F]=Y&67108863,Y<67108864?O=0:O=Y/67108864|0}return R},_.prototype.convert13b=function(R,D,O,F){for(var Y=0,X=0;X<D;X++)Y=Y+(R[X]|0),O[2*X]=Y&8191,Y=Y>>>13,O[2*X+1]=Y&8191,Y=Y>>>13;for(X=2*D;X<F;++X)O[X]=0;a(Y===0),a((Y&~8191)==0)},_.prototype.stub=function(R){for(var D=new Array(R),O=0;O<R;O++)D[O]=0;return D},_.prototype.mulp=function(R,D,O){var F=2*this.guessLen13b(R.length,D.length),Y=this.makeRBT(F),X=this.stub(F),q=new Array(F),$=new Array(F),V=new Array(F),K=new Array(F),se=new Array(F),ue=new Array(F),oe=O.words;oe.length=F,this.convert13b(R.words,R.length,q,F),this.convert13b(D.words,D.length,K,F),this.transform(q,X,$,V,F,Y),this.transform(K,X,se,ue,F,Y);for(var U=0;U<F;U++){var G=$[U]*se[U]-V[U]*ue[U];V[U]=$[U]*ue[U]+V[U]*se[U],$[U]=G}return this.conjugate($,V,F),this.transform($,V,oe,X,F,Y),this.conjugate(oe,X,F),this.normalize13b(oe,F),O.negative=R.negative^D.negative,O.length=R.length+D.length,O.strip()},r.prototype.mul=function(R){var D=new r(null);return D.words=new Array(this.length+R.length),this.mulTo(R,D)},r.prototype.mulf=function(R){var D=new r(null);return D.words=new Array(this.length+R.length),M(this,R,D)},r.prototype.imul=function(R){return this.clone().mulTo(R,this)},r.prototype.imuln=function(R){a(typeof R=="number"),a(R<67108864);for(var D=0,O=0;O<this.length;O++){var F=(this.words[O]|0)*R,Y=(F&67108863)+(D&67108863);D>>=26,D+=F/67108864|0,D+=Y>>>26,this.words[O]=Y&67108863}return D!==0&&(this.words[O]=D,this.length++),this},r.prototype.muln=function(R){return this.clone().imuln(R)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(R){var D=y(R);if(D.length===0)return new r(1);for(var O=this,F=0;F<D.length&&D[F]===0;F++,O=O.sqr());if(++F<D.length)for(var Y=O.sqr();F<D.length;F++,Y=Y.sqr())D[F]!==0&&(O=O.mul(Y));return O},r.prototype.iushln=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26,F=67108863>>>26-D<<26-D,Y;if(D!==0){var X=0;for(Y=0;Y<this.length;Y++){var q=this.words[Y]&F,$=(this.words[Y]|0)-q<<D;this.words[Y]=$|X,X=q>>>26-D}X&&(this.words[Y]=X,this.length++)}if(O!==0){for(Y=this.length-1;Y>=0;Y--)this.words[Y+O]=this.words[Y];for(Y=0;Y<O;Y++)this.words[Y]=0;this.length+=O}return this.strip()},r.prototype.ishln=function(R){return a(this.negative===0),this.iushln(R)},r.prototype.iushrn=function(R,D,O){a(typeof R=="number"&&R>=0);var F;D?F=(D-D%26)/26:F=0;var Y=R%26,X=Math.min((R-Y)/26,this.length),q=67108863^67108863>>>Y<<Y,$=O;if(F-=X,F=Math.max(0,F),$){for(var V=0;V<X;V++)$.words[V]=this.words[V];$.length=X}if(X!==0)if(this.length>X)for(this.length-=X,V=0;V<this.length;V++)this.words[V]=this.words[V+X];else this.words[0]=0,this.length=1;var K=0;for(V=this.length-1;V>=0&&(K!==0||V>=F);V--){var se=this.words[V]|0;this.words[V]=K<<26-Y|se>>>Y,K=se&q}return $&&K!==0&&($.words[$.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(R,D,O){return a(this.negative===0),this.iushrn(R,D,O)},r.prototype.shln=function(R){return this.clone().ishln(R)},r.prototype.ushln=function(R){return this.clone().iushln(R)},r.prototype.shrn=function(R){return this.clone().ishrn(R)},r.prototype.ushrn=function(R){return this.clone().iushrn(R)},r.prototype.testn=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26,F=1<<D;if(this.length<=O)return!1;var Y=this.words[O];return!!(Y&F)},r.prototype.imaskn=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(D!==0&&O++,this.length=Math.min(O,this.length),D!==0){var F=67108863^67108863>>>D<<D;this.words[this.length-1]&=F}return this.strip()},r.prototype.maskn=function(R){return this.clone().imaskn(R)},r.prototype.iaddn=function(R){return a(typeof R=="number"),a(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},r.prototype._iaddn=function(R){this.words[0]+=R;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},r.prototype.isubn=function(R){if(a(typeof R=="number"),a(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this.strip()},r.prototype.addn=function(R){return this.clone().iaddn(R)},r.prototype.subn=function(R){return this.clone().isubn(R)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(R,D,O){var F=R.length+O,Y;this._expand(F);var X,q=0;for(Y=0;Y<R.length;Y++){X=(this.words[Y+O]|0)+q;var $=(R.words[Y]|0)*D;X-=$&67108863,q=(X>>26)-($/67108864|0),this.words[Y+O]=X&67108863}for(;Y<this.length-O;Y++)X=(this.words[Y+O]|0)+q,q=X>>26,this.words[Y+O]=X&67108863;if(q===0)return this.strip();for(a(q===-1),q=0,Y=0;Y<this.length;Y++)X=-(this.words[Y]|0)+q,q=X>>26,this.words[Y]=X&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(R,D){var O=this.length-R.length,F=this.clone(),Y=R,X=Y.words[Y.length-1]|0,q=this._countBits(X);O=26-q,O!==0&&(Y=Y.ushln(O),F.iushln(O),X=Y.words[Y.length-1]|0);var $=F.length-Y.length,V;if(D!=="mod"){V=new r(null),V.length=$+1,V.words=new Array(V.length);for(var K=0;K<V.length;K++)V.words[K]=0}var se=F.clone()._ishlnsubmul(Y,1,$);se.negative===0&&(F=se,V&&(V.words[$]=1));for(var ue=$-1;ue>=0;ue--){var oe=(F.words[Y.length+ue]|0)*67108864+(F.words[Y.length+ue-1]|0);for(oe=Math.min(oe/X|0,67108863),F._ishlnsubmul(Y,oe,ue);F.negative!==0;)oe--,F.negative=0,F._ishlnsubmul(Y,1,ue),F.isZero()||(F.negative^=1);V&&(V.words[ue]=oe)}return V&&V.strip(),F.strip(),D!=="div"&&O!==0&&F.iushrn(O),{div:V||null,mod:F}},r.prototype.divmod=function(R,D,O){if(a(!R.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var F,Y,X;return this.negative!==0&&R.negative===0?(X=this.neg().divmod(R,D),D!=="mod"&&(F=X.div.neg()),D!=="div"&&(Y=X.mod.neg(),O&&Y.negative!==0&&Y.iadd(R)),{div:F,mod:Y}):this.negative===0&&R.negative!==0?(X=this.divmod(R.neg(),D),D!=="mod"&&(F=X.div.neg()),{div:F,mod:X.mod}):(this.negative&R.negative)!=0?(X=this.neg().divmod(R.neg(),D),D!=="div"&&(Y=X.mod.neg(),O&&Y.negative!==0&&Y.isub(R)),{div:X.div,mod:Y}):R.length>this.length||this.cmp(R)<0?{div:new r(0),mod:this}:R.length===1?D==="div"?{div:this.divn(R.words[0]),mod:null}:D==="mod"?{div:null,mod:new r(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new r(this.modn(R.words[0]))}:this._wordDiv(R,D)},r.prototype.div=function(R){return this.divmod(R,"div",!1).div},r.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},r.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},r.prototype.divRound=function(R){var D=this.divmod(R);if(D.mod.isZero())return D.div;var O=D.div.negative!==0?D.mod.isub(R):D.mod,F=R.ushrn(1),Y=R.andln(1),X=O.cmp(F);return X<0||Y===1&&X===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},r.prototype.modn=function(R){a(R<=67108863);for(var D=(1<<26)%R,O=0,F=this.length-1;F>=0;F--)O=(D*O+(this.words[F]|0))%R;return O},r.prototype.idivn=function(R){a(R<=67108863);for(var D=0,O=this.length-1;O>=0;O--){var F=(this.words[O]|0)+D*67108864;this.words[O]=F/R|0,D=F%R}return this.strip()},r.prototype.divn=function(R){return this.clone().idivn(R)},r.prototype.egcd=function(R){a(R.negative===0),a(!R.isZero());var D=this,O=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var F=new r(1),Y=new r(0),X=new r(0),q=new r(1),$=0;D.isEven()&&O.isEven();)D.iushrn(1),O.iushrn(1),++$;for(var V=O.clone(),K=D.clone();!D.isZero();){for(var se=0,ue=1;(D.words[0]&ue)==0&&se<26;++se,ue<<=1);if(se>0)for(D.iushrn(se);se-- >0;)(F.isOdd()||Y.isOdd())&&(F.iadd(V),Y.isub(K)),F.iushrn(1),Y.iushrn(1);for(var oe=0,U=1;(O.words[0]&U)==0&&oe<26;++oe,U<<=1);if(oe>0)for(O.iushrn(oe);oe-- >0;)(X.isOdd()||q.isOdd())&&(X.iadd(V),q.isub(K)),X.iushrn(1),q.iushrn(1);D.cmp(O)>=0?(D.isub(O),F.isub(X),Y.isub(q)):(O.isub(D),X.isub(F),q.isub(Y))}return{a:X,b:q,gcd:O.iushln($)}},r.prototype._invmp=function(R){a(R.negative===0),a(!R.isZero());var D=this,O=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var F=new r(1),Y=new r(0),X=O.clone();D.cmpn(1)>0&&O.cmpn(1)>0;){for(var q=0,$=1;(D.words[0]&$)==0&&q<26;++q,$<<=1);if(q>0)for(D.iushrn(q);q-- >0;)F.isOdd()&&F.iadd(X),F.iushrn(1);for(var V=0,K=1;(O.words[0]&K)==0&&V<26;++V,K<<=1);if(V>0)for(O.iushrn(V);V-- >0;)Y.isOdd()&&Y.iadd(X),Y.iushrn(1);D.cmp(O)>=0?(D.isub(O),F.isub(Y)):(O.isub(D),Y.isub(F))}var se;return D.cmpn(1)===0?se=F:se=Y,se.cmpn(0)<0&&se.iadd(R),se},r.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var D=this.clone(),O=R.clone();D.negative=0,O.negative=0;for(var F=0;D.isEven()&&O.isEven();F++)D.iushrn(1),O.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;O.isEven();)O.iushrn(1);var Y=D.cmp(O);if(Y<0){var X=D;D=O,O=X}else if(Y===0||O.cmpn(1)===0)break;D.isub(O)}while(!0);return O.iushln(F)},r.prototype.invm=function(R){return this.egcd(R).a.umod(R)},r.prototype.isEven=function(){return(this.words[0]&1)==0},r.prototype.isOdd=function(){return(this.words[0]&1)==1},r.prototype.andln=function(R){return this.words[0]&R},r.prototype.bincn=function(R){a(typeof R=="number");var D=R%26,O=(R-D)/26,F=1<<D;if(this.length<=O)return this._expand(O+1),this.words[O]|=F,this;for(var Y=F,X=O;Y!==0&&X<this.length;X++){var q=this.words[X]|0;q+=Y,Y=q>>>26,q&=67108863,this.words[X]=q}return Y!==0&&(this.words[X]=Y,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(R){var D=R<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;this.strip();var O;if(this.length>1)O=1;else{D&&(R=-R),a(R<=67108863,"Number is too big");var F=this.words[0]|0;O=F===R?0:F<R?-1:1}return this.negative!==0?-O|0:O},r.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var D=this.ucmp(R);return this.negative!==0?-D|0:D},r.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var D=0,O=this.length-1;O>=0;O--){var F=this.words[O]|0,Y=R.words[O]|0;if(F!==Y){F<Y?D=-1:F>Y&&(D=1);break}}return D},r.prototype.gtn=function(R){return this.cmpn(R)===1},r.prototype.gt=function(R){return this.cmp(R)===1},r.prototype.gten=function(R){return this.cmpn(R)>=0},r.prototype.gte=function(R){return this.cmp(R)>=0},r.prototype.ltn=function(R){return this.cmpn(R)===-1},r.prototype.lt=function(R){return this.cmp(R)===-1},r.prototype.lten=function(R){return this.cmpn(R)<=0},r.prototype.lte=function(R){return this.cmp(R)<=0},r.prototype.eqn=function(R){return this.cmpn(R)===0},r.prototype.eq=function(R){return this.cmp(R)===0},r.red=function(R){return new P(R)},r.prototype.toRed=function(R){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},r.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(R){return this.red=R,this},r.prototype.forceRed=function(R){return a(!this.red,"Already a number in reduction context"),this._forceRed(R)},r.prototype.redAdd=function(R){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},r.prototype.redIAdd=function(R){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},r.prototype.redSub=function(R){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},r.prototype.redISub=function(R){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},r.prototype.redShl=function(R){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},r.prototype.redMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},r.prototype.redIMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},r.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(R){return a(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var T={k256:null,p224:null,p192:null,p25519:null};function x(I,R){this.name=I,this.p=new r(R,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var R=new r(null);return R.words=new Array(Math.ceil(this.n/13)),R},x.prototype.ireduce=function(R){var D=R,O;do this.split(D,this.tmp),D=this.imulK(D),D=D.iadd(this.tmp),O=D.bitLength();while(O>this.n);var F=O<this.n?-1:D.ucmp(this.p);return F===0?(D.words[0]=0,D.length=1):F>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},x.prototype.split=function(R,D){R.iushrn(this.n,0,D)},x.prototype.imulK=function(R){return R.imul(this.k)};function c(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(c,x),c.prototype.split=function(R,D){for(var O=4194303,F=Math.min(R.length,9),Y=0;Y<F;Y++)D.words[Y]=R.words[Y];if(D.length=F,R.length<=9){R.words[0]=0,R.length=1;return}var X=R.words[9];for(D.words[D.length++]=X&O,Y=10;Y<R.length;Y++){var q=R.words[Y]|0;R.words[Y-10]=(q&O)<<4|X>>>22,X=q}X>>>=22,R.words[Y-10]=X,X===0&&R.length>10?R.length-=10:R.length-=9},c.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var D=0,O=0;O<R.length;O++){var F=R.words[O]|0;D+=F*977,R.words[O]=D&67108863,D=F*64+(D/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function L(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,x);function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(S,x);function k(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(k,x),k.prototype.imulK=function(R){for(var D=0,O=0;O<R.length;O++){var F=(R.words[O]|0)*19+D,Y=F&67108863;F>>>=26,R.words[O]=Y,D=F}return D!==0&&(R.words[R.length++]=D),R},r._prime=function(R){if(T[R])return T[R];var D;if(R==="k256")D=new c;else if(R==="p224")D=new L;else if(R==="p192")D=new S;else if(R==="p25519")D=new k;else throw new Error("Unknown prime "+R);return T[R]=D,D};function P(I){if(typeof I=="string"){var R=r._prime(I);this.m=R.p,this.prime=R}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(R){a(R.negative===0,"red works only with positives"),a(R.red,"red works only with red numbers")},P.prototype._verify2=function(R,D){a((R.negative|D.negative)==0,"red works only with positives"),a(R.red&&R.red===D.red,"red works only with red numbers")},P.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},P.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},P.prototype.add=function(R,D){this._verify2(R,D);var O=R.add(D);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(R,D){this._verify2(R,D);var O=R.iadd(D);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(R,D){this._verify2(R,D);var O=R.sub(D);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(R,D){this._verify2(R,D);var O=R.isub(D);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(R,D){return this._verify1(R),this.imod(R.ushln(D))},P.prototype.imul=function(R,D){return this._verify2(R,D),this.imod(R.imul(D))},P.prototype.mul=function(R,D){return this._verify2(R,D),this.imod(R.mul(D))},P.prototype.isqr=function(R){return this.imul(R,R.clone())},P.prototype.sqr=function(R){return this.mul(R,R)},P.prototype.sqrt=function(R){if(R.isZero())return R.clone();var D=this.m.andln(3);if(a(D%2==1),D===3){var O=this.m.add(new r(1)).iushrn(2);return this.pow(R,O)}for(var F=this.m.subn(1),Y=0;!F.isZero()&&F.andln(1)===0;)Y++,F.iushrn(1);a(!F.isZero());var X=new r(1).toRed(this),q=X.redNeg(),$=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new r(2*V*V).toRed(this);this.pow(V,$).cmp(q)!==0;)V.redIAdd(q);for(var K=this.pow(V,F),se=this.pow(R,F.addn(1).iushrn(1)),ue=this.pow(R,F),oe=Y;ue.cmp(X)!==0;){for(var U=ue,G=0;U.cmp(X)!==0;G++)U=U.redSqr();a(G<oe);var re=this.pow(K,new r(1).iushln(oe-G-1));se=se.redMul(re),K=re.redSqr(),ue=ue.redMul(K),oe=G}return se},P.prototype.invm=function(R){var D=R._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},P.prototype.pow=function(R,D){if(D.isZero())return new r(1).toRed(this);if(D.cmpn(1)===0)return R.clone();var O=4,F=new Array(1<<O);F[0]=new r(1).toRed(this),F[1]=R;for(var Y=2;Y<F.length;Y++)F[Y]=this.mul(F[Y-1],R);var X=F[0],q=0,$=0,V=D.bitLength()%26;for(V===0&&(V=26),Y=D.length-1;Y>=0;Y--){for(var K=D.words[Y],se=V-1;se>=0;se--){var ue=K>>se&1;if(X!==F[0]&&(X=this.sqr(X)),ue===0&&q===0){$=0;continue}q<<=1,q|=ue,$++,!($!==O&&(Y!==0||se!==0))&&(X=this.mul(X,F[q]),$=0,q=0)}V=26}return X},P.prototype.convertTo=function(R){var D=R.umod(this.m);return D===R?D.clone():D},P.prototype.convertFrom=function(R){var D=R.clone();return D.red=null,D},r.mont=function(R){return new z(R)};function z(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(z,P),z.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},z.prototype.convertFrom=function(R){var D=this.imod(R.mul(this.rinv));return D.red=null,D},z.prototype.imul=function(R,D){if(R.isZero()||D.isZero())return R.words[0]=0,R.length=1,R;var O=R.imul(D),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Y=O.isub(F).iushrn(this.shift),X=Y;return Y.cmp(this.m)>=0?X=Y.isub(this.m):Y.cmpn(0)<0&&(X=Y.iadd(this.m)),X._forceRed(this)},z.prototype.mul=function(R,D){if(R.isZero()||D.isZero())return new r(0)._forceRed(this);var O=R.mul(D),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Y=O.isub(F).iushrn(this.shift),X=Y;return Y.cmp(this.m)>=0?X=Y.isub(this.m):Y.cmpn(0)<0&&(X=Y.iadd(this.m)),X._forceRed(this)},z.prototype.invm=function(R){var D=this.imod(R._invmp(this.m).mul(this.r2));return D._forceRed(this)}})(typeof b=="undefined"||b,this)},{buffer:2}],34:[function(l,b,w){b.exports=e;function e(o){var a,n,r,u=o.length,s=0;for(a=0;a<u;++a)s+=o[a].length;var i=new Array(s),f=0;for(a=0;a<u;++a){var h=o[a],p=h.length;for(n=0;n<p;++n){var v=i[f++]=new Array(p-1),y=0;for(r=0;r<p;++r)r!==n&&(v[y++]=h[r]);if(n&1){var g=v[1];v[1]=v[0],v[0]=g}}}return i}},{}],35:[function(l,b,w){b.exports=p;var e=l("typedarray-pool"),o=l("./lib/sweep"),a=l("./lib/intersect");function n(v,y){for(var g=0;g<v;++g)if(!(y[g]<=y[g+v]))return!0;return!1}function r(v,y,g,A){for(var m=0,M=0,_=0,T=v.length;_<T;++_){var x=v[_];if(!n(y,x)){for(var c=0;c<2*y;++c)g[m++]=x[c];A[M++]=_}}return M}function u(v,y,g,A){var m=v.length,M=y.length;if(!(m<=0||M<=0)){var _=v[0].length>>>1;if(!(_<=0)){var T,x=e.mallocDouble(2*_*m),c=e.mallocInt32(m);if(m=r(v,_,x,c),m>0){if(_===1&&A)o.init(m),T=o.sweepComplete(_,g,0,m,x,c,0,m,x,c);else{var L=e.mallocDouble(2*_*M),S=e.mallocInt32(M);M=r(y,_,L,S),M>0&&(o.init(m+M),_===1?T=o.sweepBipartite(_,g,0,m,x,c,0,M,L,S):T=a(_,g,A,m,x,c,M,L,S),e.free(L),e.free(S))}e.free(x),e.free(c)}return T}}}var s;function i(v,y){s.push([v,y])}function f(v){return s=[],u(v,v,i,!0),s}function h(v,y){return s=[],u(v,y,i,!1),s}function p(v,y,g){switch(arguments.length){case 1:return f(v);case 2:return typeof y=="function"?u(v,v,y,!0):h(v,y);case 3:return u(v,y,g,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(l,b,w){function e(){function n(s,i,f,h,p,v,y,g,A,m,M){for(var _=2*s,T=h,x=_*h;T<p;++T,x+=_){var c=v[i+x],L=v[i+x+s],S=y[T];e:for(var k=g,P=_*g;k<A;++k,P+=_){var z=m[i+P],I=m[i+P+s],R=M[k];if(!(I<c||L<z)){for(var D=i+1;D<s;++D){var O=v[D+x],F=v[D+s+x],Y=m[D+P],X=m[D+s+P];if(F<Y||X<O)continue e}var q=f(S,R);if(q!==void 0)return q}}}}function r(s,i,f,h,p,v,y,g,A,m,M){for(var _=2*s,T=g,x=_*g;T<A;++T,x+=_){var c=m[i+x],L=m[i+x+s],S=M[T];e:for(var k=h,P=_*h;k<p;++k,P+=_){var z=v[i+P],I=v[i+P+s],R=y[k];if(!(L<z||I<c)){for(var D=i+1;D<s;++D){var O=v[D+P],F=v[D+s+P],Y=m[D+x],X=m[D+s+x];if(F<Y||X<O)continue e}var q=f(R,S);if(q!==void 0)return q}}}}function u(s,i,f,h,p,v,y,g,A,m,M){return p-h>A-g?n(s,i,f,h,p,v,y,g,A,m,M):r(s,i,f,h,p,v,y,g,A,m,M)}return u}function o(){function n(f,h,p,v,y,g,A,m,M,_,T){for(var x=2*f,c=v,L=x*v;c<y;++c,L+=x){var S=g[h+L],k=g[h+L+f],P=A[c];e:for(var z=m,I=x*m;z<M;++z,I+=x){var R=_[h+I],D=T[z];if(!(R<=S||k<R)){for(var O=h+1;O<f;++O){var F=g[O+L],Y=g[O+f+L],X=_[O+I],q=_[O+f+I];if(Y<X||q<F)continue e}var $=p(D,P);if($!==void 0)return $}}}}function r(f,h,p,v,y,g,A,m,M,_,T){for(var x=2*f,c=v,L=x*v;c<y;++c,L+=x){var S=g[h+L],k=g[h+L+f],P=A[c];e:for(var z=m,I=x*m;z<M;++z,I+=x){var R=_[h+I],D=T[z];if(!(R<S||k<R)){for(var O=h+1;O<f;++O){var F=g[O+L],Y=g[O+f+L],X=_[O+I],q=_[O+f+I];if(Y<X||q<F)continue e}var $=p(P,D);if($!==void 0)return $}}}}function u(f,h,p,v,y,g,A,m,M,_,T){for(var x=2*f,c=m,L=x*m;c<M;++c,L+=x){var S=_[h+L],k=T[c];e:for(var P=v,z=x*v;P<y;++P,z+=x){var I=g[h+z],R=g[h+z+f],D=A[P];if(!(S<=I||R<S)){for(var O=h+1;O<f;++O){var F=g[O+z],Y=g[O+f+z],X=_[O+L],q=_[O+f+L];if(Y<X||q<F)continue e}var $=p(k,D);if($!==void 0)return $}}}}function s(f,h,p,v,y,g,A,m,M,_,T){for(var x=2*f,c=m,L=x*m;c<M;++c,L+=x){var S=_[h+L],k=T[c];e:for(var P=v,z=x*v;P<y;++P,z+=x){var I=g[h+z],R=g[h+z+f],D=A[P];if(!(S<I||R<S)){for(var O=h+1;O<f;++O){var F=g[O+z],Y=g[O+f+z],X=_[O+L],q=_[O+f+L];if(Y<X||q<F)continue e}var $=p(D,k);if($!==void 0)return $}}}}function i(f,h,p,v,y,g,A,m,M,_,T,x){return g-y>_-M?v?n(f,h,p,y,g,A,m,M,_,T,x):r(f,h,p,y,g,A,m,M,_,T,x):v?u(f,h,p,y,g,A,m,M,_,T,x):s(f,h,p,y,g,A,m,M,_,T,x)}return i}function a(n){return n?e():o()}w.partial=a(!1),w.full=a(!0)},{}],37:[function(l,b,w){b.exports=I;var e=l("typedarray-pool"),o=l("bit-twiddle"),a=l("./brute"),n=a.partial,r=a.full,u=l("./sweep"),s=l("./median"),i=l("./partition"),f=128,h=1<<22,p=1<<22,v=i("!(lo>=p0)&&!(p1>=hi)"),y=i("lo===p0"),g=i("lo<p0"),A=i("hi<=p0"),m=i("lo<=p0&&p0<=hi"),M=i("lo<p0&&p0<=hi"),_=6,T=2,x=1024,c=e.mallocInt32(x),L=e.mallocDouble(x);function S(R,D){var O=8*o.log2(D+1)*(R+1)|0,F=o.nextPow2(_*O);c.length<F&&(e.free(c),c=e.mallocInt32(F));var Y=o.nextPow2(T*O);L.length<Y&&(e.free(L),L=e.mallocDouble(Y))}function k(R,D,O,F,Y,X,q,$,V){var K=_*R;c[K]=D,c[K+1]=O,c[K+2]=F,c[K+3]=Y,c[K+4]=X,c[K+5]=q;var se=T*R;L[se]=$,L[se+1]=V}function P(R,D,O,F,Y,X,q,$,V,K,se){var ue=2*R,oe=V*ue,U=K[oe+D];e:for(var G=Y,re=Y*ue;G<X;++G,re+=ue){var ee=q[re+D],j=q[re+D+R];if(!(U<ee||j<U)&&!(F&&U===ee)){for(var Q=$[G],ne=D+1;ne<R;++ne){var ee=q[re+ne],j=q[re+ne+R],ae=K[oe+ne],ie=K[oe+ne+R];if(j<ae||ie<ee)continue e}var fe;if(F?fe=O(se,Q):fe=O(Q,se),fe!==void 0)return fe}}}function z(R,D,O,F,Y,X,q,$,V,K){var se=2*R,ue=$*se,oe=V[ue+D];e:for(var U=F,G=F*se;U<Y;++U,G+=se){var re=q[U];if(re!==K){var ee=X[G+D],j=X[G+D+R];if(!(oe<ee||j<oe)){for(var Q=D+1;Q<R;++Q){var ee=X[G+Q],j=X[G+Q+R],ne=V[ue+Q],ae=V[ue+Q+R];if(j<ne||ae<ee)continue e}var ie=O(re,K);if(ie!==void 0)return ie}}}}function I(R,D,O,F,Y,X,q,$,V){S(R,F+q);var K=0,se=2*R,ue;for(k(K++,0,0,F,0,q,O?16:0,-1/0,1/0),O||k(K++,0,0,q,0,F,1,-1/0,1/0);K>0;){K-=1;var oe=K*_,U=c[oe],G=c[oe+1],re=c[oe+2],ee=c[oe+3],j=c[oe+4],Q=c[oe+5],ne=K*T,ae=L[ne],ie=L[ne+1],fe=Q&1,me=!!(Q&16),ce=Y,ye=X,xe=$,ke=V;if(fe&&(ce=$,ye=V,xe=Y,ke=X),!(Q&2&&(re=g(R,U,G,re,ce,ye,ie),G>=re))&&!(Q&4&&(G=A(R,U,G,re,ce,ye,ae),G>=re))){var Ae=re-G,Oe=j-ee;if(me){if(R*Ae*(Ae+Oe)<p){if(ue=u.scanComplete(R,U,D,G,re,ce,ye,ee,j,xe,ke),ue!==void 0)return ue;continue}}else if(R*Math.min(Ae,Oe)<f){if(ue=n(R,U,D,fe,G,re,ce,ye,ee,j,xe,ke),ue!==void 0)return ue;continue}else if(R*Ae*Oe<h){if(ue=u.scanBipartite(R,U,D,fe,G,re,ce,ye,ee,j,xe,ke),ue!==void 0)return ue;continue}var He=v(R,U,G,re,ce,ye,ae,ie);if(G<He)if(R*(He-G)<f){if(ue=r(R,U+1,D,G,He,ce,ye,ee,j,xe,ke),ue!==void 0)return ue}else if(U===R-2){if(fe?ue=u.sweepBipartite(R,D,ee,j,xe,ke,G,He,ce,ye):ue=u.sweepBipartite(R,D,G,He,ce,ye,ee,j,xe,ke),ue!==void 0)return ue}else k(K++,U+1,G,He,ee,j,fe,-1/0,1/0),k(K++,U+1,ee,j,G,He,fe^1,-1/0,1/0);if(He<re){var Ge=s(R,U,ee,j,xe,ke),_e=xe[se*Ge+U],Ie=y(R,U,Ge,j,xe,ke,_e);if(Ie<j&&k(K++,U,He,re,Ie,j,(fe|4)+(me?16:0),_e,ie),ee<Ge&&k(K++,U,He,re,ee,Ge,(fe|2)+(me?16:0),ae,_e),Ge+1===Ie){if(me?ue=z(R,U,D,He,re,ce,ye,Ge,xe,ke[Ge]):ue=P(R,U,D,fe,He,re,ce,ye,Ge,xe,ke[Ge]),ue!==void 0)return ue}else if(Ge<Ie){var Ye;if(me){if(Ye=m(R,U,He,re,ce,ye,_e),He<Ye){var qe=y(R,U,He,Ye,ce,ye,_e);if(U===R-2){if(He<qe&&(ue=u.sweepComplete(R,D,He,qe,ce,ye,Ge,Ie,xe,ke),ue!==void 0)||qe<Ye&&(ue=u.sweepBipartite(R,D,qe,Ye,ce,ye,Ge,Ie,xe,ke),ue!==void 0))return ue}else He<qe&&k(K++,U+1,He,qe,Ge,Ie,16,-1/0,1/0),qe<Ye&&(k(K++,U+1,qe,Ye,Ge,Ie,0,-1/0,1/0),k(K++,U+1,Ge,Ie,qe,Ye,1,-1/0,1/0))}}else fe?Ye=M(R,U,He,re,ce,ye,_e):Ye=m(R,U,He,re,ce,ye,_e),He<Ye&&(U===R-2?fe?ue=u.sweepBipartite(R,D,Ge,Ie,xe,ke,He,Ye,ce,ye):ue=u.sweepBipartite(R,D,He,Ye,ce,ye,Ge,Ie,xe,ke):(k(K++,U+1,He,Ye,Ge,Ie,fe,-1/0,1/0),k(K++,U+1,Ge,Ie,He,Ye,fe^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(l,b,w){b.exports=r;var e=l("./partition"),o=e("lo<p0"),a=8;function n(u,s,i,f,h,p){for(var v=2*u,y=v*(i+1)+s,g=i+1;g<f;++g,y+=v)for(var A=h[y],m=g,M=v*(g-1);m>i&&h[M+s]>A;--m,M-=v){for(var _=M,T=M+v,x=0;x<v;++x,++_,++T){var c=h[_];h[_]=h[T],h[T]=c}var L=p[m];p[m]=p[m-1],p[m-1]=L}}function r(u,s,i,f,h,p){if(f<=i+1)return i;for(var v=i,y=f,g=f+i>>>1,A=2*u,m=g,M=h[A*g+s];v<y;){if(y-v<a){n(u,s,v,y,h,p),M=h[A*g+s];break}var _=y-v,T=Math.random()*_+v|0,x=h[A*T+s],c=Math.random()*_+v|0,L=h[A*c+s],S=Math.random()*_+v|0,k=h[A*S+s];x<=L?k>=L?(m=c,M=L):x>=k?(m=T,M=x):(m=S,M=k):L>=k?(m=c,M=L):k>=x?(m=T,M=x):(m=S,M=k);for(var P=A*(y-1),z=A*m,I=0;I<A;++I,++P,++z){var R=h[P];h[P]=h[z],h[z]=R}var D=p[y-1];p[y-1]=p[m],p[m]=D,m=o(u,s,v,y-1,h,p,M);for(var P=A*(y-1),z=A*m,I=0;I<A;++I,++P,++z){var R=h[P];h[P]=h[z],h[z]=R}var D=p[y-1];if(p[y-1]=p[m],p[m]=D,g<m){for(y=m-1;v<y&&h[A*(y-1)+s]===M;)y-=1;y+=1}else if(m<g)for(v=m+1;v<y&&h[A*v+s]===M;)v+=1;else break}return o(u,s,i,g,h,p,h[A*g+s])}},{"./partition":39}],39:[function(l,b,w){b.exports=o;var e={"lo===p0":a,"lo<p0":n,"lo<=p0":r,"hi<=p0":u,"lo<p0&&p0<=hi":i,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":f};function o(h){return e[h]}function a(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=p,L=v;y>L;++L,_+=M){var S=g[_+c];if(S===m)if(x===L)x+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var z=A[L];A[L]=A[x],A[x++]=z}}return x}function n(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=p,L=v;y>L;++L,_+=M){var S=g[_+c];if(S<m)if(x===L)x+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var z=A[L];A[L]=A[x],A[x++]=z}}return x}function r(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=h+p,L=v;y>L;++L,_+=M){var S=g[_+c];if(S<=m)if(x===L)x+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var z=A[L];A[L]=A[x],A[x++]=z}}return x}function u(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=h+p,L=v;y>L;++L,_+=M){var S=g[_+c];if(S<=m)if(x===L)x+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var z=A[L];A[L]=A[x],A[x++]=z}}return x}function s(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=p,L=h+p,S=v;y>S;++S,_+=M){var k=g[_+c],P=g[_+L];if(k<=m&&m<=P)if(x===S)x+=1,T+=M;else{for(var z=0;M>z;++z){var I=g[_+z];g[_+z]=g[T],g[T++]=I}var R=A[S];A[S]=A[x],A[x++]=R}}return x}function i(h,p,v,y,g,A,m){for(var M=2*h,_=M*v,T=_,x=v,c=p,L=h+p,S=v;y>S;++S,_+=M){var k=g[_+c],P=g[_+L];if(k<m&&m<=P)if(x===S)x+=1,T+=M;else{for(var z=0;M>z;++z){var I=g[_+z];g[_+z]=g[T],g[T++]=I}var R=A[S];A[S]=A[x],A[x++]=R}}return x}function f(h,p,v,y,g,A,m,M){for(var _=2*h,T=_*v,x=T,c=v,L=p,S=h+p,k=v;y>k;++k,T+=_){var P=g[T+L],z=g[T+S];if(!(P>=m)&&!(M>=z))if(c===k)c+=1,x+=_;else{for(var I=0;_>I;++I){var R=g[T+I];g[T+I]=g[x],g[x++]=R}var D=A[k];A[k]=A[c],A[c++]=D}}return c}},{}],40:[function(l,b,w){b.exports=o;var e=32;function o(p,v){v<=4*e?a(0,v-1,p):h(0,v-1,p)}function a(p,v,y){for(var g=2*(p+1),A=p+1;A<=v;++A){for(var m=y[g++],M=y[g++],_=A,T=g-2;_-- >p;){var x=y[T-2],c=y[T-1];if(x<m)break;if(x===m&&c<M)break;y[T]=x,y[T+1]=c,T-=2}y[T]=m,y[T+1]=M}}function n(p,v,y){p*=2,v*=2;var g=y[p],A=y[p+1];y[p]=y[v],y[p+1]=y[v+1],y[v]=g,y[v+1]=A}function r(p,v,y){p*=2,v*=2,y[p]=y[v],y[p+1]=y[v+1]}function u(p,v,y,g){p*=2,v*=2,y*=2;var A=g[p],m=g[p+1];g[p]=g[v],g[p+1]=g[v+1],g[v]=g[y],g[v+1]=g[y+1],g[y]=A,g[y+1]=m}function s(p,v,y,g,A){p*=2,v*=2,A[p]=A[v],A[v]=y,A[p+1]=A[v+1],A[v+1]=g}function i(p,v,y){p*=2,v*=2;var g=y[p],A=y[v];return g<A?!1:g===A?y[p+1]>y[v+1]:!0}function f(p,v,y,g){p*=2;var A=g[p];return A<v?!0:A===v?g[p+1]<y:!1}function h(p,v,y){var g=(v-p+1)/6|0,A=p+g,m=v-g,M=p+v>>1,_=M-g,T=M+g,x=A,c=_,L=M,S=T,k=m,P=p+1,z=v-1,I=0;i(x,c,y)&&(I=x,x=c,c=I),i(S,k,y)&&(I=S,S=k,k=I),i(x,L,y)&&(I=x,x=L,L=I),i(c,L,y)&&(I=c,c=L,L=I),i(x,S,y)&&(I=x,x=S,S=I),i(L,S,y)&&(I=L,L=S,S=I),i(c,k,y)&&(I=c,c=k,k=I),i(c,L,y)&&(I=c,c=L,L=I),i(S,k,y)&&(I=S,S=k,k=I);for(var R=y[2*c],D=y[2*c+1],O=y[2*S],F=y[2*S+1],Y=2*x,X=2*L,q=2*k,$=2*A,V=2*M,K=2*m,se=0;se<2;++se){var ue=y[Y+se],oe=y[X+se],U=y[q+se];y[$+se]=ue,y[V+se]=oe,y[K+se]=U}r(_,p,y),r(T,v,y);for(var G=P;G<=z;++G)if(f(G,R,D,y))G!==P&&n(G,P,y),++P;else if(!f(G,O,F,y))for(;;)if(f(z,O,F,y)){f(z,R,D,y)?(u(G,P,z,y),++P,--z):(n(G,z,y),--z);break}else{if(--z<G)break;continue}s(p,P-1,R,D,y),s(v,z+1,O,F,y),P-2-p<=e?a(p,P-2,y):h(p,P-2,y),v-(z+2)<=e?a(z+2,v,y):h(z+2,v,y),z-P<=e?a(P,z,y):h(P,z,y)}},{}],41:[function(l,b,w){b.exports={init:y,sweepBipartite:m,sweepComplete:M,scanBipartite:_,scanComplete:T};var e=l("typedarray-pool"),o=l("bit-twiddle"),a=l("./sort"),n=1<<28,r=1024,u=e.mallocInt32(r),s=e.mallocInt32(r),i=e.mallocInt32(r),f=e.mallocInt32(r),h=e.mallocInt32(r),p=e.mallocInt32(r),v=e.mallocDouble(r*8);function y(x){var c=o.nextPow2(x);u.length<c&&(e.free(u),u=e.mallocInt32(c)),s.length<c&&(e.free(s),s=e.mallocInt32(c)),i.length<c&&(e.free(i),i=e.mallocInt32(c)),f.length<c&&(e.free(f),f=e.mallocInt32(c)),h.length<c&&(e.free(h),h=e.mallocInt32(c)),p.length<c&&(e.free(p),p=e.mallocInt32(c));var L=8*c;v.length<L&&(e.free(v),v=e.mallocDouble(L))}function g(x,c,L,S){var k=c[S],P=x[L-1];x[k]=P,c[P]=k}function A(x,c,L,S){x[L]=S,c[S]=L}function m(x,c,L,S,k,P,z,I,R,D){for(var O=0,F=2*x,Y=x-1,X=F-1,q=L;q<S;++q){var $=P[q],V=F*q;v[O++]=k[V+Y],v[O++]=-($+1),v[O++]=k[V+X],v[O++]=$}for(var q=z;q<I;++q){var $=D[q]+n,K=F*q;v[O++]=R[K+Y],v[O++]=-$,v[O++]=R[K+X],v[O++]=$}var se=O>>>1;a(v,se);for(var ue=0,oe=0,q=0;q<se;++q){var U=v[2*q+1]|0;if(U>=n)U=U-n|0,g(i,f,oe--,U);else if(U>=0)g(u,s,ue--,U);else if(U<=-n){U=-U-n|0;for(var G=0;G<ue;++G){var re=c(u[G],U);if(re!==void 0)return re}A(i,f,oe++,U)}else{U=-U-1|0;for(var G=0;G<oe;++G){var re=c(U,i[G]);if(re!==void 0)return re}A(u,s,ue++,U)}}}function M(x,c,L,S,k,P,z,I,R,D){for(var O=0,F=2*x,Y=x-1,X=F-1,q=L;q<S;++q){var $=P[q]+1<<1,V=F*q;v[O++]=k[V+Y],v[O++]=-$,v[O++]=k[V+X],v[O++]=$}for(var q=z;q<I;++q){var $=D[q]+1<<1,K=F*q;v[O++]=R[K+Y],v[O++]=-$|1,v[O++]=R[K+X],v[O++]=$|1}var se=O>>>1;a(v,se);for(var ue=0,oe=0,U=0,q=0;q<se;++q){var G=v[2*q+1]|0,re=G&1;if(q<se-1&&G>>1==v[2*q+3]>>1&&(re=2,q+=1),G<0){for(var ee=-(G>>1)-1,j=0;j<U;++j){var Q=c(h[j],ee);if(Q!==void 0)return Q}if(re!==0)for(var j=0;j<ue;++j){var Q=c(u[j],ee);if(Q!==void 0)return Q}if(re!==1)for(var j=0;j<oe;++j){var Q=c(i[j],ee);if(Q!==void 0)return Q}re===0?A(u,s,ue++,ee):re===1?A(i,f,oe++,ee):re===2&&A(h,p,U++,ee)}else{var ee=(G>>1)-1;re===0?g(u,s,ue--,ee):re===1?g(i,f,oe--,ee):re===2&&g(h,p,U--,ee)}}}function _(x,c,L,S,k,P,z,I,R,D,O,F){var Y=0,X=2*x,q=c,$=c+x,V=1,K=1;S?K=n:V=n;for(var se=k;se<P;++se){var ue=se+V,oe=X*se;v[Y++]=z[oe+q],v[Y++]=-ue,v[Y++]=z[oe+$],v[Y++]=ue}for(var se=R;se<D;++se){var ue=se+K,U=X*se;v[Y++]=O[U+q],v[Y++]=-ue}var G=Y>>>1;a(v,G);for(var re=0,se=0;se<G;++se){var ee=v[2*se+1]|0;if(ee<0){var ue=-ee,j=!1;if(ue>=n?(j=!S,ue-=n):(j=!!S,ue-=1),j)A(u,s,re++,ue);else{var Q=F[ue],ne=X*ue,ae=O[ne+c+1],ie=O[ne+c+1+x];e:for(var fe=0;fe<re;++fe){var me=u[fe],ce=X*me;if(!(ie<z[ce+c+1]||z[ce+c+1+x]<ae)){for(var ye=c+2;ye<x;++ye)if(O[ne+ye+x]<z[ce+ye]||z[ce+ye+x]<O[ne+ye])continue e;var xe=I[me],ke;if(S?ke=L(Q,xe):ke=L(xe,Q),ke!==void 0)return ke}}}}else g(u,s,re--,ee-V)}}function T(x,c,L,S,k,P,z,I,R,D,O){for(var F=0,Y=2*x,X=c,q=c+x,$=S;$<k;++$){var V=$+n,K=Y*$;v[F++]=P[K+X],v[F++]=-V,v[F++]=P[K+q],v[F++]=V}for(var $=I;$<R;++$){var V=$+1,se=Y*$;v[F++]=D[se+X],v[F++]=-V}var ue=F>>>1;a(v,ue);for(var oe=0,$=0;$<ue;++$){var U=v[2*$+1]|0;if(U<0){var V=-U;if(V>=n)u[oe++]=V-n;else{V-=1;var G=O[V],re=Y*V,ee=D[re+c+1],j=D[re+c+1+x];e:for(var Q=0;Q<oe;++Q){var ne=u[Q],ae=z[ne];if(ae===G)break;var ie=Y*ne;if(!(j<P[ie+c+1]||P[ie+c+1+x]<ee)){for(var fe=c+2;fe<x;++fe)if(D[re+fe+x]<P[ie+fe]||P[ie+fe+x]<D[re+fe])continue e;var me=L(ae,G);if(me!==void 0)return me}}}}else{for(var V=U-n,Q=oe-1;Q>=0;--Q)if(u[Q]===V){for(var fe=Q+1;fe<oe;++fe)u[fe-1]=u[fe];break}--oe}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(l,b,w){var e=l("./lib/monotone"),o=l("./lib/triangulation"),a=l("./lib/delaunay"),n=l("./lib/filter");b.exports=f;function r(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function u(h,p){return h[0]-p[0]||h[1]-p[1]}function s(h){return h.map(r).sort(u)}function i(h,p,v){return p in h?h[p]:v}function f(h,p,v){Array.isArray(p)?(v=v||{},p=p||[]):(v=p||{},p=[]);var y=!!i(v,"delaunay",!0),g=!!i(v,"interior",!0),A=!!i(v,"exterior",!0),m=!!i(v,"infinity",!1);if(!g&&!A||h.length===0)return[];var M=e(h,p);if(y||g!==A||m){for(var _=o(h.length,s(p)),T=0;T<M.length;++T){var x=M[T];_.addTriangle(x[0],x[1],x[2])}return y&&a(h,_),A?g?m?n(_,0,m):_.cells():n(_,1,m):n(_,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(l,b,w){var e=l("robust-in-sphere")[4];l("binary-search-bounds"),b.exports=a;function o(n,r,u,s,i,f){var h=r.opposite(s,i);if(!(h<0)){if(i<s){var p=s;s=i,i=p,p=f,f=h,h=p}r.isConstraint(s,i)||e(n[s],n[i],n[f],n[h])<0&&u.push(s,i)}}function a(n,r){for(var u=[],s=n.length,i=r.stars,f=0;f<s;++f)for(var h=i[f],p=1;p<h.length;p+=2){var v=h[p];if(!(v<f)&&!r.isConstraint(f,v)){for(var y=h[p-1],g=-1,A=1;A<h.length;A+=2)if(h[A-1]===v){g=h[A];break}g<0||e(n[f],n[v],n[y],n[g])<0&&u.push(f,v)}}for(;u.length>0;){for(var v=u.pop(),f=u.pop(),y=-1,g=-1,h=i[f],m=1;m<h.length;m+=2){var M=h[m-1],_=h[m];M===v?g=_:_===v&&(y=M)}y<0||g<0||e(n[f],n[v],n[y],n[g])>=0||(r.flip(f,v),o(n,r,u,y,f,g),o(n,r,u,f,g,y),o(n,r,u,g,v,y),o(n,r,u,v,y,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(l,b,w){var e=l("binary-search-bounds");b.exports=s;function o(i,f,h,p,v,y,g){this.cells=i,this.neighbor=f,this.flags=p,this.constraint=h,this.active=v,this.next=y,this.boundary=g}var a=o.prototype;function n(i,f){return i[0]-f[0]||i[1]-f[1]||i[2]-f[2]}a.locate=function(){var i=[0,0,0];return function(f,h,p){var v=f,y=h,g=p;return h<p?h<f&&(v=h,y=p,g=f):p<f&&(v=p,y=f,g=h),v<0?-1:(i[0]=v,i[1]=y,i[2]=g,e.eq(this.cells,i,n))}}();function r(i,f){for(var h=i.cells(),p=h.length,v=0;v<p;++v){var y=h[v],g=y[0],A=y[1],m=y[2];A<m?A<g&&(y[0]=A,y[1]=m,y[2]=g):m<g&&(y[0]=m,y[1]=g,y[2]=A)}h.sort(n);for(var M=new Array(p),v=0;v<M.length;++v)M[v]=0;var _=[],T=[],x=new Array(3*p),c=new Array(3*p),L=null;f&&(L=[]);for(var S=new o(h,x,c,M,_,T,L),v=0;v<p;++v)for(var y=h[v],k=0;k<3;++k){var g=y[k],A=y[(k+1)%3],P=x[3*v+k]=S.locate(A,g,i.opposite(A,g)),z=c[3*v+k]=i.isConstraint(g,A);P<0&&(z?T.push(v):(_.push(v),M[v]=1),f&&L.push([A,g,-1]))}return S}function u(i,f,h){for(var p=0,v=0;v<i.length;++v)f[v]===h&&(i[p++]=i[v]);return i.length=p,i}function s(i,f,h){var p=r(i,h);if(f===0)return h?p.cells.concat(p.boundary):p.cells;for(var v=1,y=p.active,g=p.next,A=p.flags,m=p.cells,M=p.constraint,_=p.neighbor;y.length>0||g.length>0;){for(;y.length>0;){var T=y.pop();if(A[T]!==-v){A[T]=v,m[T];for(var x=0;x<3;++x){var c=_[3*T+x];c>=0&&A[c]===0&&(M[3*T+x]?g.push(c):(y.push(c),A[c]=v))}}}var L=g;g=y,y=L,g.length=0,v=-v}var S=u(m,A,f);return h?S.concat(p.boundary):S}},{"binary-search-bounds":31}],45:[function(l,b,w){var e=l("binary-search-bounds"),o=l("robust-orientation")[3],a=0,n=1,r=2;b.exports=g;function u(A,m,M,_,T){this.a=A,this.b=m,this.idx=M,this.lowerIds=_,this.upperIds=T}function s(A,m,M,_){this.a=A,this.b=m,this.type=M,this.idx=_}function i(A,m){var M=A.a[0]-m.a[0]||A.a[1]-m.a[1]||A.type-m.type;return M||A.type!==a&&(M=o(A.a,A.b,m.b),M)?M:A.idx-m.idx}function f(A,m){return o(A.a,A.b,m)}function h(A,m,M,_,T){for(var x=e.lt(m,_,f),c=e.gt(m,_,f),L=x;L<c;++L){for(var S=m[L],k=S.lowerIds,P=k.length;P>1&&o(M[k[P-2]],M[k[P-1]],_)>0;)A.push([k[P-1],k[P-2],T]),P-=1;k.length=P,k.push(T);for(var z=S.upperIds,P=z.length;P>1&&o(M[z[P-2]],M[z[P-1]],_)<0;)A.push([z[P-2],z[P-1],T]),P-=1;z.length=P,z.push(T)}}function p(A,m){var M;return A.a[0]<m.a[0]?M=o(A.a,A.b,m.a):M=o(m.b,m.a,A.a),M||(m.b[0]<A.b[0]?M=o(A.a,A.b,m.b):M=o(m.b,m.a,A.b),M||A.idx-m.idx)}function v(A,m,M){var _=e.le(A,M,p),T=A[_],x=T.upperIds,c=x[x.length-1];T.upperIds=[c],A.splice(_+1,0,new u(M.a,M.b,M.idx,[c],x))}function y(A,m,M){var _=M.a;M.a=M.b,M.b=_;var T=e.eq(A,M,p),x=A[T],c=A[T-1];c.upperIds=x.upperIds,A.splice(T,1)}function g(A,m){for(var M=A.length,_=m.length,T=[],x=0;x<M;++x)T.push(new s(A[x],null,a,x));for(var x=0;x<_;++x){var c=m[x],L=A[c[0]],S=A[c[1]];L[0]<S[0]?T.push(new s(L,S,r,x),new s(S,L,n,x)):L[0]>S[0]&&T.push(new s(S,L,r,x),new s(L,S,n,x))}T.sort(i);for(var k=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),P=[new u([k,1],[k,0],-1,[],[],[],[])],z=[],x=0,I=T.length;x<I;++x){var R=T[x],D=R.type;D===a?h(z,P,A,R.a,R.idx):D===r?v(P,A,R):y(P,A,R)}return z}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(l,b,w){var e=l("binary-search-bounds");b.exports=r;function o(u,s){this.stars=u,this.edges=s}var a=o.prototype;function n(u,s,i){for(var f=1,h=u.length;f<h;f+=2)if(u[f-1]===s&&u[f]===i){u[f-1]=u[h-2],u[f]=u[h-1],u.length=h-2;return}}a.isConstraint=function(){var u=[0,0];function s(i,f){return i[0]-f[0]||i[1]-f[1]}return function(i,f){return u[0]=Math.min(i,f),u[1]=Math.max(i,f),e.eq(this.edges,u,s)>=0}}(),a.removeTriangle=function(u,s,i){var f=this.stars;n(f[u],s,i),n(f[s],i,u),n(f[i],u,s)},a.addTriangle=function(u,s,i){var f=this.stars;f[u].push(s,i),f[s].push(i,u),f[i].push(u,s)},a.opposite=function(u,s){for(var i=this.stars[s],f=1,h=i.length;f<h;f+=2)if(i[f]===u)return i[f-1];return-1},a.flip=function(u,s){var i=this.opposite(u,s),f=this.opposite(s,u);this.removeTriangle(u,s,i),this.removeTriangle(s,u,f),this.addTriangle(u,f,i),this.addTriangle(s,i,f)},a.edges=function(){for(var u=this.stars,s=[],i=0,f=u.length;i<f;++i)for(var h=u[i],p=0,v=h.length;p<v;p+=2)s.push([h[p],h[p+1]]);return s},a.cells=function(){for(var u=this.stars,s=[],i=0,f=u.length;i<f;++i)for(var h=u[i],p=0,v=h.length;p<v;p+=2){var y=h[p],g=h[p+1];i<Math.min(y,g)&&s.push([i,y,g])}return s};function r(u,s){for(var i=new Array(u),f=0;f<u;++f)i[f]=[];return new o(i,s)}},{"binary-search-bounds":31}],47:[function(l,b,w){b.exports=e;function e(o){for(var a=1,n=1;n<o.length;++n)for(var r=0;r<n;++r)if(o[n]<o[r])a=-a;else if(o[r]===o[n])return 0;return a}},{}],48:[function(l,b,w){var e=l("dup"),o=l("robust-linear-solve");function a(u,s){for(var i=0,f=u.length,h=0;h<f;++h)i+=u[h]*s[h];return i}function n(u){var s=u.length;if(s===0)return[];u[0].length;var i=e([u.length+1,u.length+1],1),f=e([u.length+1],1);i[s][s]=0;for(var h=0;h<s;++h){for(var p=0;p<=h;++p)i[p][h]=i[h][p]=2*a(u[h],u[p]);f[h]=a(u[h],u[h])}for(var v=o(i,f),y=0,g=v[s+1],h=0;h<g.length;++h)y+=g[h];for(var A=new Array(s),h=0;h<s;++h){for(var g=v[h],m=0,p=0;p<g.length;++p)m+=g[p];A[h]=m/y}return A}function r(u){if(u.length===0)return[];for(var s=u[0].length,i=e([s]),f=n(u),h=0;h<u.length;++h)for(var p=0;p<s;++p)i[p]+=u[h][p]*f[h];return i}r.barycenetric=n,b.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(l,b,w){b.exports=o;var e=l("circumcenter");function o(a){for(var n=e(a),r=0,u=0;u<a.length;++u)for(var s=a[u],i=0;i<n.length;++i)r+=Math.pow(s[i]-n[i],2);return Math.sqrt(r/a.length)}},{circumcenter:48}],50:[function(l,b,w){b.exports=L;var e=l("union-find"),o=l("box-intersect"),a=l("robust-segment-intersect"),n=l("big-rat"),r=l("big-rat/cmp"),u=l("big-rat/to-float"),s=l("rat-vec"),i=l("nextafter"),f=l("./lib/rat-seg-intersect");function h(S){var k=u(S);return[i(k,-1/0),i(k,1/0)]}function p(S,k){for(var P=new Array(k.length),z=0;z<k.length;++z){var I=k[z],R=S[I[0]],D=S[I[1]];P[z]=[i(Math.min(R[0],D[0]),-1/0),i(Math.min(R[1],D[1]),-1/0),i(Math.max(R[0],D[0]),1/0),i(Math.max(R[1],D[1]),1/0)]}return P}function v(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var z=S[P];k[P]=[i(z[0],-1/0),i(z[1],-1/0),i(z[0],1/0),i(z[1],1/0)]}return k}function y(S,k,P){var z=[];return o(P,function(I,R){var D=k[I],O=k[R];if(!(D[0]===O[0]||D[0]===O[1]||D[1]===O[0]||D[1]===O[1])){var F=S[D[0]],Y=S[D[1]],X=S[O[0]],q=S[O[1]];a(F,Y,X,q)&&z.push([I,R])}}),z}function g(S,k,P,z){var I=[];return o(P,z,function(R,D){var O=k[R];if(!(O[0]===D||O[1]===D)){var F=S[D],Y=S[O[0]],X=S[O[1]];a(Y,X,F,F)&&I.push([R,D])}}),I}function A(S,k,P,z,I){var R,D,O=S.map(function(ne){return[n(ne[0]),n(ne[1])]});for(R=0;R<P.length;++R){var F=P[R];D=F[0];var Y=F[1],X=k[D],q=k[Y],$=f(s(S[X[0]]),s(S[X[1]]),s(S[q[0]]),s(S[q[1]]));if(!!$){var V=S.length;S.push([u($[0]),u($[1])]),O.push($),z.push([D,V],[Y,V])}}for(z.sort(function(ne,ae){if(ne[0]!==ae[0])return ne[0]-ae[0];var ie=O[ne[1]],fe=O[ae[1]];return r(ie[0],fe[0])||r(ie[1],fe[1])}),R=z.length-1;R>=0;--R){var K=z[R];D=K[0];var se=k[D],ue=se[0],oe=se[1],U=S[ue],G=S[oe];if((U[0]-G[0]||U[1]-G[1])<0){var re=ue;ue=oe,oe=re}se[0]=ue;var ee=se[1]=K[1],j;for(I&&(j=se[2]);R>0&&z[R-1][0]===D;){var K=z[--R],Q=K[1];I?k.push([ee,Q,j]):k.push([ee,Q]),ee=Q}I?k.push([ee,oe,j]):k.push([ee,oe])}return O}function m(S,k,P){for(var z=k.length,I=new e(z),R=[],D=0;D<k.length;++D){var O=k[D],F=h(O[0]),Y=h(O[1]);R.push([i(F[0],-1/0),i(Y[0],-1/0),i(F[1],1/0),i(Y[1],1/0)])}o(R,function(K,se){I.link(K,se)});for(var X=!0,q=new Array(z),D=0;D<z;++D){var $=I.find(D);$!==D&&(X=!1,S[$]=[Math.min(S[D][0],S[$][0]),Math.min(S[D][1],S[$][1])])}if(X)return null;for(var V=0,D=0;D<z;++D){var $=I.find(D);$===D?(q[D]=V,S[V++]=S[D]):q[D]=-1}S.length=V;for(var D=0;D<z;++D)q[D]<0&&(q[D]=q[I.find(D)]);return q}function M(S,k){return S[0]-k[0]||S[1]-k[1]}function _(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function T(S,k,P){if(S.length!==0){if(k)for(var z=0;z<S.length;++z){var I=S[z],R=k[I[0]],D=k[I[1]];I[0]=Math.min(R,D),I[1]=Math.max(R,D)}else for(var z=0;z<S.length;++z){var I=S[z],R=I[0],D=I[1];I[0]=Math.min(R,D),I[1]=Math.max(R,D)}P?S.sort(_):S.sort(M);for(var O=1,z=1;z<S.length;++z){var F=S[z-1],Y=S[z];Y[0]===F[0]&&Y[1]===F[1]&&(!P||Y[2]===F[2])||(S[O++]=Y)}S.length=O}}function x(S,k,P){var z=m(S,[],v(S));return T(k,z,P),!!z}function c(S,k,P){var z=p(S,k),I=y(S,k,z),R=v(S),D=g(S,k,z,R),O=A(S,k,I,D,P),F=m(S,O);return T(k,F,P),F?!0:I.length>0||D.length>0}function L(S,k,P){var z;if(P){z=k;for(var I=new Array(k.length),R=0;R<k.length;++R){var D=k[R];I[R]=[D[0],D[1],P[R]]}k=I}for(var O=x(S,k,!!P);c(S,k,!!P);)O=!0;if(!!P&&O){z.length=0,P.length=0;for(var R=0;R<k.length;++R){var D=k[R];z.push([D[0],D[1]]),P.push(D[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(l,b,w){b.exports=f;var e=l("big-rat/mul"),o=l("big-rat/div"),a=l("big-rat/sub"),n=l("big-rat/sign"),r=l("rat-vec/sub"),u=l("rat-vec/add"),s=l("rat-vec/muls");function i(h,p){return a(e(h[0],p[1]),e(h[1],p[0]))}function f(h,p,v,y){var g=r(p,h),A=r(y,v),m=i(g,A);if(n(m)===0)return null;var M=r(h,v),_=i(A,M),T=o(_,m),x=s(g,T),c=u(h,x);return c}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(l,b,w){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(l,b,w){var e=l("./colorScale"),o=l("lerp");b.exports=a;function a(s){var i,f,h,p,v,y,g,A,m,M,_;if(s||(s={}),A=(s.nshades||72)-1,g=s.format||"hex",y=s.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!e[y])throw Error(y+" not a supported colorscale");v=e[y]}else if(Array.isArray(y))v=y.slice();else throw Error("unsupported colormap option",y);if(v.length>A+1)throw new Error(y+" map requires nshades to be at least size "+v.length);Array.isArray(s.alpha)?s.alpha.length!==2?M=[1,1]:M=s.alpha.slice():typeof s.alpha=="number"?M=[s.alpha,s.alpha]:M=[1,1],i=v.map(function(L){return Math.round(L.index*A)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var T=v.map(function(L,S){var k=v[S].index,P=v[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=M[0]+(M[1]-M[0])*k),P}),m=[];for(_=0;_<i.length-1;++_){p=i[_+1]-i[_],f=T[_],h=T[_+1];for(var x=0;x<p;x++){var c=x/p;m.push([Math.round(o(f[0],h[0],c)),Math.round(o(f[1],h[1],c)),Math.round(o(f[2],h[2],c)),o(f[3],h[3],c)])}}return m.push(v[v.length-1].rgb.concat(M[1])),g==="hex"?m=m.map(r):g==="rgbaString"?m=m.map(u):g==="float"&&(m=m.map(n)),m}function n(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var i,f="#",h=0;h<3;++h)i=s[h],i=i.toString(16),f+=("00"+i).substr(i.length);return f}function u(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(l,b,w){b.exports=s;var e=l("robust-orientation"),o=l("signum"),a=l("two-sum"),n=l("robust-product"),r=l("robust-sum");function u(i,f,h){var p=a(i[0],-f[0]),v=a(i[1],-f[1]),y=a(h[0],-f[0]),g=a(h[1],-f[1]),A=r(n(p,y),n(v,g));return A[A.length-1]>=0}function s(i,f,h,p){var v=e(f,h,p);if(v===0){var y=o(e(i,f,h)),g=o(e(i,f,p));if(y===g){if(y===0){var A=u(i,f,h),m=u(i,f,p);return A===m?0:A?1:-1}return 0}else{if(g===0)return y>0||u(i,f,p)?-1:1;if(y===0)return g>0||u(i,f,h)?1:-1}return o(g-y)}var M=e(i,f,h);if(M>0)return v>0&&e(i,f,p)>0?1:-1;if(M<0)return v>0||e(i,f,p)>0?1:-1;var _=e(i,f,p);return _>0||u(i,f,h)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(l,b,w){b.exports=function(o){return o<0?-1:o>0?1:0}},{}],56:[function(l,b,w){b.exports=a;var e=Math.min;function o(n,r){return n-r}function a(n,r){var u=n.length,s=n.length-r.length;if(s)return s;switch(u){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||e(n[0],n[1])-e(r[0],r[1]);case 3:var i=n[0]+n[1],f=r[0]+r[1];if(s=i+n[2]-(f+r[2]),s)return s;var h=e(n[0],n[1]),p=e(r[0],r[1]);return e(h,n[2])-e(p,r[2])||e(h+n[2],i)-e(p+r[2],f);case 4:var v=n[0],y=n[1],g=n[2],A=n[3],m=r[0],M=r[1],_=r[2],T=r[3];return v+y+g+A-(m+M+_+T)||e(v,y,g,A)-e(m,M,_,T,m)||e(v+y,v+g,v+A,y+g,y+A,g+A)-e(m+M,m+_,m+T,M+_,M+T,_+T)||e(v+y+g,v+y+A,v+g+A,y+g+A)-e(m+M+_,m+M+T,m+_+T,M+_+T);default:for(var x=n.slice().sort(o),c=r.slice().sort(o),L=0;L<u;++L)if(s=x[L]-c[L],s)return s;return 0}}},{}],57:[function(l,b,w){var e=l("compare-cell"),o=l("cell-orientation");b.exports=a;function a(n,r){return e(n,r)||o(n)-o(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(l,b,w){var e=l("./lib/ch1d"),o=l("./lib/ch2d"),a=l("./lib/chnd");b.exports=n;function n(r){var u=r.length;if(u===0)return[];if(u===1)return[[0]];var s=r[0].length;return s===0?[]:s===1?e(r):s===2?o(r):a(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(l,b,w){b.exports=e;function e(o){for(var a=0,n=0,r=1;r<o.length;++r)o[r][0]<o[a][0]&&(a=r),o[r][0]>o[n][0]&&(n=r);return a<n?[[a],[n]]:a>n?[[n],[a]]:[[a]]}},{}],60:[function(l,b,w){b.exports=o;var e=l("monotone-convex-hull-2d");function o(a){var n=e(a),r=n.length;if(r<=2)return[];for(var u=new Array(r),s=n[r-1],i=0;i<r;++i){var f=n[i];u[i]=[s,f],s=f}return u}},{"monotone-convex-hull-2d":246}],61:[function(l,b,w){b.exports=r;var e=l("incremental-convex-hull"),o=l("affine-hull");function a(u,s){for(var i=u.length,f=new Array(i),h=0;h<s.length;++h)f[h]=u[s[h]];for(var p=s.length,h=0;h<i;++h)s.indexOf(h)<0&&(f[p++]=u[h]);return f}function n(u,s){for(var i=u.length,f=s.length,h=0;h<i;++h)for(var p=u[h],v=0;v<p.length;++v){var y=p[v];if(y<f)p[v]=s[y];else{y=y-f;for(var g=0;g<f;++g)y>=s[g]&&(y+=1);p[v]=y}}return u}function r(u,s){try{return e(u,!0)}catch{var i=o(u);if(i.length<=s)return[];var f=a(u,i),h=e(f,!0);return n(h,i)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(l,b,w){function e(a,n,r,u,s,i){var f=6*s*s-6*s,h=3*s*s-4*s+1,p=-6*s*s+6*s,v=3*s*s-2*s;if(a.length){i||(i=new Array(a.length));for(var y=a.length-1;y>=0;--y)i[y]=f*a[y]+h*n[y]+p*r[y]+v*u[y];return i}return f*a+h*n+p*r[y]+v*u}function o(a,n,r,u,s,i){var f=s-1,h=s*s,p=f*f,v=(1+2*s)*p,y=s*p,g=h*(3-2*s),A=h*f;if(a.length){i||(i=new Array(a.length));for(var m=a.length-1;m>=0;--m)i[m]=v*a[m]+y*n[m]+g*r[m]+A*u[m];return i}return v*a+y*n+g*r+A*u}b.exports=o,b.exports.derivative=e},{}],63:[function(l,b,w){var e=l("incremental-convex-hull"),o=l("uniq");b.exports=u;function a(s,i){this.point=s,this.index=i}function n(s,i){for(var f=s.point,h=i.point,p=f.length,v=0;v<p;++v){var y=h[v]-f[v];if(y)return y}return 0}function r(s,i,f){if(s===1)return f?[[-1,0]]:[];var h=i.map(function(A,m){return[A[0],m]});h.sort(function(A,m){return A[0]-m[0]});for(var p=new Array(s-1),v=1;v<s;++v){var y=h[v-1],g=h[v];p[v-1]=[y[1],g[1]]}return f&&p.push([-1,p[0][1]],[p[s-1][1],-1]),p}function u(s,i){var f=s.length;if(f===0)return[];var h=s[0].length;if(h<1)return[];if(h===1)return r(f,s,i);for(var p=new Array(f),v=1,y=0;y<f;++y){for(var g=s[y],A=new Array(h+1),m=0,M=0;M<h;++M){var _=g[M];A[M]=_,m+=_*_}A[h]=m,p[y]=new a(A,y),v=Math.max(m,v)}o(p,n),f=p.length;for(var T=new Array(f+h+1),x=new Array(f+h+1),c=(h+1)*(h+1)*v,L=new Array(h+1),y=0;y<=h;++y)L[y]=0;L[h]=c,T[0]=L.slice(),x[0]=-1;for(var y=0;y<=h;++y){var A=L.slice();A[y]=1,T[y+1]=A,x[y+1]=-1}for(var y=0;y<f;++y){var S=p[y];T[y+h+1]=S.point,x[y+h+1]=S.index}var k=e(T,!1);if(i?k=k.filter(function(P){for(var z=0,I=0;I<=h;++I){var R=x[P[I]];if(R<0&&++z>=2)return!1;P[I]=R}return!0}):k=k.filter(function(P){for(var z=0;z<=h;++z){var I=x[P[z]];if(I<0)return!1;P[z]=I}return!0}),h&1)for(var y=0;y<k.length;++y){var S=k[y],A=S[0];S[0]=S[1],S[1]=A}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(l,b,w){(function(e){(function(){var o=!1;if(typeof Float64Array!="undefined"){var a=new Float64Array(1),n=new Uint32Array(a.buffer);if(a[0]=1,o=!0,n[1]===1072693248){let u=function(f,h){return n[0]=f,n[1]=h,a[0]},s=function(f){return a[0]=f,n[0]},i=function(f){return a[0]=f,n[1]};b.exports=function(h){return a[0]=h,[n[0],n[1]]},b.exports.pack=u,b.exports.lo=s,b.exports.hi=i}else if(n[0]===1072693248){let u=function(f,h){return n[1]=f,n[0]=h,a[0]},s=function(f){return a[0]=f,n[1]},i=function(f){return a[0]=f,n[0]};b.exports=function(h){return a[0]=h,[n[1],n[0]]},b.exports.pack=u,b.exports.lo=s,b.exports.hi=i}else o=!1}if(!o){let u=function(f,h){return r.writeUInt32LE(f,0,!0),r.writeUInt32LE(h,4,!0),r.readDoubleLE(0,!0)},s=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(0,!0)},i=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(4,!0)};var r=new e(8);b.exports=function(h){return r.writeDoubleLE(h,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},b.exports.pack=u,b.exports.lo=s,b.exports.hi=i}b.exports.sign=function(u){return b.exports.hi(u)>>>31},b.exports.exponent=function(u){var s=b.exports.hi(u);return(s<<1>>>21)-1023},b.exports.fraction=function(u){var s=b.exports.lo(u),i=b.exports.hi(u),f=i&(1<<20)-1;return i&2146435072&&(f+=1<<20),[s,f]},b.exports.denormalized=function(u){var s=b.exports.hi(u);return!(s&2146435072)}}).call(this)}).call(this,l("buffer").Buffer)},{buffer:3}],65:[function(l,b,w){function e(n,r,u){var s=n[u]|0;if(s<=0)return[];var i=new Array(s),f;if(u===n.length-1)for(f=0;f<s;++f)i[f]=r;else for(f=0;f<s;++f)i[f]=e(n,r,u+1);return i}function o(n,r){var u,s;for(u=new Array(n),s=0;s<n;++s)u[s]=r;return u}function a(n,r){switch(typeof r=="undefined"&&(r=0),typeof n){case"number":if(n>0)return o(n|0,r);break;case"object":if(typeof n.length=="number")return e(n,r,0);break}return[]}b.exports=a},{}],66:[function(l,b,w){b.exports=o;var e=l("uniq");function o(a,n){var r=a.length;if(typeof n!="number"){n=0;for(var u=0;u<r;++u){var s=a[u];n=Math.max(n,s[0],s[1])}n=(n|0)+1}n=n|0;for(var i=new Array(n),u=0;u<n;++u)i[u]=[];for(var u=0;u<r;++u){var s=a[u];i[s[0]].push(s[1]),i[s[1]].push(s[0])}for(var f=0;f<n;++f)e(i[f],function(h,p){return h-p});return i}},{uniq:310}],67:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a||0,u=n||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[r*o[12]+o[8],r*o[13]+o[9],r*o[14]+o[10],r*o[15]+o[11]],[u*o[12]-o[8],u*o[13]-o[9],u*o[14]-o[10],u*o[15]-o[11]]]}},{}],68:[function(l,b,w){b.exports=s;var e=l("cubic-hermite"),o=l("binary-search-bounds");function a(i,f,h){return Math.min(f,Math.max(i,h))}function n(i,f,h){this.dimension=i.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=i.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[h],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var r=n.prototype;r.flush=function(i){var f=o.gt(this._time,i)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},r.curve=function(i){var f=this._time,h=f.length,p=o.le(f,i),v=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension,m=this.bounds;if(p<0)for(var M=A-1,_=0;_<A;++_,--M)v[_]=y[M];else if(p>=h-1)for(var M=y.length-1,T=i-f[h-1],_=0;_<A;++_,--M)v[_]=y[M]+T*g[M];else{for(var M=A*(p+1)-1,x=f[p],c=f[p+1],L=c-x||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],z=this._scratch[4],I=!0,_=0;_<A;++_,--M)S[_]=y[M],P[_]=g[M]*L,k[_]=y[M+A],z[_]=g[M+A]*L,I=I&&S[_]===k[_]&&P[_]===z[_]&&P[_]===0;if(I)for(var _=0;_<A;++_)v[_]=S[_];else e(S,P,k,z,(i-x)/L,v)}for(var R=m[0],D=m[1],_=0;_<A;++_)v[_]=a(R[_],D[_],v[_]);return v},r.dcurve=function(i){var f=this._time,h=f.length,p=o.le(f,i),v=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension;if(p>=h-1){var m=y.length-1;i-f[h-1];for(var M=0;M<A;++M,--m)v[M]=g[m]}else{for(var m=A*(p+1)-1,_=f[p],T=f[p+1],x=T-_||1,c=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,M=0;M<A;++M,--m)c[M]=y[m],S[M]=g[m]*x,L[M]=y[m+A],k[M]=g[m+A]*x,P=P&&c[M]===L[M]&&S[M]===k[M]&&S[M]===0;if(P)for(var M=0;M<A;++M)v[M]=0;else{e.derivative(c,S,L,k,(i-_)/x,v);for(var M=0;M<A;++M)v[M]/=x}}return v},r.lastT=function(){var i=this._time;return i[i.length-1]},r.stable=function(){for(var i=this._velocity,f=i.length,h=this.dimension-1;h>=0;--h)if(i[--f])return!1;return!0},r.jump=function(i){var f=this.lastT(),h=this.dimension;if(!(i<f||arguments.length!==h+1)){var p=this._state,v=this._velocity,y=p.length-this.dimension,g=this.bounds,A=g[0],m=g[1];this._time.push(f,i);for(var M=0;M<2;++M)for(var _=0;_<h;++_)p.push(p[y++]),v.push(0);this._time.push(i);for(var _=h;_>0;--_)p.push(a(A[_-1],m[_-1],arguments[_])),v.push(0)}},r.push=function(i){var f=this.lastT(),h=this.dimension;if(!(i<f||arguments.length!==h+1)){var p=this._state,v=this._velocity,y=p.length-this.dimension,g=i-f,A=this.bounds,m=A[0],M=A[1],_=g>1e-6?1/g:0;this._time.push(i);for(var T=h;T>0;--T){var x=a(m[T-1],M[T-1],arguments[T]);p.push(x),v.push((x-p[y++])*_)}}},r.set=function(i){var f=this.dimension;if(!(i<this.lastT()||arguments.length!==f+1)){var h=this._state,p=this._velocity,v=this.bounds,y=v[0],g=v[1];this._time.push(i);for(var A=f;A>0;--A)h.push(a(y[A-1],g[A-1],arguments[A])),p.push(0)}},r.move=function(i){var f=this.lastT(),h=this.dimension;if(!(i<=f||arguments.length!==h+1)){var p=this._state,v=this._velocity,y=p.length-this.dimension,g=this.bounds,A=g[0],m=g[1],M=i-f,_=M>1e-6?1/M:0;this._time.push(i);for(var T=h;T>0;--T){var x=arguments[T];p.push(a(A[T-1],m[T-1],p[y++]+x)),v.push(x*_)}}},r.idle=function(i){var f=this.lastT();if(!(i<f)){var h=this.dimension,p=this._state,v=this._velocity,y=p.length-h,g=this.bounds,A=g[0],m=g[1],M=i-f;this._time.push(i);for(var _=h-1;_>=0;--_)p.push(a(A[_],m[_],p[y]+M*v[y])),v.push(0),y+=1}};function u(i){for(var f=new Array(i),h=0;h<i;++h)f[h]=0;return f}function s(i,f,h){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof i=="number"){var p=u(i);return new n(p,p,0)}else return new n(i,u(i.length),0);case 2:if(typeof f=="number"){var p=u(i.length);return new n(i,p,+f)}else h=0;case 3:if(i.length!==f.length)throw new Error("state and velocity lengths must match");return new n(i,f,h)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(l,b,w){b.exports=M;var e=0,o=1;function a(_,T,x,c,L,S){this._color=_,this.key=T,this.value=x,this.left=c,this.right=L,this._count=S}function n(_){return new a(_._color,_.key,_.value,_.left,_.right,_._count)}function r(_,T){return new a(_,T.key,T.value,T.left,T.right,T._count)}function u(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function s(_,T){this._compare=_,this.root=T}var i=s.prototype;Object.defineProperty(i,"keys",{get:function(){var _=[];return this.forEach(function(T,x){_.push(T)}),_}}),Object.defineProperty(i,"values",{get:function(){var _=[];return this.forEach(function(T,x){_.push(x)}),_}}),Object.defineProperty(i,"length",{get:function(){return this.root?this.root._count:0}}),i.insert=function(_,T){for(var x=this._compare,c=this.root,L=[],S=[];c;){var k=x(_,c.key);L.push(c),S.push(k),k<=0?c=c.left:c=c.right}L.push(new a(e,_,T,null,null,1));for(var P=L.length-2;P>=0;--P){var c=L[P];S[P]<=0?L[P]=new a(c._color,c.key,c.value,L[P+1],c.right,c._count+1):L[P]=new a(c._color,c.key,c.value,c.left,L[P+1],c._count+1)}for(var P=L.length-1;P>1;--P){var z=L[P-1],c=L[P];if(z._color===o||c._color===o)break;var I=L[P-2];if(I.left===z)if(z.left===c){var R=I.right;if(R&&R._color===e)z._color=o,I.right=r(o,R),I._color=e,P-=1;else{if(I._color=e,I.left=z.right,z._color=o,z.right=I,L[P-2]=z,L[P-1]=c,u(I),u(z),P>=3){var D=L[P-3];D.left===I?D.left=z:D.right=z}break}}else{var R=I.right;if(R&&R._color===e)z._color=o,I.right=r(o,R),I._color=e,P-=1;else{if(z.right=c.left,I._color=e,I.left=c.right,c._color=o,c.left=z,c.right=I,L[P-2]=c,L[P-1]=z,u(I),u(z),u(c),P>=3){var D=L[P-3];D.left===I?D.left=c:D.right=c}break}}else if(z.right===c){var R=I.left;if(R&&R._color===e)z._color=o,I.left=r(o,R),I._color=e,P-=1;else{if(I._color=e,I.right=z.left,z._color=o,z.left=I,L[P-2]=z,L[P-1]=c,u(I),u(z),P>=3){var D=L[P-3];D.right===I?D.right=z:D.left=z}break}}else{var R=I.left;if(R&&R._color===e)z._color=o,I.left=r(o,R),I._color=e,P-=1;else{if(z.left=c.right,I._color=e,I.right=c.left,c._color=o,c.right=z,c.left=I,L[P-2]=c,L[P-1]=z,u(I),u(z),u(c),P>=3){var D=L[P-3];D.right===I?D.right=c:D.left=c}break}}}return L[0]._color=o,new s(x,L[0])};function f(_,T){if(T.left){var x=f(_,T.left);if(x)return x}var x=_(T.key,T.value);if(x)return x;if(T.right)return f(_,T.right)}function h(_,T,x,c){var L=T(_,c.key);if(L<=0){if(c.left){var S=h(_,T,x,c.left);if(S)return S}var S=x(c.key,c.value);if(S)return S}if(c.right)return h(_,T,x,c.right)}function p(_,T,x,c,L){var S=x(_,L.key),k=x(T,L.key),P;if(S<=0&&(L.left&&(P=p(_,T,x,c,L.left),P)||k>0&&(P=c(L.key,L.value),P)))return P;if(k>0&&L.right)return p(_,T,x,c,L.right)}i.forEach=function(T,x,c){if(!!this.root)switch(arguments.length){case 1:return f(T,this.root);case 2:return h(x,this._compare,T,this.root);case 3:return this._compare(x,c)>=0?void 0:p(x,c,this._compare,T,this.root)}},Object.defineProperty(i,"begin",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.left;return new v(this,_)}}),Object.defineProperty(i,"end",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.right;return new v(this,_)}}),i.at=function(_){if(_<0)return new v(this,[]);for(var T=this.root,x=[];;){if(x.push(T),T.left){if(_<T.left._count){T=T.left;continue}_-=T.left._count}if(!_)return new v(this,x);if(_-=1,T.right){if(_>=T.right._count)break;T=T.right}else break}return new v(this,[])},i.ge=function(_){for(var T=this._compare,x=this.root,c=[],L=0;x;){var S=T(_,x.key);c.push(x),S<=0&&(L=c.length),S<=0?x=x.left:x=x.right}return c.length=L,new v(this,c)},i.gt=function(_){for(var T=this._compare,x=this.root,c=[],L=0;x;){var S=T(_,x.key);c.push(x),S<0&&(L=c.length),S<0?x=x.left:x=x.right}return c.length=L,new v(this,c)},i.lt=function(_){for(var T=this._compare,x=this.root,c=[],L=0;x;){var S=T(_,x.key);c.push(x),S>0&&(L=c.length),S<=0?x=x.left:x=x.right}return c.length=L,new v(this,c)},i.le=function(_){for(var T=this._compare,x=this.root,c=[],L=0;x;){var S=T(_,x.key);c.push(x),S>=0&&(L=c.length),S<0?x=x.left:x=x.right}return c.length=L,new v(this,c)},i.find=function(_){for(var T=this._compare,x=this.root,c=[];x;){var L=T(_,x.key);if(c.push(x),L===0)return new v(this,c);L<=0?x=x.left:x=x.right}return new v(this,[])},i.remove=function(_){var T=this.find(_);return T?T.remove():this},i.get=function(_){for(var T=this._compare,x=this.root;x;){var c=T(_,x.key);if(c===0)return x.value;c<=0?x=x.left:x=x.right}};function v(_,T){this.tree=_,this._stack=T}var y=v.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new v(this.tree,this._stack.slice())};function g(_,T){_.key=T.key,_.value=T.value,_.left=T.left,_.right=T.right,_._color=T._color,_._count=T._count}function A(_){for(var T,x,c,L,S=_.length-1;S>=0;--S){if(T=_[S],S===0){T._color=o;return}if(x=_[S-1],x.left===T){if(c=x.right,c.right&&c.right._color===e){if(c=x.right=n(c),L=c.right=n(c.right),x.right=c.left,c.left=x,c.right=L,c._color=x._color,T._color=o,x._color=o,L._color=o,u(x),u(c),S>1){var k=_[S-2];k.left===x?k.left=c:k.right=c}_[S-1]=c;return}else if(c.left&&c.left._color===e){if(c=x.right=n(c),L=c.left=n(c.left),x.right=L.left,c.left=L.right,L.left=x,L.right=c,L._color=x._color,x._color=o,c._color=o,T._color=o,u(x),u(c),u(L),S>1){var k=_[S-2];k.left===x?k.left=L:k.right=L}_[S-1]=L;return}if(c._color===o)if(x._color===e){x._color=o,x.right=r(e,c);return}else{x.right=r(e,c);continue}else{if(c=n(c),x.right=c.left,c.left=x,c._color=x._color,x._color=e,u(x),u(c),S>1){var k=_[S-2];k.left===x?k.left=c:k.right=c}_[S-1]=c,_[S]=x,S+1<_.length?_[S+1]=T:_.push(T),S=S+2}}else{if(c=x.left,c.left&&c.left._color===e){if(c=x.left=n(c),L=c.left=n(c.left),x.left=c.right,c.right=x,c.left=L,c._color=x._color,T._color=o,x._color=o,L._color=o,u(x),u(c),S>1){var k=_[S-2];k.right===x?k.right=c:k.left=c}_[S-1]=c;return}else if(c.right&&c.right._color===e){if(c=x.left=n(c),L=c.right=n(c.right),x.left=L.right,c.right=L.left,L.right=x,L.left=c,L._color=x._color,x._color=o,c._color=o,T._color=o,u(x),u(c),u(L),S>1){var k=_[S-2];k.right===x?k.right=L:k.left=L}_[S-1]=L;return}if(c._color===o)if(x._color===e){x._color=o,x.left=r(e,c);return}else{x.left=r(e,c);continue}else{if(c=n(c),x.left=c.right,c.right=x,c._color=x._color,x._color=e,u(x),u(c),S>1){var k=_[S-2];k.right===x?k.right=c:k.left=c}_[S-1]=c,_[S]=x,S+1<_.length?_[S+1]=T:_.push(T),S=S+2}}}}y.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var T=new Array(_.length),x=_[_.length-1];T[T.length-1]=new a(x._color,x.key,x.value,x.left,x.right,x._count);for(var c=_.length-2;c>=0;--c){var x=_[c];x.left===_[c+1]?T[c]=new a(x._color,x.key,x.value,T[c+1],x.right,x._count):T[c]=new a(x._color,x.key,x.value,x.left,T[c+1],x._count)}if(x=T[T.length-1],x.left&&x.right){var L=T.length;for(x=x.left;x.right;)T.push(x),x=x.right;var S=T[L-1];T.push(new a(x._color,S.key,S.value,x.left,x.right,x._count)),T[L-1].key=x.key,T[L-1].value=x.value;for(var c=T.length-2;c>=L;--c)x=T[c],T[c]=new a(x._color,x.key,x.value,x.left,T[c+1],x._count);T[L-1].left=T[L]}if(x=T[T.length-1],x._color===e){var k=T[T.length-2];k.left===x?k.left=null:k.right===x&&(k.right=null),T.pop();for(var c=0;c<T.length;++c)T[c]._count--;return new s(this.tree._compare,T[0])}else if(x.left||x.right){x.left?g(x,x.left):x.right&&g(x,x.right),x._color=o;for(var c=0;c<T.length-1;++c)T[c]._count--;return new s(this.tree._compare,T[0])}else{if(T.length===1)return new s(this.tree._compare,null);for(var c=0;c<T.length;++c)T[c]._count--;var P=T[T.length-2];A(T),P.left===x?P.left=null:P.right=null}return new s(this.tree._compare,T[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var _=0,T=this._stack;if(T.length===0){var x=this.tree.root;return x?x._count:0}else T[T.length-1].left&&(_=T[T.length-1].left._count);for(var c=T.length-2;c>=0;--c)T[c+1]===T[c].right&&(++_,T[c].left&&(_+=T[c].left._count));return _},enumerable:!0}),y.next=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.right)for(T=T.right;T;)_.push(T),T=T.left;else for(_.pop();_.length>0&&_[_.length-1].right===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].left===_[T])return!0;return!1}}),y.update=function(_){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var x=new Array(T.length),c=T[T.length-1];x[x.length-1]=new a(c._color,c.key,_,c.left,c.right,c._count);for(var L=T.length-2;L>=0;--L)c=T[L],c.left===T[L+1]?x[L]=new a(c._color,c.key,c.value,x[L+1],c.right,c._count):x[L]=new a(c._color,c.key,c.value,c.left,x[L+1],c._count);return new s(this.tree._compare,x[0])},y.prev=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.left)for(T=T.left;T;)_.push(T),T=T.right;else for(_.pop();_.length>0&&_[_.length-1].left===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].right===_[T])return!0;return!1}});function m(_,T){return _<T?-1:_>T?1:0}function M(_){return new s(_||m,null)}},{}],70:[function(l,b,w){b.exports=T;var e=l("./lib/text.js"),o=l("./lib/lines.js"),a=l("./lib/background.js"),n=l("./lib/cube.js"),r=l("./lib/ticks.js"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(x,c){return x[0]=c[0],x[1]=c[1],x[2]=c[2],x}function i(x){this.gl=x,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(x)}var f=i.prototype;f.update=function(x){x=x||{};function c(X,q,$){if($ in x){var V=x[$],K=this[$],se;(X?Array.isArray(V)&&Array.isArray(V[0]):Array.isArray(V))?this[$]=se=[q(V[0]),q(V[1]),q(V[2])]:this[$]=se=[q(V),q(V),q(V)];for(var ue=0;ue<3;++ue)if(se[ue]!==K[ue])return!0}return!1}var L=c.bind(this,!1,Number),S=c.bind(this,!1,Boolean),k=c.bind(this,!1,String),P=c.bind(this,!0,function(X){if(Array.isArray(X)){if(X.length===3)return[+X[0],+X[1],+X[2],1];if(X.length===4)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),z,I=!1,R=!1;if("bounds"in x)for(var D=x.bounds,O=0;O<2;++O)for(var F=0;F<3;++F)D[O][F]!==this.bounds[O][F]&&(R=!0),this.bounds[O][F]=D[O][F];if("ticks"in x){z=x.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,R=!0);if(this._firstInit&&("ticks"in x||"tickSpacing"in x||(this.autoTicks=!0),R=!0,I=!0,this._firstInit=!1),R&&this.autoTicks&&(z=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)z[O].sort(function(q,$){return q.x-$.x});r.equal(z,this.ticks)?I=!1:this.ticks=z}S("tickEnable"),k("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var Y=k("labels");k("labelFont")&&(Y=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(Y||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var p=[new h,new h,new h];function v(x,c,L,S,k){for(var P=x.primalOffset,z=x.primalMinor,I=x.mirrorOffset,R=x.mirrorMinor,D=S[c],O=0;O<3;++O)if(c!==O){var F=P,Y=I,X=z,q=R;D&1<<O&&(F=I,Y=P,X=R,q=z),F[O]=L[0][O],Y[O]=L[1][O],k[O]>0?(X[O]=-1,q[O]=0):(X[O]=0,q[O]=1)}}var y=[0,0,0],g={model:u,view:u,projection:u,_ortho:!1};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(x){};var A=0,m=[0,0,0],M=[0,0,0],_=[0,0,0];f.draw=function(x){x=x||g;for(var c=this.gl,L=x.model||u,S=x.view||u,k=x.projection||u,P=this.bounds,z=x._ortho||!1,I=n(L,S,k,P,z),R=I.cubeEdges,D=I.axis,O=S[12],F=S[13],Y=S[14],X=S[15],q=z?2:1,$=q*this.pixelRatio*(k[3]*O+k[7]*F+k[11]*Y+k[15]*X)/c.drawingBufferHeight,V=0;V<3;++V)this.lastCubeProps.cubeEdges[V]=R[V],this.lastCubeProps.axis[V]=D[V];for(var K=p,V=0;V<3;++V)v(p[V],V,this.bounds,R,D);for(var c=this.gl,se=y,V=0;V<3;++V)this.backgroundEnable[V]?se[V]=D[V]:se[V]=0;this._background.draw(L,S,k,P,se,this.backgroundColor),this._lines.bind(L,S,k,this);for(var V=0;V<3;++V){var ue=[0,0,0];D[V]>0?ue[V]=P[1][V]:ue[V]=P[0][V];for(var oe=0;oe<2;++oe){var U=(V+1+oe)%3,G=(V+1+(oe^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,G,this.bounds,ue,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var oe=0;oe<2;++oe){var U=(V+1+oe)%3,G=(V+1+(oe^1))%3;this.zeroEnable[G]&&Math.min(P[0][G],P[1][G])<=0&&Math.max(P[0][G],P[1][G])>=0&&this._lines.drawZero(U,G,this.bounds,ue,this.zeroLineColor[G],this.zeroLineWidth[G]*this.pixelRatio)}}for(var V=0;V<3;++V){this.lineEnable[V]&&this._lines.drawAxisLine(V,this.bounds,K[V].primalOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio),this.lineMirror[V]&&this._lines.drawAxisLine(V,this.bounds,K[V].mirrorOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio);for(var re=s(m,K[V].primalMinor),ee=s(M,K[V].mirrorMinor),j=this.lineTickLength,oe=0;oe<3;++oe){var Q=$/L[5*oe];re[oe]*=j[oe]*Q,ee[oe]*=j[oe]*Q}this.lineTickEnable[V]&&this._lines.drawAxisTicks(V,K[V].primalOffset,re,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio),this.lineTickMirror[V]&&this._lines.drawAxisTicks(V,K[V].mirrorOffset,ee,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio)}this._lines.unbind(),this._text.bind(L,S,k,this.pixelRatio);var ne,ae=.5,ie,fe;function me(Oe){fe=[0,0,0],fe[Oe]=1}function ce(Oe,He,Ge){var _e=(Oe+1)%3,Ie=(Oe+2)%3,Ye=He[_e],qe=He[Ie],Ue=Ge[_e],Re=Ge[Ie];if(Ye>0&&Re>0){me(_e);return}else if(Ye>0&&Re<0){me(_e);return}else if(Ye<0&&Re>0){me(_e);return}else if(Ye<0&&Re<0){me(_e);return}else if(qe>0&&Ue>0){me(Ie);return}else if(qe>0&&Ue<0){me(Ie);return}else if(qe<0&&Ue>0){me(Ie);return}else if(qe<0&&Ue<0){me(Ie);return}}for(var V=0;V<3;++V){for(var ye=K[V].primalMinor,xe=K[V].mirrorMinor,ke=s(_,K[V].primalOffset),oe=0;oe<3;++oe)this.lineTickEnable[V]&&(ke[oe]+=$*ye[oe]*Math.max(this.lineTickLength[oe],0)/L[5*oe]);var Ae=[0,0,0];if(Ae[V]=1,this.tickEnable[V]){this.tickAngle[V]===-3600?(this.tickAngle[V]=0,this.tickAlign[V]="auto"):this.tickAlign[V]=-1,ie=1,ne=[this.tickAlign[V],ae,ie],ne[0]==="auto"?ne[0]=A:ne[0]=parseInt(""+ne[0]),fe=[0,0,0],ce(V,ye,xe);for(var oe=0;oe<3;++oe)ke[oe]+=$*ye[oe]*this.tickPad[oe]/L[5*oe];this._text.drawTicks(V,this.tickSize[V],this.tickAngle[V],ke,this.tickColor[V],Ae,fe,ne)}if(this.labelEnable[V]){ie=0,fe=[0,0,0],this.labels[V].length>4&&(me(V),ie=1),ne=[this.labelAlign[V],ae,ie],ne[0]==="auto"?ne[0]=A:ne[0]=parseInt(""+ne[0]);for(var oe=0;oe<3;++oe)ke[oe]+=$*ye[oe]*this.labelPad[oe]/L[5*oe];ke[V]+=.5*(P[0][V]+P[1][V]),this._text.drawLabel(V,this.labelSize[V],this.labelAngle[V],ke,this.labelColor[V],[0,0,0],fe,ne)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(x,c){var L=new i(x);return L.update(c),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(l,b,w){b.exports=u;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders").bg;function n(s,i,f,h){this.gl=s,this.buffer=i,this.vao=f,this.shader=h}var r=n.prototype;r.draw=function(s,i,f,h,p,v){for(var y=!1,g=0;g<3;++g)y=y||p[g];if(!!y){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:i,projection:f,bounds:h,enable:p,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function u(s){for(var i=[],f=[],h=0,p=0;p<3;++p)for(var v=(p+1)%3,y=(p+2)%3,g=[0,0,0],A=[0,0,0],m=-1;m<=1;m+=2){f.push(h,h+2,h+1,h+1,h+2,h+3),g[p]=m,A[p]=m;for(var M=-1;M<=1;M+=2){g[v]=M;for(var _=-1;_<=1;_+=2)g[y]=_,i.push(g[0],g[1],g[2],A[0],A[1],A[2]),h+=1}var T=v;v=y,y=T}var x=e(s,new Float32Array(i)),c=e(s,new Uint16Array(f),s.ELEMENT_ARRAY_BUFFER),L=o(s,[{buffer:x,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:x,type:s.FLOAT,size:3,offset:12,stride:24}],c),S=a(s);return S.attributes.position.location=0,S.attributes.normal.location=1,new n(s,x,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(l,b,w){b.exports=m;var e=l("bit-twiddle"),o=l("gl-mat4/multiply"),a=l("split-polygon"),n=l("robust-orientation"),r=new Array(16),u=new Array(8),s=new Array(8),i=new Array(3),f=[0,0,0];(function(){for(var M=0;M<8;++M)u[M]=[1,1,1,1],s[M]=[1,1,1]})();function h(M,_,T){for(var x=0;x<4;++x){M[x]=T[12+x];for(var c=0;c<3;++c)M[x]+=_[c]*T[4*c+x]}}var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(M){for(var _=0;_<p.length;++_)if(M=a.positive(M,p[_]),M.length<3)return 0;for(var T=M[0],x=T[0]/T[3],c=T[1]/T[3],L=0,_=1;_+1<M.length;++_){var S=M[_],k=M[_+1],P=S[0]/S[3],z=S[1]/S[3],I=k[0]/k[3],R=k[1]/k[3],D=P-x,O=z-c,F=I-x,Y=R-c;L+=Math.abs(D*Y-O*F)}return L}var y=[1,1,1],g=[0,0,0],A={cubeEdges:y,axis:g};function m(M,_,T,x,c){o(r,_,M),o(r,T,r);for(var L=0,S=0;S<2;++S){i[2]=x[S][2];for(var k=0;k<2;++k){i[1]=x[k][1];for(var P=0;P<2;++P)i[0]=x[P][0],h(u[L],i,r),L+=1}}for(var z=-1,S=0;S<8;++S){for(var I=u[S][3],R=0;R<3;++R)s[S][R]=u[S][R]/I;c&&(s[S][2]*=-1),I<0&&(z<0||s[S][2]<s[z][2])&&(z=S)}if(z<0){z=0;for(var D=0;D<3;++D){for(var O=(D+2)%3,F=(D+1)%3,Y=-1,X=-1,q=0;q<2;++q){var $=q<<D,V=$+(q<<O)+(1-q<<F),K=$+(1-q<<O)+(q<<F);n(s[$],s[V],s[K],f)<0||(q?Y=1:X=1)}if(Y<0||X<0){X>Y&&(z|=1<<D);continue}for(var q=0;q<2;++q){var $=q<<D,V=$+(q<<O)+(1-q<<F),K=$+(1-q<<O)+(q<<F),se=v([u[$],u[V],u[K],u[$+(1<<O)+(1<<F)]]);q?Y=se:X=se}if(X>Y){z|=1<<D;continue}}}for(var ue=7^z,oe=-1,S=0;S<8;++S)S===z||S===ue||(oe<0||s[oe][1]>s[S][1])&&(oe=S);for(var U=-1,S=0;S<3;++S){var G=oe^1<<S;if(!(G===z||G===ue)){U<0&&(U=G);var F=s[G];F[0]<s[U][0]&&(U=G)}}for(var re=-1,S=0;S<3;++S){var G=oe^1<<S;if(!(G===z||G===ue||G===U)){re<0&&(re=G);var F=s[G];F[0]>s[re][0]&&(re=G)}}var ee=y;ee[0]=ee[1]=ee[2]=0,ee[e.log2(U^oe)]=oe&U,ee[e.log2(oe^re)]=oe&re;var j=re^7;j===z||j===ue?(j=U^7,ee[e.log2(re^j)]=j&re):ee[e.log2(U^j)]=j&U;for(var Q=g,ne=z,D=0;D<3;++D)ne&1<<D?Q[D]=-1:Q[D]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(l,b,w){b.exports=y;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders").line,n=[0,0,0],r=[0,0,0],u=[0,0,0],s=[0,0,0],i=[1,1];function f(g){return g[0]=g[1]=g[2]=0,g}function h(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g}function p(g,A,m,M,_,T,x,c){this.gl=g,this.vertBuffer=A,this.vao=m,this.shader=M,this.tickCount=_,this.tickOffset=T,this.gridCount=x,this.gridOffset=c}var v=p.prototype;v.bind=function(g,A,m){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=A,this.shader.uniforms.projection=m,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(g,A,m,M,_){var T=f(r);this.shader.uniforms.majorAxis=r,T[g]=A[1][g]-A[0][g],this.shader.uniforms.minorAxis=T;var x=h(s,m);x[g]+=A[0][g],this.shader.uniforms.offset=x,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=M;var c=f(u);c[(g+2)%3]=1,this.shader.uniforms.screenAxis=c,this.vao.draw(this.gl.TRIANGLES,6);var c=f(u);c[(g+1)%3]=1,this.shader.uniforms.screenAxis=c,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(g,A,m,M,_){if(!!this.tickCount[g]){var T=f(n);T[g]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=m,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=_;var x=f(u);x[g]=1,this.shader.uniforms.screenAxis=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},v.drawGrid=function(g,A,m,M,_,T){if(!!this.gridCount[g]){var x=f(r);x[A]=m[1][A]-m[0][A],this.shader.uniforms.minorAxis=x;var c=h(s,M);c[A]+=m[0][A],this.shader.uniforms.offset=c;var L=f(n);L[g]=1,this.shader.uniforms.majorAxis=L;var S=f(u);S[g]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},v.drawZero=function(g,A,m,M,_,T){var x=f(r);this.shader.uniforms.majorAxis=x,x[g]=m[1][g]-m[0][g],this.shader.uniforms.minorAxis=x;var c=h(s,M);c[g]+=m[0][g],this.shader.uniforms.offset=c;var L=f(u);L[A]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(g,A,m){var M=[],_=[0,0,0],T=[0,0,0],x=[0,0,0],c=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var S=M.length/3|0,k=0;k<m[L].length;++k){var P=+m[L][k].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=M.length/3|0;_[L]=S,T[L]=z-S;for(var S=M.length/3|0,I=0;I<m[L].length;++I){var P=+m[L][I].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=M.length/3|0;x[L]=S,c[L]=z-S}var R=e(g,new Float32Array(M)),D=o(g,[{buffer:R,type:g.FLOAT,size:3,stride:0,offset:0}]),O=a(g);return O.attributes.position.location=0,new p(g,R,D,O,T,_,c,x)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);w.line=function(f){return o(f,a,n,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);w.text=function(f){return o(f,r,u,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);w.bg=function(f){return o(f,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(l,b,w){(function(e){(function(){b.exports=y;var o=l("gl-buffer"),a=l("gl-vao"),n=l("vectorize-text"),r=l("./shaders").text,u=window||e.global||{},s=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};var i=3;function f(g,A,m,M){this.gl=g,this.shader=A,this.buffer=m,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=f.prototype,p=[0,0];h.bind=function(g,A,m,M){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=g,_.view=A,_.projection=m,_.pixelScale=M,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},h.unbind=function(){this.vao.unbind()},h.update=function(g,A,m,M,_){var T=[];function x(D,O,F,Y,X,q){var $=s[F];$||($=s[F]={});var V=$[O];V||(V=$[O]=v(O,{triangles:!0,font:F,textAlign:"center",textBaseline:"middle",lineSpacing:X,styletags:q}));for(var K=(Y||12)/12,se=V.positions,ue=V.cells,oe=0,U=ue.length;oe<U;++oe)for(var G=ue[oe],re=2;re>=0;--re){var ee=se[G[re]];T.push(K*ee[0],-K*ee[1],D)}}for(var c=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=T.length/i|0,x(.5*(g[0][I]+g[1][I]),A[I],m[I],12,P,z),k[I]=(T.length/i|0)-S[I],c[I]=T.length/i|0;for(var R=0;R<M[I].length;++R)!M[I][R].text||x(M[I][R].x,M[I][R].text,M[I][R].font||_,M[I][R].fontSize||12,P,z);L[I]=(T.length/i|0)-c[I]}this.buffer.update(T),this.tickOffset=c,this.tickCount=L,this.labelOffset=S,this.labelCount=k},h.drawTicks=function(g,A,m,M,_,T,x,c){!this.tickCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=m,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=x,this.shader.uniforms.alignOpt=c,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},h.drawLabel=function(g,A,m,M,_,T,x,c){!this.labelCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=m,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=x,this.shader.uniforms.alignOpt=c,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function v(g,A){try{return n(g,A)}catch(m){return console.warn('error vectorizing text:"'+g+'" error:',m),{cells:[],positions:[]}}}function y(g,A,m,M,_,T){var x=o(g),c=a(g,[{buffer:x,size:3}]),L=r(g);L.attributes.position.location=0;var S=new f(g,L,x,c);return S.update(A,m,M,_,T),S}}).call(this)}).call(this,l("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(l,b,w){w.create=o,w.equal=a;function e(n,r){var u=n+"",s=u.indexOf("."),i=0;s>=0&&(i=u.length-s-1);var f=Math.pow(10,i),h=Math.round(n*r*f),p=h+"";if(p.indexOf("e")>=0)return p;var v=h/f,y=h%f;h<0?(v=-Math.ceil(v)|0,y=-y|0):(v=Math.floor(v)|0,y=y|0);var g=""+v;if(h<0&&(g="-"+g),i){for(var A=""+y;A.length<i;)A="0"+A;return g+"."+A}else return g}function o(n,r){for(var u=[],s=0;s<3;++s){var i=[];.5*(n[0][s]+n[1][s]);for(var f=0;f*r[s]<=n[1][s];++f)i.push({x:f*r[s],text:e(r[s],f)});for(var f=-1;f*r[s]>=n[0][s];--f)i.push({x:f*r[s],text:e(r[s],f)});u.push(i)}return u}function a(n,r){for(var u=0;u<3;++u){if(n[u].length!==r[u].length)return!1;for(var s=0;s<n[u].length;++s){var i=n[u][s],f=r[u][s];if(i.x!==f.x||i.text!==f.text||i.font!==f.font||i.fontColor!==f.fontColor||i.fontSize!==f.fontSize||i.dx!==f.dx||i.dy!==f.dy)return!1}}return!0}},{}],77:[function(l,b,w){b.exports=A;var e=l("extract-frustum-planes"),o=l("split-polygon"),a=l("./lib/cube.js"),n=l("gl-mat4/multiply"),r=l("gl-mat4/transpose"),u=l("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function f(m,M,_){this.lo=m,this.hi=M,this.pixelsPerDataUnit=_}var h=[0,0,0,1],p=[0,0,0,1];function v(m,M,_,T,x){for(var c=0;c<3;++c){for(var L=h,S=p,k=0;k<3;++k)S[k]=L[k]=_[k];S[3]=L[3]=1,S[c]+=1,u(S,S,M),S[3]<0&&(m[c]=1/0),L[c]-=1,u(L,L,M),L[3]<0&&(m[c]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*T,z=(L[1]/L[3]-S[1]/S[3])*x;m[c]=.25*Math.sqrt(P*P+z*z)}return m}var y=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],g=[0,0,0];function A(m,M,_,T,x){var c=M.model||s,L=M.view||s,S=M.projection||s,k=M._ortho||!1,P=m.bounds,x=x||a(c,L,S,P,k),z=x.axis;n(i,L,c),n(i,S,i);for(var I=y,R=0;R<3;++R)I[R].lo=1/0,I[R].hi=-1/0,I[R].pixelsPerDataUnit=1/0;var D=e(r(i,i));r(i,i);for(var O=0;O<3;++O){var F=(O+1)%3,Y=(O+2)%3,X=g;e:for(var R=0;R<2;++R){var q=[];if(z[O]<0!=!!R){X[O]=P[R][O];for(var $=0;$<2;++$){X[F]=P[$^R][F];for(var V=0;V<2;++V)X[Y]=P[V^$^R][Y],q.push(X.slice())}for(var K=k?5:4,$=K;$===K;++$){if(q.length===0)continue e;q=o.positive(q,D[$])}for(var $=0;$<q.length;++$)for(var Y=q[$],se=v(g,i,Y,_,T),V=0;V<3;++V)I[V].lo=Math.min(I[V].lo,Y[V]),I[V].hi=Math.max(I[V].hi,Y[V]),V!==O&&(I[V].pixelsPerDataUnit=Math.min(I[V].pixelsPerDataUnit,Math.abs(se[V])))}}}return I}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(l,b,w){var e=l("typedarray-pool"),o=l("ndarray-ops"),a=l("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(p,v,y,g,A){this.gl=p,this.type=v,this.handle=y,this.length=g,this.usage=A}var u=r.prototype;u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(p,v,y,g,A,m){var M=A.length*A.BYTES_PER_ELEMENT;if(m<0)return p.bufferData(v,A,g),M;if(M+m>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(v,m,A),y}function i(p,v){for(var y=e.malloc(p.length,v),g=p.length,A=0;A<g;++A)y[A]=p[A];return y}function f(p,v){for(var y=1,g=v.length-1;g>=0;--g){if(v[g]!==y)return!1;y*=p[g]}return!0}u.update=function(p,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof p=="object"&&typeof p.shape!="undefined"){var y=p.dtype;if(n.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var g=gl.getExtension("OES_element_index_uint");g&&y!=="uint16"?y="uint32":y="uint16"}if(y===p.dtype&&f(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,p.data,v):this.length=s(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),v);else{var A=e.malloc(p.size,y),m=a(A,p.shape);o.assign(m,p),v<0?this.length=s(this.gl,this.type,this.length,this.usage,A,v):this.length=s(this.gl,this.type,this.length,this.usage,A.subarray(0,p.size),v),e.free(A)}}else if(Array.isArray(p)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=i(p,"uint16"):M=i(p,"float32"),v<0?this.length=s(this.gl,this.type,this.length,this.usage,M,v):this.length=s(this.gl,this.type,this.length,this.usage,M.subarray(0,p.length),v),e.free(M)}else if(typeof p=="object"&&typeof p.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,p,v);else if(typeof p=="number"||p===void 0){if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function h(p,v,y,g){if(y=y||p.ARRAY_BUFFER,g=g||p.DYNAMIC_DRAW,y!==p.ARRAY_BUFFER&&y!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==p.DYNAMIC_DRAW&&g!==p.STATIC_DRAW&&g!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=p.createBuffer(),m=new r(p,y,A,0,g);return m.update(v),m}b.exports=h},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(l,b,w){var e=l("gl-vec3");b.exports=function(a,n){var r=a.positions,u=a.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var i=0,f=1/0,h=-1/0,p=1/0,v=-1/0,y=1/0,g=-1/0,A=null,m=null,M=[],_=1/0,T=!1,x=0;x<r.length;x++){var c=r[x];f=Math.min(c[0],f),h=Math.max(c[0],h),p=Math.min(c[1],p),v=Math.max(c[1],v),y=Math.min(c[2],y),g=Math.max(c[2],g);var L=u[x];if(e.length(L)>i&&(i=e.length(L)),x){var S=2*e.distance(A,c)/(e.length(m)+e.length(L));S?(_=Math.min(_,S),T=!1):T=!0}T||(A=c,m=L),M.push(L)}var k=[f,p,y],P=[h,v,g];n&&(n[0]=k,n[1]=P),i===0&&(i=1);var z=1/i;isFinite(_)||(_=1),s.vectorScale=_;var I=a.coneSize||.5;a.absoluteConeSize&&(I=a.absoluteConeSize*z),s.coneScale=I;for(var x=0,R=0;x<r.length;x++)for(var c=r[x],D=c[0],O=c[1],F=c[2],Y=M[x],X=e.length(Y)*z,q=0,$=8;q<$;q++){s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.vectors.push(Y),s.vectors.push(Y),s.vectors.push(Y),s.vectors.push(Y),s.vectors.push(Y),s.vectors.push(Y),s.vertexIntensity.push(X,X,X),s.vertexIntensity.push(X,X,X);var V=s.positions.length;s.cells.push([V-6,V-5,V-4],[V-3,V-2,V-1])}return s};var o=l("./lib/shaders");b.exports.createMesh=l("./create_mesh"),b.exports.createConeMesh=function(a,n){return b.exports.createMesh(a,n,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("gl-vao"),n=l("gl-texture2d"),r=l("gl-mat4/multiply"),u=l("gl-mat4/invert"),s=l("ndarray"),i=l("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(M,_,T,x,c,L,S,k,P,z,I){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=T,this.pickShader=x,this.trianglePositions=c,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var p=h.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(M){this.pickId=M};function v(M){for(var _=i({colormap:M,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),x=0;x<256;++x){for(var c=_[x],L=0;L<3;++L)T[4*x+L]=c[L];T[4*x+3]=c[3]*255}return s(T,[256,256,4],[4,0,1])}function y(M){for(var _=M.length,T=new Array(_),x=0;x<_;++x)T[x]=M[x][2];return T}p.update=function(M){M=M||{};var _=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(v(M.colormap)),this.texture.generateMipmap());var T=M.cells,x=M.positions,c=M.vectors;if(!x||!T||!c)return;var L=[],S=[],k=[],P=[],z=[];this.cells=T,this.positions=x,this.vectors=c;var I=M.meshColor||[1,1,1,1],R=M.vertexIntensity,D=1/0,O=-1/0;if(R)if(M.vertexIntensityBounds)D=+M.vertexIntensityBounds[0],O=+M.vertexIntensityBounds[1];else for(var F=0;F<R.length;++F){var Y=R[F];D=Math.min(D,Y),O=Math.max(O,Y)}else for(var F=0;F<x.length;++F){var Y=x[F][2];D=Math.min(D,Y),O=Math.max(O,Y)}R?this.intensity=R:this.intensity=y(x),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<x.length;++F)for(var X=x[F],q=0;q<3;++q)isNaN(X[q])||!isFinite(X[q])||(this.bounds[0][q]=Math.min(this.bounds[0][q],X[q]),this.bounds[1][q]=Math.max(this.bounds[1][q],X[q]));var $=0;e:for(var F=0;F<T.length;++F){var V=T[F];switch(V.length){case 3:for(var q=0;q<3;++q)for(var K=V[q],X=x[K],se=0;se<3;++se)if(isNaN(X[se])||!isFinite(X[se]))continue e;for(var q=0;q<3;++q){var K=V[2-q],X=x[K];L.push(X[0],X[1],X[2],X[3]);var ue=c[K];S.push(ue[0],ue[1],ue[2],ue[3]||0);var oe=I;oe.length===3?k.push(oe[0],oe[1],oe[2],1):k.push(oe[0],oe[1],oe[2],oe[3]);var U;R?U=[(R[K]-D)/(O-D),0]:U=[(X[2]-D)/(O-D),0],P.push(U[0],U[1]),z.push(F)}$+=1;break}}this.triangleCount=$,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(z))},p.drawTransparent=p.draw=function(M){M=M||{};for(var _=this.gl,T=M.model||f,x=M.view||f,c=M.projection||f,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:T,view:x,projection:c,inverseModel:f.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=u(k.inverseModel,k.model),_.disable(_.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,k.view,k.model),r(P,k.projection,P),u(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var z=P[15],S=0;S<3;++S)z+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var I=P[12+S],R=0;R<3;++R)I+=P[4*R+S]*this.lightPosition[R];k.lightPosition[S]=I/z}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=k,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(M){M=M||{};for(var _=this.gl,T=M.model||f,x=M.view||f,c=M.projection||f,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(T),this._view=[].slice.call(x),this._projection=[].slice.call(c),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var k={model:T,view:x,projection:c,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(M){if(!M||M.id!==this.pickId)return null;var _=M.value[0]+256*M.value[1]+65536*M.value[2],T=this.cells[_],x=this.positions[T[1]].slice(0,3),c={position:x,dataCoordinate:x,index:Math.floor(T[1]/48)};return this.traceType==="cone"?c.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(c.intensity=this.intensity[T[1]],c.velocity=this.vectors[T[1]].slice(0,3),c.divergence=this.vectors[T[1]][3],c.index=_),c},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function g(M,_){var T=e(M,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function A(M,_){var T=e(M,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function m(M,_,T){var x=T.shaders;arguments.length===1&&(_=M,M=_.gl);var c=g(M,x),L=A(M,x),S=n(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=M.LINEAR_MIPMAP_LINEAR,S.magFilter=M.LINEAR;var k=o(M),P=o(M),z=o(M),I=o(M),R=o(M),D=a(M,[{buffer:k,type:M.FLOAT,size:4},{buffer:R,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:M.FLOAT,size:4},{buffer:I,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),O=new h(M,S,c,L,k,P,R,z,I,D,T.traceType||"cone");return O.update(_),O}b.exports=m},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},w.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(l,b,w){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(l,b,w){var e=l("./1.0/numbers");b.exports=function(a){return e[a]}},{"./1.0/numbers":82}],84:[function(l,b,w){b.exports=h;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,v,y,g){this.gl=p,this.shader=g,this.buffer=v,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=r.prototype;u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(p){var v=this.gl,y=this.shader.uniforms;this.shader.bind();var g=y.view=p.view||n,A=y.projection=p.projection||n;y.model=p.model||n,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var m=g[12],M=g[13],_=g[14],T=g[15],x=p._ortho||!1,c=x?2:1,L=c*this.pixelRatio*(A[3]*m+A[7]*M+A[11]*_+A[15]*T)/v.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)v.lineWidth(this.lineWidth[S]*this.pixelRatio),y.capSize=this.capSize[S]*L,this.lineCount[S]&&v.drawArrays(v.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function s(p,v){for(var y=0;y<3;++y)p[0][y]=Math.min(p[0][y],v[y]),p[1][y]=Math.max(p[1][y],v[y])}var i=function(){for(var p=new Array(3),v=0;v<3;++v){for(var y=[],g=1;g<=2;++g)for(var A=-1;A<=1;A+=2){var m=(g+v)%3,M=[0,0,0];M[m]=A,y.push(M)}p[v]=y}return p}();function f(p,v,y,g){for(var A=i[g],m=0;m<A.length;++m){var M=A[m];p.push(v[0],v[1],v[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return A.length}u.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=p.color||[[0,0,0],[0,0,0],[0,0,0]],y=p.position,g=p.error;if(Array.isArray(v[0])||(v=[v,v,v]),y&&g){var A=[],m=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=M;e:for(var T=0;T<m;++T){for(var x=y[T],c=0;c<3;++c)if(isNaN(x[c])||!isFinite(x[c]))continue e;var L=g[T],S=v[_];if(Array.isArray(S[0])&&(S=v[T]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][_])||isNaN(L[1][_]))){if(L[0][_]<0){var k=x.slice();k[_]+=L[0][_],A.push(x[0],x[1],x[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,k),M+=2+f(A,k,S,_)}if(L[1][_]>0){var k=x.slice();k[_]+=L[1][_],A.push(x[0],x[1],x[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,k),M+=2+f(A,k,S,_)}}}this.lineCount[_]=M-this.lineOffset[_]}this.buffer.update(A)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function h(p){var v=p.gl,y=e(v),g=o(v,[{buffer:y,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:v.FLOAT,size:3,offset:28,stride:40}]),A=a(v);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var m=new r(v,y,g,A);return m.update(p),m}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);b.exports=function(r){return o(r,a,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(l,b,w){var e=l("gl-texture2d");b.exports=M;var o=null,a,n,r,u;function s(_){var T=_.getParameter(_.FRAMEBUFFER_BINDING),x=_.getParameter(_.RENDERBUFFER_BINDING),c=_.getParameter(_.TEXTURE_BINDING_2D);return[T,x,c]}function i(_,T){_.bindFramebuffer(_.FRAMEBUFFER,T[0]),_.bindRenderbuffer(_.RENDERBUFFER,T[1]),_.bindTexture(_.TEXTURE_2D,T[2])}function f(_,T){var x=_.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);o=new Array(x+1);for(var c=0;c<=x;++c){for(var L=new Array(x),S=0;S<c;++S)L[S]=_.COLOR_ATTACHMENT0+S;for(var S=c;S<x;++S)L[S]=_.NONE;o[c]=L}}function h(_){switch(_){case a:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(_,T,x,c,L,S){if(!c)return null;var k=e(_,T,x,L,c);return k.magFilter=_.NEAREST,k.minFilter=_.NEAREST,k.mipSamples=1,k.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,S,_.TEXTURE_2D,k.handle,0),k}function v(_,T,x,c,L){var S=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,S),_.renderbufferStorage(_.RENDERBUFFER,c,T,x),_.framebufferRenderbuffer(_.FRAMEBUFFER,L,_.RENDERBUFFER,S),S}function y(_){var T=s(_.gl),x=_.gl,c=_.handle=x.createFramebuffer(),L=_._shape[0],S=_._shape[1],k=_.color.length,P=_._ext,z=_._useStencil,I=_._useDepth,R=_._colorType;x.bindFramebuffer(x.FRAMEBUFFER,c);for(var D=0;D<k;++D)_.color[D]=p(x,L,S,R,x.RGBA,x.COLOR_ATTACHMENT0+D);k===0?(_._color_rb=v(x,L,S,x.RGBA4,x.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(o[0])):k>1&&P.drawBuffersWEBGL(o[k]);var O=x.getExtension("WEBGL_depth_texture");O?z?_.depth=p(x,L,S,O.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):I&&(_.depth=p(x,L,S,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):I&&z?_._depth_rb=v(x,L,S,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):I?_._depth_rb=v(x,L,S,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):z&&(_._depth_rb=v(x,L,S,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));var F=x.checkFramebufferStatus(x.FRAMEBUFFER);if(F!==x.FRAMEBUFFER_COMPLETE){_._destroyed=!0,x.bindFramebuffer(x.FRAMEBUFFER,null),x.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(x.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var D=0;D<_.color.length;++D)_.color[D].dispose(),_.color[D]=null;_._color_rb&&(x.deleteRenderbuffer(_._color_rb),_._color_rb=null),i(x,T),h(F)}i(x,T)}function g(_,T,x,c,L,S,k,P){this.gl=_,this._shape=[T|0,x|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var z=0;z<L;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=c,this._useDepth=S,this._useStencil=k;var I=this,R=[T|0,x|0];Object.defineProperties(R,{0:{get:function(){return I._shape[0]},set:function(D){return I.width=D}},1:{get:function(){return I._shape[1]},set:function(D){return I.height=D}}}),this._shapeVector=R,y(this)}var A=g.prototype;function m(_,T,x){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===T&&_._shape[1]===x)){var c=_.gl,L=c.getParameter(c.MAX_RENDERBUFFER_SIZE);if(T<0||T>L||x<0||x>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=T,_._shape[1]=x;for(var S=s(c),k=0;k<_.color.length;++k)_.color[k].shape=_._shape;_._color_rb&&(c.bindRenderbuffer(c.RENDERBUFFER,_._color_rb),c.renderbufferStorage(c.RENDERBUFFER,c.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(c.bindRenderbuffer(c.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&c.renderbufferStorage(c.RENDERBUFFER,c.STENCIL_INDEX,_._shape[0],_._shape[1])),c.bindFramebuffer(c.FRAMEBUFFER,_.handle);var P=c.checkFramebufferStatus(c.FRAMEBUFFER);P!==c.FRAMEBUFFER_COMPLETE&&(_.dispose(),i(c,S),h(P)),i(c,S)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=_[0]|0,x=_[1]|0;return m(this,T,x),[T,x]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,m(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,m(this,this._shape[0],_),_},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(_,T,x,c){a||(a=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=_.getExtension("WEBGL_draw_buffers");if(!o&&L&&f(_,L),Array.isArray(T)&&(c=x,x=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var S=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(T<0||T>S||x<0||x>S)throw new Error("gl-fbo: Parameters are too large for FBO");c=c||{};var k=1;if("color"in c){if(k=Math.max(c.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>_.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=_.UNSIGNED_BYTE,z=_.getExtension("OES_texture_float");if(c.float&&k>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else c.preferFloat&&k>0&&z&&(P=_.FLOAT);var I=!0;"depth"in c&&(I=!!c.depth);var R=!1;return"stencil"in c&&(R=!!c.stencil),new g(_,T,x,P,k,I,R,L)}},{"gl-texture2d":146}],87:[function(l,b,w){var e=l("sprintf-js").sprintf,o=l("gl-constants/lookup"),a=l("glsl-shader-name"),n=l("add-line-numbers");b.exports=r;function r(u,s,i){var f=a(s)||"of unknown name (see npm glsl-shader-name)",h="unknown type";i!==void 0&&(h=i===o.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e(`Error compiling %s shader %s:
`,h,f),v=e("%s%s",p,u),y=u.split(`
`),g={},A=0;A<y.length;A++){var m=y[A];if(!(m===""||m==="\0")){var M=parseInt(m.split(":")[2]);if(isNaN(M))throw new Error(e("Could not parse error: %s",m));g[M]=m}}for(var _=n(s).split(`
`),A=0;A<_.length;A++)if(!(!g[A+3]&&!g[A+2]&&!g[A+1])){var T=_[A];if(p+=T+`
`,g[A+1]){var x=g[A+1];x=x.substr(x.split(":",3).join(":").length+1).trim(),p+=e(`^^^ %s

`,x)}}return{long:p.trim(),short:v.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(l,b,w){b.exports=h;var e=l("binary-search-bounds"),o=l("iota-array"),a=l("typedarray-pool"),n=l("gl-shader"),r=l("gl-buffer"),u=l("./lib/shaders");function s(p,v,y,g,A,m,M){this.plot=p,this.shader=v,this.pickShader=y,this.positionBuffer=g,this.weightBuffer=A,this.colorBuffer=m,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i=s.prototype,f=[0,0,1,0,0,1,1,0,1,1,0,1];i.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var v=this.plot,y=this.shader,g=this.bounds,A=this.numVertices;if(!(A<=0)){var m=v.gl,M=v.dataBox,_=g[2]-g[0],T=g[3]-g[1],x=M[2]-M[0],c=M[3]-M[1];p[0]=2*_/x,p[4]=2*T/c,p[6]=2*(g[0]-M[0])/x-1,p[7]=2*(g[1]-M[1])/c-1,y.bind();var L=y.uniforms;L.viewTransform=p,L.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(m.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(m.UNSIGNED_BYTE,!0),m.drawArrays(m.TRIANGLES,0,A)}}}(),i.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(y){var g=this.plot,A=this.pickShader,m=this.bounds,M=this.numVertices;if(!(M<=0)){var _=g.gl,T=g.dataBox,x=m[2]-m[0],c=m[3]-m[1],L=T[2]-T[0],S=T[3]-T[1];p[0]=2*x/L,p[4]=2*c/S,p[6]=2*(m[0]-T[0])/L-1,p[7]=2*(m[1]-T[1])/S-1;for(var k=0;k<4;++k)v[k]=y>>k*8&255;this.pickOffset=y,A.bind();var P=A.uniforms;P.viewTransform=p,P.pickOffset=v,P.shape=this.shape;var z=A.attributes;return this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),z.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),i.pick=function(p,v,y){var g=this.pickOffset,A=this.shape[0]*this.shape[1];if(y<g||y>=g+A)return null;var m=y-g,M=this.xData,_=this.yData;return{object:this,pointId:m,dataCoord:[M[m%this.shape[0]],_[m/this.shape[0]|0]]}},i.update=function(p){p=p||{};var v=p.shape||[0,0],y=p.x||o(v[0]),g=p.y||o(v[1]),A=p.z||new Float32Array(v[0]*v[1]),m=p.zsmooth!==!1;this.xData=y,this.yData=g;var M=p.colorLevels||[0],_=p.colorValues||[0,0,0,1],T=M.length,x=this.bounds,c,L,S,k;m?(c=x[0]=y[0],L=x[1]=g[0],S=x[2]=y[y.length-1],k=x[3]=g[g.length-1]):(c=x[0]=y[0]+(y[1]-y[0])/2,L=x[1]=g[0]+(g[1]-g[0])/2,S=x[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,k=x[3]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2);var P=1/(S-c),z=1/(k-L),I=v[0],R=v[1];this.shape=[I,R];var D=(m?(I-1)*(R-1):I*R)*(f.length>>>1);this.numVertices=D;for(var O=a.mallocUint8(D*4),F=a.mallocFloat32(D*2),Y=a.mallocUint8(D*2),X=a.mallocUint32(D),q=0,$=m?I-1:I,V=m?R-1:R,K=0;K<V;++K){var se,ue;m?(se=z*(g[K]-L),ue=z*(g[K+1]-L)):(se=K<R-1?z*(g[K]-(g[K+1]-g[K])/2-L):z*(g[K]-(g[K]-g[K-1])/2-L),ue=K<R-1?z*(g[K]+(g[K+1]-g[K])/2-L):z*(g[K]+(g[K]-g[K-1])/2-L));for(var oe=0;oe<$;++oe){var U,G;m?(U=P*(y[oe]-c),G=P*(y[oe+1]-c)):(U=oe<I-1?P*(y[oe]-(y[oe+1]-y[oe])/2-c):P*(y[oe]-(y[oe]-y[oe-1])/2-c),G=oe<I-1?P*(y[oe]+(y[oe+1]-y[oe])/2-c):P*(y[oe]+(y[oe]-y[oe-1])/2-c));for(var re=0;re<f.length;re+=2){var ee=f[re],j=f[re+1],Q=m?(K+j)*I+(oe+ee):K*I+oe,ne=A[Q],ae=e.le(M,ne),ie,fe,me,ce;if(ae<0)ie=_[0],fe=_[1],me=_[2],ce=_[3];else if(ae===T-1)ie=_[4*T-4],fe=_[4*T-3],me=_[4*T-2],ce=_[4*T-1];else{var ye=(ne-M[ae])/(M[ae+1]-M[ae]),xe=1-ye,ke=4*ae,Ae=4*(ae+1);ie=xe*_[ke]+ye*_[Ae],fe=xe*_[ke+1]+ye*_[Ae+1],me=xe*_[ke+2]+ye*_[Ae+2],ce=xe*_[ke+3]+ye*_[Ae+3]}O[4*q]=255*ie,O[4*q+1]=255*fe,O[4*q+2]=255*me,O[4*q+3]=255*ce,F[2*q]=U*.5+G*.5,F[2*q+1]=se*.5+ue*.5,Y[2*q]=ee,Y[2*q+1]=j,X[q]=K*I+oe,q+=1}}}this.positionBuffer.update(F),this.weightBuffer.update(Y),this.colorBuffer.update(O),this.idBuffer.update(X),a.free(F),a.free(O),a.free(Y),a.free(X)},i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function h(p,v){var y=p.gl,g=n(y,u.vertex,u.fragment),A=n(y,u.pickVertex,u.pickFragment),m=r(y),M=r(y),_=r(y),T=r(y),x=new s(p,g,A,m,M,_,T);return x.update(v),p.addObject(x),x}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(l,b,w){var e=l("glslify");b.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];w.createShader=function(s){return o(s,a,n,null,u)},w.createPickShader=function(s){return o(s,a,r,null,u)}},{"gl-shader":132,glslify:231}],91:[function(l,b,w){b.exports=_;var e=l("gl-buffer"),o=l("gl-vao"),a=l("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function u(T,x,c,L){return n[0]=L,n[1]=c,n[2]=x,n[3]=T,r[0]}var s=l("binary-search-bounds"),i=l("ndarray"),f=l("./lib/shaders"),h=f.createShader,p=f.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(T,x){for(var c=0,L=0;L<3;++L){var S=T[L]-x[L];c+=S*S}return Math.sqrt(c)}function g(T){for(var x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],c=0;c<3;++c)x[0][c]=Math.max(T[0][c],x[0][c]),x[1][c]=Math.min(T[1][c],x[1][c]);return x}function A(T,x,c,L){this.arcLength=T,this.position=x,this.index=c,this.dataCoordinate=L}function m(T,x,c,L,S,k){this.gl=T,this.shader=x,this.pickShader=c,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=m.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(T){this.pickId=T},M.drawTransparent=M.draw=function(T){if(!!this.vertexCount){var x=this.gl,c=this.shader,L=this.vao;c.bind(),c.uniforms={model:T.model||v,view:T.view||v,projection:T.projection||v,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(x.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(T){if(!!this.vertexCount){var x=this.gl,c=this.pickShader,L=this.vao;c.bind(),c.uniforms={model:T.model||v,view:T.view||v,projection:T.projection||v,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(x.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(T){var x,c;this.dirty=!0;var L=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],z=0,I=0,R=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=T.position||T.positions;if(D){var O=T.color||T.colors||[0,0,0,1],F=T.lineWidth||1,Y=!1;e:for(x=1;x<D.length;++x){var X=D[x-1],q=D[x];for(k.push(z),P.push(X.slice()),c=0;c<3;++c){if(isNaN(X[c])||isNaN(q[c])||!isFinite(X[c])||!isFinite(q[c])){if(!L&&S.length>0){for(var $=0;$<24;++$)S.push(S[S.length-12]);I+=2,Y=!0}continue e}R[0][c]=Math.min(R[0][c],X[c],q[c]),R[1][c]=Math.max(R[1][c],X[c],q[c])}var V,K;Array.isArray(O[0])?(V=O.length>x-1?O[x-1]:O.length>0?O[O.length-1]:[0,0,0,1],K=O.length>x?O[x]:O.length>0?O[O.length-1]:[0,0,0,1]):V=K=O,V.length===3&&(V=[V[0],V[1],V[2],1]),K.length===3&&(K=[K[0],K[1],K[2],1]),!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0);var se;Array.isArray(F)?se=F.length>x-1?F[x-1]:F.length>0?F[F.length-1]:[0,0,0,1]:se=F;var ue=z;if(z+=y(X,q),Y){for(c=0;c<2;++c)S.push(X[0],X[1],X[2],q[0],q[1],q[2],ue,se,V[0],V[1],V[2],V[3]);I+=2,Y=!1}S.push(X[0],X[1],X[2],q[0],q[1],q[2],ue,se,V[0],V[1],V[2],V[3],X[0],X[1],X[2],q[0],q[1],q[2],ue,-se,V[0],V[1],V[2],V[3],q[0],q[1],q[2],X[0],X[1],X[2],z,-se,K[0],K[1],K[2],K[3],q[0],q[1],q[2],X[0],X[1],X[2],z,se,K[0],K[1],K[2],K[3]),I+=4}}if(this.buffer.update(S),k.push(z),P.push(D[D.length-1].slice()),this.bounds=R,this.vertexCount=I,this.points=P,this.arcLength=k,"dashes"in T){var oe=T.dashes,U=oe.slice();for(U.unshift(0),x=1;x<U.length;++x)U[x]=U[x-1]+U[x];var G=i(new Array(256*4),[256,1,4]);for(x=0;x<256;++x){for(c=0;c<4;++c)G.set(x,0,c,0);s.le(U,U[U.length-1]*x/255)&1?G.set(x,0,0,0):G.set(x,0,0,255)}this.texture.setPixels(G)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(T){if(!T||T.id!==this.pickId)return null;var x=u(T.value[0],T.value[1],T.value[2],0),c=s.le(this.arcLength,x);if(c<0)return null;if(c===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),c);for(var L=this.points[c],S=this.points[Math.min(c+1,this.points.length-1)],k=(x-this.arcLength[c])/(this.arcLength[c+1]-this.arcLength[c]),P=1-k,z=[0,0,0],I=0;I<3;++I)z[I]=P*L[I]+k*S[I];var R=Math.min(k<.5?c:c+1,this.points.length-1);return new A(x,z,R,this.points[R])};function _(T){var x=T.gl||T.scene&&T.scene.gl,c=h(x);c.attributes.position.location=0,c.attributes.nextPosition.location=1,c.attributes.arcLength.location=2,c.attributes.lineWidth.location=3,c.attributes.color.location=4;var L=p(x);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=e(x),k=o(x,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=i(new Array(256*4),[256,1,4]),z=0;z<256*4;++z)P.data[z]=255;var I=a(x,P);I.wrap=x.REPEAT;var R=new m(x,c,L,S,k,I);return R.update(T),R}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a}},{}],93:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],94:[function(l,b,w){b.exports=e;function e(o){var a=o[0],n=o[1],r=o[2],u=o[3],s=o[4],i=o[5],f=o[6],h=o[7],p=o[8],v=o[9],y=o[10],g=o[11],A=o[12],m=o[13],M=o[14],_=o[15],T=a*i-n*s,x=a*f-r*s,c=a*h-u*s,L=n*f-r*i,S=n*h-u*i,k=r*h-u*f,P=p*m-v*A,z=p*M-y*A,I=p*_-g*A,R=v*M-y*m,D=v*_-g*m,O=y*_-g*M;return T*O-x*D+c*R+L*I-S*z+k*P}},{}],95:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0],r=a[1],u=a[2],s=a[3],i=n+n,f=r+r,h=u+u,p=n*i,v=r*i,y=r*f,g=u*i,A=u*f,m=u*h,M=s*i,_=s*f,T=s*h;return o[0]=1-y-m,o[1]=v+T,o[2]=g-_,o[3]=0,o[4]=v-T,o[5]=1-p-m,o[6]=A+M,o[7]=0,o[8]=g+_,o[9]=A-M,o[10]=1-p-y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],96:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=a[3],f=r+r,h=u+u,p=s+s,v=r*f,y=r*h,g=r*p,A=u*h,m=u*p,M=s*p,_=i*f,T=i*h,x=i*p;return o[0]=1-(A+M),o[1]=y+x,o[2]=g-T,o[3]=0,o[4]=y-x,o[5]=1-(v+M),o[6]=m+_,o[7]=0,o[8]=g+T,o[9]=m-_,o[10]=1-(v+A),o[11]=0,o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=1,o}},{}],97:[function(l,b,w){b.exports=e;function e(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],98:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0],r=a[1],u=a[2],s=a[3],i=a[4],f=a[5],h=a[6],p=a[7],v=a[8],y=a[9],g=a[10],A=a[11],m=a[12],M=a[13],_=a[14],T=a[15],x=n*f-r*i,c=n*h-u*i,L=n*p-s*i,S=r*h-u*f,k=r*p-s*f,P=u*p-s*h,z=v*M-y*m,I=v*_-g*m,R=v*T-A*m,D=y*_-g*M,O=y*T-A*M,F=g*T-A*_,Y=x*F-c*O+L*D+S*R-k*I+P*z;return Y?(Y=1/Y,o[0]=(f*F-h*O+p*D)*Y,o[1]=(u*O-r*F-s*D)*Y,o[2]=(M*P-_*k+T*S)*Y,o[3]=(g*k-y*P-A*S)*Y,o[4]=(h*R-i*F-p*I)*Y,o[5]=(n*F-u*R+s*I)*Y,o[6]=(_*L-m*P-T*c)*Y,o[7]=(v*P-g*L+A*c)*Y,o[8]=(i*O-f*R+p*z)*Y,o[9]=(r*R-n*O-s*z)*Y,o[10]=(m*k-M*L+T*x)*Y,o[11]=(y*L-v*k-A*x)*Y,o[12]=(f*I-i*D-h*z)*Y,o[13]=(n*D-r*I+u*z)*Y,o[14]=(M*c-m*S-_*x)*Y,o[15]=(v*S-y*c+g*x)*Y,o):null}},{}],99:[function(l,b,w){var e=l("./identity");b.exports=o;function o(a,n,r,u){var s,i,f,h,p,v,y,g,A,m,M=n[0],_=n[1],T=n[2],x=u[0],c=u[1],L=u[2],S=r[0],k=r[1],P=r[2];return Math.abs(M-S)<1e-6&&Math.abs(_-k)<1e-6&&Math.abs(T-P)<1e-6?e(a):(y=M-S,g=_-k,A=T-P,m=1/Math.sqrt(y*y+g*g+A*A),y*=m,g*=m,A*=m,s=c*A-L*g,i=L*y-x*A,f=x*g-c*y,m=Math.sqrt(s*s+i*i+f*f),m?(m=1/m,s*=m,i*=m,f*=m):(s=0,i=0,f=0),h=g*f-A*i,p=A*s-y*f,v=y*i-g*s,m=Math.sqrt(h*h+p*p+v*v),m?(m=1/m,h*=m,p*=m,v*=m):(h=0,p=0,v=0),a[0]=s,a[1]=h,a[2]=y,a[3]=0,a[4]=i,a[5]=p,a[6]=g,a[7]=0,a[8]=f,a[9]=v,a[10]=A,a[11]=0,a[12]=-(s*M+i*_+f*T),a[13]=-(h*M+p*_+v*T),a[14]=-(y*M+g*_+A*T),a[15]=1,a)}},{"./identity":97}],100:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=a[3],f=a[4],h=a[5],p=a[6],v=a[7],y=a[8],g=a[9],A=a[10],m=a[11],M=a[12],_=a[13],T=a[14],x=a[15],c=n[0],L=n[1],S=n[2],k=n[3];return o[0]=c*r+L*f+S*y+k*M,o[1]=c*u+L*h+S*g+k*_,o[2]=c*s+L*p+S*A+k*T,o[3]=c*i+L*v+S*m+k*x,c=n[4],L=n[5],S=n[6],k=n[7],o[4]=c*r+L*f+S*y+k*M,o[5]=c*u+L*h+S*g+k*_,o[6]=c*s+L*p+S*A+k*T,o[7]=c*i+L*v+S*m+k*x,c=n[8],L=n[9],S=n[10],k=n[11],o[8]=c*r+L*f+S*y+k*M,o[9]=c*u+L*h+S*g+k*_,o[10]=c*s+L*p+S*A+k*T,o[11]=c*i+L*v+S*m+k*x,c=n[12],L=n[13],S=n[14],k=n[15],o[12]=c*r+L*f+S*y+k*M,o[13]=c*u+L*h+S*g+k*_,o[14]=c*s+L*p+S*A+k*T,o[15]=c*i+L*v+S*m+k*x,o}},{}],101:[function(l,b,w){b.exports=e;function e(o,a,n,r,u,s,i){var f=1/(a-n),h=1/(r-u),p=1/(s-i);return o[0]=-2*f,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*h,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*p,o[11]=0,o[12]=(a+n)*f,o[13]=(u+r)*h,o[14]=(i+s)*p,o[15]=1,o}},{}],102:[function(l,b,w){b.exports=e;function e(o,a,n,r,u){var s=1/Math.tan(a/2),i=1/(r-u);return o[0]=s/n,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(u+r)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*u*r*i,o[15]=0,o}},{}],103:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=r[0],s=r[1],i=r[2],f=Math.sqrt(u*u+s*s+i*i),h,p,v,y,g,A,m,M,_,T,x,c,L,S,k,P,z,I,R,D,O,F,Y,X;return Math.abs(f)<1e-6?null:(f=1/f,u*=f,s*=f,i*=f,h=Math.sin(n),p=Math.cos(n),v=1-p,y=a[0],g=a[1],A=a[2],m=a[3],M=a[4],_=a[5],T=a[6],x=a[7],c=a[8],L=a[9],S=a[10],k=a[11],P=u*u*v+p,z=s*u*v+i*h,I=i*u*v-s*h,R=u*s*v-i*h,D=s*s*v+p,O=i*s*v+u*h,F=u*i*v+s*h,Y=s*i*v-u*h,X=i*i*v+p,o[0]=y*P+M*z+c*I,o[1]=g*P+_*z+L*I,o[2]=A*P+T*z+S*I,o[3]=m*P+x*z+k*I,o[4]=y*R+M*D+c*O,o[5]=g*R+_*D+L*O,o[6]=A*R+T*D+S*O,o[7]=m*R+x*D+k*O,o[8]=y*F+M*Y+c*X,o[9]=g*F+_*Y+L*X,o[10]=A*F+T*Y+S*X,o[11]=m*F+x*Y+k*X,a!==o&&(o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o)}},{}],104:[function(l,b,w){b.exports=e;function e(o,a,n){var r=Math.sin(n),u=Math.cos(n),s=a[4],i=a[5],f=a[6],h=a[7],p=a[8],v=a[9],y=a[10],g=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=s*u+p*r,o[5]=i*u+v*r,o[6]=f*u+y*r,o[7]=h*u+g*r,o[8]=p*u-s*r,o[9]=v*u-i*r,o[10]=y*u-f*r,o[11]=g*u-h*r,o}},{}],105:[function(l,b,w){b.exports=e;function e(o,a,n){var r=Math.sin(n),u=Math.cos(n),s=a[0],i=a[1],f=a[2],h=a[3],p=a[8],v=a[9],y=a[10],g=a[11];return a!==o&&(o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=s*u-p*r,o[1]=i*u-v*r,o[2]=f*u-y*r,o[3]=h*u-g*r,o[8]=s*r+p*u,o[9]=i*r+v*u,o[10]=f*r+y*u,o[11]=h*r+g*u,o}},{}],106:[function(l,b,w){b.exports=e;function e(o,a,n){var r=Math.sin(n),u=Math.cos(n),s=a[0],i=a[1],f=a[2],h=a[3],p=a[4],v=a[5],y=a[6],g=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=s*u+p*r,o[1]=i*u+v*r,o[2]=f*u+y*r,o[3]=h*u+g*r,o[4]=p*u-s*r,o[5]=v*u-i*r,o[6]=y*u-f*r,o[7]=g*u-h*r,o}},{}],107:[function(l,b,w){b.exports=e;function e(o,a,n){var r=n[0],u=n[1],s=n[2];return o[0]=a[0]*r,o[1]=a[1]*r,o[2]=a[2]*r,o[3]=a[3]*r,o[4]=a[4]*u,o[5]=a[5]*u,o[6]=a[6]*u,o[7]=a[7]*u,o[8]=a[8]*s,o[9]=a[9]*s,o[10]=a[10]*s,o[11]=a[11]*s,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o}},{}],108:[function(l,b,w){b.exports=e;function e(o,a,n){var r=n[0],u=n[1],s=n[2],i,f,h,p,v,y,g,A,m,M,_,T;return a===o?(o[12]=a[0]*r+a[4]*u+a[8]*s+a[12],o[13]=a[1]*r+a[5]*u+a[9]*s+a[13],o[14]=a[2]*r+a[6]*u+a[10]*s+a[14],o[15]=a[3]*r+a[7]*u+a[11]*s+a[15]):(i=a[0],f=a[1],h=a[2],p=a[3],v=a[4],y=a[5],g=a[6],A=a[7],m=a[8],M=a[9],_=a[10],T=a[11],o[0]=i,o[1]=f,o[2]=h,o[3]=p,o[4]=v,o[5]=y,o[6]=g,o[7]=A,o[8]=m,o[9]=M,o[10]=_,o[11]=T,o[12]=i*r+v*u+m*s+a[12],o[13]=f*r+y*u+M*s+a[13],o[14]=h*r+g*u+_*s+a[14],o[15]=p*r+A*u+T*s+a[15]),o}},{}],109:[function(l,b,w){b.exports=e;function e(o,a){if(o===a){var n=a[1],r=a[2],u=a[3],s=a[6],i=a[7],f=a[11];o[1]=a[4],o[2]=a[8],o[3]=a[12],o[4]=n,o[6]=a[9],o[7]=a[13],o[8]=r,o[9]=s,o[11]=a[14],o[12]=u,o[13]=i,o[14]=f}else o[0]=a[0],o[1]=a[4],o[2]=a[8],o[3]=a[12],o[4]=a[1],o[5]=a[5],o[6]=a[9],o[7]=a[13],o[8]=a[2],o[9]=a[6],o[10]=a[10],o[11]=a[14],o[12]=a[3],o[13]=a[7],o[14]=a[11],o[15]=a[15];return o}},{}],110:[function(l,b,w){var e=l("barycentric"),o=l("polytope-closest-point/lib/closest_point_2d.js");b.exports=s;function a(i,f){for(var h=[0,0,0,0],p=0;p<4;++p)for(var v=0;v<4;++v)h[v]+=i[4*p+v]*f[p];return h}function n(i,f,h,p,v){for(var y=a(p,a(h,a(f,[i[0],i[1],i[2],1]))),g=0;g<3;++g)y[g]/=y[3];return[.5*v[0]*(1+y[0]),.5*v[1]*(1-y[1])]}function r(i,f){if(i.length===2){for(var h=0,p=0,v=0;v<2;++v)h+=Math.pow(f[v]-i[0][v],2),p+=Math.pow(f[v]-i[1][v],2);return h=Math.sqrt(h),p=Math.sqrt(p),h+p<1e-6?[1,0]:[p/(h+p),h/(p+h)]}else if(i.length===3){var y=[0,0];return o(i[0],i[1],i[2],f,y),e(i,y)}return[]}function u(i,f){for(var h=[0,0,0],p=0;p<i.length;++p)for(var v=i[p],y=f[p],g=0;g<3;++g)h[g]+=y*v[g];return h}function s(i,f,h,p,v,y){if(i.length===1)return[0,i[0].slice()];for(var g=new Array(i.length),A=0;A<i.length;++A)g[A]=n(i[A],h,p,v,y);for(var m=0,M=1/0,A=0;A<g.length;++A){for(var _=0,T=0;T<2;++T)_+=Math.pow(g[A][T]-f[T],2);_<M&&(M=_,m=A)}for(var x=r(g,f),c=0,A=0;A<3;++A){if(x[A]<-.001||x[A]>1.0001)return null;c+=x[A]}return Math.abs(c-1)>.001?null:[m,u(i,x),x]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},w.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},w.pointShader={vertex:u,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},w.pickShader={vertex:i,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},w.pointPickShader={vertex:h,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},w.contourShader={vertex:p,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(l,b,w){var e=1e-6,o=1e-6,a=l("gl-shader"),n=l("gl-buffer"),r=l("gl-vao"),u=l("gl-texture2d"),s=l("normals"),i=l("gl-mat4/multiply"),f=l("gl-mat4/invert"),h=l("ndarray"),p=l("colormap"),v=l("simplicial-complex-contour"),y=l("typedarray-pool"),g=l("./lib/shaders"),A=l("./lib/closest-point"),m=g.meshShader,M=g.wireShader,_=g.pointShader,T=g.pickShader,x=g.pointPickShader,c=g.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S($,V,K,se,ue,oe,U,G,re,ee,j,Q,ne,ae,ie,fe,me,ce,ye,xe,ke,Ae,Oe,He,Ge,_e,Ie){this.gl=$,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=K,this.lineShader=se,this.pointShader=ue,this.pickShader=oe,this.pointPickShader=U,this.contourShader=G,this.trianglePositions=re,this.triangleColors=j,this.triangleNormals=ne,this.triangleUVs=Q,this.triangleIds=ee,this.triangleVAO=ae,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=me,this.edgeUVs=ce,this.edgeIds=fe,this.edgeVAO=ye,this.edgeCount=0,this.pointPositions=xe,this.pointColors=Ae,this.pointUVs=Oe,this.pointSizes=He,this.pointIds=ke,this.pointVAO=Ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function($){this.pickId=$};function P($,V){if(!V||!V.length)return 1;for(var K=0;K<V.length;++K){if(V.length<2)return 1;if(V[K][0]===$)return V[K][1];if(V[K][0]>$&&K>0){var se=(V[K][0]-$)/(V[K][0]-V[K-1][0]);return V[K][1]*(1-se)+se*V[K-1][1]}}return 1}function z($,V){for(var K=p({colormap:$,nshades:256,format:"rgba"}),se=new Uint8Array(256*4),ue=0;ue<256;++ue){for(var oe=K[ue],U=0;U<3;++U)se[4*ue+U]=oe[U];V?se[4*ue+3]=255*P(ue/255,V):se[4*ue+3]=255*oe[3]}return h(se,[256,256,4],[4,0,1])}function I($){for(var V=$.length,K=new Array(V),se=0;se<V;++se)K[se]=$[se][2];return K}k.highlight=function($){if(!$||!this.contourEnable){this.contourCount=0;return}for(var V=v(this.cells,this.intensity,$.intensity),K=V.cells,se=V.vertexIds,ue=V.vertexWeights,oe=K.length,U=y.mallocFloat32(2*3*oe),G=0,re=0;re<oe;++re)for(var ee=K[re],j=0;j<2;++j){var Q=ee[0];ee.length===2&&(Q=ee[j]);for(var ne=se[Q][0],ae=se[Q][1],ie=ue[Q],fe=1-ie,me=this.positions[ne],ce=this.positions[ae],ye=0;ye<3;++ye)U[G++]=ie*me[ye]+fe*ce[ye]}this.contourCount=G/3|0,this.contourPositions.update(U.subarray(0,G)),y.free(U)},k.update=function($){$=$||{};var V=this.gl;this.dirty=!0,"contourEnable"in $&&(this.contourEnable=$.contourEnable),"contourColor"in $&&(this.contourColor=$.contourColor),"lineWidth"in $&&(this.lineWidth=$.lineWidth),"lightPosition"in $&&(this.lightPosition=$.lightPosition),this.hasAlpha=!1,"opacity"in $&&(this.opacity=$.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in $&&(this.opacityscale=$.opacityscale,this.hasAlpha=!0),"ambient"in $&&(this.ambientLight=$.ambient),"diffuse"in $&&(this.diffuseLight=$.diffuse),"specular"in $&&(this.specularLight=$.specular),"roughness"in $&&(this.roughness=$.roughness),"fresnel"in $&&(this.fresnel=$.fresnel),$.texture?(this.texture.dispose(),this.texture=u(V,$.texture)):$.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(z($.colormap,this.opacityscale)),this.texture.generateMipmap());var K=$.cells,se=$.positions;if(!se||!K)return;var ue=[],oe=[],U=[],G=[],re=[],ee=[],j=[],Q=[],ne=[],ae=[],ie=[],fe=[],me=[],ce=[];this.cells=K,this.positions=se;var ye=$.vertexNormals,xe=$.cellNormals,ke=$.vertexNormalsEpsilon===void 0?e:$.vertexNormalsEpsilon,Ae=$.faceNormalsEpsilon===void 0?o:$.faceNormalsEpsilon;$.useFacetNormals&&!xe&&(xe=s.faceNormals(K,se,Ae)),!xe&&!ye&&(ye=s.vertexNormals(K,se,ke));var Oe=$.vertexColors,He=$.cellColors,Ge=$.meshColor||[1,1,1,1],_e=$.vertexUVs,Ie=$.vertexIntensity,Ye=$.cellUVs,qe=$.cellIntensity,Ue=1/0,Re=-1/0;if(!_e&&!Ye)if(Ie)if($.vertexIntensityBounds)Ue=+$.vertexIntensityBounds[0],Re=+$.vertexIntensityBounds[1];else for(var Ve=0;Ve<Ie.length;++Ve){var dt=Ie[Ve];Ue=Math.min(Ue,dt),Re=Math.max(Re,dt)}else if(qe)if($.cellIntensityBounds)Ue=+$.cellIntensityBounds[0],Re=+$.cellIntensityBounds[1];else for(var Ve=0;Ve<qe.length;++Ve){var dt=qe[Ve];Ue=Math.min(Ue,dt),Re=Math.max(Re,dt)}else for(var Ve=0;Ve<se.length;++Ve){var dt=se[Ve][2];Ue=Math.min(Ue,dt),Re=Math.max(Re,dt)}Ie?this.intensity=Ie:qe?this.intensity=qe:this.intensity=I(se),this.pickVertex=!(qe||He);var Dt=$.pointSizes,Gt=$.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<se.length;++Ve)for(var kt=se[Ve],zt=0;zt<3;++zt)isNaN(kt[zt])||!isFinite(kt[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],kt[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],kt[zt]));var Bt=0,Lt=0,Mt=0;e:for(var Ve=0;Ve<K.length;++Ve){var it=K[Ve];switch(it.length){case 1:for(var ht=it[0],kt=se[ht],zt=0;zt<3;++zt)if(isNaN(kt[zt])||!isFinite(kt[zt]))continue e;ae.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&Ie?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Ie[ht]-Ue)/(Re-Ue),this.opacityscale)):Qe.length===3?ie.push(Qe[0],Qe[1],Qe[2],this.opacity):(ie.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:Ie?Ce=[(Ie[ht]-Ue)/(Re-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Re-Ue),0]:Ce=[(kt[2]-Ue)/(Re-Ue),0],fe.push(Ce[0],Ce[1]),Dt?me.push(Dt[ht]):me.push(Gt),ce.push(Ve),Mt+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var ht=it[zt],kt=se[ht],je=0;je<3;++je)if(isNaN(kt[je])||!isFinite(kt[je]))continue e;for(var zt=0;zt<2;++zt){var ht=it[zt],kt=se[ht];ee.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&Ie?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Ie[ht]-Ue)/(Re-Ue),this.opacityscale)):Qe.length===3?j.push(Qe[0],Qe[1],Qe[2],this.opacity):(j.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:Ie?Ce=[(Ie[ht]-Ue)/(Re-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Re-Ue),0]:Ce=[(kt[2]-Ue)/(Re-Ue),0],Q.push(Ce[0],Ce[1]),ne.push(Ve)}Lt+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var ht=it[zt],kt=se[ht],je=0;je<3;++je)if(isNaN(kt[je])||!isFinite(kt[je]))continue e;for(var zt=0;zt<3;++zt){var ht=it[2-zt],kt=se[ht];ue.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,Qe?this.opacityscale&&Ie?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Ie[ht]-Ue)/(Re-Ue),this.opacityscale)):Qe.length===3?oe.push(Qe[0],Qe[1],Qe[2],this.opacity):(oe.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):oe.push(.5,.5,.5,1);var Ce;_e?Ce=_e[ht]:Ie?Ce=[(Ie[ht]-Ue)/(Re-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Re-Ue),0]:Ce=[(kt[2]-Ue)/(Re-Ue),0],G.push(Ce[0],Ce[1]);var rt;ye?rt=ye[ht]:rt=xe[Ve],U.push(rt[0],rt[1],rt[2]),re.push(Ve)}Bt+=1;break}}this.pointCount=Mt,this.edgeCount=Lt,this.triangleCount=Bt,this.pointPositions.update(ae),this.pointColors.update(ie),this.pointUVs.update(fe),this.pointSizes.update(me),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update(ee),this.edgeColors.update(j),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(ne)),this.trianglePositions.update(ue),this.triangleColors.update(oe),this.triangleUVs.update(G),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(re))},k.drawTransparent=k.draw=function($){$=$||{};for(var V=this.gl,K=$.model||L,se=$.view||L,ue=$.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)oe[0][U]=Math.max(oe[0][U],this.clipBounds[0][U]),oe[1][U]=Math.min(oe[1][U],this.clipBounds[1][U]);var G={model:K,view:se,projection:ue,inverseModel:L.slice(),clipBounds:oe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};G.inverseModel=f(G.inverseModel,G.model),V.disable(V.CULL_FACE),this.texture.bind(0);var re=new Array(16);i(re,G.view,G.model),i(re,G.projection,re),f(re,re);for(var U=0;U<3;++U)G.eyePosition[U]=re[12+U]/re[15];for(var ee=re[15],U=0;U<3;++U)ee+=this.lightPosition[U]*re[4*U+3];for(var U=0;U<3;++U){for(var j=re[12+U],Q=0;Q<3;++Q)j+=re[4*Q+U]*this.lightPosition[Q];G.lightPosition[U]=j/ee}if(this.triangleCount>0){var ne=this.triShader;ne.bind(),ne.uniforms=G,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ne=this.lineShader;ne.bind(),ne.uniforms=G,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ne=this.pointShader;ne.bind(),ne.uniforms=G,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ne=this.contourShader;ne.bind(),ne.uniforms=G,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function($){$=$||{};for(var V=this.gl,K=$.model||L,se=$.view||L,ue=$.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)oe[0][U]=Math.max(oe[0][U],this.clipBounds[0][U]),oe[1][U]=Math.min(oe[1][U],this.clipBounds[1][U]);this._model=[].slice.call(K),this._view=[].slice.call(se),this._projection=[].slice.call(ue),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var G={model:K,view:se,projection:ue,clipBounds:oe,pickId:this.pickId/255},re=this.pickShader;if(re.bind(),re.uniforms=G,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var re=this.pointPickShader;re.bind(),re.uniforms=G,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function($){if(!$||$.id!==this.pickId)return null;for(var V=$.value[0]+256*$.value[1]+65536*$.value[2],K=this.cells[V],se=this.positions,ue=new Array(K.length),oe=0;oe<K.length;++oe)ue[oe]=se[K[oe]];var U=$.coord[0],G=$.coord[1];if(!this.pickVertex){var re=this.positions[K[0]],ee=this.positions[K[1]],j=this.positions[K[2]],Q=[(re[0]+ee[0]+j[0])/3,(re[1]+ee[1]+j[1])/3,(re[2]+ee[2]+j[2])/3];return{_cellCenter:!0,position:[U,G],index:V,cell:K,cellId:V,intensity:this.intensity[V],dataCoordinate:Q}}var ne=A(ue,[U*this.pixelRatio,this._resolution[1]-G*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ne)return null;for(var ae=ne[2],ie=0,oe=0;oe<K.length;++oe)ie+=ae[oe]*this.intensity[K[oe]];return{position:ne[1],index:K[ne[0]],cell:K,cellId:V,intensity:ie,dataCoordinate:this.positions[K[ne[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function R($){var V=a($,m.vertex,m.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.normal.location=4,V}function D($){var V=a($,M.vertex,M.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V}function O($){var V=a($,_.vertex,_.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function F($){var V=a($,T.vertex,T.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function Y($){var V=a($,x.vertex,x.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function X($){var V=a($,c.vertex,c.fragment);return V.attributes.position.location=0,V}function q($,V){arguments.length===1&&(V=$,$=V.gl);var K=$.getExtension("OES_standard_derivatives")||$.getExtension("MOZ_OES_standard_derivatives")||$.getExtension("WEBKIT_OES_standard_derivatives");if(!K)throw new Error("derivatives not supported");var se=R($),ue=D($),oe=O($),U=F($),G=Y($),re=X($),ee=u($,h(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=$.LINEAR_MIPMAP_LINEAR,ee.magFilter=$.LINEAR;var j=n($),Q=n($),ne=n($),ae=n($),ie=n($),fe=r($,[{buffer:j,type:$.FLOAT,size:3},{buffer:ie,type:$.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:$.FLOAT,size:4},{buffer:ne,type:$.FLOAT,size:2},{buffer:ae,type:$.FLOAT,size:3}]),me=n($),ce=n($),ye=n($),xe=n($),ke=r($,[{buffer:me,type:$.FLOAT,size:3},{buffer:xe,type:$.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:$.FLOAT,size:4},{buffer:ye,type:$.FLOAT,size:2}]),Ae=n($),Oe=n($),He=n($),Ge=n($),_e=n($),Ie=r($,[{buffer:Ae,type:$.FLOAT,size:3},{buffer:_e,type:$.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Oe,type:$.FLOAT,size:4},{buffer:He,type:$.FLOAT,size:2},{buffer:Ge,type:$.FLOAT,size:1}]),Ye=n($),qe=r($,[{buffer:Ye,type:$.FLOAT,size:3}]),Ue=new S($,ee,se,ue,oe,U,G,re,j,ie,Q,ne,ae,fe,me,xe,ce,ye,ke,Ae,_e,Oe,He,Ge,Ie,Ye,qe);return Ue.update(V),Ue}b.exports=q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(l,b,w){b.exports=u;var e=l("gl-buffer"),o=l("gl-shader"),a=l("./shaders");function n(s,i,f){this.plot=s,this.vbo=i,this.shader=f}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var s=[0,0],i=[0,0];return function(f,h,p,v,y){var g=this.plot,A=this.shader,m=g.gl;s[0]=f,s[1]=h,i[0]=p,i[1]=v,A.uniforms.lo=s,A.uniforms.hi=i,A.uniforms.color=y,m.drawArrays(m.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function u(s){var i=s.gl,f=e(i,[0,0,0,1,1,0,1,1]),h=o(i,a.boxVert,a.lineFrag);return new n(s,f,h)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(l,b,w){b.exports=i;var e=l("gl-buffer"),o=l("gl-shader"),a=l("binary-search-bounds"),n=l("./shaders");function r(f,h,p,v){this.plot=f,this.vbo=h,this.shader=p,this.tickShader=v,this.ticks=[[],[]]}function u(f,h){return f-h}var s=r.prototype;s.draw=function(){var f=[0,0],h=[0,0],p=[0,0];return function(){for(var v=this.plot,y=this.vbo,g=this.shader,A=this.ticks,m=v.gl,M=v._tickBounds,_=v.dataBox,T=v.viewBox,x=v.gridLineWidth,c=v.gridLineColor,L=v.gridLineEnable,S=v.pixelRatio,k=0;k<2;++k){var P=M[k],z=M[k+2],I=z-P,R=.5*(_[k+2]+_[k]),D=_[k+2]-_[k];h[k]=2*I/D,f[k]=2*(P-R)/D}g.bind(),y.bind(),g.attributes.dataCoord.pointer(),g.uniforms.dataShift=f,g.uniforms.dataScale=h;for(var O=0,k=0;k<2;++k){p[0]=p[1]=0,p[k]=1,g.uniforms.dataAxis=p,g.uniforms.lineWidth=x[k]/(T[k+2]-T[k])*S,g.uniforms.color=c[k];var F=A[k].length*6;L[k]&&F&&m.drawArrays(m.TRIANGLES,O,F),O+=F}}}(),s.drawTickMarks=function(){var f=[0,0],h=[0,0],p=[1,0],v=[0,1],y=[0,0],g=[0,0];return function(){for(var A=this.plot,m=this.vbo,M=this.tickShader,_=this.ticks,T=A.gl,x=A._tickBounds,c=A.dataBox,L=A.viewBox,S=A.pixelRatio,k=A.screenBox,P=k[2]-k[0],z=k[3]-k[1],I=L[2]-L[0],R=L[3]-L[1],D=0;D<2;++D){var O=x[D],F=x[D+2],Y=F-O,X=.5*(c[D+2]+c[D]),q=c[D+2]-c[D];h[D]=2*Y/q,f[D]=2*(O-X)/q}h[0]*=I/P,f[0]*=I/P,h[1]*=R/z,f[1]*=R/z,M.bind(),m.bind(),M.attributes.dataCoord.pointer();var $=M.uniforms;$.dataShift=f,$.dataScale=h;var V=A.tickMarkLength,K=A.tickMarkWidth,se=A.tickMarkColor,ue=0,oe=_[0].length*6,U=Math.min(a.ge(_[0],(c[0]-x[0])/(x[2]-x[0]),u),_[0].length),G=Math.min(a.gt(_[0],(c[2]-x[0])/(x[2]-x[0]),u),_[0].length),re=ue+6*U,ee=6*Math.max(0,G-U),j=Math.min(a.ge(_[1],(c[1]-x[1])/(x[3]-x[1]),u),_[1].length),Q=Math.min(a.gt(_[1],(c[3]-x[1])/(x[3]-x[1]),u),_[1].length),ne=oe+6*j,ae=6*Math.max(0,Q-j);y[0]=2*(L[0]-V[1])/P-1,y[1]=(L[3]+L[1])/z-1,g[0]=V[1]*S/P,g[1]=K[1]*S/z,ae&&($.color=se[1],$.tickScale=g,$.dataAxis=v,$.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,ae)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-V[0])/z-1,g[0]=K[0]*S/P,g[1]=V[0]*S/z,ee&&($.color=se[0],$.tickScale=g,$.dataAxis=p,$.screenOffset=y,T.drawArrays(T.TRIANGLES,re,ee)),y[0]=2*(L[2]+V[3])/P-1,y[1]=(L[3]+L[1])/z-1,g[0]=V[3]*S/P,g[1]=K[3]*S/z,ae&&($.color=se[3],$.tickScale=g,$.dataAxis=v,$.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,ae)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+V[2])/z-1,g[0]=K[2]*S/P,g[1]=V[2]*S/z,ee&&($.color=se[2],$.tickScale=g,$.dataAxis=p,$.screenOffset=y,T.drawArrays(T.TRIANGLES,re,ee))}}(),s.update=function(){var f=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(p){var v=p.ticks,y=p.bounds,g=new Float32Array(6*3*(v[0].length+v[1].length));this.plot.zeroLineEnable;for(var A=0,m=[[],[]],M=0;M<2;++M)for(var _=m[M],T=v[M],x=y[M],c=y[M+2],L=0;L<T.length;++L){var S=(T[L].x-x)/(c-x);_.push(S);for(var k=0;k<6;++k)g[A++]=S,g[A++]=f[k],g[A++]=h[k]}this.ticks=m,this.vbo.update(g)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function i(f){var h=f.gl,p=e(h),v=o(h,n.gridVert,n.gridFrag),y=o(h,n.tickVert,n.gridFrag),g=new r(f,p,v,y);return g}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(l,b,w){b.exports=u;var e=l("gl-buffer"),o=l("gl-shader"),a=l("./shaders");function n(s,i,f){this.plot=s,this.vbo=i,this.shader=f}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var s=[0,0],i=[0,0];return function(f,h,p,v,y,g){var A=this.plot,m=this.shader,M=A.gl;s[0]=f,s[1]=h,i[0]=p,i[1]=v,m.uniforms.start=s,m.uniforms.end=i,m.uniforms.width=y*A.pixelRatio,m.uniforms.color=g,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function u(s){var i=s.gl,f=e(i,[-1,-1,-1,1,1,-1,1,1]),h=o(i,a.lineVert,a.lineFrag),p=new n(s,f,h);return p}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(l,b,w){var e=l("glslify"),o=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);b.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:o,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:o,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:o,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(l,b,w){b.exports=i;var e=l("gl-buffer"),o=l("gl-shader"),a=l("text-cache"),n=l("binary-search-bounds"),r=l("./shaders");function u(f,h,p){this.plot=f,this.vbo=h,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=u.prototype;s.drawTicks=function(){var f=[0,0],h=[0,0],p=[0,0];return function(v){var y=this.plot,g=this.shader,A=this.tickX[v],m=this.tickOffset[v],M=y.gl,_=y.viewBox,T=y.dataBox,x=y.screenBox,c=y.pixelRatio,L=y.tickEnable,S=y.tickPad,k=y.tickColor,P=y.tickAngle,z=y.labelEnable,I=y.labelPad,R=y.labelColor,D=y.labelAngle,O=this.labelOffset[v],F=this.labelCount[v],Y=n.lt(A,T[v]),X=n.le(A,T[v+2]);f[0]=f[1]=0,f[v]=1,h[v]=(_[2+v]+_[v])/(x[2+v]-x[v])-1;var q=2/x[2+(v^1)]-x[v^1];h[v^1]=q*_[v^1]-1,L[v]&&(h[v^1]-=q*c*S[v],Y<X&&m[X]>m[Y]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=h,g.uniforms.color=k[v],g.uniforms.angle=P[v],M.drawArrays(M.TRIANGLES,m[Y],m[X]-m[Y]))),z[v]&&F&&(h[v^1]-=q*c*I[v],g.uniforms.dataAxis=p,g.uniforms.screenOffset=h,g.uniforms.color=R[v],g.uniforms.angle=D[v],M.drawArrays(M.TRIANGLES,O,F)),h[v^1]=q*_[2+(v^1)]-1,L[v+2]&&(h[v^1]+=q*c*S[v+2],Y<X&&m[X]>m[Y]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=h,g.uniforms.color=k[v+2],g.uniforms.angle=P[v+2],M.drawArrays(M.TRIANGLES,m[Y],m[X]-m[Y]))),z[v+2]&&F&&(h[v^1]+=q*c*I[v+2],g.uniforms.dataAxis=p,g.uniforms.screenOffset=h,g.uniforms.color=R[v+2],g.uniforms.angle=D[v+2],M.drawArrays(M.TRIANGLES,O,F))}}(),s.drawTitle=function(){var f=[0,0],h=[0,0];return function(){var p=this.plot,v=this.shader,y=p.gl,g=p.screenBox,A=p.titleCenter,m=p.titleAngle,M=p.titleColor,_=p.pixelRatio;if(!!this.titleCount){for(var T=0;T<2;++T)h[T]=2*(A[T]*_-g[T])/(g[2+T]-g[T])-1;v.bind(),v.uniforms.dataAxis=f,v.uniforms.screenOffset=h,v.uniforms.angle=m,v.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var f=[0,0],h=[0,0],p=[0,0];return function(){var v=this.plot,y=this.shader,g=v._tickBounds,A=v.dataBox,m=v.screenBox,M=v.viewBox;y.bind();for(var _=0;_<2;++_){var T=g[_],x=g[_+2],c=x-T,L=.5*(A[_+2]+A[_]),S=A[_+2]-A[_],k=M[_],P=M[_+2],z=P-k,I=m[_],R=m[_+2],D=R-I;h[_]=2*c/S*z/D,f[_]=2*(T-L)/S*z/D}p[1]=2*v.pixelRatio/(m[3]-m[1]),p[0]=p[1]*(m[3]-m[1])/(m[2]-m[0]),y.uniforms.dataScale=h,y.uniforms.dataShift=f,y.uniforms.textScale=p,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),s.update=function(f){var h=[],p=f.ticks,v=f.bounds,y,g,A,m,M;for(M=0;M<2;++M){var _=[Math.floor(h.length/3)],T=[-1/0],x=p[M];for(y=0;y<x.length;++y){var c=x[y],L=c.x,S=c.text,k=c.font||"sans-serif";m=c.fontSize||12;for(var P=1/(v[M+2]-v[M]),z=v[M],I=S.split(`
`),R=0;R<I.length;R++)for(A=a(k,I[R]).data,g=0;g<A.length;g+=2)h.push(A[g]*m,-A[g+1]*m-R*m*1.2,(L-z)*P);_.push(Math.floor(h.length/3)),T.push(L)}this.tickOffset[M]=_,this.tickX[M]=T}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(h.length/3),A=a(f.labelFont[M],f.labels[M],{textAlign:"center"}).data,m=f.labelSize[M],y=0;y<A.length;y+=2)h.push(A[y]*m,-A[y+1]*m,0);this.labelCount[M]=Math.floor(h.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(h.length/3),A=a(f.titleFont,f.title).data,m=f.titleSize,y=0;y<A.length;y+=2)h.push(A[y]*m,-A[y+1]*m,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset,this.vbo.update(h)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function i(f){var h=f.gl,p=e(h),v=o(h,r.textVert,r.textFrag),y=new u(f,p,v);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(l,b,w){b.exports=h;var e=l("gl-select-static"),o=l("./lib/grid"),a=l("./lib/text"),n=l("./lib/line"),r=l("./lib/box");function u(p,v){this.gl=p,this.pickBuffer=v,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=u.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var p=this.gl,v=this.screenBox,y=this.viewBox,g=this.dataBox,A=this.pixelRatio,m=this.grid,M=this.line,_=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var x=this.borderColor;p.clearColor(x[0]*x[3],x[1]*x[3],x[2]*x[3],x[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),p.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var c=this.backgroundColor;p.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),p.clear(p.COLOR_BUFFER_BIT),m.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(g[P]<=0&&g[P+2]>=0))){var z=v[P]-g[P]*(v[P+2]-v[P])/(g[P+2]-g[P]);P===0?M.drawLine(z,v[1],z,v[3],k[P],S[P]):M.drawLine(v[0],z,v[2],z,k[P],S[P])}}for(var P=0;P<T.length;++P)T[P].draw();p.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),p.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),M.bind();var I=this.borderLineEnable,R=this.borderLineWidth,D=this.borderLineColor;I[1]&&M.drawLine(y[0],y[1]-.5*R[1]*A,y[0],y[3]+.5*R[3]*A,R[1],D[1]),I[0]&&M.drawLine(y[0]-.5*R[0]*A,y[1],y[2]+.5*R[2]*A,y[1],R[0],D[0]),I[3]&&M.drawLine(y[2],y[1]-.5*R[1]*A,y[2],y[3]+.5*R[3]*A,R[3],D[3]),I[2]&&M.drawLine(y[0]-.5*R[0]*A,y[3],y[2]+.5*R[2]*A,y[3],R[2],D[2]),_.bind();for(var P=0;P<2;++P)_.drawTicks(P);this.titleEnable&&_.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var v=1,y=this.objects,g=0;g<y.length;++g)v=y[g].drawPick(v);p.end()}}}(),s.pick=function(){return function(p,v){if(!this.static){var y=this.pixelRatio,g=this.pickPixelRatio,A=this.viewBox,m=Math.round((p-A[0]/y)*g)|0,M=Math.round((v-A[1]/y)*g)|0,_=this.pickBuffer.query(m,M,this.pickRadius);if(!_)return null;for(var T=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),x=this.objects,c=0;c<x.length;++c){var L=x[c].pick(m,M,T);if(L)return L}return null}}}();function i(p){for(var v=p.slice(),y=0;y<v.length;++y)v[y]=v[y].slice();return v}function f(p,v){return p.x-v.x}s.setScreenBox=function(p){var v=this.screenBox,y=this.pixelRatio;v[0]=Math.round(p[0]*y)|0,v[1]=Math.round(p[1]*y)|0,v[2]=Math.round(p[2]*y)|0,v[3]=Math.round(p[3]*y)|0,this.setDirty()},s.setDataBox=function(p){var v=this.dataBox,y=v[0]!==p[0]||v[1]!==p[1]||v[2]!==p[2]||v[3]!==p[3];y&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],this.setDirty())},s.setViewBox=function(p){var v=this.pixelRatio,y=this.viewBox;y[0]=Math.round(p[0]*v)|0,y[1]=Math.round(p[1]*v)|0,y[2]=Math.round(p[2]*v)|0,y[3]=Math.round(p[3]*v)|0;var g=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*g)|0,Math.round((p[3]-p[1])*g)|0],this.setDirty()},s.update=function(p){p=p||{};var v=this.gl;this.pixelRatio=p.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(p.screenBox||[0,0,v.drawingBufferWidth/y,v.drawingBufferHeight/y]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var g=this.viewBox,A=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(p.dataBox||[-10,-10/A,10,10/A]),this.borderColor=p.borderColor!==!1?(p.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(g[0]+g[2])/y,(g[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var m=p.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var _=0;_<2;++_){var T=m[_].slice(0);T.length!==0&&(T.sort(f),M[_]=Math.min(M[_],T[0].x),M[_+2]=Math.max(M[_+2],T[T.length-1].x))}this.grid.update({bounds:M,ticks:m}),this.text.update({bounds:M,ticks:m,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();this.objects.length=0;for(var p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},s.removeObject=function(p){for(var v=this.objects,y=0;y<v.length;++y)if(v[y]===p){v.splice(y,1),this.setDirty();break}},s.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},s.removeOverlay=function(p){for(var v=this.overlays,y=0;y<v.length;++y)if(v[y]===p){v.splice(y,1),this.setOverlayDirty();break}};function h(p){var v=p.gl,y=e(v,[v.drawingBufferWidth,v.drawingBufferHeight]),g=new u(v,y);return g.grid=o(g),g.text=a(g),g.line=n(g),g.box=r(g),g.update(p),g}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(l,b,w){b.exports=s;var e=l("right-now"),o=l("3d-view"),a=l("mouse-change"),n=l("mouse-wheel"),r=l("mouse-event-offset"),u=l("has-passive-events");function s(i,f){i=i||document.body,f=f||{};var h=[.01,1/0];"distanceLimits"in f&&(h[0]=f.distanceLimits[0],h[1]=f.distanceLimits[1]),"zoomMin"in f&&(h[0]=f.zoomMin),"zoomMax"in f&&(h[1]=f.zoomMax);var p=o({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:h}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,g=i.clientWidth,A=i.clientHeight,m={keyBindingMode:"rotate",enableWheel:!0,view:p,element:i,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:p.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var M=e(),_=this.delay,T=M-2*_;p.idle(M-_),p.recalcMatrix(T),p.flush(M-(100+_*2));for(var x=!0,c=p.computedMatrix,L=0;L<16;++L)x=x&&v[L]===c[L],v[L]=c[L];var S=i.clientWidth===g&&i.clientHeight===A;return g=i.clientWidth,A=i.clientHeight,x?!S:(y=Math.exp(p.computedRadius[0]),!0)},lookAt:function(M,_,T){p.lookAt(p.lastT(),M,_,T)},rotate:function(M,_,T){p.rotate(p.lastT(),M,_,T)},pan:function(M,_,T){p.pan(p.lastT(),M,_,T)},translate:function(M,_,T){p.translate(p.lastT(),M,_,T)}};return Object.defineProperties(m,{matrix:{get:function(){return p.computedMatrix},set:function(M){return p.setMatrix(p.lastT(),M),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(M){var _=p.computedUp.slice(),T=p.computedEye.slice(),x=p.computedCenter.slice();if(p.setMode(M),M==="turntable"){var c=e();p._active.lookAt(c,T,x,_),p._active.lookAt(c+500,T,x,[0,0,1]),p._active.flush(c)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(M){return p.lookAt(p.lastT(),null,M),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(M){return p.lookAt(p.lastT(),M),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(M){return p.lookAt(p.lastT(),null,null,M),p.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return p.setDistance(p.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(h)},set:function(M){return p.setDistanceLimits(M),M},enumerable:!0}}),i.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),m._lastX=-1,m._lastY=-1,m._lastMods={shift:!1,control:!1,alt:!1,meta:!1},m.enableMouseListeners=function(){m.mouseListener=a(i,M),i.addEventListener("touchstart",function(_){var T=r(_.changedTouches[0],i);M(0,T[0],T[1],m._lastMods),M(1,T[0],T[1],m._lastMods)},u?{passive:!0}:!1),i.addEventListener("touchmove",function(_){var T=r(_.changedTouches[0],i);M(1,T[0],T[1],m._lastMods),_.preventDefault()},u?{passive:!1}:!1),i.addEventListener("touchend",function(_){M(0,m._lastX,m._lastY,m._lastMods)},u?{passive:!0}:!1);function M(_,T,x,c){var L=m.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",z=!!c.control,I=!!c.alt,R=!!c.shift,D=!!(_&1),O=!!(_&2),F=!!(_&4),Y=1/i.clientHeight,X=Y*(T-m._lastX),q=Y*(x-m._lastY),$=m.flipX?1:-1,V=m.flipY?1:-1,K=Math.PI*m.rotateSpeed,se=e();if(m._lastX!==-1&&m._lastY!==-1&&((S&&D&&!z&&!I&&!R||D&&!z&&!I&&R)&&p.rotate(se,$*K*X,-V*K*q,0),(k&&D&&!z&&!I&&!R||O||D&&z&&!I&&!R)&&p.pan(se,-m.translateSpeed*X*y,m.translateSpeed*q*y,0),P&&D&&!z&&!I&&!R||F||D&&!z&&I&&!R)){var ue=-m.zoomSpeed*q/window.innerHeight*(se-p.lastT())*100;p.pan(se,0,0,y*(Math.exp(ue)-1))}return m._lastX=T,m._lastY=x,m._lastMods=c,!0}}m.wheelListener=n(i,function(_,T){if(m.keyBindingMode!==!1&&!!m.enableWheel){var x=m.flipX?1:-1,c=m.flipY?1:-1,L=e();if(Math.abs(_)>Math.abs(T))p.rotate(L,0,0,-_*x*Math.PI*m.rotateSpeed/window.innerWidth);else if(!m._ortho){var S=-m.zoomSpeed*c*T/window.innerHeight*(L-p.lastT())/20;p.pan(L,0,0,y*(Math.exp(S)-1))}}},!0)},m.enableMouseListeners(),m}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);b.exports=function(r){return o(r,a,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(l,b,w){var e=l("./camera.js"),o=l("gl-axes3d"),a=l("gl-axes3d/properties"),n=l("gl-spikes3d"),r=l("gl-select-static"),u=l("gl-fbo"),s=l("a-big-triangle"),i=l("mouse-change"),f=l("gl-mat4/perspective"),h=l("gl-mat4/ortho"),p=l("./lib/shader"),v=l("is-mobile")({tablet:!0,featureDetect:!0});b.exports={createScene:M,createCamera:e};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(T,x){var c=null;try{c=T.getContext("webgl",x),c||(c=T.getContext("experimental-webgl",x))}catch{return null}return c}function A(T){var x=Math.round(Math.log(Math.abs(T))/Math.log(10));if(x<0){var c=Math.round(Math.pow(10,-x));return Math.ceil(T*c)/c}else if(x>0){var c=Math.round(Math.pow(10,x));return Math.ceil(T/c)*c}return Math.ceil(T)}function m(T){return typeof T=="boolean"?T:!0}function M(T){T=T||{},T.camera=T.camera||{};var x=T.canvas;if(!x)if(x=document.createElement("canvas"),T.container){var c=T.container;c.appendChild(x)}else document.body.appendChild(x);var L=T.gl;if(L||(T.glOptions&&(v=!!T.glOptions.preserveDrawingBuffer),L=g(x,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!L)throw new Error("webgl not supported");var S=T.bounds||[[-10,-10,-10],[10,10,10]],k=new y,P=u(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!v}),z=p(L),I=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,R={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:I},D=T.axes||{},O=o(L,D);O.enable=!D.disable;var F=T.spikes||{},Y=n(L,F),X=[],q=[],$=[],V=[],K=!0,se=!0,ue=new Array(16),oe=new Array(16),U={view:null,projection:ue,model:oe,_ortho:!1},se=!0,G=[L.drawingBufferWidth,L.drawingBufferHeight],re=T.cameraObject||e(x,R),ee={gl:L,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:x,selection:k,camera:re,axes:O,axesPixels:null,spikes:Y,bounds:S,objects:X,shape:G,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:m(T.autoResize),autoBounds:m(T.autoBounds),autoScale:!!T.autoScale,autoCenter:m(T.autoCenter),clipToBounds:m(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:U,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,se=!0},setBounds:function(xe,ke){this.bounds[0][xe]=ke.min,this.bounds[1][xe]=ke.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[L.drawingBufferWidth/ee.pixelRatio|0,L.drawingBufferHeight/ee.pixelRatio|0];function Q(){if(!ee._stopped&&!!ee.autoResize){var xe=x.parentNode,ke=1,Ae=1;xe&&xe!==document.body?(ke=xe.clientWidth,Ae=xe.clientHeight):(ke=window.innerWidth,Ae=window.innerHeight);var Oe=Math.ceil(ke*ee.pixelRatio)|0,He=Math.ceil(Ae*ee.pixelRatio)|0;if(Oe!==x.width||He!==x.height){x.width=Oe,x.height=He;var Ge=x.style;Ge.position=Ge.position||"absolute",Ge.left="0px",Ge.top="0px",Ge.width=ke+"px",Ge.height=Ae+"px",K=!0}}}ee.autoResize&&Q(),window.addEventListener("resize",Q);function ne(){for(var xe=X.length,ke=V.length,Ae=0;Ae<ke;++Ae)$[Ae]=0;e:for(var Ae=0;Ae<xe;++Ae){var Oe=X[Ae],He=Oe.pickSlots;if(!He){q[Ae]=-1;continue}for(var Ge=0;Ge<ke;++Ge)if($[Ge]+He<255){q[Ae]=Ge,Oe.setPickBase($[Ge]+1),$[Ge]+=He;continue e}var _e=r(L,G);q[Ae]=ke,V.push(_e),$.push(He),Oe.setPickBase(1),ke+=1}for(;ke>0&&$[ke-1]===0;)$.pop(),V.pop().dispose()}ee.update=function(xe){ee._stopped||(K=!0,se=!0)},ee.add=function(xe){ee._stopped||(xe.axes=O,X.push(xe),q.push(-1),K=!0,se=!0,ne())},ee.remove=function(xe){if(!ee._stopped){var ke=X.indexOf(xe);ke<0||(X.splice(ke,1),q.pop(),K=!0,se=!0,ne())}},ee.dispose=function(){if(!ee._stopped&&(ee._stopped=!0,window.removeEventListener("resize",Q),x.removeEventListener("webglcontextlost",ae),ee.mouseListener.enabled=!1,!ee.contextLost)){O.dispose(),Y.dispose();for(var xe=0;xe<X.length;++xe)X[xe].dispose();P.dispose();for(var xe=0;xe<V.length;++xe)V[xe].dispose();z.dispose(),L=null,O=null,Y=null,X=[]}},ee._mouseRotating=!1,ee._prevButtons=0,ee.enableMouseListeners=function(){ee.mouseListener=i(x,function(xe,ke,Ae){if(!ee._stopped){var Oe=V.length,He=X.length,Ge=k.object;k.distance=1/0,k.mouse[0]=ke,k.mouse[1]=Ae,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var _e=!1;if(xe&&ee._prevButtons)ee._mouseRotating=!0;else{ee._mouseRotating&&(se=!0),ee._mouseRotating=!1;for(var Ie=0;Ie<Oe;++Ie){var Ye=V[Ie].query(ke,j[1]-Ae-1,ee.pickRadius);if(Ye){if(Ye.distance>k.distance)continue;for(var qe=0;qe<He;++qe){var Ue=X[qe];if(q[qe]===Ie){var Re=Ue.pick(Ye);Re&&(k.buttons=xe,k.screen=Ye.coord,k.distance=Ye.distance,k.object=Ue,k.index=Re.distance,k.dataPosition=Re.position,k.dataCoordinate=Re.dataCoordinate,k.data=Re,_e=!0)}}}}}Ge&&Ge!==k.object&&(Ge.highlight&&Ge.highlight(null),K=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),K=!0),_e=_e||k.object!==Ge,_e&&ee.onselect&&ee.onselect(k),xe&1&&!(ee._prevButtons&1)&&ee.onclick&&ee.onclick(k),ee._prevButtons=xe}})};function ae(){if(ee.contextLost)return!0;L.isContextLost()&&(ee.contextLost=!0,ee.mouseListener.enabled=!1,ee.selection.object=null,ee.oncontextloss&&ee.oncontextloss())}x.addEventListener("webglcontextlost",ae);function ie(){if(!ae()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=X.length,ke=V.length,Ae=0;Ae<ke;++Ae){var Oe=V[Ae];Oe.shape=j,Oe.begin();for(var He=0;He<xe;++He)if(q[He]===Ae){var Ge=X[He];Ge.drawPick&&(Ge.pixelRatio=1,Ge.drawPick(U))}Oe.end()}}}var fe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=[fe[0].slice(),fe[1].slice()];function ce(){if(!ae()){Q();var xe=ee.camera.tick();U.view=ee.camera.matrix,K=K||xe,se=se||xe,O.pixelRatio=ee.pixelRatio,Y.pixelRatio=ee.pixelRatio;var ke=X.length,Ae=fe[0],Oe=fe[1];Ae[0]=Ae[1]=Ae[2]=1/0,Oe[0]=Oe[1]=Oe[2]=-1/0;for(var He=0;He<ke;++He){var Ge=X[He];Ge.pixelRatio=ee.pixelRatio,Ge.axes=ee.axes,K=K||!!Ge.dirty,se=se||!!Ge.dirty;var _e=Ge.bounds;if(_e)for(var Ie=_e[0],Ye=_e[1],qe=0;qe<3;++qe)Ae[qe]=Math.min(Ae[qe],Ie[qe]),Oe[qe]=Math.max(Oe[qe],Ye[qe])}var Ue=ee.bounds;if(ee.autoBounds)for(var qe=0;qe<3;++qe){if(Oe[qe]<Ae[qe])Ae[qe]=-1,Oe[qe]=1;else{Ae[qe]===Oe[qe]&&(Ae[qe]-=1,Oe[qe]+=1);var Re=.05*(Oe[qe]-Ae[qe]);Ae[qe]=Ae[qe]-Re,Oe[qe]=Oe[qe]+Re}Ue[0][qe]=Ae[qe],Ue[1][qe]=Oe[qe]}for(var Ve=!1,qe=0;qe<3;++qe)Ve=Ve||me[0][qe]!==Ue[0][qe]||me[1][qe]!==Ue[1][qe],me[0][qe]=Ue[0][qe],me[1][qe]=Ue[1][qe];if(se=se||Ve,K=K||Ve,!!K){if(Ve){for(var dt=[0,0,0],He=0;He<3;++He)dt[He]=A((Ue[1][He]-Ue[0][He])/10);O.autoTicks?O.update({bounds:Ue,tickSpacing:dt}):O.update({bounds:Ue})}var Dt=L.drawingBufferWidth,Gt=L.drawingBufferHeight;G[0]=Dt,G[1]=Gt,j[0]=Math.max(Dt/ee.pixelRatio,1)|0,j[1]=Math.max(Gt/ee.pixelRatio,1)|0,_(ee,I);for(var He=0;He<ke;++He){var Ge=X[He];Ge.axesBounds=Ue,ee.clipToBounds&&(Ge.clipBounds=Ue)}k.object&&(ee.snapToData?Y.position=k.dataCoordinate:Y.position=k.dataPosition,Y.bounds=Ue),se&&(se=!1,ie()),ee.axesPixels=a(ee.axes,U,Dt,Gt),ee.onrender&&ee.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Dt,Gt),ee.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var kt=!1;O.enable&&(kt=kt||O.isTransparent(),O.draw(U)),Y.axes=O,k.object&&Y.draw(U),L.disable(L.CULL_FACE);for(var He=0;He<ke;++He){var Ge=X[He];Ge.axes=O,Ge.pixelRatio=ee.pixelRatio,Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(U),Ge.isTransparent&&Ge.isTransparent()&&(kt=!0)}if(kt){P.shape=G,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(U);for(var He=0;He<ke;++He){var Ge=X[He];Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(U)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(U);for(var He=0;He<ke;++He){var Ge=X[He];Ge.isTransparent&&Ge.isTransparent()&&Ge.drawTransparent(U)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),z.bind(),P.color[0].bind(0),z.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}K=!1;for(var He=0;He<ke;++He)X[He].dirty=!1}}}function ye(){ee._stopped||ee.contextLost||(ce(),requestAnimationFrame(ye))}return ee.enableMouseListeners(),ye(),ee.redraw=function(){ee._stopped||(K=!0,ce())},ee}function _(T,x){var c=T.bounds,L=T.cameraParams,S=L.projection,k=L.model,P=T.gl.drawingBufferWidth,z=T.gl.drawingBufferHeight,I=T.zNear,R=T.zFar,D=T.fovy,O=P/z;x?(h(S,-O,O,-1,1,I,R),L._ortho=!0):(f(S,D,O,I,R),L._ortho=!1);for(var F=0;F<16;++F)k[F]=0;k[15]=1;for(var Y=0,F=0;F<3;++F)Y=Math.max(Y,c[1][F]-c[0][F]);for(var F=0;F<3;++F)T.autoScale?k[5*F]=T.aspect[F]/(c[1][F]-c[0][F]):k[5*F]=1/Y,T.autoCenter&&(k[12+F]=-k[5*F]*.5*(c[0][F]+c[1][F]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(l,b,w){var e=l("glslify");w.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),w.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),w.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),w.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("typedarray-pool"),n=l("./lib/shader");b.exports=i;function r(f,h,p,v,y){this.plot=f,this.offsetBuffer=h,this.pickBuffer=p,this.shader=v,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var u=r.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(f){var h;f=f||{};function p(_,T){return _ in f?f[_]:T}this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var v=f.positions.length>>>1,y=f.positions instanceof Float32Array,g=f.idToIndex instanceof Int32Array&&f.idToIndex.length>=v,A=f.positions,m=y?A:a.mallocFloat32(A.length),M=g?f.idToIndex:a.mallocInt32(v);if(y||m.set(A),!g)for(m.set(A),h=0;h<v;h++)M[h]=h;this.points=A,this.offsetBuffer.update(m),this.pickBuffer.update(M),y||a.free(m),g||a.free(M),this.pointCount=v,this.pickOffset=0};function s(f,h){var p=0,v=f.length>>>1,y;for(y=0;y<v;y++){var g=f[y*2],A=f[y*2+1];g>=h[0]&&g<=h[2]&&A>=h[1]&&A<=h[3]&&p++}return p}u.unifiedDraw=function(){var f=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(p){var v=p!==void 0,y=v?this.pickShader:this.shader,g=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return p;var m=A[2]-A[0],M=A[3]-A[1],_=s(this.points,A),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));f[0]=2/m,f[4]=2/M,f[6]=-2*A[0]/m-1,f[7]=-2*A[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=f,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=T<5,y.uniforms.pointSize=T,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=p&255,h[1]=p>>8&255,h[2]=p>>16&255,h[3]=p>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(g.UNSIGNED_BYTE),y.uniforms.pickOffset=h,this.pickOffset=p);var x=g.getParameter(g.BLEND),c=g.getParameter(g.DITHER);return x&&!this.blend&&g.disable(g.BLEND),c&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),x&&!this.blend&&g.enable(g.BLEND),c&&g.enable(g.DITHER),p+this.pointCount}}(),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(f,h,p){var v=this.pickOffset,y=this.pointCount;if(p<v||p>=v+y)return null;var g=p-v,A=this.points;return{object:this,pointId:g,dataCoord:[A[2*g],A[2*g+1]]}};function i(f,h){var p=f.gl,v=o(p),y=o(p),g=e(p,n.pointVertex,n.pointFragment),A=e(p,n.pickVertex,n.pickFragment),m=new r(f,v,y,g,A);return m.update(h),f.addObject(m),m}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=a[0],s=a[1],i=a[2],f=a[3],h=n[0],p=n[1],v=n[2],y=n[3],g,A,m,M,_;return A=u*h+s*p+i*v+f*y,A<0&&(A=-A,h=-h,p=-p,v=-v,y=-y),1-A>1e-6?(g=Math.acos(A),m=Math.sin(g),M=Math.sin((1-r)*g)/m,_=Math.sin(r*g)/m):(M=1-r,_=r),o[0]=M*u+_*h,o[1]=M*s+_*p,o[2]=M*i+_*v,o[3]=M*f+_*y,o}},{}],125:[function(l,b,w){b.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(l,b,w){var e=l("vectorize-text");b.exports=a;var o={};function a(n,r,u){var s=o[r];if(s||(s=o[r]={}),n in s)return s[n];var i={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};i.triangles=!0;var f=e(n,i);i.triangles=!1;var h=e(n,i),p,v;if(u&&u!==1){for(p=0;p<f.positions.length;++p)for(v=0;v<f.positions[p].length;++v)f.positions[p][v]/=u;for(p=0;p<h.positions.length;++p)for(v=0;v<h.positions[p].length;++v)h.positions[p][v]/=u}var y=[[1/0,1/0],[-1/0,-1/0]],g=h.positions.length;for(p=0;p<g;++p){var A=h.positions[p];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],A[v]),y[1][v]=Math.max(y[1][v],A[v])}return s[n]=[f,h,y]}},{"vectorize-text":311}],127:[function(l,b,w){var e=l("gl-shader"),o=l("glslify"),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:a,fragment:u,attributes:i},h={vertex:n,fragment:u,attributes:i},p={vertex:r,fragment:u,attributes:i},v={vertex:a,fragment:s,attributes:i},y={vertex:n,fragment:s,attributes:i},g={vertex:r,fragment:s,attributes:i};function A(m,M){var _=e(m,M),T=_.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,_}w.createPerspective=function(m){return A(m,f)},w.createOrtho=function(m){return A(m,h)},w.createProject=function(m){return A(m,p)},w.createPickPerspective=function(m){return A(m,v)},w.createPickOrtho=function(m){return A(m,y)},w.createPickProject=function(m){return A(m,g)}},{"gl-shader":132,glslify:231}],128:[function(l,b,w){var e=l("is-string-blank"),o=l("gl-buffer"),a=l("gl-vao"),n=l("typedarray-pool"),r=l("gl-mat4/multiply"),u=l("./lib/shaders"),s=l("./lib/glyphs"),i=l("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=q;function h($,V){var K=$[0],se=$[1],ue=$[2],oe=$[3];return $[0]=V[0]*K+V[4]*se+V[8]*ue+V[12]*oe,$[1]=V[1]*K+V[5]*se+V[9]*ue+V[13]*oe,$[2]=V[2]*K+V[6]*se+V[10]*ue+V[14]*oe,$[3]=V[3]*K+V[7]*se+V[11]*ue+V[15]*oe,$}function p($,V,K,se){return h(se,se),h(se,se),h(se,se)}function v($,V){this.index=$,this.dataCoordinate=this.position=V}function y($){return $===!0||$>1?1:$}function g($,V,K,se,ue,oe,U,G,re,ee,j,Q){this.gl=$,this.pixelRatio=1,this.shader=V,this.orthoShader=K,this.projectShader=se,this.pointBuffer=ue,this.colorBuffer=oe,this.glyphBuffer=U,this.idBuffer=G,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ee,this.pickOrthoShader=j,this.pickProjectShader=Q,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=g.prototype;A.pickSlots=1,A.setPickBase=function($){this.pickId=$},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var $=0;$<3;++$)if(this.axesProject[$]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var $=0;$<3;++$)if(this.axesProject[$]&&!this.projectHasAlpha)return!0;return!1};var m=[0,0],M=[0,0,0],_=[0,0,0],T=[0,0,0,1],x=[0,0,0,1],c=f.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k($){return $[0]=$[1]=$[2]=0,$}function P($,V){return $[0]=V[0],$[1]=V[1],$[2]=V[2],$[3]=1,$}function z($,V,K,se){return $[0]=V[0],$[1]=V[1],$[2]=V[2],$[K]=se,$}function I($){for(var V=S,K=0;K<2;++K)for(var se=0;se<3;++se)V[K][se]=Math.max(Math.min($[K][se],1e8),-1e8);return V}function R($,V,K,se){var ue=V.axesProject,oe=V.gl,U=$.uniforms,G=K.model||f,re=K.view||f,ee=K.projection||f,j=V.axesBounds,Q=I(V.clipBounds),ne;V.axes&&V.axes.lastCubeProps?ne=V.axes.lastCubeProps.axis:ne=[1,1,1],m[0]=2/oe.drawingBufferWidth,m[1]=2/oe.drawingBufferHeight,$.bind(),U.view=re,U.projection=ee,U.screenSize=m,U.highlightId=V.highlightId,U.highlightScale=V.highlightScale,U.clipBounds=Q,U.pickGroup=V.pickId/255,U.pixelRatio=se;for(var ae=0;ae<3;++ae)if(!!ue[ae]){U.scale=V.projectScale[ae],U.opacity=V.projectOpacity[ae];for(var ie=c,fe=0;fe<16;++fe)ie[fe]=0;for(var fe=0;fe<4;++fe)ie[5*fe]=1;ie[5*ae]=0,ne[ae]<0?ie[12+ae]=j[0][ae]:ie[12+ae]=j[1][ae],r(ie,G,ie),U.model=ie;var me=(ae+1)%3,ce=(ae+2)%3,ye=k(M),xe=k(_);ye[me]=1,xe[ce]=1;var ke=p(ee,re,G,P(T,ye)),Ae=p(ee,re,G,P(x,xe));if(Math.abs(ke[1])>Math.abs(Ae[1])){var Oe=ke;ke=Ae,Ae=Oe,Oe=ye,ye=xe,xe=Oe;var He=me;me=ce,ce=He}ke[0]<0&&(ye[me]=-1),Ae[1]>0&&(xe[ce]=-1);for(var Ge=0,_e=0,fe=0;fe<4;++fe)Ge+=Math.pow(G[4*me+fe],2),_e+=Math.pow(G[4*ce+fe],2);ye[me]/=Math.sqrt(Ge),xe[ce]/=Math.sqrt(_e),U.axes[0]=ye,U.axes[1]=xe,U.fragClipBounds[0]=z(L,Q[0],ae,-1e8),U.fragClipBounds[1]=z(L,Q[1],ae,1e8),V.vao.bind(),V.vao.draw(oe.TRIANGLES,V.vertexCount),V.lineWidth>0&&(oe.lineWidth(V.lineWidth*se),V.vao.draw(oe.LINES,V.lineVertexCount,V.vertexCount)),V.vao.unbind()}}var D=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],F=[D,O];function Y($,V,K,se,ue,oe,U){var G=K.gl;if((oe===K.projectHasAlpha||U)&&R(V,K,se,ue),oe===K.hasAlpha||U){$.bind();var re=$.uniforms;re.model=se.model||f,re.view=se.view||f,re.projection=se.projection||f,m[0]=2/G.drawingBufferWidth,m[1]=2/G.drawingBufferHeight,re.screenSize=m,re.highlightId=K.highlightId,re.highlightScale=K.highlightScale,re.fragClipBounds=F,re.clipBounds=K.axes.bounds,re.opacity=K.opacity,re.pickGroup=K.pickId/255,re.pixelRatio=ue,K.vao.bind(),K.vao.draw(G.TRIANGLES,K.vertexCount),K.lineWidth>0&&(G.lineWidth(K.lineWidth*ue),K.vao.draw(G.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}A.draw=function($){var V=this.useOrtho?this.orthoShader:this.shader;Y(V,this.projectShader,this,$,this.pixelRatio,!1,!1)},A.drawTransparent=function($){var V=this.useOrtho?this.orthoShader:this.shader;Y(V,this.projectShader,this,$,this.pixelRatio,!0,!1)},A.drawPick=function($){var V=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;Y(V,this.pickProjectShader,this,$,1,!0,!0)},A.pick=function($){if(!$||$.id!==this.pickId)return null;var V=$.value[2]+($.value[1]<<8)+($.value[0]<<16);if(V>=this.pointCount||V<0)return null;var K=this.points[V],se=this._selectResult;se.index=V;for(var ue=0;ue<3;++ue)se.position[ue]=se.dataCoordinate[ue]=K[ue];return se},A.highlight=function($){if(!$)this.highlightId=[1,1,1,1];else{var V=$.index,K=V&255,se=V>>8&255,ue=V>>16&255;this.highlightId=[K/255,se/255,ue/255,0]}};function X($,V,K,se){var ue;Array.isArray($)?V<$.length?ue=$[V]:ue=void 0:ue=$,ue=i(ue);var oe=!0;e(ue)&&(ue="\u25BC",oe=!1);var U=s(ue,K,se);return{mesh:U[0],lines:U[1],bounds:U[2],visible:oe}}A.update=function($){if($=$||{},"perspective"in $&&(this.useOrtho=!$.perspective),"orthographic"in $&&(this.useOrtho=!!$.orthographic),"lineWidth"in $&&(this.lineWidth=$.lineWidth),"project"in $)if(Array.isArray($.project))this.axesProject=$.project;else{var V=!!$.project;this.axesProject=[V,V,V]}if("projectScale"in $)if(Array.isArray($.projectScale))this.projectScale=$.projectScale.slice();else{var K=+$.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in $){if(Array.isArray($.projectOpacity))this.projectOpacity=$.projectOpacity.slice();else{var K=+$.projectOpacity;this.projectOpacity=[K,K,K]}for(var se=0;se<3;++se)this.projectOpacity[se]=y(this.projectOpacity[se]),this.projectOpacity[se]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in $&&(this.opacity=y($.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ue=$.position,oe=$.font||"normal",U=$.alignment||[0,0],G,re;if(U.length===2)G=U[0],re=U[1];else{G=[],re=[];for(var se=0;se<U.length;++se)G[se]=U[se][0],re[se]=U[se][1]}var ee=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],Q=$.glyph,ne=$.color,ae=$.size,ie=$.angle,fe=$.lineColor,me=-1,ce=0,ye=0,xe=0;if(ue.length){xe=ue.length;e:for(var se=0;se<xe;++se){for(var ke=ue[se],Ae=0;Ae<3;++Ae)if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;var Oe=X(Q,se,oe,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds;ce+=He.cells.length*3,ye+=Ge.edges.length*2}}var Ie=ce+ye,Ye=n.mallocFloat(3*Ie),qe=n.mallocFloat(4*Ie),Ue=n.mallocFloat(2*Ie),Re=n.mallocUint32(Ie);if(Ie>0){var Ve=0,dt=ce,Dt=[0,0,0,1],Gt=[0,0,0,1],kt=Array.isArray(ne)&&Array.isArray(ne[0]),zt=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(var se=0;se<xe;++se){me+=1;for(var ke=ue[se],Ae=0;Ae<3;++Ae){if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;j[Ae]=Math.max(j[Ae],ke[Ae]),ee[Ae]=Math.min(ee[Ae],ke[Ae])}var Oe=X(Q,se,oe,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds,Bt=Oe.visible;if(!Bt)Dt=[1,1,1,0];else if(Array.isArray(ne)){var Lt;if(kt?se<ne.length?Lt=ne[se]:Lt=[0,0,0,0]:Lt=ne,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Dt[Ae]=Lt[Ae];Dt[3]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Dt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Dt[0]=Dt[1]=Dt[2]=0,Dt[3]=1;if(!Bt)Gt=[1,1,1,0];else if(Array.isArray(fe)){var Lt;if(zt?se<fe.length?Lt=fe[se]:Lt=[0,0,0,0]:Lt=fe,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Gt[Ae]=Lt[Ae];Gt[Ae]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Gt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Gt[0]=Gt[1]=Gt[2]=0,Gt[3]=1;var Mt=.5;Bt?Array.isArray(ae)?se<ae.length?Mt=+ae[se]:Mt=12:ae?Mt=+ae:this.useOrtho&&(Mt=12):Mt=0;var it=0;Array.isArray(ie)?se<ie.length?it=+ie[se]:it=0:ie&&(it=+ie);for(var ht=Math.cos(it),Qe=Math.sin(it),ke=ue[se],Ae=0;Ae<3;++Ae)j[Ae]=Math.max(j[Ae],ke[Ae]),ee[Ae]=Math.min(ee[Ae],ke[Ae]);var Ce=G,je=re,Ce=0;Array.isArray(G)?se<G.length?Ce=G[se]:Ce=0:G&&(Ce=G);var je=0;Array.isArray(re)?se<re.length?je=re[se]:je=0:re&&(je=re),Ce*=Ce>0?1-_e[0][0]:Ce<0?1+_e[1][0]:1,je*=je>0?1-_e[0][1]:je<0?1+_e[1][1]:1;for(var rt=[Ce,je],ut=He.cells||[],Pt=He.positions||[],Ae=0;Ae<ut.length;++Ae)for(var St=ut[Ae],Nt=0;Nt<3;++Nt){for(var Xt=0;Xt<3;++Xt)Ye[3*Ve+Xt]=ke[Xt];for(var Xt=0;Xt<4;++Xt)qe[4*Ve+Xt]=Dt[Xt];Re[Ve]=me;var Ot=Pt[St[Nt]];Ue[2*Ve]=Mt*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*Ve+1]=Mt*(Qe*Ot[0]+ht*Ot[1]+rt[1]),Ve+=1}for(var ut=Ge.edges,Pt=Ge.positions,Ae=0;Ae<ut.length;++Ae)for(var St=ut[Ae],Nt=0;Nt<2;++Nt){for(var Xt=0;Xt<3;++Xt)Ye[3*dt+Xt]=ke[Xt];for(var Xt=0;Xt<4;++Xt)qe[4*dt+Xt]=Gt[Xt];Re[dt]=me;var Ot=Pt[St[Nt]];Ue[2*dt]=Mt*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*dt+1]=Mt*(Qe*Ot[0]+ht*Ot[1]+rt[1]),dt+=1}}}this.bounds=[ee,j],this.points=ue,this.pointCount=ue.length,this.vertexCount=ce,this.lineVertexCount=ye,this.pointBuffer.update(Ye),this.colorBuffer.update(qe),this.glyphBuffer.update(Ue),this.idBuffer.update(Re),n.free(Ye),n.free(qe),n.free(Ue),n.free(Re)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function q($){var V=$.gl,K=u.createPerspective(V),se=u.createOrtho(V),ue=u.createProject(V),oe=u.createPickPerspective(V),U=u.createPickOrtho(V),G=u.createPickProject(V),re=o(V),ee=o(V),j=o(V),Q=o(V),ne=a(V,[{buffer:re,size:3,type:V.FLOAT},{buffer:ee,size:4,type:V.FLOAT},{buffer:j,size:2,type:V.FLOAT},{buffer:Q,size:4,type:V.UNSIGNED_BYTE,normalized:!0}]),ae=new g(V,K,se,ue,re,ee,j,Q,ne,oe,U,G);return ae.update($),ae}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(l,b,w){var e=l("glslify");w.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),w.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("./lib/shaders");b.exports=u;function n(s,i,f){this.plot=s,this.boxBuffer=i,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var s=this.plot,i=this.selectBox,f=this.borderWidth;this.innerFill;var h=this.innerColor;this.outerFill;var p=this.outerColor,v=this.borderColor,y=s.box,g=s.screenBox,A=s.dataBox,m=s.viewBox,M=s.pixelRatio,_=(i[0]-A[0])*(m[2]-m[0])/(A[2]-A[0])+m[0],T=(i[1]-A[1])*(m[3]-m[1])/(A[3]-A[1])+m[1],x=(i[2]-A[0])*(m[2]-m[0])/(A[2]-A[0])+m[0],c=(i[3]-A[1])*(m[3]-m[1])/(A[3]-A[1])+m[1];if(_=Math.max(_,m[0]),T=Math.max(T,m[1]),x=Math.min(x,m[2]),c=Math.min(c,m[3]),!(x<_||c<T)){y.bind();var L=g[2]-g[0],S=g[3]-g[1];if(this.outerFill&&(y.drawBox(0,0,L,T,p),y.drawBox(0,T,_,c,p),y.drawBox(0,c,L,S,p),y.drawBox(x,T,L,c,p)),this.innerFill&&y.drawBox(_,T,x,c,h),f>0){var k=f*M;y.drawBox(_-k,T-k,x+k,T+k,v),y.drawBox(_-k,c-k,x+k,c+k,v),y.drawBox(_-k,T-k,_+k,c+k,v),y.drawBox(x-k,T-k,x+k,c+k,v)}}}},r.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function u(s,i){var f=s.gl,h=o(f,[0,0,0,1,1,0,1,1]),p=e(f,a.boxVertex,a.boxFragment),v=new n(s,h,p);return v.update(i),s.addOverlay(v),v}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(l,b,w){b.exports=f;var e=l("gl-fbo"),o=l("typedarray-pool"),a=l("ndarray"),n=l("bit-twiddle").nextPow2,r=function(h,p,v){for(var y=1e8,g=-1,A=-1,m=h.shape[0],M=h.shape[1],_=0;_<m;_++)for(var T=0;T<M;T++){var x=h.get(_,T,0),c=h.get(_,T,1),L=h.get(_,T,2),S=h.get(_,T,3);if(x<255||c<255||L<255||S<255){var k=p-_,P=v-T,z=k*k+P*P;z<y&&(y=z,g=_,A=T)}}return[g,A,y]};function u(h,p,v,y,g){this.coord=[h,p],this.id=v,this.value=y,this.distance=g}function s(h,p,v){this.gl=h,this.fbo=p,this.buffer=v,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(p.bind(),h.readPixels(0,0,p.shape[0],p.shape[1],h.RGBA,h.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var i=s.prototype;Object.defineProperty(i,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(!!this.gl){this.fbo.shape=h;var p=this.fbo.shape[0],v=this.fbo.shape[1];if(v*p*4>this.buffer.length){o.free(this.buffer);for(var y=this.buffer=o.mallocUint8(n(v*p*4)),g=0;g<v*p*4;++g)y[g]=255}return h}}}),i.begin=function(){var h=this.gl;this.shape,!!h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},i.end=function(){var h=this.gl;!h||(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},i.query=function(h,p,v){if(!this.gl)return null;var y=this.fbo.shape.slice();h=h|0,p=p|0,typeof v!="number"&&(v=1);var g=Math.min(Math.max(h-v,0),y[0])|0,A=Math.min(Math.max(h+v,0),y[0])|0,m=Math.min(Math.max(p-v,0),y[1])|0,M=Math.min(Math.max(p+v,0),y[1])|0;if(A<=g||M<=m)return null;var _=[A-g,M-m],T=a(this.buffer,[_[0],_[1],4],[4,y[0]*4,1],4*(g+y[0]*m)),x=r(T.hi(_[0],_[1],1),v,v),c=x[0],L=x[1];if(c<0||Math.pow(this.radius,2)<x[2])return null;var S=T.get(c,L,0),k=T.get(c,L,1),P=T.get(c,L,2),z=T.get(c,L,3);return new u(c+g|0,L+m|0,S,[k,P,z],Math.sqrt(x[2]))},i.dispose=function(){!this.gl||(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function f(h,p){var v=p[0],y=p[1],g={},A=e(h,v,y,g),m=o.mallocUint8(v*y*4);return new s(h,A,m)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(l,b,w){var e=l("./lib/create-uniforms"),o=l("./lib/create-attributes"),a=l("./lib/reflect"),n=l("./lib/shader-cache"),r=l("./lib/runtime-reflect"),u=l("./lib/GLError");function s(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;i.bind=function(){this.program||this._relink();var p,v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(v>y)for(p=y;p<v;p++)this.gl.enableVertexAttribArray(p);else if(y>v)for(p=v;p<y;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},i.dispose=function(){for(var p=this.gl.lastAttribCount,v=0;v<p;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function f(p,v){return p.name<v.name?-1:1}i.update=function(p,v,y,g){if(!v||arguments.length===1){var A=p;p=A.vertex,v=A.fragment,y=A.uniforms,g=A.attributes}var m=this,M=m.gl,_=m._vref;m._vref=n.shader(M,M.VERTEX_SHADER,p),_&&_.dispose(),m.vertShader=m._vref.shader;var T=this._fref;if(m._fref=n.shader(M,M.FRAGMENT_SHADER,v),T&&T.dispose(),m.fragShader=m._fref.shader,!y||!g){var x=M.createProgram();if(M.attachShader(x,m.fragShader),M.attachShader(x,m.vertShader),M.linkProgram(x),!M.getProgramParameter(x,M.LINK_STATUS)){var c=M.getProgramInfoLog(x);throw new u(c,"Error linking program:"+c)}y=y||r.uniforms(M,x),g=g||r.attributes(M,x),M.deleteProgram(x)}g=g.slice(),g.sort(f);var L=[],S=[],k=[],P;for(P=0;P<g.length;++P){var z=g[P];if(z.type.indexOf("mat")>=0){for(var I=z.type.charAt(z.type.length-1)|0,R=new Array(I),D=0;D<I;++D)R[D]=k.length,S.push(z.name+"["+D+"]"),typeof z.location=="number"?k.push(z.location+D):Array.isArray(z.location)&&z.location.length===I&&typeof z.location[D]=="number"?k.push(z.location[D]|0):k.push(-1);L.push({name:z.name,type:z.type,locations:R})}else L.push({name:z.name,type:z.type,locations:[k.length]}),S.push(z.name),typeof z.location=="number"?k.push(z.location|0):k.push(-1)}var O=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(O)>=0;)O+=1;k[P]=O}var F=new Array(y.length);function Y(){m.program=n.program(M,m._vref,m._fref,S,k);for(var X=0;X<y.length;++X)F[X]=M.getUniformLocation(m.program,y[X].name)}Y(),m._relink=Y,m.types={uniforms:a(y),attributes:a(g)},m.attributes=o(M,m,L,k),Object.defineProperty(m,"uniforms",e(M,m,y,F))};function h(p,v,y,g,A){var m=new s(p);return m.update(v,y,g,A),m}b.exports=h},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(l,b,w){function e(o,a,n){this.shortMessage=a||"",this.longMessage=n||"",this.rawError=o||"",this.message="gl-shader: "+(a||o||"")+(n?`
`+n:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(l,b,w){b.exports=s;var e=l("./GLError");function o(i,f,h,p,v,y){this._gl=i,this._wrapper=f,this._index=h,this._locations=p,this._dimension=v,this._constFunc=y}var a=o.prototype;a.pointer=function(f,h,p,v){var y=this,g=y._gl,A=y._locations[y._index];g.vertexAttribPointer(A,y._dimension,f||g.FLOAT,!!h,p||0,v||0),g.enableVertexAttribArray(A)},a.set=function(i,f,h,p){return this._constFunc(this._locations[this._index],i,f,h,p)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=i|0,this._wrapper.program=null),i|0}});var n=[function(i,f,h){return h.length===void 0?i.vertexAttrib1f(f,h):i.vertexAttrib1fv(f,h)},function(i,f,h,p){return h.length===void 0?i.vertexAttrib2f(f,h,p):i.vertexAttrib2fv(f,h)},function(i,f,h,p,v){return h.length===void 0?i.vertexAttrib3f(f,h,p,v):i.vertexAttrib3fv(f,h)},function(i,f,h,p,v,y){return h.length===void 0?i.vertexAttrib4f(f,h,p,v,y):i.vertexAttrib4fv(f,h)}];function r(i,f,h,p,v,y,g){var A=n[v],m=new o(i,f,h,p,v,A);Object.defineProperty(y,g,{set:function(M){return i.disableVertexAttribArray(p[h]),A(i,p[h],M),M},get:function(){return m},enumerable:!0})}function u(i,f,h,p,v,y,g){for(var A=new Array(v),m=new Array(v),M=0;M<v;++M)r(i,f,h[M],p,v,A,M),m[M]=A[M];Object.defineProperty(A,"location",{set:function(x){if(Array.isArray(x))for(var c=0;c<v;++c)m[c].location=x[c];else for(var c=0;c<v;++c)m[c].location=x+c;return x},get:function(){for(var x=new Array(v),c=0;c<v;++c)x[c]=p[h[c]];return x},enumerable:!0}),A.pointer=function(x,c,L,S){x=x||i.FLOAT,c=!!c,L=L||v*v,S=S||0;for(var k=0;k<v;++k){var P=p[h[k]];i.vertexAttribPointer(P,v,x,c,L,S+k*v),i.enableVertexAttribArray(P)}};var _=new Array(v),T=i["vertexAttrib"+v+"fv"];Object.defineProperty(y,g,{set:function(x){for(var c=0;c<v;++c){var L=p[h[c]];if(i.disableVertexAttribArray(L),Array.isArray(x[0]))T.call(i,L,x[c]);else{for(var S=0;S<v;++S)_[S]=x[v*c+S];T.call(i,L,_)}}return x},get:function(){return A},enumerable:!0})}function s(i,f,h,p){for(var v={},y=0,g=h.length;y<g;++y){var A=h[y],m=A.name,M=A.type,_=A.locations;switch(M){case"bool":case"int":case"float":r(i,f,_[0],p,1,v,m);break;default:if(M.indexOf("vec")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new e("","Invalid data type for attribute "+m+": "+M);r(i,f,_[0],p,T,v,m)}else if(M.indexOf("mat")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new e("","Invalid data type for attribute "+m+": "+M);u(i,f,_,p,T,v,m)}else throw new e("","Unknown data type for attribute "+m+": "+M);break}}return v}},{"./GLError":133}],135:[function(l,b,w){var e=l("./reflect"),o=l("./GLError");b.exports=r;function a(u){return function(){return u}}function n(u,s){for(var i=new Array(u),f=0;f<u;++f)i[f]=s;return i}function r(u,s,i,f){function h(M){return function(_,T,x){return _.getUniform(T.program,x[M])}}function p(M){return function(T){for(var x=v("",M),c=0;c<x.length;++c){var L=x[c],S=L[0],k=L[1];if(f[k]){var P=T;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var z=S;if(S.indexOf(".")===0&&(z=S.slice(1)),z.indexOf("]")===z.length-1){var I=z.indexOf("["),R=z.slice(0,I),D=z.slice(I+1,z.length-1);P=R?T[R][D]:T[D]}else P=T[z]}var O=i[k].type,F;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":u.uniform1i(f[k],P);break;case"float":u.uniform1f(f[k],P);break;default:var Y=O.indexOf("vec");if(0<=Y&&Y<=1&&O.length===4+Y){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new o("","Invalid data type");switch(O.charAt(0)){case"b":case"i":u["uniform"+F+"iv"](f[k],P);break;case"v":u["uniform"+F+"fv"](f[k],P);break;default:throw new o("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+O);u["uniformMatrix"+F+"fv"](f[k],!1,P);break}else throw new o("","Unknown uniform data type for "+name+": "+O)}}}}}function v(M,_){if(typeof _!="object")return[[M,_]];var T=[];for(var x in _){var c=_[x],L=M;parseInt(x)+""===x?L+="["+x+"]":L+="."+x,typeof c=="object"?T.push.apply(T,v(L,c)):T.push([L,c])}return T}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=M.indexOf("vec");if(0<=_&&_<=1&&M.length===4+_){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new o("","Invalid data type");return M.charAt(0)==="b"?n(T,!1):n(T,0)}else if(M.indexOf("mat")===0&&M.length===4){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+M);return n(T*T,0)}else throw new o("","Unknown uniform data type for "+name+": "+M)}}function g(M,_,T){if(typeof T=="object"){var x=A(T);Object.defineProperty(M,_,{get:a(x),set:p(T),enumerable:!0,configurable:!1})}else f[T]?Object.defineProperty(M,_,{get:h(T),set:p(T),enumerable:!0,configurable:!1}):M[_]=y(i[T].type)}function A(M){var _;if(Array.isArray(M)){_=new Array(M.length);for(var T=0;T<M.length;++T)g(_,T,M[T])}else{_={};for(var x in M)g(_,x,M[x])}return _}var m=e(i,!0);return{get:a(A(m)),set:p(m),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(l,b,w){b.exports=e;function e(o,a){for(var n={},r=0;r<o.length;++r)for(var u=o[r].name,s=u.split("."),i=n,f=0;f<s.length;++f){var h=s[f].split("[");if(h.length>1){h[0]in i||(i[h[0]]=[]),i=i[h[0]];for(var p=1;p<h.length;++p){var v=parseInt(h[p]);p<h.length-1||f<s.length-1?(v in i||(p<h.length-1?i[v]=[]:i[v]={}),i=i[v]):a?i[v]=r:i[v]=o[r].type}}else f<s.length-1?(h[0]in i||(i[h[0]]={}),i=i[h[0]]):a?i[h[0]]=r:i[h[0]]=o[r].type}return n}},{}],137:[function(l,b,w){w.uniforms=n,w.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function a(u,s){if(!o){var i=Object.keys(e);o={};for(var f=0;f<i.length;++f){var h=i[f];o[u[h]]=e[h]}}return o[s]}function n(u,s){for(var i=u.getProgramParameter(s,u.ACTIVE_UNIFORMS),f=[],h=0;h<i;++h){var p=u.getActiveUniform(s,h);if(p){var v=a(u,p.type);if(p.size>1)for(var y=0;y<p.size;++y)f.push({name:p.name.replace("[0]","["+y+"]"),type:v});else f.push({name:p.name,type:v})}}return f}function r(u,s){for(var i=u.getProgramParameter(s,u.ACTIVE_ATTRIBUTES),f=[],h=0;h<i;++h){var p=u.getActiveAttrib(s,h);p&&f.push({name:p.name,type:a(u,p.type)})}return f}},{}],138:[function(l,b,w){w.shader=v,w.program=y;var e=l("./GLError"),o=l("gl-format-compiler-error"),a=typeof WeakMap=="undefined"?l("weakmap-shim"):WeakMap,n=new a,r=0;function u(g,A,m,M,_,T,x){this.id=g,this.src=A,this.type=m,this.shader=M,this.count=T,this.programs=[],this.cache=x}u.prototype.dispose=function(){if(--this.count==0){for(var g=this.cache,A=g.gl,m=this.programs,M=0,_=m.length;M<_;++M){var T=g.programs[m[M]];T&&(delete g.programs[M],A.deleteProgram(T))}A.deleteShader(this.shader),delete g.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function s(g){this.gl=g,this.shaders=[{},{}],this.programs={}}var i=s.prototype;function f(g,A,m){var M=g.createShader(A);if(g.shaderSource(M,m),g.compileShader(M),!g.getShaderParameter(M,g.COMPILE_STATUS)){var _=g.getShaderInfoLog(M);try{var T=o(_,m,A)}catch(x){throw console.warn("Failed to format compiler error: "+x),new e(_,`Error compiling shader:
`+_)}throw new e(_,T.short,T.long)}return M}i.getShaderReference=function(g,A){var m=this.gl,M=this.shaders[g===m.FRAGMENT_SHADER|0],_=M[A];if(!_||!m.isShader(_.shader)){var T=f(m,g,A);_=M[A]=new u(r++,A,g,T,[],1,this)}else _.count+=1;return _};function h(g,A,m,M,_){var T=g.createProgram();g.attachShader(T,A),g.attachShader(T,m);for(var x=0;x<M.length;++x)g.bindAttribLocation(T,_[x],M[x]);if(g.linkProgram(T),!g.getProgramParameter(T,g.LINK_STATUS)){var c=g.getProgramInfoLog(T);throw new e(c,"Error linking program: "+c)}return T}i.getProgram=function(g,A,m,M){var _=[g.id,A.id,m.join(":"),M.join(":")].join("@"),T=this.programs[_];return(!T||!this.gl.isProgram(T))&&(this.programs[_]=T=h(this.gl,g.shader,A.shader,m,M),g.programs.push(_),A.programs.push(_)),T};function p(g){var A=n.get(g);return A||(A=new s(g),n.set(g,A)),A}function v(g,A,m){return p(g).getShaderReference(A,m)}function y(g,A,m,M,_){return p(g).getProgram(A,m,M,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(l,b,w){b.exports=a;function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var o=e.prototype;o.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var n=this.enable,r=this.width,u=this.color,s=this.center,i=this.plot,f=i.line,h=i.dataBox,p=i.viewBox;if(f.bind(),h[0]<=s[0]&&s[0]<=h[2]&&h[1]<=s[1]&&s[1]<=h[3]){var v=p[0]+(s[0]-h[0])/(h[2]-h[0])*(p[2]-p[0]),y=p[1]+(s[1]-h[1])/(h[3]-h[1])*(p[3]-p[1]);n[0]&&f.drawLine(v,y,p[0],y,r[0],u[0]),n[1]&&f.drawLine(v,y,v,p[1],r[1],u[1]),n[2]&&f.drawLine(v,y,p[2],y,r[2],u[2]),n[3]&&f.drawLine(v,y,v,p[3],r[3],u[3])}},o.dispose=function(){this.plot.removeOverlay(this)};function a(n,r){var u=new e(n);return u.update(r),n.addOverlay(u),u}},{}],140:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);b.exports=function(r){return o(r,a,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(l,b,w){var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders/index");b.exports=h;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,v,y,g){this.gl=p,this.buffer=v,this.vao=y,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=r.prototype,s=[0,0,0],i=[0,0,0],f=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(p){},u.draw=function(p){var v=this.gl,y=this.vao,g=this.shader;y.bind(),g.bind();var A=p.model||n,m=p.view||n,M=p.projection||n,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var T=s,x=i,c=0;c<3;++c)_&&_[c]<0?(T[c]=this.bounds[0][c],x[c]=this.bounds[1][c]):(T[c]=this.bounds[1][c],x[c]=this.bounds[0][c]);f[0]=v.drawingBufferWidth,f[1]=v.drawingBufferHeight,g.uniforms.model=A,g.uniforms.view=m,g.uniforms.projection=M,g.uniforms.coordinates=[this.position,T,x],g.uniforms.colors=this.colors,g.uniforms.screenShape=f;for(var c=0;c<3;++c)g.uniforms.lineWidth=this.lineWidth[c]*this.pixelRatio,this.enabled[c]&&(y.draw(v.TRIANGLES,6,6*c),this.drawSides[c]&&y.draw(v.TRIANGLES,12,18+12*c));y.unbind()},u.update=function(p){!p||("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(p,v){var y=[];function g(T,x,c,L,S,k){var P=[T,x,c,0,0,0,1];P[L+3]=1,P[L]=S,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=k,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var A=e(p,y),m=o(p,[{type:p.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:A,size:1,offset:24,stride:28}]),M=a(p);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var _=new r(p,A,m,M);return _.update(v),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},w.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(l,b,w){var e=l("gl-vec3"),o=l("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(y,g,A,m){for(var M=y.points,_=y.velocities,T=y.divergences,x=[],c=[],L=[],S=[],k=[],P=[],z=0,I=0,R=o.create(),D=o.create(),O=8,F=0;F<M.length;F++){var Y=M[F],X=_[F],q=T[F];g===0&&(q=A*.05),I=e.length(X)/m,R=o.create(),e.copy(R,X),R[3]=q;for(var $=0;$<O;$++)k[$]=[Y[0],Y[1],Y[2],$];if(S.length>0)for(var $=0;$<O;$++){var V=($+1)%O;x.push(S[$],k[$],k[V],k[V],S[V],S[$]),L.push(D,R,R,R,D,D),P.push(z,I,I,I,z,z);var K=x.length;c.push([K-6,K-5,K-4],[K-3,K-2,K-1])}var se=S;S=k,k=se;var ue=D;D=R,R=ue;var oe=z;z=I,I=oe}return{positions:x,cells:c,vectors:L,vertexIntensity:P}},r=function(y,g,A,m){for(var M=0,_=0;_<y.length;_++)for(var T=y[_].velocities,x=0;x<T.length;x++)M=Math.max(M,e.length(T[x]));for(var c=y.map(function(F){return n(F,A,m,M)}),L=[],S=[],k=[],P=[],_=0;_<c.length;_++){var z=c[_],I=L.length;L=L.concat(z.positions),k=k.concat(z.vectors),P=P.concat(z.vertexIntensity);for(var x=0;x<z.cells.length;x++){var R=z.cells[x],D=[];S.push(D);for(var O=0;O<R.length;O++)D.push(R[O]+I)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:g}},u=function(y,g){var A=y.length,m;for(m=0;m<A;m++){var M=y[m];if(M===g)return m;if(M>g)return m-1}return m},s=function(y,g,A){return y<g?g:y>A?A:y},i=function(y,g,A){var m=g.vectors,M=g.meshgrid,_=y[0],T=y[1],x=y[2],c=M[0].length,L=M[1].length,S=M[2].length,k=u(M[0],_),P=u(M[1],T),z=u(M[2],x),I=k+1,R=P+1,D=z+1;if(k=s(k,0,c-1),I=s(I,0,c-1),P=s(P,0,L-1),R=s(R,0,L-1),z=s(z,0,S-1),D=s(D,0,S-1),k<0||P<0||z<0||I>c-1||R>L-1||D>S-1)return e.create();var O=M[0][k],F=M[0][I],Y=M[1][P],X=M[1][R],q=M[2][z],$=M[2][D],V=(_-O)/(F-O),K=(T-Y)/(X-Y),se=(x-q)/($-q);isFinite(V)||(V=.5),isFinite(K)||(K=.5),isFinite(se)||(se=.5);var ue,oe,U,G,re,ee;switch(A.reversedX&&(k=c-1-k,I=c-1-I),A.reversedY&&(P=L-1-P,R=L-1-R),A.reversedZ&&(z=S-1-z,D=S-1-D),A.filled){case 5:re=z,ee=D,U=P*S,G=R*S,ue=k*S*L,oe=I*S*L;break;case 4:re=z,ee=D,ue=k*S,oe=I*S,U=P*S*c,G=R*S*c;break;case 3:U=P,G=R,re=z*L,ee=D*L,ue=k*L*S,oe=I*L*S;break;case 2:U=P,G=R,ue=k*L,oe=I*L,re=z*L*c,ee=D*L*c;break;case 1:ue=k,oe=I,re=z*c,ee=D*c,U=P*c*S,G=R*c*S;break;default:ue=k,oe=I,U=P*c,G=R*c,re=z*c*L,ee=D*c*L;break}var j=m[ue+U+re],Q=m[ue+U+ee],ne=m[ue+G+re],ae=m[ue+G+ee],ie=m[oe+U+re],fe=m[oe+U+ee],me=m[oe+G+re],ce=m[oe+G+ee],ye=e.create(),xe=e.create(),ke=e.create(),Ae=e.create();e.lerp(ye,j,ie,V),e.lerp(xe,Q,fe,V),e.lerp(ke,ne,me,V),e.lerp(Ae,ae,ce,V);var Oe=e.create(),He=e.create();e.lerp(Oe,ye,ke,K),e.lerp(He,xe,Ae,K);var Ge=e.create();return e.lerp(Ge,Oe,He,se),Ge},f=function(y){var g=1/0;y.sort(function(_,T){return _-T});for(var A=y.length,m=1;m<A;m++){var M=Math.abs(y[m]-y[m-1]);M<g&&(g=M)}return g},h=function(y){for(var g=[],A=[],m=[],M={},_={},T={},x=y.length,c=0;c<x;c++){var L=y[c],S=L[0],k=L[1],P=L[2];M[S]||(g.push(S),M[S]=!0),_[k]||(A.push(k),_[k]=!0),T[P]||(m.push(P),T[P]=!0)}var z=f(g),I=f(A),R=f(m),D=Math.min(z,I,R);return isFinite(D)?D:1};b.exports=function(y,g){var A=y.startingPositions,m=y.maxLength||1e3,M=y.tubeSize||1,_=y.absoluteTubeSize,T=y.gridFill||"+x+y+z",x={};T.indexOf("-x")!==-1&&(x.reversedX=!0),T.indexOf("-y")!==-1&&(x.reversedY=!0),T.indexOf("-z")!==-1&&(x.reversedZ=!0),x.filled=a.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var c=y.getVelocity||function(fe){return i(fe,y,x)},L=y.getDivergence||function(fe,me){var ce=e.create(),ye=1e-4;e.add(ce,fe,[ye,0,0]);var xe=c(ce);e.subtract(xe,xe,me),e.scale(xe,xe,1/ye),e.add(ce,fe,[0,ye,0]);var ke=c(ce);e.subtract(ke,ke,me),e.scale(ke,ke,1/ye),e.add(ce,fe,[0,0,ye]);var Ae=c(ce);return e.subtract(Ae,Ae,me),e.scale(Ae,Ae,1/ye),e.add(ce,xe,ke),e.add(ce,ce,Ae),ce},S=[],k=g[0][0],P=g[0][1],z=g[0][2],I=g[1][0],R=g[1][1],D=g[1][2],O=function(fe){var me=fe[0],ce=fe[1],ye=fe[2];return!(me<k||me>I||ce<P||ce>R||ye<z||ye>D)},F=e.distance(g[0],g[1]),Y=10*F/m,X=Y*Y,q=1,$=0,V=A.length;V>1&&(q=h(A));for(var K=0;K<V;K++){var se=e.create();e.copy(se,A[K]);var ue=[se],oe=[],U=c(se),G=se;oe.push(U);var re=[],ee=L(se,U),j=e.length(ee);isFinite(j)&&j>$&&($=j),re.push(j),S.push({points:ue,velocities:oe,divergences:re});for(var Q=0;Q<m*100&&ue.length<m&&O(se);){Q++;var ne=e.clone(U),ae=e.squaredLength(ne);if(ae===0)break;if(ae>X&&e.scale(ne,ne,Y/Math.sqrt(ae)),e.add(ne,ne,se),U=c(ne),e.squaredDistance(G,ne)-X>-1e-4*X){ue.push(ne),G=ne,oe.push(U);var ee=L(ne,U),j=e.length(ee);isFinite(j)&&j>$&&($=j),re.push(j)}se=ne}}var ie=r(S,y.colormap,$,q);return _?ie.tubeScale=_:($===0&&($=1),ie.tubeScale=M*.5*q/$),ie};var p=l("./lib/shaders"),v=l("gl-cone3d").createMesh;b.exports.createTubeMesh=function(y,g){return v(y,g,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(l,b,w){var e=l("gl-shader"),o=l("glslify"),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=o([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);w.createShader=function(s){var i=e(s,a,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},w.createPickShader=function(s){var i=e(s,a,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},w.createContourShader=function(s){var i=e(s,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},w.createPickContourShader=function(s){var i=e(s,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(l,b,w){b.exports=oe;var e=l("bit-twiddle"),o=l("gl-buffer"),a=l("gl-vao"),n=l("gl-texture2d"),r=l("typedarray-pool"),u=l("colormap"),s=l("ndarray-ops"),i=l("ndarray-pack"),f=l("ndarray"),h=l("surface-nets"),p=l("gl-mat4/multiply"),v=l("gl-mat4/invert"),y=l("binary-search-bounds"),g=l("ndarray-gradient"),A=l("./lib/shaders"),m=A.createShader,M=A.createContourShader,_=A.createPickShader,T=A.createPickContourShader,x=4*(4+3+3),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var G=S[U],re=(U+1)%3,ee=(U+2)%3;G[re+0]=1,G[ee+3]=1,G[U+6]=1}})();function k(U,G,re,ee,j){this.position=U,this.index=G,this.uv=re,this.level=ee,this.dataCoordinate=j}var P=256;function z(U,G,re,ee,j,Q,ne,ae,ie,fe,me,ce,ye,xe,ke){this.gl=U,this.shape=G,this.bounds=re,this.objectOffset=ke,this.intensityBounds=[],this._shader=ee,this._pickShader=j,this._coordinateBuffer=Q,this._vao=ne,this._colorMap=ae,this._contourShader=ie,this._contourPickShader=fe,this._contourBuffer=me,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ye,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(r.mallocFloat(1024),[0,0]),f(r.mallocFloat(1024),[0,0]),f(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=z.prototype;I.genColormap=function(U,G){var re=!1,ee=i([u({colormap:U,nshades:P,format:"rgba"}).map(function(j,Q){var ne=G?R(Q/255,G):j[3];return ne<1&&(re=!0),[j[0],j[1],j[2],255*ne]})]);return s.divseq(ee,255),this.hasAlphaScale=re,ee},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function R(U,G){if(!G||!G.length)return 1;for(var re=0;re<G.length;++re){if(G.length<2)return 1;if(G[re][0]===U)return G[re][1];if(G[re][0]>U&&re>0){var ee=(G[re][0]-U)/(G[re][0]-G[re-1][0]);return G[re][1]*(1-ee)+ee*G[re-1][1]}}return 1}var D=[0,0,0],O={showSurface:!1,showContour:!1,projections:[c.slice(),c.slice(),c.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(U,G){var re,ee,j,Q=G.axes&&G.axes.lastCubeProps.axis||D,ne=G.showSurface,ae=G.showContour;for(re=0;re<3;++re)for(ne=ne||G.surfaceProject[re],ee=0;ee<3;++ee)ae=ae||G.contourProject[re][ee];for(re=0;re<3;++re){var ie=O.projections[re];for(ee=0;ee<16;++ee)ie[ee]=0;for(ee=0;ee<4;++ee)ie[5*ee]=1;ie[5*re]=0,ie[12+re]=G.axesBounds[+(Q[re]>0)][re],p(ie,U.model,ie);var fe=O.clipBounds[re];for(j=0;j<2;++j)for(ee=0;ee<3;++ee)fe[j][ee]=U.clipBounds[j][ee];fe[0][re]=-1e8,fe[1][re]=1e8}return O.showSurface=ne,O.showContour=ae,O}var Y={model:c,view:c,projection:c,inverseModel:c.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},X=c.slice(),q=[1,0,0,0,1,0,0,0,1];function $(U,G){U=U||{};var re=this.gl;re.disable(re.CULL_FACE),this._colorMap.bind(0);var ee=Y;ee.model=U.model||c,ee.view=U.view||c,ee.projection=U.projection||c,ee.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ee.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ee.objectOffset=this.objectOffset,ee.contourColor=this.contourColor[0],ee.inverseModel=v(ee.inverseModel,ee.model);for(var j=0;j<2;++j)for(var Q=ee.clipBounds[j],ne=0;ne<3;++ne)Q[ne]=Math.min(Math.max(this.clipBounds[j][ne],-1e8),1e8);ee.kambient=this.ambientLight,ee.kdiffuse=this.diffuseLight,ee.kspecular=this.specularLight,ee.roughness=this.roughness,ee.fresnel=this.fresnel,ee.opacity=this.opacity,ee.height=0,ee.permutation=q,ee.vertexColor=this.vertexColor;var ae=X;for(p(ae,ee.view,ee.model),p(ae,ee.projection,ae),v(ae,ae),j=0;j<3;++j)ee.eyePosition[j]=ae[12+j]/ae[15];var ie=ae[15];for(j=0;j<3;++j)ie+=this.lightPosition[j]*ae[4*j+3];for(j=0;j<3;++j){var fe=ae[12+j];for(ne=0;ne<3;++ne)fe+=ae[4*ne+j]*this.lightPosition[ne];ee.lightPosition[j]=fe/ie}var me=F(ee,this);if(me.showSurface){for(this._shader.bind(),this._shader.uniforms=ee,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(re.TRIANGLES,this._vertexCount),j=0;j<3;++j)!this.surfaceProject[j]||!this.vertexCount||(this._shader.uniforms.model=me.projections[j],this._shader.uniforms.clipBounds=me.clipBounds[j],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var ce=this._contourShader;ee.kambient=1,ee.kdiffuse=0,ee.kspecular=0,ee.opacity=1,ce.bind(),ce.uniforms=ee;var ye=this._contourVAO;for(ye.bind(),j=0;j<3;++j)for(ce.uniforms.permutation=S[j],re.lineWidth(this.contourWidth[j]*this.pixelRatio),ne=0;ne<this.contourLevels[j].length;++ne)ne===this.highlightLevel[j]?(ce.uniforms.contourColor=this.highlightColor[j],ce.uniforms.contourTint=this.highlightTint[j]):(ne===0||ne-1===this.highlightLevel[j])&&(ce.uniforms.contourColor=this.contourColor[j],ce.uniforms.contourTint=this.contourTint[j]),!!this._contourCounts[j][ne]&&(ce.uniforms.height=this.contourLevels[j][ne],ye.draw(re.LINES,this._contourCounts[j][ne],this._contourOffsets[j][ne]));for(j=0;j<3;++j)for(ce.uniforms.model=me.projections[j],ce.uniforms.clipBounds=me.clipBounds[j],ne=0;ne<3;++ne)if(!!this.contourProject[j][ne]){ce.uniforms.permutation=S[ne],re.lineWidth(this.contourWidth[ne]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ne].length;++xe)xe===this.highlightLevel[ne]?(ce.uniforms.contourColor=this.highlightColor[ne],ce.uniforms.contourTint=this.highlightTint[ne]):(xe===0||xe-1===this.highlightLevel[ne])&&(ce.uniforms.contourColor=this.contourColor[ne],ce.uniforms.contourTint=this.contourTint[ne]),!!this._contourCounts[ne][xe]&&(ce.uniforms.height=this.contourLevels[ne][xe],ye.draw(re.LINES,this._contourCounts[ne][xe],this._contourOffsets[ne][xe]))}for(ye.unbind(),ye=this._dynamicVAO,ye.bind(),j=0;j<3;++j)if(this._dynamicCounts[j]!==0)for(ce.uniforms.model=ee.model,ce.uniforms.clipBounds=ee.clipBounds,ce.uniforms.permutation=S[j],re.lineWidth(this.dynamicWidth[j]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[j],ce.uniforms.contourTint=this.dynamicTint[j],ce.uniforms.height=this.dynamicLevel[j],ye.draw(re.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]),ne=0;ne<3;++ne)!this.contourProject[ne][j]||(ce.uniforms.model=me.projections[ne],ce.uniforms.clipBounds=me.clipBounds[ne],ye.draw(re.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]));ye.unbind()}}I.draw=function(U){return $.call(this,U,!1)},I.drawTransparent=function(U){return $.call(this,U,!0)};var V={model:c,view:c,projection:c,inverseModel:c,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var G=this.gl;G.disable(G.CULL_FACE);var re=V;re.model=U.model||c,re.view=U.view||c,re.projection=U.projection||c,re.shape=this._field[2].shape,re.pickId=this.pickId/255,re.lowerBound=this.bounds[0],re.upperBound=this.bounds[1],re.objectOffset=this.objectOffset,re.permutation=q;for(var ee=0;ee<2;++ee)for(var j=re.clipBounds[ee],Q=0;Q<3;++Q)j[Q]=Math.min(Math.max(this.clipBounds[ee][Q],-1e8),1e8);var ne=F(re,this);if(ne.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=re,this._vao.bind(),this._vao.draw(G.TRIANGLES,this._vertexCount),ee=0;ee<3;++ee)!this.surfaceProject[ee]||(this._pickShader.uniforms.model=ne.projections[ee],this._pickShader.uniforms.clipBounds=ne.clipBounds[ee],this._vao.draw(G.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ne.showContour){var ae=this._contourPickShader;ae.bind(),ae.uniforms=re;var ie=this._contourVAO;for(ie.bind(),Q=0;Q<3;++Q)for(G.lineWidth(this.contourWidth[Q]*this.pixelRatio),ae.uniforms.permutation=S[Q],ee=0;ee<this.contourLevels[Q].length;++ee)this._contourCounts[Q][ee]&&(ae.uniforms.height=this.contourLevels[Q][ee],ie.draw(G.LINES,this._contourCounts[Q][ee],this._contourOffsets[Q][ee]));for(ee=0;ee<3;++ee)for(ae.uniforms.model=ne.projections[ee],ae.uniforms.clipBounds=ne.clipBounds[ee],Q=0;Q<3;++Q)if(!!this.contourProject[ee][Q]){ae.uniforms.permutation=S[Q],G.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[Q].length;++fe)this._contourCounts[Q][fe]&&(ae.uniforms.height=this.contourLevels[Q][fe],ie.draw(G.LINES,this._contourCounts[Q][fe],this._contourOffsets[Q][fe]))}ie.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var G=this._field[2].shape,re=this._pickResult,ee=G[0]*(U.value[0]+(U.value[2]>>4)/16)/255,j=Math.floor(ee),Q=ee-j,ne=G[1]*(U.value[1]+(U.value[2]&15)/16)/255,ae=Math.floor(ne),ie=ne-ae;j+=1,ae+=1;var fe=re.position;fe[0]=fe[1]=fe[2]=0;for(var me=0;me<2;++me)for(var ce=me?Q:1-Q,ye=0;ye<2;++ye)for(var xe=ye?ie:1-ie,ke=j+me,Ae=ae+ye,Oe=ce*xe,He=0;He<3;++He)fe[He]+=this._field[He].get(ke,Ae)*Oe;for(var Ge=this._pickResult.level,_e=0;_e<3;++_e)if(Ge[_e]=y.le(this.contourLevels[_e],fe[_e]),Ge[_e]<0)this.contourLevels[_e].length>0&&(Ge[_e]=0);else if(Ge[_e]<this.contourLevels[_e].length-1){var Ie=this.contourLevels[_e][Ge[_e]],Ye=this.contourLevels[_e][Ge[_e]+1];Math.abs(Ie-fe[_e])>Math.abs(Ye-fe[_e])&&(Ge[_e]+=1)}for(re.index[0]=Q<.5?j:j+1,re.index[1]=ie<.5?ae:ae+1,re.uv[0]=ee/G[0],re.uv[1]=ne/G[1],He=0;He<3;++He)re.dataCoordinate[He]=this._field[He].get(re.index[0],re.index[1]);return re},I.padField=function(U,G){var re=G.shape.slice(),ee=U.shape.slice();s.assign(U.lo(1,1).hi(re[0],re[1]),G),s.assign(U.lo(1).hi(re[0],1),G.hi(re[0],1)),s.assign(U.lo(1,ee[1]-1).hi(re[0],1),G.lo(0,re[1]-1).hi(re[0],1)),s.assign(U.lo(0,1).hi(1,re[1]),G.hi(1)),s.assign(U.lo(ee[0]-1,1).hi(1,re[1]),G.lo(re[0]-1)),U.set(0,0,G.get(0,0)),U.set(0,ee[1]-1,G.get(0,re[1]-1)),U.set(ee[0]-1,0,G.get(re[0]-1,0)),U.set(ee[0]-1,ee[1]-1,G.get(re[0]-1,re[1]-1))};function K(U,G){return Array.isArray(U)?[G(U[0]),G(U[1]),G(U[2])]:[G(U),G(U),G(U)]}function se(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function ue(U){if(Array.isArray(U)){if(Array.isArray(U))return[se(U[0]),se(U[1]),se(U[2])];var G=se(U);return[G.slice(),G.slice(),G.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=K(U.contourWidth,Number)),"showContour"in U&&(this.showContour=K(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=K(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=ue(U.contourColor)),"contourProject"in U&&(this.contourProject=K(U.contourProject,function(wt){return K(wt,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=ue(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=K(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=K(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var G=U.field||U.coords&&U.coords[2]||null,re=!1;if(G||(this._field[2].shape[0]||this._field[2].shape[2]?G=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):G=this._field[2].hi(0,0)),"field"in U||"coords"in U){var ee=(G.shape[0]+2)*(G.shape[1]+2);ee>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(ee))),this._field[2]=f(this._field[2].data,[G.shape[0]+2,G.shape[1]+2]),this.padField(this._field[2],G),this.shape=G.shape.slice();for(var j=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(r.freeFloat(this._field[Q].data),this._field[Q].data=r.mallocFloat(this._field[2].size)),this._field[Q]=f(this._field[Q].data,[j[0]+2,j[1]+2]);if(U.coords){var ne=U.coords;if(!Array.isArray(ne)||ne.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var ae=ne[Q];for(ye=0;ye<2;++ye)if(ae.shape[ye]!==j[ye])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],ae)}}else if(U.ticks){var ie=U.ticks;if(!Array.isArray(ie)||ie.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var fe=ie[Q];if((Array.isArray(fe)||fe.length)&&(fe=f(fe)),fe.shape[0]!==j[Q])throw new Error("gl-surface: invalid tick length");var me=f(fe.data,j);me.stride[Q]=fe.stride[0],me.stride[Q^1]=0,this.padField(this._field[Q],me)}}else{for(Q=0;Q<2;++Q){var ce=[0,0];ce[Q]=1,this._field[Q]=f(this._field[Q].data,[j[0]+2,j[1]+2],ce,0)}this._field[0].set(0,0,0);for(var ye=0;ye<j[0];++ye)this._field[0].set(ye+1,0,ye);for(this._field[0].set(j[0]+1,0,j[0]-1),this._field[1].set(0,0,0),ye=0;ye<j[1];++ye)this._field[1].set(0,ye+1,ye);this._field[1].set(0,j[1]+1,j[1]-1)}var xe=this._field,ke=f(r.mallocFloat(xe[2].size*3*2),[3,j[0]+2,j[1]+2,2]);for(Q=0;Q<3;++Q)g(ke.pick(Q),xe[Q],"mirror");var Ae=f(r.mallocFloat(xe[2].size*3),[j[0]+2,j[1]+2,3]);for(Q=0;Q<j[0]+2;++Q)for(ye=0;ye<j[1]+2;++ye){var Oe=ke.get(0,Q,ye,0),He=ke.get(0,Q,ye,1),Ge=ke.get(1,Q,ye,0),_e=ke.get(1,Q,ye,1),Ie=ke.get(2,Q,ye,0),Ye=ke.get(2,Q,ye,1),qe=Ge*Ye-_e*Ie,Ue=Ie*He-Ye*Oe,Re=Oe*_e-He*Ge,Ve=Math.sqrt(qe*qe+Ue*Ue+Re*Re);Ve<1e-8?(Ve=Math.max(Math.abs(qe),Math.abs(Ue),Math.abs(Re)),Ve<1e-8?(Re=1,Ue=qe=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),Ae.set(Q,ye,0,qe*Ve),Ae.set(Q,ye,1,Ue*Ve),Ae.set(Q,ye,2,Re*Ve)}r.free(ke.data);var dt=[1/0,1/0,1/0],Dt=[-1/0,-1/0,-1/0],Gt=1/0,kt=-1/0,zt=(j[0]-1)*(j[1]-1)*6,Bt=r.mallocFloat(e.nextPow2(10*zt)),Lt=0,Mt=0;for(Q=0;Q<j[0]-1;++Q){e:for(ye=0;ye<j[1]-1;++ye){for(var it=0;it<2;++it)for(var ht=0;ht<2;++ht)for(var Qe=0;Qe<3;++Qe){var Ce=this._field[Qe].get(1+Q+it,1+ye+ht);if(isNaN(Ce)||!isFinite(Ce))continue e}for(Qe=0;Qe<6;++Qe){var je=Q+L[Qe][0],rt=ye+L[Qe][1],ut=this._field[0].get(je+1,rt+1),Pt=this._field[1].get(je+1,rt+1);Ce=this._field[2].get(je+1,rt+1),qe=Ae.get(je+1,rt+1,0),Ue=Ae.get(je+1,rt+1,1),Re=Ae.get(je+1,rt+1,2),U.intensity&&(St=U.intensity.get(je,rt));var St=U.intensity?U.intensity.get(je,rt):Ce+this.objectOffset[2];Bt[Lt++]=je,Bt[Lt++]=rt,Bt[Lt++]=ut,Bt[Lt++]=Pt,Bt[Lt++]=Ce,Bt[Lt++]=0,Bt[Lt++]=St,Bt[Lt++]=qe,Bt[Lt++]=Ue,Bt[Lt++]=Re,dt[0]=Math.min(dt[0],ut+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ce+this.objectOffset[2]),Gt=Math.min(Gt,St),Dt[0]=Math.max(Dt[0],ut+this.objectOffset[0]),Dt[1]=Math.max(Dt[1],Pt+this.objectOffset[1]),Dt[2]=Math.max(Dt[2],Ce+this.objectOffset[2]),kt=Math.max(kt,St),Mt+=1}}}for(U.intensityBounds&&(Gt=+U.intensityBounds[0],kt=+U.intensityBounds[1]),Q=6;Q<Lt;Q+=10)Bt[Q]=(Bt[Q]-Gt)/(kt-Gt);this._vertexCount=Mt,this._coordinateBuffer.update(Bt.subarray(0,Lt)),r.freeFloat(Bt),r.free(Ae.data),this.bounds=[dt,Dt],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Gt||this.intensityBounds[1]!==kt)&&(re=!0),this.intensityBounds=[Gt,kt]}if("levels"in U){var Nt=U.levels;for(Array.isArray(Nt[0])?Nt=Nt.slice():Nt=[[],[],Nt],Q=0;Q<3;++Q)Nt[Q]=Nt[Q].slice(),Nt[Q].sort(function(wt,Yt){return wt-Yt});for(Q=0;Q<3;++Q)for(ye=0;ye<Nt[Q].length;++ye)Nt[Q][ye]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Nt[Q].length!==this.contourLevels[Q].length){re=!0;break}for(ye=0;ye<Nt[Q].length;++ye)if(Nt[Q][ye]!==this.contourLevels[Q][ye]){re=!0;break e}}this.contourLevels=Nt}if(re){xe=this._field,j=this.shape;for(var Xt=[],Ot=0;Ot<3;++Ot){var Kt=this.contourLevels[Ot],Je=[],gt=[],Et=[0,0,0];for(Q=0;Q<Kt.length;++Q){var rr=h(this._field[Ot],Kt[Q]);Je.push(Xt.length/5|0),Mt=0;e:for(ye=0;ye<rr.cells.length;++ye){var vr=rr.cells[ye];for(Qe=0;Qe<2;++Qe){var or=rr.positions[vr[Qe]],dr=or[0],Lr=Math.floor(dr)|0,kr=dr-Lr,tr=or[1],Or=Math.floor(tr)|0,et=tr-Or,we=!1;t:for(var Se=0;Se<3;++Se){Et[Se]=0;var De=(Ot+Se+1)%3;for(it=0;it<2;++it){var Xe=it?kr:1-kr;for(je=Math.min(Math.max(Lr+it,0),j[0])|0,ht=0;ht<2;++ht){var $e=ht?et:1-et;if(rt=Math.min(Math.max(Or+ht,0),j[1])|0,Se<2?Ce=this._field[De].get(je,rt):Ce=(this.intensity.get(je,rt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ce)||isNaN(Ce)){we=!0;break t}var ot=Xe*$e;Et[Se]+=ot*Ce}}}if(!we)Xt.push(Et[0],Et[1],or[0],or[1],Et[2]),Mt+=1;else{if(Qe>0){for(var st=0;st<5;++st)Xt.pop();Mt-=1}continue e}}}gt.push(Mt)}this._contourOffsets[Ot]=Je,this._contourCounts[Ot]=gt}var pt=r.mallocFloat(Xt.length);for(Q=0;Q<Xt.length;++Q)pt[Q]=Xt[Q];this._contourBuffer.update(pt),r.freeFloat(pt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)r.freeFloat(this._field[U].data)},I.highlight=function(U){var G;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(G=0;G<3;++G)this.enableHighlight[G]?this.highlightLevel[G]=U.level[G]:this.highlightLevel[G]=-1;var re;for(this.snapToData?re=U.dataCoordinate:re=U.position,G=0;G<3;++G)re[G]-=this.objectOffset[G];if(!((!this.enableDynamic[0]||re[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||re[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||re[2]===this.dynamicLevel[2]))){for(var ee=0,j=this.shape,Q=r.mallocFloat(12*j[0]*j[1]),ne=0;ne<3;++ne){if(!this.enableDynamic[ne]){this.dynamicLevel[ne]=NaN,this._dynamicCounts[ne]=0;continue}this.dynamicLevel[ne]=re[ne];var ae=(ne+1)%3,ie=(ne+2)%3,fe=this._field[ne],me=this._field[ae],ce=this._field[ie],ye=h(fe,re[ne]),xe=ye.cells,ke=ye.positions;for(this._dynamicOffsets[ne]=ee,G=0;G<xe.length;++G)for(var Ae=xe[G],Oe=0;Oe<2;++Oe){var He=ke[Ae[Oe]],Ge=+He[0],_e=Ge|0,Ie=Math.min(_e+1,j[0])|0,Ye=Ge-_e,qe=1-Ye,Ue=+He[1],Re=Ue|0,Ve=Math.min(Re+1,j[1])|0,dt=Ue-Re,Dt=1-dt,Gt=qe*Dt,kt=qe*dt,zt=Ye*Dt,Bt=Ye*dt,Lt=Gt*me.get(_e,Re)+kt*me.get(_e,Ve)+zt*me.get(Ie,Re)+Bt*me.get(Ie,Ve),Mt=Gt*ce.get(_e,Re)+kt*ce.get(_e,Ve)+zt*ce.get(Ie,Re)+Bt*ce.get(Ie,Ve);if(isNaN(Lt)||isNaN(Mt)){Oe&&(ee-=1);break}Q[2*ee+0]=Lt,Q[2*ee+1]=Mt,ee+=1}this._dynamicCounts[ne]=ee-this._dynamicOffsets[ne]}this._dynamicBuffer.update(Q.subarray(0,2*ee)),r.freeFloat(Q)}};function oe(U){var G=U.gl,re=m(G),ee=_(G),j=M(G),Q=T(G),ne=o(G),ae=a(G,[{buffer:ne,size:4,stride:x,offset:0},{buffer:ne,size:3,stride:x,offset:16},{buffer:ne,size:3,stride:x,offset:28}]),ie=o(G),fe=a(G,[{buffer:ie,size:4,stride:20,offset:0},{buffer:ie,size:1,stride:20,offset:16}]),me=o(G),ce=a(G,[{buffer:me,size:2,type:G.FLOAT}]),ye=n(G,1,P,G.RGBA,G.UNSIGNED_BYTE);ye.minFilter=G.LINEAR,ye.magFilter=G.LINEAR;var xe=new z(G,[0,0],[[0,0,0],[0,0,0]],re,ee,ne,ae,ye,j,Q,ie,fe,me,ce,[0,0,0]),ke={levels:[[],[],[]]};for(var Ae in U)ke[Ae]=U[Ae];return ke.colormap=ke.colormap||"jet",xe.update(ke),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(l,b,w){var e=l("ndarray"),o=l("ndarray-ops"),a=l("typedarray-pool");b.exports=T;var n=null,r=null,u=null;function s(x){n=[x.LINEAR,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_NEAREST],r=[x.NEAREST,x.LINEAR,x.NEAREST_MIPMAP_NEAREST,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_LINEAR],u=[x.REPEAT,x.CLAMP_TO_EDGE,x.MIRRORED_REPEAT]}function i(x){return typeof HTMLCanvasElement!="undefined"&&x instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&x instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&x instanceof HTMLVideoElement||typeof ImageData!="undefined"&&x instanceof ImageData}var f=function(x,c){o.muls(x,c,255)};function h(x,c,L){var S=x.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(c<0||c>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return x._shape=[c,L],x.bind(),S.texImage2D(S.TEXTURE_2D,0,x.format,c,L,0,x.format,x.type,null),x._mipLevels=[0],x}function p(x,c,L,S,k,P){this.gl=x,this.handle=c,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=x.NEAREST,this._minFilter=x.NEAREST,this._wrapS=x.CLAMP_TO_EDGE,this._wrapT=x.CLAMP_TO_EDGE,this._anisoSamples=1;var z=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return z._wrapS},set:function(D){return z.wrapS=D}},{get:function(){return z._wrapT},set:function(D){return z.wrapT=D}}]),this._wrapVector=I;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return z._shape[0]},set:function(D){return z.width=D}},{get:function(){return z._shape[1]},set:function(D){return z.height=D}}]),this._shapeVector=R}var v=p.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(x){this.bind();var c=this.gl;if(this.type===c.FLOAT&&n.indexOf(x)>=0&&(c.getExtension("OES_texture_float_linear")||(x=c.NEAREST)),r.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,x),this._minFilter=x}},magFilter:{get:function(){return this._magFilter},set:function(x){this.bind();var c=this.gl;if(this.type===c.FLOAT&&n.indexOf(x)>=0&&(c.getExtension("OES_texture_float_linear")||(x=c.NEAREST)),r.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,x),this._magFilter=x}},mipSamples:{get:function(){return this._anisoSamples},set:function(x){var c=this._anisoSamples;if(this._anisoSamples=Math.max(x,1)|0,c!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(x){if(this.bind(),u.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,x),this._wrapS=x}},wrapT:{get:function(){return this._wrapT},set:function(x){if(this.bind(),u.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,x),this._wrapT=x}},wrap:{get:function(){return this._wrapVector},set:function(x){if(Array.isArray(x)||(x=[x,x]),x.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var c=0;c<2;++c)if(u.indexOf(x[c])<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);this._wrapS=x[0],this._wrapT=x[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),x}},shape:{get:function(){return this._shapeVector},set:function(x){if(!Array.isArray(x))x=[x|0,x|0];else if(x.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return h(this,x[0]|0,x[1]|0),[x[0]|0,x[1]|0]}},width:{get:function(){return this._shape[0]},set:function(x){return x=x|0,h(this,x,this._shape[1]),x}},height:{get:function(){return this._shape[1]},set:function(x){return x=x|0,h(this,this._shape[0],x),x}}}),v.bind=function(x){var c=this.gl;return x!==void 0&&c.activeTexture(c.TEXTURE0+(x|0)),c.bindTexture(c.TEXTURE_2D,this.handle),x!==void 0?x|0:c.getParameter(c.ACTIVE_TEXTURE)-c.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var x=Math.min(this._shape[0],this._shape[1]),c=0;x>0;++c,x>>>=1)this._mipLevels.indexOf(c)<0&&this._mipLevels.push(c)},v.setPixels=function(x,c,L,S){var k=this.gl;this.bind(),Array.isArray(c)?(S=L,L=c[1]|0,c=c[0]|0):(c=c||0,L=L||0),S=S||0;var P=i(x)?x:x.raw;if(P){var z=this._mipLevels.indexOf(S)<0;z?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,c,L,this.format,this.type,P)}else if(x.shape&&x.stride&&x.data){if(x.shape.length<2||c+x.shape[1]>this._shape[1]>>>S||L+x.shape[0]>this._shape[0]>>>S||c<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");g(k,c,L,S,this.format,this.type,this._mipLevels,x)}else throw new Error("gl-texture2d: Unsupported data type")};function y(x,c){return x.length===3?c[2]===1&&c[1]===x[0]*x[2]&&c[0]===x[2]:c[0]===1&&c[1]===x[0]}function g(x,c,L,S,k,P,z,I){var R=I.dtype,D=I.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,F=0,Y=y(D,I.stride.slice());if(R==="float32"?O=x.FLOAT:R==="float64"?(O=x.FLOAT,Y=!1,R="float32"):R==="uint8"?O=x.UNSIGNED_BYTE:(O=x.UNSIGNED_BYTE,Y=!1,R="uint8"),D.length===2)F=x.LUMINANCE,D=[D[0],D[1],1],I=e(I.data,D,[I.stride[0],I.stride[1],1],I.offset);else if(D.length===3)if(D[2]===1)F=x.ALPHA;else if(D[2]===2)F=x.LUMINANCE_ALPHA;else if(D[2]===3)F=x.RGB;else if(D[2]===4)F=x.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((F===x.LUMINANCE||F===x.ALPHA)&&(k===x.LUMINANCE||k===x.ALPHA)&&(F=k),F!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var X=I.size,q=z.indexOf(S)<0;if(q&&z.push(S),O===P&&Y)I.offset===0&&I.data.length===X?q?x.texImage2D(x.TEXTURE_2D,S,k,D[0],D[1],0,k,P,I.data):x.texSubImage2D(x.TEXTURE_2D,S,c,L,D[0],D[1],k,P,I.data):q?x.texImage2D(x.TEXTURE_2D,S,k,D[0],D[1],0,k,P,I.data.subarray(I.offset,I.offset+X)):x.texSubImage2D(x.TEXTURE_2D,S,c,L,D[0],D[1],k,P,I.data.subarray(I.offset,I.offset+X));else{var $;P===x.FLOAT?$=a.mallocFloat32(X):$=a.mallocUint8(X);var V=e($,D,[D[2],D[2]*D[0],1]);O===x.FLOAT&&P===x.UNSIGNED_BYTE?f(V,I):o.assign(V,I),q?x.texImage2D(x.TEXTURE_2D,S,k,D[0],D[1],0,k,P,$.subarray(0,X)):x.texSubImage2D(x.TEXTURE_2D,S,c,L,D[0],D[1],k,P,$.subarray(0,X)),P===x.FLOAT?a.freeFloat32($):a.freeUint8($)}}function A(x){var c=x.createTexture();return x.bindTexture(x.TEXTURE_2D,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),c}function m(x,c,L,S,k){var P=x.getParameter(x.MAX_TEXTURE_SIZE);if(c<0||c>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===x.FLOAT&&!x.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var z=A(x);return x.texImage2D(x.TEXTURE_2D,0,S,c,L,0,S,k,null),new p(x,z,c,L,S,k)}function M(x,c,L,S,k,P){var z=A(x);return x.texImage2D(x.TEXTURE_2D,0,k,k,P,c),new p(x,z,L,S,k,P)}function _(x,c){var L=c.dtype,S=c.shape.slice(),k=x.getParameter(x.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,c.stride.slice()),z=0;L==="float32"?z=x.FLOAT:L==="float64"?(z=x.FLOAT,P=!1,L="float32"):L==="uint8"?z=x.UNSIGNED_BYTE:(z=x.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(S.length===2)I=x.LUMINANCE,S=[S[0],S[1],1],c=e(c.data,S,[c.stride[0],c.stride[1],1],c.offset);else if(S.length===3)if(S[2]===1)I=x.ALPHA;else if(S[2]===2)I=x.LUMINANCE_ALPHA;else if(S[2]===3)I=x.RGB;else if(S[2]===4)I=x.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");z===x.FLOAT&&!x.getExtension("OES_texture_float")&&(z=x.UNSIGNED_BYTE,P=!1);var R,D,O=c.size;if(P)c.offset===0&&c.data.length===O?R=c.data:R=c.data.subarray(c.offset,c.offset+O);else{var F=[S[2],S[2]*S[0],1];D=a.malloc(O,L);var Y=e(D,S,F,0);(L==="float32"||L==="float64")&&z===x.UNSIGNED_BYTE?f(Y,c):o.assign(Y,c),R=D.subarray(0,O)}var X=A(x);return x.texImage2D(x.TEXTURE_2D,0,I,S[0],S[1],0,I,z,R),P||a.free(D),new p(x,X,S[0],S[1],I,z)}function T(x){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||s(x),typeof arguments[1]=="number")return m(x,arguments[1],arguments[2],arguments[3]||x.RGBA,arguments[4]||x.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(x,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var c=arguments[1],L=i(c)?c:c.raw;if(L)return M(x,L,c.width|0,c.height|0,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(c.shape&&c.data&&c.stride)return _(x,c)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(l,b,w){function e(o,a,n){a?a.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var r=o.getParameter(o.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var u=0;u<n.length;++u){var s=n[u];if(s.buffer){var i=s.buffer,f=s.size||4,h=s.type||o.FLOAT,p=!!s.normalized,v=s.stride||0,y=s.offset||0;i.bind(),o.enableVertexAttribArray(u),o.vertexAttribPointer(u,f,h,p,v,y)}else{if(typeof s=="number")o.vertexAttrib1f(u,s);else if(s.length===1)o.vertexAttrib1f(u,s[0]);else if(s.length===2)o.vertexAttrib2f(u,s[0],s[1]);else if(s.length===3)o.vertexAttrib3f(u,s[0],s[1],s[2]);else if(s.length===4)o.vertexAttrib4f(u,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");o.disableVertexAttribArray(u)}}for(;u<r;++u)o.disableVertexAttribArray(u)}else{o.bindBuffer(o.ARRAY_BUFFER,null);for(var u=0;u<r;++u)o.disableVertexAttribArray(u)}}b.exports=e},{}],148:[function(l,b,w){var e=l("./do-bind.js");function o(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(n,r,u){this._elements=r,this._attributes=n,this._elementsType=u||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(n,r,u){u=u||0;var s=this.gl;this._elements?s.drawElements(n,r,this._elementsType,u):s.drawArrays(n,u,r)};function a(n){return new o(n)}b.exports=a},{"./do-bind.js":147}],149:[function(l,b,w){var e=l("./do-bind.js");function o(r,u,s,i,f,h){this.location=r,this.dimension=u,this.a=s,this.b=i,this.c=f,this.d=h}o.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(r,u,s){this.gl=r,this._ext=u,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(r,u,s){if(this.bind(),e(this.gl,u,r),this.unbind(),this._attribs.length=0,r)for(var i=0;i<r.length;++i){var f=r[i];typeof f=="number"?this._attribs.push(new o(i,1,f)):Array.isArray(f)&&this._attribs.push(new o(i,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!u,this._elementsType=s||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(r,u,s){s=s||0;var i=this.gl;this._useElements?i.drawElements(r,u,this._elementsType,s):i.drawArrays(r,s,u)};function n(r,u){return new a(r,u,u.createVertexArrayOES())}b.exports=n},{"./do-bind.js":147}],150:[function(l,b,w){var e=l("./lib/vao-native.js"),o=l("./lib/vao-emulated.js");function a(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,u,s,i){var f=r.createVertexArray?new a(r):r.getExtension("OES_vertex_array_object"),h;return f?h=e(r,f):h=o(r),h.update(u,s,i),h}b.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]+n[0],o[1]=a[1]+n[1],o[2]=a[2]+n[2],o}},{}],152:[function(l,b,w){b.exports=n;var e=l("./fromValues"),o=l("./normalize"),a=l("./dot");function n(r,u){var s=e(r[0],r[1],r[2]),i=e(u[0],u[1],u[2]);o(s,s),o(i,i);var f=a(s,i);return f>1?0:Math.acos(f)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.ceil(a[0]),o[1]=Math.ceil(a[1]),o[2]=Math.ceil(a[2]),o}},{}],154:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(3);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a}},{}],155:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o}},{}],156:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},{}],157:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=n[0],f=n[1],h=n[2];return o[0]=u*h-s*f,o[1]=s*i-r*h,o[2]=r*f-u*i,o}},{}],158:[function(l,b,w){b.exports=l("./distance")},{"./distance":159}],159:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0]-o[0],r=a[1]-o[1],u=a[2]-o[2];return Math.sqrt(n*n+r*r+u*u)}},{}],160:[function(l,b,w){b.exports=l("./divide")},{"./divide":161}],161:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]/n[0],o[1]=a[1]/n[1],o[2]=a[2]/n[2],o}},{}],162:[function(l,b,w){b.exports=e;function e(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]}},{}],163:[function(l,b,w){b.exports=1e-6},{}],164:[function(l,b,w){b.exports=o;var e=l("./epsilon");function o(a,n){var r=a[0],u=a[1],s=a[2],i=n[0],f=n[1],h=n[2];return Math.abs(r-i)<=e*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(u-f)<=e*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(s-h)<=e*Math.max(1,Math.abs(s),Math.abs(h))}},{"./epsilon":163}],165:[function(l,b,w){b.exports=e;function e(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]}},{}],166:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.floor(a[0]),o[1]=Math.floor(a[1]),o[2]=Math.floor(a[2]),o}},{}],167:[function(l,b,w){b.exports=o;var e=l("./create")();function o(a,n,r,u,s,i){var f,h;for(n||(n=3),r||(r=0),u?h=Math.min(u*n+r,a.length):h=a.length,f=r;f<h;f+=n)e[0]=a[f],e[1]=a[f+1],e[2]=a[f+2],s(e,e,i),a[f]=e[0],a[f+1]=e[1],a[f+2]=e[2];return a}},{"./create":156}],168:[function(l,b,w){b.exports=e;function e(o,a,n){var r=new Float32Array(3);return r[0]=o,r[1]=a,r[2]=n,r}},{}],169:[function(l,b,w){b.exports={EPSILON:l("./epsilon"),create:l("./create"),clone:l("./clone"),angle:l("./angle"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),equals:l("./equals"),exactEquals:l("./exactEquals"),add:l("./add"),subtract:l("./subtract"),sub:l("./sub"),multiply:l("./multiply"),mul:l("./mul"),divide:l("./divide"),div:l("./div"),min:l("./min"),max:l("./max"),floor:l("./floor"),ceil:l("./ceil"),round:l("./round"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),dist:l("./dist"),squaredDistance:l("./squaredDistance"),sqrDist:l("./sqrDist"),length:l("./length"),len:l("./len"),squaredLength:l("./squaredLength"),sqrLen:l("./sqrLen"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),cross:l("./cross"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformMat3:l("./transformMat3"),transformQuat:l("./transformQuat"),rotateX:l("./rotateX"),rotateY:l("./rotateY"),rotateZ:l("./rotateZ"),forEach:l("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=1/a[0],o[1]=1/a[1],o[2]=1/a[2],o}},{}],171:[function(l,b,w){b.exports=l("./length")},{"./length":172}],172:[function(l,b,w){b.exports=e;function e(o){var a=o[0],n=o[1],r=o[2];return Math.sqrt(a*a+n*n+r*r)}},{}],173:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=a[0],s=a[1],i=a[2];return o[0]=u+r*(n[0]-u),o[1]=s+r*(n[1]-s),o[2]=i+r*(n[2]-i),o}},{}],174:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=Math.max(a[0],n[0]),o[1]=Math.max(a[1],n[1]),o[2]=Math.max(a[2],n[2]),o}},{}],175:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=Math.min(a[0],n[0]),o[1]=Math.min(a[1],n[1]),o[2]=Math.min(a[2],n[2]),o}},{}],176:[function(l,b,w){b.exports=l("./multiply")},{"./multiply":177}],177:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]*n[0],o[1]=a[1]*n[1],o[2]=a[2]*n[2],o}},{}],178:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o}},{}],179:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0],r=a[1],u=a[2],s=n*n+r*r+u*u;return s>0&&(s=1/Math.sqrt(s),o[0]=a[0]*s,o[1]=a[1]*s,o[2]=a[2]*s),o}},{}],180:[function(l,b,w){b.exports=e;function e(o,a){a=a||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,u=Math.sqrt(1-r*r)*a;return o[0]=Math.cos(n)*u,o[1]=Math.sin(n)*u,o[2]=r*a,o}},{}],181:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=n[1],s=n[2],i=a[1]-u,f=a[2]-s,h=Math.sin(r),p=Math.cos(r);return o[0]=a[0],o[1]=u+i*p-f*h,o[2]=s+i*h+f*p,o}},{}],182:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=n[0],s=n[2],i=a[0]-u,f=a[2]-s,h=Math.sin(r),p=Math.cos(r);return o[0]=u+f*h+i*p,o[1]=a[1],o[2]=s+f*p-i*h,o}},{}],183:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=n[0],s=n[1],i=a[0]-u,f=a[1]-s,h=Math.sin(r),p=Math.cos(r);return o[0]=u+i*p-f*h,o[1]=s+i*h+f*p,o[2]=a[2],o}},{}],184:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.round(a[0]),o[1]=Math.round(a[1]),o[2]=Math.round(a[2]),o}},{}],185:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]*n,o[1]=a[1]*n,o[2]=a[2]*n,o}},{}],186:[function(l,b,w){b.exports=e;function e(o,a,n,r){return o[0]=a[0]+n[0]*r,o[1]=a[1]+n[1]*r,o[2]=a[2]+n[2]*r,o}},{}],187:[function(l,b,w){b.exports=e;function e(o,a,n,r){return o[0]=a,o[1]=n,o[2]=r,o}},{}],188:[function(l,b,w){b.exports=l("./squaredDistance")},{"./squaredDistance":190}],189:[function(l,b,w){b.exports=l("./squaredLength")},{"./squaredLength":191}],190:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0]-o[0],r=a[1]-o[1],u=a[2]-o[2];return n*n+r*r+u*u}},{}],191:[function(l,b,w){b.exports=e;function e(o){var a=o[0],n=o[1],r=o[2];return a*a+n*n+r*r}},{}],192:[function(l,b,w){b.exports=l("./subtract")},{"./subtract":193}],193:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o[2]=a[2]-n[2],o}},{}],194:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2];return o[0]=r*n[0]+u*n[3]+s*n[6],o[1]=r*n[1]+u*n[4]+s*n[7],o[2]=r*n[2]+u*n[5]+s*n[8],o}},{}],195:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=n[3]*r+n[7]*u+n[11]*s+n[15];return i=i||1,o[0]=(n[0]*r+n[4]*u+n[8]*s+n[12])/i,o[1]=(n[1]*r+n[5]*u+n[9]*s+n[13])/i,o[2]=(n[2]*r+n[6]*u+n[10]*s+n[14])/i,o}},{}],196:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=n[0],f=n[1],h=n[2],p=n[3],v=p*r+f*s-h*u,y=p*u+h*r-i*s,g=p*s+i*u-f*r,A=-i*r-f*u-h*s;return o[0]=v*p+A*-i+y*-h-g*-f,o[1]=y*p+A*-f+g*-i-v*-h,o[2]=g*p+A*-h+v*-f-y*-i,o}},{}],197:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]+n[0],o[1]=a[1]+n[1],o[2]=a[2]+n[2],o[3]=a[3]+n[3],o}},{}],198:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(4);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a}},{}],199:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o}},{}],200:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},{}],201:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0]-o[0],r=a[1]-o[1],u=a[2]-o[2],s=a[3]-o[3];return Math.sqrt(n*n+r*r+u*u+s*s)}},{}],202:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]/n[0],o[1]=a[1]/n[1],o[2]=a[2]/n[2],o[3]=a[3]/n[3],o}},{}],203:[function(l,b,w){b.exports=e;function e(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]+o[3]*a[3]}},{}],204:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=new Float32Array(4);return u[0]=o,u[1]=a,u[2]=n,u[3]=r,u}},{}],205:[function(l,b,w){b.exports={create:l("./create"),clone:l("./clone"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),add:l("./add"),subtract:l("./subtract"),multiply:l("./multiply"),divide:l("./divide"),min:l("./min"),max:l("./max"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),squaredDistance:l("./squaredDistance"),length:l("./length"),squaredLength:l("./squaredLength"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformQuat:l("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=1/a[0],o[1]=1/a[1],o[2]=1/a[2],o[3]=1/a[3],o}},{}],207:[function(l,b,w){b.exports=e;function e(o){var a=o[0],n=o[1],r=o[2],u=o[3];return Math.sqrt(a*a+n*n+r*r+u*u)}},{}],208:[function(l,b,w){b.exports=e;function e(o,a,n,r){var u=a[0],s=a[1],i=a[2],f=a[3];return o[0]=u+r*(n[0]-u),o[1]=s+r*(n[1]-s),o[2]=i+r*(n[2]-i),o[3]=f+r*(n[3]-f),o}},{}],209:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=Math.max(a[0],n[0]),o[1]=Math.max(a[1],n[1]),o[2]=Math.max(a[2],n[2]),o[3]=Math.max(a[3],n[3]),o}},{}],210:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=Math.min(a[0],n[0]),o[1]=Math.min(a[1],n[1]),o[2]=Math.min(a[2],n[2]),o[3]=Math.min(a[3],n[3]),o}},{}],211:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]*n[0],o[1]=a[1]*n[1],o[2]=a[2]*n[2],o[3]=a[3]*n[3],o}},{}],212:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=-a[3],o}},{}],213:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0],r=a[1],u=a[2],s=a[3],i=n*n+r*r+u*u+s*s;return i>0&&(i=1/Math.sqrt(i),o[0]=n*i,o[1]=r*i,o[2]=u*i,o[3]=s*i),o}},{}],214:[function(l,b,w){var e=l("./normalize"),o=l("./scale");b.exports=a;function a(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),o(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]*n,o[1]=a[1]*n,o[2]=a[2]*n,o[3]=a[3]*n,o}},{}],216:[function(l,b,w){b.exports=e;function e(o,a,n,r){return o[0]=a[0]+n[0]*r,o[1]=a[1]+n[1]*r,o[2]=a[2]+n[2]*r,o[3]=a[3]+n[3]*r,o}},{}],217:[function(l,b,w){b.exports=e;function e(o,a,n,r,u){return o[0]=a,o[1]=n,o[2]=r,o[3]=u,o}},{}],218:[function(l,b,w){b.exports=e;function e(o,a){var n=a[0]-o[0],r=a[1]-o[1],u=a[2]-o[2],s=a[3]-o[3];return n*n+r*r+u*u+s*s}},{}],219:[function(l,b,w){b.exports=e;function e(o){var a=o[0],n=o[1],r=o[2],u=o[3];return a*a+n*n+r*r+u*u}},{}],220:[function(l,b,w){b.exports=e;function e(o,a,n){return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o[2]=a[2]-n[2],o[3]=a[3]-n[3],o}},{}],221:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=a[3];return o[0]=n[0]*r+n[4]*u+n[8]*s+n[12]*i,o[1]=n[1]*r+n[5]*u+n[9]*s+n[13]*i,o[2]=n[2]*r+n[6]*u+n[10]*s+n[14]*i,o[3]=n[3]*r+n[7]*u+n[11]*s+n[15]*i,o}},{}],222:[function(l,b,w){b.exports=e;function e(o,a,n){var r=a[0],u=a[1],s=a[2],i=n[0],f=n[1],h=n[2],p=n[3],v=p*r+f*s-h*u,y=p*u+h*r-i*s,g=p*s+i*u-f*r,A=-i*r-f*u-h*s;return o[0]=v*p+A*-i+y*-h-g*-f,o[1]=y*p+A*-f+g*-i-v*-h,o[2]=g*p+A*-h+v*-f-y*-i,o[3]=a[3],o}},{}],223:[function(l,b,w){var e=l("glsl-tokenizer"),o=l("atob-lite");b.exports=a;function a(n){for(var r=Array.isArray(n)?n:e(n),u=0;u<r.length;u++){var s=r[u];if(s.type==="preprocessor"){var i=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!i&&!!i[2]){var f=i[1],h=i[2];return(f?o(h):h).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(l,b,w){b.exports=c;var e=l("./lib/literals"),o=l("./lib/operators"),a=l("./lib/builtins"),n=l("./lib/literals-300es"),r=l("./lib/builtins-300es"),u=999,s=9999,i=0,f=1,h=2,p=3,v=4,y=5,g=6,A=7,m=8,M=9,_=10,T=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function c(L){var S=0,k=0,P=u,z,I,R=[],D=[],O=1,F=0,Y=0,X=!1,q=!1,$="",V;L=L||{};var K=a,se=e;L.version==="300 es"&&(K=r,se=n);for(var ue={},oe={},S=0;S<K.length;S++)ue[K[S]]=!0;for(var S=0;S<se.length;S++)oe[se[S]]=!0;return function(ke){return D=[],ke!==null?G(ke):re()};function U(ke){ke.length&&D.push({type:x[P],data:ke,position:Y,line:O,column:F})}function G(ke){S=0,ke.toString&&(ke=ke.toString()),$+=ke.replace(/\r\n/g,`
`),V=$.length;for(var Ae;z=$[S],S<V;){switch(Ae=S,P){case i:S=ae();break;case f:S=ne();break;case h:S=Q();break;case p:S=ie();break;case v:S=ce();break;case T:S=me();break;case y:S=ye();break;case s:S=xe();break;case M:S=j();break;case u:S=ee();break}if(Ae!==S)switch($[Ae]){case`
`:F=0,++O;break;default:++F;break}}return k+=S,$=$.slice(S),D}function re(ke){return R.length&&U(R.join("")),P=_,U("(eof)"),D}function ee(){return R=R.length?[]:R,I==="/"&&z==="*"?(Y=k+S-1,P=i,I=z,S+1):I==="/"&&z==="/"?(Y=k+S-1,P=f,I=z,S+1):z==="#"?(P=h,Y=k+S,S):/\s/.test(z)?(P=M,Y=k+S,S):(X=/\d/.test(z),q=/[^\w_]/.test(z),Y=k+S,P=X?v:q?p:s,S)}function j(){return/[^\s]/g.test(z)?(U(R.join("")),P=u,S):(R.push(z),I=z,S+1)}function Q(){return(z==="\r"||z===`
`)&&I!=="\\"?(U(R.join("")),P=u,S):(R.push(z),I=z,S+1)}function ne(){return Q()}function ae(){return z==="/"&&I==="*"?(R.push(z),U(R.join("")),P=u,S+1):(R.push(z),I=z,S+1)}function ie(){if(I==="."&&/\d/.test(z))return P=y,S;if(I==="/"&&z==="*")return P=i,S;if(I==="/"&&z==="/")return P=f,S;if(z==="."&&R.length){for(;fe(R););return P=y,S}if(z===";"||z===")"||z==="("){if(R.length)for(;fe(R););return U(z),P=u,S+1}var ke=R.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||ke){for(;fe(R););return P=u,S}return R.push(z),I=z,S+1}function fe(ke){var Ae=0,Oe,He;do{if(Oe=o.indexOf(ke.slice(0,ke.length+Ae).join("")),He=o[Oe],Oe===-1){if(Ae--+ke.length>0)continue;He=ke.slice(0,1).join("")}return U(He),Y+=He.length,R=R.slice(He.length),R.length}while(1)}function me(){return/[^a-fA-F0-9]/.test(z)?(U(R.join("")),P=u,S):(R.push(z),I=z,S+1)}function ce(){return z==="."||/[eE]/.test(z)?(R.push(z),P=y,I=z,S+1):z==="x"&&R.length===1&&R[0]==="0"?(P=T,R.push(z),I=z,S+1):/[^\d]/.test(z)?(U(R.join("")),P=u,S):(R.push(z),I=z,S+1)}function ye(){return z==="f"&&(R.push(z),I=z,S+=1),/[eE]/.test(z)||(z==="-"||z==="+")&&/[eE]/.test(I)?(R.push(z),I=z,S+1):/[^\d]/.test(z)?(U(R.join("")),P=u,S):(R.push(z),I=z,S+1)}function xe(){if(/[^\d\w_]/.test(z)){var ke=R.join("");return oe[ke]?P=m:ue[ke]?P=A:P=g,U(R.join("")),P=u,S}return R.push(z),I=z,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(l,b,w){var e=l("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(l,b,w){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(l,b,w){var e=l("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(l,b,w){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(l,b,w){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(l,b,w){var e=l("./index");b.exports=o;function o(a,n){var r=e(n),u=[];return u=u.concat(r(a)),u=u.concat(r(null)),u}},{"./index":224}],231:[function(l,b,w){b.exports=function(e){typeof e=="string"&&(e=[e]);for(var o=[].slice.call(arguments,1),a=[],n=0;n<e.length-1;n++)a.push(e[n],o[n]||"");return a.push(e[n]),a.join("")}},{}],232:[function(l,b,w){var e=l("is-browser");function o(){var a=!1;try{var n=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{a=!1}return a}b.exports=e&&o()},{"is-browser":236}],233:[function(l,b,w){b.exports=p;var e=l("robust-orientation"),o=l("simplicial-complex").compareCells;function a(v,y,g){this.vertices=v,this.adjacent=y,this.boundary=g,this.lastVisited=-1}a.prototype.flip=function(){var v=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=v;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function n(v,y,g){this.vertices=v,this.cell=y,this.index=g}function r(v,y){return o(v.vertices,y.vertices)}function u(v){return function(){var y=this.tuple;return v.apply(this,y)}}function s(v){var y=e[v+1];return y||(y=e),u(y)}var i=[];function f(v,y,g){this.dimension=v,this.vertices=y,this.simplices=g,this.interior=g.filter(function(M){return!M.boundary}),this.tuple=new Array(v+1);for(var A=0;A<=v;++A)this.tuple[A]=this.vertices[A];var m=i[v];m||(m=i[v]=s(v)),this.orient=m}var h=f.prototype;h.handleBoundaryDegeneracy=function(v,y){var g=this.dimension,A=this.vertices.length-1,m=this.tuple,M=this.vertices,_=[v];for(v.lastVisited=-A;_.length>0;){v=_.pop();for(var T=v.adjacent,x=0;x<=g;++x){var c=T[x];if(!(!c.boundary||c.lastVisited<=-A)){for(var L=c.vertices,S=0;S<=g;++S){var k=L[S];k<0?m[S]=y:m[S]=M[k]}var P=this.orient();if(P>0)return c;c.lastVisited=-A,P===0&&_.push(c)}}}return null},h.walk=function(v,y){var g=this.vertices.length-1,A=this.dimension,m=this.vertices,M=this.tuple,_=y?this.interior.length*Math.random()|0:this.interior.length-1,T=this.interior[_];e:for(;!T.boundary;){for(var x=T.vertices,c=T.adjacent,L=0;L<=A;++L)M[L]=m[x[L]];T.lastVisited=g;for(var L=0;L<=A;++L){var S=c[L];if(!(S.lastVisited>=g)){var k=M[L];M[L]=v;var P=this.orient();if(M[L]=k,P<0){T=S;continue e}else S.boundary?S.lastVisited=-g:S.lastVisited=g}}return}return T},h.addPeaks=function(v,y){var g=this.vertices.length-1,A=this.dimension,m=this.vertices,M=this.tuple,_=this.interior,T=this.simplices,x=[y];y.lastVisited=g,y.vertices[y.vertices.indexOf(-1)]=g,y.boundary=!1,_.push(y);for(var c=[];x.length>0;){var y=x.pop(),L=y.vertices,S=y.adjacent,k=L.indexOf(g);if(!(k<0)){for(var P=0;P<=A;++P)if(P!==k){var z=S[P];if(!(!z.boundary||z.lastVisited>=g)){var I=z.vertices;if(z.lastVisited!==-g){for(var R=0,D=0;D<=A;++D)I[D]<0?(R=D,M[D]=v):M[D]=m[I[D]];var O=this.orient();if(O>0){I[R]=g,z.boundary=!1,_.push(z),x.push(z),z.lastVisited=g;continue}else z.lastVisited=-g}var F=z.adjacent,Y=L.slice(),X=S.slice(),q=new a(Y,X,!0);T.push(q);var $=F.indexOf(y);if(!($<0)){F[$]=q,X[k]=z,Y[P]=-1,X[P]=y,S[P]=q,q.flip();for(var D=0;D<=A;++D){var V=Y[D];if(!(V<0||V===g)){for(var K=new Array(A-1),se=0,ue=0;ue<=A;++ue){var oe=Y[ue];oe<0||ue===D||(K[se++]=oe)}c.push(new n(K,q,D))}}}}}}}c.sort(r);for(var P=0;P+1<c.length;P+=2){var U=c[P],G=c[P+1],re=U.index,ee=G.index;re<0||ee<0||(U.cell.adjacent[U.index]=G.cell,G.cell.adjacent[G.index]=U.cell)}},h.insert=function(v,y){var g=this.vertices;g.push(v);var A=this.walk(v,y);if(!!A){for(var m=this.dimension,M=this.tuple,_=0;_<=m;++_){var T=A.vertices[_];T<0?M[_]=v:M[_]=g[T]}var x=this.orient(M);x<0||x===0&&(A=this.handleBoundaryDegeneracy(A,v),!A)||this.addPeaks(v,A)}},h.boundary=function(){for(var v=this.dimension,y=[],g=this.simplices,A=g.length,m=0;m<A;++m){var M=g[m];if(M.boundary){for(var _=new Array(v),T=M.vertices,x=0,c=0,L=0;L<=v;++L)T[L]>=0?_[x++]=T[L]:c=L&1;if(c===(v&1)){var S=_[0];_[0]=_[1],_[1]=S}y.push(_)}}return y};function p(v,y){var g=v.length;if(g===0)throw new Error("Must have at least d+1 points");var A=v[0].length;if(g<=A)throw new Error("Must input at least d+1 points");var m=v.slice(0,A+1),M=e.apply(void 0,m);if(M===0)throw new Error("Input not in general position");for(var _=new Array(A+1),T=0;T<=A;++T)_[T]=T;M<0&&(_[0]=1,_[1]=0);for(var x=new a(_,new Array(A+1),!1),c=x.adjacent,L=new Array(A+2),T=0;T<=A;++T){for(var S=_.slice(),k=0;k<=A;++k)k===T&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var z=new a(S,new Array(A+1),!0);c[T]=z,L[T]=z}L[A+1]=x;for(var T=0;T<=A;++T)for(var S=c[T].vertices,I=c[T].adjacent,k=0;k<=A;++k){var R=S[k];if(R<0){I[k]=x;continue}for(var D=0;D<=A;++D)c[D].vertices.indexOf(R)<0&&(I[k]=c[D])}for(var O=new f(A,m,L),F=!!y,T=A+1;T<g;++T)O.insert(v[T],F);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(l,b,w){var e=l("binary-search-bounds"),o=0,a=1,n=2;b.exports=x;function r(c,L,S,k,P){this.mid=c,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var u=r.prototype;function s(c,L){c.mid=L.mid,c.left=L.left,c.right=L.right,c.leftPoints=L.leftPoints,c.rightPoints=L.rightPoints,c.count=L.count}function i(c,L){var S=M(L);c.mid=S.mid,c.left=S.left,c.right=S.right,c.leftPoints=S.leftPoints,c.rightPoints=S.rightPoints,c.count=S.count}function f(c,L){var S=c.intervals([]);S.push(L),i(c,S)}function h(c,L){var S=c.intervals([]),k=S.indexOf(L);return k<0?o:(S.splice(k,1),i(c,S),a)}u.intervals=function(c){return c.push.apply(c,this.leftPoints),this.left&&this.left.intervals(c),this.right&&this.right.intervals(c),c},u.insert=function(c){var L=this.count-this.leftPoints.length;if(this.count+=1,c[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?f(this,c):this.left.insert(c):this.left=M([c]);else if(c[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?f(this,c):this.right.insert(c):this.right=M([c]);else{var S=e.ge(this.leftPoints,c,A),k=e.ge(this.rightPoints,c,m);this.leftPoints.splice(S,0,c),this.rightPoints.splice(k,0,c)}},u.remove=function(c){var L=this.count-this.leftPoints;if(c[1]<this.mid){if(!this.left)return o;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return h(this,c);var k=this.left.remove(c);return k===n?(this.left=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else if(c[0]>this.mid){if(!this.right)return o;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return h(this,c);var k=this.right.remove(c);return k===n?(this.right=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===c?n:o;if(this.leftPoints.length===1&&this.leftPoints[0]===c){if(this.left&&this.right){for(var z=this,I=this.left;I.right;)z=I,I=I.right;if(z===this)I.right=this.right;else{var R=this.left,k=this.right;z.count-=I.count,z.right=I.left,I.left=R,I.right=k}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return a}for(var R=e.ge(this.leftPoints,c,A);R<this.leftPoints.length&&this.leftPoints[R][0]===c[0];++R)if(this.leftPoints[R]===c){this.count-=1,this.leftPoints.splice(R,1);for(var k=e.ge(this.rightPoints,c,m);k<this.rightPoints.length&&this.rightPoints[k][1]===c[1];++k)if(this.rightPoints[k]===c)return this.rightPoints.splice(k,1),a}return o}};function p(c,L,S){for(var k=0;k<c.length&&c[k][0]<=L;++k){var P=S(c[k]);if(P)return P}}function v(c,L,S){for(var k=c.length-1;k>=0&&c[k][1]>=L;--k){var P=S(c[k]);if(P)return P}}function y(c,L){for(var S=0;S<c.length;++S){var k=L(c[S]);if(k)return k}}u.queryPoint=function(c,L){if(c<this.mid){if(this.left){var S=this.left.queryPoint(c,L);if(S)return S}return p(this.leftPoints,c,L)}else if(c>this.mid){if(this.right){var S=this.right.queryPoint(c,L);if(S)return S}return v(this.rightPoints,c,L)}else return y(this.leftPoints,L)},u.queryInterval=function(c,L,S){if(c<this.mid&&this.left){var k=this.left.queryInterval(c,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(c,L,S);if(k)return k}return L<this.mid?p(this.leftPoints,L,S):c>this.mid?v(this.rightPoints,c,S):y(this.leftPoints,S)};function g(c,L){return c-L}function A(c,L){var S=c[0]-L[0];return S||c[1]-L[1]}function m(c,L){var S=c[1]-L[1];return S||c[0]-L[0]}function M(c){if(c.length===0)return null;for(var L=[],S=0;S<c.length;++S)L.push(c[S][0],c[S][1]);L.sort(g);for(var k=L[L.length>>1],P=[],z=[],I=[],S=0;S<c.length;++S){var R=c[S];R[1]<k?P.push(R):k<R[0]?z.push(R):I.push(R)}var D=I,O=I.slice();return D.sort(A),O.sort(m),new r(k,M(P),M(z),D,O)}function _(c){this.root=c}var T=_.prototype;T.insert=function(c){this.root?this.root.insert(c):this.root=new r(c[0],null,null,[c],[c])},T.remove=function(c){if(this.root){var L=this.root.remove(c);return L===n&&(this.root=null),L!==o}return!1},T.queryPoint=function(c,L){if(this.root)return this.root.queryPoint(c,L)},T.queryInterval=function(c,L,S){if(c<=L&&this.root)return this.root.queryInterval(c,L,S)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function x(c){return!c||c.length===0?new _(null):new _(M(c))}},{"binary-search-bounds":31}],235:[function(l,b,w){function e(o){for(var a=new Array(o),n=0;n<o;++n)a[n]=n;return a}b.exports=e},{}],236:[function(l,b,w){b.exports=!0},{}],237:[function(l,b,w){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */b.exports=function(a){return a!=null&&(e(a)||o(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function o(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}},{}],238:[function(l,b,w){b.exports=a,b.exports.isMobile=a,b.exports.default=a;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(n){n||(n={});var r=n.ua;if(!r&&typeof navigator!="undefined"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var u=n.tablet?o.test(r):e.test(r);return!u&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(u=!0),u}},{}],239:[function(l,b,w){b.exports=function(e){for(var o=e.length,a,n=0;n<o;n++)if(a=e.charCodeAt(n),(a<9||a>13)&&a!==32&&a!==133&&a!==160&&a!==5760&&a!==6158&&(a<8192||a>8205)&&a!==8232&&a!==8233&&a!==8239&&a!==8287&&a!==8288&&a!==12288&&a!==65279)return!1;return!0}},{}],240:[function(l,b,w){function e(o,a,n){return o*(1-n)+a*n}b.exports=e},{}],241:[function(l,b,w){var e=l("./normalize"),o=l("gl-mat4/create"),a=l("gl-mat4/clone"),n=l("gl-mat4/determinant"),r=l("gl-mat4/invert"),u=l("gl-mat4/transpose"),s={length:l("gl-vec3/length"),normalize:l("gl-vec3/normalize"),dot:l("gl-vec3/dot"),cross:l("gl-vec3/cross")},i=o(),f=o(),h=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];b.exports=function(M,_,T,x,c,L){if(_||(_=[0,0,0]),T||(T=[0,0,0]),x||(x=[0,0,0]),c||(c=[0,0,0,1]),L||(L=[0,0,0,1]),!e(i,M)||(a(f,i),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(n(f)<1e-8)))return!1;var S=i[3],k=i[7],P=i[11],z=i[12],I=i[13],R=i[14],D=i[15];if(S!==0||k!==0||P!==0){h[0]=S,h[1]=k,h[2]=P,h[3]=D;var O=r(f,f);if(!O)return!1;u(f,f),y(c,h,f)}else c[0]=c[1]=c[2]=0,c[3]=1;if(_[0]=z,_[1]=I,_[2]=R,g(p,i),T[0]=s.length(p[0]),s.normalize(p[0],p[0]),x[0]=s.dot(p[0],p[1]),A(p[1],p[1],p[0],1,-x[0]),T[1]=s.length(p[1]),s.normalize(p[1],p[1]),x[0]/=T[1],x[1]=s.dot(p[0],p[2]),A(p[2],p[2],p[0],1,-x[1]),x[2]=s.dot(p[1],p[2]),A(p[2],p[2],p[1],1,-x[2]),T[2]=s.length(p[2]),s.normalize(p[2],p[2]),x[1]/=T[2],x[2]/=T[2],s.cross(v,p[1],p[2]),s.dot(p[0],v)<0)for(var F=0;F<3;F++)T[F]*=-1,p[F][0]*=-1,p[F][1]*=-1,p[F][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(L[0]=-L[0]),p[0][2]>p[2][0]&&(L[1]=-L[1]),p[1][0]>p[0][1]&&(L[2]=-L[2]),!0};function y(m,M,_){var T=M[0],x=M[1],c=M[2],L=M[3];return m[0]=_[0]*T+_[4]*x+_[8]*c+_[12]*L,m[1]=_[1]*T+_[5]*x+_[9]*c+_[13]*L,m[2]=_[2]*T+_[6]*x+_[10]*c+_[14]*L,m[3]=_[3]*T+_[7]*x+_[11]*c+_[15]*L,m}function g(m,M){m[0][0]=M[0],m[0][1]=M[1],m[0][2]=M[2],m[1][0]=M[4],m[1][1]=M[5],m[1][2]=M[6],m[2][0]=M[8],m[2][1]=M[9],m[2][2]=M[10]}function A(m,M,_,T,x){m[0]=M[0]*T+_[0]*x,m[1]=M[1]*T+_[1]*x,m[2]=M[2]*T+_[2]*x}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(l,b,w){b.exports=function(o,a){var n=a[15];if(n===0)return!1;for(var r=1/n,u=0;u<16;u++)o[u]=a[u]*r;return!0}},{}],243:[function(l,b,w){var e=l("gl-vec3/lerp"),o=l("mat4-recompose"),a=l("mat4-decompose"),n=l("gl-mat4/determinant"),r=l("quat-slerp"),u=h(),s=h(),i=h();b.exports=f;function f(y,g,A,m){if(n(g)===0||n(A)===0)return!1;var M=a(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),_=a(A,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!M||!_?!1:(e(i.translate,u.translate,s.translate,m),e(i.skew,u.skew,s.skew,m),e(i.scale,u.scale,s.scale,m),e(i.perspective,u.perspective,s.perspective,m),r(i.quaternion,u.quaternion,s.quaternion,m),o(y,i.translate,i.scale,i.skew,i.perspective,i.quaternion),!0)}function h(){return{translate:p(),scale:p(1),skew:p(),perspective:v(),quaternion:v()}}function p(y){return[y||0,y||0,y||0]}function v(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(l,b,w){var e={identity:l("gl-mat4/identity"),translate:l("gl-mat4/translate"),multiply:l("gl-mat4/multiply"),create:l("gl-mat4/create"),scale:l("gl-mat4/scale"),fromRotationTranslation:l("gl-mat4/fromRotationTranslation")};e.create();var o=e.create();b.exports=function(n,r,u,s,i,f){return e.identity(n),e.fromRotationTranslation(n,f,r),n[3]=i[0],n[7]=i[1],n[11]=i[2],n[15]=i[3],e.identity(o),s[2]!==0&&(o[9]=s[2],e.multiply(n,n,o)),s[1]!==0&&(o[9]=0,o[8]=s[1],e.multiply(n,n,o)),s[0]!==0&&(o[8]=0,o[4]=s[0],e.multiply(n,n,o)),e.scale(n,n,u),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(l,b,w){var e=l("binary-search-bounds"),o=l("mat4-interpolate"),a=l("gl-mat4/invert"),n=l("gl-mat4/rotateX"),r=l("gl-mat4/rotateY"),u=l("gl-mat4/rotateZ"),s=l("gl-mat4/lookAt"),i=l("gl-mat4/translate");l("gl-mat4/scale");var f=l("gl-vec3/normalize"),h=[0,0,0];b.exports=g;function p(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var v=p.prototype;v.recalcMatrix=function(A){var m=this._time,M=e.le(m,A),_=this.computedMatrix;if(!(M<0)){var T=this._components;if(M===m.length-1)for(var x=16*M,c=0;c<16;++c)_[c]=T[x++];else{for(var L=m[M+1]-m[M],x=16*M,S=this.prevMatrix,k=!0,c=0;c<16;++c)S[c]=T[x++];for(var P=this.nextMatrix,c=0;c<16;++c)P[c]=T[x++],k=k&&S[c]===P[c];if(L<1e-6||k)for(var c=0;c<16;++c)_[c]=S[c];else o(_,S,P,(A-m[M])/L)}var z=this.computedUp;z[0]=_[1],z[1]=_[5],z[2]=_[9],f(z,z);var I=this.computedInverse;a(I,_);var R=this.computedEye,D=I[15];R[0]=I[12]/D,R[1]=I[13]/D,R[2]=I[14]/D;for(var O=this.computedCenter,F=Math.exp(this.computedRadius[0]),c=0;c<3;++c)O[c]=R[c]-_[2+4*c]*F}},v.idle=function(A){if(!(A<this.lastT())){for(var m=this._components,M=m.length-16,_=0;_<16;++_)m.push(m[M++]);this._time.push(A)}},v.flush=function(A){var m=e.gt(this._time,A)-2;m<0||(this._time.splice(0,m),this._components.splice(0,16*m))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(A,m,M,_){this.recalcMatrix(A),m=m||this.computedEye,M=M||h,_=_||this.computedUp,this.setMatrix(A,s(this.computedMatrix,m,M,_));for(var T=0,x=0;x<3;++x)T+=Math.pow(M[x]-m[x],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},v.rotate=function(A,m,M,_){this.recalcMatrix(A);var T=this.computedInverse;m&&r(T,T,m),M&&n(T,T,M),_&&u(T,T,_),this.setMatrix(A,a(this.computedMatrix,T))};var y=[0,0,0];v.pan=function(A,m,M,_){y[0]=-(m||0),y[1]=-(M||0),y[2]=-(_||0),this.recalcMatrix(A);var T=this.computedInverse;i(T,T,y),this.setMatrix(A,a(T,T))},v.translate=function(A,m,M,_){y[0]=m||0,y[1]=M||0,y[2]=_||0,this.recalcMatrix(A);var T=this.computedMatrix;i(T,T,y),this.setMatrix(A,T)},v.setMatrix=function(A,m){if(!(A<this.lastT())){this._time.push(A);for(var M=0;M<16;++M)this._components.push(m[M])}},v.setDistance=function(A,m){this.computedRadius[0]=m},v.setDistanceLimits=function(A,m){var M=this._limits;M[0]=A,M[1]=m},v.getDistanceLimits=function(A){var m=this._limits;return A?(A[0]=m[0],A[1]=m[1],A):m};function g(A){A=A||{};var m=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new p(m)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(l,b,w){b.exports=o;var e=l("robust-orientation")[3];function o(a){var n=a.length;if(n<3){for(var v=new Array(n),r=0;r<n;++r)v[r]=r;return n===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:v}for(var u=new Array(n),r=0;r<n;++r)u[r]=r;u.sort(function(m,M){var _=a[m][0]-a[M][0];return _||a[m][1]-a[M][1]});for(var s=[u[0],u[1]],i=[u[0],u[1]],r=2;r<n;++r){for(var f=u[r],h=a[f],p=s.length;p>1&&e(a[s[p-2]],a[s[p-1]],h)<=0;)p-=1,s.pop();for(s.push(f),p=i.length;p>1&&e(a[i[p-2]],a[i[p-1]],h)>=0;)p-=1,i.pop();i.push(f)}for(var v=new Array(i.length+s.length-2),y=0,r=0,g=s.length;r<g;++r)v[y++]=s[r];for(var A=i.length-2;A>0;--A)v[y++]=i[A];return v}},{"robust-orientation":284}],247:[function(l,b,w){b.exports=o;var e=l("mouse-event");function o(a,n){n||(n=a,a=window);var r=0,u=0,s=0,i={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function h(c){var L=!1;return"altKey"in c&&(L=L||c.altKey!==i.alt,i.alt=!!c.altKey),"shiftKey"in c&&(L=L||c.shiftKey!==i.shift,i.shift=!!c.shiftKey),"ctrlKey"in c&&(L=L||c.ctrlKey!==i.control,i.control=!!c.ctrlKey),"metaKey"in c&&(L=L||c.metaKey!==i.meta,i.meta=!!c.metaKey),L}function p(c,L){var S=e.x(L),k=e.y(L);"buttons"in L&&(c=L.buttons|0),(c!==r||S!==u||k!==s||h(L))&&(r=c|0,u=S||0,s=k||0,n&&n(r,u,s,i))}function v(c){p(0,c)}function y(){(r||u||s||i.shift||i.alt||i.meta||i.control)&&(u=s=0,r=0,i.shift=i.alt=i.control=i.meta=!1,n&&n(0,0,0,i))}function g(c){h(c)&&n&&n(r,u,s,i)}function A(c){e.buttons(c)===0?p(0,c):p(r,c)}function m(c){p(r|e.buttons(c),c)}function M(c){p(r&~e.buttons(c),c)}function _(){f||(f=!0,a.addEventListener("mousemove",A),a.addEventListener("mousedown",m),a.addEventListener("mouseup",M),a.addEventListener("mouseleave",v),a.addEventListener("mouseenter",v),a.addEventListener("mouseout",v),a.addEventListener("mouseover",v),a.addEventListener("blur",y),a.addEventListener("keyup",g),a.addEventListener("keydown",g),a.addEventListener("keypress",g),a!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function T(){!f||(f=!1,a.removeEventListener("mousemove",A),a.removeEventListener("mousedown",m),a.removeEventListener("mouseup",M),a.removeEventListener("mouseleave",v),a.removeEventListener("mouseenter",v),a.removeEventListener("mouseout",v),a.removeEventListener("mouseover",v),a.removeEventListener("blur",y),a.removeEventListener("keyup",g),a.removeEventListener("keydown",g),a.removeEventListener("keypress",g),a!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}_();var x={element:a};return Object.defineProperties(x,{enabled:{get:function(){return f},set:function(c){c?_():T()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),x}},{"mouse-event":249}],248:[function(l,b,w){var e={left:0,top:0};b.exports=o;function o(n,r,u){r=r||n.currentTarget||n.srcElement,Array.isArray(u)||(u=[0,0]);var s=n.clientX||0,i=n.clientY||0,f=a(r);return u[0]=s-f.left,u[1]=i-f.top,u}function a(n){return n===window||n===document||n===document.body?e:n.getBoundingClientRect()}},{}],249:[function(l,b,w){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var u=r.which;if(u===2)return 4;if(u===3)return 2;if(u>0)return 1<<u-1}else if("button"in r){var u=r.button;if(u===1)return 4;if(u===2)return 2;if(u>=0)return 1<<u}}return 0}w.buttons=e;function o(r){return r.target||r.srcElement||window}w.element=o;function a(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var u=o(r),s=u.getBoundingClientRect();return r.clientX-s.left}return 0}w.x=a;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var u=o(r),s=u.getBoundingClientRect();return r.clientY-s.top}return 0}w.y=n},{}],250:[function(l,b,w){var e=l("to-px");b.exports=o;function o(a,n,r){typeof a=="function"&&(r=!!n,n=a,a=window);var u=e("ex",a),s=function(i){r&&i.preventDefault();var f=i.deltaX||0,h=i.deltaY||0,p=i.deltaZ||0,v=i.deltaMode,y=1;switch(v){case 1:y=u;break;case 2:y=window.innerHeight;break}if(f*=y,h*=y,p*=y,f||h||p)return n(f,h,p,i)};return a.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(l,b,w){var e=l("typedarray-pool");b.exports=n;var o={"false,0,1":function(u,s,i,f,h){return function(v,y,g,A){var m=v.shape[0]|0,M=v.shape[1]|0,_=v.data,T=v.offset|0,x=v.stride[0]|0,c=v.stride[1]|0,L=T,S,k=-x|0,P=0,z=-c|0,I=0,R=-x-c|0,D=0,O=x|0,F=c-x*m|0,Y=0,X=0,q=0,$=2*m|0,V=f($),K=f($),se=0,ue=0,oe=-1|0,U=-1|0,G=0,re=-m|0,ee=m|0,j=0,Q=-m-1|0,ne=m-1|0,ae=0,ie=0,fe=0;for(Y=0;Y<m;++Y)V[se++]=i(_[L],y,g,A),L+=O;if(L+=F,M>0){if(X=1,V[se++]=i(_[L],y,g,A),L+=O,m>0)for(Y=1,S=_[L],ue=V[se]=i(S,y,g,A),G=V[se+oe],j=V[se+re],ae=V[se+Q],(ue!==G||ue!==j||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,G,j,ae,y,g,A),ie=K[se]=q++),se+=1,L+=O,Y=2;Y<m;++Y)S=_[L],ue=V[se]=i(S,y,g,A),G=V[se+oe],j=V[se+re],ae=V[se+Q],(ue!==G||ue!==j||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,G,j,ae,y,g,A),ie=K[se]=q++,ae!==G&&s(K[se+oe],ie,D,P,ae,G,y,g,A)),se+=1,L+=O;for(L+=F,se=0,fe=oe,oe=U,U=fe,fe=re,re=ee,ee=fe,fe=Q,Q=ne,ne=fe,X=2;X<M;++X){if(V[se++]=i(_[L],y,g,A),L+=O,m>0)for(Y=1,S=_[L],ue=V[se]=i(S,y,g,A),G=V[se+oe],j=V[se+re],ae=V[se+Q],(ue!==G||ue!==j||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,G,j,ae,y,g,A),ie=K[se]=q++,ae!==j&&s(K[se+re],ie,I,D,j,ae,y,g,A)),se+=1,L+=O,Y=2;Y<m;++Y)S=_[L],ue=V[se]=i(S,y,g,A),G=V[se+oe],j=V[se+re],ae=V[se+Q],(ue!==G||ue!==j||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,G,j,ae,y,g,A),ie=K[se]=q++,ae!==j&&s(K[se+re],ie,I,D,j,ae,y,g,A),ae!==G&&s(K[se+oe],ie,D,P,ae,G,y,g,A)),se+=1,L+=O;X&1&&(se=0),fe=oe,oe=U,U=fe,fe=re,re=ee,ee=fe,fe=Q,Q=ne,ne=fe,L+=F}}h(K),h(V)}},"false,1,0":function(u,s,i,f,h){return function(v,y,g,A){var m=v.shape[0]|0,M=v.shape[1]|0,_=v.data,T=v.offset|0,x=v.stride[0]|0,c=v.stride[1]|0,L=T,S,k=-x|0,P=0,z=-c|0,I=0,R=-x-c|0,D=0,O=c|0,F=x-c*M|0,Y=0,X=0,q=0,$=2*M|0,V=f($),K=f($),se=0,ue=0,oe=-1|0,U=-1|0,G=0,re=-M|0,ee=M|0,j=0,Q=-M-1|0,ne=M-1|0,ae=0,ie=0,fe=0;for(X=0;X<M;++X)V[se++]=i(_[L],y,g,A),L+=O;if(L+=F,m>0){if(Y=1,V[se++]=i(_[L],y,g,A),L+=O,M>0)for(X=1,S=_[L],ue=V[se]=i(S,y,g,A),j=V[se+re],G=V[se+oe],ae=V[se+Q],(ue!==j||ue!==G||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,j,G,ae,y,g,A),ie=K[se]=q++),se+=1,L+=O,X=2;X<M;++X)S=_[L],ue=V[se]=i(S,y,g,A),j=V[se+re],G=V[se+oe],ae=V[se+Q],(ue!==j||ue!==G||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,j,G,ae,y,g,A),ie=K[se]=q++,ae!==G&&s(K[se+oe],ie,I,D,G,ae,y,g,A)),se+=1,L+=O;for(L+=F,se=0,fe=re,re=ee,ee=fe,fe=oe,oe=U,U=fe,fe=Q,Q=ne,ne=fe,Y=2;Y<m;++Y){if(V[se++]=i(_[L],y,g,A),L+=O,M>0)for(X=1,S=_[L],ue=V[se]=i(S,y,g,A),j=V[se+re],G=V[se+oe],ae=V[se+Q],(ue!==j||ue!==G||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,j,G,ae,y,g,A),ie=K[se]=q++,ae!==j&&s(K[se+re],ie,D,P,ae,j,y,g,A)),se+=1,L+=O,X=2;X<M;++X)S=_[L],ue=V[se]=i(S,y,g,A),j=V[se+re],G=V[se+oe],ae=V[se+Q],(ue!==j||ue!==G||ue!==ae)&&(P=_[L+k],I=_[L+z],D=_[L+R],u(Y,X,S,P,I,D,ue,j,G,ae,y,g,A),ie=K[se]=q++,ae!==G&&s(K[se+oe],ie,I,D,G,ae,y,g,A),ae!==j&&s(K[se+re],ie,D,P,ae,j,y,g,A)),se+=1,L+=O;Y&1&&(se=0),fe=re,re=ee,ee=fe,fe=oe,oe=U,U=fe,fe=Q,Q=ne,ne=fe,L+=F}}h(K),h(V)}}};function a(r,u,s,i,f,h){var p=[h,f].join(","),v=o[p];return v(r,u,s,e.mallocUint32,e.freeUint32)}function n(r){function u(y){throw new Error("ndarray-extract-contour: "+y)}typeof r!="object"&&u("Must specify arguments");var s=r.order;Array.isArray(s)||u("Must specify order");var i=r.arrayArguments||1;i<1&&u("Must have at least one array argument");var f=r.scalarArguments||0;f<0&&u("Scalar arg count must be > 0"),typeof r.vertex!="function"&&u("Must specify vertex creation function"),typeof r.cell!="function"&&u("Must specify cell creation function"),typeof r.phase!="function"&&u("Must specify phase function");for(var h=r.getters||[],p=new Array(i),v=0;v<i;++v)h.indexOf(v)>=0?p[v]=!0:p[v]=!1;return a(r.vertex,r.cell,r.phase,f,s,p)}},{"typedarray-pool":308}],252:[function(l,b,w){var e=l("dup"),o={zero:function(g,A,m,M){var _=g[0],T=m[0];M|=0;var x=0,c=T;for(x=0;x<_;++x)A[M]=0,M+=c},fdTemplate1:function(g,A,m,M,_,T,x){var c=g[0],L=m[0],S=T[0],k=-1*L,P=L;M|=0,x|=0;var z=0,I=L,R=S;for(z=0;z<c;++z)_[x]=.5*(A[M+k]-A[M+P]),M+=I,x+=R},fdTemplate2:function(g,A,m,M,_,T,x,c,L,S){var k=g[0],P=g[1],z=m[0],I=m[1],R=T[0],D=T[1],O=L[0],F=L[1],Y=-1*z,X=z,q=-1*I,$=I;M|=0,x|=0,S|=0;var V=0,K=0,se=I,ue=z-P*I,oe=D,U=R-P*D,G=F,re=O-P*F;for(K=0;K<k;++K){for(V=0;V<P;++V)_[x]=.5*(A[M+Y]-A[M+X]),c[S]=.5*(A[M+q]-A[M+$]),M+=se,x+=oe,S+=G;M+=ue,x+=U,S+=re}}},a={cdiff:function(g){var A={};return function(M,_,T){var x=M.dtype,c=M.order,L=_.dtype,S=_.order,k=T.dtype,P=T.order,z=[x,c.join(),L,S.join(),k,P.join()].join(),I=A[z];return I||(A[z]=I=g([x,c,L,S,k,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,T.data,T.stride,T.offset|0)}},zero:function(g){var A={};return function(M){var _=M.dtype,T=M.order,x=[_,T.join()].join(),c=A[x];return c||(A[x]=c=g([_,T])),c(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(g){var A={};return function(M,_){var T=M.dtype,x=M.order,c=_.dtype,L=_.order,S=[T,x.join(),c,L.join()].join(),k=A[S];return k||(A[S]=k=g([T,x,c,L])),k(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(g){var A={};return function(M,_,T){var x=M.dtype,c=M.order,L=_.dtype,S=_.order,k=T.dtype,P=T.order,z=[x,c.join(),L,S.join(),k,P.join()].join(),I=A[z];return I||(A[z]=I=g([x,c,L,S,k,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,T.data,T.stride,T.offset|0)}}};function n(g){var A=a[g.funcName];return A(r.bind(void 0,g))}function r(g){return o[g.funcName]}function u(g){return n({funcName:g.funcName})}var s={},i={},f=u({funcName:"cdiff"}),h=u({funcName:"zero"});function p(g){return g in s?s[g]:s[g]=u({funcName:"fdTemplate"+g})}function v(g,A,m,M){return function(_,T){var x=T.shape.slice();return x[0]>2&&x[1]>2&&M(T.pick(-1,-1).lo(1,1).hi(x[0]-2,x[1]-2),_.pick(-1,-1,0).lo(1,1).hi(x[0]-2,x[1]-2),_.pick(-1,-1,1).lo(1,1).hi(x[0]-2,x[1]-2)),x[1]>2&&(m(T.pick(0,-1).lo(1).hi(x[1]-2),_.pick(0,-1,1).lo(1).hi(x[1]-2)),A(_.pick(0,-1,0).lo(1).hi(x[1]-2))),x[1]>2&&(m(T.pick(x[0]-1,-1).lo(1).hi(x[1]-2),_.pick(x[0]-1,-1,1).lo(1).hi(x[1]-2)),A(_.pick(x[0]-1,-1,0).lo(1).hi(x[1]-2))),x[0]>2&&(m(T.pick(-1,0).lo(1).hi(x[0]-2),_.pick(-1,0,0).lo(1).hi(x[0]-2)),A(_.pick(-1,0,1).lo(1).hi(x[0]-2))),x[0]>2&&(m(T.pick(-1,x[1]-1).lo(1).hi(x[0]-2),_.pick(-1,x[1]-1,0).lo(1).hi(x[0]-2)),A(_.pick(-1,x[1]-1,1).lo(1).hi(x[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(x[0]-1,0,0,0),_.set(x[0]-1,0,1,0),_.set(0,x[1]-1,0,0),_.set(0,x[1]-1,1,0),_.set(x[0]-1,x[1]-1,0,0),_.set(x[0]-1,x[1]-1,1,0),_}}function y(g){var A=g.join(),m=i[A];if(m)return m;for(var M=g.length,_=[f,h],T=1;T<=M;++T)_.push(p(T));var x=v,m=x.apply(void 0,_);return i[A]=m,m}b.exports=function(A,m,M){if(Array.isArray(M)||(typeof M=="string"?M=e(m.dimension,M):M=e(m.dimension,"clamp")),m.size===0)return A;if(m.dimension===0)return A.set(0),A;var _=y(M);return _(A,m)}},{dup:65}],253:[function(l,b,w){function e(u,s){var i=Math.floor(s),f=s-i,h=0<=i&&i<u.shape[0],p=0<=i+1&&i+1<u.shape[0],v=h?+u.get(i):0,y=p?+u.get(i+1):0;return(1-f)*v+f*y}function o(u,s,i){var f=Math.floor(s),h=s-f,p=0<=f&&f<u.shape[0],v=0<=f+1&&f+1<u.shape[0],y=Math.floor(i),g=i-y,A=0<=y&&y<u.shape[1],m=0<=y+1&&y+1<u.shape[1],M=p&&A?u.get(f,y):0,_=p&&m?u.get(f,y+1):0,T=v&&A?u.get(f+1,y):0,x=v&&m?u.get(f+1,y+1):0;return(1-g)*((1-h)*M+h*T)+g*((1-h)*_+h*x)}function a(u,s,i,f){var h=Math.floor(s),p=s-h,v=0<=h&&h<u.shape[0],y=0<=h+1&&h+1<u.shape[0],g=Math.floor(i),A=i-g,m=0<=g&&g<u.shape[1],M=0<=g+1&&g+1<u.shape[1],_=Math.floor(f),T=f-_,x=0<=_&&_<u.shape[2],c=0<=_+1&&_+1<u.shape[2],L=v&&m&&x?u.get(h,g,_):0,S=v&&M&&x?u.get(h,g+1,_):0,k=y&&m&&x?u.get(h+1,g,_):0,P=y&&M&&x?u.get(h+1,g+1,_):0,z=v&&m&&c?u.get(h,g,_+1):0,I=v&&M&&c?u.get(h,g+1,_+1):0,R=y&&m&&c?u.get(h+1,g,_+1):0,D=y&&M&&c?u.get(h+1,g+1,_+1):0;return(1-T)*((1-A)*((1-p)*L+p*k)+A*((1-p)*S+p*P))+T*((1-A)*((1-p)*z+p*R)+A*((1-p)*I+p*D))}function n(u){var s=u.shape.length|0,i=new Array(s),f=new Array(s),h=new Array(s),p=new Array(s),v,y;for(v=0;v<s;++v)y=+arguments[v+1],i[v]=Math.floor(y),f[v]=y-i[v],h[v]=0<=i[v]&&i[v]<u.shape[v],p[v]=0<=i[v]+1&&i[v]+1<u.shape[v];var g=0,A,m,M;e:for(v=0;v<1<<s;++v){for(m=1,M=u.offset,A=0;A<s;++A)if(v&1<<A){if(!p[A])continue e;m*=f[A],M+=u.stride[A]*(i[A]+1)}else{if(!h[A])continue e;m*=1-f[A],M+=u.stride[A]*i[A]}g+=m*u.data[M]}return g}function r(u,s,i,f){switch(u.shape.length){case 0:return 0;case 1:return e(u,s);case 2:return o(u,s,i);case 3:return a(u,s,i,f);default:return n.apply(void 0,arguments)}}b.exports=r,b.exports.d1=e,b.exports.d2=o,b.exports.d3=a},{}],254:[function(l,b,w){var e={"float64,2,1,0":function(){return function(f,h,p,v,y){var g=f[0],A=f[1],m=f[2],M=p[0],_=p[1],T=p[2];v|=0;var x=0,c=0,L=0,S=T,k=_-m*T,P=M-A*_;for(L=0;L<g;++L){for(c=0;c<A;++c){for(x=0;x<m;++x)h[v]/=y,v+=S;v+=k}v+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(f,h,p,v,y,g,A,m){var M=f[0],_=f[1],T=f[2],x=p[0],c=p[1],L=p[2],S=g[0],k=g[1],P=g[2];v|=0,A|=0;for(var z=v,I=A,R=f[0]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64);for(var D=f[1]|0;D>0;){D<64?(_=D,D=0):(_=64,D-=64),v=z+R*x+D*c,A=I+R*S+D*k;var O=0,F=0,Y=0,X=L,q=x-T*L,$=c-M*x,V=P,K=S-T*P,se=k-M*S;for(Y=0;Y<_;++Y){for(F=0;F<M;++F){for(O=0;O<T;++O)h[v]=y[A]*m,v+=X,A+=V;v+=q,A+=K}v+=$,A+=se}}}}},"float32,1,0,float32,1,0":function(){return function(f,h,p,v,y,g,A){var m=f[0],M=f[1],_=p[0],T=p[1],x=g[0],c=g[1];v|=0,A|=0;var L=0,S=0,k=T,P=_-M*T,z=c,I=x-M*c;for(S=0;S<m;++S){for(L=0;L<M;++L)h[v]=y[A],v+=k,A+=z;v+=P,A+=I}}},"float32,1,0,float32,0,1":function(){return function(f,h,p,v,y,g,A){var m=f[0],M=f[1],_=p[0],T=p[1],x=g[0],c=g[1];v|=0,A|=0;for(var L=v,S=A,k=f[1]|0;k>0;){k<64?(M=k,k=0):(M=64,k-=64);for(var P=f[0]|0;P>0;){P<64?(m=P,P=0):(m=64,P-=64),v=L+k*T+P*_,A=S+k*c+P*x;var z=0,I=0,R=T,D=_-M*T,O=c,F=x-M*c;for(I=0;I<m;++I){for(z=0;z<M;++z)h[v]=y[A],v+=R,A+=O;v+=D,A+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(f,h,p,v,y,g,A){var m=f[0],M=f[1],_=f[2],T=p[0],x=p[1],c=p[2],L=g[0],S=g[1],k=g[2];v|=0,A|=0;for(var P=v,z=A,I=f[2]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var R=f[0]|0;R>0;){R<64?(m=R,R=0):(m=64,R-=64);for(var D=f[1]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64),v=P+I*c+R*T+D*x,A=z+I*k+R*L+D*S;var O=0,F=0,Y=0,X=c,q=T-_*c,$=x-m*T,V=k,K=L-_*k,se=S-m*L;for(Y=0;Y<M;++Y){for(F=0;F<m;++F){for(O=0;O<_;++O)h[v]=y[A],v+=X,A+=V;v+=q,A+=K}v+=$,A+=se}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(f,h,p,v,y,g,A){var m=f[0],M=f[1],_=f[2],T=p[0],x=p[1],c=p[2],L=g[0],S=g[1],k=g[2];v|=0,A|=0;var P=0,z=0,I=0,R=c,D=T-_*c,O=x-m*T,F=k,Y=L-_*k,X=S-m*L;for(I=0;I<M;++I){for(z=0;z<m;++z){for(P=0;P<_;++P)h[v]=y[A],v+=R,A+=F;v+=D,A+=Y}v+=O,A+=X}}}};function o(i,f){var h=f.join(","),p=e[h];return p()}var a=o,n={mul:function(i){var f={};return function(p,v,y){var g=p.dtype,A=p.order,m=v.dtype,M=v.order,_=y.dtype,T=y.order,x=[g,A.join(),m,M.join(),_,T.join()].join(),c=f[x];return c||(f[x]=c=i([g,A,m,M,_,T])),c(p.shape.slice(0),p.data,p.stride,p.offset|0,v.data,v.stride,v.offset|0,y.data,y.stride,y.offset|0)}},muls:function(i){var f={};return function(p,v,y){var g=p.dtype,A=p.order,m=v.dtype,M=v.order,_=[g,A.join(),m,M.join()].join(),T=f[_];return T||(f[_]=T=i([g,A,m,M])),T(p.shape.slice(0),p.data,p.stride,p.offset|0,v.data,v.stride,v.offset|0,y)}},mulseq:function(i){var f={};return function(p,v){var y=p.dtype,g=p.order,A=[y,g.join()].join(),m=f[A];return m||(f[A]=m=i([y,g])),m(p.shape.slice(0),p.data,p.stride,p.offset|0,v)}},div:function(i){var f={};return function(p,v,y){var g=p.dtype,A=p.order,m=v.dtype,M=v.order,_=y.dtype,T=y.order,x=[g,A.join(),m,M.join(),_,T.join()].join(),c=f[x];return c||(f[x]=c=i([g,A,m,M,_,T])),c(p.shape.slice(0),p.data,p.stride,p.offset|0,v.data,v.stride,v.offset|0,y.data,y.stride,y.offset|0)}},divs:function(i){var f={};return function(p,v,y){var g=p.dtype,A=p.order,m=v.dtype,M=v.order,_=[g,A.join(),m,M.join()].join(),T=f[_];return T||(f[_]=T=i([g,A,m,M])),T(p.shape.slice(0),p.data,p.stride,p.offset|0,v.data,v.stride,v.offset|0,y)}},divseq:function(i){var f={};return function(p,v){var y=p.dtype,g=p.order,A=[y,g.join()].join(),m=f[A];return m||(f[A]=m=i([y,g])),m(p.shape.slice(0),p.data,p.stride,p.offset|0,v)}},assign:function(i){var f={};return function(p,v){var y=p.dtype,g=p.order,A=v.dtype,m=v.order,M=[y,g.join(),A,m.join()].join(),_=f[M];return _||(f[M]=_=i([y,g,A,m])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,v.data,v.stride,v.offset|0)}}};function r(i){var f=n[i.funcName];return f(a.bind(void 0,i))}function u(i){return r({funcName:i.funcName})}var s={mul:"*",div:"/"};(function(){for(var i in s)w[i]=u({funcName:i}),w[i+"s"]=u({funcName:i+"s"}),w[i+"seq"]=u({funcName:i+"seq"})})(),w.assign=u({funcName:"assign"})},{}],255:[function(l,b,w){var e=l("ndarray"),o=l("./doConvert.js");b.exports=function(n,r){for(var u=[],s=n,i=1;Array.isArray(s);)u.push(s.length),i*=s.length,s=s[0];return u.length===0?e():(r||(r=e(new Float64Array(i),u)),o(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(l,b,w){function e(){return function(s,i,f,h,p){var v=s[0],y=s[1],g=s[2],A=f[0],m=f[1],M=f[2],_=[0,0,0];h|=0;var T=0,x=0,c=0,L=M,S=m-g*M,k=A-y*m;for(c=0;c<v;++c){for(x=0;x<y;++x){for(T=0;T<g;++T){{var P=p,z;for(z=0;z<_.length-1;++z)P=P[_[z]];i[h]=P[_[_.length-1]]}h+=L,++_[2]}h+=S,_[2]-=g,++_[1]}h+=k,_[1]-=y,++_[0]}}}function o(){return e()}var a=o;function n(s){var i={};return function(h,p){var v=h.dtype,y=h.order,g=[v,y.join()].join(),A=i[g];return A||(i[g]=A=s([v,y])),A(h.shape.slice(0),h.data,h.stride,h.offset|0,p)}}function r(s){return n(a.bind(void 0,s))}function u(s){return r({funcName:s.funcName})}b.exports=u({funcName:"convert"})},{}],257:[function(l,b,w){var e=l("typedarray-pool");function o(f){switch(f){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var a={"uint32,1,0":function(f,h){return function(v,y,g,A,m,M,_,T,x,c,L){var S,k,P,z=v*m+A,I,R=f(T),D,O,F,Y;for(S=v+1;S<=y;++S){for(k=S,z+=m,P=z,D=0,O=z,I=0;I<T;++I)R[D++]=g[O],O+=x;e:for(;k-- >v;){D=0,O=P-m;t:for(I=0;I<T;++I){if(F=g[O],Y=R[D],F<Y)break e;if(F>Y)break t;O+=c,D+=L}for(D=P,O=P-m,I=0;I<T;++I)g[D]=g[O],D+=x,O+=x;P-=m}for(D=P,O=0,I=0;I<T;++I)g[D]=R[O++],D+=x}h(R)}}};function n(f,h){var p=o(h),v=[h,f].join(","),y=a[v];return p?y(p[0],p[1]):y()}var r={"uint32,1,0":function(f,h,p){return function v(y,g,A,m,M,_,T,x,c,L,S){var k=(g-y+1)/6|0,P=y+k,z=g-k,I=y+g>>1,R=I-k,D=I+k,O=P,F=R,Y=I,X=D,q=z,$=y+1,V=g-1,K=!0,se,ue,oe,U,G,re,ee,j,Q,ne=0,ae=0,ie=0,fe,me,ce,ye,xe,ke,Ae,Oe,He,Ge,_e,Ie,Ye,qe,Ue,Re,Ve=x,dt=h(Ve),Dt=h(Ve);me=M*O,ce=M*F,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=O,O=F,F=ue;break e}if(ie<0)break e;Re+=L}me=M*X,ce=M*q,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=X,X=q,q=ue;break e}if(ie<0)break e;Re+=L}me=M*O,ce=M*Y,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=O,O=Y,Y=ue;break e}if(ie<0)break e;Re+=L}me=M*F,ce=M*Y,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=F,F=Y,Y=ue;break e}if(ie<0)break e;Re+=L}me=M*O,ce=M*X,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=O,O=X,X=ue;break e}if(ie<0)break e;Re+=L}me=M*Y,ce=M*X,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=Y,Y=X,X=ue;break e}if(ie<0)break e;Re+=L}me=M*F,ce=M*q,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=F,F=q,q=ue;break e}if(ie<0)break e;Re+=L}me=M*F,ce=M*Y,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=F,F=Y,Y=ue;break e}if(ie<0)break e;Re+=L}me=M*X,ce=M*q,Re=m;e:for(fe=0;fe<x;++fe){if(ee=me+Re,j=ce+Re,ie=A[ee]-A[j],ie>0){ue=X,X=q,q=ue;break e}if(ie<0)break e;Re+=L}for(me=M*O,ce=M*F,ye=M*Y,xe=M*X,ke=M*q,Ae=M*P,Oe=M*I,He=M*z,Ue=0,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,Q=ye+Re,Ge=xe+Re,_e=ke+Re,Ie=Ae+Re,Ye=Oe+Re,qe=He+Re,dt[Ue]=A[j],Dt[Ue]=A[Ge],K=K&&dt[Ue]===Dt[Ue],oe=A[ee],U=A[Q],G=A[_e],A[Ie]=oe,A[Ye]=U,A[qe]=G,++Ue,Re+=c;for(me=M*R,ce=M*y,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,A[ee]=A[j],Re+=c;for(me=M*D,ce=M*g,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,A[ee]=A[j],Re+=c;if(K)for(re=$;re<=V;++re){ee=m+re*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie!==0)if(ie<0){if(re!==$)for(me=M*re,ce=M*$,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;++$}else for(;;){ee=m+V*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie>0)V--;else if(ie<0){for(me=M*re,ce=M*$,ye=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,Q=ye+Re,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Re+=c;++$,--V;break}else{for(me=M*re,ce=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;--V;break}}}else for(re=$;re<=V;++re){ee=m+re*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ne=A[ee]-dt[Ue],ne!==0)break e;Ue+=S,ee+=L}if(ne<0){if(re!==$)for(me=M*re,ce=M*$,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;++$}else{ee=m+re*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ae=A[ee]-Dt[Ue],ae!==0)break e;Ue+=S,ee+=L}if(ae>0)for(;;){ee=m+V*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-Dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie>0){if(--V<re)break;continue}else{ee=m+V*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie<0){for(me=M*re,ce=M*$,ye=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,Q=ye+Re,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Re+=c;++$,--V}else{for(me=M*re,ce=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;--V}break}}}}for(me=M*y,ce=M*($-1),Ue=0,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,A[ee]=A[j],A[j]=dt[Ue],++Ue,Re+=c;for(me=M*g,ce=M*(V+1),Ue=0,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,A[ee]=A[j],A[j]=Dt[Ue],++Ue,Re+=c;if($-2-y<=32?f(y,$-2,A,m,M,_,T,x,c,L,S):v(y,$-2,A,m,M,_,T,x,c,L,S),g-(V+2)<=32?f(V+2,g,A,m,M,_,T,x,c,L,S):v(V+2,g,A,m,M,_,T,x,c,L,S),K){p(dt),p(Dt);return}if($<P&&V>z){e:for(;;){for(ee=m+$*M,Ue=0,Re=m,fe=0;fe<x;++fe){if(A[ee]!==dt[Ue])break e;++Ue,ee+=c}++$}e:for(;;){for(ee=m+V*M,Ue=0,Re=m,fe=0;fe<x;++fe){if(A[ee]!==Dt[Ue])break e;++Ue,ee+=c}--V}for(re=$;re<=V;++re){ee=m+re*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ne=A[ee]-dt[Ue],ne!==0)break e;Ue+=S,ee+=L}if(ne===0){if(re!==$)for(me=M*re,ce=M*$,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;++$}else{ee=m+re*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ae=A[ee]-Dt[Ue],ae!==0)break e;Ue+=S,ee+=L}if(ae===0)for(;;){ee=m+V*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-Dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie===0){if(--V<re)break;continue}else{ee=m+V*M,Ue=0;e:for(fe=0;fe<x;++fe){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie<0){for(me=M*re,ce=M*$,ye=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,Q=ye+Re,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Re+=c;++$,--V}else{for(me=M*re,ce=M*V,Re=m,fe=0;fe<x;++fe)ee=me+Re,j=ce+Re,se=A[ee],A[ee]=A[j],A[j]=se,Re+=c;--V}break}}}}}p(dt),p(Dt),V-$<=32?f($,V,A,m,M,_,T,x,c,L,S):v($,V,A,m,M,_,T,x,c,L,S)}}};function u(f,h,p){var v=o(h),y=[h,f].join(","),g=r[y];return f.length>1&&v?g(p,v[0],v[1]):g(p)}var s={"uint32,1,0":function(f,h){return function(p){var v=p.data,y=p.offset|0,g=p.shape,A=p.stride,m=A[0]|0,M=g[0]|0,_=A[1]|0,T=g[1]|0,x=_,c=_,L=1;M<=32?f(0,M-1,v,y,m,_,M,T,x,c,L):h(0,M-1,v,y,m,_,M,T,x,c,L)}}};function i(f,h){var p=[h,f].join(","),v=s[p],y=n(f,h),g=u(f,h,y);return v(y,g)}b.exports=i},{"typedarray-pool":308}],258:[function(l,b,w){var e=l("./lib/compile_sort.js"),o={};function a(n){var r=n.order,u=n.dtype,s=[r,u],i=s.join(":"),f=o[i];return f||(o[i]=f=e(r,u)),f(n),n}b.exports=a},{"./lib/compile_sort.js":257}],259:[function(l,b,w){var e=l("is-buffer"),o=typeof Float64Array!="undefined";function a(h,p){return h[0]-p[0]}function n(){var h=this.stride,p=new Array(h.length),v;for(v=0;v<p.length;++v)p[v]=[Math.abs(h[v]),v];p.sort(a);var y=new Array(p.length);for(v=0;v<y.length;++v)y[v]=p[v][1];return y}var r={T:function(h){function p(y){this.data=y}var v=p.prototype;return v.dtype=h,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new p(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new p(g)}},0:function(h,p){function v(g,A){this.data=g,this.offset=A}var y=v.prototype;return y.dtype=h,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new v(this.data,this.offset)},y.pick=function(){return p(this.data)},y.valueOf=y.get=function(){return h==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(A){return h==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,m,M,_){return new v(A,_)}},1:function(h,p,v){function y(A,m,M,_){this.data=A,this.shape=[m],this.stride=[M],this.offset=_|0}var g=y.prototype;return g.dtype=h,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(m,M){return h==="generic"?this.data.set(this.offset+this.stride[0]*m,M):this.data[this.offset+this.stride[0]*m]=M},g.get=function(m){return h==="generic"?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},g.index=function(m){return this.offset+this.stride[0]*m},g.hi=function(m){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,this.stride[0],this.offset)},g.lo=function(m){var M=this.offset,_=0,T=this.shape[0],x=this.stride[0];return typeof m=="number"&&m>=0&&(_=m|0,M+=x*_,T-=_),new y(this.data,T,x,M)},g.step=function(m){var M=this.shape[0],_=this.stride[0],T=this.offset,x=0,c=Math.ceil;return typeof m=="number"&&(x=m|0,x<0?(T+=_*(M-1),M=c(-M/x)):M=c(M/x),_*=x),new y(this.data,M,_,T)},g.transpose=function(m){m=m===void 0?0:m|0;var M=this.shape,_=this.stride;return new y(this.data,M[m],_[m],this.offset)},g.pick=function(m){var M=[],_=[],T=this.offset;typeof m=="number"&&m>=0?T=T+this.stride[0]*m|0:(M.push(this.shape[0]),_.push(this.stride[0]));var x=p[M.length+1];return x(this.data,M,_,T)},function(m,M,_,T){return new y(m,M[0],_[0],T)}},2:function(h,p,v){function y(A,m,M,_,T,x){this.data=A,this.shape=[m,M],this.stride=[_,T],this.offset=x|0}var g=y.prototype;return g.dtype=h,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(m,M,_){return h==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M,_):this.data[this.offset+this.stride[0]*m+this.stride[1]*M]=_},g.get=function(m,M){return h==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M):this.data[this.offset+this.stride[0]*m+this.stride[1]*M]},g.index=function(m,M){return this.offset+this.stride[0]*m+this.stride[1]*M},g.hi=function(m,M){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},g.lo=function(m,M){var _=this.offset,T=0,x=this.shape[0],c=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof m=="number"&&m>=0&&(T=m|0,_+=L*T,x-=T),typeof M=="number"&&M>=0&&(T=M|0,_+=S*T,c-=T),new y(this.data,x,c,L,S,_)},g.step=function(m,M){var _=this.shape[0],T=this.shape[1],x=this.stride[0],c=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof m=="number"&&(S=m|0,S<0?(L+=x*(_-1),_=k(-_/S)):_=k(_/S),x*=S),typeof M=="number"&&(S=M|0,S<0?(L+=c*(T-1),T=k(-T/S)):T=k(T/S),c*=S),new y(this.data,_,T,x,c,L)},g.transpose=function(m,M){m=m===void 0?0:m|0,M=M===void 0?1:M|0;var _=this.shape,T=this.stride;return new y(this.data,_[m],_[M],T[m],T[M],this.offset)},g.pick=function(m,M){var _=[],T=[],x=this.offset;typeof m=="number"&&m>=0?x=x+this.stride[0]*m|0:(_.push(this.shape[0]),T.push(this.stride[0])),typeof M=="number"&&M>=0?x=x+this.stride[1]*M|0:(_.push(this.shape[1]),T.push(this.stride[1]));var c=p[_.length+1];return c(this.data,_,T,x)},function(m,M,_,T){return new y(m,M[0],M[1],_[0],_[1],T)}},3:function(h,p,v){function y(A,m,M,_,T,x,c,L){this.data=A,this.shape=[m,M,_],this.stride=[T,x,c],this.offset=L|0}var g=y.prototype;return g.dtype=h,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var m=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return m>M?M>_?[2,1,0]:m>_?[1,2,0]:[1,0,2]:m>_?[2,0,1]:_>M?[0,1,2]:[0,2,1]}}),g.set=function(m,M,_,T){return h==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_,T):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_]=T},g.get=function(m,M,_){return h==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_]},g.index=function(m,M,_){return this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_},g.hi=function(m,M,_){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(m,M,_){var T=this.offset,x=0,c=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof m=="number"&&m>=0&&(x=m|0,T+=k*x,c-=x),typeof M=="number"&&M>=0&&(x=M|0,T+=P*x,L-=x),typeof _=="number"&&_>=0&&(x=_|0,T+=z*x,S-=x),new y(this.data,c,L,S,k,P,z,T)},g.step=function(m,M,_){var T=this.shape[0],x=this.shape[1],c=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,z=0,I=Math.ceil;return typeof m=="number"&&(z=m|0,z<0?(P+=L*(T-1),T=I(-T/z)):T=I(T/z),L*=z),typeof M=="number"&&(z=M|0,z<0?(P+=S*(x-1),x=I(-x/z)):x=I(x/z),S*=z),typeof _=="number"&&(z=_|0,z<0?(P+=k*(c-1),c=I(-c/z)):c=I(c/z),k*=z),new y(this.data,T,x,c,L,S,k,P)},g.transpose=function(m,M,_){m=m===void 0?0:m|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0;var T=this.shape,x=this.stride;return new y(this.data,T[m],T[M],T[_],x[m],x[M],x[_],this.offset)},g.pick=function(m,M,_){var T=[],x=[],c=this.offset;typeof m=="number"&&m>=0?c=c+this.stride[0]*m|0:(T.push(this.shape[0]),x.push(this.stride[0])),typeof M=="number"&&M>=0?c=c+this.stride[1]*M|0:(T.push(this.shape[1]),x.push(this.stride[1])),typeof _=="number"&&_>=0?c=c+this.stride[2]*_|0:(T.push(this.shape[2]),x.push(this.stride[2]));var L=p[T.length+1];return L(this.data,T,x,c)},function(m,M,_,T){return new y(m,M[0],M[1],M[2],_[0],_[1],_[2],T)}},4:function(h,p,v){function y(A,m,M,_,T,x,c,L,S,k){this.data=A,this.shape=[m,M,_,T],this.stride=[x,c,L,S],this.offset=k|0}var g=y.prototype;return g.dtype=h,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:v}),g.set=function(m,M,_,T,x){return h==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T,x):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T]=x},g.get=function(m,M,_,T){return h==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T]},g.index=function(m,M,_,T){return this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T},g.hi=function(m,M,_,T){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof T!="number"||T<0?this.shape[3]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(m,M,_,T){var x=this.offset,c=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.stride[0],I=this.stride[1],R=this.stride[2],D=this.stride[3];return typeof m=="number"&&m>=0&&(c=m|0,x+=z*c,L-=c),typeof M=="number"&&M>=0&&(c=M|0,x+=I*c,S-=c),typeof _=="number"&&_>=0&&(c=_|0,x+=R*c,k-=c),typeof T=="number"&&T>=0&&(c=T|0,x+=D*c,P-=c),new y(this.data,L,S,k,P,z,I,R,D,x)},g.step=function(m,M,_,T){var x=this.shape[0],c=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],z=this.stride[2],I=this.stride[3],R=this.offset,D=0,O=Math.ceil;return typeof m=="number"&&(D=m|0,D<0?(R+=k*(x-1),x=O(-x/D)):x=O(x/D),k*=D),typeof M=="number"&&(D=M|0,D<0?(R+=P*(c-1),c=O(-c/D)):c=O(c/D),P*=D),typeof _=="number"&&(D=_|0,D<0?(R+=z*(L-1),L=O(-L/D)):L=O(L/D),z*=D),typeof T=="number"&&(D=T|0,D<0?(R+=I*(S-1),S=O(-S/D)):S=O(S/D),I*=D),new y(this.data,x,c,L,S,k,P,z,I,R)},g.transpose=function(m,M,_,T){m=m===void 0?0:m|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0,T=T===void 0?3:T|0;var x=this.shape,c=this.stride;return new y(this.data,x[m],x[M],x[_],x[T],c[m],c[M],c[_],c[T],this.offset)},g.pick=function(m,M,_,T){var x=[],c=[],L=this.offset;typeof m=="number"&&m>=0?L=L+this.stride[0]*m|0:(x.push(this.shape[0]),c.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(x.push(this.shape[1]),c.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(x.push(this.shape[2]),c.push(this.stride[2])),typeof T=="number"&&T>=0?L=L+this.stride[3]*T|0:(x.push(this.shape[3]),c.push(this.stride[3]));var S=p[x.length+1];return S(this.data,x,c,L)},function(m,M,_,T){return new y(m,M[0],M[1],M[2],M[3],_[0],_[1],_[2],_[3],T)}},5:function(p,v,y){function g(m,M,_,T,x,c,L,S,k,P,z,I){this.data=m,this.shape=[M,_,T,x,c],this.stride=[L,S,k,P,z],this.offset=I|0}var A=g.prototype;return A.dtype=p,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:y}),A.set=function(M,_,T,x,c,L){return p==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*x+this.stride[4]*c,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*x+this.stride[4]*c]=L},A.get=function(M,_,T,x,c){return p==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*x+this.stride[4]*c):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*x+this.stride[4]*c]},A.index=function(M,_,T,x,c){return this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*x+this.stride[4]*c},A.hi=function(M,_,T,x,c){return new g(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof x!="number"||x<0?this.shape[3]:x|0,typeof c!="number"||c<0?this.shape[4]:c|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(M,_,T,x,c){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],z=this.shape[2],I=this.shape[3],R=this.shape[4],D=this.stride[0],O=this.stride[1],F=this.stride[2],Y=this.stride[3],X=this.stride[4];return typeof M=="number"&&M>=0&&(S=M|0,L+=D*S,k-=S),typeof _=="number"&&_>=0&&(S=_|0,L+=O*S,P-=S),typeof T=="number"&&T>=0&&(S=T|0,L+=F*S,z-=S),typeof x=="number"&&x>=0&&(S=x|0,L+=Y*S,I-=S),typeof c=="number"&&c>=0&&(S=c|0,L+=X*S,R-=S),new g(this.data,k,P,z,I,R,D,O,F,Y,X,L)},A.step=function(M,_,T,x,c){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.shape[4],I=this.stride[0],R=this.stride[1],D=this.stride[2],O=this.stride[3],F=this.stride[4],Y=this.offset,X=0,q=Math.ceil;return typeof M=="number"&&(X=M|0,X<0?(Y+=I*(L-1),L=q(-L/X)):L=q(L/X),I*=X),typeof _=="number"&&(X=_|0,X<0?(Y+=R*(S-1),S=q(-S/X)):S=q(S/X),R*=X),typeof T=="number"&&(X=T|0,X<0?(Y+=D*(k-1),k=q(-k/X)):k=q(k/X),D*=X),typeof x=="number"&&(X=x|0,X<0?(Y+=O*(P-1),P=q(-P/X)):P=q(P/X),O*=X),typeof c=="number"&&(X=c|0,X<0?(Y+=F*(z-1),z=q(-z/X)):z=q(z/X),F*=X),new g(this.data,L,S,k,P,z,I,R,D,O,F,Y)},A.transpose=function(M,_,T,x,c){M=M===void 0?0:M|0,_=_===void 0?1:_|0,T=T===void 0?2:T|0,x=x===void 0?3:x|0,c=c===void 0?4:c|0;var L=this.shape,S=this.stride;return new g(this.data,L[M],L[_],L[T],L[x],L[c],S[M],S[_],S[T],S[x],S[c],this.offset)},A.pick=function(M,_,T,x,c){var L=[],S=[],k=this.offset;typeof M=="number"&&M>=0?k=k+this.stride[0]*M|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof _=="number"&&_>=0?k=k+this.stride[1]*_|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof T=="number"&&T>=0?k=k+this.stride[2]*T|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof x=="number"&&x>=0?k=k+this.stride[3]*x|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof c=="number"&&c>=0?k=k+this.stride[4]*c|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=v[L.length+1];return P(this.data,L,S,k)},function(M,_,T,x){return new g(M,_[0],_[1],_[2],_[3],_[4],T[0],T[1],T[2],T[3],T[4],x)}}};function u(h,p){var v=p===-1?"T":String(p),y=r[v];return p===-1?y(h):p===0?y(h,i[h][0]):y(h,i[h],n)}function s(h){if(e(h))return"buffer";if(o)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}var i={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function f(h,p,v,y){if(h===void 0){var T=i.array[0];return T([])}else typeof h=="number"&&(h=[h]);p===void 0&&(p=[h.length]);var g=p.length;if(v===void 0){v=new Array(g);for(var A=g-1,m=1;A>=0;--A)v[A]=m,m*=p[A]}if(y===void 0){y=0;for(var A=0;A<g;++A)v[A]<0&&(y-=(p[A]-1)*v[A])}for(var M=s(h),_=i[M];_.length<=g+1;)_.push(u(M,_.length-1));var T=_[g+1];return T(h,p,v,y)}b.exports=f},{"is-buffer":237}],260:[function(l,b,w){var e=l("double-bits"),o=Math.pow(2,-1074),a=-1>>>0;b.exports=n;function n(r,u){if(isNaN(r)||isNaN(u))return NaN;if(r===u)return r;if(r===0)return u<0?-o:o;var s=e.hi(r),i=e.lo(r);return u>r==r>0?i===a?(s+=1,i=0):i+=1:i===0?(i=a,s-=1):i-=1,e.pack(i,s)}},{"double-bits":64}],261:[function(l,b,w){var e=1e-6,o=1e-6;w.vertexNormals=function(a,n,r){for(var u=n.length,s=new Array(u),i=r===void 0?e:r,f=0;f<u;++f)s[f]=[0,0,0];for(var f=0;f<a.length;++f)for(var h=a[f],p=0,v=h[h.length-1],y=h[0],g=0;g<h.length;++g){p=v,v=y,y=h[(g+1)%h.length];for(var A=n[p],m=n[v],M=n[y],_=new Array(3),T=0,x=new Array(3),c=0,L=0;L<3;++L)_[L]=A[L]-m[L],T+=_[L]*_[L],x[L]=M[L]-m[L],c+=x[L]*x[L];if(T*c>i)for(var S=s[v],k=1/Math.sqrt(T*c),L=0;L<3;++L){var P=(L+1)%3,z=(L+2)%3;S[L]+=k*(x[P]*_[z]-x[z]*_[P])}}for(var f=0;f<u;++f){for(var S=s[f],I=0,L=0;L<3;++L)I+=S[L]*S[L];if(I>i)for(var k=1/Math.sqrt(I),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return s},w.faceNormals=function(a,n,r){for(var u=a.length,s=new Array(u),i=r===void 0?o:r,f=0;f<u;++f){for(var h=a[f],p=new Array(3),v=0;v<3;++v)p[v]=n[h[v]];for(var y=new Array(3),g=new Array(3),v=0;v<3;++v)y[v]=p[1][v]-p[0][v],g[v]=p[2][v]-p[0][v];for(var A=new Array(3),m=0,v=0;v<3;++v){var M=(v+1)%3,_=(v+2)%3;A[v]=y[M]*g[_]-y[_]*g[M],m+=A[v]*A[v]}m>i?m=1/Math.sqrt(m):m=0;for(var v=0;v<3;++v)A[v]*=m;s[f]=A}return s}},{}],262:[function(l,b,w){b.exports=e;function e(o,a,n,r,u,s,i,f,h,p){var v=a+s+p;if(y>0){var y=Math.sqrt(v+1);o[0]=.5*(i-h)/y,o[1]=.5*(f-r)/y,o[2]=.5*(n-s)/y,o[3]=.5*y}else{var g=Math.max(a,s,p),y=Math.sqrt(2*g-v+1);a>=g?(o[0]=.5*y,o[1]=.5*(u+n)/y,o[2]=.5*(f+r)/y,o[3]=.5*(i-h)/y):s>=g?(o[0]=.5*(n+u)/y,o[1]=.5*y,o[2]=.5*(h+i)/y,o[3]=.5*(f-r)/y):(o[0]=.5*(r+f)/y,o[1]=.5*(i+h)/y,o[2]=.5*y,o[3]=.5*(n-u)/y)}return o}},{}],263:[function(l,b,w){b.exports=p;var e=l("filtered-vector"),o=l("gl-mat4/lookAt"),a=l("gl-mat4/fromQuat"),n=l("gl-mat4/invert"),r=l("./lib/quatFromFrame");function u(v,y,g){return Math.sqrt(Math.pow(v,2)+Math.pow(y,2)+Math.pow(g,2))}function s(v,y,g,A){return Math.sqrt(Math.pow(v,2)+Math.pow(y,2)+Math.pow(g,2)+Math.pow(A,2))}function i(v,y){var g=y[0],A=y[1],m=y[2],M=y[3],_=s(g,A,m,M);_>1e-6?(v[0]=g/_,v[1]=A/_,v[2]=m/_,v[3]=M/_):(v[0]=v[1]=v[2]=0,v[3]=1)}function f(v,y,g){this.radius=e([g]),this.center=e(y),this.rotation=e(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=f.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var y=this.computedRotation;i(y,y);var g=this.computedMatrix;a(g,y);var A=this.computedCenter,m=this.computedEye,M=this.computedUp,_=Math.exp(this.computedRadius[0]);m[0]=A[0]+_*g[2],m[1]=A[1]+_*g[6],m[2]=A[2]+_*g[10],M[0]=g[1],M[1]=g[5],M[2]=g[9];for(var T=0;T<3;++T){for(var x=0,c=0;c<3;++c)x+=g[T+4*c]*m[c];g[12+T]=-x}},h.getMatrix=function(v,y){this.recalcMatrix(v);var g=this.computedMatrix;if(y){for(var A=0;A<16;++A)y[A]=g[A];return y}return g},h.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},h.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},h.pan=function(v,y,g,A){y=y||0,g=g||0,A=A||0,this.recalcMatrix(v);var m=this.computedMatrix,M=m[1],_=m[5],T=m[9],x=u(M,_,T);M/=x,_/=x,T/=x;var c=m[0],L=m[4],S=m[8],k=c*M+L*_+S*T;c-=M*k,L-=_*k,S-=T*k;var P=u(c,L,S);c/=P,L/=P,S/=P,m[2],m[6],m[10];var z=c*y+M*g,I=L*y+_*g,R=S*y+T*g;this.center.move(v,z,I,R);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+A),this.radius.set(v,Math.log(D))},h.rotate=function(v,y,g,A){this.recalcMatrix(v),y=y||0,g=g||0;var m=this.computedMatrix,M=m[0],_=m[4],T=m[8],x=m[1],c=m[5],L=m[9],S=m[2],k=m[6],P=m[10],z=y*M+g*x,I=y*_+g*c,R=y*T+g*L,D=-(k*R-P*I),O=-(P*z-S*R),F=-(S*I-k*z),Y=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(O,2)-Math.pow(F,2))),X=s(D,O,F,Y);X>1e-6?(D/=X,O/=X,F/=X,Y/=X):(D=O=F=0,Y=1);var q=this.computedRotation,$=q[0],V=q[1],K=q[2],se=q[3],ue=$*Y+se*D+V*F-K*O,oe=V*Y+se*O+K*D-$*F,U=K*Y+se*F+$*O-V*D,G=se*Y-$*D-V*O-K*F;if(A){D=S,O=k,F=P;var re=Math.sin(A)/u(D,O,F);D*=re,O*=re,F*=re,Y=Math.cos(y),ue=ue*Y+G*D+oe*F-U*O,oe=oe*Y+G*O+U*D-ue*F,U=U*Y+G*F+ue*O-oe*D,G=G*Y-ue*D-oe*O-U*F}var ee=s(ue,oe,U,G);ee>1e-6?(ue/=ee,oe/=ee,U/=ee,G/=ee):(ue=oe=U=0,G=1),this.rotation.set(v,ue,oe,U,G)},h.lookAt=function(v,y,g,A){this.recalcMatrix(v),g=g||this.computedCenter,y=y||this.computedEye,A=A||this.computedUp;var m=this.computedMatrix;o(m,y,g,A);var M=this.computedRotation;r(M,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),i(M,M),this.rotation.set(v,M[0],M[1],M[2],M[3]);for(var _=0,T=0;T<3;++T)_+=Math.pow(g[T]-y[T],2);this.radius.set(v,.5*Math.log(Math.max(_,1e-6))),this.center.set(v,g[0],g[1],g[2])},h.translate=function(v,y,g,A){this.center.move(v,y||0,g||0,A||0)},h.setMatrix=function(v,y){var g=this.computedRotation;r(g,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),i(g,g),this.rotation.set(v,g[0],g[1],g[2],g[3]);var A=this.computedMatrix;n(A,y);var m=A[15];if(Math.abs(m)>1e-6){var M=A[12]/m,_=A[13]/m,T=A[14]/m;this.recalcMatrix(v);var x=Math.exp(this.computedRadius[0]);this.center.set(v,M-A[2]*x,_-A[6]*x,T-A[10]*x),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},h.setDistance=function(v,y){y>0&&this.radius.set(v,Math.log(y))},h.setDistanceLimits=function(v,y){v>0?v=Math.log(v):v=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=y},h.getDistanceLimits=function(v){var y=this.radius.bounds;return v?(v[0]=Math.exp(y[0][0]),v[1]=Math.exp(y[1][0]),v):[Math.exp(y[0][0]),Math.exp(y[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(v){var y=this.lastT(),g=v.center;g&&this.center.set(y,g[0],g[1],g[2]);var A=v.rotation;A&&this.rotation.set(y,A[0],A[1],A[2],A[3]);var m=v.distance;m&&m>0&&this.radius.set(y,Math.log(m)),this.setDistanceLimits(v.zoomMin,v.zoomMax)};function p(v){v=v||{};var y=v.center||[0,0,0],g=v.rotation||[0,0,0,1],A=v.radius||1;y=[].slice.call(y,0,3),g=[].slice.call(g,0,4),i(g,g);var m=new f(g,y,Math.log(A));return m.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&m.lookAt(0,v.eye,v.center,v.up),m}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(l,b,w){var e=l("repeat-string");b.exports=function(a,n,r){return r=typeof r!="undefined"?r+"":" ",e(r,n)+a}},{"repeat-string":277}],265:[function(l,b,w){b.exports=function(o,a){a||(a=[0,""]),o=String(o);var n=parseFloat(o,10);return a[0]=n,a[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",a}},{}],266:[function(l,b,w){b.exports=o;var e=l("compare-angle");function o(a,n){for(var r=n.length|0,u=a.length,s=[new Array(r),new Array(r)],i=0;i<r;++i)s[0][i]=[],s[1][i]=[];for(var i=0;i<u;++i){var f=a[i];s[0][f[0]].push(f),s[1][f[1]].push(f)}for(var h=[],i=0;i<r;++i)s[0][i].length+s[1][i].length===0&&h.push([i]);function p(_,T){var x=s[T][_[T]];x.splice(x.indexOf(_),1)}function v(_,T,x){for(var c,L,S,k=0;k<2;++k)if(s[k][T].length>0){c=s[k][T][0],S=k;break}L=c[S^1];for(var P=0;P<2;++P)for(var z=s[P][T],I=0;I<z.length;++I){var R=z[I],D=R[P^1],O=e(n[_],n[T],n[L],n[D]);O>0&&(c=R,L=D,S=P)}return x||c&&p(c,S),L}function y(_,T){var x=s[T][_][0],c=[_];p(x,T);for(var L=x[T^1];;){for(;L!==_;)c.push(L),L=v(c[c.length-2],L,!1);if(s[0][_].length+s[1][_].length===0)break;var S=c[c.length-1],k=_,P=c[1],z=v(S,k,!0);if(e(n[S],n[k],n[P],n[z])<0)break;c.push(_),L=v(S,k)}return c}function g(_,T){return T[1]===T[T.length-1]}for(var i=0;i<r;++i)for(var A=0;A<2;++A){for(var m=[];s[A][i].length>0;){s[0][i].length;var M=y(i,A);g(m,M)?m.push.apply(m,M):(m.length>0&&h.push(m),m=M)}m.length>0&&h.push(m)}return h}},{"compare-angle":54}],267:[function(l,b,w){b.exports=o;var e=l("edges-to-adjacency-list");function o(a,n){for(var r=e(a,n.length),u=new Array(n.length),s=new Array(n.length),i=[],f=0;f<n.length;++f){var h=r[f].length;s[f]=h,u[f]=!0,h<=1&&i.push(f)}for(;i.length>0;){var p=i.pop();u[p]=!1;for(var v=r[p],f=0;f<v.length;++f){var y=v[f];--s[y]==0&&i.push(y)}}for(var g=new Array(n.length),A=[],f=0;f<n.length;++f)if(u[f]){var p=A.length;g[f]=p,A.push(n[f])}else g[f]=-1;for(var m=[],f=0;f<a.length;++f){var M=a[f];u[M[0]]&&u[M[1]]&&m.push([g[M[0]],g[M[1]]])}return[m,A]}},{"edges-to-adjacency-list":66}],268:[function(l,b,w){b.exports=h;var e=l("edges-to-adjacency-list"),o=l("planar-dual"),a=l("point-in-big-polygon"),n=l("two-product"),r=l("robust-sum"),u=l("uniq"),s=l("./lib/trim-leaves");function i(p,v){for(var y=new Array(p),g=0;g<p;++g)y[g]=v;return y}function f(p){for(var v=new Array(p),y=0;y<p;++y)v[y]=[];return v}function h(p,v){var y=s(p,v);p=y[0],v=y[1];var g=v.length;p.length;for(var A=e(p,v.length),m=0;m<g;++m)if(A[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=o(p,v);function _(ie){for(var fe=ie.length,me=[0],ce=0;ce<fe;++ce){var ye=v[ie[ce]],xe=v[ie[(ce+1)%fe]],ke=n(-ye[0],ye[1]),Ae=n(-ye[0],xe[1]),Oe=n(xe[0],ye[1]),He=n(xe[0],xe[1]);me=r(me,r(r(ke,Ae),r(Oe,He)))}return me[me.length-1]>0}M=M.filter(_);for(var T=M.length,x=new Array(T),c=new Array(T),m=0;m<T;++m){x[m]=m;var L=new Array(T),S=M[m].map(function(fe){return v[fe]}),k=a([S]),P=0;e:for(var z=0;z<T;++z)if(L[z]=0,m!==z){for(var I=M[z],R=I.length,D=0;D<R;++D){var O=k(v[I[D]]);if(O!==0){O<0&&(L[z]=1,P+=1);continue e}}L[z]=1,P+=1}c[m]=[P,m,L]}c.sort(function(ie,fe){return fe[0]-ie[0]});for(var m=0;m<T;++m)for(var L=c[m],F=L[1],Y=L[2],z=0;z<T;++z)Y[z]&&(x[z]=F);for(var X=f(T),m=0;m<T;++m)X[m].push(x[m]),X[x[m]].push(m);for(var q={},$=i(g,!1),m=0;m<T;++m)for(var I=M[m],R=I.length,z=0;z<R;++z){var V=I[z],K=I[(z+1)%R],se=Math.min(V,K)+":"+Math.max(V,K);if(se in q){var ue=q[se];X[ue].push(m),X[m].push(ue),$[V]=$[K]=!0}else q[se]=m}function oe(ie){for(var fe=ie.length,me=0;me<fe;++me)if(!$[ie[me]])return!1;return!0}for(var U=[],G=i(T,-1),m=0;m<T;++m)x[m]===m&&!oe(M[m])?(U.push(m),G[m]=0):G[m]=-1;for(var y=[];U.length>0;){var re=U.pop(),ee=X[re];u(ee,function(ie,fe){return ie-fe});var j=ee.length,Q=G[re],ne;if(Q===0){var I=M[re];ne=[I]}for(var m=0;m<j;++m){var ae=ee[m];if(!(G[ae]>=0)&&(G[ae]=Q^1,U.push(ae),Q===0)){var I=M[ae];oe(I)||(I.reverse(),ne.push(I))}}Q===0&&y.push(ne)}return y}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(l,b,w){b.exports=v;var e=l("robust-orientation")[3],o=l("slab-decomposition"),a=l("interval-tree-1d"),n=l("binary-search-bounds");function r(){return!0}function u(y){return function(g,A){var m=y[g];return m?!!m.queryPoint(A,r):!1}}function s(y){for(var g={},A=0;A<y.length;++A){var m=y[A],M=m[0][0],_=m[0][1],T=m[1][1],x=[Math.min(_,T),Math.max(_,T)];M in g?g[M].push(x):g[M]=[x]}for(var c={},L=Object.keys(g),A=0;A<L.length;++A){var S=g[L[A]];c[L[A]]=a(S)}return u(c)}function i(y,g){return function(A){var m=n.le(g,A[0]);if(m<0)return 1;var M=y[m];if(!M)if(m>0&&g[m]===A[0])M=y[m-1];else return 1;for(var _=1;M;){var T=M.key,x=e(A,T[0],T[1]);if(T[0][0]<T[1][0])if(x<0)M=M.left;else if(x>0)_=-1,M=M.right;else return 0;else if(x>0)M=M.left;else if(x<0)_=1,M=M.right;else return 0}return _}}function f(y){return 1}function h(y){return function(A){return y(A[0],A[1])?0:1}}function p(y,g){return function(m){return y(m[0],m[1])?0:g(m)}}function v(y){for(var g=y.length,A=[],m=[],M=0;M<g;++M)for(var _=y[M],T=_.length,x=T-1,c=0;c<T;x=c++){var L=_[x],S=_[c];L[0]===S[0]?m.push([L,S]):A.push([L,S])}if(A.length===0)return m.length===0?f:h(s(m));var k=o(A),P=i(k.slabs,k.coordinates);return m.length===0?P:p(s(m),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(l,b,w){var e=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);function n(r,u,s,i,f){e.length<i.length&&(e=new Float64Array(i.length),o=new Float64Array(i.length),a=new Float64Array(i.length));for(var h=0;h<i.length;++h)e[h]=r[h]-i[h],o[h]=u[h]-r[h],a[h]=s[h]-r[h];for(var p=0,v=0,y=0,g=0,A=0,m=0,h=0;h<i.length;++h){var M=o[h],_=a[h],T=e[h];p+=M*M,v+=M*_,y+=_*_,g+=T*M,A+=T*_,m+=T*T}var x=Math.abs(p*y-v*v),c=v*A-y*g,L=v*g-p*A,S;if(c+L<=x)if(c<0)L<0&&g<0?(L=0,-g>=p?(c=1,S=p+2*g+m):(c=-g/p,S=g*c+m)):(c=0,A>=0?(L=0,S=m):-A>=y?(L=1,S=y+2*A+m):(L=-A/y,S=A*L+m));else if(L<0)L=0,g>=0?(c=0,S=m):-g>=p?(c=1,S=p+2*g+m):(c=-g/p,S=g*c+m);else{var k=1/x;c*=k,L*=k,S=c*(p*c+v*L+2*g)+L*(v*c+y*L+2*A)+m}else{var P,z,I,R;c<0?(P=v+g,z=y+A,z>P?(I=z-P,R=p-2*v+y,I>=R?(c=1,L=0,S=p+2*g+m):(c=I/R,L=1-c,S=c*(p*c+v*L+2*g)+L*(v*c+y*L+2*A)+m)):(c=0,z<=0?(L=1,S=y+2*A+m):A>=0?(L=0,S=m):(L=-A/y,S=A*L+m))):L<0?(P=v+A,z=p+g,z>P?(I=z-P,R=p-2*v+y,I>=R?(L=1,c=0,S=y+2*A+m):(L=I/R,c=1-L,S=c*(p*c+v*L+2*g)+L*(v*c+y*L+2*A)+m)):(L=0,z<=0?(c=1,S=p+2*g+m):g>=0?(c=0,S=m):(c=-g/p,S=g*c+m))):(I=y+A-v-g,I<=0?(c=0,L=1,S=y+2*A+m):(R=p-2*v+y,I>=R?(c=1,L=0,S=p+2*g+m):(c=I/R,L=1-c,S=c*(p*c+v*L+2*g)+L*(v*c+y*L+2*A)+m)))}for(var D=1-c-L,h=0;h<i.length;++h)f[h]=D*r[h]+c*u[h]+L*s[h];return S<0?0:S}b.exports=n},{}],271:[function(l,b,w){b.exports=l("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(l,b,w){var e=l("big-rat/add");b.exports=o;function o(a,n){for(var r=a.length,u=new Array(r),s=0;s<r;++s)u[s]=e(a[s],n[s]);return u}},{"big-rat/add":15}],273:[function(l,b,w){b.exports=o;var e=l("big-rat");function o(a){for(var n=new Array(a.length),r=0;r<a.length;++r)n[r]=e(a[r]);return n}},{"big-rat":18}],274:[function(l,b,w){var e=l("big-rat"),o=l("big-rat/mul");b.exports=a;function a(n,r){for(var u=e(r),s=n.length,i=new Array(s),f=0;f<s;++f)i[f]=o(n[f],u);return i}},{"big-rat":18,"big-rat/mul":27}],275:[function(l,b,w){var e=l("big-rat/sub");b.exports=o;function o(a,n){for(var r=a.length,u=new Array(r),s=0;s<r;++s)u[s]=e(a[s],n[s]);return u}},{"big-rat/sub":29}],276:[function(l,b,w){var e=l("compare-cell"),o=l("compare-oriented-cell"),a=l("cell-orientation");b.exports=n;function n(r){r.sort(o);for(var u=r.length,s=0,i=0;i<u;++i){var f=r[i],h=a(f);if(h!==0){if(s>0){var p=r[s-1];if(e(f,p)===0&&a(p)!==h){s-=1;continue}}r[s++]=f}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(l,b,w){var e="",o;b.exports=a;function a(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var u=n.length*r;if(o!==n||typeof o=="undefined")o=n,e="";else if(e.length>=u)return e.substr(0,u);for(;u>e.length&&r>1;)r&1&&(e+=n),r>>=1,n+=n;return e+=n,e=e.substr(0,u),e}},{}],278:[function(l,b,w){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof d!="undefined"?d:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(l,b,w){b.exports=e;function e(o){for(var a=o.length,n=o[o.length-1],r=a,u=a-2;u>=0;--u){var s=n,i=o[u];n=s+i;var f=n-s,h=i-f;h&&(o[--r]=n,n=h)}for(var p=0,u=r;u<a;++u){var s=o[u],i=n;n=s+i;var f=n-s,h=i-f;h&&(o[p++]=h)}return o[p++]=n,o.length=p,o}},{}],280:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-scale"),n=l("robust-compress"),r=4;function u(v,y,g,A){return function(M){return A(v(g(M[0][0],M[1][1]),g(-M[0][1],M[1][0])))}}function s(v,y,g,A){return function(M){return A(v(y(v(g(M[1][1],M[2][2]),g(-M[1][2],M[2][1])),M[0][0]),v(y(v(g(M[1][0],M[2][2]),g(-M[1][2],M[2][0])),-M[0][1]),y(v(g(M[1][0],M[2][1]),g(-M[1][1],M[2][0])),M[0][2]))))}}function i(v){var y=v===2?u:v===3?s:void 0;return y(o,a,e,n)}var f=[function(){return[0]},function(y){return[y[0][0]]}];function h(v,y,g,A,m,M){return function(T){switch(T.length){case 0:return v(T);case 1:return y(T);case 2:return g(T);case 3:return A(T)}var x=m[T.length];return x||(x=m[T.length]=M(T.length)),x(T)}}function p(){for(;f.length<r;)f.push(i(f.length));b.exports=h.apply(void 0,f.concat([f,i]));for(var v=0;v<f.length;++v)b.exports[v]=f[v]}p()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(l,b,w){var e=l("two-product"),o=l("robust-sum");b.exports=a;function a(n,r){for(var u=e(n[0],r[0]),s=1;s<n.length;++s)u=o(u,e(n[s],r[s]));return u}},{"robust-sum":289,"two-product":306}],282:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-subtract"),n=l("robust-scale"),r=6;function u(_){var T=_===3?h:_===4?p:_===5?v:y;return T(o,a,e,n)}function s(){return 0}function i(){return 0}function f(){return 0}function h(_,T,x,c){function L(S,k,P){var z=x(S[0],S[0]),I=c(z,k[0]),R=c(z,P[0]),D=x(k[0],k[0]),O=c(D,S[0]),F=c(D,P[0]),Y=x(P[0],P[0]),X=c(Y,S[0]),q=c(Y,k[0]),$=_(T(q,F),T(O,I)),V=T(X,R),K=T($,V);return K[K.length-1]}return L}function p(_,T,x,c){function L(S,k,P,z){var I=_(x(S[0],S[0]),x(S[1],S[1])),R=c(I,k[0]),D=c(I,P[0]),O=c(I,z[0]),F=_(x(k[0],k[0]),x(k[1],k[1])),Y=c(F,S[0]),X=c(F,P[0]),q=c(F,z[0]),$=_(x(P[0],P[0]),x(P[1],P[1])),V=c($,S[0]),K=c($,k[0]),se=c($,z[0]),ue=_(x(z[0],z[0]),x(z[1],z[1])),oe=c(ue,S[0]),U=c(ue,k[0]),G=c(ue,P[0]),re=_(_(c(T(G,se),k[1]),_(c(T(U,q),-P[1]),c(T(K,X),z[1]))),_(c(T(U,q),S[1]),_(c(T(oe,O),-k[1]),c(T(Y,R),z[1])))),ee=_(_(c(T(G,se),S[1]),_(c(T(oe,O),-P[1]),c(T(V,D),z[1]))),_(c(T(K,X),S[1]),_(c(T(V,D),-k[1]),c(T(Y,R),P[1])))),j=T(re,ee);return j[j.length-1]}return L}function v(_,T,x,c){function L(S,k,P,z,I){var R=_(x(S[0],S[0]),_(x(S[1],S[1]),x(S[2],S[2]))),D=c(R,k[0]),O=c(R,P[0]),F=c(R,z[0]),Y=c(R,I[0]),X=_(x(k[0],k[0]),_(x(k[1],k[1]),x(k[2],k[2]))),q=c(X,S[0]),$=c(X,P[0]),V=c(X,z[0]),K=c(X,I[0]),se=_(x(P[0],P[0]),_(x(P[1],P[1]),x(P[2],P[2]))),ue=c(se,S[0]),oe=c(se,k[0]),U=c(se,z[0]),G=c(se,I[0]),re=_(x(z[0],z[0]),_(x(z[1],z[1]),x(z[2],z[2]))),ee=c(re,S[0]),j=c(re,k[0]),Q=c(re,P[0]),ne=c(re,I[0]),ae=_(x(I[0],I[0]),_(x(I[1],I[1]),x(I[2],I[2]))),ie=c(ae,S[0]),fe=c(ae,k[0]),me=c(ae,P[0]),ce=c(ae,z[0]),ye=_(_(_(c(_(c(T(ce,ne),P[1]),_(c(T(me,G),-z[1]),c(T(Q,U),I[1]))),k[2]),_(c(_(c(T(ce,ne),k[1]),_(c(T(fe,K),-z[1]),c(T(j,V),I[1]))),-P[2]),c(_(c(T(me,G),k[1]),_(c(T(fe,K),-P[1]),c(T(oe,$),I[1]))),z[2]))),_(c(_(c(T(Q,U),k[1]),_(c(T(j,V),-P[1]),c(T(oe,$),z[1]))),-I[2]),_(c(_(c(T(ce,ne),k[1]),_(c(T(fe,K),-z[1]),c(T(j,V),I[1]))),S[2]),c(_(c(T(ce,ne),S[1]),_(c(T(ie,Y),-z[1]),c(T(ee,F),I[1]))),-k[2])))),_(_(c(_(c(T(fe,K),S[1]),_(c(T(ie,Y),-k[1]),c(T(q,D),I[1]))),z[2]),_(c(_(c(T(j,V),S[1]),_(c(T(ee,F),-k[1]),c(T(q,D),z[1]))),-I[2]),c(_(c(T(Q,U),k[1]),_(c(T(j,V),-P[1]),c(T(oe,$),z[1]))),S[2]))),_(c(_(c(T(Q,U),S[1]),_(c(T(ee,F),-P[1]),c(T(ue,O),z[1]))),-k[2]),_(c(_(c(T(j,V),S[1]),_(c(T(ee,F),-k[1]),c(T(q,D),z[1]))),P[2]),c(_(c(T(oe,$),S[1]),_(c(T(ue,O),-k[1]),c(T(q,D),P[1]))),-z[2]))))),xe=_(_(_(c(_(c(T(ce,ne),P[1]),_(c(T(me,G),-z[1]),c(T(Q,U),I[1]))),S[2]),c(_(c(T(ce,ne),S[1]),_(c(T(ie,Y),-z[1]),c(T(ee,F),I[1]))),-P[2])),_(c(_(c(T(me,G),S[1]),_(c(T(ie,Y),-P[1]),c(T(ue,O),I[1]))),z[2]),c(_(c(T(Q,U),S[1]),_(c(T(ee,F),-P[1]),c(T(ue,O),z[1]))),-I[2]))),_(_(c(_(c(T(me,G),k[1]),_(c(T(fe,K),-P[1]),c(T(oe,$),I[1]))),S[2]),c(_(c(T(me,G),S[1]),_(c(T(ie,Y),-P[1]),c(T(ue,O),I[1]))),-k[2])),_(c(_(c(T(fe,K),S[1]),_(c(T(ie,Y),-k[1]),c(T(q,D),I[1]))),P[2]),c(_(c(T(oe,$),S[1]),_(c(T(ue,O),-k[1]),c(T(q,D),P[1]))),-I[2])))),ke=T(ye,xe);return ke[ke.length-1]}return L}function y(_,T,x,c){function L(S,k,P,z,I,R){var D=_(_(x(S[0],S[0]),x(S[1],S[1])),_(x(S[2],S[2]),x(S[3],S[3]))),O=c(D,k[0]),F=c(D,P[0]),Y=c(D,z[0]),X=c(D,I[0]),q=c(D,R[0]),$=_(_(x(k[0],k[0]),x(k[1],k[1])),_(x(k[2],k[2]),x(k[3],k[3]))),V=c($,S[0]),K=c($,P[0]),se=c($,z[0]),ue=c($,I[0]),oe=c($,R[0]),U=_(_(x(P[0],P[0]),x(P[1],P[1])),_(x(P[2],P[2]),x(P[3],P[3]))),G=c(U,S[0]),re=c(U,k[0]),ee=c(U,z[0]),j=c(U,I[0]),Q=c(U,R[0]),ne=_(_(x(z[0],z[0]),x(z[1],z[1])),_(x(z[2],z[2]),x(z[3],z[3]))),ae=c(ne,S[0]),ie=c(ne,k[0]),fe=c(ne,P[0]),me=c(ne,I[0]),ce=c(ne,R[0]),ye=_(_(x(I[0],I[0]),x(I[1],I[1])),_(x(I[2],I[2]),x(I[3],I[3]))),xe=c(ye,S[0]),ke=c(ye,k[0]),Ae=c(ye,P[0]),Oe=c(ye,z[0]),He=c(ye,R[0]),Ge=_(_(x(R[0],R[0]),x(R[1],R[1])),_(x(R[2],R[2]),x(R[3],R[3]))),_e=c(Ge,S[0]),Ie=c(Ge,k[0]),Ye=c(Ge,P[0]),qe=c(Ge,z[0]),Ue=c(Ge,I[0]),Re=_(_(_(c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),P[2]),c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),-z[2])),_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),I[2]),c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),-R[2]))),k[3]),_(c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),k[2]),c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),-z[2])),_(c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),I[2]),c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),-R[2]))),-P[3]),c(_(_(c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),k[2]),c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),I[2]),c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),-R[2]))),z[3]))),_(_(c(_(_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),k[2]),c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),z[2]),c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),-R[2]))),-I[3]),c(_(_(c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),k[2]),c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),-P[2])),_(c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),z[2]),c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),-I[2]))),R[3])),_(c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),k[2]),c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),-z[2])),_(c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),I[2]),c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),-R[2]))),S[3]),c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-z[2])),_(c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),I[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-R[2]))),-k[3])))),_(_(_(c(_(_(c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),I[2]),c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),-R[2]))),z[3]),c(_(_(c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),S[2]),c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),z[2]),c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),-R[2]))),-I[3])),_(c(_(_(c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),S[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-k[2])),_(c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),z[2]),c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),-I[2]))),R[3]),c(_(_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),k[2]),c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),z[2]),c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),-R[2]))),S[3]))),_(_(c(_(_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),S[2]),c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),z[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-R[2]))),-k[3]),c(_(_(c(_(c(T(qe,ce),k[1]),_(c(T(Ie,oe),-z[1]),c(T(ie,se),R[1]))),S[2]),c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),z[2]),c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),-R[2]))),P[3])),_(c(_(_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),S[2]),c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-R[2]))),-z[3]),c(_(_(c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),S[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-k[2])),_(c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-z[2]))),R[3]))))),Ve=_(_(_(c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),P[2]),c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),-z[2])),_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),I[2]),c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),-R[2]))),S[3]),_(c(_(_(c(_(c(T(Ue,He),z[1]),_(c(T(qe,ce),-I[1]),c(T(Oe,me),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-z[2])),_(c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),I[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-R[2]))),-P[3]),c(_(_(c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),I[2]),c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),-R[2]))),z[3]))),_(_(c(_(_(c(_(c(T(qe,ce),P[1]),_(c(T(Ye,Q),-z[1]),c(T(fe,ee),R[1]))),S[2]),c(_(c(T(qe,ce),S[1]),_(c(T(_e,q),-z[1]),c(T(ae,Y),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),z[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-R[2]))),-I[3]),c(_(_(c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),S[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-P[2])),_(c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),z[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-I[2]))),R[3])),_(c(_(_(c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),k[2]),c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),I[2]),c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),-R[2]))),S[3]),c(_(_(c(_(c(T(Ue,He),P[1]),_(c(T(Ye,Q),-I[1]),c(T(Ae,j),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-P[2])),_(c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),I[2]),c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),-R[2]))),-k[3])))),_(_(_(c(_(_(c(_(c(T(Ue,He),k[1]),_(c(T(Ie,oe),-I[1]),c(T(ke,ue),R[1]))),S[2]),c(_(c(T(Ue,He),S[1]),_(c(T(_e,q),-I[1]),c(T(xe,X),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),I[2]),c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),-R[2]))),P[3]),c(_(_(c(_(c(T(Ye,Q),k[1]),_(c(T(Ie,oe),-P[1]),c(T(re,K),R[1]))),S[2]),c(_(c(T(Ye,Q),S[1]),_(c(T(_e,q),-P[1]),c(T(G,F),R[1]))),-k[2])),_(c(_(c(T(Ie,oe),S[1]),_(c(T(_e,q),-k[1]),c(T(V,O),R[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-R[2]))),-I[3])),_(c(_(_(c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),S[2]),c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),-k[2])),_(c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-I[2]))),R[3]),c(_(_(c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),k[2]),c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),-P[2])),_(c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),z[2]),c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),-I[2]))),S[3]))),_(_(c(_(_(c(_(c(T(Oe,me),P[1]),_(c(T(Ae,j),-z[1]),c(T(fe,ee),I[1]))),S[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-P[2])),_(c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),z[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-I[2]))),-k[3]),c(_(_(c(_(c(T(Oe,me),k[1]),_(c(T(ke,ue),-z[1]),c(T(ie,se),I[1]))),S[2]),c(_(c(T(Oe,me),S[1]),_(c(T(xe,X),-z[1]),c(T(ae,Y),I[1]))),-k[2])),_(c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),z[2]),c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),-I[2]))),P[3])),_(c(_(_(c(_(c(T(Ae,j),k[1]),_(c(T(ke,ue),-P[1]),c(T(re,K),I[1]))),S[2]),c(_(c(T(Ae,j),S[1]),_(c(T(xe,X),-P[1]),c(T(G,F),I[1]))),-k[2])),_(c(_(c(T(ke,ue),S[1]),_(c(T(xe,X),-k[1]),c(T(V,O),I[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-I[2]))),-z[3]),c(_(_(c(_(c(T(fe,ee),k[1]),_(c(T(ie,se),-P[1]),c(T(re,K),z[1]))),S[2]),c(_(c(T(fe,ee),S[1]),_(c(T(ae,Y),-P[1]),c(T(G,F),z[1]))),-k[2])),_(c(_(c(T(ie,se),S[1]),_(c(T(ae,Y),-k[1]),c(T(V,O),z[1]))),P[2]),c(_(c(T(re,K),S[1]),_(c(T(G,F),-k[1]),c(T(V,O),P[1]))),-z[2]))),I[3]))))),dt=T(Re,Ve);return dt[dt.length-1]}return L}var g=[s,i,f];function A(_){var T=g[_.length];return T||(T=g[_.length]=u(_.length)),T.apply(void 0,_)}function m(_,T,x,c,L,S,k,P){function z(I,R,D,O,F,Y){switch(arguments.length){case 0:case 1:return 0;case 2:return c(I,R);case 3:return L(I,R,D);case 4:return S(I,R,D,O);case 5:return k(I,R,D,O,F);case 6:return P(I,R,D,O,F,Y)}for(var X=new Array(arguments.length),q=0;q<arguments.length;++q)X[q]=arguments[q];return _(X)}return z}function M(){for(;g.length<=r;)g.push(u(g.length));b.exports=m.apply(void 0,[A].concat(g));for(var _=0;_<=r;++_)b.exports[_]=g[_]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(l,b,w){var e=l("robust-determinant"),o=3;function a(p){var v=p===2?u:s;return p<o?v(e[p]):v(e)}function n(){return[[0]]}function r(p,v){return[[v[0]],[p[0][0]]]}function u(p){return function(y,g){return[p([[+g[0],+y[0][1]],[+g[1],+y[1][1]]]),p([[+y[0][0],+g[0]],[+y[1][0],+g[1]]]),p(y)]}}function s(p){return function(y,g){return[p([[+g[0],+y[0][1],+y[0][2]],[+g[1],+y[1][1],+y[1][2]],[+g[2],+y[2][1],+y[2][2]]]),p([[+y[0][0],+g[0],+y[0][2]],[+y[1][0],+g[1],+y[1][2]],[+y[2][0],+g[2],+y[2][2]]]),p([[+y[0][0],+y[0][1],+g[0]],[+y[1][0],+y[1][1],+g[1]],[+y[2][0],+y[2][1],+g[2]]]),p(y)]}}var i=[n,r];function f(p,v,y,g,A,m){return function(_,T){switch(_.length){case 0:return p(_,T);case 1:return v(_,T);case 2:return y(_,T);case 3:return g(_,T)}var x=A[_.length];return x||(x=A[_.length]=m(_.length)),x(_,T)}}function h(){for(;i.length<=o;)i.push(a(i.length));b.exports=f.apply(void 0,i.concat([i,a]));for(var p=0;p<o;++p)b.exports[p]=i[p]}h()},{"robust-determinant":280}],284:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-scale"),n=l("robust-subtract"),r=5,u=11102230246251565e-32,s=(3+16*u)*u,i=(7+56*u)*u;function f(T,x,c,L){return function(k,P,z){var I=T(T(x(P[1],z[0]),x(-z[1],P[0])),T(x(k[1],P[0]),x(-P[1],k[0]))),R=T(x(k[1],z[0]),x(-z[1],k[0])),D=L(I,R);return D[D.length-1]}}function h(T,x,c,L){return function(k,P,z,I){var R=T(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),P[2]),T(c(T(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),c(T(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),T(c(T(x(P[1],I[0]),x(-I[1],P[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),I[2])))),D=T(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),c(T(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),T(c(T(x(P[1],z[0]),x(-z[1],P[0])),k[2]),T(c(T(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),z[2])))),O=L(R,D);return O[O.length-1]}}function p(T,x,c,L){return function(k,P,z,I,R){var D=T(T(T(c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),z[2]),T(c(T(x(z[1],R[0]),x(-R[1],z[0])),-I[2]),c(T(x(z[1],I[0]),x(-I[1],z[0])),R[2]))),P[3]),T(c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),P[2]),T(c(T(x(P[1],R[0]),x(-R[1],P[0])),-I[2]),c(T(x(P[1],I[0]),x(-I[1],P[0])),R[2]))),-z[3]),c(T(c(T(x(z[1],R[0]),x(-R[1],z[0])),P[2]),T(c(T(x(P[1],R[0]),x(-R[1],P[0])),-z[2]),c(T(x(P[1],z[0]),x(-z[1],P[0])),R[2]))),I[3]))),T(c(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),P[2]),T(c(T(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),c(T(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),-R[3]),T(c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),P[2]),T(c(T(x(P[1],R[0]),x(-R[1],P[0])),-I[2]),c(T(x(P[1],I[0]),x(-I[1],P[0])),R[2]))),k[3]),c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-I[2]),c(T(x(k[1],I[0]),x(-I[1],k[0])),R[2]))),-P[3])))),T(T(c(T(c(T(x(P[1],R[0]),x(-R[1],P[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),R[2]))),I[3]),T(c(T(c(T(x(P[1],I[0]),x(-I[1],P[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),I[2]))),-R[3]),c(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),P[2]),T(c(T(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),c(T(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),k[3]))),T(c(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),c(T(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),-P[3]),T(c(T(c(T(x(P[1],I[0]),x(-I[1],P[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),I[2]))),z[3]),c(T(c(T(x(P[1],z[0]),x(-z[1],P[0])),k[2]),T(c(T(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),z[2]))),-I[3]))))),O=T(T(T(c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),z[2]),T(c(T(x(z[1],R[0]),x(-R[1],z[0])),-I[2]),c(T(x(z[1],I[0]),x(-I[1],z[0])),R[2]))),k[3]),c(T(c(T(x(I[1],R[0]),x(-R[1],I[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-I[2]),c(T(x(k[1],I[0]),x(-I[1],k[0])),R[2]))),-z[3])),T(c(T(c(T(x(z[1],R[0]),x(-R[1],z[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-z[2]),c(T(x(k[1],z[0]),x(-z[1],k[0])),R[2]))),I[3]),c(T(c(T(x(z[1],I[0]),x(-I[1],z[0])),k[2]),T(c(T(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),c(T(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),-R[3]))),T(T(c(T(c(T(x(z[1],R[0]),x(-R[1],z[0])),P[2]),T(c(T(x(P[1],R[0]),x(-R[1],P[0])),-z[2]),c(T(x(P[1],z[0]),x(-z[1],P[0])),R[2]))),k[3]),c(T(c(T(x(z[1],R[0]),x(-R[1],z[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-z[2]),c(T(x(k[1],z[0]),x(-z[1],k[0])),R[2]))),-P[3])),T(c(T(c(T(x(P[1],R[0]),x(-R[1],P[0])),k[2]),T(c(T(x(k[1],R[0]),x(-R[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),R[2]))),z[3]),c(T(c(T(x(P[1],z[0]),x(-z[1],P[0])),k[2]),T(c(T(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),c(T(x(k[1],P[0]),x(-P[1],k[0])),z[2]))),-R[3])))),F=L(D,O);return F[F.length-1]}}function v(T){var x=T===3?f:T===4?h:p;return x(o,e,a,n)}var y=v(3),g=v(4),A=[function(){return 0},function(){return 0},function(x,c){return c[0]-x[0]},function(x,c,L){var S=(x[1]-L[1])*(c[0]-L[0]),k=(x[0]-L[0])*(c[1]-L[1]),P=S-k,z;if(S>0){if(k<=0)return P;z=S+k}else if(S<0){if(k>=0)return P;z=-(S+k)}else return P;var I=s*z;return P>=I||P<=-I?P:y(x,c,L)},function(x,c,L,S){var k=x[0]-S[0],P=c[0]-S[0],z=L[0]-S[0],I=x[1]-S[1],R=c[1]-S[1],D=L[1]-S[1],O=x[2]-S[2],F=c[2]-S[2],Y=L[2]-S[2],X=P*D,q=z*R,$=z*I,V=k*D,K=k*R,se=P*I,ue=O*(X-q)+F*($-V)+Y*(K-se),oe=(Math.abs(X)+Math.abs(q))*Math.abs(O)+(Math.abs($)+Math.abs(V))*Math.abs(F)+(Math.abs(K)+Math.abs(se))*Math.abs(Y),U=i*oe;return ue>U||-ue>U?ue:g(x,c,L,S)}];function m(T){var x=A[T.length];return x||(x=A[T.length]=v(T.length)),x.apply(void 0,T)}function M(T,x,c,L,S,k,P){return function(I,R,D,O,F){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,R);case 3:return S(I,R,D);case 4:return k(I,R,D,O);case 5:return P(I,R,D,O,F)}for(var Y=new Array(arguments.length),X=0;X<arguments.length;++X)Y[X]=arguments[X];return T(Y)}}function _(){for(;A.length<=r;)A.push(v(A.length));b.exports=M.apply(void 0,[m].concat(A));for(var T=0;T<=r;++T)b.exports[T]=A[T]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(l,b,w){var e=l("robust-sum"),o=l("robust-scale");b.exports=a;function a(n,r){if(n.length===1)return o(r,n[0]);if(r.length===1)return o(n,r[0]);if(n.length===0||r.length===0)return[0];var u=[0];if(n.length<r.length)for(var s=0;s<n.length;++s)u=e(u,o(r,n[s]));else for(var s=0;s<r.length;++s)u=e(u,o(n,r[s]));return u}},{"robust-scale":286,"robust-sum":289}],286:[function(l,b,w){var e=l("two-product"),o=l("two-sum");b.exports=a;function a(n,r){var u=n.length;if(u===1){var s=e(n[0],r);return s[0]?s:[s[1]]}var i=new Array(2*u),f=[.1,.1],h=[.1,.1],p=0;e(n[0],r,f),f[0]&&(i[p++]=f[0]);for(var v=1;v<u;++v){e(n[v],r,h);var y=f[1];o(y,h[0],f),f[0]&&(i[p++]=f[0]);var g=h[1],A=f[1],m=g+A,M=m-g,_=A-M;f[1]=m,_&&(i[p++]=_)}return f[1]&&(i[p++]=f[1]),p===0&&(i[p++]=0),i.length=p,i}},{"two-product":306,"two-sum":307}],287:[function(l,b,w){b.exports=a;var e=l("robust-orientation")[3];function o(n,r,u,s){for(var i=0;i<2;++i){var f=n[i],h=r[i],p=Math.min(f,h),v=Math.max(f,h),y=u[i],g=s[i],A=Math.min(y,g),m=Math.max(y,g);if(m<p||v<A)return!1}return!0}function a(n,r,u,s){var i=e(n,u,s),f=e(r,u,s);if(i>0&&f>0||i<0&&f<0)return!1;var h=e(u,n,r),p=e(s,n,r);return h>0&&p>0||h<0&&p<0?!1:i===0&&f===0&&h===0&&p===0?o(n,r,u,s):!0}},{"robust-orientation":284}],288:[function(l,b,w){b.exports=o;function e(a,n){var r=a+n,u=r-a,s=r-u,i=n-u,f=a-s,h=f+i;return h?[h,r]:[r]}function o(a,n){var r=a.length|0,u=n.length|0;if(r===1&&u===1)return e(a[0],-n[0]);var s=r+u,i=new Array(s),f=0,h=0,p=0,v=Math.abs,y=a[h],g=v(y),A=-n[p],m=v(A),M,_;g<m?(_=y,h+=1,h<r&&(y=a[h],g=v(y))):(_=A,p+=1,p<u&&(A=-n[p],m=v(A))),h<r&&g<m||p>=u?(M=y,h+=1,h<r&&(y=a[h],g=v(y))):(M=A,p+=1,p<u&&(A=-n[p],m=v(A)));for(var T=M+_,x=T-M,c=_-x,L=c,S=T,k,P,z,I,R;h<r&&p<u;)g<m?(M=y,h+=1,h<r&&(y=a[h],g=v(y))):(M=A,p+=1,p<u&&(A=-n[p],m=v(A))),_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k;for(;h<r;)M=y,_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,h+=1,h<r&&(y=a[h]);for(;p<u;)M=A,_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,p+=1,p<u&&(A=-n[p]);return L&&(i[f++]=L),S&&(i[f++]=S),f||(i[f++]=0),i.length=f,i}},{}],289:[function(l,b,w){b.exports=o;function e(a,n){var r=a+n,u=r-a,s=r-u,i=n-u,f=a-s,h=f+i;return h?[h,r]:[r]}function o(a,n){var r=a.length|0,u=n.length|0;if(r===1&&u===1)return e(a[0],n[0]);var s=r+u,i=new Array(s),f=0,h=0,p=0,v=Math.abs,y=a[h],g=v(y),A=n[p],m=v(A),M,_;g<m?(_=y,h+=1,h<r&&(y=a[h],g=v(y))):(_=A,p+=1,p<u&&(A=n[p],m=v(A))),h<r&&g<m||p>=u?(M=y,h+=1,h<r&&(y=a[h],g=v(y))):(M=A,p+=1,p<u&&(A=n[p],m=v(A)));for(var T=M+_,x=T-M,c=_-x,L=c,S=T,k,P,z,I,R;h<r&&p<u;)g<m?(M=y,h+=1,h<r&&(y=a[h],g=v(y))):(M=A,p+=1,p<u&&(A=n[p],m=v(A))),_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k;for(;h<r;)M=y,_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,h+=1,h<r&&(y=a[h]);for(;p<u;)M=A,_=L,T=M+_,x=T-M,c=_-x,c&&(i[f++]=c),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,p+=1,p<u&&(A=n[p]);return L&&(i[f++]=L),S&&(i[f++]=S),f||(i[f++]=0),i.length=f,i}},{}],290:[function(l,b,w){b.exports=a;var e=l("boundary-cells"),o=l("reduce-simplicial-complex");function a(n){return o(e(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(l,b,w){b.exports=p;var e=l("ndarray"),o=l("typedarray-pool"),a=l("ndarray-sort"),n=l("./lib/codegen");function r(v){for(var y=v.length,g=0,A=0;A<y;++A)g=Math.max(g,v[A].length)|0;return g-1}function u(v,y){for(var g=v.length,A=o.mallocUint8(g),m=0;m<g;++m)A[m]=v[m]<y|0;return A}function s(v,y){for(var g=v.length,A=y*(y+1)/2*g|0,m=o.mallocUint32(A*2),M=0,_=0;_<g;++_)for(var T=v[_],y=T.length,x=0;x<y;++x)for(var c=0;c<x;++c){var L=T[c],S=T[x];m[M++]=Math.min(L,S)|0,m[M++]=Math.max(L,S)|0}var k=M/2|0;a(e(m,[k,2]));for(var P=2,_=2;_<M;_+=2)m[_-2]===m[_]&&m[_-1]===m[_+1]||(m[P++]=m[_],m[P++]=m[_+1]);return e(m,[P/2|0,2])}function i(v,y,g,A){for(var m=v.data,M=v.shape[0],_=o.mallocDouble(M),T=0,x=0;x<M;++x){var c=m[2*x],L=m[2*x+1];if(g[c]!==g[L]){var S=y[c],k=y[L];m[2*T]=c,m[2*T+1]=L,_[T++]=(k-A)/(k-S)}}return v.shape[0]=T,e(_,[T])}function f(v,y){var g=o.mallocInt32(y*2),A=v.shape[0],m=v.data;g[0]=0;for(var M=0,_=0;_<A;++_){var T=m[2*_];if(T!==M){for(g[2*M+1]=_;++M<T;)g[2*M]=_,g[2*M+1]=_;g[2*M]=_}}for(g[2*M+1]=A;++M<y;)g[2*M]=g[2*M+1]=A;return g}function h(v){for(var y=v.shape[0]|0,g=v.data,A=new Array(y),m=0;m<y;++m)A[m]=[g[2*m],g[2*m+1]];return A}function p(v,y,g,A){g=g||0,typeof A=="undefined"&&(A=r(v));var m=v.length;if(m===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=u(y,+g),_=s(v,A),T=i(_,y,M,+g),x=f(_,y.length|0),c=n(A)(v,_.data,x,M),L=h(_),S=[].slice.call(T.data,0,T.shape[0]);return o.free(M),o.free(_.data),o.free(T.data),o.free(x),{cells:c,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(l,b,w){b.exports=o;var e=[function(){function n(r,u,s,i){for(var f=r.length,h=[],p=0;p<f;++p){var v=r[p];v.length}return h}return n},function(){function n(u,s,i,f){for(var h=Math.min(i,f)|0,p=Math.max(i,f)|0,v=u[2*h],y=u[2*h+1];v<y;){var g=v+y>>1,A=s[2*g+1];if(A===p)return g;p<A?y=g:v=g+1}return v}function r(u,s,i,f){for(var h=u.length,p=[],v=0;v<h;++v){var y=u[v],g=y.length;if(g===2){var A=(f[y[0]]<<0)+(f[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[1])]);break;case 2:p.push([n(i,s,y[1],y[0])]);break}}}return p}return r},function(){function n(u,s,i,f){for(var h=Math.min(i,f)|0,p=Math.max(i,f)|0,v=u[2*h],y=u[2*h+1];v<y;){var g=v+y>>1,A=s[2*g+1];if(A===p)return g;p<A?y=g:v=g+1}return v}function r(u,s,i,f){for(var h=u.length,p=[],v=0;v<h;++v){var y=u[v],g=y.length;if(g===3){var A=(f[y[0]]<<0)+(f[y[1]]<<1)+(f[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[2]),n(i,s,y[0],y[1])]);break;case 2:p.push([n(i,s,y[1],y[0]),n(i,s,y[1],y[2])]);break;case 3:p.push([n(i,s,y[0],y[2]),n(i,s,y[1],y[2])]);break;case 4:p.push([n(i,s,y[2],y[1]),n(i,s,y[2],y[0])]);break;case 5:p.push([n(i,s,y[2],y[1]),n(i,s,y[0],y[1])]);break;case 6:p.push([n(i,s,y[1],y[0]),n(i,s,y[2],y[0])]);break}}else if(g===2){var A=(f[y[0]]<<0)+(f[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[1])]);break;case 2:p.push([n(i,s,y[1],y[0])]);break}}}return p}return r},function(){function n(u,s,i,f){for(var h=Math.min(i,f)|0,p=Math.max(i,f)|0,v=u[2*h],y=u[2*h+1];v<y;){var g=v+y>>1,A=s[2*g+1];if(A===p)return g;p<A?y=g:v=g+1}return v}function r(u,s,i,f){for(var h=u.length,p=[],v=0;v<h;++v){var y=u[v],g=y.length;if(g===4){var A=(f[y[0]]<<0)+(f[y[1]]<<1)+(f[y[2]]<<2)+(f[y[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[1]),n(i,s,y[0],y[2]),n(i,s,y[0],y[3])]);break;case 2:p.push([n(i,s,y[1],y[2]),n(i,s,y[1],y[0]),n(i,s,y[1],y[3])]);break;case 3:p.push([n(i,s,y[1],y[2]),n(i,s,y[0],y[2]),n(i,s,y[0],y[3])],[n(i,s,y[1],y[3]),n(i,s,y[1],y[2]),n(i,s,y[0],y[3])]);break;case 4:p.push([n(i,s,y[2],y[0]),n(i,s,y[2],y[1]),n(i,s,y[2],y[3])]);break;case 5:p.push([n(i,s,y[0],y[1]),n(i,s,y[2],y[1]),n(i,s,y[0],y[3])],[n(i,s,y[2],y[1]),n(i,s,y[2],y[3]),n(i,s,y[0],y[3])]);break;case 6:p.push([n(i,s,y[2],y[0]),n(i,s,y[1],y[0]),n(i,s,y[1],y[3])],[n(i,s,y[2],y[3]),n(i,s,y[2],y[0]),n(i,s,y[1],y[3])]);break;case 7:p.push([n(i,s,y[0],y[3]),n(i,s,y[1],y[3]),n(i,s,y[2],y[3])]);break;case 8:p.push([n(i,s,y[3],y[1]),n(i,s,y[3],y[0]),n(i,s,y[3],y[2])]);break;case 9:p.push([n(i,s,y[3],y[1]),n(i,s,y[0],y[1]),n(i,s,y[0],y[2])],[n(i,s,y[3],y[2]),n(i,s,y[3],y[1]),n(i,s,y[0],y[2])]);break;case 10:p.push([n(i,s,y[1],y[0]),n(i,s,y[3],y[0]),n(i,s,y[1],y[2])],[n(i,s,y[3],y[0]),n(i,s,y[3],y[2]),n(i,s,y[1],y[2])]);break;case 11:p.push([n(i,s,y[1],y[2]),n(i,s,y[0],y[2]),n(i,s,y[3],y[2])]);break;case 12:p.push([n(i,s,y[3],y[0]),n(i,s,y[2],y[0]),n(i,s,y[2],y[1])],[n(i,s,y[3],y[1]),n(i,s,y[3],y[0]),n(i,s,y[2],y[1])]);break;case 13:p.push([n(i,s,y[0],y[1]),n(i,s,y[2],y[1]),n(i,s,y[3],y[1])]);break;case 14:p.push([n(i,s,y[2],y[0]),n(i,s,y[1],y[0]),n(i,s,y[3],y[0])]);break}}else if(g===3){var A=(f[y[0]]<<0)+(f[y[1]]<<1)+(f[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[2]),n(i,s,y[0],y[1])]);break;case 2:p.push([n(i,s,y[1],y[0]),n(i,s,y[1],y[2])]);break;case 3:p.push([n(i,s,y[0],y[2]),n(i,s,y[1],y[2])]);break;case 4:p.push([n(i,s,y[2],y[1]),n(i,s,y[2],y[0])]);break;case 5:p.push([n(i,s,y[2],y[1]),n(i,s,y[0],y[1])]);break;case 6:p.push([n(i,s,y[1],y[0]),n(i,s,y[2],y[0])]);break}}else if(g===2){var A=(f[y[0]]<<0)+(f[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:p.push([n(i,s,y[0],y[1])]);break;case 2:p.push([n(i,s,y[1],y[0])]);break}}}return p}return r}];function o(a){return e[a]()}},{}],293:[function(l,b,w){var e=l("bit-twiddle"),o=l("union-find");function a(T){for(var x=0,c=Math.max,L=0,S=T.length;L<S;++L)x=c(x,T[L].length);return x-1}w.dimension=a;function n(T){for(var x=-1,c=Math.max,L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,z=k.length;P<z;++P)x=c(x,k[P]);return x+1}w.countVertices=n;function r(T){for(var x=new Array(T.length),c=0,L=T.length;c<L;++c)x[c]=T[c].slice(0);return x}w.cloneCells=r;function u(T,x){var c=T.length,L=T.length-x.length,S=Math.min;if(L)return L;switch(c){case 0:return 0;case 1:return T[0]-x[0];case 2:var k=T[0]+T[1]-x[0]-x[1];return k||S(T[0],T[1])-S(x[0],x[1]);case 3:var P=T[0]+T[1],z=x[0]+x[1];if(k=P+T[2]-(z+x[2]),k)return k;var I=S(T[0],T[1]),R=S(x[0],x[1]),k=S(I,T[2])-S(R,x[2]);return k||S(I+T[2],P)-S(R+x[2],z);default:var D=T.slice(0);D.sort();var O=x.slice(0);O.sort();for(var F=0;F<c;++F)if(L=D[F]-O[F],L)return L;return 0}}w.compareCells=u;function s(T,x){return u(T[0],x[0])}function i(T,x){if(x){for(var c=T.length,L=new Array(c),S=0;S<c;++S)L[S]=[T[S],x[S]];L.sort(s);for(var S=0;S<c;++S)T[S]=L[S][0],x[S]=L[S][1];return T}else return T.sort(u),T}w.normalize=i;function f(T){if(T.length===0)return[];for(var x=1,c=T.length,L=1;L<c;++L){var S=T[L];if(u(S,T[L-1])){if(L===x){x++;continue}T[x++]=S}}return T.length=x,T}w.unique=f;function h(T,x){for(var c=0,L=T.length-1,S=-1;c<=L;){var k=c+L>>1,P=u(T[k],x);P<=0?(P===0&&(S=k),c=k+1):P>0&&(L=k-1)}return S}w.findCell=h;function p(T,x){for(var c=new Array(T.length),L=0,S=c.length;L<S;++L)c[L]=[];for(var k=[],L=0,P=x.length;L<P;++L)for(var z=x[L],I=z.length,R=1,D=1<<I;R<D;++R){k.length=e.popCount(R);for(var O=0,F=0;F<I;++F)R&1<<F&&(k[O++]=z[F]);var Y=h(T,k);if(!(Y<0))for(;c[Y++].push(L),!(Y>=T.length||u(T[Y],k)!==0););}return c}w.incidence=p;function v(T,x){if(!x)return p(f(g(T,0)),T);for(var c=new Array(x),L=0;L<x;++L)c[L]=[];for(var L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,z=k.length;P<z;++P)c[k[P]].push(L);return c}w.dual=v;function y(T){for(var x=[],c=0,L=T.length;c<L;++c)for(var S=T[c],k=S.length|0,P=1,z=1<<k;P<z;++P){for(var I=[],R=0;R<k;++R)P>>>R&1&&I.push(S[R]);x.push(I)}return i(x)}w.explode=y;function g(T,x){if(x<0)return[];for(var c=[],L=(1<<x+1)-1,S=0;S<T.length;++S)for(var k=T[S],P=L;P<1<<k.length;P=e.nextCombination(P)){for(var z=new Array(x+1),I=0,R=0;R<k.length;++R)P&1<<R&&(z[I++]=k[R]);c.push(z)}return i(c)}w.skeleton=g;function A(T){for(var x=[],c=0,L=T.length;c<L;++c)for(var S=T[c],k=0,P=S.length;k<P;++k){for(var z=new Array(S.length-1),I=0,R=0;I<P;++I)I!==k&&(z[R++]=S[I]);x.push(z)}return i(x)}w.boundary=A;function m(T,x){for(var c=new o(x),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)c.link(S[k],S[P]);for(var z=[],I=c.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<T.length;++L){var R=c.find(T[L][0]);I[R]<0?(I[R]=z.length,z.push([T[L].slice(0)])):z[I[R]].push(T[L].slice(0))}return z}function M(T){for(var x=f(i(g(T,0))),c=new o(x.length),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=h(x,[S[k]]),z=k+1;z<S.length;++z)c.link(P,h(x,[S[z]]));for(var I=[],R=c.ranks,L=0;L<R.length;++L)R[L]=-1;for(var L=0;L<T.length;++L){var D=c.find(h(x,[T[L][0]]));R[D]<0?(R[D]=I.length,I.push([T[L].slice(0)])):I[R[D]].push(T[L].slice(0))}return I}function _(T,x){return x?m(T,x):M(T)}w.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(l,b,w){arguments[4][32][0].apply(w,arguments)},{dup:32}],295:[function(l,b,w){arguments[4][293][0].apply(w,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(l,b,w){b.exports=e;function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var a=0;a<o;++a)this.roots[a]=a,this.ranks[a]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var a=this.roots;a[o]!==o;){var n=a[o];a[o]=a[n],o=n}return o},e.prototype.link=function(o,a){var n=this.find(o),r=this.find(a);if(n!==r){var u=this.ranks,s=this.roots,i=u[n],f=u[r];i<f?s[n]=r:f<i?s[r]=n:(s[r]=n,++u[n])}}},{}],297:[function(l,b,w){b.exports=n;var e=l("robust-orientation"),o=l("simplicial-complex");function a(r,u,s){var i=Math.abs(e(r,u,s)),f=Math.sqrt(Math.pow(u[0]-s[0],2)+Math.pow(u[1]-s[1],2));return i/f}function n(r,u,s){for(var i=u.length,f=r.length,h=new Array(i),p=new Array(i),v=new Array(i),y=new Array(i),g=0;g<i;++g)h[g]=p[g]=-1,v[g]=1/0,y[g]=!1;for(var g=0;g<f;++g){var A=r[g];if(A.length!==2)throw new Error("Input must be a graph");var m=A[1],M=A[0];p[M]!==-1?p[M]=-2:p[M]=m,h[m]!==-1?h[m]=-2:h[m]=M}function _($){if(y[$])return 1/0;var V=h[$],K=p[$];return V<0||K<0?1/0:a(u[$],u[V],u[K])}function T($,V){var K=I[$],se=I[V];I[$]=se,I[V]=K,R[K]=V,R[se]=$}function x($){return v[I[$]]}function c($){return $&1?$-1>>1:($>>1)-1}function L($){for(var V=x($);;){var K=V,se=2*$+1,ue=2*($+1),oe=$;if(se<O){var U=x(se);U<K&&(oe=se,K=U)}if(ue<O){var G=x(ue);G<K&&(oe=ue)}if(oe===$)return $;T($,oe),$=oe}}function S($){for(var V=x($);$>0;){var K=c($);if(K>=0){var se=x(K);if(V<se){T($,K),$=K;continue}}return $}}function k(){if(O>0){var $=I[0];return T(0,O-1),O-=1,L(0),$}return-1}function P($,V){var K=I[$];return v[K]===V?$:(v[K]=-1/0,S($),k(),v[K]=V,O+=1,S(O-1))}function z($){if(!y[$]){y[$]=!0;var V=h[$],K=p[$];h[K]>=0&&(h[K]=V),p[V]>=0&&(p[V]=K),R[V]>=0&&P(R[V],_(V)),R[K]>=0&&P(R[K],_(K))}}for(var I=[],R=new Array(i),g=0;g<i;++g){var D=v[g]=_(g);D<1/0?(R[g]=I.length,I.push(g)):R[g]=-1}for(var O=I.length,g=O>>1;g>=0;--g)L(g);for(;;){var F=k();if(F<0||v[F]>s)break;z(F)}for(var Y=[],g=0;g<i;++g)y[g]||(R[g]=Y.length,Y.push(u[g].slice()));Y.length;function X($,V){if($[V]<0)return V;var K=V,se=V;do{var ue=$[se];if(!y[se]||ue<0||ue===se||(se=ue,ue=$[se],!y[se]||ue<0||ue===se))break;se=ue,K=$[K]}while(K!==se);for(var oe=V;oe!==se;oe=$[oe])$[oe]=se;return se}var q=[];return r.forEach(function($){var V=X(h,$[0]),K=X(p,$[1]);if(V>=0&&K>=0&&V!==K){var se=R[V],ue=R[K];se!==ue&&q.push([se,ue])}}),o.unique(o.normalize(q)),{positions:Y,edges:q}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(l,b,w){b.exports=a;var e=l("robust-orientation");function o(n,r){var u,s;if(r[0][0]<r[1][0])u=r[0],s=r[1];else if(r[0][0]>r[1][0])u=r[1],s=r[0];else{var i=Math.min(n[0][1],n[1][1]),f=Math.max(n[0][1],n[1][1]),h=Math.min(r[0][1],r[1][1]),p=Math.max(r[0][1],r[1][1]);return f<h?f-h:i>p?i-p:f-p}var v,y;n[0][1]<n[1][1]?(v=n[0],y=n[1]):(v=n[1],y=n[0]);var g=e(s,u,v);return g||(g=e(s,u,y),g)?g:y-s}function a(n,r){var u,s;if(r[0][0]<r[1][0])u=r[0],s=r[1];else if(r[0][0]>r[1][0])u=r[1],s=r[0];else return o(r,n);var i,f;if(n[0][0]<n[1][0])i=n[0],f=n[1];else if(n[0][0]>n[1][0])i=n[1],f=n[0];else return-o(n,r);var h=e(u,s,f),p=e(u,s,i);if(h<0){if(p<=0)return h}else if(h>0){if(p>=0)return h}else if(p)return p;if(h=e(f,i,s),p=e(f,i,u),h<0){if(p<=0)return h}else if(h>0){if(p>=0)return h}else if(p)return p;return s[0]-f[0]}},{"robust-orientation":284}],299:[function(l,b,w){b.exports=p;var e=l("binary-search-bounds"),o=l("functional-red-black-tree"),a=l("robust-orientation"),n=l("./lib/order-segments");function r(v,y,g){this.slabs=v,this.coordinates=y,this.horizontal=g}var u=r.prototype;function s(v,y){return v.y-y}function i(v,y){for(var g=null;v;){var A=v.key,m,M;A[0][0]<A[1][0]?(m=A[0],M=A[1]):(m=A[1],M=A[0]);var _=a(m,M,y);if(_<0)v=v.left;else if(_>0)if(y[0]!==A[1][0])g=v,v=v.right;else{var T=i(v.right,y);if(T)return T;v=v.left}else{if(y[0]!==A[1][0])return v;var T=i(v.right,y);if(T)return T;v=v.left}}return g}u.castUp=function(v){var y=e.le(this.coordinates,v[0]);if(y<0)return-1;this.slabs[y];var g=i(this.slabs[y],v),A=-1;if(g&&(A=g.value),this.coordinates[y]===v[0]){var m=null;if(g&&(m=g.key),y>0){var M=i(this.slabs[y-1],v);M&&(m?n(M.key,m)>0&&(m=M.key,A=M.value):(A=M.value,m=M.key))}var _=this.horizontal[y];if(_.length>0){var T=e.ge(_,v[1],s);if(T<_.length){var x=_[T];if(v[1]===x.y){if(x.closed)return x.index;for(;T<_.length-1&&_[T+1].y===v[1];)if(T=T+1,x=_[T],x.closed)return x.index;if(x.y===v[1]&&!x.start){if(T=T+1,T>=_.length)return A;x=_[T]}}if(x.start)if(m){var c=a(m[0],m[1],[v[0],x.y]);m[0][0]>m[1][0]&&(c=-c),c>0&&(A=x.index)}else A=x.index;else x.y!==v[1]&&(A=x.index)}}}return A};function f(v,y,g,A){this.y=v,this.index=y,this.start=g,this.closed=A}function h(v,y,g,A){this.x=v,this.segment=y,this.create=g,this.index=A}function p(v){for(var y=v.length,g=2*y,A=new Array(g),m=0;m<y;++m){var M=v[m],_=M[0][0]<M[1][0];A[2*m]=new h(M[0][0],M,_,m),A[2*m+1]=new h(M[1][0],M,!_,m)}A.sort(function(z,I){var R=z.x-I.x;return R||(R=z.create-I.create,R)?R:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var T=o(n),x=[],c=[],L=[],m=0;m<g;){for(var S=A[m].x,k=[];m<g;){var P=A[m];if(P.x!==S)break;m+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new f(P.segment[0][1],P.index,!0,!0)),k.push(new f(P.segment[1][1],P.index,!1,!1))):(k.push(new f(P.segment[1][1],P.index,!0,!1)),k.push(new f(P.segment[0][1],P.index,!1,!0)))):P.create?T=T.insert(P.segment,P.index):T=T.remove(P.segment)}x.push(T.root),c.push(S),L.push(k)}return new r(x,c,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(l,b,w){var e=l("robust-dot-product"),o=l("robust-sum");b.exports=r,b.exports.positive=u,b.exports.negative=s;function a(i,f){var h=o(e(i,f),[f[f.length-1]]);return h[h.length-1]}function n(i,f,h,p){var v=p-f,y=-f/v;y<0?y=0:y>1&&(y=1);for(var g=1-y,A=i.length,m=new Array(A),M=0;M<A;++M)m[M]=y*i[M]+g*h[M];return m}function r(i,f){for(var h=[],p=[],v=a(i[i.length-1],f),y=i[i.length-1],g=i[0],A=0;A<i.length;++A,y=g){g=i[A];var m=a(g,f);if(v<0&&m>0||v>0&&m<0){var M=n(y,m,g,v);h.push(M),p.push(M.slice())}m<0?p.push(g.slice()):m>0?h.push(g.slice()):(h.push(g.slice()),p.push(g.slice())),v=m}return{positive:h,negative:p}}function u(i,f){for(var h=[],p=a(i[i.length-1],f),v=i[i.length-1],y=i[0],g=0;g<i.length;++g,v=y){y=i[g];var A=a(y,f);(p<0&&A>0||p>0&&A<0)&&h.push(n(v,A,y,p)),A>=0&&h.push(y.slice()),p=A}return h}function s(i,f){for(var h=[],p=a(i[i.length-1],f),v=i[i.length-1],y=i[0],g=0;g<i.length;++g,v=y){y=i[g];var A=a(y,f);(p<0&&A>0||p>0&&A<0)&&h.push(n(v,A,y,p)),A<=0&&h.push(y.slice()),p=A}return h}},{"robust-dot-product":281,"robust-sum":289}],301:[function(l,b,w){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(s){return n(u(s),arguments)}function a(s,i){return o.apply(null,[s].concat(i||[]))}function n(s,i){var f=1,h=s.length,p,v="",y,g,A,m,M,_,T,x;for(y=0;y<h;y++)if(typeof s[y]=="string")v+=s[y];else if(typeof s[y]=="object"){if(A=s[y],A.keys)for(p=i[f],g=0;g<A.keys.length;g++){if(p==null)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[g],A.keys[g-1]));p=p[A.keys[g]]}else A.param_no?p=i[A.param_no]:p=i[f++];if(e.not_type.test(A.type)&&e.not_primitive.test(A.type)&&p instanceof Function&&(p=p()),e.numeric_arg.test(A.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(o("[sprintf] expecting number but found %T",p));switch(e.number.test(A.type)&&(T=p>=0),A.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,A.width?parseInt(A.width):0);break;case"e":p=A.precision?parseFloat(p).toExponential(A.precision):parseFloat(p).toExponential();break;case"f":p=A.precision?parseFloat(p).toFixed(A.precision):parseFloat(p);break;case"g":p=A.precision?String(Number(p.toPrecision(A.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=A.precision?p.substring(0,A.precision):p;break;case"t":p=String(!!p),p=A.precision?p.substring(0,A.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=A.precision?p.substring(0,A.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=A.precision?p.substring(0,A.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}e.json.test(A.type)?v+=p:(e.number.test(A.type)&&(!T||A.sign)?(x=T?"+":"-",p=p.toString().replace(e.sign,"")):x="",M=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",_=A.width-(x+p).length,m=A.width&&_>0?M.repeat(_):"",v+=A.align?x+p+m:M==="0"?x+m+p:m+x+p)}return v}var r=Object.create(null);function u(s){if(r[s])return r[s];for(var i=s,f,h=[],p=0;i;){if((f=e.text.exec(i))!==null)h.push(f[0]);else if((f=e.modulo.exec(i))!==null)h.push("%");else if((f=e.placeholder.exec(i))!==null){if(f[2]){p|=1;var v=[],y=f[2],g=[];if((g=e.key.exec(y))!==null)for(v.push(g[1]);(y=y.substring(g[0].length))!=="";)if((g=e.key_access.exec(y))!==null)v.push(g[1]);else if((g=e.index_access.exec(y))!==null)v.push(g[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");f[2]=v}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:f[0],param_no:f[1],keys:f[2],sign:f[3],pad_char:f[4],align:f[5],width:f[6],precision:f[7],type:f[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");i=i.substring(f[0].length)}return r[s]=h}typeof w!="undefined"&&(w.sprintf=o,w.vsprintf=a),typeof window!="undefined"&&(window.sprintf=o,window.vsprintf=a)})()},{}],302:[function(l,b,w){b.exports=s;var e=l("ndarray-extract-contour"),o=l("zero-crossings"),a={"2d":function(i,f,h){var p=i({order:f,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(y,g,A,m){return y>m|0},vertex:function(y,g,A,m,M,_,T,x,c,L,S,k,P){var z=(T<<0)+(x<<1)+(c<<2)+(L<<3)|0;if(!(z===0||z===15))switch(z){case 0:S.push([y-.5,g-.5]);break;case 1:S.push([y-.25-.25*(m+A-2*P)/(A-m),g-.25-.25*(M+A-2*P)/(A-M)]);break;case 2:S.push([y-.75-.25*(-m-A+2*P)/(m-A),g-.25-.25*(_+m-2*P)/(m-_)]);break;case 3:S.push([y-.5,g-.5-.5*(M+A+_+m-4*P)/(A-M+m-_)]);break;case 4:S.push([y-.25-.25*(_+M-2*P)/(M-_),g-.75-.25*(-M-A+2*P)/(M-A)]);break;case 5:S.push([y-.5-.5*(m+A+_+M-4*P)/(A-m+M-_),g-.5]);break;case 6:S.push([y-.5-.25*(-m-A+_+M)/(m-A+M-_),g-.5-.25*(-M-A+_+m)/(M-A+m-_)]);break;case 7:S.push([y-.75-.25*(_+M-2*P)/(M-_),g-.75-.25*(_+m-2*P)/(m-_)]);break;case 8:S.push([y-.75-.25*(-_-M+2*P)/(_-M),g-.75-.25*(-_-m+2*P)/(_-m)]);break;case 9:S.push([y-.5-.25*(m+A+-_-M)/(A-m+_-M),g-.5-.25*(M+A+-_-m)/(A-M+_-m)]);break;case 10:S.push([y-.5-.5*(-m-A+-_-M+4*P)/(m-A+_-M),g-.5]);break;case 11:S.push([y-.25-.25*(-_-M+2*P)/(_-M),g-.75-.25*(M+A-2*P)/(A-M)]);break;case 12:S.push([y-.5,g-.5-.5*(-M-A+-_-m+4*P)/(M-A+_-m)]);break;case 13:S.push([y-.75-.25*(m+A-2*P)/(A-m),g-.25-.25*(-_-m+2*P)/(_-m)]);break;case 14:S.push([y-.25-.25*(-m-A+2*P)/(m-A),g-.25-.25*(-M-A+2*P)/(M-A)]);break;case 15:S.push([y-.5,g-.5]);break}},cell:function(y,g,A,m,M,_,T,x,c){M?x.push([y,g]):x.push([g,y])}});return function(v,y){var g=[],A=[];return p(v,g,A,y),{positions:g,cells:A}}}};function n(i,f){var h=i.length+"d",p=a[h];if(p)return p(e,i,f)}function r(i,f){for(var h=o(i,f),p=h.length,v=new Array(p),y=new Array(p),g=0;g<p;++g)v[g]=[h[g]],y[g]=[g];return{positions:v,cells:y}}var u={};function s(i,f){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return r(i,f);var h=i.order.join()+"-"+i.dtype,p=u[h],f=+f||0;return p||(p=u[h]=n(i.order,i.dtype)),p(i,f)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(l,b,w){(function(e){(function(){b.exports=u;var o=l("vectorize-text"),a=window||e.global||{},n=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function r(s){for(var i=s.cells,f=s.positions,h=new Float32Array(i.length*6),p=0,v=0,y=0;y<i.length;++y)for(var g=i[y],A=0;A<3;++A){var m=f[g[A]];h[p++]=m[0],h[p++]=m[1]+1.4,v=Math.max(m[0],v)}return{data:h,shape:v}}function u(s,i,f){var f=f||{},h=n[s];h||(h=n[s]={" ":{data:new Float32Array(0),shape:.2}});var p=h[i];if(!p)if(i.length<=1||!/\d/.test(i))p=h[i]=r(o(i,{triangles:!0,font:s,textAlign:f.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=i.split(/(\d|\s)/),y=new Array(v.length),g=0,A=0,m=0;m<v.length;++m)y[m]=u(s,v[m]),g+=y[m].data.length,A+=y[m].shape,m>0&&(A+=.02);for(var M=new Float32Array(g),_=0,T=-.5*A,m=0;m<y.length;++m){for(var x=y[m].data,c=0;c<x.length;c+=2)M[_++]=x[c]+T,M[_++]=x[c+1];T+=y[m].shape+.02}p=h[i]={data:M,shape:A}}return p}}).call(this)}).call(this,l("_process"))},{_process:5,"vectorize-text":311}],304:[function(l,b,w){var e=l("parse-unit");b.exports=r;var o=96;function a(u,s){var i=e(getComputedStyle(u).getPropertyValue(s));return i[0]*r(i[1],u)}function n(u,s){var i=document.createElement("div");i.style["font-size"]="128"+u,s.appendChild(i);var f=a(i,"font-size")/128;return s.removeChild(i),f}function r(u,s){switch(s=s||document.body,u=(u||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),u){case"%":return s.clientHeight/100;case"ch":case"ex":return n(u,s);case"em":return a(s,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}return 1}},{"parse-unit":265}],305:[function(l,b,w){b.exports=y;var e=l("filtered-vector"),o=l("gl-mat4/invert"),a=l("gl-mat4/rotate"),n=l("gl-vec3/cross"),r=l("gl-vec3/normalize"),u=l("gl-vec3/dot");function s(g,A,m){return Math.sqrt(Math.pow(g,2)+Math.pow(A,2)+Math.pow(m,2))}function i(g){return Math.min(1,Math.max(-1,g))}function f(g){var A=Math.abs(g[0]),m=Math.abs(g[1]),M=Math.abs(g[2]),_=[0,0,0];A>Math.max(m,M)?_[2]=1:m>Math.max(A,M)?_[0]=1:_[1]=1;for(var T=0,x=0,c=0;c<3;++c)T+=g[c]*g[c],x+=_[c]*g[c];for(var c=0;c<3;++c)_[c]-=x/T*g[c];return r(_,_),_}function h(g,A,m,M,_,T,x,c){this.center=e(m),this.up=e(M),this.right=e(_),this.radius=e([T]),this.angle=e([x,c]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var p=h.prototype;p.setDistanceLimits=function(g,A){g>0?g=Math.log(g):g=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=A},p.getDistanceLimits=function(g){var A=this.radius.bounds[0];return g?(g[0]=Math.exp(A[0][0]),g[1]=Math.exp(A[1][0]),g):[Math.exp(A[0][0]),Math.exp(A[1][0])]},p.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var A=this.computedUp,m=this.computedRight,M=0,_=0,T=0;T<3;++T)_+=A[T]*m[T],M+=A[T]*A[T];for(var x=Math.sqrt(M),c=0,T=0;T<3;++T)m[T]-=A[T]*_/M,c+=m[T]*m[T],A[T]/=x;for(var L=Math.sqrt(c),T=0;T<3;++T)m[T]/=L;var S=this.computedToward;n(S,A,m),r(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],z=this.computedAngle[1],I=Math.cos(P),R=Math.sin(P),D=Math.cos(z),O=Math.sin(z),F=this.computedCenter,Y=I*D,X=R*D,q=O,$=-I*O,V=-R*O,K=D,se=this.computedEye,ue=this.computedMatrix,T=0;T<3;++T){var oe=Y*m[T]+X*S[T]+q*A[T];ue[4*T+1]=$*m[T]+V*S[T]+K*A[T],ue[4*T+2]=oe,ue[4*T+3]=0}var U=ue[1],G=ue[5],re=ue[9],ee=ue[2],j=ue[6],Q=ue[10],ne=G*Q-re*j,ae=re*ee-U*Q,ie=U*j-G*ee,fe=s(ne,ae,ie);ne/=fe,ae/=fe,ie/=fe,ue[0]=ne,ue[4]=ae,ue[8]=ie;for(var T=0;T<3;++T)se[T]=F[T]+ue[2+4*T]*k;for(var T=0;T<3;++T){for(var c=0,me=0;me<3;++me)c+=ue[T+4*me]*se[me];ue[12+T]=-c}ue[15]=1},p.getMatrix=function(g,A){this.recalcMatrix(g);var m=this.computedMatrix;if(A){for(var M=0;M<16;++M)A[M]=m[M];return A}return m};var v=[0,0,0];p.rotate=function(g,A,m,M){if(this.angle.move(g,A,m),M){this.recalcMatrix(g);var _=this.computedMatrix;v[0]=_[2],v[1]=_[6],v[2]=_[10];for(var T=this.computedUp,x=this.computedRight,c=this.computedToward,L=0;L<3;++L)_[4*L]=T[L],_[4*L+1]=x[L],_[4*L+2]=c[L];a(_,_,M,v);for(var L=0;L<3;++L)T[L]=_[4*L],x[L]=_[4*L+1];this.up.set(g,T[0],T[1],T[2]),this.right.set(g,x[0],x[1],x[2])}},p.pan=function(g,A,m,M){A=A||0,m=m||0,M=M||0,this.recalcMatrix(g);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=_[1],x=_[5],c=_[9],L=s(T,x,c);T/=L,x/=L,c/=L;var S=_[0],k=_[4],P=_[8],z=S*T+k*x+P*c;S-=T*z,k-=x*z,P-=c*z;var I=s(S,k,P);S/=I,k/=I,P/=I;var R=S*A+T*m,D=k*A+x*m,O=P*A+c*m;this.center.move(g,R,D,O);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+M),this.radius.set(g,Math.log(F))},p.translate=function(g,A,m,M){this.center.move(g,A||0,m||0,M||0)},p.setMatrix=function(g,A,m,M){var _=1;typeof m=="number"&&(_=m|0),(_<0||_>3)&&(_=1);var T=(_+2)%3;A||(this.recalcMatrix(g),A=this.computedMatrix);var x=A[_],c=A[_+4],L=A[_+8];if(M){var k=Math.abs(x),P=Math.abs(c),z=Math.abs(L),I=Math.max(k,P,z);k===I?(x=x<0?-1:1,c=L=0):z===I?(L=L<0?-1:1,x=c=0):(c=c<0?-1:1,x=L=0)}else{var S=s(x,c,L);x/=S,c/=S,L/=S}var R=A[T],D=A[T+4],O=A[T+8],F=R*x+D*c+O*L;R-=x*F,D-=c*F,O-=L*F;var Y=s(R,D,O);R/=Y,D/=Y,O/=Y;var X=c*O-L*D,q=L*R-x*O,$=x*D-c*R,V=s(X,q,$);X/=V,q/=V,$/=V,this.center.jump(g,ke,Ae,Oe),this.radius.idle(g),this.up.jump(g,x,c,L),this.right.jump(g,R,D,O);var K,se;if(_===2){var ue=A[1],oe=A[5],U=A[9],G=ue*R+oe*D+U*O,re=ue*X+oe*q+U*$;ne<0?K=-Math.PI/2:K=Math.PI/2,se=Math.atan2(re,G)}else{var ee=A[2],j=A[6],Q=A[10],ne=ee*x+j*c+Q*L,ae=ee*R+j*D+Q*O,ie=ee*X+j*q+Q*$;K=Math.asin(i(ne)),se=Math.atan2(ie,ae)}this.angle.jump(g,se,K),this.recalcMatrix(g);var fe=A[2],me=A[6],ce=A[10],ye=this.computedMatrix;o(ye,A);var xe=ye[15],ke=ye[12]/xe,Ae=ye[13]/xe,Oe=ye[14]/xe,He=Math.exp(this.computedRadius[0]);this.center.jump(g,ke-fe*He,Ae-me*He,Oe-ce*He)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},p.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},p.setDistance=function(g,A){A>0&&this.radius.set(g,Math.log(A))},p.lookAt=function(g,A,m,M){this.recalcMatrix(g),A=A||this.computedEye,m=m||this.computedCenter,M=M||this.computedUp;var _=M[0],T=M[1],x=M[2],c=s(_,T,x);if(!(c<1e-6)){_/=c,T/=c,x/=c;var L=A[0]-m[0],S=A[1]-m[1],k=A[2]-m[2],P=s(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var z=this.computedRight,I=z[0],R=z[1],D=z[2],O=_*I+T*R+x*D;I-=O*_,R-=O*T,D-=O*x;var F=s(I,R,D);if(!(F<.01&&(I=T*k-x*S,R=x*L-_*k,D=_*S-T*L,F=s(I,R,D),F<1e-6))){I/=F,R/=F,D/=F,this.up.set(g,_,T,x),this.right.set(g,I,R,D),this.center.set(g,m[0],m[1],m[2]),this.radius.set(g,Math.log(P));var Y=T*D-x*R,X=x*I-_*D,q=_*R-T*I,$=s(Y,X,q);Y/=$,X/=$,q/=$;var V=_*L+T*S+x*k,K=I*L+R*S+D*k,se=Y*L+X*S+q*k,ue=Math.asin(i(V)),oe=Math.atan2(se,K),U=this.angle._state,G=U[U.length-1],re=U[U.length-2];G=G%(2*Math.PI);var ee=Math.abs(G+2*Math.PI-oe),j=Math.abs(G-oe),Q=Math.abs(G-2*Math.PI-oe);ee<j&&(G+=2*Math.PI),Q<j&&(G-=2*Math.PI),this.angle.jump(this.angle.lastT(),G,re),this.angle.set(g,oe,ue)}}}};function y(g){g=g||{};var A=g.center||[0,0,0],m=g.up||[0,1,0],M=g.right||f(m),_=g.radius||1,T=g.theta||0,x=g.phi||0;if(A=[].slice.call(A,0,3),m=[].slice.call(m,0,3),r(m,m),M=[].slice.call(M,0,3),r(M,M),"eye"in g){var c=g.eye,L=[c[0]-A[0],c[1]-A[1],c[2]-A[2]];n(M,L,m),s(M[0],M[1],M[2])<1e-6?M=f(m):r(M,M),_=s(L[0],L[1],L[2]);var S=u(m,L)/_,k=u(M,L)/_;x=Math.acos(S),T=Math.acos(k)}return _=Math.log(_),new h(g.zoomMin,g.zoomMax,A,m,M,_,T,x)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(l,b,w){b.exports=o;var e=+(Math.pow(2,27)+1);function o(a,n,r){var u=a*n,s=e*a,i=s-a,f=s-i,h=a-f,p=e*n,v=p-n,y=p-v,g=n-y,A=u-f*y,m=A-h*y,M=m-f*g,_=h*g-M;return r?(r[0]=_,r[1]=u,r):[_,u]}},{}],307:[function(l,b,w){b.exports=e;function e(o,a,n){var r=o+a,u=r-o,s=r-u,i=a-u,f=o-s;return n?(n[0]=f+i,n[1]=r,n):[f+i,r]}},{}],308:[function(l,b,w){(function(e){(function(){var o=l("bit-twiddle"),a=l("dup"),n=l("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var r=typeof Uint8ClampedArray!="undefined",u=typeof BigUint64Array!="undefined",s=typeof BigInt64Array!="undefined",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=a([32,0])),i.BIGUINT64||(i.BIGUINT64=a([32,0])),i.BIGINT64||(i.BIGINT64=a([32,0])),i.BUFFER||(i.BUFFER=a([32,0]));var f=i.DATA,h=i.BUFFER;w.free=function(R){if(n.isBuffer(R))h[o.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var D=R.length||R.byteLength,O=o.log2(D)|0;f[O].push(R)}};function p(I){if(!!I){var R=I.length||I.byteLength,D=o.log2(R);f[D].push(I)}}function v(I){p(I.buffer)}w.freeUint8=w.freeUint16=w.freeUint32=w.freeBigUint64=w.freeInt8=w.freeInt16=w.freeInt32=w.freeBigInt64=w.freeFloat32=w.freeFloat=w.freeFloat64=w.freeDouble=w.freeUint8Clamped=w.freeDataView=v,w.freeArrayBuffer=p,w.freeBuffer=function(R){h[o.log2(R.length)].push(R)},w.malloc=function(R,D){if(D===void 0||D==="arraybuffer")return y(R);switch(D){case"uint8":return g(R);case"uint16":return A(R);case"uint32":return m(R);case"int8":return M(R);case"int16":return _(R);case"int32":return T(R);case"float":case"float32":return x(R);case"double":case"float64":return c(R);case"uint8_clamped":return L(R);case"bigint64":return k(R);case"biguint64":return S(R);case"buffer":return z(R);case"data":case"dataview":return P(R);default:return null}return null};function y(I){var I=o.nextPow2(I),R=o.log2(I),D=f[R];return D.length>0?D.pop():new ArrayBuffer(I)}w.mallocArrayBuffer=y;function g(I){return new Uint8Array(y(I),0,I)}w.mallocUint8=g;function A(I){return new Uint16Array(y(2*I),0,I)}w.mallocUint16=A;function m(I){return new Uint32Array(y(4*I),0,I)}w.mallocUint32=m;function M(I){return new Int8Array(y(I),0,I)}w.mallocInt8=M;function _(I){return new Int16Array(y(2*I),0,I)}w.mallocInt16=_;function T(I){return new Int32Array(y(4*I),0,I)}w.mallocInt32=T;function x(I){return new Float32Array(y(4*I),0,I)}w.mallocFloat32=w.mallocFloat=x;function c(I){return new Float64Array(y(8*I),0,I)}w.mallocFloat64=w.mallocDouble=c;function L(I){return r?new Uint8ClampedArray(y(I),0,I):g(I)}w.mallocUint8Clamped=L;function S(I){return u?new BigUint64Array(y(8*I),0,I):null}w.mallocBigUint64=S;function k(I){return s?new BigInt64Array(y(8*I),0,I):null}w.mallocBigInt64=k;function P(I){return new DataView(y(I),0,I)}w.mallocDataView=P;function z(I){I=o.nextPow2(I);var R=o.log2(I),D=h[R];return D.length>0?D.pop():new n(I)}w.mallocBuffer=z,w.clearCache=function(){for(var R=0;R<32;++R)i.UINT8[R].length=0,i.UINT16[R].length=0,i.UINT32[R].length=0,i.INT8[R].length=0,i.INT16[R].length=0,i.INT32[R].length=0,i.FLOAT[R].length=0,i.DOUBLE[R].length=0,i.BIGUINT64[R].length=0,i.BIGINT64[R].length=0,i.UINT8C[R].length=0,f[R].length=0,h[R].length=0}}).call(this)}).call(this,typeof d!="undefined"?d:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(l,b,w){b.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.find=function(a){for(var n=a,r=this.roots;r[a]!==a;)a=r[a];for(;r[n]!==a;){var u=r[n];r[n]=a,n=u}return a},o.link=function(a,n){var r=this.find(a),u=this.find(n);if(r!==u){var s=this.ranks,i=this.roots,f=s[r],h=s[u];f<h?i[r]=u:h<f?i[u]=r:(i[u]=r,++s[r])}}},{}],310:[function(l,b,w){function e(n,r){for(var u=1,s=n.length,i=n[0],f=n[0],h=1;h<s;++h)if(f=i,i=n[h],r(i,f)){if(h===u){u++;continue}n[u++]=i}return n.length=u,n}function o(n){for(var r=1,u=n.length,s=n[0],i=n[0],f=1;f<u;++f,i=s)if(i=s,s=n[f],s!==i){if(f===r){r++;continue}n[r++]=s}return n.length=r,n}function a(n,r,u){return n.length===0?n:r?(u||n.sort(r),e(n,r)):(u||n.sort(),o(n))}b.exports=a},{}],311:[function(l,b,w){b.exports=n;var e=l("./lib/vtext"),o=null,a=null;typeof document!="undefined"&&(o=document.createElement("canvas"),o.width=8192,o.height=1024,a=o.getContext("2d"));function n(r,u){return(typeof u!="object"||u===null)&&(u={}),e(r,u.canvas||o,u.context||a,u)}},{"./lib/vtext":312}],312:[function(l,b,w){b.exports=S,b.exports.processPixels=L;var e=l("surface-nets"),o=l("ndarray"),a=l("simplify-planar-graph"),n=l("clean-pslg"),r=l("cdt2d"),u=l("planar-graph-to-polyline"),s="b",i="b|",f="i",h="i|",p="sup",v="+",y="+1",g="sub",A="-",m="-1";function M(k,P,z,I){for(var R="<"+k+">",D="</"+k+">",O=R.length,F=D.length,Y=P[0]===v||P[0]===A,X=0,q=-F;X>-1&&(X=z.indexOf(R,X),!(X===-1||(q=z.indexOf(D,X+O),q===-1)||q<=X));){for(var $=X;$<q+F;++$)if($<X+O||$>=q)I[$]=null,z=z.substr(0,$)+" "+z.substr($+1);else if(I[$]!==null){var V=I[$].indexOf(P[0]);V===-1?I[$]+=P:Y&&(I[$]=I[$].substr(0,V+1)+(1+parseInt(I[$][V+1]))+I[$].substr(V+2))}var K=X+O,se=z.substr(K,q-K),ue=se.indexOf(R);ue!==-1?X=ue:X=q+F}return I}function _(k,P,z){for(var I=P.textAlign||"start",R=P.textBaseline||"alphabetic",D=[1<<30,1<<30],O=[0,0],F=k.length,Y=0;Y<F;++Y)for(var X=k[Y],q=0;q<2;++q)D[q]=Math.min(D[q],X[q])|0,O[q]=Math.max(O[q],X[q])|0;var $=0;switch(I){case"center":$=-.5*(D[0]+O[0]);break;case"right":case"end":$=-O[0];break;case"left":case"start":$=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var V=0;switch(R){case"hanging":case"top":V=-D[1];break;case"middle":V=-.5*(D[1]+O[1]);break;case"alphabetic":case"ideographic":V=-3*z;break;case"bottom":V=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+R+"'")}var K=1/z;return"lineHeight"in P?K*=+P.lineHeight:"width"in P?K=P.width/(O[0]-D[0]):"height"in P&&(K=P.height/(O[1]-D[1])),k.map(function(se){return[K*(se[0]+$),K*(se[1]+V)]})}function T(k,P,z,I,R,D){z=z.replace(/\n/g,""),D.breaklines===!0?z=z.replace(/\<br\>/g,`
`):z=z.replace(/\<br\>/g," ");var O="",F=[];for(G=0;G<z.length;++G)F[G]=O;D.bolds===!0&&(F=M(s,i,z,F)),D.italics===!0&&(F=M(f,h,z,F)),D.superscripts===!0&&(F=M(p,y,z,F)),D.subscripts===!0&&(F=M(g,m,z,F));var Y=[],X="";for(G=0;G<z.length;++G)F[G]!==null&&(X+=z[G],Y.push(F[G]));var q=X.split(`
`),$=q.length,V=Math.round(R*I),K=I,se=I*2,ue=0,oe=$*V+se;k.height<oe&&(k.height=oe),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var U,G,re,ee,j,Q=0,ne="";function ae(){if(ne!==""){var Oe=P.measureText(ne).width;P.fillText(ne,K+re,se+ee),re+=Oe}}function ie(){return""+Math.round(j)+"px "}function fe(Oe,He){var Ge=""+P.font;if(D.subscripts===!0){var _e=Oe.indexOf(A),Ie=He.indexOf(A),Ye=_e>-1?parseInt(Oe[1+_e]):0,qe=Ie>-1?parseInt(He[1+Ie]):0;Ye!==qe&&(Ge=Ge.replace(ie(),"?px "),j*=Math.pow(.75,qe-Ye),Ge=Ge.replace("?px ",ie())),ee+=.25*V*(qe-Ye)}if(D.superscripts===!0){var Ue=Oe.indexOf(v),Re=He.indexOf(v),Ve=Ue>-1?parseInt(Oe[1+Ue]):0,dt=Re>-1?parseInt(He[1+Re]):0;Ve!==dt&&(Ge=Ge.replace(ie(),"?px "),j*=Math.pow(.75,dt-Ve),Ge=Ge.replace("?px ",ie())),ee-=.25*V*(dt-Ve)}if(D.bolds===!0){var Dt=Oe.indexOf(i)>-1,Gt=He.indexOf(i)>-1;!Dt&&Gt&&(kt?Ge=Ge.replace("italic ","italic bold "):Ge="bold "+Ge),Dt&&!Gt&&(Ge=Ge.replace("bold ",""))}if(D.italics===!0){var kt=Oe.indexOf(h)>-1,zt=He.indexOf(h)>-1;!kt&&zt&&(Ge="italic "+Ge),kt&&!zt&&(Ge=Ge.replace("italic ",""))}P.font=Ge}for(U=0;U<$;++U){var me=q[U]+`
`;for(re=0,ee=U*V,j=I,ne="",G=0;G<me.length;++G){var ce=G+Q<Y.length?Y[G+Q]:Y[Y.length-1];O===ce?ne+=me[G]:(ae(),ne=me[G],ce!==void 0&&(fe(O,ce),O=ce))}ae(),Q+=me.length;var ye=Math.round(re+2*K)|0;ue<ye&&(ue=ye)}var xe=ue,ke=se+V*$,Ae=o(P.getImageData(0,0,xe,ke).data,[ke,xe,4]);return Ae.pick(-1,-1,0).transpose(1,0)}function x(k,P){var z=e(k,128);return P?a(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function c(k,P,z,I){var R=x(k,I),D=_(R.positions,P,z),O=R.edges,F=P.orientation==="ccw";if(n(D,O),P.polygons||P.polygon||P.polyline){for(var Y=u(O,D),X=new Array(Y.length),q=0;q<Y.length;++q){for(var $=Y[q],V=new Array($.length),K=0;K<$.length;++K){for(var se=$[K],ue=new Array(se.length),oe=0;oe<se.length;++oe)ue[oe]=D[se[oe]].slice();F&&ue.reverse(),V[K]=ue}X[q]=V}return X}else return P.triangles||P.triangulate||P.triangle?{cells:r(D,O,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:O,positions:D}}function L(k,P,z){try{return c(k,P,z,!0)}catch{}try{return c(k,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,z,I){var R=64,D=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(R=I.size),I.lineSpacing&&I.lineSpacing>0&&(D=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),z.font=[I.fontStyle,I.fontVariant,I.fontWeight,R+"px",I.font].filter(function(Y){return Y}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr";var F=T(P,z,k,R,D,O);return L(F,I,R)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(l,b,w){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function o(L){L.permitHostObjects___&&L.permitHostObjects___(o)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=o);var a=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var r=new n,u=Object.freeze({});if(r.set(u,1),r.get(u)!==1)a=!0;else{b.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,i=Object.defineProperty,f=Object.isExtensible,h="weakmap:",p=h+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var v=new ArrayBuffer(25),y=new Uint8Array(v);crypto.getRandomValues(y),p=h+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function g(L){return!(L.substr(0,h.length)==h&&L.substr(L.length-3)==="___")}if(i(Object,"getOwnPropertyNames",{value:function(S){return s(S).filter(g)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(S){return A(S).filter(g)}})}function m(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[p];if(S&&S.key===L)return S;if(!!f(L)){S={key:L};try{return i(L,p,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;i(Object,"freeze",{value:function(z){return m(z),L(z)}});var S=Object.seal;i(Object,"seal",{value:function(z){return m(z),S(z)}});var k=Object.preventExtensions;i(Object,"preventExtensions",{value:function(z){return m(z),k(z)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var _=!1;function T(){!_&&typeof console!="undefined"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var x=0,c=function(){this instanceof c||T();var L=[],S=[],k=x++;function P(D,O){var F,Y=m(D);return Y?k in Y?Y[k]:O:(F=L.indexOf(D),F>=0?S[F]:O)}function z(D){var O=m(D);return O?k in O:L.indexOf(D)>=0}function I(D,O){var F,Y=m(D);return Y?Y[k]=O:(F=L.indexOf(D),F>=0?S[F]=O:(F=L.length,S[F]=O,L[F]=D)),this}function R(D){var O=m(D),F,Y;return O?k in O&&delete O[k]:(F=L.indexOf(D),F<0?!1:(Y=L.length-1,L[F]=void 0,S[F]=S[Y],L[F]=L[Y],L.length=Y,S.length=Y,!0))}return Object.create(c.prototype,{get___:{value:M(P)},has___:{value:M(z)},set___:{value:M(I)},delete___:{value:M(R)}})};c.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof n=="function"?function(){a&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof c||T();var S=new n,k=void 0,P=!1;function z(O,F){return k?S.has(O)?S.get(O):k.get___(O,F):S.get(O,F)}function I(O){return S.has(O)||(k?k.has___(O):!1)}var R;a?R=function(O,F){return S.set(O,F),S.has(O)||(k||(k=new c),k.set(O,F)),this}:R=function(O,F){if(P)try{S.set(O,F)}catch{k||(k=new c),k.set___(O,F)}else S.set(O,F);return this};function D(O){var F=!!S.delete(O);return k&&k.delete___(O)||F}return Object.create(c.prototype,{get___:{value:M(z)},has___:{value:M(I)},set___:{value:M(R)},delete___:{value:M(D)},permitHostObjects___:{value:M(function(O){if(O===o)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=c.prototype,b.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),b.exports=c)})()},{}],314:[function(l,b,w){var e=l("./hidden-store.js");b.exports=o;function o(){var a={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(a);return r&&r.identity===a?r:e(n,a)}}},{"./hidden-store.js":315}],315:[function(l,b,w){b.exports=e;function e(o,a){var n={identity:a},r=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(u){return u!==a?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(l,b,w){var e=l("./create-store.js");b.exports=o;function o(){var a=e();return{get:function(n,r){var u=a(n);return u.hasOwnProperty("value")?u.value:r},set:function(n,r){return a(n).value=r,this},has:function(n){return"value"in a(n)},delete:function(n){return delete a(n).value}}}},{"./create-store.js":314}],317:[function(l,b,w){function e(){return function(s,i,f,h,p,v){var y=s[0],g=f[0],A=[0],m=g;h|=0;var M=0,_=g;for(M=0;M<y;++M){{var T=i[h]-v,x=i[h+m]-v;T>=0!=x>=0&&p.push(A[0]+.5+.5*(T+x)/(T-x))}h+=_,++A[0]}}}function o(){return e()}var a=o;function n(s){var i={};return function(h,p,v){var y=h.dtype,g=h.order,A=[y,g.join()].join(),m=i[A];return m||(i[A]=m=s([y,g])),m(h.shape.slice(0),h.data,h.stride,h.offset|0,p,v)}}function r(s){return n(a.bind(void 0,s))}function u(s){return r({funcName:s.funcName})}b.exports=u({funcName:"zeroCrossings"})},{}],318:[function(l,b,w){b.exports=o;var e=l("./lib/zc-core");function o(a,n){var r=[];return n=+n||0,e(a.hi(a.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(d2);(function(Z){Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var le=B(p2),t=B(d2.exports);function B(l){return l&&l.__esModule?l:{default:l}}var H=(0,le.default)(t.default),d=H;Z.default=d})(v2);var A5=l3(v2);export{T5 as P,w5 as R,A5 as a,_5 as b,h5 as j,kv as r};
